import{a as Xv,b as Zv,r as M,c as Qv,R as e0,A as Fv,C as t0,X as n0,Y as a0,T as s0,d as gd,B as Kv,e as hd,f as ar,i as Iv,g as r0,h as Jv,j as i0,k as Wv,l as Pv,m as go,n as md,u as e1}from"./recharts-CLtLozKo.js";import{X as bt,I as t1,C as ka,a as Ap,b as Td,L as Tp,c as n1,U as a1,d as hn,e as Kd,M as s1,H as r1,f as Ci,G as bo,g as pi,S as Md,h as l0,i as i1,j as l1,k as To,l as xi,R as Mo,m as er,P as _a,n as fi,o as an,p as o1,q as Mp,T as o0,A as c0,r as Dd,s as c1,F as dr,t as gn,u as Dp,v as Id,w as Do,x as Ei,y as u1,z as sn,B as u0,D as Op,E as d1,J as f1,K as g1,N as h1,W as pd,O as m1,Q as Jd,V as yi,Y as Lp,Z as tr,_ as p1,$ as x1,a0 as y1,a1 as zi,a2 as b1,a3 as v1,a4 as N1,a5 as j1,a6 as w1,a7 as Rp,a8 as d0,a9 as Hp,aa as Up,ab as S1,ac as Bp,ad as $p,ae as Wd,af as Vp,ag as _1,ah as k1,ai as C1,aj as E1,ak as z1}from"./icons-DhOyLYQ6.js";import{u as qp,N as A1,a as ss,b as so,O as T1,L as ho,c as Yp,B as M1,R as D1,d as yt}from"./router-BJ1N55rV.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function l(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(c){if(c.ep)return;c.ep=!0;const d=l(c);fetch(c.href,d)}})();var xd={exports:{}},ri={};var f0;function O1(){if(f0)return ri;f0=1;var n=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function l(o,c,d){var f=null;if(d!==void 0&&(f=""+d),c.key!==void 0&&(f=""+c.key),"key"in c){d={};for(var h in c)h!=="key"&&(d[h]=c[h])}else d=c;return c=d.ref,{$$typeof:n,type:o,key:f,ref:c!==void 0?c:null,props:d}}return ri.Fragment=s,ri.jsx=l,ri.jsxs=l,ri}var g0;function L1(){return g0||(g0=1,xd.exports=O1()),xd.exports}var r=L1(),yd={exports:{}},ii={},bd={exports:{}},vd={};var h0;function R1(){return h0||(h0=1,(function(n){function s(_,O){var U=_.length;_.push(O);e:for(;0<U;){var Y=U-1>>>1,te=_[Y];if(0<c(te,O))_[Y]=O,_[U]=te,U=Y;else break e}}function l(_){return _.length===0?null:_[0]}function o(_){if(_.length===0)return null;var O=_[0],U=_.pop();if(U!==O){_[0]=U;e:for(var Y=0,te=_.length,F=te>>>1;Y<F;){var P=2*(Y+1)-1,se=_[P],le=P+1,fe=_[le];if(0>c(se,U))le<te&&0>c(fe,se)?(_[Y]=fe,_[le]=U,Y=le):(_[Y]=se,_[P]=U,Y=P);else if(le<te&&0>c(fe,U))_[Y]=fe,_[le]=U,Y=le;else break e}}return O}function c(_,O){var U=_.sortIndex-O.sortIndex;return U!==0?U:_.id-O.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;n.unstable_now=function(){return d.now()}}else{var f=Date,h=f.now();n.unstable_now=function(){return f.now()-h}}var p=[],m=[],y=1,x=null,v=3,j=!1,w=!1,T=!1,z=!1,A=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function E(_){for(var O=l(m);O!==null;){if(O.callback===null)o(m);else if(O.startTime<=_)o(m),O.sortIndex=O.expirationTime,s(p,O);else break;O=l(m)}}function L(_){if(T=!1,E(_),!w)if(l(p)!==null)w=!0,B||(B=!0,Z());else{var O=l(m);O!==null&&D(L,O.startTime-_)}}var B=!1,V=-1,X=5,H=-1;function K(){return z?!0:!(n.unstable_now()-H<X)}function q(){if(z=!1,B){var _=n.unstable_now();H=_;var O=!0;try{e:{w=!1,T&&(T=!1,k(V),V=-1),j=!0;var U=v;try{t:{for(E(_),x=l(p);x!==null&&!(x.expirationTime>_&&K());){var Y=x.callback;if(typeof Y=="function"){x.callback=null,v=x.priorityLevel;var te=Y(x.expirationTime<=_);if(_=n.unstable_now(),typeof te=="function"){x.callback=te,E(_),O=!0;break t}x===l(p)&&o(p),E(_)}else o(p);x=l(p)}if(x!==null)O=!0;else{var F=l(m);F!==null&&D(L,F.startTime-_),O=!1}}break e}finally{x=null,v=U,j=!1}O=void 0}}finally{O?Z():B=!1}}}var Z;if(typeof N=="function")Z=function(){N(q)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,C=Q.port2;Q.port1.onmessage=q,Z=function(){C.postMessage(null)}}else Z=function(){A(q,0)};function D(_,O){V=A(function(){_(n.unstable_now())},O)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(_){_.callback=null},n.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<_?Math.floor(1e3/_):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(_){switch(v){case 1:case 2:case 3:var O=3;break;default:O=v}var U=v;v=O;try{return _()}finally{v=U}},n.unstable_requestPaint=function(){z=!0},n.unstable_runWithPriority=function(_,O){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var U=v;v=_;try{return O()}finally{v=U}},n.unstable_scheduleCallback=function(_,O,U){var Y=n.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?Y+U:Y):U=Y,_){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=U+te,_={id:y++,callback:O,priorityLevel:_,startTime:U,expirationTime:te,sortIndex:-1},U>Y?(_.sortIndex=U,s(m,_),l(p)===null&&_===l(m)&&(T?(k(V),V=-1):T=!0,D(L,U-Y))):(_.sortIndex=te,s(p,_),w||j||(w=!0,B||(B=!0,Z()))),_},n.unstable_shouldYield=K,n.unstable_wrapCallback=function(_){var O=v;return function(){var U=v;v=O;try{return _.apply(this,arguments)}finally{v=U}}}})(vd)),vd}var m0;function H1(){return m0||(m0=1,bd.exports=R1()),bd.exports}var p0;function U1(){if(p0)return ii;p0=1;var n=H1(),s=Xv(),l=Zv();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(d(e)!==e)throw Error(o(188))}function m(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(o(188));return t!==e?null:e}for(var a=e,i=t;;){var u=a.return;if(u===null)break;var g=u.alternate;if(g===null){if(i=u.return,i!==null){a=i;continue}break}if(u.child===g.child){for(g=u.child;g;){if(g===a)return p(u),e;if(g===i)return p(u),t;g=g.sibling}throw Error(o(188))}if(a.return!==i.return)a=u,i=g;else{for(var b=!1,S=u.child;S;){if(S===a){b=!0,a=u,i=g;break}if(S===i){b=!0,i=u,a=g;break}S=S.sibling}if(!b){for(S=g.child;S;){if(S===a){b=!0,a=g,i=u;break}if(S===i){b=!0,i=g,a=u;break}S=S.sibling}if(!b)throw Error(o(189))}}if(a.alternate!==i)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,v=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),N=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function Z(e){return e===null||typeof e!="object"?null:(e=q&&e[q]||e["@@iterator"],typeof e=="function"?e:null)}var Q=Symbol.for("react.client.reference");function C(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Q?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case A:return"Profiler";case z:return"StrictMode";case L:return"Suspense";case B:return"SuspenseList";case H:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case N:return e.displayName||"Context";case k:return(e._context.displayName||"Context")+".Consumer";case E:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case V:return t=e.displayName||null,t!==null?t:C(e.type)||"Memo";case X:t=e._payload,e=e._init;try{return C(e(t))}catch{}}return null}var D=Array.isArray,_=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},Y=[],te=-1;function F(e){return{current:e}}function P(e){0>te||(e.current=Y[te],Y[te]=null,te--)}function se(e,t){te++,Y[te]=e.current,e.current=t}var le=F(null),fe=F(null),be=F(null),he=F(null);function oe(e,t){switch(se(be,t),se(fe,e),se(le,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?wm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=wm(t),e=Sm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}P(le),se(le,e)}function ue(){P(le),P(fe),P(be)}function _e(e){e.memoizedState!==null&&se(he,e);var t=le.current,a=Sm(t,e.type);t!==a&&(se(fe,e),se(le,a))}function we(e){fe.current===e&&(P(le),P(fe)),he.current===e&&(P(he),ti._currentValue=U)}var xe,Ne;function ie(e){if(xe===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);xe=t&&t[1]||"",Ne=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xe+e+Ne}var ye=!1;function Se(e,t){if(!e||ye)return"";ye=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(ee){var W=ee}Reflect.construct(e,[],re)}else{try{re.call()}catch(ee){W=ee}e.call(re.prototype)}}else{try{throw Error()}catch(ee){W=ee}(re=e())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(ee){if(ee&&W&&typeof ee.stack=="string")return[ee.stack,W.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=i.DetermineComponentFrameRoot(),b=g[0],S=g[1];if(b&&S){var R=b.split(`
`),J=S.split(`
`);for(u=i=0;i<R.length&&!R[i].includes("DetermineComponentFrameRoot");)i++;for(;u<J.length&&!J[u].includes("DetermineComponentFrameRoot");)u++;if(i===R.length||u===J.length)for(i=R.length-1,u=J.length-1;1<=i&&0<=u&&R[i]!==J[u];)u--;for(;1<=i&&0<=u;i--,u--)if(R[i]!==J[u]){if(i!==1||u!==1)do if(i--,u--,0>u||R[i]!==J[u]){var ne=`
`+R[i].replace(" at new "," at ");return e.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",e.displayName)),ne}while(1<=i&&0<=u);break}}}finally{ye=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?ie(a):""}function Ye(e,t){switch(e.tag){case 26:case 27:case 5:return ie(e.type);case 16:return ie("Lazy");case 13:return e.child!==t&&t!==null?ie("Suspense Fallback"):ie("Suspense");case 19:return ie("SuspenseList");case 0:case 15:return Se(e.type,!1);case 11:return Se(e.type.render,!1);case 1:return Se(e.type,!0);case 31:return ie("Activity");default:return""}}function Ft(e){try{var t="",a=null;do t+=Ye(e,a),a=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var zt=Object.prototype.hasOwnProperty,Kt=n.unstable_scheduleCallback,bn=n.unstable_cancelCallback,Ca=n.unstable_shouldYield,Ea=n.unstable_requestPaint,ct=n.unstable_now,is=n.unstable_getCurrentPriorityLevel,vn=n.unstable_ImmediatePriority,Zn=n.unstable_UserBlockingPriority,za=n.unstable_NormalPriority,Io=n.unstable_LowPriority,ls=n.unstable_IdlePriority,Jo=n.log,Wo=n.unstable_setDisableYieldValue,Aa=null,mt=null;function ln(e){if(typeof Jo=="function"&&Wo(e),mt&&typeof mt.setStrictMode=="function")try{mt.setStrictMode(Aa,e)}catch{}}var pt=Math.clz32?Math.clz32:tc,Po=Math.log,ec=Math.LN2;function tc(e){return e>>>=0,e===0?32:31-(Po(e)/ec|0)|0}var os=256,cs=262144,us=4194304;function Nn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ds(e,t,a){var i=e.pendingLanes;if(i===0)return 0;var u=0,g=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var S=i&134217727;return S!==0?(i=S&~g,i!==0?u=Nn(i):(b&=S,b!==0?u=Nn(b):a||(a=S&~e,a!==0&&(u=Nn(a))))):(S=i&~g,S!==0?u=Nn(S):b!==0?u=Nn(b):a||(a=i&~e,a!==0&&(u=Nn(a)))),u===0?0:t!==0&&t!==u&&(t&g)===0&&(g=u&-u,a=t&-t,g>=a||g===32&&(a&4194048)!==0)?t:u}function Ta(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function nc(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Li(){var e=us;return us<<=1,(us&62914560)===0&&(us=4194304),e}function fr(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Ma(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ac(e,t,a,i,u,g){var b=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var S=e.entanglements,R=e.expirationTimes,J=e.hiddenUpdates;for(a=b&~a;0<a;){var ne=31-pt(a),re=1<<ne;S[ne]=0,R[ne]=-1;var W=J[ne];if(W!==null)for(J[ne]=null,ne=0;ne<W.length;ne++){var ee=W[ne];ee!==null&&(ee.lane&=-536870913)}a&=~re}i!==0&&Ri(e,i,0),g!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=g&~(b&~t))}function Ri(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-pt(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|a&261930}function Hi(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var i=31-pt(a),u=1<<i;u&t|e[i]&t&&(e[i]|=t),a&=~u}}function Ui(e,t){var a=t&-t;return a=(a&42)!==0?1:gr(a),(a&(e.suspendedLanes|t))!==0?0:a}function gr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function hr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Bi(){var e=O.p;return e!==0?e:(e=window.event,e===void 0?32:Qm(e.type))}function $i(e,t){var a=O.p;try{return O.p=e,t()}finally{O.p=a}}var on=Math.random().toString(36).slice(2),rt="__reactFiber$"+on,ht="__reactProps$"+on,jn="__reactContainer$"+on,fs="__reactEvents$"+on,Vi="__reactListeners$"+on,sc="__reactHandles$"+on,qi="__reactResources$"+on,Da="__reactMarker$"+on;function mr(e){delete e[rt],delete e[ht],delete e[fs],delete e[Vi],delete e[sc]}function Qn(e){var t=e[rt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[jn]||a[rt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Tm(e);e!==null;){if(a=e[rt])return a;e=Tm(e)}return t}e=a,a=e.parentNode}return null}function Fn(e){if(e=e[rt]||e[jn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Kn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function In(e){var t=e[qi];return t||(t=e[qi]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Pe(e){e[Da]=!0}var Yi=new Set,Gi={};function wn(e,t){Jn(e,t),Jn(e+"Capture",t)}function Jn(e,t){for(Gi[e]=t,e=0;e<t.length;e++)Yi.add(t[e])}var rc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pr={},Xi={};function ic(e){return zt.call(Xi,e)?!0:zt.call(pr,e)?!1:rc.test(e)?Xi[e]=!0:(pr[e]=!0,!1)}function gs(e,t,a){if(ic(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function hs(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function It(e,t,a,i){if(i===null)e.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+i)}}function Nt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Zi(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function lc(e,t,a){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var u=i.get,g=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(b){a=""+b,g.call(this,b)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ms(e){if(!e._valueTracker){var t=Zi(e)?"checked":"value";e._valueTracker=lc(e,t,""+e[t])}}function Qi(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),i="";return e&&(i=Zi(e)?e.checked?"true":"false":e.value),e=i,e!==a?(t.setValue(e),!0):!1}function Oa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var oc=/[\n"\\]/g;function jt(e){return e.replace(oc,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function La(e,t,a,i,u,g,b,S){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),t!=null?b==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Nt(t)):e.value!==""+Nt(t)&&(e.value=""+Nt(t)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),t!=null?xr(e,b,Nt(t)):a!=null?xr(e,b,Nt(a)):i!=null&&e.removeAttribute("value"),u==null&&g!=null&&(e.defaultChecked=!!g),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+Nt(S):e.removeAttribute("name")}function Fi(e,t,a,i,u,g,b,S){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),t!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||t!=null)){ms(e);return}a=a!=null?""+Nt(a):"",t=t!=null?""+Nt(t):a,S||t===e.value||(e.value=t),e.defaultValue=t}i=i??u,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=S?e.checked:!!i,e.defaultChecked=!!i,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),ms(e)}function xr(e,t,a){t==="number"&&Oa(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Sn(e,t,a,i){if(e=e.options,t){t={};for(var u=0;u<a.length;u++)t["$"+a[u]]=!0;for(a=0;a<e.length;a++)u=t.hasOwnProperty("$"+e[a].value),e[a].selected!==u&&(e[a].selected=u),u&&i&&(e[a].defaultSelected=!0)}else{for(a=""+Nt(a),t=null,u=0;u<e.length;u++){if(e[u].value===a){e[u].selected=!0,i&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function yf(e,t,a){if(t!=null&&(t=""+Nt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Nt(a):""}function bf(e,t,a,i){if(t==null){if(i!=null){if(a!=null)throw Error(o(92));if(D(i)){if(1<i.length)throw Error(o(93));i=i[0]}a=i}a==null&&(a=""),t=a}a=Nt(t),e.defaultValue=a,i=e.textContent,i===a&&i!==""&&i!==null&&(e.value=i),ms(e)}function ps(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var $y=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vf(e,t,a){var i=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,a):typeof a!="number"||a===0||$y.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Nf(e,t,a){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,a!=null){for(var i in a)!a.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var u in t)i=t[u],t.hasOwnProperty(u)&&a[u]!==i&&vf(e,u,i)}else for(var g in t)t.hasOwnProperty(g)&&vf(e,g,t[g])}function cc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ki(e){return qy.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function _n(){}var uc=null;function dc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xs=null,ys=null;function jf(e){var t=Fn(e);if(t&&(e=t.stateNode)){var a=e[ht]||null;e:switch(e=t.stateNode,t.type){case"input":if(La(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+jt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var i=a[t];if(i!==e&&i.form===e.form){var u=i[ht]||null;if(!u)throw Error(o(90));La(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<a.length;t++)i=a[t],i.form===e.form&&Qi(i)}break e;case"textarea":yf(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Sn(e,!!a.multiple,t,!1)}}}var fc=!1;function wf(e,t,a){if(fc)return e(t,a);fc=!0;try{var i=e(t);return i}finally{if(fc=!1,(xs!==null||ys!==null)&&(Rl(),xs&&(t=xs,e=ys,ys=xs=null,jf(t),e)))for(t=0;t<e.length;t++)jf(e[t])}}function yr(e,t){var a=e.stateNode;if(a===null)return null;var i=a[ht]||null;if(i===null)return null;a=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(o(231,t,typeof a));return a}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gc=!1;if(kn)try{var br={};Object.defineProperty(br,"passive",{get:function(){gc=!0}}),window.addEventListener("test",br,br),window.removeEventListener("test",br,br)}catch{gc=!1}var Wn=null,hc=null,Ii=null;function Sf(){if(Ii)return Ii;var e,t=hc,a=t.length,i,u="value"in Wn?Wn.value:Wn.textContent,g=u.length;for(e=0;e<a&&t[e]===u[e];e++);var b=a-e;for(i=1;i<=b&&t[a-i]===u[g-i];i++);return Ii=u.slice(e,1<i?1-i:void 0)}function Ji(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Wi(){return!0}function _f(){return!1}function wt(e){function t(a,i,u,g,b){this._reactName=a,this._targetInst=u,this.type=i,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(a=e[S],this[S]=a?a(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Wi:_f,this.isPropagationStopped=_f,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wi)},persist:function(){},isPersistent:Wi}),t}var Ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pi=wt(Ra),vr=x({},Ra,{view:0,detail:0}),Yy=wt(vr),mc,pc,Nr,el=x({},vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Nr&&(Nr&&e.type==="mousemove"?(mc=e.screenX-Nr.screenX,pc=e.screenY-Nr.screenY):pc=mc=0,Nr=e),mc)},movementY:function(e){return"movementY"in e?e.movementY:pc}}),kf=wt(el),Gy=x({},el,{dataTransfer:0}),Xy=wt(Gy),Zy=x({},vr,{relatedTarget:0}),xc=wt(Zy),Qy=x({},Ra,{animationName:0,elapsedTime:0,pseudoElement:0}),Fy=wt(Qy),Ky=x({},Ra,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Iy=wt(Ky),Jy=x({},Ra,{data:0}),Cf=wt(Jy),Wy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Py={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=eb[e])?!!t[e]:!1}function yc(){return tb}var nb=x({},vr,{key:function(e){if(e.key){var t=Wy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ji(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Py[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yc,charCode:function(e){return e.type==="keypress"?Ji(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ji(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ab=wt(nb),sb=x({},el,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ef=wt(sb),rb=x({},vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yc}),ib=wt(rb),lb=x({},Ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),ob=wt(lb),cb=x({},el,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ub=wt(cb),db=x({},Ra,{newState:0,oldState:0}),fb=wt(db),gb=[9,13,27,32],bc=kn&&"CompositionEvent"in window,jr=null;kn&&"documentMode"in document&&(jr=document.documentMode);var hb=kn&&"TextEvent"in window&&!jr,zf=kn&&(!bc||jr&&8<jr&&11>=jr),Af=" ",Tf=!1;function Mf(e,t){switch(e){case"keyup":return gb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Df(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bs=!1;function mb(e,t){switch(e){case"compositionend":return Df(t);case"keypress":return t.which!==32?null:(Tf=!0,Af);case"textInput":return e=t.data,e===Af&&Tf?null:e;default:return null}}function pb(e,t){if(bs)return e==="compositionend"||!bc&&Mf(e,t)?(e=Sf(),Ii=hc=Wn=null,bs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zf&&t.locale!=="ko"?null:t.data;default:return null}}var xb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Of(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!xb[e.type]:t==="textarea"}function Lf(e,t,a,i){xs?ys?ys.push(i):ys=[i]:xs=i,t=Yl(t,"onChange"),0<t.length&&(a=new Pi("onChange","change",null,a,i),e.push({event:a,listeners:t}))}var wr=null,Sr=null;function yb(e){xm(e,0)}function tl(e){var t=Kn(e);if(Qi(t))return e}function Rf(e,t){if(e==="change")return t}var Hf=!1;if(kn){var vc;if(kn){var Nc="oninput"in document;if(!Nc){var Uf=document.createElement("div");Uf.setAttribute("oninput","return;"),Nc=typeof Uf.oninput=="function"}vc=Nc}else vc=!1;Hf=vc&&(!document.documentMode||9<document.documentMode)}function Bf(){wr&&(wr.detachEvent("onpropertychange",$f),Sr=wr=null)}function $f(e){if(e.propertyName==="value"&&tl(Sr)){var t=[];Lf(t,Sr,e,dc(e)),wf(yb,t)}}function bb(e,t,a){e==="focusin"?(Bf(),wr=t,Sr=a,wr.attachEvent("onpropertychange",$f)):e==="focusout"&&Bf()}function vb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return tl(Sr)}function Nb(e,t){if(e==="click")return tl(t)}function jb(e,t){if(e==="input"||e==="change")return tl(t)}function wb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var At=typeof Object.is=="function"?Object.is:wb;function _r(e,t){if(At(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(i=0;i<a.length;i++){var u=a[i];if(!zt.call(t,u)||!At(e[u],t[u]))return!1}return!0}function Vf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qf(e,t){var a=Vf(e);e=0;for(var i;a;){if(a.nodeType===3){if(i=e+a.textContent.length,e<=t&&i>=t)return{node:a,offset:t-e};e=i}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Vf(a)}}function Yf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Yf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Gf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Oa(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Oa(e.document)}return t}function jc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Sb=kn&&"documentMode"in document&&11>=document.documentMode,vs=null,wc=null,kr=null,Sc=!1;function Xf(e,t,a){var i=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Sc||vs==null||vs!==Oa(i)||(i=vs,"selectionStart"in i&&jc(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),kr&&_r(kr,i)||(kr=i,i=Yl(wc,"onSelect"),0<i.length&&(t=new Pi("onSelect","select",null,t,a),e.push({event:t,listeners:i}),t.target=vs)))}function Ha(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Ns={animationend:Ha("Animation","AnimationEnd"),animationiteration:Ha("Animation","AnimationIteration"),animationstart:Ha("Animation","AnimationStart"),transitionrun:Ha("Transition","TransitionRun"),transitionstart:Ha("Transition","TransitionStart"),transitioncancel:Ha("Transition","TransitionCancel"),transitionend:Ha("Transition","TransitionEnd")},_c={},Zf={};kn&&(Zf=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function Ua(e){if(_c[e])return _c[e];if(!Ns[e])return e;var t=Ns[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Zf)return _c[e]=t[a];return e}var Qf=Ua("animationend"),Ff=Ua("animationiteration"),Kf=Ua("animationstart"),_b=Ua("transitionrun"),kb=Ua("transitionstart"),Cb=Ua("transitioncancel"),If=Ua("transitionend"),Jf=new Map,kc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kc.push("scrollEnd");function Jt(e,t){Jf.set(e,t),wn(t,[e])}var nl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Bt=[],js=0,Cc=0;function al(){for(var e=js,t=Cc=js=0;t<e;){var a=Bt[t];Bt[t++]=null;var i=Bt[t];Bt[t++]=null;var u=Bt[t];Bt[t++]=null;var g=Bt[t];if(Bt[t++]=null,i!==null&&u!==null){var b=i.pending;b===null?u.next=u:(u.next=b.next,b.next=u),i.pending=u}g!==0&&Wf(a,u,g)}}function sl(e,t,a,i){Bt[js++]=e,Bt[js++]=t,Bt[js++]=a,Bt[js++]=i,Cc|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Ec(e,t,a,i){return sl(e,t,a,i),rl(e)}function Ba(e,t){return sl(e,null,null,t),rl(e)}function Wf(e,t,a){e.lanes|=a;var i=e.alternate;i!==null&&(i.lanes|=a);for(var u=!1,g=e.return;g!==null;)g.childLanes|=a,i=g.alternate,i!==null&&(i.childLanes|=a),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(u=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,u&&t!==null&&(u=31-pt(a),e=g.hiddenUpdates,i=e[u],i===null?e[u]=[t]:i.push(t),t.lane=a|536870912),g):null}function rl(e){if(50<Fr)throw Fr=0,Hu=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ws={};function Eb(e,t,a,i){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(e,t,a,i){return new Eb(e,t,a,i)}function zc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Cn(e,t){var a=e.alternate;return a===null?(a=Tt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Pf(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function il(e,t,a,i,u,g){var b=0;if(i=e,typeof e=="function")zc(e)&&(b=1);else if(typeof e=="string")b=Dv(e,a,le.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case H:return e=Tt(31,a,t,u),e.elementType=H,e.lanes=g,e;case T:return $a(a.children,u,g,t);case z:b=8,u|=24;break;case A:return e=Tt(12,a,t,u|2),e.elementType=A,e.lanes=g,e;case L:return e=Tt(13,a,t,u),e.elementType=L,e.lanes=g,e;case B:return e=Tt(19,a,t,u),e.elementType=B,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N:b=10;break e;case k:b=9;break e;case E:b=11;break e;case V:b=14;break e;case X:b=16,i=null;break e}b=29,a=Error(o(130,e===null?"null":typeof e,"")),i=null}return t=Tt(b,a,t,u),t.elementType=e,t.type=i,t.lanes=g,t}function $a(e,t,a,i){return e=Tt(7,e,i,t),e.lanes=a,e}function Ac(e,t,a){return e=Tt(6,e,null,t),e.lanes=a,e}function eg(e){var t=Tt(18,null,null,0);return t.stateNode=e,t}function Tc(e,t,a){return t=Tt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var tg=new WeakMap;function $t(e,t){if(typeof e=="object"&&e!==null){var a=tg.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Ft(t)},tg.set(e,t),t)}return{value:e,source:t,stack:Ft(t)}}var Ss=[],_s=0,ll=null,Cr=0,Vt=[],qt=0,Pn=null,cn=1,un="";function En(e,t){Ss[_s++]=Cr,Ss[_s++]=ll,ll=e,Cr=t}function ng(e,t,a){Vt[qt++]=cn,Vt[qt++]=un,Vt[qt++]=Pn,Pn=e;var i=cn;e=un;var u=32-pt(i)-1;i&=~(1<<u),a+=1;var g=32-pt(t)+u;if(30<g){var b=u-u%5;g=(i&(1<<b)-1).toString(32),i>>=b,u-=b,cn=1<<32-pt(t)+u|a<<u|i,un=g+e}else cn=1<<g|a<<u|i,un=e}function Mc(e){e.return!==null&&(En(e,1),ng(e,1,0))}function Dc(e){for(;e===ll;)ll=Ss[--_s],Ss[_s]=null,Cr=Ss[--_s],Ss[_s]=null;for(;e===Pn;)Pn=Vt[--qt],Vt[qt]=null,un=Vt[--qt],Vt[qt]=null,cn=Vt[--qt],Vt[qt]=null}function ag(e,t){Vt[qt++]=cn,Vt[qt++]=un,Vt[qt++]=Pn,cn=t.id,un=t.overflow,Pn=e}var ut=null,Ge=null,Me=!1,ea=null,Yt=!1,Oc=Error(o(519));function ta(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Er($t(t,e)),Oc}function sg(e){var t=e.stateNode,a=e.type,i=e.memoizedProps;switch(t[rt]=e,t[ht]=i,a){case"dialog":ze("cancel",t),ze("close",t);break;case"iframe":case"object":case"embed":ze("load",t);break;case"video":case"audio":for(a=0;a<Ir.length;a++)ze(Ir[a],t);break;case"source":ze("error",t);break;case"img":case"image":case"link":ze("error",t),ze("load",t);break;case"details":ze("toggle",t);break;case"input":ze("invalid",t),Fi(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":ze("invalid",t);break;case"textarea":ze("invalid",t),bf(t,i.value,i.defaultValue,i.children)}a=i.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||i.suppressHydrationWarning===!0||Nm(t.textContent,a)?(i.popover!=null&&(ze("beforetoggle",t),ze("toggle",t)),i.onScroll!=null&&ze("scroll",t),i.onScrollEnd!=null&&ze("scrollend",t),i.onClick!=null&&(t.onclick=_n),t=!0):t=!1,t||ta(e,!0)}function rg(e){for(ut=e.return;ut;)switch(ut.tag){case 5:case 31:case 13:Yt=!1;return;case 27:case 3:Yt=!0;return;default:ut=ut.return}}function ks(e){if(e!==ut)return!1;if(!Me)return rg(e),Me=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Wu(e.type,e.memoizedProps)),a=!a),a&&Ge&&ta(e),rg(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Ge=Am(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Ge=Am(e)}else t===27?(t=Ge,ma(e.type)?(e=ad,ad=null,Ge=e):Ge=t):Ge=ut?Xt(e.stateNode.nextSibling):null;return!0}function Va(){Ge=ut=null,Me=!1}function Lc(){var e=ea;return e!==null&&(Ct===null?Ct=e:Ct.push.apply(Ct,e),ea=null),e}function Er(e){ea===null?ea=[e]:ea.push(e)}var Rc=F(null),qa=null,zn=null;function na(e,t,a){se(Rc,t._currentValue),t._currentValue=a}function An(e){e._currentValue=Rc.current,P(Rc)}function Hc(e,t,a){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===a)break;e=e.return}}function Uc(e,t,a,i){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var g=u.dependencies;if(g!==null){var b=u.child;g=g.firstContext;e:for(;g!==null;){var S=g;g=u;for(var R=0;R<t.length;R++)if(S.context===t[R]){g.lanes|=a,S=g.alternate,S!==null&&(S.lanes|=a),Hc(g.return,a,e),i||(b=null);break e}g=S.next}}else if(u.tag===18){if(b=u.return,b===null)throw Error(o(341));b.lanes|=a,g=b.alternate,g!==null&&(g.lanes|=a),Hc(b,a,e),b=null}else b=u.child;if(b!==null)b.return=u;else for(b=u;b!==null;){if(b===e){b=null;break}if(u=b.sibling,u!==null){u.return=b.return,b=u;break}b=b.return}u=b}}function Cs(e,t,a,i){e=null;for(var u=t,g=!1;u!==null;){if(!g){if((u.flags&524288)!==0)g=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var b=u.alternate;if(b===null)throw Error(o(387));if(b=b.memoizedProps,b!==null){var S=u.type;At(u.pendingProps.value,b.value)||(e!==null?e.push(S):e=[S])}}else if(u===he.current){if(b=u.alternate,b===null)throw Error(o(387));b.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(ti):e=[ti])}u=u.return}e!==null&&Uc(t,e,a,i),t.flags|=262144}function ol(e){for(e=e.firstContext;e!==null;){if(!At(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ya(e){qa=e,zn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function dt(e){return ig(qa,e)}function cl(e,t){return qa===null&&Ya(e),ig(e,t)}function ig(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},zn===null){if(e===null)throw Error(o(308));zn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else zn=zn.next=t;return a}var zb=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Ab=n.unstable_scheduleCallback,Tb=n.unstable_NormalPriority,et={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bc(){return{controller:new zb,data:new Map,refCount:0}}function zr(e){e.refCount--,e.refCount===0&&Ab(Tb,function(){e.controller.abort()})}var Ar=null,$c=0,Es=0,zs=null;function Mb(e,t){if(Ar===null){var a=Ar=[];$c=0,Es=Yu(),zs={status:"pending",value:void 0,then:function(i){a.push(i)}}}return $c++,t.then(lg,lg),t}function lg(){if(--$c===0&&Ar!==null){zs!==null&&(zs.status="fulfilled");var e=Ar;Ar=null,Es=0,zs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Db(e,t){var a=[],i={status:"pending",value:null,reason:null,then:function(u){a.push(u)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var u=0;u<a.length;u++)(0,a[u])(t)},function(u){for(i.status="rejected",i.reason=u,u=0;u<a.length;u++)(0,a[u])(void 0)}),i}var og=_.S;_.S=function(e,t){Xh=ct(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Mb(e,t),og!==null&&og(e,t)};var Ga=F(null);function Vc(){var e=Ga.current;return e!==null?e:qe.pooledCache}function ul(e,t){t===null?se(Ga,Ga.current):se(Ga,t.pool)}function cg(){var e=Vc();return e===null?null:{parent:et._currentValue,pool:e}}var As=Error(o(460)),qc=Error(o(474)),dl=Error(o(542)),fl={then:function(){}};function ug(e){return e=e.status,e==="fulfilled"||e==="rejected"}function dg(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(_n,_n),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,gg(e),e;default:if(typeof t.status=="string")t.then(_n,_n);else{if(e=qe,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=i}},function(i){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,gg(e),e}throw Za=t,As}}function Xa(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Za=a,As):a}}var Za=null;function fg(){if(Za===null)throw Error(o(459));var e=Za;return Za=null,e}function gg(e){if(e===As||e===dl)throw Error(o(483))}var Ts=null,Tr=0;function gl(e){var t=Tr;return Tr+=1,Ts===null&&(Ts=[]),dg(Ts,e,t)}function Mr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function hl(e,t){throw t.$$typeof===v?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function hg(e){function t(G,$){if(e){var I=G.deletions;I===null?(G.deletions=[$],G.flags|=16):I.push($)}}function a(G,$){if(!e)return null;for(;$!==null;)t(G,$),$=$.sibling;return null}function i(G){for(var $=new Map;G!==null;)G.key!==null?$.set(G.key,G):$.set(G.index,G),G=G.sibling;return $}function u(G,$){return G=Cn(G,$),G.index=0,G.sibling=null,G}function g(G,$,I){return G.index=I,e?(I=G.alternate,I!==null?(I=I.index,I<$?(G.flags|=67108866,$):I):(G.flags|=67108866,$)):(G.flags|=1048576,$)}function b(G){return e&&G.alternate===null&&(G.flags|=67108866),G}function S(G,$,I,ae){return $===null||$.tag!==6?($=Ac(I,G.mode,ae),$.return=G,$):($=u($,I),$.return=G,$)}function R(G,$,I,ae){var pe=I.type;return pe===T?ne(G,$,I.props.children,ae,I.key):$!==null&&($.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===X&&Xa(pe)===$.type)?($=u($,I.props),Mr($,I),$.return=G,$):($=il(I.type,I.key,I.props,null,G.mode,ae),Mr($,I),$.return=G,$)}function J(G,$,I,ae){return $===null||$.tag!==4||$.stateNode.containerInfo!==I.containerInfo||$.stateNode.implementation!==I.implementation?($=Tc(I,G.mode,ae),$.return=G,$):($=u($,I.children||[]),$.return=G,$)}function ne(G,$,I,ae,pe){return $===null||$.tag!==7?($=$a(I,G.mode,ae,pe),$.return=G,$):($=u($,I),$.return=G,$)}function re(G,$,I){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Ac(""+$,G.mode,I),$.return=G,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case j:return I=il($.type,$.key,$.props,null,G.mode,I),Mr(I,$),I.return=G,I;case w:return $=Tc($,G.mode,I),$.return=G,$;case X:return $=Xa($),re(G,$,I)}if(D($)||Z($))return $=$a($,G.mode,I,null),$.return=G,$;if(typeof $.then=="function")return re(G,gl($),I);if($.$$typeof===N)return re(G,cl(G,$),I);hl(G,$)}return null}function W(G,$,I,ae){var pe=$!==null?$.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return pe!==null?null:S(G,$,""+I,ae);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case j:return I.key===pe?R(G,$,I,ae):null;case w:return I.key===pe?J(G,$,I,ae):null;case X:return I=Xa(I),W(G,$,I,ae)}if(D(I)||Z(I))return pe!==null?null:ne(G,$,I,ae,null);if(typeof I.then=="function")return W(G,$,gl(I),ae);if(I.$$typeof===N)return W(G,$,cl(G,I),ae);hl(G,I)}return null}function ee(G,$,I,ae,pe){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return G=G.get(I)||null,S($,G,""+ae,pe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case j:return G=G.get(ae.key===null?I:ae.key)||null,R($,G,ae,pe);case w:return G=G.get(ae.key===null?I:ae.key)||null,J($,G,ae,pe);case X:return ae=Xa(ae),ee(G,$,I,ae,pe)}if(D(ae)||Z(ae))return G=G.get(I)||null,ne($,G,ae,pe,null);if(typeof ae.then=="function")return ee(G,$,I,gl(ae),pe);if(ae.$$typeof===N)return ee(G,$,I,cl($,ae),pe);hl($,ae)}return null}function de(G,$,I,ae){for(var pe=null,Oe=null,ge=$,Ce=$=0,Te=null;ge!==null&&Ce<I.length;Ce++){ge.index>Ce?(Te=ge,ge=null):Te=ge.sibling;var Le=W(G,ge,I[Ce],ae);if(Le===null){ge===null&&(ge=Te);break}e&&ge&&Le.alternate===null&&t(G,ge),$=g(Le,$,Ce),Oe===null?pe=Le:Oe.sibling=Le,Oe=Le,ge=Te}if(Ce===I.length)return a(G,ge),Me&&En(G,Ce),pe;if(ge===null){for(;Ce<I.length;Ce++)ge=re(G,I[Ce],ae),ge!==null&&($=g(ge,$,Ce),Oe===null?pe=ge:Oe.sibling=ge,Oe=ge);return Me&&En(G,Ce),pe}for(ge=i(ge);Ce<I.length;Ce++)Te=ee(ge,G,Ce,I[Ce],ae),Te!==null&&(e&&Te.alternate!==null&&ge.delete(Te.key===null?Ce:Te.key),$=g(Te,$,Ce),Oe===null?pe=Te:Oe.sibling=Te,Oe=Te);return e&&ge.forEach(function(va){return t(G,va)}),Me&&En(G,Ce),pe}function ve(G,$,I,ae){if(I==null)throw Error(o(151));for(var pe=null,Oe=null,ge=$,Ce=$=0,Te=null,Le=I.next();ge!==null&&!Le.done;Ce++,Le=I.next()){ge.index>Ce?(Te=ge,ge=null):Te=ge.sibling;var va=W(G,ge,Le.value,ae);if(va===null){ge===null&&(ge=Te);break}e&&ge&&va.alternate===null&&t(G,ge),$=g(va,$,Ce),Oe===null?pe=va:Oe.sibling=va,Oe=va,ge=Te}if(Le.done)return a(G,ge),Me&&En(G,Ce),pe;if(ge===null){for(;!Le.done;Ce++,Le=I.next())Le=re(G,Le.value,ae),Le!==null&&($=g(Le,$,Ce),Oe===null?pe=Le:Oe.sibling=Le,Oe=Le);return Me&&En(G,Ce),pe}for(ge=i(ge);!Le.done;Ce++,Le=I.next())Le=ee(ge,G,Ce,Le.value,ae),Le!==null&&(e&&Le.alternate!==null&&ge.delete(Le.key===null?Ce:Le.key),$=g(Le,$,Ce),Oe===null?pe=Le:Oe.sibling=Le,Oe=Le);return e&&ge.forEach(function(Gv){return t(G,Gv)}),Me&&En(G,Ce),pe}function Ve(G,$,I,ae){if(typeof I=="object"&&I!==null&&I.type===T&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case j:e:{for(var pe=I.key;$!==null;){if($.key===pe){if(pe=I.type,pe===T){if($.tag===7){a(G,$.sibling),ae=u($,I.props.children),ae.return=G,G=ae;break e}}else if($.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===X&&Xa(pe)===$.type){a(G,$.sibling),ae=u($,I.props),Mr(ae,I),ae.return=G,G=ae;break e}a(G,$);break}else t(G,$);$=$.sibling}I.type===T?(ae=$a(I.props.children,G.mode,ae,I.key),ae.return=G,G=ae):(ae=il(I.type,I.key,I.props,null,G.mode,ae),Mr(ae,I),ae.return=G,G=ae)}return b(G);case w:e:{for(pe=I.key;$!==null;){if($.key===pe)if($.tag===4&&$.stateNode.containerInfo===I.containerInfo&&$.stateNode.implementation===I.implementation){a(G,$.sibling),ae=u($,I.children||[]),ae.return=G,G=ae;break e}else{a(G,$);break}else t(G,$);$=$.sibling}ae=Tc(I,G.mode,ae),ae.return=G,G=ae}return b(G);case X:return I=Xa(I),Ve(G,$,I,ae)}if(D(I))return de(G,$,I,ae);if(Z(I)){if(pe=Z(I),typeof pe!="function")throw Error(o(150));return I=pe.call(I),ve(G,$,I,ae)}if(typeof I.then=="function")return Ve(G,$,gl(I),ae);if(I.$$typeof===N)return Ve(G,$,cl(G,I),ae);hl(G,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,$!==null&&$.tag===6?(a(G,$.sibling),ae=u($,I),ae.return=G,G=ae):(a(G,$),ae=Ac(I,G.mode,ae),ae.return=G,G=ae),b(G)):a(G,$)}return function(G,$,I,ae){try{Tr=0;var pe=Ve(G,$,I,ae);return Ts=null,pe}catch(ge){if(ge===As||ge===dl)throw ge;var Oe=Tt(29,ge,null,G.mode);return Oe.lanes=ae,Oe.return=G,Oe}}}var Qa=hg(!0),mg=hg(!1),aa=!1;function Yc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function sa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ra(e,t,a){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Re&2)!==0){var u=i.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),i.pending=t,t=rl(e),Wf(e,null,a),t}return sl(e,i,t,a),rl(e)}function Dr(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,Hi(e,a)}}function Xc(e,t){var a=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,a===i)){var u=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?u=g=b:g=g.next=b,a=a.next}while(a!==null);g===null?u=g=t:g=g.next=t}else u=g=t;a={baseState:i.baseState,firstBaseUpdate:u,lastBaseUpdate:g,shared:i.shared,callbacks:i.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Zc=!1;function Or(){if(Zc){var e=zs;if(e!==null)throw e}}function Lr(e,t,a,i){Zc=!1;var u=e.updateQueue;aa=!1;var g=u.firstBaseUpdate,b=u.lastBaseUpdate,S=u.shared.pending;if(S!==null){u.shared.pending=null;var R=S,J=R.next;R.next=null,b===null?g=J:b.next=J,b=R;var ne=e.alternate;ne!==null&&(ne=ne.updateQueue,S=ne.lastBaseUpdate,S!==b&&(S===null?ne.firstBaseUpdate=J:S.next=J,ne.lastBaseUpdate=R))}if(g!==null){var re=u.baseState;b=0,ne=J=R=null,S=g;do{var W=S.lane&-536870913,ee=W!==S.lane;if(ee?(Ae&W)===W:(i&W)===W){W!==0&&W===Es&&(Zc=!0),ne!==null&&(ne=ne.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var de=e,ve=S;W=t;var Ve=a;switch(ve.tag){case 1:if(de=ve.payload,typeof de=="function"){re=de.call(Ve,re,W);break e}re=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=ve.payload,W=typeof de=="function"?de.call(Ve,re,W):de,W==null)break e;re=x({},re,W);break e;case 2:aa=!0}}W=S.callback,W!==null&&(e.flags|=64,ee&&(e.flags|=8192),ee=u.callbacks,ee===null?u.callbacks=[W]:ee.push(W))}else ee={lane:W,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ne===null?(J=ne=ee,R=re):ne=ne.next=ee,b|=W;if(S=S.next,S===null){if(S=u.shared.pending,S===null)break;ee=S,S=ee.next,ee.next=null,u.lastBaseUpdate=ee,u.shared.pending=null}}while(!0);ne===null&&(R=re),u.baseState=R,u.firstBaseUpdate=J,u.lastBaseUpdate=ne,g===null&&(u.shared.lanes=0),ua|=b,e.lanes=b,e.memoizedState=re}}function pg(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function xg(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)pg(a[e],t)}var Ms=F(null),ml=F(0);function yg(e,t){e=Bn,se(ml,e),se(Ms,t),Bn=e|t.baseLanes}function Qc(){se(ml,Bn),se(Ms,Ms.current)}function Fc(){Bn=ml.current,P(Ms),P(ml)}var Mt=F(null),Gt=null;function ia(e){var t=e.alternate;se(Je,Je.current&1),se(Mt,e),Gt===null&&(t===null||Ms.current!==null||t.memoizedState!==null)&&(Gt=e)}function Kc(e){se(Je,Je.current),se(Mt,e),Gt===null&&(Gt=e)}function bg(e){e.tag===22?(se(Je,Je.current),se(Mt,e),Gt===null&&(Gt=e)):la()}function la(){se(Je,Je.current),se(Mt,Mt.current)}function Dt(e){P(Mt),Gt===e&&(Gt=null),P(Je)}var Je=F(0);function pl(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||td(a)||nd(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Tn=0,ke=null,Be=null,tt=null,xl=!1,Ds=!1,Fa=!1,yl=0,Rr=0,Os=null,Ob=0;function Ke(){throw Error(o(321))}function Ic(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!At(e[a],t[a]))return!1;return!0}function Jc(e,t,a,i,u,g){return Tn=g,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_.H=e===null||e.memoizedState===null?nh:fu,Fa=!1,g=a(i,u),Fa=!1,Ds&&(g=Ng(t,a,i,u)),vg(e),g}function vg(e){_.H=Br;var t=Be!==null&&Be.next!==null;if(Tn=0,tt=Be=ke=null,xl=!1,Rr=0,Os=null,t)throw Error(o(300));e===null||nt||(e=e.dependencies,e!==null&&ol(e)&&(nt=!0))}function Ng(e,t,a,i){ke=e;var u=0;do{if(Ds&&(Os=null),Rr=0,Ds=!1,25<=u)throw Error(o(301));if(u+=1,tt=Be=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}_.H=ah,g=t(a,i)}while(Ds);return g}function Lb(){var e=_.H,t=e.useState()[0];return t=typeof t.then=="function"?Hr(t):t,e=e.useState()[0],(Be!==null?Be.memoizedState:null)!==e&&(ke.flags|=1024),t}function Wc(){var e=yl!==0;return yl=0,e}function Pc(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function eu(e){if(xl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}xl=!1}Tn=0,tt=Be=ke=null,Ds=!1,Rr=yl=0,Os=null}function xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?ke.memoizedState=tt=e:tt=tt.next=e,tt}function We(){if(Be===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=tt===null?ke.memoizedState:tt.next;if(t!==null)tt=t,Be=e;else{if(e===null)throw ke.alternate===null?Error(o(467)):Error(o(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},tt===null?ke.memoizedState=tt=e:tt=tt.next=e}return tt}function bl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hr(e){var t=Rr;return Rr+=1,Os===null&&(Os=[]),e=dg(Os,e,t),t=ke,(tt===null?t.memoizedState:tt.next)===null&&(t=t.alternate,_.H=t===null||t.memoizedState===null?nh:fu),e}function vl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Hr(e);if(e.$$typeof===N)return dt(e)}throw Error(o(438,String(e)))}function tu(e){var t=null,a=ke.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var i=ke.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=bl(),ke.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),i=0;i<e;i++)a[i]=K;return t.index++,a}function Mn(e,t){return typeof t=="function"?t(e):t}function Nl(e){var t=We();return nu(t,Be,e)}function nu(e,t,a){var i=e.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=a;var u=e.baseQueue,g=i.pending;if(g!==null){if(u!==null){var b=u.next;u.next=g.next,g.next=b}t.baseQueue=u=g,i.pending=null}if(g=e.baseState,u===null)e.memoizedState=g;else{t=u.next;var S=b=null,R=null,J=t,ne=!1;do{var re=J.lane&-536870913;if(re!==J.lane?(Ae&re)===re:(Tn&re)===re){var W=J.revertLane;if(W===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),re===Es&&(ne=!0);else if((Tn&W)===W){J=J.next,W===Es&&(ne=!0);continue}else re={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},R===null?(S=R=re,b=g):R=R.next=re,ke.lanes|=W,ua|=W;re=J.action,Fa&&a(g,re),g=J.hasEagerState?J.eagerState:a(g,re)}else W={lane:re,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},R===null?(S=R=W,b=g):R=R.next=W,ke.lanes|=re,ua|=re;J=J.next}while(J!==null&&J!==t);if(R===null?b=g:R.next=S,!At(g,e.memoizedState)&&(nt=!0,ne&&(a=zs,a!==null)))throw a;e.memoizedState=g,e.baseState=b,e.baseQueue=R,i.lastRenderedState=g}return u===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function au(e){var t=We(),a=t.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=e;var i=a.dispatch,u=a.pending,g=t.memoizedState;if(u!==null){a.pending=null;var b=u=u.next;do g=e(g,b.action),b=b.next;while(b!==u);At(g,t.memoizedState)||(nt=!0),t.memoizedState=g,t.baseQueue===null&&(t.baseState=g),a.lastRenderedState=g}return[g,i]}function jg(e,t,a){var i=ke,u=We(),g=Me;if(g){if(a===void 0)throw Error(o(407));a=a()}else a=t();var b=!At((Be||u).memoizedState,a);if(b&&(u.memoizedState=a,nt=!0),u=u.queue,iu(_g.bind(null,i,u,e),[e]),u.getSnapshot!==t||b||tt!==null&&tt.memoizedState.tag&1){if(i.flags|=2048,Ls(9,{destroy:void 0},Sg.bind(null,i,u,a,t),null),qe===null)throw Error(o(349));g||(Tn&127)!==0||wg(i,t,a)}return a}function wg(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ke.updateQueue,t===null?(t=bl(),ke.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Sg(e,t,a,i){t.value=a,t.getSnapshot=i,kg(t)&&Cg(e)}function _g(e,t,a){return a(function(){kg(t)&&Cg(e)})}function kg(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!At(e,a)}catch{return!0}}function Cg(e){var t=Ba(e,2);t!==null&&Et(t,e,2)}function su(e){var t=xt();if(typeof e=="function"){var a=e;if(e=a(),Fa){ln(!0);try{a()}finally{ln(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:e},t}function Eg(e,t,a,i){return e.baseState=a,nu(e,Be,typeof i=="function"?i:Mn)}function Rb(e,t,a,i,u){if(Sl(e))throw Error(o(485));if(e=t.action,e!==null){var g={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};_.T!==null?a(!0):g.isTransition=!1,i(g),a=t.pending,a===null?(g.next=t.pending=g,zg(t,g)):(g.next=a.next,t.pending=a.next=g)}}function zg(e,t){var a=t.action,i=t.payload,u=e.state;if(t.isTransition){var g=_.T,b={};_.T=b;try{var S=a(u,i),R=_.S;R!==null&&R(b,S),Ag(e,t,S)}catch(J){ru(e,t,J)}finally{g!==null&&b.types!==null&&(g.types=b.types),_.T=g}}else try{g=a(u,i),Ag(e,t,g)}catch(J){ru(e,t,J)}}function Ag(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(i){Tg(e,t,i)},function(i){return ru(e,t,i)}):Tg(e,t,a)}function Tg(e,t,a){t.status="fulfilled",t.value=a,Mg(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,zg(e,a)))}function ru(e,t,a){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=a,Mg(t),t=t.next;while(t!==i)}e.action=null}function Mg(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Dg(e,t){return t}function Og(e,t){if(Me){var a=qe.formState;if(a!==null){e:{var i=ke;if(Me){if(Ge){t:{for(var u=Ge,g=Yt;u.nodeType!==8;){if(!g){u=null;break t}if(u=Xt(u.nextSibling),u===null){u=null;break t}}g=u.data,u=g==="F!"||g==="F"?u:null}if(u){Ge=Xt(u.nextSibling),i=u.data==="F!";break e}}ta(i)}i=!1}i&&(t=a[0])}}return a=xt(),a.memoizedState=a.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dg,lastRenderedState:t},a.queue=i,a=Pg.bind(null,ke,i),i.dispatch=a,i=su(!1),g=du.bind(null,ke,!1,i.queue),i=xt(),u={state:t,dispatch:null,action:e,pending:null},i.queue=u,a=Rb.bind(null,ke,u,g,a),u.dispatch=a,i.memoizedState=e,[t,a,!1]}function Lg(e){var t=We();return Rg(t,Be,e)}function Rg(e,t,a){if(t=nu(e,t,Dg)[0],e=Nl(Mn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Hr(t)}catch(b){throw b===As?dl:b}else i=t;t=We();var u=t.queue,g=u.dispatch;return a!==t.memoizedState&&(ke.flags|=2048,Ls(9,{destroy:void 0},Hb.bind(null,u,a),null)),[i,g,e]}function Hb(e,t){e.action=t}function Hg(e){var t=We(),a=Be;if(a!==null)return Rg(t,a,e);We(),t=t.memoizedState,a=We();var i=a.queue.dispatch;return a.memoizedState=e,[t,i,!1]}function Ls(e,t,a,i){return e={tag:e,create:a,deps:i,inst:t,next:null},t=ke.updateQueue,t===null&&(t=bl(),ke.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(i=a.next,a.next=e,e.next=i,t.lastEffect=e),e}function Ug(){return We().memoizedState}function jl(e,t,a,i){var u=xt();ke.flags|=e,u.memoizedState=Ls(1|t,{destroy:void 0},a,i===void 0?null:i)}function wl(e,t,a,i){var u=We();i=i===void 0?null:i;var g=u.memoizedState.inst;Be!==null&&i!==null&&Ic(i,Be.memoizedState.deps)?u.memoizedState=Ls(t,g,a,i):(ke.flags|=e,u.memoizedState=Ls(1|t,g,a,i))}function Bg(e,t){jl(8390656,8,e,t)}function iu(e,t){wl(2048,8,e,t)}function Ub(e){ke.flags|=4;var t=ke.updateQueue;if(t===null)t=bl(),ke.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function $g(e){var t=We().memoizedState;return Ub({ref:t,nextImpl:e}),function(){if((Re&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Vg(e,t){return wl(4,2,e,t)}function qg(e,t){return wl(4,4,e,t)}function Yg(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gg(e,t,a){a=a!=null?a.concat([e]):null,wl(4,4,Yg.bind(null,t,e),a)}function lu(){}function Xg(e,t){var a=We();t=t===void 0?null:t;var i=a.memoizedState;return t!==null&&Ic(t,i[1])?i[0]:(a.memoizedState=[e,t],e)}function Zg(e,t){var a=We();t=t===void 0?null:t;var i=a.memoizedState;if(t!==null&&Ic(t,i[1]))return i[0];if(i=e(),Fa){ln(!0);try{e()}finally{ln(!1)}}return a.memoizedState=[i,t],i}function ou(e,t,a){return a===void 0||(Tn&1073741824)!==0&&(Ae&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Qh(),ke.lanes|=e,ua|=e,a)}function Qg(e,t,a,i){return At(a,t)?a:Ms.current!==null?(e=ou(e,a,i),At(e,t)||(nt=!0),e):(Tn&42)===0||(Tn&1073741824)!==0&&(Ae&261930)===0?(nt=!0,e.memoizedState=a):(e=Qh(),ke.lanes|=e,ua|=e,t)}function Fg(e,t,a,i,u){var g=O.p;O.p=g!==0&&8>g?g:8;var b=_.T,S={};_.T=S,du(e,!1,t,a);try{var R=u(),J=_.S;if(J!==null&&J(S,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var ne=Db(R,i);Ur(e,t,ne,Rt(e))}else Ur(e,t,i,Rt(e))}catch(re){Ur(e,t,{then:function(){},status:"rejected",reason:re},Rt())}finally{O.p=g,b!==null&&S.types!==null&&(b.types=S.types),_.T=b}}function Bb(){}function cu(e,t,a,i){if(e.tag!==5)throw Error(o(476));var u=Kg(e).queue;Fg(e,u,t,U,a===null?Bb:function(){return Ig(e),a(i)})}function Kg(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:U},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ig(e){var t=Kg(e);t.next===null&&(t=e.alternate.memoizedState),Ur(e,t.next.queue,{},Rt())}function uu(){return dt(ti)}function Jg(){return We().memoizedState}function Wg(){return We().memoizedState}function $b(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Rt();e=sa(a);var i=ra(t,e,a);i!==null&&(Et(i,t,a),Dr(i,t,a)),t={cache:Bc()},e.payload=t;return}t=t.return}}function Vb(e,t,a){var i=Rt();a={lane:i,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Sl(e)?eh(t,a):(a=Ec(e,t,a,i),a!==null&&(Et(a,e,i),th(a,t,i)))}function Pg(e,t,a){var i=Rt();Ur(e,t,a,i)}function Ur(e,t,a,i){var u={lane:i,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Sl(e))eh(t,u);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=t.lastRenderedReducer,g!==null))try{var b=t.lastRenderedState,S=g(b,a);if(u.hasEagerState=!0,u.eagerState=S,At(S,b))return sl(e,t,u,0),qe===null&&al(),!1}catch{}if(a=Ec(e,t,u,i),a!==null)return Et(a,e,i),th(a,t,i),!0}return!1}function du(e,t,a,i){if(i={lane:2,revertLane:Yu(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Sl(e)){if(t)throw Error(o(479))}else t=Ec(e,a,i,2),t!==null&&Et(t,e,2)}function Sl(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function eh(e,t){Ds=xl=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function th(e,t,a){if((a&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,Hi(e,a)}}var Br={readContext:dt,use:vl,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useLayoutEffect:Ke,useInsertionEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useSyncExternalStore:Ke,useId:Ke,useHostTransitionStatus:Ke,useFormState:Ke,useActionState:Ke,useOptimistic:Ke,useMemoCache:Ke,useCacheRefresh:Ke};Br.useEffectEvent=Ke;var nh={readContext:dt,use:vl,useCallback:function(e,t){return xt().memoizedState=[e,t===void 0?null:t],e},useContext:dt,useEffect:Bg,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,jl(4194308,4,Yg.bind(null,t,e),a)},useLayoutEffect:function(e,t){return jl(4194308,4,e,t)},useInsertionEffect:function(e,t){jl(4,2,e,t)},useMemo:function(e,t){var a=xt();t=t===void 0?null:t;var i=e();if(Fa){ln(!0);try{e()}finally{ln(!1)}}return a.memoizedState=[i,t],i},useReducer:function(e,t,a){var i=xt();if(a!==void 0){var u=a(t);if(Fa){ln(!0);try{a(t)}finally{ln(!1)}}}else u=t;return i.memoizedState=i.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},i.queue=e,e=e.dispatch=Vb.bind(null,ke,e),[i.memoizedState,e]},useRef:function(e){var t=xt();return e={current:e},t.memoizedState=e},useState:function(e){e=su(e);var t=e.queue,a=Pg.bind(null,ke,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:lu,useDeferredValue:function(e,t){var a=xt();return ou(a,e,t)},useTransition:function(){var e=su(!1);return e=Fg.bind(null,ke,e.queue,!0,!1),xt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var i=ke,u=xt();if(Me){if(a===void 0)throw Error(o(407));a=a()}else{if(a=t(),qe===null)throw Error(o(349));(Ae&127)!==0||wg(i,t,a)}u.memoizedState=a;var g={value:a,getSnapshot:t};return u.queue=g,Bg(_g.bind(null,i,g,e),[e]),i.flags|=2048,Ls(9,{destroy:void 0},Sg.bind(null,i,g,a,t),null),a},useId:function(){var e=xt(),t=qe.identifierPrefix;if(Me){var a=un,i=cn;a=(i&~(1<<32-pt(i)-1)).toString(32)+a,t="_"+t+"R_"+a,a=yl++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Ob++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:uu,useFormState:Og,useActionState:Og,useOptimistic:function(e){var t=xt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=du.bind(null,ke,!0,a),a.dispatch=t,[e,t]},useMemoCache:tu,useCacheRefresh:function(){return xt().memoizedState=$b.bind(null,ke)},useEffectEvent:function(e){var t=xt(),a={impl:e};return t.memoizedState=a,function(){if((Re&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},fu={readContext:dt,use:vl,useCallback:Xg,useContext:dt,useEffect:iu,useImperativeHandle:Gg,useInsertionEffect:Vg,useLayoutEffect:qg,useMemo:Zg,useReducer:Nl,useRef:Ug,useState:function(){return Nl(Mn)},useDebugValue:lu,useDeferredValue:function(e,t){var a=We();return Qg(a,Be.memoizedState,e,t)},useTransition:function(){var e=Nl(Mn)[0],t=We().memoizedState;return[typeof e=="boolean"?e:Hr(e),t]},useSyncExternalStore:jg,useId:Jg,useHostTransitionStatus:uu,useFormState:Lg,useActionState:Lg,useOptimistic:function(e,t){var a=We();return Eg(a,Be,e,t)},useMemoCache:tu,useCacheRefresh:Wg};fu.useEffectEvent=$g;var ah={readContext:dt,use:vl,useCallback:Xg,useContext:dt,useEffect:iu,useImperativeHandle:Gg,useInsertionEffect:Vg,useLayoutEffect:qg,useMemo:Zg,useReducer:au,useRef:Ug,useState:function(){return au(Mn)},useDebugValue:lu,useDeferredValue:function(e,t){var a=We();return Be===null?ou(a,e,t):Qg(a,Be.memoizedState,e,t)},useTransition:function(){var e=au(Mn)[0],t=We().memoizedState;return[typeof e=="boolean"?e:Hr(e),t]},useSyncExternalStore:jg,useId:Jg,useHostTransitionStatus:uu,useFormState:Hg,useActionState:Hg,useOptimistic:function(e,t){var a=We();return Be!==null?Eg(a,Be,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:tu,useCacheRefresh:Wg};ah.useEffectEvent=$g;function gu(e,t,a,i){t=e.memoizedState,a=a(i,t),a=a==null?t:x({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var hu={enqueueSetState:function(e,t,a){e=e._reactInternals;var i=Rt(),u=sa(i);u.payload=t,a!=null&&(u.callback=a),t=ra(e,u,i),t!==null&&(Et(t,e,i),Dr(t,e,i))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var i=Rt(),u=sa(i);u.tag=1,u.payload=t,a!=null&&(u.callback=a),t=ra(e,u,i),t!==null&&(Et(t,e,i),Dr(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Rt(),i=sa(a);i.tag=2,t!=null&&(i.callback=t),t=ra(e,i,a),t!==null&&(Et(t,e,a),Dr(t,e,a))}};function sh(e,t,a,i,u,g,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,g,b):t.prototype&&t.prototype.isPureReactComponent?!_r(a,i)||!_r(u,g):!0}function rh(e,t,a,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,i),t.state!==e&&hu.enqueueReplaceState(t,t.state,null)}function Ka(e,t){var a=t;if("ref"in t){a={};for(var i in t)i!=="ref"&&(a[i]=t[i])}if(e=e.defaultProps){a===t&&(a=x({},a));for(var u in e)a[u]===void 0&&(a[u]=e[u])}return a}function ih(e){nl(e)}function lh(e){console.error(e)}function oh(e){nl(e)}function _l(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function ch(e,t,a){try{var i=e.onCaughtError;i(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function mu(e,t,a){return a=sa(a),a.tag=3,a.payload={element:null},a.callback=function(){_l(e,t)},a}function uh(e){return e=sa(e),e.tag=3,e}function dh(e,t,a,i){var u=a.type.getDerivedStateFromError;if(typeof u=="function"){var g=i.value;e.payload=function(){return u(g)},e.callback=function(){ch(t,a,i)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){ch(t,a,i),typeof u!="function"&&(da===null?da=new Set([this]):da.add(this));var S=i.stack;this.componentDidCatch(i.value,{componentStack:S!==null?S:""})})}function qb(e,t,a,i,u){if(a.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=a.alternate,t!==null&&Cs(t,a,u,!0),a=Mt.current,a!==null){switch(a.tag){case 31:case 13:return Gt===null?Hl():a.alternate===null&&Ie===0&&(Ie=3),a.flags&=-257,a.flags|=65536,a.lanes=u,i===fl?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([i]):t.add(i),$u(e,i,u)),!1;case 22:return a.flags|=65536,i===fl?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([i]):a.add(i)),$u(e,i,u)),!1}throw Error(o(435,a.tag))}return $u(e,i,u),Hl(),!1}if(Me)return t=Mt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,i!==Oc&&(e=Error(o(422),{cause:i}),Er($t(e,a)))):(i!==Oc&&(t=Error(o(423),{cause:i}),Er($t(t,a))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,i=$t(i,a),u=mu(e.stateNode,i,u),Xc(e,u),Ie!==4&&(Ie=2)),!1;var g=Error(o(520),{cause:i});if(g=$t(g,a),Qr===null?Qr=[g]:Qr.push(g),Ie!==4&&(Ie=2),t===null)return!0;i=$t(i,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=u&-u,a.lanes|=e,e=mu(a.stateNode,i,e),Xc(a,e),!1;case 1:if(t=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(da===null||!da.has(g))))return a.flags|=65536,u&=-u,a.lanes|=u,u=uh(u),dh(u,e,a,i),Xc(a,u),!1}a=a.return}while(a!==null);return!1}var pu=Error(o(461)),nt=!1;function ft(e,t,a,i){t.child=e===null?mg(t,null,a,i):Qa(t,e.child,a,i)}function fh(e,t,a,i,u){a=a.render;var g=t.ref;if("ref"in i){var b={};for(var S in i)S!=="ref"&&(b[S]=i[S])}else b=i;return Ya(t),i=Jc(e,t,a,b,g,u),S=Wc(),e!==null&&!nt?(Pc(e,t,u),Dn(e,t,u)):(Me&&S&&Mc(t),t.flags|=1,ft(e,t,i,u),t.child)}function gh(e,t,a,i,u){if(e===null){var g=a.type;return typeof g=="function"&&!zc(g)&&g.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=g,hh(e,t,g,i,u)):(e=il(a.type,null,i,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(g=e.child,!Su(e,u)){var b=g.memoizedProps;if(a=a.compare,a=a!==null?a:_r,a(b,i)&&e.ref===t.ref)return Dn(e,t,u)}return t.flags|=1,e=Cn(g,i),e.ref=t.ref,e.return=t,t.child=e}function hh(e,t,a,i,u){if(e!==null){var g=e.memoizedProps;if(_r(g,i)&&e.ref===t.ref)if(nt=!1,t.pendingProps=i=g,Su(e,u))(e.flags&131072)!==0&&(nt=!0);else return t.lanes=e.lanes,Dn(e,t,u)}return xu(e,t,a,i,u)}function mh(e,t,a,i){var u=i.children,g=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(g=g!==null?g.baseLanes|a:a,e!==null){for(i=t.child=e.child,u=0;i!==null;)u=u|i.lanes|i.childLanes,i=i.sibling;i=u&~g}else i=0,t.child=null;return ph(e,t,g,a,i)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ul(t,g!==null?g.cachePool:null),g!==null?yg(t,g):Qc(),bg(t);else return i=t.lanes=536870912,ph(e,t,g!==null?g.baseLanes|a:a,a,i)}else g!==null?(ul(t,g.cachePool),yg(t,g),la(),t.memoizedState=null):(e!==null&&ul(t,null),Qc(),la());return ft(e,t,u,a),t.child}function $r(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ph(e,t,a,i,u){var g=Vc();return g=g===null?null:{parent:et._currentValue,pool:g},t.memoizedState={baseLanes:a,cachePool:g},e!==null&&ul(t,null),Qc(),bg(t),e!==null&&Cs(e,t,i,!0),t.childLanes=u,null}function kl(e,t){return t=El({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function xh(e,t,a){return Qa(t,e.child,null,a),e=kl(t,t.pendingProps),e.flags|=2,Dt(t),t.memoizedState=null,e}function Yb(e,t,a){var i=t.pendingProps,u=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Me){if(i.mode==="hidden")return e=kl(t,i),t.lanes=536870912,$r(null,e);if(Kc(t),(e=Ge)?(e=zm(e,Yt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Pn!==null?{id:cn,overflow:un}:null,retryLane:536870912,hydrationErrors:null},a=eg(e),a.return=t,t.child=a,ut=t,Ge=null)):e=null,e===null)throw ta(t);return t.lanes=536870912,null}return kl(t,i)}var g=e.memoizedState;if(g!==null){var b=g.dehydrated;if(Kc(t),u)if(t.flags&256)t.flags&=-257,t=xh(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(nt||Cs(e,t,a,!1),u=(a&e.childLanes)!==0,nt||u){if(i=qe,i!==null&&(b=Ui(i,a),b!==0&&b!==g.retryLane))throw g.retryLane=b,Ba(e,b),Et(i,e,b),pu;Hl(),t=xh(e,t,a)}else e=g.treeContext,Ge=Xt(b.nextSibling),ut=t,Me=!0,ea=null,Yt=!1,e!==null&&ag(t,e),t=kl(t,i),t.flags|=4096;return t}return e=Cn(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Cl(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function xu(e,t,a,i,u){return Ya(t),a=Jc(e,t,a,i,void 0,u),i=Wc(),e!==null&&!nt?(Pc(e,t,u),Dn(e,t,u)):(Me&&i&&Mc(t),t.flags|=1,ft(e,t,a,u),t.child)}function yh(e,t,a,i,u,g){return Ya(t),t.updateQueue=null,a=Ng(t,i,a,u),vg(e),i=Wc(),e!==null&&!nt?(Pc(e,t,g),Dn(e,t,g)):(Me&&i&&Mc(t),t.flags|=1,ft(e,t,a,g),t.child)}function bh(e,t,a,i,u){if(Ya(t),t.stateNode===null){var g=ws,b=a.contextType;typeof b=="object"&&b!==null&&(g=dt(b)),g=new a(i,g),t.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=hu,t.stateNode=g,g._reactInternals=t,g=t.stateNode,g.props=i,g.state=t.memoizedState,g.refs={},Yc(t),b=a.contextType,g.context=typeof b=="object"&&b!==null?dt(b):ws,g.state=t.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(gu(t,a,b,i),g.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&hu.enqueueReplaceState(g,g.state,null),Lr(t,i,g,u),Or(),g.state=t.memoizedState),typeof g.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){g=t.stateNode;var S=t.memoizedProps,R=Ka(a,S);g.props=R;var J=g.context,ne=a.contextType;b=ws,typeof ne=="object"&&ne!==null&&(b=dt(ne));var re=a.getDerivedStateFromProps;ne=typeof re=="function"||typeof g.getSnapshotBeforeUpdate=="function",S=t.pendingProps!==S,ne||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S||J!==b)&&rh(t,g,i,b),aa=!1;var W=t.memoizedState;g.state=W,Lr(t,i,g,u),Or(),J=t.memoizedState,S||W!==J||aa?(typeof re=="function"&&(gu(t,a,re,i),J=t.memoizedState),(R=aa||sh(t,a,R,i,W,J,b))?(ne||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=J),g.props=i,g.state=J,g.context=b,i=R):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{g=t.stateNode,Gc(e,t),b=t.memoizedProps,ne=Ka(a,b),g.props=ne,re=t.pendingProps,W=g.context,J=a.contextType,R=ws,typeof J=="object"&&J!==null&&(R=dt(J)),S=a.getDerivedStateFromProps,(J=typeof S=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==re||W!==R)&&rh(t,g,i,R),aa=!1,W=t.memoizedState,g.state=W,Lr(t,i,g,u),Or();var ee=t.memoizedState;b!==re||W!==ee||aa||e!==null&&e.dependencies!==null&&ol(e.dependencies)?(typeof S=="function"&&(gu(t,a,S,i),ee=t.memoizedState),(ne=aa||sh(t,a,ne,i,W,ee,R)||e!==null&&e.dependencies!==null&&ol(e.dependencies))?(J||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(i,ee,R),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(i,ee,R)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&W===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&W===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=ee),g.props=i,g.state=ee,g.context=R,i=ne):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&W===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&W===e.memoizedState||(t.flags|=1024),i=!1)}return g=i,Cl(e,t),i=(t.flags&128)!==0,g||i?(g=t.stateNode,a=i&&typeof a.getDerivedStateFromError!="function"?null:g.render(),t.flags|=1,e!==null&&i?(t.child=Qa(t,e.child,null,u),t.child=Qa(t,null,a,u)):ft(e,t,a,u),t.memoizedState=g.state,e=t.child):e=Dn(e,t,u),e}function vh(e,t,a,i){return Va(),t.flags|=256,ft(e,t,a,i),t.child}var yu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bu(e){return{baseLanes:e,cachePool:cg()}}function vu(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Lt),e}function Nh(e,t,a){var i=t.pendingProps,u=!1,g=(t.flags&128)!==0,b;if((b=g)||(b=e!==null&&e.memoizedState===null?!1:(Je.current&2)!==0),b&&(u=!0,t.flags&=-129),b=(t.flags&32)!==0,t.flags&=-33,e===null){if(Me){if(u?ia(t):la(),(e=Ge)?(e=zm(e,Yt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Pn!==null?{id:cn,overflow:un}:null,retryLane:536870912,hydrationErrors:null},a=eg(e),a.return=t,t.child=a,ut=t,Ge=null)):e=null,e===null)throw ta(t);return nd(e)?t.lanes=32:t.lanes=536870912,null}var S=i.children;return i=i.fallback,u?(la(),u=t.mode,S=El({mode:"hidden",children:S},u),i=$a(i,u,a,null),S.return=t,i.return=t,S.sibling=i,t.child=S,i=t.child,i.memoizedState=bu(a),i.childLanes=vu(e,b,a),t.memoizedState=yu,$r(null,i)):(ia(t),Nu(t,S))}var R=e.memoizedState;if(R!==null&&(S=R.dehydrated,S!==null)){if(g)t.flags&256?(ia(t),t.flags&=-257,t=ju(e,t,a)):t.memoizedState!==null?(la(),t.child=e.child,t.flags|=128,t=null):(la(),S=i.fallback,u=t.mode,i=El({mode:"visible",children:i.children},u),S=$a(S,u,a,null),S.flags|=2,i.return=t,S.return=t,i.sibling=S,t.child=i,Qa(t,e.child,null,a),i=t.child,i.memoizedState=bu(a),i.childLanes=vu(e,b,a),t.memoizedState=yu,t=$r(null,i));else if(ia(t),nd(S)){if(b=S.nextSibling&&S.nextSibling.dataset,b)var J=b.dgst;b=J,i=Error(o(419)),i.stack="",i.digest=b,Er({value:i,source:null,stack:null}),t=ju(e,t,a)}else if(nt||Cs(e,t,a,!1),b=(a&e.childLanes)!==0,nt||b){if(b=qe,b!==null&&(i=Ui(b,a),i!==0&&i!==R.retryLane))throw R.retryLane=i,Ba(e,i),Et(b,e,i),pu;td(S)||Hl(),t=ju(e,t,a)}else td(S)?(t.flags|=192,t.child=e.child,t=null):(e=R.treeContext,Ge=Xt(S.nextSibling),ut=t,Me=!0,ea=null,Yt=!1,e!==null&&ag(t,e),t=Nu(t,i.children),t.flags|=4096);return t}return u?(la(),S=i.fallback,u=t.mode,R=e.child,J=R.sibling,i=Cn(R,{mode:"hidden",children:i.children}),i.subtreeFlags=R.subtreeFlags&65011712,J!==null?S=Cn(J,S):(S=$a(S,u,a,null),S.flags|=2),S.return=t,i.return=t,i.sibling=S,t.child=i,$r(null,i),i=t.child,S=e.child.memoizedState,S===null?S=bu(a):(u=S.cachePool,u!==null?(R=et._currentValue,u=u.parent!==R?{parent:R,pool:R}:u):u=cg(),S={baseLanes:S.baseLanes|a,cachePool:u}),i.memoizedState=S,i.childLanes=vu(e,b,a),t.memoizedState=yu,$r(e.child,i)):(ia(t),a=e.child,e=a.sibling,a=Cn(a,{mode:"visible",children:i.children}),a.return=t,a.sibling=null,e!==null&&(b=t.deletions,b===null?(t.deletions=[e],t.flags|=16):b.push(e)),t.child=a,t.memoizedState=null,a)}function Nu(e,t){return t=El({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function El(e,t){return e=Tt(22,e,null,t),e.lanes=0,e}function ju(e,t,a){return Qa(t,e.child,null,a),e=Nu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jh(e,t,a){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Hc(e.return,t,a)}function wu(e,t,a,i,u,g){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:a,tailMode:u,treeForkCount:g}:(b.isBackwards=t,b.rendering=null,b.renderingStartTime=0,b.last=i,b.tail=a,b.tailMode=u,b.treeForkCount=g)}function wh(e,t,a){var i=t.pendingProps,u=i.revealOrder,g=i.tail;i=i.children;var b=Je.current,S=(b&2)!==0;if(S?(b=b&1|2,t.flags|=128):b&=1,se(Je,b),ft(e,t,i,a),i=Me?Cr:0,!S&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jh(e,a,t);else if(e.tag===19)jh(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(a=t.child,u=null;a!==null;)e=a.alternate,e!==null&&pl(e)===null&&(u=a),a=a.sibling;a=u,a===null?(u=t.child,t.child=null):(u=a.sibling,a.sibling=null),wu(t,!1,u,a,g,i);break;case"backwards":case"unstable_legacy-backwards":for(a=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&pl(e)===null){t.child=u;break}e=u.sibling,u.sibling=a,a=u,u=e}wu(t,!0,a,null,g,i);break;case"together":wu(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function Dn(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),ua|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Cs(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,a=Cn(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Cn(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Su(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ol(e)))}function Gb(e,t,a){switch(t.tag){case 3:oe(t,t.stateNode.containerInfo),na(t,et,e.memoizedState.cache),Va();break;case 27:case 5:_e(t);break;case 4:oe(t,t.stateNode.containerInfo);break;case 10:na(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Kc(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(ia(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Nh(e,t,a):(ia(t),e=Dn(e,t,a),e!==null?e.sibling:null);ia(t);break;case 19:var u=(e.flags&128)!==0;if(i=(a&t.childLanes)!==0,i||(Cs(e,t,a,!1),i=(a&t.childLanes)!==0),u){if(i)return wh(e,t,a);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),se(Je,Je.current),i)break;return null;case 22:return t.lanes=0,mh(e,t,a,t.pendingProps);case 24:na(t,et,e.memoizedState.cache)}return Dn(e,t,a)}function Sh(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)nt=!0;else{if(!Su(e,a)&&(t.flags&128)===0)return nt=!1,Gb(e,t,a);nt=(e.flags&131072)!==0}else nt=!1,Me&&(t.flags&1048576)!==0&&ng(t,Cr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=Xa(t.elementType),t.type=e,typeof e=="function")zc(e)?(i=Ka(e,i),t.tag=1,t=bh(null,t,e,i,a)):(t.tag=0,t=xu(null,t,e,i,a));else{if(e!=null){var u=e.$$typeof;if(u===E){t.tag=11,t=fh(null,t,e,i,a);break e}else if(u===V){t.tag=14,t=gh(null,t,e,i,a);break e}}throw t=C(e)||e,Error(o(306,t,""))}}return t;case 0:return xu(e,t,t.type,t.pendingProps,a);case 1:return i=t.type,u=Ka(i,t.pendingProps),bh(e,t,i,u,a);case 3:e:{if(oe(t,t.stateNode.containerInfo),e===null)throw Error(o(387));i=t.pendingProps;var g=t.memoizedState;u=g.element,Gc(e,t),Lr(t,i,null,a);var b=t.memoizedState;if(i=b.cache,na(t,et,i),i!==g.cache&&Uc(t,[et],a,!0),Or(),i=b.element,g.isDehydrated)if(g={element:i,isDehydrated:!1,cache:b.cache},t.updateQueue.baseState=g,t.memoizedState=g,t.flags&256){t=vh(e,t,i,a);break e}else if(i!==u){u=$t(Error(o(424)),t),Er(u),t=vh(e,t,i,a);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ge=Xt(e.firstChild),ut=t,Me=!0,ea=null,Yt=!0,a=mg(t,null,i,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Va(),i===u){t=Dn(e,t,a);break e}ft(e,t,i,a)}t=t.child}return t;case 26:return Cl(e,t),e===null?(a=Lm(t.type,null,t.pendingProps,null))?t.memoizedState=a:Me||(a=t.type,e=t.pendingProps,i=Gl(be.current).createElement(a),i[rt]=t,i[ht]=e,gt(i,a,e),Pe(i),t.stateNode=i):t.memoizedState=Lm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return _e(t),e===null&&Me&&(i=t.stateNode=Mm(t.type,t.pendingProps,be.current),ut=t,Yt=!0,u=Ge,ma(t.type)?(ad=u,Ge=Xt(i.firstChild)):Ge=u),ft(e,t,t.pendingProps.children,a),Cl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Me&&((u=i=Ge)&&(i=vv(i,t.type,t.pendingProps,Yt),i!==null?(t.stateNode=i,ut=t,Ge=Xt(i.firstChild),Yt=!1,u=!0):u=!1),u||ta(t)),_e(t),u=t.type,g=t.pendingProps,b=e!==null?e.memoizedProps:null,i=g.children,Wu(u,g)?i=null:b!==null&&Wu(u,b)&&(t.flags|=32),t.memoizedState!==null&&(u=Jc(e,t,Lb,null,null,a),ti._currentValue=u),Cl(e,t),ft(e,t,i,a),t.child;case 6:return e===null&&Me&&((e=a=Ge)&&(a=Nv(a,t.pendingProps,Yt),a!==null?(t.stateNode=a,ut=t,Ge=null,e=!0):e=!1),e||ta(t)),null;case 13:return Nh(e,t,a);case 4:return oe(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Qa(t,null,i,a):ft(e,t,i,a),t.child;case 11:return fh(e,t,t.type,t.pendingProps,a);case 7:return ft(e,t,t.pendingProps,a),t.child;case 8:return ft(e,t,t.pendingProps.children,a),t.child;case 12:return ft(e,t,t.pendingProps.children,a),t.child;case 10:return i=t.pendingProps,na(t,t.type,i.value),ft(e,t,i.children,a),t.child;case 9:return u=t.type._context,i=t.pendingProps.children,Ya(t),u=dt(u),i=i(u),t.flags|=1,ft(e,t,i,a),t.child;case 14:return gh(e,t,t.type,t.pendingProps,a);case 15:return hh(e,t,t.type,t.pendingProps,a);case 19:return wh(e,t,a);case 31:return Yb(e,t,a);case 22:return mh(e,t,a,t.pendingProps);case 24:return Ya(t),i=dt(et),e===null?(u=Vc(),u===null&&(u=qe,g=Bc(),u.pooledCache=g,g.refCount++,g!==null&&(u.pooledCacheLanes|=a),u=g),t.memoizedState={parent:i,cache:u},Yc(t),na(t,et,u)):((e.lanes&a)!==0&&(Gc(e,t),Lr(t,null,null,a),Or()),u=e.memoizedState,g=t.memoizedState,u.parent!==i?(u={parent:i,cache:i},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),na(t,et,i)):(i=g.cache,na(t,et,i),i!==u.cache&&Uc(t,[et],a,!0))),ft(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function On(e){e.flags|=4}function _u(e,t,a,i,u){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(Jh())e.flags|=8192;else throw Za=fl,qc}else e.flags&=-16777217}function _h(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!$m(t))if(Jh())e.flags|=8192;else throw Za=fl,qc}function zl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Li():536870912,e.lanes|=t,Bs|=t)}function Vr(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,i=0;if(t)for(var u=e.child;u!==null;)a|=u.lanes|u.childLanes,i|=u.subtreeFlags&65011712,i|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)a|=u.lanes|u.childLanes,i|=u.subtreeFlags,i|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=i,e.childLanes=a,t}function Xb(e,t,a){var i=t.pendingProps;switch(Dc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return Xe(t),null;case 3:return a=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),An(et),ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ks(t)?On(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Lc())),Xe(t),null;case 26:var u=t.type,g=t.memoizedState;return e===null?(On(t),g!==null?(Xe(t),_h(t,g)):(Xe(t),_u(t,u,null,i,a))):g?g!==e.memoizedState?(On(t),Xe(t),_h(t,g)):(Xe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&On(t),Xe(t),_u(t,u,e,i,a)),null;case 27:if(we(t),a=be.current,u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&On(t);else{if(!i){if(t.stateNode===null)throw Error(o(166));return Xe(t),null}e=le.current,ks(t)?sg(t):(e=Mm(u,i,a),t.stateNode=e,On(t))}return Xe(t),null;case 5:if(we(t),u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&On(t);else{if(!i){if(t.stateNode===null)throw Error(o(166));return Xe(t),null}if(g=le.current,ks(t))sg(t);else{var b=Gl(be.current);switch(g){case 1:g=b.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:g=b.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":g=b.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":g=b.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":g=b.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof i.is=="string"?b.createElement("select",{is:i.is}):b.createElement("select"),i.multiple?g.multiple=!0:i.size&&(g.size=i.size);break;default:g=typeof i.is=="string"?b.createElement(u,{is:i.is}):b.createElement(u)}}g[rt]=t,g[ht]=i;e:for(b=t.child;b!==null;){if(b.tag===5||b.tag===6)g.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===t)break e;for(;b.sibling===null;){if(b.return===null||b.return===t)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}t.stateNode=g;e:switch(gt(g,u,i),u){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&On(t)}}return Xe(t),_u(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&On(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(o(166));if(e=be.current,ks(t)){if(e=t.stateNode,a=t.memoizedProps,i=null,u=ut,u!==null)switch(u.tag){case 27:case 5:i=u.memoizedProps}e[rt]=t,e=!!(e.nodeValue===a||i!==null&&i.suppressHydrationWarning===!0||Nm(e.nodeValue,a)),e||ta(t,!0)}else e=Gl(e).createTextNode(i),e[rt]=t,t.stateNode=e}return Xe(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(i=ks(t),a!==null){if(e===null){if(!i)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[rt]=t}else Va(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Xe(t),e=!1}else a=Lc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(Dt(t),t):(Dt(t),null);if((t.flags&128)!==0)throw Error(o(558))}return Xe(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=ks(t),i!==null&&i.dehydrated!==null){if(e===null){if(!u)throw Error(o(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));u[rt]=t}else Va(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Xe(t),u=!1}else u=Lc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return t.flags&256?(Dt(t),t):(Dt(t),null)}return Dt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=i!==null,e=e!==null&&e.memoizedState!==null,a&&(i=t.child,u=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(u=i.alternate.memoizedState.cachePool.pool),g=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(g=i.memoizedState.cachePool.pool),g!==u&&(i.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),zl(t,t.updateQueue),Xe(t),null);case 4:return ue(),e===null&&Qu(t.stateNode.containerInfo),Xe(t),null;case 10:return An(t.type),Xe(t),null;case 19:if(P(Je),i=t.memoizedState,i===null)return Xe(t),null;if(u=(t.flags&128)!==0,g=i.rendering,g===null)if(u)Vr(i,!1);else{if(Ie!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=pl(e),g!==null){for(t.flags|=128,Vr(i,!1),e=g.updateQueue,t.updateQueue=e,zl(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Pf(a,e),a=a.sibling;return se(Je,Je.current&1|2),Me&&En(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&ct()>Ol&&(t.flags|=128,u=!0,Vr(i,!1),t.lanes=4194304)}else{if(!u)if(e=pl(g),e!==null){if(t.flags|=128,u=!0,e=e.updateQueue,t.updateQueue=e,zl(t,e),Vr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!g.alternate&&!Me)return Xe(t),null}else 2*ct()-i.renderingStartTime>Ol&&a!==536870912&&(t.flags|=128,u=!0,Vr(i,!1),t.lanes=4194304);i.isBackwards?(g.sibling=t.child,t.child=g):(e=i.last,e!==null?e.sibling=g:t.child=g,i.last=g)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ct(),e.sibling=null,a=Je.current,se(Je,u?a&1|2:a&1),Me&&En(t,i.treeForkCount),e):(Xe(t),null);case 22:case 23:return Dt(t),Fc(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(a&536870912)!==0&&(t.flags&128)===0&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),a=t.updateQueue,a!==null&&zl(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==a&&(t.flags|=2048),e!==null&&P(Ga),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),An(et),Xe(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function Zb(e,t){switch(Dc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return An(et),ue(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return we(t),null;case 31:if(t.memoizedState!==null){if(Dt(t),t.alternate===null)throw Error(o(340));Va()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Dt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));Va()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return P(Je),null;case 4:return ue(),null;case 10:return An(t.type),null;case 22:case 23:return Dt(t),Fc(),e!==null&&P(Ga),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return An(et),null;case 25:return null;default:return null}}function kh(e,t){switch(Dc(t),t.tag){case 3:An(et),ue();break;case 26:case 27:case 5:we(t);break;case 4:ue();break;case 31:t.memoizedState!==null&&Dt(t);break;case 13:Dt(t);break;case 19:P(Je);break;case 10:An(t.type);break;case 22:case 23:Dt(t),Fc(),e!==null&&P(Ga);break;case 24:An(et)}}function qr(e,t){try{var a=t.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var u=i.next;a=u;do{if((a.tag&e)===e){i=void 0;var g=a.create,b=a.inst;i=g(),b.destroy=i}a=a.next}while(a!==u)}}catch(S){Ue(t,t.return,S)}}function oa(e,t,a){try{var i=t.updateQueue,u=i!==null?i.lastEffect:null;if(u!==null){var g=u.next;i=g;do{if((i.tag&e)===e){var b=i.inst,S=b.destroy;if(S!==void 0){b.destroy=void 0,u=t;var R=a,J=S;try{J()}catch(ne){Ue(u,R,ne)}}}i=i.next}while(i!==g)}}catch(ne){Ue(t,t.return,ne)}}function Ch(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{xg(t,a)}catch(i){Ue(e,e.return,i)}}}function Eh(e,t,a){a.props=Ka(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(i){Ue(e,t,i)}}function Yr(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof a=="function"?e.refCleanup=a(i):a.current=i}}catch(u){Ue(e,t,u)}}function dn(e,t){var a=e.ref,i=e.refCleanup;if(a!==null)if(typeof i=="function")try{i()}catch(u){Ue(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(u){Ue(e,t,u)}else a.current=null}function zh(e){var t=e.type,a=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&i.focus();break e;case"img":a.src?i.src=a.src:a.srcSet&&(i.srcset=a.srcSet)}}catch(u){Ue(e,e.return,u)}}function ku(e,t,a){try{var i=e.stateNode;hv(i,e.type,a,t),i[ht]=t}catch(u){Ue(e,e.return,u)}}function Ah(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ma(e.type)||e.tag===4}function Cu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ah(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ma(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Eu(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=_n));else if(i!==4&&(i===27&&ma(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Eu(e,t,a),e=e.sibling;e!==null;)Eu(e,t,a),e=e.sibling}function Al(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(i!==4&&(i===27&&ma(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Al(e,t,a),e=e.sibling;e!==null;)Al(e,t,a),e=e.sibling}function Th(e){var t=e.stateNode,a=e.memoizedProps;try{for(var i=e.type,u=t.attributes;u.length;)t.removeAttributeNode(u[0]);gt(t,i,a),t[rt]=e,t[ht]=a}catch(g){Ue(e,e.return,g)}}var Ln=!1,at=!1,zu=!1,Mh=typeof WeakSet=="function"?WeakSet:Set,ot=null;function Qb(e,t){if(e=e.containerInfo,Iu=Jl,e=Gf(e),jc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var i=a.getSelection&&a.getSelection();if(i&&i.rangeCount!==0){a=i.anchorNode;var u=i.anchorOffset,g=i.focusNode;i=i.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var b=0,S=-1,R=-1,J=0,ne=0,re=e,W=null;t:for(;;){for(var ee;re!==a||u!==0&&re.nodeType!==3||(S=b+u),re!==g||i!==0&&re.nodeType!==3||(R=b+i),re.nodeType===3&&(b+=re.nodeValue.length),(ee=re.firstChild)!==null;)W=re,re=ee;for(;;){if(re===e)break t;if(W===a&&++J===u&&(S=b),W===g&&++ne===i&&(R=b),(ee=re.nextSibling)!==null)break;re=W,W=re.parentNode}re=ee}a=S===-1||R===-1?null:{start:S,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ju={focusedElem:e,selectionRange:a},Jl=!1,ot=t;ot!==null;)if(t=ot,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ot=e;else for(;ot!==null;){switch(t=ot,g=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)u=e[a],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,a=t,u=g.memoizedProps,g=g.memoizedState,i=a.stateNode;try{var de=Ka(a.type,u);e=i.getSnapshotBeforeUpdate(de,g),i.__reactInternalSnapshotBeforeUpdate=e}catch(ve){Ue(a,a.return,ve)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)ed(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ed(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,ot=e;break}ot=t.return}}function Dh(e,t,a){var i=a.flags;switch(a.tag){case 0:case 11:case 15:Hn(e,a),i&4&&qr(5,a);break;case 1:if(Hn(e,a),i&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(b){Ue(a,a.return,b)}else{var u=Ka(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(b){Ue(a,a.return,b)}}i&64&&Ch(a),i&512&&Yr(a,a.return);break;case 3:if(Hn(e,a),i&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{xg(e,t)}catch(b){Ue(a,a.return,b)}}break;case 27:t===null&&i&4&&Th(a);case 26:case 5:Hn(e,a),t===null&&i&4&&zh(a),i&512&&Yr(a,a.return);break;case 12:Hn(e,a);break;case 31:Hn(e,a),i&4&&Rh(e,a);break;case 13:Hn(e,a),i&4&&Hh(e,a),i&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=nv.bind(null,a),jv(e,a))));break;case 22:if(i=a.memoizedState!==null||Ln,!i){t=t!==null&&t.memoizedState!==null||at,u=Ln;var g=at;Ln=i,(at=t)&&!g?Un(e,a,(a.subtreeFlags&8772)!==0):Hn(e,a),Ln=u,at=g}break;case 30:break;default:Hn(e,a)}}function Oh(e){var t=e.alternate;t!==null&&(e.alternate=null,Oh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&mr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ze=null,St=!1;function Rn(e,t,a){for(a=a.child;a!==null;)Lh(e,t,a),a=a.sibling}function Lh(e,t,a){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(Aa,a)}catch{}switch(a.tag){case 26:at||dn(a,t),Rn(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:at||dn(a,t);var i=Ze,u=St;ma(a.type)&&(Ze=a.stateNode,St=!1),Rn(e,t,a),Wr(a.stateNode),Ze=i,St=u;break;case 5:at||dn(a,t);case 6:if(i=Ze,u=St,Ze=null,Rn(e,t,a),Ze=i,St=u,Ze!==null)if(St)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(a.stateNode)}catch(g){Ue(a,t,g)}else try{Ze.removeChild(a.stateNode)}catch(g){Ue(a,t,g)}break;case 18:Ze!==null&&(St?(e=Ze,Cm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Qs(e)):Cm(Ze,a.stateNode));break;case 4:i=Ze,u=St,Ze=a.stateNode.containerInfo,St=!0,Rn(e,t,a),Ze=i,St=u;break;case 0:case 11:case 14:case 15:oa(2,a,t),at||oa(4,a,t),Rn(e,t,a);break;case 1:at||(dn(a,t),i=a.stateNode,typeof i.componentWillUnmount=="function"&&Eh(a,t,i)),Rn(e,t,a);break;case 21:Rn(e,t,a);break;case 22:at=(i=at)||a.memoizedState!==null,Rn(e,t,a),at=i;break;default:Rn(e,t,a)}}function Rh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Qs(e)}catch(a){Ue(t,t.return,a)}}}function Hh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Qs(e)}catch(a){Ue(t,t.return,a)}}function Fb(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Mh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Mh),t;default:throw Error(o(435,e.tag))}}function Tl(e,t){var a=Fb(e);t.forEach(function(i){if(!a.has(i)){a.add(i);var u=av.bind(null,e,i);i.then(u,u)}})}function _t(e,t){var a=t.deletions;if(a!==null)for(var i=0;i<a.length;i++){var u=a[i],g=e,b=t,S=b;e:for(;S!==null;){switch(S.tag){case 27:if(ma(S.type)){Ze=S.stateNode,St=!1;break e}break;case 5:Ze=S.stateNode,St=!1;break e;case 3:case 4:Ze=S.stateNode.containerInfo,St=!0;break e}S=S.return}if(Ze===null)throw Error(o(160));Lh(g,b,u),Ze=null,St=!1,g=u.alternate,g!==null&&(g.return=null),u.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Uh(t,e),t=t.sibling}var Wt=null;function Uh(e,t){var a=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_t(t,e),kt(e),i&4&&(oa(3,e,e.return),qr(3,e),oa(5,e,e.return));break;case 1:_t(t,e),kt(e),i&512&&(at||a===null||dn(a,a.return)),i&64&&Ln&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?i:a.concat(i))));break;case 26:var u=Wt;if(_t(t,e),kt(e),i&512&&(at||a===null||dn(a,a.return)),i&4){var g=a!==null?a.memoizedState:null;if(i=e.memoizedState,a===null)if(i===null)if(e.stateNode===null){e:{i=e.type,a=e.memoizedProps,u=u.ownerDocument||u;t:switch(i){case"title":g=u.getElementsByTagName("title")[0],(!g||g[Da]||g[rt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=u.createElement(i),u.head.insertBefore(g,u.querySelector("head > title"))),gt(g,i,a),g[rt]=e,Pe(g),i=g;break e;case"link":var b=Um("link","href",u).get(i+(a.href||""));if(b){for(var S=0;S<b.length;S++)if(g=b[S],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(S,1);break t}}g=u.createElement(i),gt(g,i,a),u.head.appendChild(g);break;case"meta":if(b=Um("meta","content",u).get(i+(a.content||""))){for(S=0;S<b.length;S++)if(g=b[S],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(S,1);break t}}g=u.createElement(i),gt(g,i,a),u.head.appendChild(g);break;default:throw Error(o(468,i))}g[rt]=e,Pe(g),i=g}e.stateNode=i}else Bm(u,e.type,e.stateNode);else e.stateNode=Hm(u,i,e.memoizedProps);else g!==i?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,i===null?Bm(u,e.type,e.stateNode):Hm(u,i,e.memoizedProps)):i===null&&e.stateNode!==null&&ku(e,e.memoizedProps,a.memoizedProps)}break;case 27:_t(t,e),kt(e),i&512&&(at||a===null||dn(a,a.return)),a!==null&&i&4&&ku(e,e.memoizedProps,a.memoizedProps);break;case 5:if(_t(t,e),kt(e),i&512&&(at||a===null||dn(a,a.return)),e.flags&32){u=e.stateNode;try{ps(u,"")}catch(de){Ue(e,e.return,de)}}i&4&&e.stateNode!=null&&(u=e.memoizedProps,ku(e,u,a!==null?a.memoizedProps:u)),i&1024&&(zu=!0);break;case 6:if(_t(t,e),kt(e),i&4){if(e.stateNode===null)throw Error(o(162));i=e.memoizedProps,a=e.stateNode;try{a.nodeValue=i}catch(de){Ue(e,e.return,de)}}break;case 3:if(Ql=null,u=Wt,Wt=Xl(t.containerInfo),_t(t,e),Wt=u,kt(e),i&4&&a!==null&&a.memoizedState.isDehydrated)try{Qs(t.containerInfo)}catch(de){Ue(e,e.return,de)}zu&&(zu=!1,Bh(e));break;case 4:i=Wt,Wt=Xl(e.stateNode.containerInfo),_t(t,e),kt(e),Wt=i;break;case 12:_t(t,e),kt(e);break;case 31:_t(t,e),kt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Tl(e,i)));break;case 13:_t(t,e),kt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Dl=ct()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Tl(e,i)));break;case 22:u=e.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,J=Ln,ne=at;if(Ln=J||u,at=ne||R,_t(t,e),at=ne,Ln=J,kt(e),i&8192)e:for(t=e.stateNode,t._visibility=u?t._visibility&-2:t._visibility|1,u&&(a===null||R||Ln||at||Ia(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){R=a=t;try{if(g=R.stateNode,u)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{S=R.stateNode;var re=R.memoizedProps.style,W=re!=null&&re.hasOwnProperty("display")?re.display:null;S.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(de){Ue(R,R.return,de)}}}else if(t.tag===6){if(a===null){R=t;try{R.stateNode.nodeValue=u?"":R.memoizedProps}catch(de){Ue(R,R.return,de)}}}else if(t.tag===18){if(a===null){R=t;try{var ee=R.stateNode;u?Em(ee,!0):Em(R.stateNode,!1)}catch(de){Ue(R,R.return,de)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(a=i.retryQueue,a!==null&&(i.retryQueue=null,Tl(e,a))));break;case 19:_t(t,e),kt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Tl(e,i)));break;case 30:break;case 21:break;default:_t(t,e),kt(e)}}function kt(e){var t=e.flags;if(t&2){try{for(var a,i=e.return;i!==null;){if(Ah(i)){a=i;break}i=i.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var u=a.stateNode,g=Cu(e);Al(e,g,u);break;case 5:var b=a.stateNode;a.flags&32&&(ps(b,""),a.flags&=-33);var S=Cu(e);Al(e,S,b);break;case 3:case 4:var R=a.stateNode.containerInfo,J=Cu(e);Eu(e,J,R);break;default:throw Error(o(161))}}catch(ne){Ue(e,e.return,ne)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Bh(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Bh(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Hn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Dh(e,t.alternate,t),t=t.sibling}function Ia(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:oa(4,t,t.return),Ia(t);break;case 1:dn(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Eh(t,t.return,a),Ia(t);break;case 27:Wr(t.stateNode);case 26:case 5:dn(t,t.return),Ia(t);break;case 22:t.memoizedState===null&&Ia(t);break;case 30:Ia(t);break;default:Ia(t)}e=e.sibling}}function Un(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,u=e,g=t,b=g.flags;switch(g.tag){case 0:case 11:case 15:Un(u,g,a),qr(4,g);break;case 1:if(Un(u,g,a),i=g,u=i.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(J){Ue(i,i.return,J)}if(i=g,u=i.updateQueue,u!==null){var S=i.stateNode;try{var R=u.shared.hiddenCallbacks;if(R!==null)for(u.shared.hiddenCallbacks=null,u=0;u<R.length;u++)pg(R[u],S)}catch(J){Ue(i,i.return,J)}}a&&b&64&&Ch(g),Yr(g,g.return);break;case 27:Th(g);case 26:case 5:Un(u,g,a),a&&i===null&&b&4&&zh(g),Yr(g,g.return);break;case 12:Un(u,g,a);break;case 31:Un(u,g,a),a&&b&4&&Rh(u,g);break;case 13:Un(u,g,a),a&&b&4&&Hh(u,g);break;case 22:g.memoizedState===null&&Un(u,g,a),Yr(g,g.return);break;case 30:break;default:Un(u,g,a)}t=t.sibling}}function Au(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&zr(a))}function Tu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&zr(e))}function Pt(e,t,a,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)$h(e,t,a,i),t=t.sibling}function $h(e,t,a,i){var u=t.flags;switch(t.tag){case 0:case 11:case 15:Pt(e,t,a,i),u&2048&&qr(9,t);break;case 1:Pt(e,t,a,i);break;case 3:Pt(e,t,a,i),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&zr(e)));break;case 12:if(u&2048){Pt(e,t,a,i),e=t.stateNode;try{var g=t.memoizedProps,b=g.id,S=g.onPostCommit;typeof S=="function"&&S(b,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){Ue(t,t.return,R)}}else Pt(e,t,a,i);break;case 31:Pt(e,t,a,i);break;case 13:Pt(e,t,a,i);break;case 23:break;case 22:g=t.stateNode,b=t.alternate,t.memoizedState!==null?g._visibility&2?Pt(e,t,a,i):Gr(e,t):g._visibility&2?Pt(e,t,a,i):(g._visibility|=2,Rs(e,t,a,i,(t.subtreeFlags&10256)!==0||!1)),u&2048&&Au(b,t);break;case 24:Pt(e,t,a,i),u&2048&&Tu(t.alternate,t);break;default:Pt(e,t,a,i)}}function Rs(e,t,a,i,u){for(u=u&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var g=e,b=t,S=a,R=i,J=b.flags;switch(b.tag){case 0:case 11:case 15:Rs(g,b,S,R,u),qr(8,b);break;case 23:break;case 22:var ne=b.stateNode;b.memoizedState!==null?ne._visibility&2?Rs(g,b,S,R,u):Gr(g,b):(ne._visibility|=2,Rs(g,b,S,R,u)),u&&J&2048&&Au(b.alternate,b);break;case 24:Rs(g,b,S,R,u),u&&J&2048&&Tu(b.alternate,b);break;default:Rs(g,b,S,R,u)}t=t.sibling}}function Gr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,i=t,u=i.flags;switch(i.tag){case 22:Gr(a,i),u&2048&&Au(i.alternate,i);break;case 24:Gr(a,i),u&2048&&Tu(i.alternate,i);break;default:Gr(a,i)}t=t.sibling}}var Xr=8192;function Hs(e,t,a){if(e.subtreeFlags&Xr)for(e=e.child;e!==null;)Vh(e,t,a),e=e.sibling}function Vh(e,t,a){switch(e.tag){case 26:Hs(e,t,a),e.flags&Xr&&e.memoizedState!==null&&Ov(a,Wt,e.memoizedState,e.memoizedProps);break;case 5:Hs(e,t,a);break;case 3:case 4:var i=Wt;Wt=Xl(e.stateNode.containerInfo),Hs(e,t,a),Wt=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=Xr,Xr=16777216,Hs(e,t,a),Xr=i):Hs(e,t,a));break;default:Hs(e,t,a)}}function qh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Zr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];ot=i,Gh(i,e)}qh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Yh(e),e=e.sibling}function Yh(e){switch(e.tag){case 0:case 11:case 15:Zr(e),e.flags&2048&&oa(9,e,e.return);break;case 3:Zr(e);break;case 12:Zr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ml(e)):Zr(e);break;default:Zr(e)}}function Ml(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];ot=i,Gh(i,e)}qh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:oa(8,t,t.return),Ml(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Ml(t));break;default:Ml(t)}e=e.sibling}}function Gh(e,t){for(;ot!==null;){var a=ot;switch(a.tag){case 0:case 11:case 15:oa(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var i=a.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:zr(a.memoizedState.cache)}if(i=a.child,i!==null)i.return=a,ot=i;else e:for(a=e;ot!==null;){i=ot;var u=i.sibling,g=i.return;if(Oh(i),i===a){ot=null;break e}if(u!==null){u.return=g,ot=u;break e}ot=g}}}var Kb={getCacheForType:function(e){var t=dt(et),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return dt(et).controller.signal}},Ib=typeof WeakMap=="function"?WeakMap:Map,Re=0,qe=null,Ee=null,Ae=0,He=0,Ot=null,ca=!1,Us=!1,Mu=!1,Bn=0,Ie=0,ua=0,Ja=0,Du=0,Lt=0,Bs=0,Qr=null,Ct=null,Ou=!1,Dl=0,Xh=0,Ol=1/0,Ll=null,da=null,it=0,fa=null,$s=null,$n=0,Lu=0,Ru=null,Zh=null,Fr=0,Hu=null;function Rt(){return(Re&2)!==0&&Ae!==0?Ae&-Ae:_.T!==null?Yu():Bi()}function Qh(){if(Lt===0)if((Ae&536870912)===0||Me){var e=cs;cs<<=1,(cs&3932160)===0&&(cs=262144),Lt=e}else Lt=536870912;return e=Mt.current,e!==null&&(e.flags|=32),Lt}function Et(e,t,a){(e===qe&&(He===2||He===9)||e.cancelPendingCommit!==null)&&(Vs(e,0),ga(e,Ae,Lt,!1)),Ma(e,a),((Re&2)===0||e!==qe)&&(e===qe&&((Re&2)===0&&(Ja|=a),Ie===4&&ga(e,Ae,Lt,!1)),fn(e))}function Fh(e,t,a){if((Re&6)!==0)throw Error(o(327));var i=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Ta(e,t),u=i?Pb(e,t):Bu(e,t,!0),g=i;do{if(u===0){Us&&!i&&ga(e,t,0,!1);break}else{if(a=e.current.alternate,g&&!Jb(a)){u=Bu(e,t,!1),g=!1;continue}if(u===2){if(g=t,e.errorRecoveryDisabledLanes&g)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){t=b;e:{var S=e;u=Qr;var R=S.current.memoizedState.isDehydrated;if(R&&(Vs(S,b).flags|=256),b=Bu(S,b,!1),b!==2){if(Mu&&!R){S.errorRecoveryDisabledLanes|=g,Ja|=g,u=4;break e}g=Ct,Ct=u,g!==null&&(Ct===null?Ct=g:Ct.push.apply(Ct,g))}u=b}if(g=!1,u!==2)continue}}if(u===1){Vs(e,0),ga(e,t,0,!0);break}e:{switch(i=e,g=u,g){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:ga(i,t,Lt,!ca);break e;case 2:Ct=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(u=Dl+300-ct(),10<u)){if(ga(i,t,Lt,!ca),ds(i,0,!0)!==0)break e;$n=t,i.timeoutHandle=_m(Kh.bind(null,i,a,Ct,Ll,Ou,t,Lt,Ja,Bs,ca,g,"Throttled",-0,0),u);break e}Kh(i,a,Ct,Ll,Ou,t,Lt,Ja,Bs,ca,g,null,-0,0)}}break}while(!0);fn(e)}function Kh(e,t,a,i,u,g,b,S,R,J,ne,re,W,ee){if(e.timeoutHandle=-1,re=t.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_n},Vh(t,g,re);var de=(g&62914560)===g?Dl-ct():(g&4194048)===g?Xh-ct():0;if(de=Lv(re,de),de!==null){$n=g,e.cancelPendingCommit=de(am.bind(null,e,t,g,a,i,u,b,S,R,ne,re,null,W,ee)),ga(e,g,b,!J);return}}am(e,t,g,a,i,u,b,S,R)}function Jb(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var i=0;i<a.length;i++){var u=a[i],g=u.getSnapshot;u=u.value;try{if(!At(g(),u))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ga(e,t,a,i){t&=~Du,t&=~Ja,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var u=t;0<u;){var g=31-pt(u),b=1<<g;i[g]=-1,u&=~b}a!==0&&Ri(e,a,t)}function Rl(){return(Re&6)===0?(Kr(0),!1):!0}function Uu(){if(Ee!==null){if(He===0)var e=Ee.return;else e=Ee,zn=qa=null,eu(e),Ts=null,Tr=0,e=Ee;for(;e!==null;)kh(e.alternate,e),e=e.return;Ee=null}}function Vs(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,xv(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),$n=0,Uu(),qe=e,Ee=a=Cn(e.current,null),Ae=t,He=0,Ot=null,ca=!1,Us=Ta(e,t),Mu=!1,Bs=Lt=Du=Ja=ua=Ie=0,Ct=Qr=null,Ou=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var u=31-pt(i),g=1<<u;t|=e[u],i&=~g}return Bn=t,al(),a}function Ih(e,t){ke=null,_.H=Br,t===As||t===dl?(t=fg(),He=3):t===qc?(t=fg(),He=4):He=t===pu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ot=t,Ee===null&&(Ie=1,_l(e,$t(t,e.current)))}function Jh(){var e=Mt.current;return e===null?!0:(Ae&4194048)===Ae?Gt===null:(Ae&62914560)===Ae||(Ae&536870912)!==0?e===Gt:!1}function Wh(){var e=_.H;return _.H=Br,e===null?Br:e}function Ph(){var e=_.A;return _.A=Kb,e}function Hl(){Ie=4,ca||(Ae&4194048)!==Ae&&Mt.current!==null||(Us=!0),(ua&134217727)===0&&(Ja&134217727)===0||qe===null||ga(qe,Ae,Lt,!1)}function Bu(e,t,a){var i=Re;Re|=2;var u=Wh(),g=Ph();(qe!==e||Ae!==t)&&(Ll=null,Vs(e,t)),t=!1;var b=Ie;e:do try{if(He!==0&&Ee!==null){var S=Ee,R=Ot;switch(He){case 8:Uu(),b=6;break e;case 3:case 2:case 9:case 6:Mt.current===null&&(t=!0);var J=He;if(He=0,Ot=null,qs(e,S,R,J),a&&Us){b=0;break e}break;default:J=He,He=0,Ot=null,qs(e,S,R,J)}}Wb(),b=Ie;break}catch(ne){Ih(e,ne)}while(!0);return t&&e.shellSuspendCounter++,zn=qa=null,Re=i,_.H=u,_.A=g,Ee===null&&(qe=null,Ae=0,al()),b}function Wb(){for(;Ee!==null;)em(Ee)}function Pb(e,t){var a=Re;Re|=2;var i=Wh(),u=Ph();qe!==e||Ae!==t?(Ll=null,Ol=ct()+500,Vs(e,t)):Us=Ta(e,t);e:do try{if(He!==0&&Ee!==null){t=Ee;var g=Ot;t:switch(He){case 1:He=0,Ot=null,qs(e,t,g,1);break;case 2:case 9:if(ug(g)){He=0,Ot=null,tm(t);break}t=function(){He!==2&&He!==9||qe!==e||(He=7),fn(e)},g.then(t,t);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:ug(g)?(He=0,Ot=null,tm(t)):(He=0,Ot=null,qs(e,t,g,7));break;case 5:var b=null;switch(Ee.tag){case 26:b=Ee.memoizedState;case 5:case 27:var S=Ee;if(b?$m(b):S.stateNode.complete){He=0,Ot=null;var R=S.sibling;if(R!==null)Ee=R;else{var J=S.return;J!==null?(Ee=J,Ul(J)):Ee=null}break t}}He=0,Ot=null,qs(e,t,g,5);break;case 6:He=0,Ot=null,qs(e,t,g,6);break;case 8:Uu(),Ie=6;break e;default:throw Error(o(462))}}ev();break}catch(ne){Ih(e,ne)}while(!0);return zn=qa=null,_.H=i,_.A=u,Re=a,Ee!==null?0:(qe=null,Ae=0,al(),Ie)}function ev(){for(;Ee!==null&&!Ca();)em(Ee)}function em(e){var t=Sh(e.alternate,e,Bn);e.memoizedProps=e.pendingProps,t===null?Ul(e):Ee=t}function tm(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=yh(a,t,t.pendingProps,t.type,void 0,Ae);break;case 11:t=yh(a,t,t.pendingProps,t.type.render,t.ref,Ae);break;case 5:eu(t);default:kh(a,t),t=Ee=Pf(t,Bn),t=Sh(a,t,Bn)}e.memoizedProps=e.pendingProps,t===null?Ul(e):Ee=t}function qs(e,t,a,i){zn=qa=null,eu(t),Ts=null,Tr=0;var u=t.return;try{if(qb(e,u,t,a,Ae)){Ie=1,_l(e,$t(a,e.current)),Ee=null;return}}catch(g){if(u!==null)throw Ee=u,g;Ie=1,_l(e,$t(a,e.current)),Ee=null;return}t.flags&32768?(Me||i===1?e=!0:Us||(Ae&536870912)!==0?e=!1:(ca=e=!0,(i===2||i===9||i===3||i===6)&&(i=Mt.current,i!==null&&i.tag===13&&(i.flags|=16384))),nm(t,e)):Ul(t)}function Ul(e){var t=e;do{if((t.flags&32768)!==0){nm(t,ca);return}e=t.return;var a=Xb(t.alternate,t,Bn);if(a!==null){Ee=a;return}if(t=t.sibling,t!==null){Ee=t;return}Ee=t=e}while(t!==null);Ie===0&&(Ie=5)}function nm(e,t){do{var a=Zb(e.alternate,e);if(a!==null){a.flags&=32767,Ee=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Ee=e;return}Ee=e=a}while(e!==null);Ie=6,Ee=null}function am(e,t,a,i,u,g,b,S,R){e.cancelPendingCommit=null;do Bl();while(it!==0);if((Re&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(g=t.lanes|t.childLanes,g|=Cc,ac(e,a,g,b,S,R),e===qe&&(Ee=qe=null,Ae=0),$s=t,fa=e,$n=a,Lu=g,Ru=u,Zh=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,sv(za,function(){return om(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=_.T,_.T=null,u=O.p,O.p=2,b=Re,Re|=4;try{Qb(e,t,a)}finally{Re=b,O.p=u,_.T=i}}it=1,sm(),rm(),im()}}function sm(){if(it===1){it=0;var e=fa,t=$s,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=_.T,_.T=null;var i=O.p;O.p=2;var u=Re;Re|=4;try{Uh(t,e);var g=Ju,b=Gf(e.containerInfo),S=g.focusedElem,R=g.selectionRange;if(b!==S&&S&&S.ownerDocument&&Yf(S.ownerDocument.documentElement,S)){if(R!==null&&jc(S)){var J=R.start,ne=R.end;if(ne===void 0&&(ne=J),"selectionStart"in S)S.selectionStart=J,S.selectionEnd=Math.min(ne,S.value.length);else{var re=S.ownerDocument||document,W=re&&re.defaultView||window;if(W.getSelection){var ee=W.getSelection(),de=S.textContent.length,ve=Math.min(R.start,de),Ve=R.end===void 0?ve:Math.min(R.end,de);!ee.extend&&ve>Ve&&(b=Ve,Ve=ve,ve=b);var G=qf(S,ve),$=qf(S,Ve);if(G&&$&&(ee.rangeCount!==1||ee.anchorNode!==G.node||ee.anchorOffset!==G.offset||ee.focusNode!==$.node||ee.focusOffset!==$.offset)){var I=re.createRange();I.setStart(G.node,G.offset),ee.removeAllRanges(),ve>Ve?(ee.addRange(I),ee.extend($.node,$.offset)):(I.setEnd($.node,$.offset),ee.addRange(I))}}}}for(re=[],ee=S;ee=ee.parentNode;)ee.nodeType===1&&re.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<re.length;S++){var ae=re[S];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Jl=!!Iu,Ju=Iu=null}finally{Re=u,O.p=i,_.T=a}}e.current=t,it=2}}function rm(){if(it===2){it=0;var e=fa,t=$s,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=_.T,_.T=null;var i=O.p;O.p=2;var u=Re;Re|=4;try{Dh(e,t.alternate,t)}finally{Re=u,O.p=i,_.T=a}}it=3}}function im(){if(it===4||it===3){it=0,Ea();var e=fa,t=$s,a=$n,i=Zh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?it=5:(it=0,$s=fa=null,lm(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(da=null),hr(a),t=t.stateNode,mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(Aa,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=_.T,u=O.p,O.p=2,_.T=null;try{for(var g=e.onRecoverableError,b=0;b<i.length;b++){var S=i[b];g(S.value,{componentStack:S.stack})}}finally{_.T=t,O.p=u}}($n&3)!==0&&Bl(),fn(e),u=e.pendingLanes,(a&261930)!==0&&(u&42)!==0?e===Hu?Fr++:(Fr=0,Hu=e):Fr=0,Kr(0)}}function lm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,zr(t)))}function Bl(){return sm(),rm(),im(),om()}function om(){if(it!==5)return!1;var e=fa,t=Lu;Lu=0;var a=hr($n),i=_.T,u=O.p;try{O.p=32>a?32:a,_.T=null,a=Ru,Ru=null;var g=fa,b=$n;if(it=0,$s=fa=null,$n=0,(Re&6)!==0)throw Error(o(331));var S=Re;if(Re|=4,Yh(g.current),$h(g,g.current,b,a),Re=S,Kr(0,!1),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(Aa,g)}catch{}return!0}finally{O.p=u,_.T=i,lm(e,t)}}function cm(e,t,a){t=$t(a,t),t=mu(e.stateNode,t,2),e=ra(e,t,2),e!==null&&(Ma(e,2),fn(e))}function Ue(e,t,a){if(e.tag===3)cm(e,e,a);else for(;t!==null;){if(t.tag===3){cm(t,e,a);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(da===null||!da.has(i))){e=$t(a,e),a=uh(2),i=ra(t,a,2),i!==null&&(dh(a,i,t,e),Ma(i,2),fn(i));break}}t=t.return}}function $u(e,t,a){var i=e.pingCache;if(i===null){i=e.pingCache=new Ib;var u=new Set;i.set(t,u)}else u=i.get(t),u===void 0&&(u=new Set,i.set(t,u));u.has(a)||(Mu=!0,u.add(a),e=tv.bind(null,e,t,a),t.then(e,e))}function tv(e,t,a){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,qe===e&&(Ae&a)===a&&(Ie===4||Ie===3&&(Ae&62914560)===Ae&&300>ct()-Dl?(Re&2)===0&&Vs(e,0):Du|=a,Bs===Ae&&(Bs=0)),fn(e)}function um(e,t){t===0&&(t=Li()),e=Ba(e,t),e!==null&&(Ma(e,t),fn(e))}function nv(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),um(e,a)}function av(e,t){var a=0;switch(e.tag){case 31:case 13:var i=e.stateNode,u=e.memoizedState;u!==null&&(a=u.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(o(314))}i!==null&&i.delete(t),um(e,a)}function sv(e,t){return Kt(e,t)}var $l=null,Ys=null,Vu=!1,Vl=!1,qu=!1,ha=0;function fn(e){e!==Ys&&e.next===null&&(Ys===null?$l=Ys=e:Ys=Ys.next=e),Vl=!0,Vu||(Vu=!0,iv())}function Kr(e,t){if(!qu&&Vl){qu=!0;do for(var a=!1,i=$l;i!==null;){if(e!==0){var u=i.pendingLanes;if(u===0)var g=0;else{var b=i.suspendedLanes,S=i.pingedLanes;g=(1<<31-pt(42|e)+1)-1,g&=u&~(b&~S),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,hm(i,g))}else g=Ae,g=ds(i,i===qe?g:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(g&3)===0||Ta(i,g)||(a=!0,hm(i,g));i=i.next}while(a);qu=!1}}function rv(){dm()}function dm(){Vl=Vu=!1;var e=0;ha!==0&&pv()&&(e=ha);for(var t=ct(),a=null,i=$l;i!==null;){var u=i.next,g=fm(i,t);g===0?(i.next=null,a===null?$l=u:a.next=u,u===null&&(Ys=a)):(a=i,(e!==0||(g&3)!==0)&&(Vl=!0)),i=u}it!==0&&it!==5||Kr(e),ha!==0&&(ha=0)}function fm(e,t){for(var a=e.suspendedLanes,i=e.pingedLanes,u=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var b=31-pt(g),S=1<<b,R=u[b];R===-1?((S&a)===0||(S&i)!==0)&&(u[b]=nc(S,t)):R<=t&&(e.expiredLanes|=S),g&=~S}if(t=qe,a=Ae,a=ds(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,a===0||e===t&&(He===2||He===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&bn(i),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Ta(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(i!==null&&bn(i),hr(a)){case 2:case 8:a=Zn;break;case 32:a=za;break;case 268435456:a=ls;break;default:a=za}return i=gm.bind(null,e),a=Kt(a,i),e.callbackPriority=t,e.callbackNode=a,t}return i!==null&&i!==null&&bn(i),e.callbackPriority=2,e.callbackNode=null,2}function gm(e,t){if(it!==0&&it!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Bl()&&e.callbackNode!==a)return null;var i=Ae;return i=ds(e,e===qe?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(Fh(e,i,t),fm(e,ct()),e.callbackNode!=null&&e.callbackNode===a?gm.bind(null,e):null)}function hm(e,t){if(Bl())return null;Fh(e,t,!0)}function iv(){yv(function(){(Re&6)!==0?Kt(vn,rv):dm()})}function Yu(){if(ha===0){var e=Es;e===0&&(e=os,os<<=1,(os&261888)===0&&(os=256)),ha=e}return ha}function mm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ki(""+e)}function pm(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function lv(e,t,a,i,u){if(t==="submit"&&a&&a.stateNode===u){var g=mm((u[ht]||null).action),b=i.submitter;b&&(t=(t=b[ht]||null)?mm(t.formAction):b.getAttribute("formAction"),t!==null&&(g=t,b=null));var S=new Pi("action","action",null,i,u);e.push({event:S,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(ha!==0){var R=b?pm(u,b):new FormData(u);cu(a,{pending:!0,data:R,method:u.method,action:g},null,R)}}else typeof g=="function"&&(S.preventDefault(),R=b?pm(u,b):new FormData(u),cu(a,{pending:!0,data:R,method:u.method,action:g},g,R))},currentTarget:u}]})}}for(var Gu=0;Gu<kc.length;Gu++){var Xu=kc[Gu],ov=Xu.toLowerCase(),cv=Xu[0].toUpperCase()+Xu.slice(1);Jt(ov,"on"+cv)}Jt(Qf,"onAnimationEnd"),Jt(Ff,"onAnimationIteration"),Jt(Kf,"onAnimationStart"),Jt("dblclick","onDoubleClick"),Jt("focusin","onFocus"),Jt("focusout","onBlur"),Jt(_b,"onTransitionRun"),Jt(kb,"onTransitionStart"),Jt(Cb,"onTransitionCancel"),Jt(If,"onTransitionEnd"),Jn("onMouseEnter",["mouseout","mouseover"]),Jn("onMouseLeave",["mouseout","mouseover"]),Jn("onPointerEnter",["pointerout","pointerover"]),Jn("onPointerLeave",["pointerout","pointerover"]),wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wn("onBeforeInput",["compositionend","keypress","textInput","paste"]),wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ir));function xm(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var i=e[a],u=i.event;i=i.listeners;e:{var g=void 0;if(t)for(var b=i.length-1;0<=b;b--){var S=i[b],R=S.instance,J=S.currentTarget;if(S=S.listener,R!==g&&u.isPropagationStopped())break e;g=S,u.currentTarget=J;try{g(u)}catch(ne){nl(ne)}u.currentTarget=null,g=R}else for(b=0;b<i.length;b++){if(S=i[b],R=S.instance,J=S.currentTarget,S=S.listener,R!==g&&u.isPropagationStopped())break e;g=S,u.currentTarget=J;try{g(u)}catch(ne){nl(ne)}u.currentTarget=null,g=R}}}}function ze(e,t){var a=t[fs];a===void 0&&(a=t[fs]=new Set);var i=e+"__bubble";a.has(i)||(ym(t,e,2,!1),a.add(i))}function Zu(e,t,a){var i=0;t&&(i|=4),ym(a,e,i,t)}var ql="_reactListening"+Math.random().toString(36).slice(2);function Qu(e){if(!e[ql]){e[ql]=!0,Yi.forEach(function(a){a!=="selectionchange"&&(uv.has(a)||Zu(a,!1,e),Zu(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ql]||(t[ql]=!0,Zu("selectionchange",!1,t))}}function ym(e,t,a,i){switch(Qm(t)){case 2:var u=Uv;break;case 8:u=Bv;break;default:u=od}a=u.bind(null,t,a,e),u=void 0,!gc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),i?u!==void 0?e.addEventListener(t,a,{capture:!0,passive:u}):e.addEventListener(t,a,!0):u!==void 0?e.addEventListener(t,a,{passive:u}):e.addEventListener(t,a,!1)}function Fu(e,t,a,i,u){var g=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var b=i.tag;if(b===3||b===4){var S=i.stateNode.containerInfo;if(S===u)break;if(b===4)for(b=i.return;b!==null;){var R=b.tag;if((R===3||R===4)&&b.stateNode.containerInfo===u)return;b=b.return}for(;S!==null;){if(b=Qn(S),b===null)return;if(R=b.tag,R===5||R===6||R===26||R===27){i=g=b;continue e}S=S.parentNode}}i=i.return}wf(function(){var J=g,ne=dc(a),re=[];e:{var W=Jf.get(e);if(W!==void 0){var ee=Pi,de=e;switch(e){case"keypress":if(Ji(a)===0)break e;case"keydown":case"keyup":ee=ab;break;case"focusin":de="focus",ee=xc;break;case"focusout":de="blur",ee=xc;break;case"beforeblur":case"afterblur":ee=xc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=kf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Xy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=ib;break;case Qf:case Ff:case Kf:ee=Fy;break;case If:ee=ob;break;case"scroll":case"scrollend":ee=Yy;break;case"wheel":ee=ub;break;case"copy":case"cut":case"paste":ee=Iy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Ef;break;case"toggle":case"beforetoggle":ee=fb}var ve=(t&4)!==0,Ve=!ve&&(e==="scroll"||e==="scrollend"),G=ve?W!==null?W+"Capture":null:W;ve=[];for(var $=J,I;$!==null;){var ae=$;if(I=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||I===null||G===null||(ae=yr($,G),ae!=null&&ve.push(Jr($,ae,I))),Ve)break;$=$.return}0<ve.length&&(W=new ee(W,de,null,a,ne),re.push({event:W,listeners:ve}))}}if((t&7)===0){e:{if(W=e==="mouseover"||e==="pointerover",ee=e==="mouseout"||e==="pointerout",W&&a!==uc&&(de=a.relatedTarget||a.fromElement)&&(Qn(de)||de[jn]))break e;if((ee||W)&&(W=ne.window===ne?ne:(W=ne.ownerDocument)?W.defaultView||W.parentWindow:window,ee?(de=a.relatedTarget||a.toElement,ee=J,de=de?Qn(de):null,de!==null&&(Ve=d(de),ve=de.tag,de!==Ve||ve!==5&&ve!==27&&ve!==6)&&(de=null)):(ee=null,de=J),ee!==de)){if(ve=kf,ae="onMouseLeave",G="onMouseEnter",$="mouse",(e==="pointerout"||e==="pointerover")&&(ve=Ef,ae="onPointerLeave",G="onPointerEnter",$="pointer"),Ve=ee==null?W:Kn(ee),I=de==null?W:Kn(de),W=new ve(ae,$+"leave",ee,a,ne),W.target=Ve,W.relatedTarget=I,ae=null,Qn(ne)===J&&(ve=new ve(G,$+"enter",de,a,ne),ve.target=I,ve.relatedTarget=Ve,ae=ve),Ve=ae,ee&&de)t:{for(ve=dv,G=ee,$=de,I=0,ae=G;ae;ae=ve(ae))I++;ae=0;for(var pe=$;pe;pe=ve(pe))ae++;for(;0<I-ae;)G=ve(G),I--;for(;0<ae-I;)$=ve($),ae--;for(;I--;){if(G===$||$!==null&&G===$.alternate){ve=G;break t}G=ve(G),$=ve($)}ve=null}else ve=null;ee!==null&&bm(re,W,ee,ve,!1),de!==null&&Ve!==null&&bm(re,Ve,de,ve,!0)}}e:{if(W=J?Kn(J):window,ee=W.nodeName&&W.nodeName.toLowerCase(),ee==="select"||ee==="input"&&W.type==="file")var Oe=Rf;else if(Of(W))if(Hf)Oe=jb;else{Oe=vb;var ge=bb}else ee=W.nodeName,!ee||ee.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?J&&cc(J.elementType)&&(Oe=Rf):Oe=Nb;if(Oe&&(Oe=Oe(e,J))){Lf(re,Oe,a,ne);break e}ge&&ge(e,W,J),e==="focusout"&&J&&W.type==="number"&&J.memoizedProps.value!=null&&xr(W,"number",W.value)}switch(ge=J?Kn(J):window,e){case"focusin":(Of(ge)||ge.contentEditable==="true")&&(vs=ge,wc=J,kr=null);break;case"focusout":kr=wc=vs=null;break;case"mousedown":Sc=!0;break;case"contextmenu":case"mouseup":case"dragend":Sc=!1,Xf(re,a,ne);break;case"selectionchange":if(Sb)break;case"keydown":case"keyup":Xf(re,a,ne)}var Ce;if(bc)e:{switch(e){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else bs?Mf(e,a)&&(Te="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(zf&&a.locale!=="ko"&&(bs||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&bs&&(Ce=Sf()):(Wn=ne,hc="value"in Wn?Wn.value:Wn.textContent,bs=!0)),ge=Yl(J,Te),0<ge.length&&(Te=new Cf(Te,e,null,a,ne),re.push({event:Te,listeners:ge}),Ce?Te.data=Ce:(Ce=Df(a),Ce!==null&&(Te.data=Ce)))),(Ce=hb?mb(e,a):pb(e,a))&&(Te=Yl(J,"onBeforeInput"),0<Te.length&&(ge=new Cf("onBeforeInput","beforeinput",null,a,ne),re.push({event:ge,listeners:Te}),ge.data=Ce)),lv(re,e,J,a,ne)}xm(re,t)})}function Jr(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Yl(e,t){for(var a=t+"Capture",i=[];e!==null;){var u=e,g=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||g===null||(u=yr(e,a),u!=null&&i.unshift(Jr(e,u,g)),u=yr(e,t),u!=null&&i.push(Jr(e,u,g))),e.tag===3)return i;e=e.return}return[]}function dv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function bm(e,t,a,i,u){for(var g=t._reactName,b=[];a!==null&&a!==i;){var S=a,R=S.alternate,J=S.stateNode;if(S=S.tag,R!==null&&R===i)break;S!==5&&S!==26&&S!==27||J===null||(R=J,u?(J=yr(a,g),J!=null&&b.unshift(Jr(a,J,R))):u||(J=yr(a,g),J!=null&&b.push(Jr(a,J,R)))),a=a.return}b.length!==0&&e.push({event:t,listeners:b})}var fv=/\r\n?/g,gv=/\u0000|\uFFFD/g;function vm(e){return(typeof e=="string"?e:""+e).replace(fv,`
`).replace(gv,"")}function Nm(e,t){return t=vm(t),vm(e)===t}function $e(e,t,a,i,u,g){switch(a){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||ps(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&ps(e,""+i);break;case"className":hs(e,"class",i);break;case"tabIndex":hs(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":hs(e,a,i);break;case"style":Nf(e,i,g);break;case"data":if(t!=="object"){hs(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=Ki(""+i),e.setAttribute(a,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(t!=="input"&&$e(e,t,"name",u.name,u,null),$e(e,t,"formEncType",u.formEncType,u,null),$e(e,t,"formMethod",u.formMethod,u,null),$e(e,t,"formTarget",u.formTarget,u,null)):($e(e,t,"encType",u.encType,u,null),$e(e,t,"method",u.method,u,null),$e(e,t,"target",u.target,u,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=Ki(""+i),e.setAttribute(a,i);break;case"onClick":i!=null&&(e.onclick=_n);break;case"onScroll":i!=null&&ze("scroll",e);break;case"onScrollEnd":i!=null&&ze("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(o(61));if(a=i.__html,a!=null){if(u.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}a=Ki(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""+i):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":i===!0?e.setAttribute(a,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,i):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(a,i):e.removeAttribute(a);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(a):e.setAttribute(a,i);break;case"popover":ze("beforetoggle",e),ze("toggle",e),gs(e,"popover",i);break;case"xlinkActuate":It(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":It(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":It(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":It(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":It(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":It(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":It(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":It(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":It(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":gs(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Vy.get(a)||a,gs(e,a,i))}}function Ku(e,t,a,i,u,g){switch(a){case"style":Nf(e,i,g);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(o(61));if(a=i.__html,a!=null){if(u.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"children":typeof i=="string"?ps(e,i):(typeof i=="number"||typeof i=="bigint")&&ps(e,""+i);break;case"onScroll":i!=null&&ze("scroll",e);break;case"onScrollEnd":i!=null&&ze("scrollend",e);break;case"onClick":i!=null&&(e.onclick=_n);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gi.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(u=a.endsWith("Capture"),t=a.slice(2,u?a.length-7:void 0),g=e[ht]||null,g=g!=null?g[a]:null,typeof g=="function"&&e.removeEventListener(t,g,u),typeof i=="function")){typeof g!="function"&&g!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,i,u);break e}a in e?e[a]=i:i===!0?e.setAttribute(a,""):gs(e,a,i)}}}function gt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",e),ze("load",e);var i=!1,u=!1,g;for(g in a)if(a.hasOwnProperty(g)){var b=a[g];if(b!=null)switch(g){case"src":i=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:$e(e,t,g,b,a,null)}}u&&$e(e,t,"srcSet",a.srcSet,a,null),i&&$e(e,t,"src",a.src,a,null);return;case"input":ze("invalid",e);var S=g=b=u=null,R=null,J=null;for(i in a)if(a.hasOwnProperty(i)){var ne=a[i];if(ne!=null)switch(i){case"name":u=ne;break;case"type":b=ne;break;case"checked":R=ne;break;case"defaultChecked":J=ne;break;case"value":g=ne;break;case"defaultValue":S=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(o(137,t));break;default:$e(e,t,i,ne,a,null)}}Fi(e,g,S,R,J,b,u,!1);return;case"select":ze("invalid",e),i=b=g=null;for(u in a)if(a.hasOwnProperty(u)&&(S=a[u],S!=null))switch(u){case"value":g=S;break;case"defaultValue":b=S;break;case"multiple":i=S;default:$e(e,t,u,S,a,null)}t=g,a=b,e.multiple=!!i,t!=null?Sn(e,!!i,t,!1):a!=null&&Sn(e,!!i,a,!0);return;case"textarea":ze("invalid",e),g=u=i=null;for(b in a)if(a.hasOwnProperty(b)&&(S=a[b],S!=null))switch(b){case"value":i=S;break;case"defaultValue":u=S;break;case"children":g=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(o(91));break;default:$e(e,t,b,S,a,null)}bf(e,i,u,g);return;case"option":for(R in a)a.hasOwnProperty(R)&&(i=a[R],i!=null)&&(R==="selected"?e.selected=i&&typeof i!="function"&&typeof i!="symbol":$e(e,t,R,i,a,null));return;case"dialog":ze("beforetoggle",e),ze("toggle",e),ze("cancel",e),ze("close",e);break;case"iframe":case"object":ze("load",e);break;case"video":case"audio":for(i=0;i<Ir.length;i++)ze(Ir[i],e);break;case"image":ze("error",e),ze("load",e);break;case"details":ze("toggle",e);break;case"embed":case"source":case"link":ze("error",e),ze("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in a)if(a.hasOwnProperty(J)&&(i=a[J],i!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:$e(e,t,J,i,a,null)}return;default:if(cc(t)){for(ne in a)a.hasOwnProperty(ne)&&(i=a[ne],i!==void 0&&Ku(e,t,ne,i,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(i=a[S],i!=null&&$e(e,t,S,i,a,null))}function hv(e,t,a,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,g=null,b=null,S=null,R=null,J=null,ne=null;for(ee in a){var re=a[ee];if(a.hasOwnProperty(ee)&&re!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":R=re;default:i.hasOwnProperty(ee)||$e(e,t,ee,null,i,re)}}for(var W in i){var ee=i[W];if(re=a[W],i.hasOwnProperty(W)&&(ee!=null||re!=null))switch(W){case"type":g=ee;break;case"name":u=ee;break;case"checked":J=ee;break;case"defaultChecked":ne=ee;break;case"value":b=ee;break;case"defaultValue":S=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(o(137,t));break;default:ee!==re&&$e(e,t,W,ee,i,re)}}La(e,b,S,R,J,ne,g,u);return;case"select":ee=b=S=W=null;for(g in a)if(R=a[g],a.hasOwnProperty(g)&&R!=null)switch(g){case"value":break;case"multiple":ee=R;default:i.hasOwnProperty(g)||$e(e,t,g,null,i,R)}for(u in i)if(g=i[u],R=a[u],i.hasOwnProperty(u)&&(g!=null||R!=null))switch(u){case"value":W=g;break;case"defaultValue":S=g;break;case"multiple":b=g;default:g!==R&&$e(e,t,u,g,i,R)}t=S,a=b,i=ee,W!=null?Sn(e,!!a,W,!1):!!i!=!!a&&(t!=null?Sn(e,!!a,t,!0):Sn(e,!!a,a?[]:"",!1));return;case"textarea":ee=W=null;for(S in a)if(u=a[S],a.hasOwnProperty(S)&&u!=null&&!i.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:$e(e,t,S,null,i,u)}for(b in i)if(u=i[b],g=a[b],i.hasOwnProperty(b)&&(u!=null||g!=null))switch(b){case"value":W=u;break;case"defaultValue":ee=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(o(91));break;default:u!==g&&$e(e,t,b,u,i,g)}yf(e,W,ee);return;case"option":for(var de in a)W=a[de],a.hasOwnProperty(de)&&W!=null&&!i.hasOwnProperty(de)&&(de==="selected"?e.selected=!1:$e(e,t,de,null,i,W));for(R in i)W=i[R],ee=a[R],i.hasOwnProperty(R)&&W!==ee&&(W!=null||ee!=null)&&(R==="selected"?e.selected=W&&typeof W!="function"&&typeof W!="symbol":$e(e,t,R,W,i,ee));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)W=a[ve],a.hasOwnProperty(ve)&&W!=null&&!i.hasOwnProperty(ve)&&$e(e,t,ve,null,i,W);for(J in i)if(W=i[J],ee=a[J],i.hasOwnProperty(J)&&W!==ee&&(W!=null||ee!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(o(137,t));break;default:$e(e,t,J,W,i,ee)}return;default:if(cc(t)){for(var Ve in a)W=a[Ve],a.hasOwnProperty(Ve)&&W!==void 0&&!i.hasOwnProperty(Ve)&&Ku(e,t,Ve,void 0,i,W);for(ne in i)W=i[ne],ee=a[ne],!i.hasOwnProperty(ne)||W===ee||W===void 0&&ee===void 0||Ku(e,t,ne,W,i,ee);return}}for(var G in a)W=a[G],a.hasOwnProperty(G)&&W!=null&&!i.hasOwnProperty(G)&&$e(e,t,G,null,i,W);for(re in i)W=i[re],ee=a[re],!i.hasOwnProperty(re)||W===ee||W==null&&ee==null||$e(e,t,re,W,i,ee)}function jm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),i=0;i<a.length;i++){var u=a[i],g=u.transferSize,b=u.initiatorType,S=u.duration;if(g&&S&&jm(b)){for(b=0,S=u.responseEnd,i+=1;i<a.length;i++){var R=a[i],J=R.startTime;if(J>S)break;var ne=R.transferSize,re=R.initiatorType;ne&&jm(re)&&(R=R.responseEnd,b+=ne*(R<S?1:(S-J)/(R-J)))}if(--i,t+=8*(g+b)/(u.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Iu=null,Ju=null;function Gl(e){return e.nodeType===9?e:e.ownerDocument}function wm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Wu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Pu=null;function pv(){var e=window.event;return e&&e.type==="popstate"?e===Pu?!1:(Pu=e,!0):(Pu=null,!1)}var _m=typeof setTimeout=="function"?setTimeout:void 0,xv=typeof clearTimeout=="function"?clearTimeout:void 0,km=typeof Promise=="function"?Promise:void 0,yv=typeof queueMicrotask=="function"?queueMicrotask:typeof km<"u"?function(e){return km.resolve(null).then(e).catch(bv)}:_m;function bv(e){setTimeout(function(){throw e})}function ma(e){return e==="head"}function Cm(e,t){var a=t,i=0;do{var u=a.nextSibling;if(e.removeChild(a),u&&u.nodeType===8)if(a=u.data,a==="/$"||a==="/&"){if(i===0){e.removeChild(u),Qs(t);return}i--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")i++;else if(a==="html")Wr(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Wr(a);for(var g=a.firstChild;g;){var b=g.nextSibling,S=g.nodeName;g[Da]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&g.rel.toLowerCase()==="stylesheet"||a.removeChild(g),g=b}}else a==="body"&&Wr(e.ownerDocument.body);a=u}while(a);Qs(t)}function Em(e,t){var a=e;e=0;do{var i=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),i&&i.nodeType===8)if(a=i.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=i}while(a)}function ed(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ed(a),mr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function vv(e,t,a,i){for(;e.nodeType===1;){var u=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Da])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var g=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=Xt(e.nextSibling),e===null)break}return null}function Nv(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Xt(e.nextSibling),e===null))return null;return e}function zm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Xt(e.nextSibling),e===null))return null;return e}function td(e){return e.data==="$?"||e.data==="$~"}function nd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function jv(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var i=function(){t(),a.removeEventListener("DOMContentLoaded",i)};a.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Xt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var ad=null;function Am(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Xt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Tm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Mm(e,t,a){switch(t=Gl(a),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Wr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);mr(e)}var Zt=new Map,Dm=new Set;function Xl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Vn=O.d;O.d={f:wv,r:Sv,D:_v,C:kv,L:Cv,m:Ev,X:Av,S:zv,M:Tv};function wv(){var e=Vn.f(),t=Rl();return e||t}function Sv(e){var t=Fn(e);t!==null&&t.tag===5&&t.type==="form"?Ig(t):Vn.r(e)}var Gs=typeof document>"u"?null:document;function Om(e,t,a){var i=Gs;if(i&&typeof t=="string"&&t){var u=jt(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof a=="string"&&(u+='[crossorigin="'+a+'"]'),Dm.has(u)||(Dm.add(u),e={rel:e,crossOrigin:a,href:t},i.querySelector(u)===null&&(t=i.createElement("link"),gt(t,"link",e),Pe(t),i.head.appendChild(t)))}}function _v(e){Vn.D(e),Om("dns-prefetch",e,null)}function kv(e,t){Vn.C(e,t),Om("preconnect",e,t)}function Cv(e,t,a){Vn.L(e,t,a);var i=Gs;if(i&&e&&t){var u='link[rel="preload"][as="'+jt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(u+='[imagesrcset="'+jt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(u+='[imagesizes="'+jt(a.imageSizes)+'"]')):u+='[href="'+jt(e)+'"]';var g=u;switch(t){case"style":g=Xs(e);break;case"script":g=Zs(e)}Zt.has(g)||(e=x({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Zt.set(g,e),i.querySelector(u)!==null||t==="style"&&i.querySelector(Pr(g))||t==="script"&&i.querySelector(ei(g))||(t=i.createElement("link"),gt(t,"link",e),Pe(t),i.head.appendChild(t)))}}function Ev(e,t){Vn.m(e,t);var a=Gs;if(a&&e){var i=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+jt(i)+'"][href="'+jt(e)+'"]',g=u;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Zs(e)}if(!Zt.has(g)&&(e=x({rel:"modulepreload",href:e},t),Zt.set(g,e),a.querySelector(u)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ei(g)))return}i=a.createElement("link"),gt(i,"link",e),Pe(i),a.head.appendChild(i)}}}function zv(e,t,a){Vn.S(e,t,a);var i=Gs;if(i&&e){var u=In(i).hoistableStyles,g=Xs(e);t=t||"default";var b=u.get(g);if(!b){var S={loading:0,preload:null};if(b=i.querySelector(Pr(g)))S.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Zt.get(g))&&sd(e,a);var R=b=i.createElement("link");Pe(R),gt(R,"link",e),R._p=new Promise(function(J,ne){R.onload=J,R.onerror=ne}),R.addEventListener("load",function(){S.loading|=1}),R.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Zl(b,t,i)}b={type:"stylesheet",instance:b,count:1,state:S},u.set(g,b)}}}function Av(e,t){Vn.X(e,t);var a=Gs;if(a&&e){var i=In(a).hoistableScripts,u=Zs(e),g=i.get(u);g||(g=a.querySelector(ei(u)),g||(e=x({src:e,async:!0},t),(t=Zt.get(u))&&rd(e,t),g=a.createElement("script"),Pe(g),gt(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},i.set(u,g))}}function Tv(e,t){Vn.M(e,t);var a=Gs;if(a&&e){var i=In(a).hoistableScripts,u=Zs(e),g=i.get(u);g||(g=a.querySelector(ei(u)),g||(e=x({src:e,async:!0,type:"module"},t),(t=Zt.get(u))&&rd(e,t),g=a.createElement("script"),Pe(g),gt(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},i.set(u,g))}}function Lm(e,t,a,i){var u=(u=be.current)?Xl(u):null;if(!u)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Xs(a.href),a=In(u).hoistableStyles,i=a.get(t),i||(i={type:"style",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Xs(a.href);var g=In(u).hoistableStyles,b=g.get(e);if(b||(u=u.ownerDocument||u,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,b),(g=u.querySelector(Pr(e)))&&!g._p&&(b.instance=g,b.state.loading=5),Zt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Zt.set(e,a),g||Mv(u,e,a,b.state))),t&&i===null)throw Error(o(528,""));return b}if(t&&i!==null)throw Error(o(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Zs(a),a=In(u).hoistableScripts,i=a.get(t),i||(i={type:"script",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Xs(e){return'href="'+jt(e)+'"'}function Pr(e){return'link[rel="stylesheet"]['+e+"]"}function Rm(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function Mv(e,t,a,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),gt(t,"link",a),Pe(t),e.head.appendChild(t))}function Zs(e){return'[src="'+jt(e)+'"]'}function ei(e){return"script[async]"+e}function Hm(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+jt(a.href)+'"]');if(i)return t.instance=i,Pe(i),i;var u=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Pe(i),gt(i,"style",u),Zl(i,a.precedence,e),t.instance=i;case"stylesheet":u=Xs(a.href);var g=e.querySelector(Pr(u));if(g)return t.state.loading|=4,t.instance=g,Pe(g),g;i=Rm(a),(u=Zt.get(u))&&sd(i,u),g=(e.ownerDocument||e).createElement("link"),Pe(g);var b=g;return b._p=new Promise(function(S,R){b.onload=S,b.onerror=R}),gt(g,"link",i),t.state.loading|=4,Zl(g,a.precedence,e),t.instance=g;case"script":return g=Zs(a.src),(u=e.querySelector(ei(g)))?(t.instance=u,Pe(u),u):(i=a,(u=Zt.get(g))&&(i=x({},a),rd(i,u)),e=e.ownerDocument||e,u=e.createElement("script"),Pe(u),gt(u,"link",i),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,Zl(i,a.precedence,e));return t.instance}function Zl(e,t,a){for(var i=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=i.length?i[i.length-1]:null,g=u,b=0;b<i.length;b++){var S=i[b];if(S.dataset.precedence===t)g=S;else if(g!==u)break}g?g.parentNode.insertBefore(e,g.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function sd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function rd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ql=null;function Um(e,t,a){if(Ql===null){var i=new Map,u=Ql=new Map;u.set(a,i)}else u=Ql,i=u.get(a),i||(i=new Map,u.set(a,i));if(i.has(e))return i;for(i.set(e,null),a=a.getElementsByTagName(e),u=0;u<a.length;u++){var g=a[u];if(!(g[Da]||g[rt]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(t)||"";b=e+b;var S=i.get(b);S?S.push(g):i.set(b,[g])}}return i}function Bm(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Dv(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function $m(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Ov(e,t,a,i){if(a.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var u=Xs(i.href),g=t.querySelector(Pr(u));if(g){t=g._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Fl.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=g,Pe(g);return}g=t.ownerDocument||t,i=Rm(i),(u=Zt.get(u))&&sd(i,u),g=g.createElement("link"),Pe(g);var b=g;b._p=new Promise(function(S,R){b.onload=S,b.onerror=R}),gt(g,"link",i),a.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Fl.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var id=0;function Lv(e,t){return e.stylesheets&&e.count===0&&Il(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var i=setTimeout(function(){if(e.stylesheets&&Il(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+t);0<e.imgBytes&&id===0&&(id=62500*mv());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Il(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>id?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(u)}}:null}function Fl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Il(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Kl=null;function Il(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Kl=new Map,t.forEach(Rv,e),Kl=null,Fl.call(e))}function Rv(e,t){if(!(t.state.loading&4)){var a=Kl.get(e);if(a)var i=a.get(null);else{a=new Map,Kl.set(e,a);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<u.length;g++){var b=u[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),i=b)}i&&a.set(null,i)}u=t.instance,b=u.getAttribute("data-precedence"),g=a.get(b)||i,g===i&&a.set(null,u),a.set(b,u),this.count++,i=Fl.bind(this),u.addEventListener("load",i),u.addEventListener("error",i),g?g.parentNode.insertBefore(u,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var ti={$$typeof:N,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function Hv(e,t,a,i,u,g,b,S,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fr(0),this.hiddenUpdates=fr(null),this.identifierPrefix=i,this.onUncaughtError=u,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function Vm(e,t,a,i,u,g,b,S,R,J,ne,re){return e=new Hv(e,t,a,b,R,J,ne,re,S),t=1,g===!0&&(t|=24),g=Tt(3,null,null,t),e.current=g,g.stateNode=e,t=Bc(),t.refCount++,e.pooledCache=t,t.refCount++,g.memoizedState={element:i,isDehydrated:a,cache:t},Yc(g),e}function qm(e){return e?(e=ws,e):ws}function Ym(e,t,a,i,u,g){u=qm(u),i.context===null?i.context=u:i.pendingContext=u,i=sa(t),i.payload={element:a},g=g===void 0?null:g,g!==null&&(i.callback=g),a=ra(e,i,t),a!==null&&(Et(a,e,t),Dr(a,e,t))}function Gm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function ld(e,t){Gm(e,t),(e=e.alternate)&&Gm(e,t)}function Xm(e){if(e.tag===13||e.tag===31){var t=Ba(e,67108864);t!==null&&Et(t,e,67108864),ld(e,67108864)}}function Zm(e){if(e.tag===13||e.tag===31){var t=Rt();t=gr(t);var a=Ba(e,t);a!==null&&Et(a,e,t),ld(e,t)}}var Jl=!0;function Uv(e,t,a,i){var u=_.T;_.T=null;var g=O.p;try{O.p=2,od(e,t,a,i)}finally{O.p=g,_.T=u}}function Bv(e,t,a,i){var u=_.T;_.T=null;var g=O.p;try{O.p=8,od(e,t,a,i)}finally{O.p=g,_.T=u}}function od(e,t,a,i){if(Jl){var u=cd(i);if(u===null)Fu(e,t,i,Wl,a),Fm(e,i);else if(Vv(u,e,t,a,i))i.stopPropagation();else if(Fm(e,i),t&4&&-1<$v.indexOf(e)){for(;u!==null;){var g=Fn(u);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=Nn(g.pendingLanes);if(b!==0){var S=g;for(S.pendingLanes|=2,S.entangledLanes|=2;b;){var R=1<<31-pt(b);S.entanglements[1]|=R,b&=~R}fn(g),(Re&6)===0&&(Ol=ct()+500,Kr(0))}}break;case 31:case 13:S=Ba(g,2),S!==null&&Et(S,g,2),Rl(),ld(g,2)}if(g=cd(i),g===null&&Fu(e,t,i,Wl,a),g===u)break;u=g}u!==null&&i.stopPropagation()}else Fu(e,t,i,null,a)}}function cd(e){return e=dc(e),ud(e)}var Wl=null;function ud(e){if(Wl=null,e=Qn(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=h(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Wl=e,null}function Qm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(is()){case vn:return 2;case Zn:return 8;case za:case Io:return 32;case ls:return 268435456;default:return 32}default:return 32}}var dd=!1,pa=null,xa=null,ya=null,ni=new Map,ai=new Map,ba=[],$v="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fm(e,t){switch(e){case"focusin":case"focusout":pa=null;break;case"dragenter":case"dragleave":xa=null;break;case"mouseover":case"mouseout":ya=null;break;case"pointerover":case"pointerout":ni.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ai.delete(t.pointerId)}}function si(e,t,a,i,u,g){return e===null||e.nativeEvent!==g?(e={blockedOn:t,domEventName:a,eventSystemFlags:i,nativeEvent:g,targetContainers:[u]},t!==null&&(t=Fn(t),t!==null&&Xm(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function Vv(e,t,a,i,u){switch(t){case"focusin":return pa=si(pa,e,t,a,i,u),!0;case"dragenter":return xa=si(xa,e,t,a,i,u),!0;case"mouseover":return ya=si(ya,e,t,a,i,u),!0;case"pointerover":var g=u.pointerId;return ni.set(g,si(ni.get(g)||null,e,t,a,i,u)),!0;case"gotpointercapture":return g=u.pointerId,ai.set(g,si(ai.get(g)||null,e,t,a,i,u)),!0}return!1}function Km(e){var t=Qn(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,$i(e.priority,function(){Zm(a)});return}}else if(t===31){if(t=h(a),t!==null){e.blockedOn=t,$i(e.priority,function(){Zm(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Pl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=cd(e.nativeEvent);if(a===null){a=e.nativeEvent;var i=new a.constructor(a.type,a);uc=i,a.target.dispatchEvent(i),uc=null}else return t=Fn(a),t!==null&&Xm(t),e.blockedOn=a,!1;t.shift()}return!0}function Im(e,t,a){Pl(e)&&a.delete(t)}function qv(){dd=!1,pa!==null&&Pl(pa)&&(pa=null),xa!==null&&Pl(xa)&&(xa=null),ya!==null&&Pl(ya)&&(ya=null),ni.forEach(Im),ai.forEach(Im)}function eo(e,t){e.blockedOn===t&&(e.blockedOn=null,dd||(dd=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,qv)))}var to=null;function Jm(e){to!==e&&(to=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){to===e&&(to=null);for(var t=0;t<e.length;t+=3){var a=e[t],i=e[t+1],u=e[t+2];if(typeof i!="function"){if(ud(i||a)===null)continue;break}var g=Fn(a);g!==null&&(e.splice(t,3),t-=3,cu(g,{pending:!0,data:u,method:a.method,action:i},i,u))}}))}function Qs(e){function t(R){return eo(R,e)}pa!==null&&eo(pa,e),xa!==null&&eo(xa,e),ya!==null&&eo(ya,e),ni.forEach(t),ai.forEach(t);for(var a=0;a<ba.length;a++){var i=ba[a];i.blockedOn===e&&(i.blockedOn=null)}for(;0<ba.length&&(a=ba[0],a.blockedOn===null);)Km(a),a.blockedOn===null&&ba.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(i=0;i<a.length;i+=3){var u=a[i],g=a[i+1],b=u[ht]||null;if(typeof g=="function")b||Jm(a);else if(b){var S=null;if(g&&g.hasAttribute("formAction")){if(u=g,b=g[ht]||null)S=b.formAction;else if(ud(u)!==null)continue}else S=b.action;typeof S=="function"?a[i+1]=S:(a.splice(i,3),i-=3),Jm(a)}}}function Wm(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(b){return u=b})},focusReset:"manual",scroll:"manual"})}function t(){u!==null&&(u(),u=null),i||setTimeout(a,20)}function a(){if(!i&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),u!==null&&(u(),u=null)}}}function fd(e){this._internalRoot=e}no.prototype.render=fd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var a=t.current,i=Rt();Ym(a,i,e,t,null,null)},no.prototype.unmount=fd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ym(e.current,2,null,e,null,null),Rl(),t[jn]=null}};function no(e){this._internalRoot=e}no.prototype.unstable_scheduleHydration=function(e){if(e){var t=Bi();e={blockedOn:null,target:e,priority:t};for(var a=0;a<ba.length&&t!==0&&t<ba[a].priority;a++);ba.splice(a,0,e),a===0&&Km(e)}};var Pm=s.version;if(Pm!=="19.2.3")throw Error(o(527,Pm,"19.2.3"));O.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=m(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var Yv={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ao=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ao.isDisabled&&ao.supportsFiber)try{Aa=ao.inject(Yv),mt=ao}catch{}}return ii.createRoot=function(e,t){if(!c(e))throw Error(o(299));var a=!1,i="",u=ih,g=lh,b=oh;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(g=t.onCaughtError),t.onRecoverableError!==void 0&&(b=t.onRecoverableError)),t=Vm(e,1,!1,null,null,a,i,null,u,g,b,Wm),e[jn]=t.current,Qu(e),new fd(t)},ii.hydrateRoot=function(e,t,a){if(!c(e))throw Error(o(299));var i=!1,u="",g=ih,b=lh,S=oh,R=null;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.formState!==void 0&&(R=a.formState)),t=Vm(e,1,!0,t,a??null,i,u,R,g,b,S,Wm),t.context=qm(null),a=t.current,i=Rt(),i=gr(i),u=sa(i),u.callback=null,ra(a,u,i),a=i,t.current.lanes=a,Ma(t,a),fn(t),e[jn]=t.current,Qu(e),new no(t)},ii.version="19.2.3",ii}var x0;function B1(){if(x0)return yd.exports;x0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(s){console.error(s)}}return n(),yd.exports=U1(),yd.exports}var $1=B1();const je=n=>typeof n=="string",li=()=>{let n,s;const l=new Promise((o,c)=>{n=o,s=c});return l.resolve=n,l.reject=s,l},y0=n=>n==null?"":""+n,V1=(n,s,l)=>{n.forEach(o=>{s[o]&&(l[o]=s[o])})},q1=/###/g,b0=n=>n&&n.indexOf("###")>-1?n.replace(q1,"."):n,v0=n=>!n||je(n),gi=(n,s,l)=>{const o=je(s)?s.split("."):s;let c=0;for(;c<o.length-1;){if(v0(n))return{};const d=b0(o[c]);!n[d]&&l&&(n[d]=new l),Object.prototype.hasOwnProperty.call(n,d)?n=n[d]:n={},++c}return v0(n)?{}:{obj:n,k:b0(o[c])}},N0=(n,s,l)=>{const{obj:o,k:c}=gi(n,s,Object);if(o!==void 0||s.length===1){o[c]=l;return}let d=s[s.length-1],f=s.slice(0,s.length-1),h=gi(n,f,Object);for(;h.obj===void 0&&f.length;)d=`${f[f.length-1]}.${d}`,f=f.slice(0,f.length-1),h=gi(n,f,Object),h?.obj&&typeof h.obj[`${h.k}.${d}`]<"u"&&(h.obj=void 0);h.obj[`${h.k}.${d}`]=l},Y1=(n,s,l,o)=>{const{obj:c,k:d}=gi(n,s,Object);c[d]=c[d]||[],c[d].push(l)},vo=(n,s)=>{const{obj:l,k:o}=gi(n,s);if(l&&Object.prototype.hasOwnProperty.call(l,o))return l[o]},G1=(n,s,l)=>{const o=vo(n,l);return o!==void 0?o:vo(s,l)},Gp=(n,s,l)=>{for(const o in s)o!=="__proto__"&&o!=="constructor"&&(o in n?je(n[o])||n[o]instanceof String||je(s[o])||s[o]instanceof String?l&&(n[o]=s[o]):Gp(n[o],s[o],l):n[o]=s[o]);return n},Fs=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var X1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Z1=n=>je(n)?n.replace(/[&<>"'\/]/g,s=>X1[s]):n;class Q1{constructor(s){this.capacity=s,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(s){const l=this.regExpMap.get(s);if(l!==void 0)return l;const o=new RegExp(s);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(s,o),this.regExpQueue.push(s),o}}const F1=[" ",",","?","!",";"],K1=new Q1(20),I1=(n,s,l)=>{s=s||"",l=l||"";const o=F1.filter(f=>s.indexOf(f)<0&&l.indexOf(f)<0);if(o.length===0)return!0;const c=K1.getRegExp(`(${o.map(f=>f==="?"?"\\?":f).join("|")})`);let d=!c.test(n);if(!d){const f=n.indexOf(l);f>0&&!c.test(n.substring(0,f))&&(d=!0)}return d},Od=(n,s,l=".")=>{if(!n)return;if(n[s])return Object.prototype.hasOwnProperty.call(n,s)?n[s]:void 0;const o=s.split(l);let c=n;for(let d=0;d<o.length;){if(!c||typeof c!="object")return;let f,h="";for(let p=d;p<o.length;++p)if(p!==d&&(h+=l),h+=o[p],f=c[h],f!==void 0){if(["string","number","boolean"].indexOf(typeof f)>-1&&p<o.length-1)continue;d+=p-d+1;break}c=f}return c},bi=n=>n?.replace("_","-"),J1={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,s){console?.[n]?.apply?.(console,s)}};class No{constructor(s,l={}){this.init(s,l)}init(s,l={}){this.prefix=l.prefix||"i18next:",this.logger=s||J1,this.options=l,this.debug=l.debug}log(...s){return this.forward(s,"log","",!0)}warn(...s){return this.forward(s,"warn","",!0)}error(...s){return this.forward(s,"error","")}deprecate(...s){return this.forward(s,"warn","WARNING DEPRECATED: ",!0)}forward(s,l,o,c){return c&&!this.debug?null:(je(s[0])&&(s[0]=`${o}${this.prefix} ${s[0]}`),this.logger[l](s))}create(s){return new No(this.logger,{prefix:`${this.prefix}:${s}:`,...this.options})}clone(s){return s=s||this.options,s.prefix=s.prefix||this.prefix,new No(this.logger,s)}}var mn=new No;class Oo{constructor(){this.observers={}}on(s,l){return s.split(" ").forEach(o=>{this.observers[o]||(this.observers[o]=new Map);const c=this.observers[o].get(l)||0;this.observers[o].set(l,c+1)}),this}off(s,l){if(this.observers[s]){if(!l){delete this.observers[s];return}this.observers[s].delete(l)}}emit(s,...l){this.observers[s]&&Array.from(this.observers[s].entries()).forEach(([c,d])=>{for(let f=0;f<d;f++)c(...l)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([c,d])=>{for(let f=0;f<d;f++)c.apply(c,[s,...l])})}}class j0 extends Oo{constructor(s,l={ns:["translation"],defaultNS:"translation"}){super(),this.data=s||{},this.options=l,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(s){this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}removeNamespaces(s){const l=this.options.ns.indexOf(s);l>-1&&this.options.ns.splice(l,1)}getResource(s,l,o,c={}){const d=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator,f=c.ignoreJSONStructure!==void 0?c.ignoreJSONStructure:this.options.ignoreJSONStructure;let h;s.indexOf(".")>-1?h=s.split("."):(h=[s,l],o&&(Array.isArray(o)?h.push(...o):je(o)&&d?h.push(...o.split(d)):h.push(o)));const p=vo(this.data,h);return!p&&!l&&!o&&s.indexOf(".")>-1&&(s=h[0],l=h[1],o=h.slice(2).join(".")),p||!f||!je(o)?p:Od(this.data?.[s]?.[l],o,d)}addResource(s,l,o,c,d={silent:!1}){const f=d.keySeparator!==void 0?d.keySeparator:this.options.keySeparator;let h=[s,l];o&&(h=h.concat(f?o.split(f):o)),s.indexOf(".")>-1&&(h=s.split("."),c=l,l=h[1]),this.addNamespaces(l),N0(this.data,h,c),d.silent||this.emit("added",s,l,o,c)}addResources(s,l,o,c={silent:!1}){for(const d in o)(je(o[d])||Array.isArray(o[d]))&&this.addResource(s,l,d,o[d],{silent:!0});c.silent||this.emit("added",s,l,o)}addResourceBundle(s,l,o,c,d,f={silent:!1,skipCopy:!1}){let h=[s,l];s.indexOf(".")>-1&&(h=s.split("."),c=o,o=l,l=h[1]),this.addNamespaces(l);let p=vo(this.data,h)||{};f.skipCopy||(o=JSON.parse(JSON.stringify(o))),c?Gp(p,o,d):p={...p,...o},N0(this.data,h,p),f.silent||this.emit("added",s,l,o)}removeResourceBundle(s,l){this.hasResourceBundle(s,l)&&delete this.data[s][l],this.removeNamespaces(l),this.emit("removed",s,l)}hasResourceBundle(s,l){return this.getResource(s,l)!==void 0}getResourceBundle(s,l){return l||(l=this.options.defaultNS),this.getResource(s,l)}getDataByLanguage(s){return this.data[s]}hasLanguageSomeTranslations(s){const l=this.getDataByLanguage(s);return!!(l&&Object.keys(l)||[]).find(c=>l[c]&&Object.keys(l[c]).length>0)}toJSON(){return this.data}}var Xp={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,s,l,o,c){return n.forEach(d=>{s=this.processors[d]?.process(s,l,o,c)??s}),s}};const Zp=Symbol("i18next/PATH_KEY");function W1(){const n=[],s=Object.create(null);let l;return s.get=(o,c)=>(l?.revoke?.(),c===Zp?n:(n.push(c),l=Proxy.revocable(o,s),l.proxy)),Proxy.revocable(Object.create(null),s).proxy}function Ld(n,s){const{[Zp]:l}=n(W1());return l.join(s?.keySeparator??".")}const w0={},Nd=n=>!je(n)&&typeof n!="boolean"&&typeof n!="number";class jo extends Oo{constructor(s,l={}){super(),V1(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],s,this),this.options=l,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=mn.create("translator")}changeLanguage(s){s&&(this.language=s)}exists(s,l={interpolation:{}}){const o={...l};if(s==null)return!1;const c=this.resolve(s,o);if(c?.res===void 0)return!1;const d=Nd(c.res);return!(o.returnObjects===!1&&d)}extractFromKey(s,l){let o=l.nsSeparator!==void 0?l.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");const c=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator;let d=l.ns||this.options.defaultNS||[];const f=o&&s.indexOf(o)>-1,h=!this.options.userDefinedKeySeparator&&!l.keySeparator&&!this.options.userDefinedNsSeparator&&!l.nsSeparator&&!I1(s,o,c);if(f&&!h){const p=s.match(this.interpolator.nestingRegexp);if(p&&p.length>0)return{key:s,namespaces:je(d)?[d]:d};const m=s.split(o);(o!==c||o===c&&this.options.ns.indexOf(m[0])>-1)&&(d=m.shift()),s=m.join(c)}return{key:s,namespaces:je(d)?[d]:d}}translate(s,l,o){let c=typeof l=="object"?{...l}:l;if(typeof c!="object"&&this.options.overloadTranslationOptionHandler&&(c=this.options.overloadTranslationOptionHandler(arguments)),typeof c=="object"&&(c={...c}),c||(c={}),s==null)return"";typeof s=="function"&&(s=Ld(s,{...this.options,...c})),Array.isArray(s)||(s=[String(s)]);const d=c.returnDetails!==void 0?c.returnDetails:this.options.returnDetails,f=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator,{key:h,namespaces:p}=this.extractFromKey(s[s.length-1],c),m=p[p.length-1];let y=c.nsSeparator!==void 0?c.nsSeparator:this.options.nsSeparator;y===void 0&&(y=":");const x=c.lng||this.language,v=c.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(x?.toLowerCase()==="cimode")return v?d?{res:`${m}${y}${h}`,usedKey:h,exactUsedKey:h,usedLng:x,usedNS:m,usedParams:this.getUsedParamsDetails(c)}:`${m}${y}${h}`:d?{res:h,usedKey:h,exactUsedKey:h,usedLng:x,usedNS:m,usedParams:this.getUsedParamsDetails(c)}:h;const j=this.resolve(s,c);let w=j?.res;const T=j?.usedKey||h,z=j?.exactUsedKey||h,A=["[object Number]","[object Function]","[object RegExp]"],k=c.joinArrays!==void 0?c.joinArrays:this.options.joinArrays,N=!this.i18nFormat||this.i18nFormat.handleAsObject,E=c.count!==void 0&&!je(c.count),L=jo.hasDefaultValue(c),B=E?this.pluralResolver.getSuffix(x,c.count,c):"",V=c.ordinal&&E?this.pluralResolver.getSuffix(x,c.count,{ordinal:!1}):"",X=E&&!c.ordinal&&c.count===0,H=X&&c[`defaultValue${this.options.pluralSeparator}zero`]||c[`defaultValue${B}`]||c[`defaultValue${V}`]||c.defaultValue;let K=w;N&&!w&&L&&(K=H);const q=Nd(K),Z=Object.prototype.toString.apply(K);if(N&&K&&q&&A.indexOf(Z)<0&&!(je(k)&&Array.isArray(K))){if(!c.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Q=this.options.returnedObjectHandler?this.options.returnedObjectHandler(T,K,{...c,ns:p}):`key '${h} (${this.language})' returned an object instead of string.`;return d?(j.res=Q,j.usedParams=this.getUsedParamsDetails(c),j):Q}if(f){const Q=Array.isArray(K),C=Q?[]:{},D=Q?z:T;for(const _ in K)if(Object.prototype.hasOwnProperty.call(K,_)){const O=`${D}${f}${_}`;L&&!w?C[_]=this.translate(O,{...c,defaultValue:Nd(H)?H[_]:void 0,joinArrays:!1,ns:p}):C[_]=this.translate(O,{...c,joinArrays:!1,ns:p}),C[_]===O&&(C[_]=K[_])}w=C}}else if(N&&je(k)&&Array.isArray(w))w=w.join(k),w&&(w=this.extendTranslation(w,s,c,o));else{let Q=!1,C=!1;!this.isValidLookup(w)&&L&&(Q=!0,w=H),this.isValidLookup(w)||(C=!0,w=h);const _=(c.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&C?void 0:w,O=L&&H!==w&&this.options.updateMissing;if(C||Q||O){if(this.logger.log(O?"updateKey":"missingKey",x,m,h,O?H:w),f){const F=this.resolve(h,{...c,keySeparator:!1});F&&F.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let U=[];const Y=this.languageUtils.getFallbackCodes(this.options.fallbackLng,c.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Y&&Y[0])for(let F=0;F<Y.length;F++)U.push(Y[F]);else this.options.saveMissingTo==="all"?U=this.languageUtils.toResolveHierarchy(c.lng||this.language):U.push(c.lng||this.language);const te=(F,P,se)=>{const le=L&&se!==w?se:_;this.options.missingKeyHandler?this.options.missingKeyHandler(F,m,P,le,O,c):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(F,m,P,le,O,c),this.emit("missingKey",F,m,P,w)};this.options.saveMissing&&(this.options.saveMissingPlurals&&E?U.forEach(F=>{const P=this.pluralResolver.getSuffixes(F,c);X&&c[`defaultValue${this.options.pluralSeparator}zero`]&&P.indexOf(`${this.options.pluralSeparator}zero`)<0&&P.push(`${this.options.pluralSeparator}zero`),P.forEach(se=>{te([F],h+se,c[`defaultValue${se}`]||H)})}):te(U,h,H))}w=this.extendTranslation(w,s,c,j,o),C&&w===h&&this.options.appendNamespaceToMissingKey&&(w=`${m}${y}${h}`),(C||Q)&&this.options.parseMissingKeyHandler&&(w=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${m}${y}${h}`:h,Q?w:void 0,c))}return d?(j.res=w,j.usedParams=this.getUsedParamsDetails(c),j):w}extendTranslation(s,l,o,c,d){if(this.i18nFormat?.parse)s=this.i18nFormat.parse(s,{...this.options.interpolation.defaultVariables,...o},o.lng||this.language||c.usedLng,c.usedNS,c.usedKey,{resolved:c});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init({...o,interpolation:{...this.options.interpolation,...o.interpolation}});const p=je(s)&&(o?.interpolation?.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let m;if(p){const x=s.match(this.interpolator.nestingRegexp);m=x&&x.length}let y=o.replace&&!je(o.replace)?o.replace:o;if(this.options.interpolation.defaultVariables&&(y={...this.options.interpolation.defaultVariables,...y}),s=this.interpolator.interpolate(s,y,o.lng||this.language||c.usedLng,o),p){const x=s.match(this.interpolator.nestingRegexp),v=x&&x.length;m<v&&(o.nest=!1)}!o.lng&&c&&c.res&&(o.lng=this.language||c.usedLng),o.nest!==!1&&(s=this.interpolator.nest(s,(...x)=>d?.[0]===x[0]&&!o.context?(this.logger.warn(`It seems you are nesting recursively key: ${x[0]} in key: ${l[0]}`),null):this.translate(...x,l),o)),o.interpolation&&this.interpolator.reset()}const f=o.postProcess||this.options.postProcess,h=je(f)?[f]:f;return s!=null&&h?.length&&o.applyPostProcessor!==!1&&(s=Xp.handle(h,s,l,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...c,usedParams:this.getUsedParamsDetails(o)},...o}:o,this)),s}resolve(s,l={}){let o,c,d,f,h;return je(s)&&(s=[s]),s.forEach(p=>{if(this.isValidLookup(o))return;const m=this.extractFromKey(p,l),y=m.key;c=y;let x=m.namespaces;this.options.fallbackNS&&(x=x.concat(this.options.fallbackNS));const v=l.count!==void 0&&!je(l.count),j=v&&!l.ordinal&&l.count===0,w=l.context!==void 0&&(je(l.context)||typeof l.context=="number")&&l.context!=="",T=l.lngs?l.lngs:this.languageUtils.toResolveHierarchy(l.lng||this.language,l.fallbackLng);x.forEach(z=>{this.isValidLookup(o)||(h=z,!w0[`${T[0]}-${z}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(h)&&(w0[`${T[0]}-${z}`]=!0,this.logger.warn(`key "${c}" for languages "${T.join(", ")}" won't get resolved as namespace "${h}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),T.forEach(A=>{if(this.isValidLookup(o))return;f=A;const k=[y];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(k,y,A,z,l);else{let E;v&&(E=this.pluralResolver.getSuffix(A,l.count,l));const L=`${this.options.pluralSeparator}zero`,B=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(l.ordinal&&E.indexOf(B)===0&&k.push(y+E.replace(B,this.options.pluralSeparator)),k.push(y+E),j&&k.push(y+L)),w){const V=`${y}${this.options.contextSeparator||"_"}${l.context}`;k.push(V),v&&(l.ordinal&&E.indexOf(B)===0&&k.push(V+E.replace(B,this.options.pluralSeparator)),k.push(V+E),j&&k.push(V+L))}}let N;for(;N=k.pop();)this.isValidLookup(o)||(d=N,o=this.getResource(A,z,N,l))}))})}),{res:o,usedKey:c,exactUsedKey:d,usedLng:f,usedNS:h}}isValidLookup(s){return s!==void 0&&!(!this.options.returnNull&&s===null)&&!(!this.options.returnEmptyString&&s==="")}getResource(s,l,o,c={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(s,l,o,c):this.resourceStore.getResource(s,l,o,c)}getUsedParamsDetails(s={}){const l=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],o=s.replace&&!je(s.replace);let c=o?s.replace:s;if(o&&typeof s.count<"u"&&(c.count=s.count),this.options.interpolation.defaultVariables&&(c={...this.options.interpolation.defaultVariables,...c}),!o){c={...c};for(const d of l)delete c[d]}return c}static hasDefaultValue(s){const l="defaultValue";for(const o in s)if(Object.prototype.hasOwnProperty.call(s,o)&&l===o.substring(0,l.length)&&s[o]!==void 0)return!0;return!1}}class S0{constructor(s){this.options=s,this.supportedLngs=this.options.supportedLngs||!1,this.logger=mn.create("languageUtils")}getScriptPartFromCode(s){if(s=bi(s),!s||s.indexOf("-")<0)return null;const l=s.split("-");return l.length===2||(l.pop(),l[l.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(l.join("-"))}getLanguagePartFromCode(s){if(s=bi(s),!s||s.indexOf("-")<0)return s;const l=s.split("-");return this.formatLanguageCode(l[0])}formatLanguageCode(s){if(je(s)&&s.indexOf("-")>-1){let l;try{l=Intl.getCanonicalLocales(s)[0]}catch{}return l&&this.options.lowerCaseLng&&(l=l.toLowerCase()),l||(this.options.lowerCaseLng?s.toLowerCase():s)}return this.options.cleanCode||this.options.lowerCaseLng?s.toLowerCase():s}isSupportedCode(s){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(s=this.getLanguagePartFromCode(s)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(s)>-1}getBestMatchFromCodes(s){if(!s)return null;let l;return s.forEach(o=>{if(l)return;const c=this.formatLanguageCode(o);(!this.options.supportedLngs||this.isSupportedCode(c))&&(l=c)}),!l&&this.options.supportedLngs&&s.forEach(o=>{if(l)return;const c=this.getScriptPartFromCode(o);if(this.isSupportedCode(c))return l=c;const d=this.getLanguagePartFromCode(o);if(this.isSupportedCode(d))return l=d;l=this.options.supportedLngs.find(f=>{if(f===d)return f;if(!(f.indexOf("-")<0&&d.indexOf("-")<0)&&(f.indexOf("-")>0&&d.indexOf("-")<0&&f.substring(0,f.indexOf("-"))===d||f.indexOf(d)===0&&d.length>1))return f})}),l||(l=this.getFallbackCodes(this.options.fallbackLng)[0]),l}getFallbackCodes(s,l){if(!s)return[];if(typeof s=="function"&&(s=s(l)),je(s)&&(s=[s]),Array.isArray(s))return s;if(!l)return s.default||[];let o=s[l];return o||(o=s[this.getScriptPartFromCode(l)]),o||(o=s[this.formatLanguageCode(l)]),o||(o=s[this.getLanguagePartFromCode(l)]),o||(o=s.default),o||[]}toResolveHierarchy(s,l){const o=this.getFallbackCodes((l===!1?[]:l)||this.options.fallbackLng||[],s),c=[],d=f=>{f&&(this.isSupportedCode(f)?c.push(f):this.logger.warn(`rejecting language code not found in supportedLngs: ${f}`))};return je(s)&&(s.indexOf("-")>-1||s.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&d(this.formatLanguageCode(s)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&d(this.getScriptPartFromCode(s)),this.options.load!=="currentOnly"&&d(this.getLanguagePartFromCode(s))):je(s)&&d(this.formatLanguageCode(s)),o.forEach(f=>{c.indexOf(f)<0&&d(this.formatLanguageCode(f))}),c}}const _0={zero:0,one:1,two:2,few:3,many:4,other:5},k0={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class P1{constructor(s,l={}){this.languageUtils=s,this.options=l,this.logger=mn.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(s,l={}){const o=bi(s==="dev"?"en":s),c=l.ordinal?"ordinal":"cardinal",d=JSON.stringify({cleanedCode:o,type:c});if(d in this.pluralRulesCache)return this.pluralRulesCache[d];let f;try{f=new Intl.PluralRules(o,{type:c})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),k0;if(!s.match(/-|_/))return k0;const p=this.languageUtils.getLanguagePartFromCode(s);f=this.getRule(p,l)}return this.pluralRulesCache[d]=f,f}needsPlural(s,l={}){let o=this.getRule(s,l);return o||(o=this.getRule("dev",l)),o?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(s,l,o={}){return this.getSuffixes(s,o).map(c=>`${l}${c}`)}getSuffixes(s,l={}){let o=this.getRule(s,l);return o||(o=this.getRule("dev",l)),o?o.resolvedOptions().pluralCategories.sort((c,d)=>_0[c]-_0[d]).map(c=>`${this.options.prepend}${l.ordinal?`ordinal${this.options.prepend}`:""}${c}`):[]}getSuffix(s,l,o={}){const c=this.getRule(s,o);return c?`${this.options.prepend}${o.ordinal?`ordinal${this.options.prepend}`:""}${c.select(l)}`:(this.logger.warn(`no plural rule found for: ${s}`),this.getSuffix("dev",l,o))}}const C0=(n,s,l,o=".",c=!0)=>{let d=G1(n,s,l);return!d&&c&&je(l)&&(d=Od(n,l,o),d===void 0&&(d=Od(s,l,o))),d},jd=n=>n.replace(/\$/g,"$$$$");class E0{constructor(s={}){this.logger=mn.create("interpolator"),this.options=s,this.format=s?.interpolation?.format||(l=>l),this.init(s)}init(s={}){s.interpolation||(s.interpolation={escapeValue:!0});const{escape:l,escapeValue:o,useRawValueToEscape:c,prefix:d,prefixEscaped:f,suffix:h,suffixEscaped:p,formatSeparator:m,unescapeSuffix:y,unescapePrefix:x,nestingPrefix:v,nestingPrefixEscaped:j,nestingSuffix:w,nestingSuffixEscaped:T,nestingOptionsSeparator:z,maxReplaces:A,alwaysFormat:k}=s.interpolation;this.escape=l!==void 0?l:Z1,this.escapeValue=o!==void 0?o:!0,this.useRawValueToEscape=c!==void 0?c:!1,this.prefix=d?Fs(d):f||"{{",this.suffix=h?Fs(h):p||"}}",this.formatSeparator=m||",",this.unescapePrefix=y?"":x||"-",this.unescapeSuffix=this.unescapePrefix?"":y||"",this.nestingPrefix=v?Fs(v):j||Fs("$t("),this.nestingSuffix=w?Fs(w):T||Fs(")"),this.nestingOptionsSeparator=z||",",this.maxReplaces=A||1e3,this.alwaysFormat=k!==void 0?k:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const s=(l,o)=>l?.source===o?(l.lastIndex=0,l):new RegExp(o,"g");this.regexp=s(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=s(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=s(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(s,l,o,c){let d,f,h;const p=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},m=j=>{if(j.indexOf(this.formatSeparator)<0){const A=C0(l,p,j,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(A,void 0,o,{...c,...l,interpolationkey:j}):A}const w=j.split(this.formatSeparator),T=w.shift().trim(),z=w.join(this.formatSeparator).trim();return this.format(C0(l,p,T,this.options.keySeparator,this.options.ignoreJSONStructure),z,o,{...c,...l,interpolationkey:T})};this.resetRegExp();const y=c?.missingInterpolationHandler||this.options.missingInterpolationHandler,x=c?.interpolation?.skipOnVariables!==void 0?c.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:j=>jd(j)},{regex:this.regexp,safeValue:j=>this.escapeValue?jd(this.escape(j)):jd(j)}].forEach(j=>{for(h=0;d=j.regex.exec(s);){const w=d[1].trim();if(f=m(w),f===void 0)if(typeof y=="function"){const z=y(s,d,c);f=je(z)?z:""}else if(c&&Object.prototype.hasOwnProperty.call(c,w))f="";else if(x){f=d[0];continue}else this.logger.warn(`missed to pass in variable ${w} for interpolating ${s}`),f="";else!je(f)&&!this.useRawValueToEscape&&(f=y0(f));const T=j.safeValue(f);if(s=s.replace(d[0],T),x?(j.regex.lastIndex+=f.length,j.regex.lastIndex-=d[0].length):j.regex.lastIndex=0,h++,h>=this.maxReplaces)break}}),s}nest(s,l,o={}){let c,d,f;const h=(p,m)=>{const y=this.nestingOptionsSeparator;if(p.indexOf(y)<0)return p;const x=p.split(new RegExp(`${y}[ ]*{`));let v=`{${x[1]}`;p=x[0],v=this.interpolate(v,f);const j=v.match(/'/g),w=v.match(/"/g);((j?.length??0)%2===0&&!w||w.length%2!==0)&&(v=v.replace(/'/g,'"'));try{f=JSON.parse(v),m&&(f={...m,...f})}catch(T){return this.logger.warn(`failed parsing options string in nesting for key ${p}`,T),`${p}${y}${v}`}return f.defaultValue&&f.defaultValue.indexOf(this.prefix)>-1&&delete f.defaultValue,p};for(;c=this.nestingRegexp.exec(s);){let p=[];f={...o},f=f.replace&&!je(f.replace)?f.replace:f,f.applyPostProcessor=!1,delete f.defaultValue;const m=/{.*}/.test(c[1])?c[1].lastIndexOf("}")+1:c[1].indexOf(this.formatSeparator);if(m!==-1&&(p=c[1].slice(m).split(this.formatSeparator).map(y=>y.trim()).filter(Boolean),c[1]=c[1].slice(0,m)),d=l(h.call(this,c[1].trim(),f),f),d&&c[0]===s&&!je(d))return d;je(d)||(d=y0(d)),d||(this.logger.warn(`missed to resolve ${c[1]} for nesting ${s}`),d=""),p.length&&(d=p.reduce((y,x)=>this.format(y,x,o.lng,{...o,interpolationkey:c[1].trim()}),d.trim())),s=s.replace(c[0],d),this.regexp.lastIndex=0}return s}}const eN=n=>{let s=n.toLowerCase().trim();const l={};if(n.indexOf("(")>-1){const o=n.split("(");s=o[0].toLowerCase().trim();const c=o[1].substring(0,o[1].length-1);s==="currency"&&c.indexOf(":")<0?l.currency||(l.currency=c.trim()):s==="relativetime"&&c.indexOf(":")<0?l.range||(l.range=c.trim()):c.split(";").forEach(f=>{if(f){const[h,...p]=f.split(":"),m=p.join(":").trim().replace(/^'+|'+$/g,""),y=h.trim();l[y]||(l[y]=m),m==="false"&&(l[y]=!1),m==="true"&&(l[y]=!0),isNaN(m)||(l[y]=parseInt(m,10))}})}return{formatName:s,formatOptions:l}},z0=n=>{const s={};return(l,o,c)=>{let d=c;c&&c.interpolationkey&&c.formatParams&&c.formatParams[c.interpolationkey]&&c[c.interpolationkey]&&(d={...d,[c.interpolationkey]:void 0});const f=o+JSON.stringify(d);let h=s[f];return h||(h=n(bi(o),c),s[f]=h),h(l)}},tN=n=>(s,l,o)=>n(bi(l),o)(s);class nN{constructor(s={}){this.logger=mn.create("formatter"),this.options=s,this.init(s)}init(s,l={interpolation:{}}){this.formatSeparator=l.interpolation.formatSeparator||",";const o=l.cacheInBuiltFormats?z0:tN;this.formats={number:o((c,d)=>{const f=new Intl.NumberFormat(c,{...d});return h=>f.format(h)}),currency:o((c,d)=>{const f=new Intl.NumberFormat(c,{...d,style:"currency"});return h=>f.format(h)}),datetime:o((c,d)=>{const f=new Intl.DateTimeFormat(c,{...d});return h=>f.format(h)}),relativetime:o((c,d)=>{const f=new Intl.RelativeTimeFormat(c,{...d});return h=>f.format(h,d.range||"day")}),list:o((c,d)=>{const f=new Intl.ListFormat(c,{...d});return h=>f.format(h)})}}add(s,l){this.formats[s.toLowerCase().trim()]=l}addCached(s,l){this.formats[s.toLowerCase().trim()]=z0(l)}format(s,l,o,c={}){const d=l.split(this.formatSeparator);if(d.length>1&&d[0].indexOf("(")>1&&d[0].indexOf(")")<0&&d.find(h=>h.indexOf(")")>-1)){const h=d.findIndex(p=>p.indexOf(")")>-1);d[0]=[d[0],...d.splice(1,h)].join(this.formatSeparator)}return d.reduce((h,p)=>{const{formatName:m,formatOptions:y}=eN(p);if(this.formats[m]){let x=h;try{const v=c?.formatParams?.[c.interpolationkey]||{},j=v.locale||v.lng||c.locale||c.lng||o;x=this.formats[m](h,j,{...y,...c,...v})}catch(v){this.logger.warn(v)}return x}else this.logger.warn(`there was no format function for ${m}`);return h},s)}}const aN=(n,s)=>{n.pending[s]!==void 0&&(delete n.pending[s],n.pendingCount--)};class sN extends Oo{constructor(s,l,o,c={}){super(),this.backend=s,this.store=l,this.services=o,this.languageUtils=o.languageUtils,this.options=c,this.logger=mn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=c.maxParallelReads||10,this.readingCalls=0,this.maxRetries=c.maxRetries>=0?c.maxRetries:5,this.retryTimeout=c.retryTimeout>=1?c.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(o,c.backend,c)}queueLoad(s,l,o,c){const d={},f={},h={},p={};return s.forEach(m=>{let y=!0;l.forEach(x=>{const v=`${m}|${x}`;!o.reload&&this.store.hasResourceBundle(m,x)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?f[v]===void 0&&(f[v]=!0):(this.state[v]=1,y=!1,f[v]===void 0&&(f[v]=!0),d[v]===void 0&&(d[v]=!0),p[x]===void 0&&(p[x]=!0)))}),y||(h[m]=!0)}),(Object.keys(d).length||Object.keys(f).length)&&this.queue.push({pending:f,pendingCount:Object.keys(f).length,loaded:{},errors:[],callback:c}),{toLoad:Object.keys(d),pending:Object.keys(f),toLoadLanguages:Object.keys(h),toLoadNamespaces:Object.keys(p)}}loaded(s,l,o){const c=s.split("|"),d=c[0],f=c[1];l&&this.emit("failedLoading",d,f,l),!l&&o&&this.store.addResourceBundle(d,f,o,void 0,void 0,{skipCopy:!0}),this.state[s]=l?-1:2,l&&o&&(this.state[s]=0);const h={};this.queue.forEach(p=>{Y1(p.loaded,[d],f),aN(p,s),l&&p.errors.push(l),p.pendingCount===0&&!p.done&&(Object.keys(p.loaded).forEach(m=>{h[m]||(h[m]={});const y=p.loaded[m];y.length&&y.forEach(x=>{h[m][x]===void 0&&(h[m][x]=!0)})}),p.done=!0,p.errors.length?p.callback(p.errors):p.callback())}),this.emit("loaded",h),this.queue=this.queue.filter(p=>!p.done)}read(s,l,o,c=0,d=this.retryTimeout,f){if(!s.length)return f(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:s,ns:l,fcName:o,tried:c,wait:d,callback:f});return}this.readingCalls++;const h=(m,y)=>{if(this.readingCalls--,this.waitingReads.length>0){const x=this.waitingReads.shift();this.read(x.lng,x.ns,x.fcName,x.tried,x.wait,x.callback)}if(m&&y&&c<this.maxRetries){setTimeout(()=>{this.read.call(this,s,l,o,c+1,d*2,f)},d);return}f(m,y)},p=this.backend[o].bind(this.backend);if(p.length===2){try{const m=p(s,l);m&&typeof m.then=="function"?m.then(y=>h(null,y)).catch(h):h(null,m)}catch(m){h(m)}return}return p(s,l,h)}prepareLoading(s,l,o={},c){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),c&&c();je(s)&&(s=this.languageUtils.toResolveHierarchy(s)),je(l)&&(l=[l]);const d=this.queueLoad(s,l,o,c);if(!d.toLoad.length)return d.pending.length||c(),null;d.toLoad.forEach(f=>{this.loadOne(f)})}load(s,l,o){this.prepareLoading(s,l,{},o)}reload(s,l,o){this.prepareLoading(s,l,{reload:!0},o)}loadOne(s,l=""){const o=s.split("|"),c=o[0],d=o[1];this.read(c,d,"read",void 0,void 0,(f,h)=>{f&&this.logger.warn(`${l}loading namespace ${d} for language ${c} failed`,f),!f&&h&&this.logger.log(`${l}loaded namespace ${d} for language ${c}`,h),this.loaded(s,f,h)})}saveMissing(s,l,o,c,d,f={},h=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(l)){this.logger.warn(`did not save key "${o}" as the namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(o==null||o==="")){if(this.backend?.create){const p={...f,isUpdate:d},m=this.backend.create.bind(this.backend);if(m.length<6)try{let y;m.length===5?y=m(s,l,o,c,p):y=m(s,l,o,c),y&&typeof y.then=="function"?y.then(x=>h(null,x)).catch(h):h(null,y)}catch(y){h(y)}else m(s,l,o,c,h,p)}!s||!s[0]||this.store.addResource(s[0],l,o,c)}}}const wd=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let s={};if(typeof n[1]=="object"&&(s=n[1]),je(n[1])&&(s.defaultValue=n[1]),je(n[2])&&(s.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const l=n[3]||n[2];Object.keys(l).forEach(o=>{s[o]=l[o]})}return s},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),A0=n=>(je(n.ns)&&(n.ns=[n.ns]),je(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),je(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),ro=()=>{},rN=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(l=>{typeof n[l]=="function"&&(n[l]=n[l].bind(n))})},iN=n=>!!(n?.modules?.backend?.name?.indexOf("Locize")>0||n?.modules?.backend?.constructor?.name?.indexOf("Locize")>0||n?.options?.backend?.backends&&n.options.backend.backends.some(s=>s?.name?.indexOf("Locize")>0||s?.constructor?.name?.indexOf("Locize")>0));class hi extends Oo{constructor(s={},l){if(super(),this.options=A0(s),this.services={},this.logger=mn,this.modules={external:[]},rN(this),l&&!this.isInitialized&&!s.isClone){if(!this.options.initAsync)return this.init(s,l),this;setTimeout(()=>{this.init(s,l)},0)}}init(s={},l){this.isInitializing=!0,typeof s=="function"&&(l=s,s={}),s.defaultNS==null&&s.ns&&(je(s.ns)?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));const o=wd();this.options={...o,...this.options,...A0(s)},this.options.interpolation={...o.interpolation,...this.options.interpolation},s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=o.overloadTranslationOptionHandler),this.options.showSupportNotice!==!1&&!iN(this)&&typeof console<"u"&&typeof console.info<"u"&&console.info(" i18next is maintained with support from locize.com  consider powering your project with managed localization (AI, CDN, integrations): https://locize.com ");const c=m=>m?typeof m=="function"?new m:m:null;if(!this.options.isClone){this.modules.logger?mn.init(c(this.modules.logger),this.options):mn.init(null,this.options);let m;this.modules.formatter?m=this.modules.formatter:m=nN;const y=new S0(this.options);this.store=new j0(this.options.resources,this.options);const x=this.services;x.logger=mn,x.resourceStore=this.store,x.languageUtils=y,x.pluralResolver=new P1(y,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==o.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),m&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(x.formatter=c(m),x.formatter.init&&x.formatter.init(x,this.options),this.options.interpolation.format=x.formatter.format.bind(x.formatter)),x.interpolator=new E0(this.options),x.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},x.backendConnector=new sN(c(this.modules.backend),x.resourceStore,x,this.options),x.backendConnector.on("*",(j,...w)=>{this.emit(j,...w)}),this.modules.languageDetector&&(x.languageDetector=c(this.modules.languageDetector),x.languageDetector.init&&x.languageDetector.init(x,this.options.detection,this.options)),this.modules.i18nFormat&&(x.i18nFormat=c(this.modules.i18nFormat),x.i18nFormat.init&&x.i18nFormat.init(this)),this.translator=new jo(this.services,this.options),this.translator.on("*",(j,...w)=>{this.emit(j,...w)}),this.modules.external.forEach(j=>{j.init&&j.init(this)})}if(this.format=this.options.interpolation.format,l||(l=ro),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const m=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);m.length>0&&m[0]!=="dev"&&(this.options.lng=m[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(m=>{this[m]=(...y)=>this.store[m](...y)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(m=>{this[m]=(...y)=>(this.store[m](...y),this)});const h=li(),p=()=>{const m=(y,x)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),h.resolve(x),l(y,x)};if(this.languages&&!this.isInitialized)return m(null,this.t.bind(this));this.changeLanguage(this.options.lng,m)};return this.options.resources||!this.options.initAsync?p():setTimeout(p,0),h}loadResources(s,l=ro){let o=l;const c=je(s)?s:this.language;if(typeof s=="function"&&(o=s),!this.options.resources||this.options.partialBundledLanguages){if(c?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return o();const d=[],f=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(m=>{m!=="cimode"&&d.indexOf(m)<0&&d.push(m)})};c?f(c):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(p=>f(p)),this.options.preload?.forEach?.(h=>f(h)),this.services.backendConnector.load(d,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),o(h)})}else o(null)}reloadResources(s,l,o){const c=li();return typeof s=="function"&&(o=s,s=void 0),typeof l=="function"&&(o=l,l=void 0),s||(s=this.languages),l||(l=this.options.ns),o||(o=ro),this.services.backendConnector.reload(s,l,d=>{c.resolve(),o(d)}),c}use(s){if(!s)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!s.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return s.type==="backend"&&(this.modules.backend=s),(s.type==="logger"||s.log&&s.warn&&s.error)&&(this.modules.logger=s),s.type==="languageDetector"&&(this.modules.languageDetector=s),s.type==="i18nFormat"&&(this.modules.i18nFormat=s),s.type==="postProcessor"&&Xp.addPostProcessor(s),s.type==="formatter"&&(this.modules.formatter=s),s.type==="3rdParty"&&this.modules.external.push(s),this}setResolvedLanguage(s){if(!(!s||!this.languages)&&!(["cimode","dev"].indexOf(s)>-1)){for(let l=0;l<this.languages.length;l++){const o=this.languages[l];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}!this.resolvedLanguage&&this.languages.indexOf(s)<0&&this.store.hasLanguageSomeTranslations(s)&&(this.resolvedLanguage=s,this.languages.unshift(s))}}changeLanguage(s,l){this.isLanguageChangingTo=s;const o=li();this.emit("languageChanging",s);const c=h=>{this.language=h,this.languages=this.services.languageUtils.toResolveHierarchy(h),this.resolvedLanguage=void 0,this.setResolvedLanguage(h)},d=(h,p)=>{p?this.isLanguageChangingTo===s&&(c(p),this.translator.changeLanguage(p),this.isLanguageChangingTo=void 0,this.emit("languageChanged",p),this.logger.log("languageChanged",p)):this.isLanguageChangingTo=void 0,o.resolve((...m)=>this.t(...m)),l&&l(h,(...m)=>this.t(...m))},f=h=>{!s&&!h&&this.services.languageDetector&&(h=[]);const p=je(h)?h:h&&h[0],m=this.store.hasLanguageSomeTranslations(p)?p:this.services.languageUtils.getBestMatchFromCodes(je(h)?[h]:h);m&&(this.language||c(m),this.translator.language||this.translator.changeLanguage(m),this.services.languageDetector?.cacheUserLanguage?.(m)),this.loadResources(m,y=>{d(y,m)})};return!s&&this.services.languageDetector&&!this.services.languageDetector.async?f(this.services.languageDetector.detect()):!s&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(f):this.services.languageDetector.detect(f):f(s),o}getFixedT(s,l,o){const c=(d,f,...h)=>{let p;typeof f!="object"?p=this.options.overloadTranslationOptionHandler([d,f].concat(h)):p={...f},p.lng=p.lng||c.lng,p.lngs=p.lngs||c.lngs,p.ns=p.ns||c.ns,p.keyPrefix!==""&&(p.keyPrefix=p.keyPrefix||o||c.keyPrefix);const m=this.options.keySeparator||".";let y;return p.keyPrefix&&Array.isArray(d)?y=d.map(x=>(typeof x=="function"&&(x=Ld(x,{...this.options,...f})),`${p.keyPrefix}${m}${x}`)):(typeof d=="function"&&(d=Ld(d,{...this.options,...f})),y=p.keyPrefix?`${p.keyPrefix}${m}${d}`:d),this.t(y,p)};return je(s)?c.lng=s:c.lngs=s,c.ns=l,c.keyPrefix=o,c}t(...s){return this.translator?.translate(...s)}exists(...s){return this.translator?.exists(...s)}setDefaultNamespace(s){this.options.defaultNS=s}hasLoadedNamespace(s,l={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const o=l.lng||this.resolvedLanguage||this.languages[0],c=this.options?this.options.fallbackLng:!1,d=this.languages[this.languages.length-1];if(o.toLowerCase()==="cimode")return!0;const f=(h,p)=>{const m=this.services.backendConnector.state[`${h}|${p}`];return m===-1||m===0||m===2};if(l.precheck){const h=l.precheck(this,f);if(h!==void 0)return h}return!!(this.hasResourceBundle(o,s)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||f(o,s)&&(!c||f(d,s)))}loadNamespaces(s,l){const o=li();return this.options.ns?(je(s)&&(s=[s]),s.forEach(c=>{this.options.ns.indexOf(c)<0&&this.options.ns.push(c)}),this.loadResources(c=>{o.resolve(),l&&l(c)}),o):(l&&l(),Promise.resolve())}loadLanguages(s,l){const o=li();je(s)&&(s=[s]);const c=this.options.preload||[],d=s.filter(f=>c.indexOf(f)<0&&this.services.languageUtils.isSupportedCode(f));return d.length?(this.options.preload=c.concat(d),this.loadResources(f=>{o.resolve(),l&&l(f)}),o):(l&&l(),Promise.resolve())}dir(s){if(s||(s=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!s)return"rtl";try{const c=new Intl.Locale(s);if(c&&c.getTextInfo){const d=c.getTextInfo();if(d&&d.direction)return d.direction}}catch{}const l=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],o=this.services?.languageUtils||new S0(wd());return s.toLowerCase().indexOf("-latn")>1?"ltr":l.indexOf(o.getLanguagePartFromCode(s))>-1||s.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(s={},l){const o=new hi(s,l);return o.createInstance=hi.createInstance,o}cloneInstance(s={},l=ro){const o=s.forkResourceStore;o&&delete s.forkResourceStore;const c={...this.options,...s,isClone:!0},d=new hi(c);if((s.debug!==void 0||s.prefix!==void 0)&&(d.logger=d.logger.clone(s)),["store","services","language"].forEach(h=>{d[h]=this[h]}),d.services={...this.services},d.services.utils={hasLoadedNamespace:d.hasLoadedNamespace.bind(d)},o){const h=Object.keys(this.store.data).reduce((p,m)=>(p[m]={...this.store.data[m]},p[m]=Object.keys(p[m]).reduce((y,x)=>(y[x]={...p[m][x]},y),p[m]),p),{});d.store=new j0(h,c),d.services.resourceStore=d.store}if(s.interpolation){const p={...wd().interpolation,...this.options.interpolation,...s.interpolation},m={...c,interpolation:p};d.services.interpolator=new E0(m)}return d.translator=new jo(d.services,c),d.translator.on("*",(h,...p)=>{d.emit(h,...p)}),d.init(c,l),d.translator.options=c,d.translator.backendConnector.services.utils={hasLoadedNamespace:d.hasLoadedNamespace.bind(d)},d}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const vt=hi.createInstance();vt.createInstance;vt.dir;vt.init;vt.loadResources;vt.reloadResources;vt.use;vt.changeLanguage;vt.getFixedT;vt.t;vt.exists;vt.setDefaultNamespace;vt.hasLoadedNamespace;vt.loadNamespaces;vt.loadLanguages;const lN=(n,s,l,o)=>{const c=[l,{code:s,...o||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(c,"warn","react-i18next::",!0);es(c[0])&&(c[0]=`react-i18next:: ${c[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...c):console?.warn&&console.warn(...c)},T0={},Qp=(n,s,l,o)=>{es(l)&&T0[l]||(es(l)&&(T0[l]=new Date),lN(n,s,l,o))},Fp=(n,s)=>()=>{if(n.isInitialized)s();else{const l=()=>{setTimeout(()=>{n.off("initialized",l)},0),s()};n.on("initialized",l)}},Rd=(n,s,l)=>{n.loadNamespaces(s,Fp(n,l))},M0=(n,s,l,o)=>{if(es(l)&&(l=[l]),n.options.preload&&n.options.preload.indexOf(s)>-1)return Rd(n,l,o);l.forEach(c=>{n.options.ns.indexOf(c)<0&&n.options.ns.push(c)}),n.loadLanguages(s,Fp(n,o))},oN=(n,s,l={})=>!s.languages||!s.languages.length?(Qp(s,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:s.languages}),!0):s.hasLoadedNamespace(n,{lng:l.lng,precheck:(o,c)=>{if(l.bindI18n&&l.bindI18n.indexOf("languageChanging")>-1&&o.services.backendConnector.backend&&o.isLanguageChangingTo&&!c(o.isLanguageChangingTo,n))return!1}}),es=n=>typeof n=="string",cN=n=>typeof n=="object"&&n!==null,uN=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,dN={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},fN=n=>dN[n],gN=n=>n.replace(uN,fN);let Hd={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:gN,transDefaultProps:void 0};const hN=(n={})=>{Hd={...Hd,...n}},mN=()=>Hd;let Kp;const pN=n=>{Kp=n},xN=()=>Kp,yN={type:"3rdParty",init(n){hN(n.options.react),pN(n)}},bN=M.createContext();class vN{constructor(){this.usedNamespaces={}}addUsedNamespaces(s){s.forEach(l=>{this.usedNamespaces[l]||(this.usedNamespaces[l]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var NN=Qv();const jN=(n,s)=>es(s)?s:cN(s)&&es(s.defaultValue)?s.defaultValue:Array.isArray(n)?n[n.length-1]:n,wN={t:jN,ready:!1},SN=()=>()=>{},rs=(n,s={})=>{const{i18n:l}=s,{i18n:o,defaultNS:c}=M.useContext(bN)||{},d=l||o||xN();d&&!d.reportNamespaces&&(d.reportNamespaces=new vN),d||Qp(d,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const f=M.useMemo(()=>({...mN(),...d?.options?.react,...s}),[d,s]),{useSuspense:h,keyPrefix:p}=f,m=c||d?.options?.defaultNS,y=es(m)?[m]:m||["translation"],x=M.useMemo(()=>y,y);d?.reportNamespaces?.addUsedNamespaces?.(x);const v=M.useRef(0),j=M.useCallback(H=>{if(!d)return SN;const{bindI18n:K,bindI18nStore:q}=f,Z=()=>{v.current+=1,H()};return K&&d.on(K,Z),q&&d.store.on(q,Z),()=>{K&&K.split(" ").forEach(Q=>d.off(Q,Z)),q&&q.split(" ").forEach(Q=>d.store.off(Q,Z))}},[d,f]),w=M.useRef(),T=M.useCallback(()=>{if(!d)return wN;const H=!!(d.isInitialized||d.initializedStoreOnce)&&x.every(D=>oN(D,d,f)),K=s.lng||d.language,q=v.current,Z=w.current;if(Z&&Z.ready===H&&Z.lng===K&&Z.keyPrefix===p&&Z.revision===q)return Z;const C={t:d.getFixedT(K,f.nsMode==="fallback"?x:x[0],p),ready:H,lng:K,keyPrefix:p,revision:q};return w.current=C,C},[d,x,p,f,s.lng]),[z,A]=M.useState(0),{t:k,ready:N}=NN.useSyncExternalStore(j,T,T);M.useEffect(()=>{if(d&&!N&&!h){const H=()=>A(K=>K+1);s.lng?M0(d,s.lng,x,H):Rd(d,x,H)}},[d,s.lng,x,N,h,z]);const E=d||{},L=M.useRef(null),B=M.useRef(),V=H=>{const K=Object.getOwnPropertyDescriptors(H);K.__original&&delete K.__original;const q=Object.create(Object.getPrototypeOf(H),K);if(!Object.prototype.hasOwnProperty.call(q,"__original"))try{Object.defineProperty(q,"__original",{value:H,writable:!1,enumerable:!1,configurable:!1})}catch{}return q},X=M.useMemo(()=>{const H=E,K=H?.language;let q=H;H&&(L.current&&L.current.__original===H?B.current!==K?(q=V(H),L.current=q,B.current=K):q=L.current:(q=V(H),L.current=q,B.current=K));const Z=[k,q,N];return Z.t=k,Z.i18n=q,Z.ready=N,Z},[k,E,N,E.resolvedLanguage,E.language,E.languages]);if(d&&h&&!N)throw new Promise(H=>{const K=()=>H();s.lng?M0(d,s.lng,x,K):Rd(d,x,K)});return X},{slice:_N,forEach:kN}=[];function CN(n){return kN.call(_N.call(arguments,1),s=>{if(s)for(const l in s)n[l]===void 0&&(n[l]=s[l])}),n}function EN(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(l=>l.test(n))}const D0=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,zN=function(n,s){const o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},c=encodeURIComponent(s);let d=`${n}=${c}`;if(o.maxAge>0){const f=o.maxAge-0;if(Number.isNaN(f))throw new Error("maxAge should be a Number");d+=`; Max-Age=${Math.floor(f)}`}if(o.domain){if(!D0.test(o.domain))throw new TypeError("option domain is invalid");d+=`; Domain=${o.domain}`}if(o.path){if(!D0.test(o.path))throw new TypeError("option path is invalid");d+=`; Path=${o.path}`}if(o.expires){if(typeof o.expires.toUTCString!="function")throw new TypeError("option expires is invalid");d+=`; Expires=${o.expires.toUTCString()}`}if(o.httpOnly&&(d+="; HttpOnly"),o.secure&&(d+="; Secure"),o.sameSite)switch(typeof o.sameSite=="string"?o.sameSite.toLowerCase():o.sameSite){case!0:d+="; SameSite=Strict";break;case"lax":d+="; SameSite=Lax";break;case"strict":d+="; SameSite=Strict";break;case"none":d+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o.partitioned&&(d+="; Partitioned"),d},O0={create(n,s,l,o){let c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};l&&(c.expires=new Date,c.expires.setTime(c.expires.getTime()+l*60*1e3)),o&&(c.domain=o),document.cookie=zN(n,s,c)},read(n){const s=`${n}=`,l=document.cookie.split(";");for(let o=0;o<l.length;o++){let c=l[o];for(;c.charAt(0)===" ";)c=c.substring(1,c.length);if(c.indexOf(s)===0)return c.substring(s.length,c.length)}return null},remove(n,s){this.create(n,"",-1,s)}};var AN={name:"cookie",lookup(n){let{lookupCookie:s}=n;if(s&&typeof document<"u")return O0.read(s)||void 0},cacheUserLanguage(n,s){let{lookupCookie:l,cookieMinutes:o,cookieDomain:c,cookieOptions:d}=s;l&&typeof document<"u"&&O0.create(l,n,o,c,d)}},TN={name:"querystring",lookup(n){let{lookupQuerystring:s}=n,l;if(typeof window<"u"){let{search:o}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(o=window.location.hash.substring(window.location.hash.indexOf("?")));const d=o.substring(1).split("&");for(let f=0;f<d.length;f++){const h=d[f].indexOf("=");h>0&&d[f].substring(0,h)===s&&(l=d[f].substring(h+1))}}return l}},MN={name:"hash",lookup(n){let{lookupHash:s,lookupFromHashIndex:l}=n,o;if(typeof window<"u"){const{hash:c}=window.location;if(c&&c.length>2){const d=c.substring(1);if(s){const f=d.split("&");for(let h=0;h<f.length;h++){const p=f[h].indexOf("=");p>0&&f[h].substring(0,p)===s&&(o=f[h].substring(p+1))}}if(o)return o;if(!o&&l>-1){const f=c.match(/\/([a-zA-Z-]*)/g);return Array.isArray(f)?f[typeof l=="number"?l:0]?.replace("/",""):void 0}}}return o}};let Ks=null;const L0=()=>{if(Ks!==null)return Ks;try{if(Ks=typeof window<"u"&&window.localStorage!==null,!Ks)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{Ks=!1}return Ks};var DN={name:"localStorage",lookup(n){let{lookupLocalStorage:s}=n;if(s&&L0())return window.localStorage.getItem(s)||void 0},cacheUserLanguage(n,s){let{lookupLocalStorage:l}=s;l&&L0()&&window.localStorage.setItem(l,n)}};let Is=null;const R0=()=>{if(Is!==null)return Is;try{if(Is=typeof window<"u"&&window.sessionStorage!==null,!Is)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{Is=!1}return Is};var ON={name:"sessionStorage",lookup(n){let{lookupSessionStorage:s}=n;if(s&&R0())return window.sessionStorage.getItem(s)||void 0},cacheUserLanguage(n,s){let{lookupSessionStorage:l}=s;l&&R0()&&window.sessionStorage.setItem(l,n)}},LN={name:"navigator",lookup(n){const s=[];if(typeof navigator<"u"){const{languages:l,userLanguage:o,language:c}=navigator;if(l)for(let d=0;d<l.length;d++)s.push(l[d]);o&&s.push(o),c&&s.push(c)}return s.length>0?s:void 0}},RN={name:"htmlTag",lookup(n){let{htmlTag:s}=n,l;const o=s||(typeof document<"u"?document.documentElement:null);return o&&typeof o.getAttribute=="function"&&(l=o.getAttribute("lang")),l}},HN={name:"path",lookup(n){let{lookupFromPathIndex:s}=n;if(typeof window>"u")return;const l=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(l)?l[typeof s=="number"?s:0]?.replace("/",""):void 0}},UN={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:s}=n;const l=typeof s=="number"?s+1:1,o=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(o)return o[l]}};let Ip=!1;try{document.cookie,Ip=!0}catch{}const Jp=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Ip||Jp.splice(1,1);const BN=()=>({order:Jp,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class Wp{constructor(s){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(s,l)}init(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=s,this.options=CN(l,this.options||{},BN()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=c=>c.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=o,this.addDetector(AN),this.addDetector(TN),this.addDetector(DN),this.addDetector(ON),this.addDetector(LN),this.addDetector(RN),this.addDetector(HN),this.addDetector(UN),this.addDetector(MN)}addDetector(s){return this.detectors[s.name]=s,this}detect(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,l=[];return s.forEach(o=>{if(this.detectors[o]){let c=this.detectors[o].lookup(this.options);c&&typeof c=="string"&&(c=[c]),c&&(l=l.concat(c))}}),l=l.filter(o=>o!=null&&!EN(o)).map(o=>this.options.convertDetectedLanguage(o)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?l:l.length>0?l[0]:null}cacheUserLanguage(s){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;l&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(s)>-1||l.forEach(o=>{this.detectors[o]&&this.detectors[o].cacheUserLanguage(s,this.options)}))}}Wp.type="languageDetector";const $N="Welcome",VN="Settings",qN="Language",YN="Select Language",GN="Import Contacts",XN="Dashboard",ZN="Dashboard",QN="Inbox",FN="Team",KN="Contacts",IN="Lists",JN="New Campaign",WN="History",PN="Templates",ej="Automations",tj="Media Library",nj="Settings",aj="Logout",sj="WHATSMS ORGANIZATION",rj="Logged in as {{name}}",ij="Import Contacts",lj="Click or drag CSV here",oj="Columns: name, phone, interests",cj="Cancel",uj="Importing...",dj="Import Contacts",fj="Import Complete",gj="Imported",hj="Skipped",mj="Errors:",pj="Import More",xj="Done",yj="Sent",bj="Delivered",vj="Read",Nj="Replied",jj="Failed",wj="Cancel",Sj="Save",_j="Delete",kj="Edit",Cj="Loading...",Ej="Dashboard",zj="Welcome back! Here's an overview of your campaigns.",Aj="New Campaign",Tj="Total Campaigns",Mj="Messages Sent",Dj="Total Contacts",Oj="Contact Lists",Lj="{{count}} active",Rj="{{rate}}% delivery rate",Hj="+{{count}} this week",Uj="Active lists",Bj="Message Trends",$j="Last 7 days",Vj="Campaign Comparison",qj="Recent campaigns",Yj="No campaigns yet",Gj="Performance Overview",Xj="Message delivery metrics",Zj="Delivery Rate",Qj="Read Rate",Fj="Recent Campaigns",Kj="Latest updates",Ij="View All Campaigns",Jj="AI Performance Insights",Wj="AI-powered analysis",Pj="Analyze",ew="Analyze Again",tw="Analyzing...",nw="Start Analysis ",aw="Contacts",sw="Manage your audience and contact lists",rw="Fetch WhatsApp",iw="Import CSV",lw="Add Contact",ow="Active Lists",cw="New This Week",uw="Showing",dw="Search contacts...",fw="Filter by Tag",gw="Refresh",hw="Contact",mw="Phone",pw="Tags",xw="Lists",yw="Actions",bw="All Contacts",vw="Message Templates",Nw="Design structured WhatsApp messages",jw="Create Template",ww="No templates yet",Sw="Edit Template",_w="New Template",kw="Template Name",Cw="Header (Optional)",Ew="Body Text",zw="Footer (Optional)",Aw="Preview",Tw="Save Template",Mw="Settings",Dw="Configure your WhatsApp Business API connection",Ow="Customize the look and feel",Lw="API Credentials",Rw="Enter your Meta Developer keys",Hw="Phone Number ID",Uw="Found in WhatsApp API Setup",Bw="Access Token",$w="Permanent or Temporary Access Token",Vw="WABA ID",qw="WhatsApp Business Account ID (for reference)",Yw="Save Credentials",Gw="Test Connectivity",Xw="Recipient Phone (e.g. 1555...)",Zw="Send Test",Qw="Sends a standard 'hello_world' template.",Fw="Note: If using a Meta Test Number, you can only send to Verified Numbers.",Kw="Note: Credentials must be saved before testing.",Iw="Webhook Setup",Jw="Connect to Meta for incoming messages",Ww="Callback URL",Pw="Verify Token",e2="Editable",t2="Must match the Verify Token in Meta Dashboard",n2="Setup Instructions:",a2="Go to your App Dashboard in Meta Developers.",s2="Select WhatsApp > Configuration.",r2="Click Edit under Webhook.",i2="Paste the Callback URL and Verify Token above.",l2="Enable events:",o2="Configuration saved successfully!",c2="Failed to save configuration",u2="Please enter a phone number to test",d2="Connection Verified!",f2="Test Connection Failed",g2="Campaigns",h2="View and manage your marketing campaigns",m2="Active Now",p2="Recipients",x2="Progress",y2="No {{filter}} campaigns found",b2="Create your first campaign to get started",v2="Create Campaign",N2="Start sending this campaign now?",j2="Stop this campaign?",w2="Delete this campaign?",S2="Draft",_2="Scheduled",k2="In Progress",C2="Completed",E2="Stopped",z2={welcome:$N,settings:VN,language:qN,select_language:YN,import_contacts:GN,dashboard:XN,nav_dashboard:ZN,nav_inbox:QN,nav_team:FN,nav_contacts:KN,nav_lists:IN,nav_new_campaign:JN,nav_history:WN,nav_templates:PN,nav_automations:ej,nav_media_library:tj,nav_settings:nj,nav_logout:aj,organization_header:sj,logged_in_as:rj,import_contacts_title:ij,drag_drop_csv:lj,csv_columns:oj,cancel:cj,importing:uj,import_button:dj,import_complete:fj,imported_count:gj,skipped_count:hj,errors_label:mj,import_more:pj,done:xj,status_sent:yj,status_delivered:bj,status_read:vj,status_replied:Nj,status_failed:jj,btn_cancel:wj,btn_save:Sj,btn_delete:_j,btn_edit:kj,loading:Cj,dashboard_title:Ej,dashboard_subtitle:zj,btn_new_campaign:Aj,stat_total_campaigns:Tj,stat_messages_sent:Mj,stat_total_contacts:Dj,stat_contact_lists:Oj,active_count:Lj,delivery_rate:Rj,this_week:Hj,active_lists:Uj,chart_message_trends:Bj,last_7_days:$j,chart_campaign_comparison:Vj,recent_campaigns:qj,no_campaigns_yet:Yj,performance_overview:Gj,performance_subtitle:Xj,rate_delivery:Zj,rate_read:Qj,recent_campaigns_title:Fj,latest_updates:Kj,btn_view_all_campaigns:Ij,ai_insights_title:Jj,ai_insights_subtitle:Wj,btn_analyze:Pj,btn_analyze_again:ew,status_analyzing:tw,btn_start_analysis:nw,contacts_title:aw,contacts_subtitle:sw,btn_fetch_whatsapp:rw,btn_import_csv:iw,btn_add_contact:lw,stat_active_lists:ow,stat_new_this_week:cw,label_showing:uw,placeholder_search_contacts:dw,btn_filter_tag:fw,btn_refresh:gw,col_contact:hw,col_phone:mw,col_tags:pw,col_lists:xw,col_actions:yw,label_all_contacts:bw,templates_title:vw,templates_subtitle:Nw,btn_create_template:jw,no_templates:ww,modal_edit_template:Sw,modal_new_template:_w,label_template_name:kw,label_header_optional:Cw,label_body_text:Ew,label_footer_optional:zw,label_preview:Aw,btn_save_template:Tw,settings_title:Mw,settings_subtitle:Dw,section_appearance:Ow,section_credentials:Lw,section_credentials_subtitle:Rw,label_phone_id:Hw,hint_phone_id:Uw,label_access_token:Bw,placeholder_access_token:$w,label_waba_id:Vw,hint_waba_id:qw,btn_save_credentials:Yw,label_test_connectivity:Gw,placeholder_test_phone:Xw,btn_send_test:Zw,hint_test_message:Qw,hint_test_warning:Fw,hint_save_before_test:Kw,section_webhook:Iw,section_webhook_subtitle:Jw,label_callback_url:Ww,label_verify_token:Pw,label_editable:e2,hint_verify_token:t2,label_setup_instructions:n2,instr_step_1:a2,instr_step_2:s2,instr_step_3:r2,instr_step_4:i2,instr_step_5:l2,success_config_saved:o2,error_config_save:c2,error_no_phone:u2,success_connection:d2,error_connection:f2,campaigns_title:g2,campaigns_subtitle:h2,stat_active_now:m2,stat_recipients:p2,label_progress:x2,no_campaigns_filter:y2,start_campaign_prompt:b2,btn_create_campaign:v2,confirm_send_campaign:N2,confirm_stop_campaign:j2,confirm_delete_campaign:w2,status_draft:S2,status_scheduled:_2,status_in_progress:k2,status_completed:C2,status_stopped:E2},A2="Bienvenue",T2="Paramtres",M2="Langue",D2="Changer la langue",O2="Importer des contacts",L2="Tableau de bord",R2="Tableau de bord",H2="Bote de rception",U2="quipe",B2="Contacts",$2="Listes",V2="Nouvelle Campagne",q2="Historique",Y2="Modles",G2="Automations",X2="Mdiathque",Z2="Paramtres",Q2="Dconnexion",F2="ORGANISATION WHATSMS",K2="Connect en tant que {{name}}",I2="Importer des contacts",J2="Cliquez ou glissez un CSV ici",W2="Colonnes : nom, tlphone, intrts",P2="Annuler",eS="Importation...",tS="Importer",nS="Importation termine",aS="Import",sS="Ignor",rS="Erreurs :",iS="Importer plus",lS="Termin",oS="Envoy",cS="Livr",uS="Lu",dS="Rpondu",fS="chou",gS="Annuler",hS="Enregistrer",mS="Supprimer",pS="Modifier",xS="Chargement...",yS="Tableau de bord",bS="Bon retour ! Voici un aperu de vos campagnes.",vS="Nouvelle Campagne",NS="Total des campagnes",jS="Messages envoys",wS="Total des contacts",SS="Listes de contacts",_S="{{count}} actives",kS="Taux de livraison {{rate}}%",CS="+{{count}} cette semaine",ES="Listes actives",zS="Tendances des messages",AS="7 derniers jours",TS="Comparaison des campagnes",MS="Campagnes rcentes",DS="Aucune campagne pour le moment",OS="Aperu des performances",LS="Mtriques de livraison des messages",RS="Taux de livraison",HS="Taux de lecture",US="Campagnes rcentes",BS="Dernires mises  jour",$S="Voir toutes les campagnes",VS="Analyses IA",qS="Analyse par IA",YS="Analyser",GS="Analyser  nouveau",XS="Analyse en cours...",ZS="Lancer l'analyse ",QS="Contacts",FS="Grez votre audience et vos listes de contacts",KS="Rcuprer WhatsApp",IS="Importer CSV",JS="Ajouter un contact",WS="Listes actives",PS="Nouveaux cette semaine",e_="Affichage",t_="Rechercher des contacts...",n_="Filtrer par tiquette",a_="Actualiser",s_="Contact",r_="Tlphone",i_="tiquettes",l_="Listes",o_="Actions",c_="Tous les contacts",u_="Modles de messages",d_="Concevez des messages WhatsApp structurs",f_="Crer un modle",g_="Aucun modle pour le moment",h_="Modifier le modle",m_="Nouveau modle",p_="Nom du modle",x_="En-tte (Optionnel)",y_="Corps du texte",b_="Pied de page (Optionnel)",v_="Aperu",N_="Enregistrer le modle",j_="Paramtres",w_="Configurez votre connexion API WhatsApp Business",S_="Personnaliser l'apparence",__="Identifiants API",k_="Entrez vos cls Meta Developer",C_="ID du numro de tlphone",E_="Trouv dans la configuration API WhatsApp",z_="Jeton d'accs",A_="Jeton d'accs permanent ou temporaire",T_="ID WABA",M_="ID du compte WhatsApp Business (pour rfrence)",D_="Enregistrer les identifiants",O_="Tester la connectivit",L_="Tlphone du destinataire (ex: 1555...)",R_="Envoyer le test",H_="Envoie un modle standard 'hello_world'.",U_="Note : Si vous utilisez un numro de test Meta, vous ne pouvez envoyer qu'aux numros vrifis.",B_="Note : Les identifiants doivent tre enregistrs avant le test.",$_="Configuration Webhook",V_="Connecter  Meta pour les messages entrants",q_="URL de rappel",Y_="Jeton de vrification",G_="Modifiable",X_="Doit correspondre au jeton de vrification dans le tableau de bord Meta",Z_="Instructions de configuration :",Q_="Allez dans votre tableau de bord d'application Meta Developers.",F_="Slectionnez WhatsApp > Configuration.",K_="Cliquez sur Modifier sous Webhook.",I_="Collez l'URL de rappel et le jeton de vrification ci-dessus.",J_="Activez les vnements :",W_="Configuration enregistre avec succs !",P_="chec de l'enregistrement de la configuration",ek="Veuillez entrer un numro de tlphone pour tester",tk="Connexion vrifie !",nk="chec du test de connexion",ak="Campagnes",sk="Voir et grer vos campagnes marketing",rk="Actives maintenant",ik="Destinataires",lk="Progression",ok="Aucune campagne {{filter}} trouve",ck="Crez votre premire campagne pour commencer",uk="Crer une campagne",dk="Commencer l'envoi de cette campagne maintenant ?",fk="Arrter cette campagne ?",gk="Supprimer cette campagne ?",hk="Brouillon",mk="Planifie",pk="En cours",xk="Termine",yk="Arrte",bk={welcome:A2,settings:T2,language:M2,select_language:D2,import_contacts:O2,dashboard:L2,nav_dashboard:R2,nav_inbox:H2,nav_team:U2,nav_contacts:B2,nav_lists:$2,nav_new_campaign:V2,nav_history:q2,nav_templates:Y2,nav_automations:G2,nav_media_library:X2,nav_settings:Z2,nav_logout:Q2,organization_header:F2,logged_in_as:K2,import_contacts_title:I2,drag_drop_csv:J2,csv_columns:W2,cancel:P2,importing:eS,import_button:tS,import_complete:nS,imported_count:aS,skipped_count:sS,errors_label:rS,import_more:iS,done:lS,status_sent:oS,status_delivered:cS,status_read:uS,status_replied:dS,status_failed:fS,btn_cancel:gS,btn_save:hS,btn_delete:mS,btn_edit:pS,loading:xS,dashboard_title:yS,dashboard_subtitle:bS,btn_new_campaign:vS,stat_total_campaigns:NS,stat_messages_sent:jS,stat_total_contacts:wS,stat_contact_lists:SS,active_count:_S,delivery_rate:kS,this_week:CS,active_lists:ES,chart_message_trends:zS,last_7_days:AS,chart_campaign_comparison:TS,recent_campaigns:MS,no_campaigns_yet:DS,performance_overview:OS,performance_subtitle:LS,rate_delivery:RS,rate_read:HS,recent_campaigns_title:US,latest_updates:BS,btn_view_all_campaigns:$S,ai_insights_title:VS,ai_insights_subtitle:qS,btn_analyze:YS,btn_analyze_again:GS,status_analyzing:XS,btn_start_analysis:ZS,contacts_title:QS,contacts_subtitle:FS,btn_fetch_whatsapp:KS,btn_import_csv:IS,btn_add_contact:JS,stat_active_lists:WS,stat_new_this_week:PS,label_showing:e_,placeholder_search_contacts:t_,btn_filter_tag:n_,btn_refresh:a_,col_contact:s_,col_phone:r_,col_tags:i_,col_lists:l_,col_actions:o_,label_all_contacts:c_,templates_title:u_,templates_subtitle:d_,btn_create_template:f_,no_templates:g_,modal_edit_template:h_,modal_new_template:m_,label_template_name:p_,label_header_optional:x_,label_body_text:y_,label_footer_optional:b_,label_preview:v_,btn_save_template:N_,settings_title:j_,settings_subtitle:w_,section_appearance:S_,section_credentials:__,section_credentials_subtitle:k_,label_phone_id:C_,hint_phone_id:E_,label_access_token:z_,placeholder_access_token:A_,label_waba_id:T_,hint_waba_id:M_,btn_save_credentials:D_,label_test_connectivity:O_,placeholder_test_phone:L_,btn_send_test:R_,hint_test_message:H_,hint_test_warning:U_,hint_save_before_test:B_,section_webhook:$_,section_webhook_subtitle:V_,label_callback_url:q_,label_verify_token:Y_,label_editable:G_,hint_verify_token:X_,label_setup_instructions:Z_,instr_step_1:Q_,instr_step_2:F_,instr_step_3:K_,instr_step_4:I_,instr_step_5:J_,success_config_saved:W_,error_config_save:P_,error_no_phone:ek,success_connection:tk,error_connection:nk,campaigns_title:ak,campaigns_subtitle:sk,stat_active_now:rk,stat_recipients:ik,label_progress:lk,no_campaigns_filter:ok,start_campaign_prompt:ck,btn_create_campaign:uk,confirm_send_campaign:dk,confirm_stop_campaign:fk,confirm_delete_campaign:gk,status_draft:hk,status_scheduled:mk,status_in_progress:pk,status_completed:xk,status_stopped:yk};vt.use(Wp).use(yN).init({resources:{en:{translation:z2},fr:{translation:bk}},lng:"fr",fallbackLng:"fr",interpolation:{escapeValue:!1}});const vk="/api";class Nk{constructor(){this.baseUrl=vk,this.token=localStorage.getItem("token")}setToken(s){this.token=s,s?localStorage.setItem("token",s):localStorage.removeItem("token")}getToken(){return this.token}async request(s,l={}){const o=`${this.baseUrl}${s}`,c={"Content-Type":"application/json",...l.headers};this.token&&(c.Authorization=`Bearer ${this.token}`);const d={...l,headers:c};l.body&&typeof l.body=="object"&&!(l.body instanceof FormData)&&(d.body=JSON.stringify(l.body)),l.body instanceof FormData&&delete c["Content-Type"];const f=await fetch(o,d);if(f.status===401&&!s.includes("/auth/login"))throw this.setToken(null),window.location.href="/login",new Error("Session expired. Please login again.");const h=await f.text();let p;try{p=h?JSON.parse(h):{}}catch(m){throw console.error("API Error:",m,"Response was not JSON:",h),new Error(`Server Error (${f.status}): Please check browser console for details.`)}if(!f.ok)throw new Error(p.message||p.error||"An error occurred");return p}async get(s,l={}){return this.request(s,{...l,method:"GET"})}async post(s,l,o={}){return this.request(s,{...o,method:"POST",body:l})}async put(s,l,o={}){return this.request(s,{...o,method:"PUT",body:l})}async delete(s,l={}){return this.request(s,{...l,method:"DELETE"})}async login(s,l){const o=await this.request("/auth/login",{method:"POST",body:{username:s,password:l}});return this.setToken(o.token),o}async register(s,l){const o=await this.request("/auth/register",{method:"POST",body:{username:s,password:l}});return this.setToken(o.token),o}async getMe(){return this.request("/auth/me")}logout(){this.setToken(null)}async getContacts(s={}){const l=new URLSearchParams(s).toString();return this.request(`/contacts${l?`?${l}`:""}`)}async getContactStats(){return this.request("/contacts/stats")}async getContactTags(){return this.request("/contacts/tags")}async getContact(s){return this.request(`/contacts/${s}`)}async createContact(s){return this.request("/contacts",{method:"POST",body:s})}async updateContact(s,l){return this.request(`/contacts/${s}`,{method:"PUT",body:l})}async deleteContact(s){return this.request(`/contacts/${s}`,{method:"DELETE"})}async importContacts(s){const l=new FormData;return l.append("file",s),this.request("/contacts/import",{method:"POST",body:l})}async fetchWhatsAppContacts(){return this.request("/contacts/fetch-whatsapp",{method:"POST"})}async uploadFile(s){const l=new FormData;return l.append("file",s),this.request("/upload",{method:"POST",body:l})}async getLists(){return this.request("/lists")}async getList(s){return this.request(`/lists/${s}`)}async createList(s){return this.request("/lists",{method:"POST",body:s})}async updateList(s,l){return this.request(`/lists/${s}`,{method:"PUT",body:l})}async deleteList(s){return this.request(`/lists/${s}`,{method:"DELETE"})}async addContactsToList(s,l){return this.request(`/lists/${s}/contacts`,{method:"POST",body:{contactIds:l}})}async removeContactFromList(s,l){return this.request(`/lists/${s}/contacts/${l}`,{method:"DELETE"})}async getCampaigns(s={}){const l=new URLSearchParams(s).toString();return this.request(`/campaigns${l?`?${l}`:""}`)}async getCampaignStats(){return this.request("/campaigns/stats")}async getCampaign(s){return this.request(`/campaigns/${s}`)}async getCampaignRecipients(s,l={}){const o=new URLSearchParams(l).toString();return this.request(`/campaigns/${s}/recipients${o?`?${o}`:""}`)}async createCampaign(s){return this.request("/campaigns",{method:"POST",body:s})}async updateCampaign(s,l){return this.request(`/campaigns/${s}`,{method:"PUT",body:l})}async deleteCampaign(s){return this.request(`/campaigns/${s}`,{method:"DELETE"})}async sendCampaign(s){return this.request(`/campaigns/${s}/send`,{method:"POST"})}async stopCampaign(s){return this.request(`/campaigns/${s}/stop`,{method:"POST"})}async getTemplates(){return this.request("/templates")}async getTemplate(s){return this.request(`/templates/${s}`)}async createTemplate(s){return this.request("/templates",{method:"POST",body:s})}async updateTemplate(s,l){return this.request(`/templates/${s}`,{method:"PUT",body:l})}async deleteTemplate(s){return this.request(`/templates/${s}`,{method:"DELETE"})}async getMedia(s={}){const l=new URLSearchParams(s).toString();return this.request(`/media${l?`?${l}`:""}`)}async uploadMedia(s){const l=new FormData;return l.append("file",s),this.request("/media/upload",{method:"POST",body:l})}async deleteMedia(s){return this.request(`/media/${s}`,{method:"DELETE"})}async getTeamMembers(){return this.request("/team")}async addTeamMember(s){return this.request("/team",{method:"POST",body:s})}async updateTeamMember(s,l){return this.request(`/team/${s}`,{method:"PUT",body:l})}async deleteTeamMember(s){return this.request(`/team/${s}`,{method:"DELETE"})}async getConversations(s={}){const l=new URLSearchParams(s).toString();return this.request(`/conversations${l?`?${l}`:""}`)}async getConversation(s){return this.request(`/conversations/${s}`)}async sendMessage(s,l){return this.request(`/conversations/${s}/messages`,{method:"POST",body:l})}async assignConversation(s,l){return this.request(`/conversations/${s}/assign`,{method:"PUT",body:{assignedToId:l}})}async updateConversationStatus(s,l){return this.request(`/conversations/${s}/status`,{method:"PUT",body:{status:l}})}async getNotes(s){return this.request(`/notes/contact/${s}`)}async addNote(s){return this.request("/notes",{method:"POST",body:s})}}const ce=new Nk,Pp=M.createContext(null),Pd=()=>{const n=M.useContext(Pp);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},jk=({children:n})=>{const[s,l]=M.useState(null),[o,c]=M.useState(!0),[d,f]=M.useState(null);M.useEffect(()=>{(async()=>{if(ce.getToken())try{const j=await ce.getMe();l(j.user)}catch(j){console.error("Auth check failed:",j),ce.logout()}c(!1)})()},[]);const y={user:s,loading:o,error:d,isAuthenticated:!!s,login:async(x,v)=>{f(null);try{const j=await ce.login(x,v);return l(j.user),j}catch(j){throw f(j.message),j}},register:async(x,v)=>{f(null);try{const j=await ce.register(x,v);return l(j.user),j}catch(j){throw f(j.message),j}},logout:()=>{ce.logout(),l(null)}};return r.jsx(Pp.Provider,{value:y,children:n})},ex=M.createContext(null),Lo=()=>{const n=M.useContext(ex);if(!n)throw new Error("useToast must be used within a ToastProvider");return n},wk=({id:n,type:s,message:l,onClose:o})=>{const c={success:r.jsx(Td,{className:"text-blue-500",size:20}),error:r.jsx(Ap,{className:"text-red-500",size:20}),warning:r.jsx(ka,{className:"text-amber-500",size:20}),info:r.jsx(t1,{className:"text-emerald-500",size:20})},d={success:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",error:"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",warning:"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800",info:"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800"};return r.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-xl border shadow-lg backdrop-blur-sm animate-slide-up ${d[s]}`,style:{minWidth:"300px"},children:[c[s],r.jsx("p",{className:"flex-1 text-sm font-medium text-gray-800 dark:text-gray-200",children:l}),r.jsx("button",{onClick:()=>o(n),className:"p-1 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg transition-colors",children:r.jsx(bt,{size:16,className:"text-gray-400"})})]})},Sk=({children:n})=>{const[s,l]=M.useState([]),o=M.useCallback(f=>{l(h=>h.filter(p=>p.id!==f))},[]),c=M.useCallback((f,h,p=4e3)=>{const m=Date.now()+Math.random();l(y=>[...y,{id:m,type:f,message:h}]),setTimeout(()=>{o(m)},p)},[o]),d={success:f=>c("success",f),error:f=>c("error",f),warning:f=>c("warning",f),info:f=>c("info",f)};return r.jsxs(ex.Provider,{value:d,children:[n,r.jsx("div",{className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-2",children:s.map(f=>r.jsx(wk,{id:f.id,type:f.type,message:f.message,onClose:o},f.id))})]})},tx=M.createContext(),nx=()=>M.useContext(tx),_k=({children:n})=>{const[s,l]=M.useState(()=>typeof window<"u"?localStorage.getItem("theme")==="dark"||!localStorage.getItem("theme")&&window.matchMedia("(prefers-color-scheme: dark)").matches:!1);M.useEffect(()=>{s?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[s]);const o=()=>l(!s);return r.jsx(tx.Provider,{value:{isDark:s,toggleTheme:o},children:n})},kk=({children:n})=>{const{isAuthenticated:s,loading:l}=Pd(),o=qp();return l?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background-light dark:bg-background-dark",children:r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 border-4 border-primary/30 border-t-primary rounded-full animate-spin"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading..."})]})}):s?n:r.jsx(A1,{to:"/login",state:{from:o},replace:!0})},Ck=()=>{const{isDark:n}=nx(),[s,l]=M.useState(!1),{user:o,logout:c}=Pd(),d=ss(),{t:f}=rs(),h=()=>{c(),d("/login")},p=[{to:"/",icon:Tp,label:f("nav_dashboard"),end:!0},{to:"/inbox",icon:n1,label:f("nav_inbox")},{to:"/team",icon:a1,label:f("nav_team")},{to:"/contacts",icon:hn,label:f("nav_contacts")},{to:"/lists",icon:Kd,label:f("nav_lists")},{to:"/campaigns/new",icon:s1,label:f("nav_new_campaign")},{to:"/campaigns",icon:r1,label:f("nav_history"),end:!0},{to:"/templates",icon:Ci,label:f("nav_templates")},{to:"/automations",icon:bo,label:f("nav_automations")},{to:"/media",icon:pi,label:f("nav_media_library")},{to:"/settings",icon:Md,label:f("nav_settings")}],m=p.filter(x=>!["/team","/settings"].includes(x.to)),y=p.filter(x=>["/team","/settings"].includes(x.to));return r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-background-dark text-gray-900 dark:text-gray-100 transition-colors duration-300",children:[r.jsx("aside",{className:"w-72 bg-[#F3F5FA] dark:bg-surface-dark border-r border-gray-200/50 dark:border-gray-800/80 flex-col hidden md:flex font-sans",children:r.jsxs("div",{className:"p-4 flex flex-col h-full",children:[r.jsx("div",{className:"mb-6 mx-2",children:r.jsx("div",{className:"bg-emerald-100/50 dark:bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 px-4 py-3 rounded-2xl flex items-center justify-center font-bold text-sm tracking-wide shadow-sm backdrop-blur-sm",children:f("organization_header")})}),r.jsxs("div",{className:"bg-white dark:bg-gray-800/50 rounded-[2rem] p-4 shadow-sm flex-1 overflow-y-auto mb-4",children:[r.jsx("div",{className:"mb-4 px-2 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Menu"}),r.jsx("nav",{className:"space-y-1",children:m.map((x,v)=>r.jsxs(so,{to:x.to,end:x.end,className:({isActive:j})=>`flex items-center gap-3 px-4 py-3 rounded-2xl transition-all duration-200 font-medium group ${j?"bg-emerald-50 dark:bg-emerald-500/20 text-emerald-600 dark:text-emerald-300 shadow-sm":"text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-gray-800 dark:hover:text-gray-200"}`,style:{animationDelay:`${v*.05}s`},children:[r.jsx(x.icon,{size:20,className:`flex-shrink-0 transition-colors ${({isActive:j})=>j?"text-emerald-500":"text-gray-400 group-hover:text-gray-600"}`,strokeWidth:1.8}),r.jsx("span",{children:x.label})]},x.to))})]}),r.jsxs("div",{className:"px-2 space-y-1 mb-2",children:[y.map(x=>r.jsxs(so,{to:x.to,className:({isActive:v})=>`flex items-center gap-3 px-4 py-3 rounded-2xl transition-all duration-200 font-medium group ${v?"text-emerald-600 dark:text-emerald-300":"text-gray-500 dark:text-gray-400 hover:bg-emerald-50/50 dark:hover:bg-gray-800/50 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[r.jsx(x.icon,{size:20,className:"flex-shrink-0",strokeWidth:1.8}),r.jsx("span",{children:x.label})]},x.to)),r.jsxs("button",{onClick:h,className:"flex items-center gap-3 w-full px-4 py-3 text-gray-500 dark:text-gray-400 hover:bg-red-50 dark:hover:bg-red-900/10 hover:text-red-600 dark:hover:text-red-400 rounded-2xl transition-all duration-200 font-medium group",children:[r.jsx(l0,{size:20,className:"group-hover:text-red-500 transition-colors",strokeWidth:1.8}),r.jsx("span",{children:f("nav_logout")})]})]}),r.jsx("div",{className:"px-6 py-2",children:r.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-600",children:o?f("logged_in_as",{name:o.username}):""})})]})}),s&&r.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 md:hidden animate-fade-in",onClick:()=>l(!1)}),r.jsx("aside",{className:`fixed inset-y-0 left-0 w-80 bg-[#F3F5FA] dark:bg-surface-dark border-r border-gray-200 dark:border-gray-800 flex flex-col z-50 transform transition-transform duration-300 md:hidden ${s?"translate-x-0":"-translate-x-full"}`,children:r.jsxs("div",{className:"p-4 flex flex-col h-full",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 mx-2",children:[r.jsx("div",{className:"bg-emerald-100/50 dark:bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 px-4 py-2 rounded-xl font-bold text-sm tracking-wide",children:"WHATSMS"}),r.jsx("button",{onClick:()=>l(!1),className:"p-2 rounded-xl hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500",children:r.jsx(bt,{size:20})})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800/50 rounded-[2rem] p-4 shadow-sm flex-1 overflow-y-auto mb-4",children:r.jsx("nav",{className:"space-y-1",children:m.map(x=>r.jsxs(so,{to:x.to,end:x.end,onClick:()=>l(!1),className:({isActive:v})=>`flex items-center gap-3 px-4 py-3 rounded-2xl transition-all duration-200 font-medium ${v?"bg-emerald-50 dark:bg-emerald-500/20 text-emerald-600 dark:text-emerald-300 shadow-sm":"text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[r.jsx(x.icon,{size:20,className:"flex-shrink-0",strokeWidth:1.8}),r.jsx("span",{children:x.label})]},x.to))})}),r.jsxs("div",{className:"px-2 space-y-1 mb-2",children:[y.map(x=>r.jsxs(so,{to:x.to,onClick:()=>l(!1),className:({isActive:v})=>`flex items-center gap-3 px-4 py-3 rounded-2xl transition-all duration-200 font-medium group ${v?"text-emerald-600 dark:text-emerald-300":"text-gray-500 dark:text-gray-400 hover:bg-emerald-50/50 dark:hover:bg-gray-800/50 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[r.jsx(x.icon,{size:20,className:"flex-shrink-0",strokeWidth:1.8}),r.jsx("span",{children:x.label})]},x.to)),r.jsxs("button",{onClick:()=>{h(),l(!1)},className:"flex items-center gap-3 w-full px-4 py-3 text-gray-500 dark:text-gray-400 hover:bg-red-50 dark:hover:bg-red-900/10 hover:text-red-600 rounded-2xl transition-all duration-200 font-medium",children:[r.jsx(l0,{size:20,strokeWidth:1.8}),r.jsx("span",{children:f("nav_logout")})]})]})]})}),r.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden bg-white dark:bg-background-dark relative z-0",children:[r.jsxs("header",{className:"md:hidden bg-white dark:bg-surface-dark border-b border-gray-200 dark:border-gray-800 px-4 py-3.5 flex items-center justify-between shadow-soft",children:[r.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[r.jsx("span",{className:"w-8 h-8 bg-emerald-600 rounded-lg flex items-center justify-center text-white text-xs",children:"WS"}),r.jsx("span",{className:"text-gray-800 dark:text-white",children:"WhatsSMS"})]}),r.jsx("div",{className:"flex gap-1",children:r.jsx("button",{className:"p-2.5 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400 transition-colors",onClick:()=>l(!0),children:r.jsx(i1,{size:22,strokeWidth:1.75})})})]}),r.jsx("div",{className:"flex-1 overflow-auto p-4 md:p-8",children:r.jsx(T1,{})})]})]})},ef={generateMessage:async(n,s="")=>{try{const l=s.trim()?`You are an expert marketing strategist and copywriter known for creating high-converting WhatsApp campaigns.

The user has **existing content** they want you to **modify, improve, or rewrite** based on their instructions.

**Existing Content:**
"""
${s}
"""

**Your Task:**
Follow the user's instructions to modify the existing content. Keep the same general idea unless they ask you to change it completely.

**Guidelines:**
- Keep changes focused on what the user asks
- Maintain the message structure unless told otherwise
- Use *bold* for emphasis, emojis sparingly
- Make it concise and WhatsApp-appropriate

Output ONLY the improved/modified message text. No explanations.`:`You are an expert marketing strategist and copywriter known for creating high-converting WhatsApp campaigns.
Your goal is to write a powerful, effective marketing message based on the user's request.

**Strategy Guidelines:**
- **One Core Message:** Focus on a single clear value proposition.
- **Direct & Persuasive:** Use simple language. No buzzwords. No filler.
- **Structure:**
    1. **Hook:** Grab attention instantly (first line).
    2. **Value:** Explain the benefit clearly.
    3. **CTA:** One simple, actionable step (e.g., "Reply YES", "Click here").
- **Formatting:** Use *bold* for emphasis. Use emojis sparingly to highlight key points.
- **No Em Dashes.**

**Output Instructions:**
Provide **3 Distinct Variations** of the message to give the user choices:
1.  **Direct & Urgent** (Focus on scarcity or time-sensitivity)
2.  **Benefit-Focused** (Focus on the problem/solution)
3.  **Friendly & Conversational** (Softer tone)

Separate the variations clearly so the user can copy the one they like.`;return(await ce.post("/ai/chat",{messages:[{role:"system",content:l},{role:"user",content:n}]})).content}catch(l){throw console.error("AI Generation Error:",l),l}},getAnalyticsInsights:async(n=[])=>{try{return(await ce.post("/ai/analytics",{campaignIds:n})).insights}catch(s){throw console.error("Error fetching AI analytics:",s),s}},analyzeTemplate:async(n,s)=>{try{return await ce.post("/ai/analyze-template",{templateBody:n,templateName:s})}catch(l){throw console.error("Error analyzing template:",l),l}},chatAssistant:async(n,s="",l="template")=>{try{return(await ce.post("/ai/chat-assistant",{messages:n,currentContent:s,contentType:l})).content}catch(o){throw console.error("AI Chat Assistant Error:",o),o}}},Ek=()=>{const{t:n}=rs(),[s,l]=M.useState(null),[o,c]=M.useState(null),[d,f]=M.useState([]),[h,p]=M.useState([]),[m,y]=M.useState(!1),[x,v]=M.useState(!1),[j,w]=M.useState("all"),[T,z]=M.useState([]),[A,k]=M.useState(!0),[N,E]=M.useState(null),L=ss(),B=()=>{const C=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];if(!(o&&o.totalMessagesSent>0))return C.map(Y=>({name:Y,sent:0,delivered:0,read:0}));const _=o.totalMessagesSent||0,O=o.totalDelivered||0,U=o.totalRead||0;return C.map((Y,te)=>{const F=(te+1)/28;return{name:Y,sent:Math.round(_*F),delivered:Math.round(O*F),read:Math.round(U*F)}})},V=()=>d.slice(0,5).map(C=>({name:C.name.length>10?C.name.substring(0,10)+"...":C.name,delivered:C.statsDelivered||0,read:C.statsRead||0,replied:C.statsReplied||0})),X=async()=>{try{k(!0),E(null);const[C,D,_]=await Promise.all([ce.getContactStats(),ce.getCampaignStats(),ce.getCampaigns({limit:5})]);l(C),c(D),f(_.campaigns||[])}catch(C){E(C.message),console.error("Failed to fetch dashboard data:",C)}finally{k(!1)}};M.useEffect(()=>{X()},[]);const H=async()=>{y(!0);try{const C=j==="select"?T:[],D=await ef.getAnalyticsInsights(C);p(D||[]),v(!1)}catch(C){console.error(C),alert(n("error_analyze_failed")||"Failed to generate insights")}finally{y(!1)}},K=C=>{z(D=>D.includes(C)?D.filter(_=>_!==C):[...D,C])},q=[{label:n("stat_total_campaigns"),value:o?.totalCampaigns??"-",change:n("active_count",{count:o?.activeCampaigns??0}),trend:o?.activeCampaigns>0?"up":"neutral",icon:l1},{label:n("stat_messages_sent"),value:o?.totalMessagesSent?.toLocaleString()??"-",change:n("delivery_rate",{rate:o?.deliveryRate??0}),trend:"up",icon:To},{label:n("stat_total_contacts"),value:s?.total?.toLocaleString()??"-",change:n("this_week",{count:s?.thisWeek??0}),trend:s?.thisWeek>0?"up":"neutral",icon:hn},{label:n("stat_contact_lists"),value:s?.listsCount??"-",change:n("active_lists"),trend:"neutral",icon:xi}],Z=()=>d.slice(0,4).map(C=>({id:C.id,action:`Campaign "${C.name}" ${C.status.toLowerCase().replace("_"," ")}`,time:new Date(C.updatedAt).toLocaleDateString(),type:C.status==="COMPLETED"?"success":C.status==="IN_PROGRESS"?"info":"pending"})),Q=({active:C,payload:D,label:_})=>C&&D&&D.length?r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-xl shadow-lg border border-gray-100 dark:border-gray-800",children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:_}),D.map((O,U)=>r.jsxs("p",{className:"text-xs",style:{color:O.color},children:[O.name,": ",O.value.toLocaleString()]},U))]}):null;return A?r.jsxs("div",{className:"space-y-8 animate-fade-in",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("div",{className:"h-8 w-48 bg-gray-200 dark:bg-gray-800 rounded-lg skeleton"}),r.jsx("div",{className:"h-4 w-64 bg-gray-200 dark:bg-gray-800 rounded-lg mt-2 skeleton"})]})}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[1,2,3,4].map(C=>r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80",children:[r.jsx("div",{className:"h-12 w-12 bg-gray-200 dark:bg-gray-800 rounded-xl skeleton"}),r.jsx("div",{className:"h-4 w-24 bg-gray-200 dark:bg-gray-800 rounded mt-4 skeleton"}),r.jsx("div",{className:"h-8 w-16 bg-gray-200 dark:bg-gray-800 rounded mt-2 skeleton"})]},C))})]}):N?r.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[r.jsx("p",{className:"text-red-500 mb-4",children:N}),r.jsxs("button",{onClick:X,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-xl",children:[r.jsx(Mo,{size:16}),n("btn_refresh")||"Retry"]})]}):r.jsxs("div",{className:"space-y-8 animate-fade-in",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n("dashboard_title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:n("dashboard_subtitle")})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>L("/contacts"),className:"flex items-center gap-2 px-4 py-2.5 bg-white dark:bg-surface-dark border border-gray-200 dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-200 text-sm font-medium shadow-soft card-hover",children:[r.jsx(er,{size:18,className:"icon-gray",strokeWidth:1.75}),r.jsx("span",{children:n("import_contacts")||"Import"})]}),r.jsxs("button",{onClick:()=>L("/campaigns/new"),className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[r.jsx(_a,{size:18,strokeWidth:2}),r.jsx("span",{children:n("btn_new_campaign")})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl p-6 shadow-soft border border-gray-100 dark:border-gray-800/80 relative overflow-hidden animate-slide-up",children:[r.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary/5 dark:bg-primary/10 rounded-full -mr-16 -mt-16 blur-2xl"}),r.jsxs("div",{className:"relative z-10",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center",children:r.jsx(fi,{size:20,className:"text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-semibold",children:n("ai_insights_title")}),r.jsx("p",{className:"text-xs text-gray-400",children:n("ai_insights_subtitle")})]})]}),r.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-2 px-4 py-2 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[r.jsx(fi,{size:14}),h.length>0?n("btn_analyze_again"):n("btn_analyze")]})]}),m?r.jsxs("div",{className:"flex items-center gap-3 py-4 text-gray-600 dark:text-gray-400",children:[r.jsx(an,{size:24,className:"animate-spin text-primary"}),r.jsx("p",{children:n("status_analyzing")})]}):h.length>0?r.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:h.map((C,D)=>r.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-xl border border-gray-100 dark:border-gray-700/50 hover:border-primary/30 transition-colors",children:r.jsx("p",{className:"text-sm leading-relaxed text-gray-700 dark:text-gray-300",children:C})},D))}):r.jsxs("div",{className:"py-6 text-center bg-gray-50 dark:bg-gray-800/30 rounded-xl border border-gray-100 dark:border-gray-700/50 border-dashed",children:[r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"Get AI-powered recommendations to improve your delivery and read rates."}),r.jsx("button",{onClick:()=>v(!0),className:"text-sm text-primary hover:underline font-medium",children:n("btn_start_analysis")})]})]})]}),x&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-[60] flex items-center justify-center p-4 animate-fade-in backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-surface-dark w-full max-w-lg rounded-xl shadow-2xl p-6 border border-gray-100 dark:border-gray-800",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-bold",children:"Configure Analysis"}),r.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(bt,{size:20})})]}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsx("div",{onClick:()=>w("all"),className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${j==="all"?"border-primary bg-primary/5":"border-gray-100 dark:border-gray-800 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${j==="all"?"border-primary":"border-gray-300"}`,children:j==="all"&&r.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Analyze All Data"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Includes all past campaigns"})]})]})}),r.jsxs("div",{onClick:()=>w("select"),className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${j==="select"?"border-primary bg-primary/5":"border-gray-100 dark:border-gray-800 hover:border-gray-300"}`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${j==="select"?"border-primary":"border-gray-300"}`,children:j==="select"&&r.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Select Specific Campaigns"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Compare specific blasts"})]})]}),j==="select"&&r.jsx("div",{className:"pl-8 space-y-2 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:d.map(C=>r.jsxs("div",{onClick:D=>{D.stopPropagation(),K(C.id)},className:"flex items-center gap-3 p-2 hover:bg-gray-100 dark:hover:bg-gray-800/50 rounded-lg cursor-pointer",children:[T.includes(C.id)?r.jsx(o1,{size:18,className:"text-primary"}):r.jsx(Mp,{size:18,className:"text-gray-400"}),r.jsx("span",{className:"text-sm truncate",children:C.name})]},C.id))})]})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium",children:"Cancel"}),r.jsx("button",{onClick:H,disabled:m||j==="select"&&T.length===0,className:"flex items-center gap-2 px-6 py-2 btn-primary text-white rounded-lg font-medium shadow-glow disabled:opacity-50",children:m?r.jsxs(r.Fragment,{children:[r.jsx(an,{size:16,className:"animate-spin"}),r.jsx("span",{children:"Analyzing..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(fi,{size:16}),r.jsx("span",{children:"Generate Insights"})]})})]})]})}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:q.map((C,D)=>r.jsxs("div",{className:`stat-card bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 card-hover animate-slide-up stagger-${D+1}`,style:{opacity:0},children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gray-100 dark:bg-gray-800/80 flex items-center justify-center",children:r.jsx(C.icon,{size:22,className:"icon-gray",strokeWidth:1.75})}),C.trend==="up"&&r.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-2 py-1 rounded-full",children:[r.jsx(o0,{size:12}),r.jsx("span",{children:"Up"})]})]}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium mb-1",children:C.label}),r.jsx("p",{className:"text-3xl font-bold tracking-tight",children:C.value}),r.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:C.change})]},D))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 animate-slide-up stagger-5",style:{opacity:0},children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center",children:r.jsx(c0,{size:20,className:"text-white",strokeWidth:1.75})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:n("chart_message_trends")}),r.jsx("p",{className:"text-xs text-gray-400",children:n("last_7_days")})]})]})}),r.jsx("div",{className:"h-64",children:r.jsx(e0,{width:"100%",height:"100%",children:r.jsxs(Fv,{data:B(),margin:{top:10,right:10,left:-20,bottom:0},children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"colorSent",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),r.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]}),r.jsxs("linearGradient",{id:"colorDelivered",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),r.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]}),r.jsxs("linearGradient",{id:"colorRead",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.3}),r.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]})]}),r.jsx(t0,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),r.jsx(n0,{dataKey:"name",tick:{fontSize:12},stroke:"#9CA3AF"}),r.jsx(a0,{tick:{fontSize:12},stroke:"#9CA3AF"}),r.jsx(s0,{content:r.jsx(Q,{})}),r.jsx(gd,{type:"monotone",dataKey:"sent",stroke:"#10b981",strokeWidth:2,fillOpacity:1,fill:"url(#colorSent)",name:"Sent"}),r.jsx(gd,{type:"monotone",dataKey:"delivered",stroke:"#3b82f6",strokeWidth:2,fillOpacity:1,fill:"url(#colorDelivered)",name:"Delivered"}),r.jsx(gd,{type:"monotone",dataKey:"read",stroke:"#8b5cf6",strokeWidth:2,fillOpacity:1,fill:"url(#colorRead)",name:"Read"})]})})}),r.jsxs("div",{className:"flex justify-center gap-6 mt-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),r.jsx("span",{className:"text-xs text-gray-500",children:n("status_sent")})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),r.jsx("span",{className:"text-xs text-gray-500",children:n("status_delivered")})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),r.jsx("span",{className:"text-xs text-gray-500",children:n("status_read")})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 animate-slide-up stagger-6",style:{opacity:0},children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center",children:r.jsx(Dd,{size:20,className:"text-white",strokeWidth:1.75})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:n("chart_campaign_comparison")}),r.jsx("p",{className:"text-xs text-gray-400",children:n("recent_campaigns")})]})]})}),r.jsx("div",{className:"h-64",children:d.length>0?r.jsx(e0,{width:"100%",height:"100%",children:r.jsxs(Kv,{data:V(),margin:{top:10,right:10,left:-20,bottom:0},children:[r.jsx(t0,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),r.jsx(n0,{dataKey:"name",tick:{fontSize:10},stroke:"#9CA3AF"}),r.jsx(a0,{tick:{fontSize:12},stroke:"#9CA3AF"}),r.jsx(s0,{content:r.jsx(Q,{})}),r.jsx(hd,{dataKey:"delivered",fill:"#10b981",radius:[4,4,0,0],name:"Delivered"}),r.jsx(hd,{dataKey:"read",fill:"#3b82f6",radius:[4,4,0,0],name:"Read"}),r.jsx(hd,{dataKey:"replied",fill:"#f59e0b",radius:[4,4,0,0],name:"Replied"})]})}):r.jsx("div",{className:"h-full flex items-center justify-center",children:r.jsx("p",{className:"text-gray-400 text-sm",children:n("no_campaigns_yet")})})}),r.jsxs("div",{className:"flex justify-center gap-6 mt-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),r.jsx("span",{className:"text-xs text-gray-500",children:n("status_delivered")})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),r.jsx("span",{className:"text-xs text-gray-500",children:n("status_read")})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),r.jsx("span",{className:"text-xs text-gray-500",children:n("status_replied")})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 animate-slide-up stagger-7",style:{opacity:0},children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-800/80 flex items-center justify-center",children:r.jsx(o0,{size:20,className:"icon-gray",strokeWidth:1.75})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:n("performance_overview")}),r.jsx("p",{className:"text-xs text-gray-400",children:n("performance_subtitle")})]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"text-center p-4 bg-emerald-50 dark:bg-emerald-900/10 rounded-xl border border-emerald-100 dark:border-emerald-900/20",children:[r.jsx("p",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:o?.totalDelivered?.toLocaleString()??0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n("status_delivered")})]}),r.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/10 rounded-xl border border-blue-100 dark:border-blue-900/20",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:o?.totalRead?.toLocaleString()??0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n("status_read")})]}),r.jsxs("div",{className:"text-center p-4 bg-amber-50 dark:bg-amber-900/10 rounded-xl border border-amber-100 dark:border-amber-900/20",children:[r.jsx("p",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:o?.totalReplied?.toLocaleString()??0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n("status_replied")})]}),r.jsxs("div",{className:"text-center p-4 bg-red-50 dark:bg-red-900/10 rounded-xl border border-red-100 dark:border-red-900/20",children:[r.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:o?.totalFailed?.toLocaleString()??0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n("status_failed")})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-gray-500",children:n("rate_delivery")}),r.jsxs("span",{className:"font-semibold text-emerald-600",children:[o?.deliveryRate??0,"%"]})]}),r.jsx("div",{className:"h-3 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-emerald-600 rounded-full transition-all duration-700 ease-out",style:{width:`${o?.deliveryRate??0}%`}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-gray-500",children:n("rate_read")}),r.jsxs("span",{className:"font-semibold text-blue-600",children:[o?.readRate??0,"%"]})]}),r.jsx("div",{className:"h-3 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-700 ease-out",style:{width:`${o?.readRate??0}%`}})})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 animate-slide-up stagger-8",style:{opacity:0},children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-800/80 flex items-center justify-center",children:r.jsx(c0,{size:20,className:"icon-gray",strokeWidth:1.75})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:n("recent_campaigns_title")}),r.jsx("p",{className:"text-xs text-gray-400",children:n("latest_updates")})]})]}),r.jsx("div",{className:"space-y-4",children:Z().length>0?Z().map(C=>r.jsxs("div",{className:"flex items-start gap-3 group",children:[r.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${C.type==="success"?"bg-emerald-500":C.type==="pending"?"bg-amber-500":"bg-primary"}`}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 truncate group-hover:text-gray-900 dark:group-hover:text-white transition-colors",children:C.action}),r.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:C.time})]})]},C.id)):r.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:n("no_campaigns_yet")})}),r.jsxs("button",{onClick:()=>L("/campaigns"),className:"w-full mt-6 py-2.5 text-sm text-primary font-medium hover:bg-emerald-50 dark:hover:bg-emerald-900/10 rounded-lg transition-colors flex items-center justify-center gap-1",children:[n("btn_view_all_campaigns"),r.jsx(c1,{size:14})]})]})]})]})},zk=({onClose:n,onSuccess:s})=>{const{t:l}=rs(),[o,c]=M.useState(!1),[d,f]=M.useState(null),[h,p]=M.useState(!1),[m,y]=M.useState(null),[x,v]=M.useState(null),j=M.useCallback(k=>{k.preventDefault(),k.stopPropagation(),k.type==="dragenter"||k.type==="dragover"?c(!0):k.type==="dragleave"&&c(!1)},[]),w=M.useCallback(k=>{if(k.preventDefault(),k.stopPropagation(),c(!1),k.dataTransfer.files&&k.dataTransfer.files[0]){const N=k.dataTransfer.files[0];N.type==="text/csv"||N.name.endsWith(".csv")?(f(N),y(null)):y("Please upload a valid CSV file.")}},[]),T=k=>{k.preventDefault(),k.target.files&&k.target.files[0]&&(f(k.target.files[0]),y(null))},z=async()=>{if(d){p(!0),y(null);try{const k=await ce.importContacts(d);v(k),s&&s()}catch(k){y(k.message||"Failed to upload file")}finally{p(!1)}}},A=()=>{f(null),v(null),y(null)};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-surface-dark w-full max-w-md rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-800 overflow-hidden animate-slide-up",children:[r.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-800 flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-bold",children:l("import_contacts_title")}),r.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:r.jsx(bt,{size:20,className:"text-gray-500"})})]}),r.jsx("div",{className:"p-6",children:x?r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center mx-auto mb-4 animate-scale-in",children:r.jsx(gn,{size:32,strokeWidth:3})}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:l("import_complete")}),r.jsxs("div",{className:"flex justify-center gap-8 my-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:x.imported}),r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:l("imported_count")})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:x.skipped}),r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:l("skipped_count")})]})]}),x.errors&&x.errors.length>0&&r.jsxs("div",{className:"text-left bg-gray-50 dark:bg-gray-800/50 rounded-lg p-3 mb-6 max-h-32 overflow-y-auto text-xs text-gray-600 dark:text-gray-400",children:[r.jsx("p",{className:"font-medium mb-1",children:l("errors_label")}),r.jsx("ul",{className:"list-disc pl-4 space-y-1",children:x.errors.map((k,N)=>r.jsx("li",{children:k},N))})]}),r.jsxs("div",{className:"flex justify-center gap-3",children:[r.jsx("button",{onClick:A,className:"px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:l("import_more")}),r.jsx("button",{onClick:n,className:"px-6 py-2 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:l("done")})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:`relative border-2 border-dashed rounded-xl p-8 text-center transition-all duration-200 ${o?"border-primary bg-emerald-50 dark:bg-emerald-900/10":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onDragEnter:j,onDragLeave:j,onDragOver:j,onDrop:w,children:[r.jsx("input",{type:"file",accept:".csv",onChange:T,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:h}),d?r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center mb-3",children:r.jsx(dr,{size:24})}),r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:d.name}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[(d.size/1024).toFixed(1)," KB"]})]}):r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-800 text-gray-400 rounded-full flex items-center justify-center mb-3",children:r.jsx(er,{size:24})}),r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:l("drag_drop_csv")}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:l("csv_columns")})]})]}),m&&r.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg flex items-center gap-2",children:[r.jsx(ka,{size:16}),r.jsx("span",{children:m})]}),r.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[r.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:l("cancel")}),r.jsx("button",{onClick:z,disabled:!d||h,className:`flex items-center gap-2 px-6 py-2 rounded-xl text-sm font-medium text-white transition-all ${!d||h?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed":"btn-primary shadow-glow hover:-translate-y-0.5"}`,children:h?r.jsxs(r.Fragment,{children:[r.jsx(an,{size:16,className:"animate-spin"}),l("importing")]}):l("import_button")})]})]})})]})})},Ak=()=>{const{t:n}=rs(),s=Lo(),[l,o]=M.useState([]),[c,d]=M.useState(null),[f,h]=M.useState([]),[p,m]=M.useState(""),[y,x]=M.useState(!0),[v,j]=M.useState(null),[w,T]=M.useState(""),[z,A]=M.useState({page:1,limit:20,total:0,totalPages:1}),[k,N]=M.useState(!1),[E,L]=M.useState(!1),[B,V]=M.useState(!1),[X,H]=M.useState({name:"",phone:"",interests:"",tags:""}),[K,q]=M.useState(!1),[Z,Q]=M.useState(!1),C=M.useRef(null),D=ar.useCallback(async(F=1,P="",se="")=>{try{x(!0),j(null);const le={page:F,limit:z.limit};P&&(le.search=P),se&&(le.tag=se);const[fe,be,he]=await Promise.all([ce.getContacts(le),ce.getContactStats(),ce.getContactTags()]);o(fe.contacts||[]),A(fe.pagination||{page:1,limit:20,total:0,totalPages:1}),d(be),h(he.tags||[])}catch(le){j(le.message)}finally{x(!1)}},[z.limit]);M.useEffect(()=>{D()},[D]),M.useEffect(()=>(C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{D(1,w,p)},300),()=>clearTimeout(C.current)),[w,p,D]);const _=async F=>{F.preventDefault(),q(!0);try{const P=X.interests.split(",").map(le=>le.trim()).filter(le=>le),se=X.tags.split(",").map(le=>le.trim()).filter(le=>le);await ce.createContact({name:X.name,phone:X.phone,interests:P,tags:se}),N(!1),H({name:"",phone:"",interests:"",tags:""}),D(z.page,w,p),s.success("Contact added successfully!")}catch(P){s.error(P.message)}finally{q(!1)}},O=async F=>{if(confirm("Are you sure you want to delete this contact?"))try{await ce.deleteContact(F),D(z.page,w,p),s.success("Contact deleted")}catch(P){s.error(P.message)}},U=F=>{F>=1&&F<=z.totalPages&&D(F,w,p)},Y=async()=>{Q(!0);try{const F=await ce.fetchWhatsAppContacts();D(1,w,p),F.imported>0?s.success(`Imported ${F.imported} new contacts from WhatsApp!`):s.info(F.message||"No new contacts to import")}catch(F){s.error(F.message||"Failed to fetch WhatsApp contacts")}finally{Q(!1)}},te=F=>{m(F),V(!1)};return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n("contacts_title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:n("contacts_subtitle")})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:Y,disabled:Z,className:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl text-sm font-medium shadow-glow card-hover disabled:opacity-50",children:[Z?r.jsx(an,{size:18,className:"animate-spin"}):r.jsx(Dp,{size:18}),r.jsx("span",{children:n(Z?"loading":"btn_fetch_whatsapp")})]}),r.jsxs("button",{onClick:()=>L(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-white dark:bg-surface-dark border border-gray-200 dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-200 text-sm font-medium shadow-soft card-hover",children:[r.jsx(er,{size:18,className:"icon-gray",strokeWidth:1.75}),r.jsx("span",{children:n("btn_import_csv")})]}),r.jsxs("button",{onClick:()=>N(!0),className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[r.jsx(_a,{size:18,strokeWidth:2}),r.jsx("span",{children:n("btn_add_contact")})]})]})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:n("stat_total_contacts"),value:c?.total?.toLocaleString()??"-"},{label:n("stat_active_lists"),value:c?.listsCount??"-"},{label:n("stat_new_this_week"),value:c?.thisWeek??"-"},{label:n("label_showing"),value:`${l.length} of ${z.total}`}].map((F,P)=>r.jsxs("div",{className:"bg-white dark:bg-surface-dark px-4 py-3 rounded-xl border border-gray-100 dark:border-gray-800/80 shadow-soft",children:[r.jsx("p",{className:"text-xs text-gray-400 font-medium",children:F.label}),r.jsx("p",{className:"text-xl font-bold mt-0.5",children:F.value})]},P))}),r.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800/80 flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Id,{className:"absolute left-4 top-1/2 -translate-y-1/2 icon-gray",size:18,strokeWidth:1.75}),r.jsx("input",{type:"text",placeholder:n("placeholder_search_contacts"),value:w,onChange:F=>T(F.target.value),className:"w-full pl-11 pr-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 focus:border-primary outline-none transition-all text-sm text-gray-900 dark:text-white placeholder:text-gray-400"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>V(!B),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl transition-colors text-sm font-medium border ${p?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-600":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:[r.jsx(Do,{size:16,strokeWidth:1.75}),r.jsx("span",{children:p||n("btn_filter_tag")}),r.jsx(Ei,{size:14})]}),B&&r.jsxs("div",{className:"absolute top-full left-0 mt-2 w-48 bg-white dark:bg-surface-dark rounded-xl shadow-lg border border-gray-100 dark:border-gray-800 z-50 py-2 max-h-60 overflow-y-auto",children:[r.jsx("button",{onClick:()=>te(""),className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800 ${p?"text-gray-700 dark:text-gray-300":"text-emerald-600 font-medium"}`,children:n("label_all_contacts")}),f.map(F=>r.jsx("button",{onClick:()=>te(F),className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800 ${p===F?"text-emerald-600 font-medium":"text-gray-700 dark:text-gray-300"}`,children:F},F)),f.length===0&&r.jsx("p",{className:"px-4 py-2 text-xs text-gray-400",children:"No tags created yet"})]})]}),r.jsxs("button",{onClick:()=>D(z.page,w,p),className:"flex items-center gap-2 px-4 py-2.5 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-sm font-medium border border-gray-200 dark:border-gray-700",children:[r.jsx(Mo,{size:16,className:"icon-gray",strokeWidth:1.75}),r.jsx("span",{children:n("btn_refresh")})]})]}),v&&r.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800 flex items-center gap-3 text-red-700 dark:text-red-400",children:[r.jsx(ka,{size:18}),r.jsx("span",{children:v}),r.jsx("button",{onClick:()=>D(),className:"ml-auto text-sm underline",children:"Retry"})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-background-dark text-gray-500 dark:text-gray-400 text-xs uppercase tracking-wider font-semibold",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-semibold",children:n("col_contact")}),r.jsx("th",{className:"px-6 py-4 font-semibold",children:n("col_phone")}),r.jsx("th",{className:"px-6 py-4 font-semibold",children:n("col_tags")}),r.jsx("th",{className:"px-6 py-4 font-semibold",children:n("col_lists")}),r.jsx("th",{className:"px-6 py-4 text-right font-semibold",children:n("col_actions")})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800/80",children:y?[...Array(5)].map((F,P)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"h-10 w-40 bg-gray-200 dark:bg-gray-800 rounded skeleton"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"h-4 w-32 bg-gray-200 dark:bg-gray-800 rounded skeleton"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"h-6 w-20 bg-gray-200 dark:bg-gray-800 rounded skeleton"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"h-6 w-24 bg-gray-200 dark:bg-gray-800 rounded skeleton"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"h-4 w-8 bg-gray-200 dark:bg-gray-800 rounded skeleton ml-auto"})})]},P)):l.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-400",children:w?"No contacts found matching your search":"No contacts yet. Add your first contact!"})}):l.map(F=>r.jsxs("tr",{className:"table-row-hover group",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center text-primary font-semibold text-sm",children:F.name.split(" ").map(P=>P[0]).join("").slice(0,2)}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:F.name}),r.jsxs("p",{className:"text-xs text-gray-400",children:["ID: ",F.id]})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:"text-gray-600 dark:text-gray-300 font-mono text-sm flex items-center gap-2",children:[r.jsx(u1,{size:14,className:"icon-gray",strokeWidth:1.75}),F.phone]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[(F.tags||[]).slice(0,3).map((P,se)=>r.jsx("span",{className:"px-2.5 py-1 text-xs rounded-lg bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 font-medium",children:P},se)),(F.tags||[]).length>3&&r.jsxs("span",{className:"px-2 py-1 text-xs text-gray-400",children:["+",F.tags.length-3]}),(F.tags||[]).length===0&&r.jsx("span",{className:"text-xs text-gray-400",children:"No tags"})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[(F.lists||[]).slice(0,2).map((P,se)=>r.jsx("span",{className:"px-2.5 py-1 text-xs rounded-lg bg-gray-100 dark:bg-gray-800/80 text-gray-600 dark:text-gray-300 font-medium",children:P.name},se)),(F.lists||[]).length>2&&r.jsxs("span",{className:"px-2 py-1 text-xs text-gray-400",children:["+",F.lists.length-2]})]})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsx("button",{onClick:()=>O(F.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:r.jsx(bt,{size:18,strokeWidth:1.75})})})]},F.id))})]})}),z.totalPages>1&&r.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 dark:border-gray-800/80 flex items-center justify-between",children:[r.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",(z.page-1)*z.limit+1,"-",Math.min(z.page*z.limit,z.total)," of ",z.total]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>U(z.page-1),disabled:z.page<=1,className:"px-3 py-1.5 text-sm rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 transition-colors disabled:opacity-50",children:"Previous"}),[...Array(Math.min(5,z.totalPages))].map((F,P)=>{const se=P+1;return r.jsx("button",{onClick:()=>U(se),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${z.page===se?"bg-primary text-white":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500"}`,children:se},se)}),r.jsx("button",{onClick:()=>U(z.page+1),disabled:z.page>=z.totalPages,className:"px-3 py-1.5 text-sm rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 transition-colors disabled:opacity-50",children:"Next"})]})]})]}),k&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl shadow-xl max-w-md w-full p-6 animate-slide-up",style:{opacity:0,animationDelay:"0s"},children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Add Contact"}),r.jsx("button",{onClick:()=>N(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:r.jsx(bt,{size:20})})]}),r.jsxs("form",{onSubmit:_,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Name *"}),r.jsx("input",{type:"text",value:X.name,onChange:F=>H({...X,name:F.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none text-gray-900 dark:text-white placeholder:text-gray-400",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone *"}),r.jsx("input",{type:"text",value:X.phone,onChange:F=>H({...X,phone:F.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"+1234567890",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Interests (comma-separated)"}),r.jsx("input",{type:"text",value:X.interests,onChange:F=>H({...X,interests:F.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"marketing, sales"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tags (comma-separated)"}),r.jsx("input",{type:"text",value:X.tags,onChange:F=>H({...X,tags:F.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"VIP, Hot Lead"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Use tags to segment your contacts"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>N(!1),className:"flex-1 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl font-medium",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:K,className:"flex-1 py-2.5 btn-primary text-white rounded-xl font-medium disabled:opacity-50",children:K?"Saving...":"Add Contact"})]})]})]})}),E&&r.jsx(zk,{onClose:()=>L(!1),onSuccess:()=>{D(1,"")}})]})},Tk=()=>{const n=Lo(),[s,l]=M.useState([]),[o,c]=M.useState(!0),[d,f]=M.useState(null),[h,p]=M.useState([]),[m,y]=M.useState(!1),[x,v]=M.useState(!1),[j,w]=M.useState(!1),[T,z]=M.useState(!1),[A,k]=M.useState({name:"",description:""}),[N,E]=M.useState([]),[L,B]=M.useState([]),[V,X]=M.useState(""),[H,K]=M.useState(!1),[q,Z]=M.useState([]),[Q,C]=M.useState(""),[D,_]=M.useState(""),[O,U]=M.useState(!1),Y=ar.useCallback(async()=>{try{c(!0);const ie=await ce.getLists();l(ie.lists||[])}catch{n.error("Failed to load lists")}finally{c(!1)}},[n]),te=ar.useCallback(async ie=>{try{y(!0);const ye=await ce.getList(ie);p(ye.members||[])}catch{n.error("Failed to load list members")}finally{y(!1)}},[n]),F=async()=>{try{const[ie,ye]=await Promise.all([ce.getContacts({limit:500}),ce.getContactTags()]);E(ie.contacts||[]),B(ye.tags||[])}catch{n.error("Failed to load contacts")}};M.useEffect(()=>{Y()},[Y]),M.useEffect(()=>{d&&te(d.id)},[d,te]);const P=async ie=>{ie.preventDefault(),U(!0);try{await ce.createList(A),n.success("List created successfully!"),v(!1),k({name:"",description:""}),Y()}catch{n.error(err.message)}finally{U(!1)}},se=async ie=>{if(confirm("Are you sure you want to delete this list?"))try{await ce.deleteList(ie),n.success("List deleted"),d?.id===ie&&(f(null),p([])),Y()}catch{n.error(err.message)}},le=async()=>{if(q.length===0){n.warning("Select at least one contact");return}U(!0);try{const ie=await ce.addContactsToList(d.id,q);n.success(`Added ${ie.added} contacts, ${ie.skipped} already in list`),w(!1),Z([]),te(d.id),Y()}catch{n.error(err.message)}finally{U(!1)}},fe=async()=>{if(!D){n.warning("Select a source list");return}U(!0);try{const ye=(await ce.getList(D)).members.map(Ye=>Ye.id);if(ye.length===0){n.info("Source list is empty"),U(!1);return}const Se=await ce.addContactsToList(d.id,ye);n.success(`Added ${Se.added} contacts from list, ${Se.skipped} already present`),z(!1),_(""),te(d.id),Y()}catch{n.error(err.message)}finally{U(!1)}},be=async ie=>{try{await ce.removeContactFromList(d.id,ie),n.success("Contact removed from list"),te(d.id),Y()}catch{n.error(err.message)}},he=()=>{F(),Z([]),C(""),X(""),K(!1),w(!0)},oe=ie=>{Z(ye=>ye.includes(ie)?ye.filter(Se=>Se!==ie):[...ye,ie])},ue=N.filter(ie=>{const ye=ie.name.toLowerCase().includes(Q.toLowerCase())||ie.phone.includes(Q),Se=!V||ie.tags&&ie.tags.includes(V);return ye&&Se}),_e=ue.filter(ie=>!h.some(ye=>ye.id===ie.id)),we=()=>{const ie=_e.map(ye=>ye.id);Z(ye=>{const Se=new Set(ye);return ie.forEach(Ye=>Se.add(Ye)),Array.from(Se)})},xe=()=>{Z([])},Ne=s.filter(ie=>ie.id!==d?.id);return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Contact Lists"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Organize your contacts into targeted lists"})]}),r.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[r.jsx(_a,{size:18,strokeWidth:2}),r.jsx("span",{children:"Create List"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-soft border border-gray-100 dark:border-gray-800/80 overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800/80 flex items-center justify-between",children:[r.jsx("h3",{className:"font-semibold",children:"Your Lists"}),r.jsx("button",{onClick:Y,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:r.jsx(Mo,{size:16,className:"icon-gray"})})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto",children:o?r.jsx("div",{className:"p-4 space-y-3",children:[1,2,3].map(ie=>r.jsx("div",{className:"h-16 bg-gray-100 dark:bg-gray-800 rounded-xl skeleton"},ie))}):s.length===0?r.jsx("p",{className:"p-4 text-center text-gray-400",children:"No lists yet. Create your first list!"}):r.jsx("div",{className:"p-2",children:s.map(ie=>r.jsxs("button",{onClick:()=>f(ie),className:`w-full text-left p-3 rounded-xl transition-all mb-1 ${d?.id===ie.id?"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800":"hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center",children:r.jsx(hn,{size:18,className:"text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:ie.name}),r.jsxs("p",{className:"text-xs text-gray-400",children:[ie.memberCount," contacts"]})]})]}),r.jsx("button",{onClick:ye=>{ye.stopPropagation(),se(ie.id)},className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg opacity-0 group-hover:opacity-100 transition-all",children:r.jsx(sn,{size:14})})]}),ie.description&&r.jsx("p",{className:"text-xs text-gray-400 mt-1 pl-13",children:ie.description})]},ie.id))})})]}),r.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-surface-dark rounded-2xl shadow-soft border border-gray-100 dark:border-gray-800/80 overflow-hidden",children:d?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800/80 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:d.name}),r.jsxs("p",{className:"text-xs text-gray-400",children:[d.memberCount," contacts"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>z(!0),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-xl transition-colors",children:[r.jsx(hn,{size:16}),"From List"]}),r.jsxs("button",{onClick:he,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium btn-primary text-white rounded-xl",children:[r.jsx(u0,{size:16}),"Add Contacts"]})]})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto",children:m?r.jsx("div",{className:"p-4 space-y-2",children:[1,2,3,4].map(ie=>r.jsx("div",{className:"h-14 bg-gray-100 dark:bg-gray-800 rounded-xl skeleton"},ie))}):h.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-60 text-gray-400",children:[r.jsx(u0,{size:40,strokeWidth:1,className:"mb-3 opacity-50"}),r.jsx("p",{children:"This list is empty"}),r.jsx("p",{className:"text-sm",children:"Add contacts to get started"})]}):r.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-800/80",children:h.map(ie=>r.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center text-primary font-semibold text-sm",children:ie.name.split(" ").map(ye=>ye[0]).join("").slice(0,2)}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:ie.name}),r.jsx("p",{className:"text-xs text-gray-400",children:ie.phone})]})]}),r.jsx("button",{onClick:()=>be(ie.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:r.jsx(bt,{size:16})})]},ie.id))})})]}):r.jsxs("div",{className:"flex flex-col items-center justify-center h-80 text-gray-400",children:[r.jsx(hn,{size:48,strokeWidth:1,className:"mb-4 opacity-50"}),r.jsx("p",{className:"text-lg font-medium",children:"Select a list"}),r.jsx("p",{className:"text-sm",children:"Choose a list from the sidebar to view its contacts"})]})})]}),x&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-xl max-w-md w-full p-6 animate-slide-up",style:{opacity:0},children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Create New List"}),r.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:r.jsx(bt,{size:20})})]}),r.jsxs("form",{onSubmit:P,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"List Name *"}),r.jsx("input",{type:"text",value:A.name,onChange:ie=>k({...A,name:ie.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none",placeholder:"e.g. VIP Customers",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),r.jsx("textarea",{value:A.description,onChange:ie=>k({...A,description:ie.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none resize-none",rows:3,placeholder:"Optional description..."})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>v(!1),className:"flex-1 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl font-medium",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:O,className:"flex-1 py-2.5 btn-primary text-white rounded-xl font-medium disabled:opacity-50",children:O?"Creating...":"Create List"})]})]})]})}),j&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-xl max-w-lg w-full p-6 animate-slide-up max-h-[80vh] flex flex-col",style:{opacity:0},children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h2",{className:"text-xl font-bold",children:["Add Contacts to ",d?.name]}),r.jsx("button",{onClick:()=>w(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:r.jsx(bt,{size:20})})]}),r.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:[q.length," selected"]}),r.jsxs("div",{className:"flex gap-2 mb-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Id,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),r.jsx("input",{type:"text",placeholder:"Search contacts...",value:Q,onChange:ie=>C(ie.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>K(!H),className:`flex items-center gap-2 px-3 py-2.5 rounded-xl border transition-colors ${V?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-600":"border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[r.jsx(Do,{size:16}),r.jsx("span",{className:"text-sm",children:V||"Tag"}),r.jsx(Ei,{size:14})]}),H&&r.jsxs("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white dark:bg-surface-dark rounded-xl shadow-lg border border-gray-100 dark:border-gray-800 z-50 py-2 max-h-48 overflow-y-auto",children:[r.jsx("button",{onClick:()=>{X(""),K(!1)},className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800 ${V?"":"text-emerald-600 font-medium"}`,children:"All Tags"}),L.map(ie=>r.jsx("button",{onClick:()=>{X(ie),K(!1)},className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800 ${V===ie?"text-emerald-600 font-medium":""}`,children:ie},ie)),L.length===0&&r.jsx("p",{className:"px-4 py-2 text-xs text-gray-400",children:"No tags"})]})]})]}),r.jsxs("div",{className:"flex gap-2 mb-3",children:[r.jsxs("button",{onClick:we,disabled:_e.length===0,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium bg-blue-50 dark:bg-blue-900/20 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(Op,{size:14}),"Add All (",_e.length,")"]}),q.length>0&&r.jsxs("button",{onClick:xe,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:[r.jsx(bt,{size:14}),"Clear"]}),r.jsxs("span",{className:"ml-auto text-xs text-gray-400",children:["Showing ",ue.length," contacts"]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto border border-gray-100 dark:border-gray-800 rounded-xl divide-y divide-gray-100 dark:divide-gray-800/80 max-h-60",children:ue.length===0?r.jsx("p",{className:"p-4 text-center text-gray-400",children:"No contacts found"}):ue.map(ie=>{const ye=q.includes(ie.id),Se=h.some(Ye=>Ye.id===ie.id);return r.jsxs("button",{onClick:()=>!Se&&oe(ie.id),disabled:Se,className:`w-full flex items-center justify-between p-3 transition-colors ${Se?"opacity-50 cursor-not-allowed":ye?"bg-emerald-50 dark:bg-emerald-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center text-primary text-xs font-semibold",children:ie.name.split(" ").map(Ye=>Ye[0]).join("").slice(0,2)}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-medium text-sm",children:ie.name}),r.jsx("p",{className:"text-xs text-gray-400",children:ie.phone})]})]}),Se?r.jsx("span",{className:"text-xs text-gray-400",children:"Already in list"}):ye?r.jsx("div",{className:"w-5 h-5 rounded-full bg-emerald-500 flex items-center justify-center",children:r.jsx(gn,{size:12,className:"text-white"})}):r.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300"})]},ie.id)})}),r.jsxs("div",{className:"flex gap-3 pt-4 mt-4 border-t border-gray-100 dark:border-gray-800",children:[r.jsx("button",{onClick:()=>w(!1),className:"flex-1 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl font-medium",children:"Cancel"}),r.jsx("button",{onClick:le,disabled:O||q.length===0,className:"flex-1 py-2.5 btn-primary text-white rounded-xl font-medium disabled:opacity-50",children:O?"Adding...":`Add ${q.length} Contact${q.length!==1?"s":""}`})]})]})}),T&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-xl max-w-md w-full p-6 animate-slide-up",style:{opacity:0},children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Copy From Another List"}),r.jsx("button",{onClick:()=>z(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:r.jsx(bt,{size:20})})]}),r.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["All contacts from the selected list will be copied to ",r.jsx("strong",{children:d?.name})]}),r.jsx("div",{className:"space-y-2 mb-6",children:Ne.length===0?r.jsx("p",{className:"text-center text-gray-400 py-4",children:"No other lists available"}):Ne.map(ie=>r.jsxs("button",{onClick:()=>_(ie.id.toString()),className:`w-full flex items-center justify-between p-3 rounded-xl transition-all ${D===ie.id.toString()?"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800":"border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(hn,{size:18,className:"text-gray-400"}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-medium",children:ie.name}),r.jsxs("p",{className:"text-xs text-gray-400",children:[ie.memberCount," contacts"]})]})]}),D===ie.id.toString()&&r.jsx("div",{className:"w-5 h-5 rounded-full bg-emerald-500 flex items-center justify-center",children:r.jsx(gn,{size:12,className:"text-white"})})]},ie.id))}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>z(!1),className:"flex-1 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl font-medium",children:"Cancel"}),r.jsx("button",{onClick:fe,disabled:O||!D,className:"flex-1 py-2.5 btn-primary text-white rounded-xl font-medium disabled:opacity-50",children:O?"Copying...":"Copy Contacts"})]})]})})]})},Mk=()=>{const[n,s]=M.useState(""),[l,o]=M.useState(""),[c,d]=M.useState(!1),[f,h]=M.useState(""),[p,m]=M.useState(!1),y=ss(),x=qp(),{login:v,register:j,isAuthenticated:w}=Pd();ar.useEffect(()=>{if(w){const z=x.state?.from?.pathname||"/";y(z,{replace:!0})}},[w,y,x]);const T=async z=>{z.preventDefault(),h(""),d(!0);try{p?await j(n,l):await v(n,l);const A=x.state?.from?.pathname||"/";y(A,{replace:!0})}catch(A){h(A.message||"An error occurred")}finally{d(!1)}};return r.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background-light via-white to-emerald-50 dark:from-background-dark dark:via-surface-dark dark:to-background-dark transition-colors duration-300 p-4",children:[r.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[r.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary/5 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-accent/5 rounded-full blur-3xl"})]}),r.jsxs("div",{className:"relative w-full max-w-md animate-slide-up",style:{opacity:0,animationDelay:"0.1s"},children:[r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-8 md:p-10 rounded-3xl shadow-soft border border-gray-100 dark:border-gray-800/80",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-2xl flex items-center justify-center mx-auto mb-5",children:r.jsx(d1,{size:28,className:"icon-gray",strokeWidth:1.5})}),r.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:p?"Create Account":"Welcome Back"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:p?"Sign up to start managing campaigns":"Sign in to manage your campaigns"})]}),f&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-center gap-3 text-red-700 dark:text-red-400",children:[r.jsx(ka,{size:20}),r.jsx("span",{className:"text-sm",children:f})]}),r.jsxs("form",{onSubmit:T,className:"space-y-5",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Username"}),r.jsxs("div",{className:"relative",children:[r.jsx(f1,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 icon-gray",strokeWidth:1.75}),r.jsx("input",{type:"text",value:n,onChange:z=>s(z.target.value),className:"w-full pl-11 pr-4 py-3.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none transition-all text-base text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"Enter your username",required:!0,autoComplete:"username"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(g1,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 icon-gray",strokeWidth:1.75}),r.jsx("input",{type:"password",value:l,onChange:z=>o(z.target.value),className:"w-full pl-11 pr-4 py-3.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none transition-all text-base text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:p?"Create a password (min 6 chars)":"Enter your password",required:!0,minLength:p?6:void 0,autoComplete:p?"new-password":"current-password"})]})]}),r.jsx("button",{type:"submit",disabled:c,className:"w-full py-3.5 px-4 btn-primary text-white font-semibold rounded-xl shadow-glow transition-all flex items-center justify-center gap-2 disabled:opacity-70",children:c?r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx("span",{children:p?"Create Account":"Sign In"}),r.jsx(h1,{size:18,strokeWidth:2})]})})]}),r.jsxs("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mt-8",children:[p?"Already have an account?":"Don't have an account?"," ",r.jsx("button",{onClick:()=>{m(!p),h("")},className:"text-primary hover:underline font-medium",children:p?"Sign In":"Create one"})]})]}),r.jsxs("p",{className:"text-center text-xs text-gray-400 mt-6",children:[r.jsx("span",{className:"gradient-text font-semibold",children:"WhatsSMS"}),"  WhatsApp Marketing Platform"]})]})]})},ax=({currentContent:n="",onApplyText:s,contentType:l="template"})=>{const[o,c]=M.useState([]),[d,f]=M.useState(""),[h,p]=M.useState(!1),[m,y]=M.useState(null),[x,v]=M.useState(!1),j=M.useRef(null),w=M.useRef(null),T=[{label:" Analyze my text",prompt:"Analyze my current text and give feedback"},{label:" Make it shorter",prompt:"Make my current text shorter and more concise"},{label:" Add emojis",prompt:"Add relevant emojis to my current text"},{label:" Improve CTA",prompt:"Improve the call-to-action in my text"}],z=L=>L.split(/(\*\*[^*]+\*\*)/g).map((V,X)=>V.startsWith("**")&&V.endsWith("**")?r.jsx("strong",{className:"font-semibold",children:V.slice(2,-2)},X):V);M.useEffect(()=>{j.current?.scrollIntoView({behavior:"smooth"})},[o]),M.useEffect(()=>{x||w.current?.focus()},[x]);const A=async(L=null)=>{const B=L||d.trim();if(!B||h)return;const V={role:"user",content:B};c(X=>[...X,V]),f(""),p(!0);try{const X=[...o,V],H=await ef.chatAssistant(X,n,l);c(K=>[...K,{role:"assistant",content:H}])}catch{c(X=>[...X,{role:"assistant",content:"Sorry, I encountered an error. Please try again.",isError:!0}])}finally{p(!1)}},k=async(L,B)=>{try{await navigator.clipboard.writeText(L),y(B),setTimeout(()=>y(null),2e3)}catch(V){console.error("Failed to copy:",V)}},N=L=>{s&&s(L)},E=L=>{L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),A())};return x?r.jsxs("button",{onClick:()=>v(!1),className:"w-full flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl text-sm font-medium hover:opacity-90 transition-opacity",children:[r.jsx(pd,{size:16}),r.jsx("span",{children:"AI Assistant"}),r.jsx(m1,{size:16})]}):r.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-surface-dark rounded-xl border border-gray-200 dark:border-gray-800 overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-800 bg-gradient-to-r from-emerald-500/10 to-teal-600/10",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-emerald-500 to-teal-600 flex items-center justify-center",children:r.jsx(fi,{size:16,className:"text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-sm",children:"AI Assistant"}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Ask me anything about your ",l]})]})]}),r.jsx("button",{onClick:()=>v(!0),className:"p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:r.jsx(Ei,{size:18})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{minHeight:"200px"},children:o.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-emerald-500/20 to-teal-600/20 flex items-center justify-center mb-3",children:r.jsx(pd,{size:24,className:"text-emerald-500"})}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["Hi! I can help you write, edit, or analyze your ",l,"."]}),r.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:T.map((L,B)=>r.jsx("button",{onClick:()=>A(L.prompt),disabled:h,className:"px-3 py-1.5 text-xs bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors disabled:opacity-50",children:L.label},B))})]}):r.jsxs(r.Fragment,{children:[o.map((L,B)=>r.jsx("div",{className:`flex ${L.role==="user"?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[85%] rounded-2xl px-4 py-2.5 ${L.role==="user"?"bg-primary text-white rounded-br-md":L.isError?"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded-bl-md":"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-bl-md"}`,children:[r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:L.role==="assistant"?z(L.content):L.content}),L.role==="assistant"&&!L.isError&&r.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("button",{onClick:()=>k(L.content,B),className:"flex items-center gap-1 text-xs text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:m===B?r.jsxs(r.Fragment,{children:[r.jsx(gn,{size:12,className:"text-green-500"}),r.jsx("span",{className:"text-green-500",children:"Copied!"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Jd,{size:12}),r.jsx("span",{children:"Copy"})]})}),s&&r.jsxs("button",{onClick:()=>N(L.content),className:"flex items-center gap-1 text-xs text-primary hover:text-primary/80 transition-colors",children:[r.jsx(pd,{size:12}),r.jsx("span",{children:"Apply"})]})]})]})},B)),h&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl rounded-bl-md px-4 py-3",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(an,{size:14,className:"animate-spin text-emerald-500"}),r.jsx("span",{className:"text-sm text-gray-500",children:"Thinking..."})]})})}),r.jsx("div",{ref:j})]})}),o.length>0&&r.jsx("div",{className:"px-4 pb-2 flex gap-2 overflow-x-auto",children:T.slice(0,3).map((L,B)=>r.jsx("button",{onClick:()=>A(L.prompt),disabled:h,className:"flex-shrink-0 px-2.5 py-1 text-xs bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors disabled:opacity-50",children:L.label},B))}),r.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-black/20",children:r.jsxs("div",{className:"flex items-end gap-2",children:[r.jsx("textarea",{ref:w,value:d,onChange:L=>f(L.target.value),onKeyDown:E,placeholder:"Ask me anything...",rows:1,className:"flex-1 px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl outline-none focus:border-primary resize-none text-sm min-h-[42px] max-h-[120px] text-gray-900 dark:text-white placeholder:text-gray-400",style:{height:"auto"},disabled:h}),r.jsx("button",{onClick:()=>A(),disabled:!d.trim()||h,className:"p-2.5 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-90 transition-opacity",children:r.jsx(To,{size:18})})]})})]})},Dk=()=>{const[n,s]=M.useState(1),[l,o]=M.useState([]),[c,d]=M.useState([]),[f,h]=M.useState(!0),[p,m]=M.useState(!1),[y,x]=M.useState(null),v=ss(),j=Lo(),[w,T]=M.useState(!1),[z,A]=M.useState(null),[k,N]=M.useState({name:"",messageBody:"",selectedLists:[],scheduledAt:"",files:[]}),[E,L]=M.useState(!1);M.useEffect(()=>{B()},[]);const B=async()=>{try{h(!0);const[D,_]=await Promise.all([ce.getLists(),ce.getTemplates()]);o(D.lists||[]),d(_.templates||[])}catch(D){x(D.message)}finally{h(!1)}},V=[{number:1,label:"Compose",icon:dr},{number:2,label:"Recipients",icon:hn},{number:3,label:"Review",icon:gn}],X=D=>{N(_=>({..._,selectedLists:_.selectedLists.includes(D)?_.selectedLists.filter(O=>O!==D):[..._.selectedLists,D]}))},H=D=>{let _=D.content,O=[];try{const U=JSON.parse(D.content);_=U.body||D.content,U.files&&(O=U.files)}catch{console.log("Template is not JSON, using as raw text")}N(U=>({...U,messageBody:_,files:O}))},K=()=>l.filter(D=>k.selectedLists.includes(D.id)).reduce((D,_)=>D+(_.memberCount||0),0),q=()=>n===1?k.name&&k.messageBody:n===2?k.selectedLists.length>0:!0,Z=async()=>{m(!0),x(null);try{const D=await ce.createCampaign({name:k.name,messageBody:k.messageBody,listIds:k.selectedLists,scheduledAt:k.scheduledAt||null,mediaIds:k.files.map(_=>_.mediaId)});A(D.campaign.id),T(!0)}catch(D){x(D.message),j.error(D.message||"Failed to create campaign")}finally{m(!1)}},Q=async D=>{const _=D.target.files[0];if(_){if(_.size>10*1024*1024){x("File size must be less than 10MB");return}L(!0);try{const O=await ce.uploadFile(_);N(U=>({...U,files:[...U.files,{mediaId:O.mediaId,filename:O.filename||_.name,mimetype:O.mimeType||_.type}]}))}catch{x("Failed to upload file")}finally{L(!1),D.target.value=null}}},C=D=>{N(_=>({..._,files:_.files.filter((O,U)=>U!==D)}))};return f?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(an,{className:"w-8 h-8 animate-spin text-primary"})}):r.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-fade-in",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create Campaign"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Compose and send messages to your contacts"})]}),r.jsxs("div",{className:"flex items-center justify-between relative",children:[r.jsx("div",{className:"absolute top-6 left-0 right-0 h-0.5 bg-gray-200 dark:bg-gray-800 mx-16"}),r.jsx("div",{className:"absolute top-6 left-0 h-0.5 bg-primary mx-16 transition-all duration-500",style:{width:`${(n-1)/(V.length-1)*100}%`}}),V.map((D,_)=>r.jsxs("div",{className:"flex flex-col items-center relative z-10 animate-slide-up",style:{animationDelay:`${_*.1}s`,opacity:0},children:[r.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-300 ${n>D.number||n===D.number?"bg-primary text-white shadow-glow":"bg-gray-100 dark:bg-gray-800 text-gray-400"}`,children:n>D.number?r.jsx(gn,{size:20,strokeWidth:2.5}):r.jsx(D.icon,{size:20,strokeWidth:1.75})}),r.jsx("span",{className:`mt-3 text-sm font-medium ${n>=D.number?"text-gray-900 dark:text-white":"text-gray-400"}`,children:D.label})]},D.number))]}),y&&r.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-center gap-3 text-red-700 dark:text-red-400",children:[r.jsx(ka,{size:20}),r.jsx("span",{children:y}),r.jsx("button",{onClick:()=>x(null),className:"ml-auto",children:r.jsx(bt,{size:18})})]}),r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-8 rounded-2xl shadow-soft border border-gray-100 dark:border-gray-800/80",children:[n===1&&r.jsxs("div",{className:"flex gap-6 animate-fade-in",children:[r.jsxs("div",{className:"flex-1 space-y-6",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Compose Message"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Campaign Name *"}),r.jsx("input",{type:"text",value:k.name,onChange:D=>N({...k,name:D.target.value}),className:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-colors text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"e.g., January Newsletter"})]}),c.length>0&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Use Template"}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:c.map(D=>r.jsx("button",{onClick:()=>H(D),className:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:D.name},D.id))})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Message Content"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:"image/*,application/pdf",onChange:Q,disabled:E}),r.jsx("label",{htmlFor:"file-upload",className:`p-2 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer transition-colors ${E?"opacity-50 cursor-not-allowed":""}`,title:"Attach Image or PDF",children:E?r.jsx(an,{size:16,className:"animate-spin text-gray-500"}):r.jsx(yi,{size:16,className:"text-gray-500 dark:text-gray-400"})})]})]}),r.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:["Use ",r.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 rounded",children:"{{name}}"})," or ",r.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 rounded",children:"{{phone}}"})," for personalization"]}),r.jsx("textarea",{value:k.messageBody,onChange:D=>N({...k,messageBody:D.target.value}),className:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-colors resize-none h-40 text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"Hey {{name}}, we have exciting news for you..."}),r.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[k.messageBody.length," characters"]}),k.files&&k.files.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:k.files.map((D,_)=>r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm text-xs",children:[r.jsx(yi,{size:12,className:"text-gray-400"}),r.jsx("span",{className:"max-w-[150px] truncate text-gray-600 dark:text-gray-300",children:D.filename}),r.jsx("button",{type:"button",onClick:()=>C(_),className:"text-gray-400 hover:text-red-500",children:r.jsx(bt,{size:12})})]},_))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Schedule (Optional)"}),r.jsx("input",{type:"datetime-local",value:k.scheduledAt,onChange:D=>N({...k,scheduledAt:D.target.value}),className:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-colors"})]})]}),r.jsx("div",{className:"w-[380px] flex-shrink-0",children:r.jsx(ax,{currentContent:k.messageBody,contentType:"campaign",onApplyText:D=>N(_=>({..._,messageBody:D}))})})]}),n===2&&r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Select Recipients"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Choose which contact lists will receive this campaign"}),l.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-gray-400 mb-4",children:"No contact lists found"}),r.jsx("button",{onClick:()=>v("/contacts"),className:"text-primary hover:underline",children:"Create a list first"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.map((D,_)=>r.jsx("button",{onClick:()=>X(D.id),className:`p-4 rounded-xl border-2 text-left transition-all duration-200 animate-slide-up ${k.selectedLists.includes(D.id)?"border-primary bg-emerald-50 dark:bg-emerald-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,style:{animationDelay:`${_*.05}s`,opacity:0},children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:D.name}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[D.memberCount||0," contacts"]})]}),r.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${k.selectedLists.includes(D.id)?"border-primary bg-primary text-white":"border-gray-300 dark:border-gray-600"}`,children:k.selectedLists.includes(D.id)&&r.jsx(gn,{size:14})})]})},D.id))}),r.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-800",children:r.jsxs("p",{className:"text-lg font-medium",children:["Total Recipients: ",r.jsx("span",{className:"text-primary",children:K()})]})})]}),n===3&&r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Review Campaign"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl",children:[r.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"Campaign Name"}),r.jsx("p",{className:"font-medium",children:k.name})]}),r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl",children:[r.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"Message"}),r.jsx("p",{className:"whitespace-pre-wrap",children:k.messageBody})]}),r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl",children:[r.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"Recipients"}),r.jsxs("p",{className:"font-medium",children:[K()," contacts from ",k.selectedLists.length," lists"]}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:l.filter(D=>k.selectedLists.includes(D.id)).map(D=>r.jsx("span",{className:"px-2 py-1 text-xs bg-gray-200 dark:bg-gray-800 rounded-lg",children:D.name},D.id))})]}),k.scheduledAt&&r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl",children:[r.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"Scheduled For"}),r.jsx("p",{className:"font-medium",children:new Date(k.scheduledAt).toLocaleString()})]})]})]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("button",{onClick:()=>n>1?s(n-1):v("/campaigns"),className:"px-6 py-3 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors font-medium",children:n===1?"Cancel":"Back"}),n<3?r.jsxs("button",{onClick:()=>s(n+1),disabled:!q(),className:"flex items-center gap-2 px-6 py-3 btn-primary text-white rounded-xl font-medium shadow-glow disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx("span",{children:"Continue"}),r.jsx(Lp,{size:18})]}):r.jsx("button",{onClick:Z,disabled:p,className:"flex items-center gap-2 px-6 py-3 btn-primary text-white rounded-xl font-medium shadow-glow disabled:opacity-50",children:p?r.jsxs(r.Fragment,{children:[r.jsx(an,{size:18,className:"animate-spin"}),r.jsx("span",{children:"Creating..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(gn,{size:18}),r.jsx("span",{children:"Create Campaign"})]})})]}),w&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-2xl p-8 max-w-sm w-full text-center border border-gray-100 dark:border-gray-800",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/20 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(gn,{size:32,strokeWidth:3})}),r.jsx("h3",{className:"text-xl font-bold mb-2",children:"Campaign Created!"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Your campaign has been successfully saved as a draft. What would you like to do next?"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("button",{onClick:async()=>{try{j.success("Campaign started! Sending messages..."),T(!1),v("/campaigns"),await ce.sendCampaign(z)}catch(D){j.error("Failed to start campaign: "+D.message)}},className:"w-full py-3 btn-primary text-white rounded-xl font-medium shadow-glow flex items-center justify-center gap-2",children:[r.jsx(To,{size:18}),r.jsx("span",{children:"Send Now"})]}),r.jsxs("button",{onClick:()=>v("/campaigns"),className:"w-full py-3 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-medium transition-colors flex items-center justify-center gap-2",children:[r.jsx(Tp,{size:18}),r.jsx("span",{children:"Go to Dashboard"})]})]})]})})]})},Ok=()=>{const{t:n}=rs(),[s,l]=M.useState([]),[o,c]=M.useState(null),[d,f]=M.useState(!0),[h,p]=M.useState(null),[m,y]=M.useState(""),x=ss(),v=ar.useCallback(async()=>{try{f(!0),p(null);const[k,N]=await Promise.all([ce.getCampaigns({status:m||void 0,limit:50}),ce.getCampaignStats()]);l(k.campaigns||[]),c(N)}catch(k){p(k.message)}finally{f(!1)}},[m]);M.useEffect(()=>{v()},[v]);const j=async k=>{if(confirm(n("confirm_send_campaign")))try{await ce.sendCampaign(k),v()}catch(N){alert(N.message)}},w=async k=>{if(confirm(n("confirm_stop_campaign")))try{await ce.stopCampaign(k),v()}catch(N){alert(N.message)}},T=async k=>{if(confirm(n("confirm_delete_campaign")))try{await ce.deleteCampaign(k),v()}catch(N){alert(N.message)}},z=k=>{switch(k){case"COMPLETED":return{bg:"bg-blue-50 dark:bg-blue-900/20",text:"text-blue-600 dark:text-blue-400",icon:Td,label:n("status_completed")};case"IN_PROGRESS":return{bg:"bg-emerald-50 dark:bg-emerald-900/20",text:"text-emerald-600 dark:text-emerald-400",icon:tr,label:n("status_in_progress")};case"SCHEDULED":return{bg:"bg-amber-50 dark:bg-amber-900/20",text:"text-amber-600 dark:text-amber-400",icon:xi,label:n("status_scheduled")};case"STOPPED":return{bg:"bg-red-50 dark:bg-red-900/20",text:"text-red-600 dark:text-red-400",icon:Ap,label:n("status_stopped")};default:return{bg:"bg-gray-50 dark:bg-gray-800/50",text:"text-gray-500 dark:text-gray-400",icon:xi,label:n("status_draft")}}},A=[{label:n("stat_total_campaigns"),value:o?.totalCampaigns??"-",icon:Dd},{label:n("stat_messages_sent"),value:o?.totalMessagesSent?.toLocaleString()??"-",icon:To},{label:n("rate_delivery"),value:`${o?.deliveryRate??0}%`,icon:Td},{label:n("stat_active_now"),value:o?.activeCampaigns??"-",icon:tr}];return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n("campaigns_title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:n("campaigns_subtitle")})]}),r.jsxs("button",{onClick:()=>x("/campaigns/new"),className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[r.jsx(_a,{size:18,strokeWidth:2}),r.jsx("span",{children:n("btn_new_campaign")})]})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:A.map((k,N)=>r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-4 rounded-xl border border-gray-100 dark:border-gray-800/80 shadow-soft flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:r.jsx(k.icon,{size:18,className:"icon-gray",strokeWidth:1.75})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-400 font-medium",children:k.label}),r.jsx("p",{className:"text-xl font-bold",children:k.value})]})]},N))}),r.jsxs("div",{className:"flex items-center gap-4 overflow-x-auto pb-2",children:[r.jsx("button",{onClick:()=>v(),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:r.jsx(Mo,{size:18,className:"icon-gray"})}),["","DRAFT","IN_PROGRESS","COMPLETED","STOPPED"].map(k=>r.jsx("button",{onClick:()=>y(k),className:`px-4 py-2 text-sm font-medium rounded-lg whitespace-nowrap transition-colors ${m===k?"bg-primary text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:n(k?`status_${k.toLowerCase()}`:"label_all_contacts")},k))]}),h&&r.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-center gap-3 text-red-700 dark:text-red-400",children:[r.jsx(ka,{size:18}),r.jsx("span",{children:h}),r.jsx("button",{onClick:v,className:"ml-auto text-sm underline",children:n("btn_refresh")})]}),d?r.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:[1,2,3,4].map(k=>r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-800 rounded-xl skeleton"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"h-5 w-32 bg-gray-200 dark:bg-gray-800 rounded skeleton"}),r.jsx("div",{className:"h-4 w-24 bg-gray-200 dark:bg-gray-800 rounded mt-2 skeleton"})]})]}),r.jsx("div",{className:"h-16 bg-gray-200 dark:bg-gray-800 rounded-xl skeleton"})]},k))}):s.length===0?r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-12 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-xl flex items-center justify-center mx-auto mb-4",children:r.jsx(Dd,{size:28,className:"icon-gray"})}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:n("no_campaigns_yet")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:m?n("no_campaigns_filter",{filter:m.toLowerCase().replace("_"," ")}):n("start_campaign_prompt")}),r.jsxs("button",{onClick:()=>x("/campaigns/new"),className:"inline-flex items-center gap-2 px-4 py-2 btn-primary text-white rounded-xl font-medium",children:[r.jsx(_a,{size:18}),n("btn_create_campaign")]})]}):r.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:s.map((k,N)=>{const E=z(k.status),L=E.icon;return r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 card-hover animate-slide-up group",style:{animationDelay:`${N*.05}s`,opacity:0},children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`w-12 h-12 ${E.bg} rounded-xl flex items-center justify-center`,children:r.jsx(L,{size:22,className:E.text,strokeWidth:1.75})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:k.name}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1.5",children:[r.jsx(p1,{size:14,className:"icon-gray"}),new Date(k.createdAt).toLocaleDateString()]})]})]}),r.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${E.bg} ${E.text}`,children:E.label})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[r.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("p",{className:"text-lg font-bold",children:k.recipientCount||0}),r.jsx("p",{className:"text-xs text-gray-400",children:n("stat_recipients")})]}),r.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("p",{className:"text-lg font-bold text-blue-600",children:k.statsDelivered||0}),r.jsx("p",{className:"text-xs text-gray-400",children:n("status_delivered")})]}),r.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("p",{className:"text-lg font-bold text-emerald-600",children:k.statsRead||0}),r.jsx("p",{className:"text-xs text-gray-400",children:n("status_read")})]}),r.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("p",{className:"text-lg font-bold text-red-600",children:k.statsFailed||0}),r.jsx("p",{className:"text-xs text-gray-400",children:n("status_failed")})]})]}),k.status==="IN_PROGRESS"&&r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[r.jsx("span",{children:n("label_progress")}),r.jsxs("span",{children:[k.statsDelivered||0," / ",k.recipientCount||0]})]}),r.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500 animate-pulse",style:{width:`${k.recipientCount?k.statsDelivered/k.recipientCount*100:0}%`}})})]}),r.jsxs("div",{className:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[k.status==="DRAFT"&&r.jsx("button",{onClick:()=>j(k.id),className:"p-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-gray-400 hover:text-blue-600 rounded-lg transition-colors",title:"Send Campaign",children:r.jsx(tr,{size:18})}),k.status==="IN_PROGRESS"&&r.jsx("button",{onClick:()=>w(k.id),className:"p-2 hover:bg-amber-50 dark:hover:bg-amber-900/20 text-gray-400 hover:text-amber-600 rounded-lg transition-colors",title:"Stop Campaign",children:r.jsx(Mp,{size:18})}),k.status!=="IN_PROGRESS"&&r.jsx("button",{onClick:()=>T(k.id),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-400 hover:text-red-600 rounded-lg transition-colors",title:"Delete Campaign",children:r.jsx(sn,{size:18})})]})]},k.id)})})]})},Lk=({onSelect:n,isModal:s})=>{const[l,o]=M.useState([]),[c,d]=M.useState(!0),[f,h]=M.useState(!1),[p,m]=M.useState(!1),y=M.useRef(null),x=async()=>{try{d(!0);const A=await ce.getMedia();o(A.media||[])}catch{}finally{d(!1)}};M.useEffect(()=>{x()},[]);const v=async A=>{const k=A.target.files?.[0];if(k){h(!0);try{const N=await ce.uploadMedia(k);if(m(!1),x(),n){const E=`undefined/uploads/${N.media.path}`;n({...N.media,previewUrl:E})}}catch(N){alert(N.message)}finally{h(!1)}}},j=async(A,k)=>{if(k.stopPropagation(),!!confirm("Are you sure you want to delete this file?"))try{await ce.deleteMedia(A),o(l.filter(N=>N.id!==A))}catch(N){alert(N.message)}},w=A=>{if(!n)return;const k=`undefined/uploads/${A.path}`;n({...A,previewUrl:k})},T=A=>{if(A===0)return"0 B";const k=1024,N=["B","KB","MB","GB"],E=Math.floor(Math.log(A)/Math.log(k));return parseFloat((A/Math.pow(k,E)).toFixed(1))+" "+N[E]},z=A=>A.startsWith("image/")?r.jsx(pi,{size:24,className:"text-purple-500"}):A.startsWith("video/")?r.jsx(x1,{size:24,className:"text-pink-500"}):A.startsWith("audio/")?r.jsx(y1,{size:24,className:"text-emerald-500"}):r.jsx(dr,{size:24,className:"text-gray-500"});return r.jsxs("div",{className:"space-y-6 animate-fade-in h-full flex flex-col",children:[!s&&r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Media Library"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Manage images, videos, and documents for your campaigns"})]}),r.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[r.jsx(er,{size:18,strokeWidth:2}),r.jsx("span",{children:"Upload File"})]})]}),s&&r.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-100 dark:border-gray-800",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Select Media"}),r.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg text-sm font-medium transition-colors",children:[r.jsx(er,{size:16,strokeWidth:2}),r.jsx("span",{children:"Upload New"})]})]}),c?r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(A=>r.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-800 rounded-2xl skeleton"},A))}):l.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white dark:bg-surface-dark rounded-2xl border border-dashed border-gray-200 dark:border-gray-800",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-50 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4",children:r.jsx(pi,{size:32,className:"text-gray-300 dark:text-gray-600"})}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"No media files yet"}),r.jsx("button",{onClick:()=>m(!0),className:"mt-2 text-primary text-sm hover:underline",children:"Upload your first file"})]}):r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 overflow-y-auto pr-2 pb-20",children:l.map(A=>r.jsxs("div",{onClick:n?()=>w(A):void 0,className:`group relative bg-white dark:bg-surface-dark rounded-2xl shadow-soft border border-gray-100 dark:border-gray-800/80 overflow-hidden ${n?"cursor-pointer ring-2 ring-transparent hover:ring-primary":"card-hover"}`,children:[r.jsxs("div",{className:"aspect-square bg-gray-50 dark:bg-black/20 flex items-center justify-center relative overflow-hidden",children:[A.mimetype.startsWith("image/")?r.jsx("img",{src:`undefined/uploads/${A.path}`,alt:A.filename,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}):z(A.mimetype),!n&&r.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2 backdrop-blur-[2px]",children:r.jsx("button",{onClick:k=>j(A.id,k),className:"p-2 bg-white/10 hover:bg-white/20 text-white rounded-lg backdrop-blur-sm transition-colors",title:"Delete",children:r.jsx(sn,{size:18})})}),n&&r.jsx("div",{className:"absolute inset-0 bg-primary/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:r.jsx("span",{className:"px-3 py-1 bg-primary text-white text-xs font-bold rounded-full shadow-lg",children:"Select"})})]}),r.jsxs("div",{className:"p-3",children:[r.jsx("p",{className:"text-sm font-medium truncate text-gray-900 dark:text-white",title:A.filename,children:A.filename}),r.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:[T(A.size),"  ",A.mimetype.split("/")[1].toUpperCase()]})]})]},A.id))}),p&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-surface-dark w-full max-w-md rounded-2xl shadow-2xl p-6 animate-slide-up",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Upload Media"}),r.jsx("button",{onClick:()=>m(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:r.jsx(bt,{size:20})})]}),r.jsxs("div",{className:"border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl p-8 text-center hover:border-primary transition-colors cursor-pointer",onClick:()=>y.current?.click(),children:[r.jsx("input",{ref:y,type:"file",className:"hidden",onChange:v,accept:"image/*,video/*,application/pdf"}),f?r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx(an,{size:32,className:"text-primary animate-spin mb-3"}),r.jsx("p",{className:"text-sm font-medium",children:"Uploading..."})]}):r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"w-12 h-12 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-500 rounded-full flex items-center justify-center mb-3",children:r.jsx(er,{size:24})}),r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Click to upload"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Images, Videos, PDF (Max 16MB)"})]})]})]})})]})},Rk=({header:n,body:s,footer:l,files:o,buttons:c})=>{const d=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),f=h=>h?h.split(/(\{\{\d+\}\})/g).map((m,y)=>m.match(/\{\{\d+\}\}/)?r.jsx("span",{className:"bg-blue-100 text-blue-600 px-1 rounded mx-0.5 font-medium",children:m},y):m):r.jsx("span",{className:"text-gray-400 italic",children:"Type something..."});return r.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-4 rounded-xl overflow-hidden relative",children:[r.jsx("div",{className:"absolute inset-0",style:{backgroundImage:'url("/whatsapp-bg.png")',backgroundSize:"cover",backgroundPosition:"center"}}),r.jsxs("div",{className:"w-full max-w-[320px] relative z-10 flex flex-col gap-2",children:[r.jsxs("div",{className:"bg-white dark:bg-[#202c33] rounded-lg shadow-sm p-1 relative rounded-tr-none self-end message-bubble-tail",children:[r.jsxs("div",{className:"p-2 pb-6 min-w-[120px]",children:[o&&o.length>0&&r.jsx("div",{className:"mb-2 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 flex items-center justify-center border border-gray-100 dark:border-gray-700",children:o[0].mimetype?.startsWith("image/")&&o[0].previewUrl?r.jsx("img",{src:o[0].previewUrl,alt:"Preview",className:"w-full h-auto max-h-48 object-cover"}):r.jsxs("div",{className:"text-center p-4",children:[r.jsx(yi,{className:"mx-auto mb-2 text-gray-400",size:24}),r.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[150px]",children:o[0].filename}),r.jsx("p",{className:"text-[10px] text-gray-400 uppercase mt-0.5",children:o[0].mimetype?.split("/")[1]||"FILE"})]})}),n&&r.jsx("div",{className:"font-bold text-sm text-gray-900 dark:text-gray-100 mb-1 leading-snug",children:n}),r.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-200 whitespace-pre-wrap leading-relaxed",children:f(s)}),l&&r.jsx("div",{className:"text-[11px] text-gray-500 dark:text-gray-400 mt-2 pt-1 border-t border-gray-100 dark:border-gray-700/50",children:l})]}),r.jsxs("div",{className:"absolute right-2 bottom-1 flex items-center gap-1",children:[r.jsx("span",{className:"text-[10px] text-gray-400",children:d}),r.jsx(Op,{size:14,className:"text-[#53bdeb]"})]})]}),c&&c.length>0&&c.map((h,p)=>r.jsx("div",{className:"bg-white dark:bg-[#202c33] rounded-lg shadow-sm p-3 text-center cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:r.jsxs("span",{className:"text-[#00a884] font-medium text-sm block truncate",children:[h.type==="URL"&&" ",h.type==="PHONE_NUMBER"&&" ",h.text||"Button Text"]})},p))]})]})},Hk=()=>{const{t:n}=rs(),[s,l]=M.useState([]),[o,c]=M.useState(!0),[d,f]=M.useState(!1),[h,p]=M.useState(null),[m,y]=M.useState({name:"",header:"",body:"",footer:"",buttons:[],files:[]}),[x,v]=M.useState(!1),[j,w]=M.useState(!1),[T,z]=M.useState(null),A=async()=>{try{c(!0);const H=await ce.getTemplates();l(H.templates||[])}catch{console.error(err)}finally{c(!1)}};M.useEffect(()=>{A()},[]);const k=()=>{y({name:"",header:"",body:"",footer:"",buttons:[],files:[]}),p(null),z(null)},N=async()=>{if(!m.body.trim()){alert("Please add body text first.");return}w(!0),z(null);try{const H=await ef.analyzeTemplate(m.body,m.name);z(H)}catch{alert("Failed to analyze template.")}finally{w(!1)}},E=async H=>{const K=H.target.files[0];if(!K)return;if(K.size>10*1024*1024){alert("File size must be less than 10MB");return}const q=URL.createObjectURL(K);v(!0);try{const Z=await ce.uploadFile(K);y(Q=>({...Q,files:[...Q.files,{mediaId:Z.mediaId,filename:Z.filename||K.name,mimetype:Z.mimeType||K.type,previewUrl:q}]}))}catch{alert("Failed to upload file")}finally{v(!1),H.target.value=null}},L=H=>{y(K=>({...K,files:K.files.filter((q,Z)=>Z!==H)}))},B=async()=>{try{const H=JSON.stringify({header:m.header,body:m.body,footer:m.footer,buttons:m.buttons,files:m.files});h?await ce.updateTemplate(h,{name:m.name,content:H}):await ce.createTemplate({name:m.name,content:H}),f(!1),A(),k()}catch{alert(err.message)}},V=H=>{try{const K=JSON.parse(H.content);y({name:H.name,header:K.header||"",body:K.body||H.content,footer:K.footer||"",buttons:K.buttons||[],files:K.files||[]})}catch{y({name:H.name,header:"",body:H.content,footer:"",buttons:[]})}p(H.id),f(!0)},X=async H=>{if(confirm("Start deletion?"))try{await ce.deleteTemplate(H),l(s.filter(K=>K.id!==H))}catch{alert(err.message)}};return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n("templates_title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:n("templates_subtitle")})]}),r.jsxs("button",{onClick:()=>{k(),f(!0)},className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[r.jsx(_a,{size:18,strokeWidth:2}),r.jsx("span",{children:n("btn_create_template")})]})]}),o?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(H=>r.jsx("div",{className:"h-48 bg-gray-100 dark:bg-gray-800 rounded-xl skeleton"},H))}):s.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white dark:bg-surface-dark rounded-xl border border-dashed border-gray-200 dark:border-gray-800",children:[r.jsx("div",{className:"w-16 h-16 bg-blue-50 dark:bg-blue-900/20 rounded-full flex items-center justify-center mb-4",children:r.jsx(Ci,{size:32,className:"text-blue-500"})}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:n("no_templates")})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(H=>{let K;try{K=JSON.parse(H.content)}catch{K={body:H.content}}return r.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 p-5 card-hover",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 text-blue-600 rounded-lg",children:r.jsx(Dp,{size:18})}),r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white truncate",children:H.name})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>V(H),className:"p-2 text-gray-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:r.jsx(zi,{size:16})}),r.jsx("button",{onClick:()=>X(H.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:r.jsx(sn,{size:16})})]})]}),r.jsx("div",{className:"bg-[#E5DDD5] dark:bg-[#1f2c34] p-3 rounded-lg text-sm relative",children:r.jsxs("div",{className:"bg-white dark:bg-[#202c33] p-2 rounded-lg shadow-sm text-gray-900 dark:text-gray-100",children:[K.header&&r.jsx("p",{className:"font-bold mb-1 opacity-90",children:K.header}),r.jsx("p",{className:"whitespace-pre-wrap",children:K.body}),K.footer&&r.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:K.footer})]})})]},H.id)})}),d&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-surface-dark w-full max-w-[95vw] h-[90vh] rounded-xl shadow-2xl overflow-hidden flex animate-slide-up",children:[r.jsxs("div",{className:"w-[35%] p-6 overflow-y-auto border-r border-gray-200 dark:border-gray-800 scrollbar-hide",children:[r.jsx("h2",{className:"text-xl font-bold mb-6",children:n(h?"modal_edit_template":"modal_new_template")}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1.5",children:n("label_template_name")}),r.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-xl bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-gray-700 outline-none focus:border-primary text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"e.g. welcome_message",value:m.name,onChange:H=>y({...m,name:H.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1.5",children:n("label_header_optional")}),r.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-xl bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-gray-700 outline-none focus:border-primary text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"Company Name / Title",value:m.header,onChange:H=>y({...m,header:H.target.value})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[r.jsx("label",{className:"block text-sm font-medium",children:n("label_body_text")}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"file",id:"tpl-file-upload",className:"hidden",accept:"image/*,application/pdf",onChange:E,disabled:x}),r.jsx("label",{htmlFor:"tpl-file-upload",className:`p-1.5 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer transition-colors ${x?"opacity-50 cursor-not-allowed":""}`,title:"Attach Image or PDF",children:x?r.jsx(an,{size:16,className:"animate-spin text-gray-500"}):r.jsx(yi,{size:16,className:"text-gray-500 dark:text-gray-400"})})]})]}),r.jsx("textarea",{className:"w-full h-32 px-4 py-3 rounded-xl bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-gray-700 outline-none focus:border-primary resize-none text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"Hello {{1}}, thanks for signing up!",value:m.body,onChange:H=>y({...m,body:H.target.value})}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Use ","{{1}}",", ","{{2}}"," for variables."]}),m.files.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:m.files.map((H,K)=>r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm text-xs",children:[r.jsx(yi,{size:12,className:"text-gray-400"}),r.jsx("span",{className:"max-w-[150px] truncate text-gray-600 dark:text-gray-300",children:H.filename}),r.jsx("button",{type:"button",onClick:()=>L(K),className:"text-gray-400 hover:text-red-500",children:r.jsx(bt,{size:12})})]},K))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1.5",children:n("label_footer_optional")}),r.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-xl bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-gray-700 outline-none focus:border-primary text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"Reply STOP to unsubscribe",value:m.footer,onChange:H=>y({...m,footer:H.target.value})})]})]}),r.jsxs("div",{className:"mt-8 flex gap-3",children:[r.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-2.5 rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800",children:n("btn_cancel")}),r.jsxs("button",{onClick:N,disabled:j||!m.body.trim(),className:"flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-primary text-primary hover:bg-primary/10 disabled:opacity-50",children:[j?r.jsx(an,{size:16,className:"animate-spin"}):r.jsx(fi,{size:16}),n(j?"status_analyzing":"btn_analyze")]}),r.jsx("button",{onClick:B,className:"flex-1 py-2.5 btn-primary text-white rounded-xl shadow-glow",children:n("btn_save_template")})]})]}),r.jsxs("div",{className:"w-[30%] bg-gray-50/50 dark:bg-black/10 border-r border-gray-200 dark:border-gray-800 p-4 flex flex-col",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-4 px-2",children:n("label_preview")}),r.jsx("div",{className:"flex-1 rounded-2xl overflow-hidden border border-gray-200 dark:border-gray-800 shadow-inner",children:r.jsx(Rk,{header:m.header,body:m.body,footer:m.footer,files:m.files,buttons:m.buttons})})]}),r.jsxs("div",{className:"w-[35%] bg-gray-50 dark:bg-black/40 flex flex-col overflow-hidden p-4",children:[T&&r.jsxs("div",{className:`mb-4 p-4 rounded-xl border ${T.verdict==="good"?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800":T.verdict==="bad"?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[T.verdict==="good"?r.jsx(b1,{size:18,className:"text-emerald-600"}):r.jsx(ka,{size:18,className:T.verdict==="bad"?"text-red-600":"text-amber-600"}),r.jsxs("span",{className:"font-semibold",children:["Score: ",T.score,"/10"]})]}),r.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-2",children:T.summary}),T.suggestions&&T.suggestions.length>0&&r.jsx("ul",{className:"text-sm space-y-1",children:T.suggestions.map((H,K)=>r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-gray-400",children:""}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:H})]},K))})]}),r.jsx(ax,{currentContent:m.body,contentType:"template",onApplyText:H=>{y(K=>({...K,body:H})),z(null)}})]})]})})]})},Uk=()=>{const{isDark:n,toggleTheme:s}=nx(),l=Lo(),{t:o,i18n:c}=rs(),[d,f]=M.useState({phoneNumberId:"",accessToken:"",wabaId:"",verifyToken:"whatsms_token"}),[h,p]=M.useState(!0),[m,y]=M.useState(!1),[x,v]=M.useState(!1),[j,w]=M.useState(""),T=`${window.location.origin}/webhooks`;M.useEffect(()=>{z()},[]);const z=async()=>{try{const E=await ce.get("/settings");E&&f({phoneNumberId:E.phoneNumberId||"",accessToken:E.accessToken||"",wabaId:E.wabaId||"",verifyToken:E.verifyToken||"whatsms_token"})}catch(E){console.error("Failed to load settings",E)}finally{p(!1)}},A=E=>{f({...d,[E.target.name]:E.target.value})},k=async()=>{try{await ce.post("/settings",d),await ce.post("/settings",d),l.success(o("success_config_saved")||"Configuration saved successfully!")}catch(E){console.error("Failed to save settings",E),l.error(o("error_config_save")||"Failed to save configuration")}},N=()=>{navigator.clipboard.writeText(T),v(!0),setTimeout(()=>v(!1),2e3)};return h?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:o("settings_title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:o("settings_subtitle")})]}),r.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[r.jsx("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 lg:col-span-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 flex items-center justify-center",children:r.jsx(Md,{size:20})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:o("settings_title")}),r.jsx("p",{className:"text-sm text-gray-400",children:o("section_appearance")})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("select",{value:c.language,onChange:E=>c.changeLanguage(E.target.value),className:"px-3 py-1.5 rounded-lg bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 text-sm outline-none focus:border-primary",children:[r.jsx("option",{value:"en",children:"English"}),r.jsx("option",{value:"fr",children:"Franais"})]}),r.jsxs("button",{onClick:s,className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 ${n?"bg-emerald-600":"bg-gray-200"}`,children:[r.jsx("span",{className:"sr-only",children:"Toggle theme"}),r.jsx("span",{className:`${n?"translate-x-7":"translate-x-1"} inline-block h-6 w-6 transform rounded-full bg-white transition-transform duration-300 flex items-center justify-center`,children:n?r.jsx(v1,{size:14,className:"text-emerald-600"}):r.jsx(N1,{size:14,className:"text-orange-400"})})]})]})]})}),r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 flex items-center justify-center",children:r.jsx(Md,{size:20})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:o("section_credentials")}),r.jsx("p",{className:"text-sm text-gray-400",children:o("section_credentials_subtitle")})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:o("label_phone_id")}),r.jsx("input",{type:"text",name:"phoneNumberId",value:d.phoneNumberId,onChange:A,placeholder:"e.g. 10452...",className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-all text-gray-900 dark:text-white placeholder:text-gray-400"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:o("hint_phone_id")})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:o("label_access_token")}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:m?"text":"password",name:"accessToken",value:d.accessToken,onChange:A,placeholder:o("placeholder_access_token"),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-all pr-12 text-gray-900 dark:text-white placeholder:text-gray-400"}),r.jsx("button",{onClick:()=>y(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:m?r.jsx(j1,{size:18}):r.jsx(w1,{size:18})})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-2",children:[o("label_waba_id")," ",r.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),r.jsx("input",{type:"text",name:"wabaId",value:d.wabaId,onChange:A,placeholder:"e.g. 123456789...",className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-all text-gray-900 dark:text-white placeholder:text-gray-400"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:o("hint_waba_id")})]}),r.jsx("div",{className:"pt-4",children:r.jsxs("button",{onClick:k,className:"w-full px-6 py-2.5 bg-primary hover:bg-primary-dark text-white rounded-xl font-medium transition-colors flex items-center justify-center gap-2",children:[r.jsx(Rp,{size:18}),o("btn_save_credentials")]})}),r.jsxs("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-800",children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:o("label_test_connectivity")}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:j,onChange:E=>w(E.target.value),placeholder:"Recipient Phone (e.g. 1555...)",className:"flex-1 px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-all text-gray-900 dark:text-white placeholder:text-gray-400"}),r.jsxs("button",{onClick:async()=>{if(!j){l.error(o("error_no_phone"));return}try{await k();const E=await ce.post("/settings/test",{targetPhone:j});l.success(E.message||o("success_connection"))}catch(E){l.error(E.message||o("error_connection"))}},className:"px-6 py-2.5 bg-gray-100 hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-medium transition-colors flex items-center justify-center gap-2 whitespace-nowrap",title:"Send 'hello_world' template",children:[r.jsx(d0,{size:18}),o("btn_send_test")]})]}),r.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[o("hint_test_message")," ",r.jsx("br",{}),r.jsx("span",{dangerouslySetInnerHTML:{__html:o("hint_test_warning")}})]})]}),r.jsx("p",{className:"text-xs text-center text-gray-400 mt-1",children:o("hint_save_before_test")})]})]}),r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 h-fit",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-teal-50 dark:bg-teal-900/20 text-teal-600 flex items-center justify-center",children:r.jsx(d0,{size:20})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:o("section_webhook")}),r.jsx("p",{className:"text-sm text-gray-400",children:o("section_webhook_subtitle")})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl border border-gray-100 dark:border-gray-800",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:o("label_callback_url")}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 text-sm font-mono text-gray-600 dark:text-gray-300 break-all",children:T}),r.jsx("button",{onClick:N,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Copy URL",children:x?r.jsx(gn,{size:16,className:"text-blue-500"}):r.jsx(Jd,{size:16,className:"text-gray-400"})})]})]}),r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl border border-gray-100 dark:border-gray-800",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:o("label_verify_token")}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",name:"verifyToken",value:d.verifyToken,onChange:A,placeholder:"whatsms_token",className:"flex-1 w-full px-4 py-2 rounded-xl bg-white dark:bg-surface-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-all text-sm font-mono"}),r.jsx("div",{className:"text-xs px-2 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 rounded",children:o("label_editable")})]}),r.jsx("p",{className:"text-xs text-gray-400 mt-2",children:o("hint_verify_token")})]}),r.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/10 p-4 rounded-xl text-sm text-emerald-800 dark:text-emerald-300",children:[r.jsx("h4",{className:"font-semibold mb-1",children:o("label_setup_instructions")}),r.jsxs("ol",{className:"list-decimal pl-4 space-y-1 opacity-80",children:[r.jsx("li",{children:o("instr_step_1")}),r.jsx("li",{children:o("instr_step_2")}),r.jsx("li",{children:o("instr_step_3")}),r.jsx("li",{children:o("instr_step_4")}),r.jsxs("li",{children:[o("instr_step_5")," ",r.jsx("code",{children:"messages"}),", ",r.jsx("code",{children:"message_status"}),"."]})]})]})]})]})]})]})};function Bk(){const[n,s]=M.useState([]),[l,o]=M.useState(!0),[c,d]=M.useState(null),[f,h]=M.useState(null),[p,m]=M.useState("");M.useEffect(()=>{y()},[]),M.useEffect(()=>{const T=()=>d(null);return document.addEventListener("click",T),()=>document.removeEventListener("click",T)},[]);const y=async()=>{try{const T=await ce.get("/flows");s(T)}catch(T){console.error("Failed to fetch flows",T)}finally{o(!1)}},x=async T=>{if(confirm("Are you sure? This will stop any active executions."))try{await ce.delete(`/flows/${T}`),y()}catch(z){console.error("Failed to delete flow",z)}},v=T=>{h(T.id),m(T.name),d(null)},j=async()=>{if(!p.trim()){h(null);return}const T=n.find(z=>z.id===f);if(T&&T.name!==p)try{await ce.put(`/flows/${T.id}`,{...T,name:p}),s(n.map(z=>z.id===f?{...z,name:p}:z))}catch(z){console.error("Failed to rename flow",z),alert("Failed to rename flow"),y()}h(null)},w=async T=>{try{await ce.put(`/flows/${T.id}`,{isActive:!T.isActive}),y()}catch(z){console.error("Failed to update status",z)}};return l?r.jsx("div",{className:"p-8 text-center text-gray-400",children:"Loading automations..."}):r.jsxs("div",{className:"p-6 max-w-7xl mx-auto min-h-screen",children:[r.jsxs("div",{className:"flex justify-between items-center mb-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-neutral-100 mb-2",children:"Automations"}),r.jsx("p",{className:"text-gray-500 dark:text-neutral-400",children:"Build automated message flows and chatbots"})]}),r.jsxs(ho,{to:"/automations/new",className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors shadow-sm",children:[r.jsx(_a,{size:20}),"Create Flow"]})]}),n.length===0?r.jsxs("div",{className:"text-center py-16 bg-white dark:bg-[#0F0F0F] rounded-xl border border-gray-200 dark:border-[#262626] shadow-sm transition-colors",children:[r.jsx(bo,{size:48,className:"mx-auto text-gray-400 dark:text-neutral-600 mb-4"}),r.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-2",children:"No automations yet"}),r.jsx("p",{className:"text-gray-500 dark:text-neutral-400 mb-6",children:"Create your first automated workflow to engage customers 24/7."}),r.jsx(ho,{to:"/automations/new",className:"text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300 font-medium",children:"Get Started "})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(T=>r.jsxs("div",{className:"bg-white dark:bg-[#0F0F0F] rounded-xl border border-gray-200 dark:border-[#262626] p-6 hover:shadow-md transition-all duration-200",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsx("div",{className:`p-2 rounded-lg ${T.isActive?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-500 dark:bg-[#1A1A1A] dark:text-neutral-400"}`,children:r.jsx(bo,{size:24})}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:z=>{z.stopPropagation(),z.preventDefault(),d(c===T.id?null:T.id)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-white p-1 rounded-full hover:bg-gray-100 dark:hover:bg-[#262626] transition-colors",children:[r.jsx("span",{className:"sr-only",children:"Menu"}),r.jsx(Hp,{size:20})]}),c===T.id&&r.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-[#1A1A1A] rounded-lg shadow-xl py-1 z-50 border border-gray-200 dark:border-[#333] animate-in fade-in zoom-in-95 duration-100",children:[r.jsxs("button",{onClick:z=>{z.stopPropagation(),v(T)},className:"w-full text-left px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#252525] flex items-center gap-2",children:[r.jsx(zi,{size:16})," Rename"]}),r.jsxs("button",{onClick:z=>{z.stopPropagation(),d(null),x(T.id)},className:"w-full text-left px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[r.jsx(sn,{size:16})," Delete"]})]})]})]}),f===T.id?r.jsxs("div",{className:"mb-4",children:[r.jsx("input",{type:"text",autoFocus:!0,value:p,onChange:z=>m(z.target.value),onBlur:j,onKeyDown:z=>{z.key==="Enter"&&j(),z.key==="Escape"&&h(null)},className:"w-full text-lg font-semibold text-gray-900 dark:text-neutral-100 bg-white dark:bg-[#1A1A1A] border border-indigo-500 rounded px-2 py-1 outline-none shadow-sm"}),r.jsx("p",{className:"text-xs text-indigo-500 mt-1",children:"Press Enter to save"})]}):r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-neutral-100 mb-2 truncate cursor-pointer hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",onDoubleClick:()=>v(T),title:"Double click to rename",children:T.name}),r.jsx("p",{className:"text-gray-500 dark:text-neutral-400 text-sm mb-4 line-clamp-2",children:T.description||"No description provided."})]}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100 dark:border-[#262626]",children:[r.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-neutral-400",children:r.jsxs("span",{children:[T._count?.executions||0," runs"]})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>w(T),className:`p-2 rounded-lg transition-colors ${T.isActive?"bg-green-100 text-green-600 hover:bg-green-200 dark:bg-green-900/30 dark:text-green-400 dark:hover:bg-green-900/50":"bg-gray-100 text-gray-500 hover:bg-gray-200 dark:bg-[#1A1A1A] dark:text-neutral-400 dark:hover:bg-[#262626]"}`,title:T.isActive?"Pause":"Activate",children:T.isActive?r.jsx(Up,{size:18}):r.jsx(tr,{size:18})}),r.jsx(ho,{to:`/automations/${T.id}`,className:"p-2 bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100 dark:bg-indigo-900/30 dark:text-indigo-400 dark:hover:bg-indigo-900/50",title:"Edit",children:r.jsx(S1,{size:18})})]})]})]},T.id))})]})}function st(n){if(typeof n=="string"||typeof n=="number")return""+n;let s="";if(Array.isArray(n))for(let l=0,o;l<n.length;l++)(o=st(n[l]))!==""&&(s+=(s&&" ")+o);else for(let l in n)n[l]&&(s+=(s&&" ")+l);return s}var $k={value:()=>{}};function Ro(){for(var n=0,s=arguments.length,l={},o;n<s;++n){if(!(o=arguments[n]+"")||o in l||/[\s.]/.test(o))throw new Error("illegal type: "+o);l[o]=[]}return new mo(l)}function mo(n){this._=n}function Vk(n,s){return n.trim().split(/^|\s+/).map(function(l){var o="",c=l.indexOf(".");if(c>=0&&(o=l.slice(c+1),l=l.slice(0,c)),l&&!s.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:o}})}mo.prototype=Ro.prototype={constructor:mo,on:function(n,s){var l=this._,o=Vk(n+"",l),c,d=-1,f=o.length;if(arguments.length<2){for(;++d<f;)if((c=(n=o[d]).type)&&(c=qk(l[c],n.name)))return c;return}if(s!=null&&typeof s!="function")throw new Error("invalid callback: "+s);for(;++d<f;)if(c=(n=o[d]).type)l[c]=H0(l[c],n.name,s);else if(s==null)for(c in l)l[c]=H0(l[c],n.name,null);return this},copy:function(){var n={},s=this._;for(var l in s)n[l]=s[l].slice();return new mo(n)},call:function(n,s){if((c=arguments.length-2)>0)for(var l=new Array(c),o=0,c,d;o<c;++o)l[o]=arguments[o+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(d=this._[n],o=0,c=d.length;o<c;++o)d[o].value.apply(s,l)},apply:function(n,s,l){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var o=this._[n],c=0,d=o.length;c<d;++c)o[c].value.apply(s,l)}};function qk(n,s){for(var l=0,o=n.length,c;l<o;++l)if((c=n[l]).name===s)return c.value}function H0(n,s,l){for(var o=0,c=n.length;o<c;++o)if(n[o].name===s){n[o]=$k,n=n.slice(0,o).concat(n.slice(o+1));break}return l!=null&&n.push({name:s,value:l}),n}var Ud="http://www.w3.org/1999/xhtml";const U0={svg:"http://www.w3.org/2000/svg",xhtml:Ud,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ho(n){var s=n+="",l=s.indexOf(":");return l>=0&&(s=n.slice(0,l))!=="xmlns"&&(n=n.slice(l+1)),U0.hasOwnProperty(s)?{space:U0[s],local:n}:n}function Yk(n){return function(){var s=this.ownerDocument,l=this.namespaceURI;return l===Ud&&s.documentElement.namespaceURI===Ud?s.createElement(n):s.createElementNS(l,n)}}function Gk(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function sx(n){var s=Ho(n);return(s.local?Gk:Yk)(s)}function Xk(){}function tf(n){return n==null?Xk:function(){return this.querySelector(n)}}function Zk(n){typeof n!="function"&&(n=tf(n));for(var s=this._groups,l=s.length,o=new Array(l),c=0;c<l;++c)for(var d=s[c],f=d.length,h=o[c]=new Array(f),p,m,y=0;y<f;++y)(p=d[y])&&(m=n.call(p,p.__data__,y,d))&&("__data__"in p&&(m.__data__=p.__data__),h[y]=m);return new Ut(o,this._parents)}function Qk(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function Fk(){return[]}function rx(n){return n==null?Fk:function(){return this.querySelectorAll(n)}}function Kk(n){return function(){return Qk(n.apply(this,arguments))}}function Ik(n){typeof n=="function"?n=Kk(n):n=rx(n);for(var s=this._groups,l=s.length,o=[],c=[],d=0;d<l;++d)for(var f=s[d],h=f.length,p,m=0;m<h;++m)(p=f[m])&&(o.push(n.call(p,p.__data__,m,f)),c.push(p));return new Ut(o,c)}function ix(n){return function(){return this.matches(n)}}function lx(n){return function(s){return s.matches(n)}}var Jk=Array.prototype.find;function Wk(n){return function(){return Jk.call(this.children,n)}}function Pk(){return this.firstElementChild}function eC(n){return this.select(n==null?Pk:Wk(typeof n=="function"?n:lx(n)))}var tC=Array.prototype.filter;function nC(){return Array.from(this.children)}function aC(n){return function(){return tC.call(this.children,n)}}function sC(n){return this.selectAll(n==null?nC:aC(typeof n=="function"?n:lx(n)))}function rC(n){typeof n!="function"&&(n=ix(n));for(var s=this._groups,l=s.length,o=new Array(l),c=0;c<l;++c)for(var d=s[c],f=d.length,h=o[c]=[],p,m=0;m<f;++m)(p=d[m])&&n.call(p,p.__data__,m,d)&&h.push(p);return new Ut(o,this._parents)}function ox(n){return new Array(n.length)}function iC(){return new Ut(this._enter||this._groups.map(ox),this._parents)}function wo(n,s){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=s}wo.prototype={constructor:wo,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,s){return this._parent.insertBefore(n,s)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function lC(n){return function(){return n}}function oC(n,s,l,o,c,d){for(var f=0,h,p=s.length,m=d.length;f<m;++f)(h=s[f])?(h.__data__=d[f],o[f]=h):l[f]=new wo(n,d[f]);for(;f<p;++f)(h=s[f])&&(c[f]=h)}function cC(n,s,l,o,c,d,f){var h,p,m=new Map,y=s.length,x=d.length,v=new Array(y),j;for(h=0;h<y;++h)(p=s[h])&&(v[h]=j=f.call(p,p.__data__,h,s)+"",m.has(j)?c[h]=p:m.set(j,p));for(h=0;h<x;++h)j=f.call(n,d[h],h,d)+"",(p=m.get(j))?(o[h]=p,p.__data__=d[h],m.delete(j)):l[h]=new wo(n,d[h]);for(h=0;h<y;++h)(p=s[h])&&m.get(v[h])===p&&(c[h]=p)}function uC(n){return n.__data__}function dC(n,s){if(!arguments.length)return Array.from(this,uC);var l=s?cC:oC,o=this._parents,c=this._groups;typeof n!="function"&&(n=lC(n));for(var d=c.length,f=new Array(d),h=new Array(d),p=new Array(d),m=0;m<d;++m){var y=o[m],x=c[m],v=x.length,j=fC(n.call(y,y&&y.__data__,m,o)),w=j.length,T=h[m]=new Array(w),z=f[m]=new Array(w),A=p[m]=new Array(v);l(y,x,T,z,A,j,s);for(var k=0,N=0,E,L;k<w;++k)if(E=T[k]){for(k>=N&&(N=k+1);!(L=z[N])&&++N<w;);E._next=L||null}}return f=new Ut(f,o),f._enter=h,f._exit=p,f}function fC(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function gC(){return new Ut(this._exit||this._groups.map(ox),this._parents)}function hC(n,s,l){var o=this.enter(),c=this,d=this.exit();return typeof n=="function"?(o=n(o),o&&(o=o.selection())):o=o.append(n+""),s!=null&&(c=s(c),c&&(c=c.selection())),l==null?d.remove():l(d),o&&c?o.merge(c).order():c}function mC(n){for(var s=n.selection?n.selection():n,l=this._groups,o=s._groups,c=l.length,d=o.length,f=Math.min(c,d),h=new Array(c),p=0;p<f;++p)for(var m=l[p],y=o[p],x=m.length,v=h[p]=new Array(x),j,w=0;w<x;++w)(j=m[w]||y[w])&&(v[w]=j);for(;p<c;++p)h[p]=l[p];return new Ut(h,this._parents)}function pC(){for(var n=this._groups,s=-1,l=n.length;++s<l;)for(var o=n[s],c=o.length-1,d=o[c],f;--c>=0;)(f=o[c])&&(d&&f.compareDocumentPosition(d)^4&&d.parentNode.insertBefore(f,d),d=f);return this}function xC(n){n||(n=yC);function s(x,v){return x&&v?n(x.__data__,v.__data__):!x-!v}for(var l=this._groups,o=l.length,c=new Array(o),d=0;d<o;++d){for(var f=l[d],h=f.length,p=c[d]=new Array(h),m,y=0;y<h;++y)(m=f[y])&&(p[y]=m);p.sort(s)}return new Ut(c,this._parents).order()}function yC(n,s){return n<s?-1:n>s?1:n>=s?0:NaN}function bC(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function vC(){return Array.from(this)}function NC(){for(var n=this._groups,s=0,l=n.length;s<l;++s)for(var o=n[s],c=0,d=o.length;c<d;++c){var f=o[c];if(f)return f}return null}function jC(){let n=0;for(const s of this)++n;return n}function wC(){return!this.node()}function SC(n){for(var s=this._groups,l=0,o=s.length;l<o;++l)for(var c=s[l],d=0,f=c.length,h;d<f;++d)(h=c[d])&&n.call(h,h.__data__,d,c);return this}function _C(n){return function(){this.removeAttribute(n)}}function kC(n){return function(){this.removeAttributeNS(n.space,n.local)}}function CC(n,s){return function(){this.setAttribute(n,s)}}function EC(n,s){return function(){this.setAttributeNS(n.space,n.local,s)}}function zC(n,s){return function(){var l=s.apply(this,arguments);l==null?this.removeAttribute(n):this.setAttribute(n,l)}}function AC(n,s){return function(){var l=s.apply(this,arguments);l==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,l)}}function TC(n,s){var l=Ho(n);if(arguments.length<2){var o=this.node();return l.local?o.getAttributeNS(l.space,l.local):o.getAttribute(l)}return this.each((s==null?l.local?kC:_C:typeof s=="function"?l.local?AC:zC:l.local?EC:CC)(l,s))}function cx(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function MC(n){return function(){this.style.removeProperty(n)}}function DC(n,s,l){return function(){this.style.setProperty(n,s,l)}}function OC(n,s,l){return function(){var o=s.apply(this,arguments);o==null?this.style.removeProperty(n):this.style.setProperty(n,o,l)}}function LC(n,s,l){return arguments.length>1?this.each((s==null?MC:typeof s=="function"?OC:DC)(n,s,l??"")):sr(this.node(),n)}function sr(n,s){return n.style.getPropertyValue(s)||cx(n).getComputedStyle(n,null).getPropertyValue(s)}function RC(n){return function(){delete this[n]}}function HC(n,s){return function(){this[n]=s}}function UC(n,s){return function(){var l=s.apply(this,arguments);l==null?delete this[n]:this[n]=l}}function BC(n,s){return arguments.length>1?this.each((s==null?RC:typeof s=="function"?UC:HC)(n,s)):this.node()[n]}function ux(n){return n.trim().split(/^|\s+/)}function nf(n){return n.classList||new dx(n)}function dx(n){this._node=n,this._names=ux(n.getAttribute("class")||"")}dx.prototype={add:function(n){var s=this._names.indexOf(n);s<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var s=this._names.indexOf(n);s>=0&&(this._names.splice(s,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function fx(n,s){for(var l=nf(n),o=-1,c=s.length;++o<c;)l.add(s[o])}function gx(n,s){for(var l=nf(n),o=-1,c=s.length;++o<c;)l.remove(s[o])}function $C(n){return function(){fx(this,n)}}function VC(n){return function(){gx(this,n)}}function qC(n,s){return function(){(s.apply(this,arguments)?fx:gx)(this,n)}}function YC(n,s){var l=ux(n+"");if(arguments.length<2){for(var o=nf(this.node()),c=-1,d=l.length;++c<d;)if(!o.contains(l[c]))return!1;return!0}return this.each((typeof s=="function"?qC:s?$C:VC)(l,s))}function GC(){this.textContent=""}function XC(n){return function(){this.textContent=n}}function ZC(n){return function(){var s=n.apply(this,arguments);this.textContent=s??""}}function QC(n){return arguments.length?this.each(n==null?GC:(typeof n=="function"?ZC:XC)(n)):this.node().textContent}function FC(){this.innerHTML=""}function KC(n){return function(){this.innerHTML=n}}function IC(n){return function(){var s=n.apply(this,arguments);this.innerHTML=s??""}}function JC(n){return arguments.length?this.each(n==null?FC:(typeof n=="function"?IC:KC)(n)):this.node().innerHTML}function WC(){this.nextSibling&&this.parentNode.appendChild(this)}function PC(){return this.each(WC)}function e4(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function t4(){return this.each(e4)}function n4(n){var s=typeof n=="function"?n:sx(n);return this.select(function(){return this.appendChild(s.apply(this,arguments))})}function a4(){return null}function s4(n,s){var l=typeof n=="function"?n:sx(n),o=s==null?a4:typeof s=="function"?s:tf(s);return this.select(function(){return this.insertBefore(l.apply(this,arguments),o.apply(this,arguments)||null)})}function r4(){var n=this.parentNode;n&&n.removeChild(this)}function i4(){return this.each(r4)}function l4(){var n=this.cloneNode(!1),s=this.parentNode;return s?s.insertBefore(n,this.nextSibling):n}function o4(){var n=this.cloneNode(!0),s=this.parentNode;return s?s.insertBefore(n,this.nextSibling):n}function c4(n){return this.select(n?o4:l4)}function u4(n){return arguments.length?this.property("__data__",n):this.node().__data__}function d4(n){return function(s){n.call(this,s,this.__data__)}}function f4(n){return n.trim().split(/^|\s+/).map(function(s){var l="",o=s.indexOf(".");return o>=0&&(l=s.slice(o+1),s=s.slice(0,o)),{type:s,name:l}})}function g4(n){return function(){var s=this.__on;if(s){for(var l=0,o=-1,c=s.length,d;l<c;++l)d=s[l],(!n.type||d.type===n.type)&&d.name===n.name?this.removeEventListener(d.type,d.listener,d.options):s[++o]=d;++o?s.length=o:delete this.__on}}}function h4(n,s,l){return function(){var o=this.__on,c,d=d4(s);if(o){for(var f=0,h=o.length;f<h;++f)if((c=o[f]).type===n.type&&c.name===n.name){this.removeEventListener(c.type,c.listener,c.options),this.addEventListener(c.type,c.listener=d,c.options=l),c.value=s;return}}this.addEventListener(n.type,d,l),c={type:n.type,name:n.name,value:s,listener:d,options:l},o?o.push(c):this.__on=[c]}}function m4(n,s,l){var o=f4(n+""),c,d=o.length,f;if(arguments.length<2){var h=this.node().__on;if(h){for(var p=0,m=h.length,y;p<m;++p)for(c=0,y=h[p];c<d;++c)if((f=o[c]).type===y.type&&f.name===y.name)return y.value}return}for(h=s?h4:g4,c=0;c<d;++c)this.each(h(o[c],s,l));return this}function hx(n,s,l){var o=cx(n),c=o.CustomEvent;typeof c=="function"?c=new c(s,l):(c=o.document.createEvent("Event"),l?(c.initEvent(s,l.bubbles,l.cancelable),c.detail=l.detail):c.initEvent(s,!1,!1)),n.dispatchEvent(c)}function p4(n,s){return function(){return hx(this,n,s)}}function x4(n,s){return function(){return hx(this,n,s.apply(this,arguments))}}function y4(n,s){return this.each((typeof s=="function"?x4:p4)(n,s))}function*b4(){for(var n=this._groups,s=0,l=n.length;s<l;++s)for(var o=n[s],c=0,d=o.length,f;c<d;++c)(f=o[c])&&(yield f)}var mx=[null];function Ut(n,s){this._groups=n,this._parents=s}function Ai(){return new Ut([[document.documentElement]],mx)}function v4(){return this}Ut.prototype=Ai.prototype={constructor:Ut,select:Zk,selectAll:Ik,selectChild:eC,selectChildren:sC,filter:rC,data:dC,enter:iC,exit:gC,join:hC,merge:mC,selection:v4,order:pC,sort:xC,call:bC,nodes:vC,node:NC,size:jC,empty:wC,each:SC,attr:TC,style:LC,property:BC,classed:YC,text:QC,html:JC,raise:PC,lower:t4,append:n4,insert:s4,remove:i4,clone:c4,datum:u4,on:m4,dispatch:y4,[Symbol.iterator]:b4};function Ht(n){return typeof n=="string"?new Ut([[document.querySelector(n)]],[document.documentElement]):new Ut([[n]],mx)}function N4(n){let s;for(;s=n.sourceEvent;)n=s;return n}function en(n,s){if(n=N4(n),s===void 0&&(s=n.currentTarget),s){var l=s.ownerSVGElement||s;if(l.createSVGPoint){var o=l.createSVGPoint();return o.x=n.clientX,o.y=n.clientY,o=o.matrixTransform(s.getScreenCTM().inverse()),[o.x,o.y]}if(s.getBoundingClientRect){var c=s.getBoundingClientRect();return[n.clientX-c.left-s.clientLeft,n.clientY-c.top-s.clientTop]}}return[n.pageX,n.pageY]}const j4={passive:!1},vi={capture:!0,passive:!1};function Sd(n){n.stopImmediatePropagation()}function nr(n){n.preventDefault(),n.stopImmediatePropagation()}function px(n){var s=n.document.documentElement,l=Ht(n).on("dragstart.drag",nr,vi);"onselectstart"in s?l.on("selectstart.drag",nr,vi):(s.__noselect=s.style.MozUserSelect,s.style.MozUserSelect="none")}function xx(n,s){var l=n.document.documentElement,o=Ht(n).on("dragstart.drag",null);s&&(o.on("click.drag",nr,vi),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in l?o.on("selectstart.drag",null):(l.style.MozUserSelect=l.__noselect,delete l.__noselect)}const io=n=>()=>n;function Bd(n,{sourceEvent:s,subject:l,target:o,identifier:c,active:d,x:f,y:h,dx:p,dy:m,dispatch:y}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:s,enumerable:!0,configurable:!0},subject:{value:l,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:c,enumerable:!0,configurable:!0},active:{value:d,enumerable:!0,configurable:!0},x:{value:f,enumerable:!0,configurable:!0},y:{value:h,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:y}})}Bd.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function w4(n){return!n.ctrlKey&&!n.button}function S4(){return this.parentNode}function _4(n,s){return s??{x:n.x,y:n.y}}function k4(){return navigator.maxTouchPoints||"ontouchstart"in this}function yx(){var n=w4,s=S4,l=_4,o=k4,c={},d=Ro("start","drag","end"),f=0,h,p,m,y,x=0;function v(E){E.on("mousedown.drag",j).filter(o).on("touchstart.drag",z).on("touchmove.drag",A,j4).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function j(E,L){if(!(y||!n.call(this,E,L))){var B=N(this,s.call(this,E,L),E,L,"mouse");B&&(Ht(E.view).on("mousemove.drag",w,vi).on("mouseup.drag",T,vi),px(E.view),Sd(E),m=!1,h=E.clientX,p=E.clientY,B("start",E))}}function w(E){if(nr(E),!m){var L=E.clientX-h,B=E.clientY-p;m=L*L+B*B>x}c.mouse("drag",E)}function T(E){Ht(E.view).on("mousemove.drag mouseup.drag",null),xx(E.view,m),nr(E),c.mouse("end",E)}function z(E,L){if(n.call(this,E,L)){var B=E.changedTouches,V=s.call(this,E,L),X=B.length,H,K;for(H=0;H<X;++H)(K=N(this,V,E,L,B[H].identifier,B[H]))&&(Sd(E),K("start",E,B[H]))}}function A(E){var L=E.changedTouches,B=L.length,V,X;for(V=0;V<B;++V)(X=c[L[V].identifier])&&(nr(E),X("drag",E,L[V]))}function k(E){var L=E.changedTouches,B=L.length,V,X;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),V=0;V<B;++V)(X=c[L[V].identifier])&&(Sd(E),X("end",E,L[V]))}function N(E,L,B,V,X,H){var K=d.copy(),q=en(H||B,L),Z,Q,C;if((C=l.call(E,new Bd("beforestart",{sourceEvent:B,target:v,identifier:X,active:f,x:q[0],y:q[1],dx:0,dy:0,dispatch:K}),V))!=null)return Z=C.x-q[0]||0,Q=C.y-q[1]||0,function D(_,O,U){var Y=q,te;switch(_){case"start":c[X]=D,te=f++;break;case"end":delete c[X],--f;case"drag":q=en(U||O,L),te=f;break}K.call(_,E,new Bd(_,{sourceEvent:O,subject:C,target:v,identifier:X,active:te,x:q[0]+Z,y:q[1]+Q,dx:q[0]-Y[0],dy:q[1]-Y[1],dispatch:K}),V)}}return v.filter=function(E){return arguments.length?(n=typeof E=="function"?E:io(!!E),v):n},v.container=function(E){return arguments.length?(s=typeof E=="function"?E:io(E),v):s},v.subject=function(E){return arguments.length?(l=typeof E=="function"?E:io(E),v):l},v.touchable=function(E){return arguments.length?(o=typeof E=="function"?E:io(!!E),v):o},v.on=function(){var E=d.on.apply(d,arguments);return E===d?v:E},v.clickDistance=function(E){return arguments.length?(x=(E=+E)*E,v):Math.sqrt(x)},v}var rr=0,ui=0,oi=0,bx=1e3,So,di,_o=0,ts=0,Uo=0,Ni=typeof performance=="object"&&performance.now?performance:Date,vx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function af(){return ts||(vx(C4),ts=Ni.now()+Uo)}function C4(){ts=0}function ko(){this._call=this._time=this._next=null}ko.prototype=Nx.prototype={constructor:ko,restart:function(n,s,l){if(typeof n!="function")throw new TypeError("callback is not a function");l=(l==null?af():+l)+(s==null?0:+s),!this._next&&di!==this&&(di?di._next=this:So=this,di=this),this._call=n,this._time=l,$d()},stop:function(){this._call&&(this._call=null,this._time=1/0,$d())}};function Nx(n,s,l){var o=new ko;return o.restart(n,s,l),o}function E4(){af(),++rr;for(var n=So,s;n;)(s=ts-n._time)>=0&&n._call.call(void 0,s),n=n._next;--rr}function B0(){ts=(_o=Ni.now())+Uo,rr=ui=0;try{E4()}finally{rr=0,A4(),ts=0}}function z4(){var n=Ni.now(),s=n-_o;s>bx&&(Uo-=s,_o=n)}function A4(){for(var n,s=So,l,o=1/0;s;)s._call?(o>s._time&&(o=s._time),n=s,s=s._next):(l=s._next,s._next=null,s=n?n._next=l:So=l);di=n,$d(o)}function $d(n){if(!rr){ui&&(ui=clearTimeout(ui));var s=n-ts;s>24?(n<1/0&&(ui=setTimeout(B0,n-Ni.now()-Uo)),oi&&(oi=clearInterval(oi))):(oi||(_o=Ni.now(),oi=setInterval(z4,bx)),rr=1,vx(B0))}}function $0(n,s,l){var o=new ko;return s=s==null?0:+s,o.restart(c=>{o.stop(),n(c+s)},s,l),o}var T4=Ro("start","end","cancel","interrupt"),M4=[],jx=0,V0=1,Vd=2,po=3,q0=4,qd=5,xo=6;function Bo(n,s,l,o,c,d){var f=n.__transition;if(!f)n.__transition={};else if(l in f)return;D4(n,l,{name:s,index:o,group:c,on:T4,tween:M4,time:d.time,delay:d.delay,duration:d.duration,ease:d.ease,timer:null,state:jx})}function sf(n,s){var l=rn(n,s);if(l.state>jx)throw new Error("too late; already scheduled");return l}function yn(n,s){var l=rn(n,s);if(l.state>po)throw new Error("too late; already running");return l}function rn(n,s){var l=n.__transition;if(!l||!(l=l[s]))throw new Error("transition not found");return l}function D4(n,s,l){var o=n.__transition,c;o[s]=l,l.timer=Nx(d,0,l.time);function d(m){l.state=V0,l.timer.restart(f,l.delay,l.time),l.delay<=m&&f(m-l.delay)}function f(m){var y,x,v,j;if(l.state!==V0)return p();for(y in o)if(j=o[y],j.name===l.name){if(j.state===po)return $0(f);j.state===q0?(j.state=xo,j.timer.stop(),j.on.call("interrupt",n,n.__data__,j.index,j.group),delete o[y]):+y<s&&(j.state=xo,j.timer.stop(),j.on.call("cancel",n,n.__data__,j.index,j.group),delete o[y])}if($0(function(){l.state===po&&(l.state=q0,l.timer.restart(h,l.delay,l.time),h(m))}),l.state=Vd,l.on.call("start",n,n.__data__,l.index,l.group),l.state===Vd){for(l.state=po,c=new Array(v=l.tween.length),y=0,x=-1;y<v;++y)(j=l.tween[y].value.call(n,n.__data__,l.index,l.group))&&(c[++x]=j);c.length=x+1}}function h(m){for(var y=m<l.duration?l.ease.call(null,m/l.duration):(l.timer.restart(p),l.state=qd,1),x=-1,v=c.length;++x<v;)c[x].call(n,y);l.state===qd&&(l.on.call("end",n,n.__data__,l.index,l.group),p())}function p(){l.state=xo,l.timer.stop(),delete o[s];for(var m in o)return;delete n.__transition}}function yo(n,s){var l=n.__transition,o,c,d=!0,f;if(l){s=s==null?null:s+"";for(f in l){if((o=l[f]).name!==s){d=!1;continue}c=o.state>Vd&&o.state<qd,o.state=xo,o.timer.stop(),o.on.call(c?"interrupt":"cancel",n,n.__data__,o.index,o.group),delete l[f]}d&&delete n.__transition}}function O4(n){return this.each(function(){yo(this,n)})}function L4(n,s){var l,o;return function(){var c=yn(this,n),d=c.tween;if(d!==l){o=l=d;for(var f=0,h=o.length;f<h;++f)if(o[f].name===s){o=o.slice(),o.splice(f,1);break}}c.tween=o}}function R4(n,s,l){var o,c;if(typeof l!="function")throw new Error;return function(){var d=yn(this,n),f=d.tween;if(f!==o){c=(o=f).slice();for(var h={name:s,value:l},p=0,m=c.length;p<m;++p)if(c[p].name===s){c[p]=h;break}p===m&&c.push(h)}d.tween=c}}function H4(n,s){var l=this._id;if(n+="",arguments.length<2){for(var o=rn(this.node(),l).tween,c=0,d=o.length,f;c<d;++c)if((f=o[c]).name===n)return f.value;return null}return this.each((s==null?L4:R4)(l,n,s))}function rf(n,s,l){var o=n._id;return n.each(function(){var c=yn(this,o);(c.value||(c.value={}))[s]=l.apply(this,arguments)}),function(c){return rn(c,o).value[s]}}function wx(n,s){var l;return(typeof s=="number"?Iv:s instanceof i0?r0:(l=i0(s))?(s=l,r0):Jv)(n,s)}function U4(n){return function(){this.removeAttribute(n)}}function B4(n){return function(){this.removeAttributeNS(n.space,n.local)}}function $4(n,s,l){var o,c=l+"",d;return function(){var f=this.getAttribute(n);return f===c?null:f===o?d:d=s(o=f,l)}}function V4(n,s,l){var o,c=l+"",d;return function(){var f=this.getAttributeNS(n.space,n.local);return f===c?null:f===o?d:d=s(o=f,l)}}function q4(n,s,l){var o,c,d;return function(){var f,h=l(this),p;return h==null?void this.removeAttribute(n):(f=this.getAttribute(n),p=h+"",f===p?null:f===o&&p===c?d:(c=p,d=s(o=f,h)))}}function Y4(n,s,l){var o,c,d;return function(){var f,h=l(this),p;return h==null?void this.removeAttributeNS(n.space,n.local):(f=this.getAttributeNS(n.space,n.local),p=h+"",f===p?null:f===o&&p===c?d:(c=p,d=s(o=f,h)))}}function G4(n,s){var l=Ho(n),o=l==="transform"?Wv:wx;return this.attrTween(n,typeof s=="function"?(l.local?Y4:q4)(l,o,rf(this,"attr."+n,s)):s==null?(l.local?B4:U4)(l):(l.local?V4:$4)(l,o,s))}function X4(n,s){return function(l){this.setAttribute(n,s.call(this,l))}}function Z4(n,s){return function(l){this.setAttributeNS(n.space,n.local,s.call(this,l))}}function Q4(n,s){var l,o;function c(){var d=s.apply(this,arguments);return d!==o&&(l=(o=d)&&Z4(n,d)),l}return c._value=s,c}function F4(n,s){var l,o;function c(){var d=s.apply(this,arguments);return d!==o&&(l=(o=d)&&X4(n,d)),l}return c._value=s,c}function K4(n,s){var l="attr."+n;if(arguments.length<2)return(l=this.tween(l))&&l._value;if(s==null)return this.tween(l,null);if(typeof s!="function")throw new Error;var o=Ho(n);return this.tween(l,(o.local?Q4:F4)(o,s))}function I4(n,s){return function(){sf(this,n).delay=+s.apply(this,arguments)}}function J4(n,s){return s=+s,function(){sf(this,n).delay=s}}function W4(n){var s=this._id;return arguments.length?this.each((typeof n=="function"?I4:J4)(s,n)):rn(this.node(),s).delay}function P4(n,s){return function(){yn(this,n).duration=+s.apply(this,arguments)}}function e5(n,s){return s=+s,function(){yn(this,n).duration=s}}function t5(n){var s=this._id;return arguments.length?this.each((typeof n=="function"?P4:e5)(s,n)):rn(this.node(),s).duration}function n5(n,s){if(typeof s!="function")throw new Error;return function(){yn(this,n).ease=s}}function a5(n){var s=this._id;return arguments.length?this.each(n5(s,n)):rn(this.node(),s).ease}function s5(n,s){return function(){var l=s.apply(this,arguments);if(typeof l!="function")throw new Error;yn(this,n).ease=l}}function r5(n){if(typeof n!="function")throw new Error;return this.each(s5(this._id,n))}function i5(n){typeof n!="function"&&(n=ix(n));for(var s=this._groups,l=s.length,o=new Array(l),c=0;c<l;++c)for(var d=s[c],f=d.length,h=o[c]=[],p,m=0;m<f;++m)(p=d[m])&&n.call(p,p.__data__,m,d)&&h.push(p);return new Gn(o,this._parents,this._name,this._id)}function l5(n){if(n._id!==this._id)throw new Error;for(var s=this._groups,l=n._groups,o=s.length,c=l.length,d=Math.min(o,c),f=new Array(o),h=0;h<d;++h)for(var p=s[h],m=l[h],y=p.length,x=f[h]=new Array(y),v,j=0;j<y;++j)(v=p[j]||m[j])&&(x[j]=v);for(;h<o;++h)f[h]=s[h];return new Gn(f,this._parents,this._name,this._id)}function o5(n){return(n+"").trim().split(/^|\s+/).every(function(s){var l=s.indexOf(".");return l>=0&&(s=s.slice(0,l)),!s||s==="start"})}function c5(n,s,l){var o,c,d=o5(s)?sf:yn;return function(){var f=d(this,n),h=f.on;h!==o&&(c=(o=h).copy()).on(s,l),f.on=c}}function u5(n,s){var l=this._id;return arguments.length<2?rn(this.node(),l).on.on(n):this.each(c5(l,n,s))}function d5(n){return function(){var s=this.parentNode;for(var l in this.__transition)if(+l!==n)return;s&&s.removeChild(this)}}function f5(){return this.on("end.remove",d5(this._id))}function g5(n){var s=this._name,l=this._id;typeof n!="function"&&(n=tf(n));for(var o=this._groups,c=o.length,d=new Array(c),f=0;f<c;++f)for(var h=o[f],p=h.length,m=d[f]=new Array(p),y,x,v=0;v<p;++v)(y=h[v])&&(x=n.call(y,y.__data__,v,h))&&("__data__"in y&&(x.__data__=y.__data__),m[v]=x,Bo(m[v],s,l,v,m,rn(y,l)));return new Gn(d,this._parents,s,l)}function h5(n){var s=this._name,l=this._id;typeof n!="function"&&(n=rx(n));for(var o=this._groups,c=o.length,d=[],f=[],h=0;h<c;++h)for(var p=o[h],m=p.length,y,x=0;x<m;++x)if(y=p[x]){for(var v=n.call(y,y.__data__,x,p),j,w=rn(y,l),T=0,z=v.length;T<z;++T)(j=v[T])&&Bo(j,s,l,T,v,w);d.push(v),f.push(y)}return new Gn(d,f,s,l)}var m5=Ai.prototype.constructor;function p5(){return new m5(this._groups,this._parents)}function x5(n,s){var l,o,c;return function(){var d=sr(this,n),f=(this.style.removeProperty(n),sr(this,n));return d===f?null:d===l&&f===o?c:c=s(l=d,o=f)}}function Sx(n){return function(){this.style.removeProperty(n)}}function y5(n,s,l){var o,c=l+"",d;return function(){var f=sr(this,n);return f===c?null:f===o?d:d=s(o=f,l)}}function b5(n,s,l){var o,c,d;return function(){var f=sr(this,n),h=l(this),p=h+"";return h==null&&(p=h=(this.style.removeProperty(n),sr(this,n))),f===p?null:f===o&&p===c?d:(c=p,d=s(o=f,h))}}function v5(n,s){var l,o,c,d="style."+s,f="end."+d,h;return function(){var p=yn(this,n),m=p.on,y=p.value[d]==null?h||(h=Sx(s)):void 0;(m!==l||c!==y)&&(o=(l=m).copy()).on(f,c=y),p.on=o}}function N5(n,s,l){var o=(n+="")=="transform"?Pv:wx;return s==null?this.styleTween(n,x5(n,o)).on("end.style."+n,Sx(n)):typeof s=="function"?this.styleTween(n,b5(n,o,rf(this,"style."+n,s))).each(v5(this._id,n)):this.styleTween(n,y5(n,o,s),l).on("end.style."+n,null)}function j5(n,s,l){return function(o){this.style.setProperty(n,s.call(this,o),l)}}function w5(n,s,l){var o,c;function d(){var f=s.apply(this,arguments);return f!==c&&(o=(c=f)&&j5(n,f,l)),o}return d._value=s,d}function S5(n,s,l){var o="style."+(n+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(s==null)return this.tween(o,null);if(typeof s!="function")throw new Error;return this.tween(o,w5(n,s,l??""))}function _5(n){return function(){this.textContent=n}}function k5(n){return function(){var s=n(this);this.textContent=s??""}}function C5(n){return this.tween("text",typeof n=="function"?k5(rf(this,"text",n)):_5(n==null?"":n+""))}function E5(n){return function(s){this.textContent=n.call(this,s)}}function z5(n){var s,l;function o(){var c=n.apply(this,arguments);return c!==l&&(s=(l=c)&&E5(c)),s}return o._value=n,o}function A5(n){var s="text";if(arguments.length<1)return(s=this.tween(s))&&s._value;if(n==null)return this.tween(s,null);if(typeof n!="function")throw new Error;return this.tween(s,z5(n))}function T5(){for(var n=this._name,s=this._id,l=_x(),o=this._groups,c=o.length,d=0;d<c;++d)for(var f=o[d],h=f.length,p,m=0;m<h;++m)if(p=f[m]){var y=rn(p,s);Bo(p,n,l,m,f,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new Gn(o,this._parents,n,l)}function M5(){var n,s,l=this,o=l._id,c=l.size();return new Promise(function(d,f){var h={value:f},p={value:function(){--c===0&&d()}};l.each(function(){var m=yn(this,o),y=m.on;y!==n&&(s=(n=y).copy(),s._.cancel.push(h),s._.interrupt.push(h),s._.end.push(p)),m.on=s}),c===0&&d()})}var D5=0;function Gn(n,s,l,o){this._groups=n,this._parents=s,this._name=l,this._id=o}function _x(){return++D5}var qn=Ai.prototype;Gn.prototype={constructor:Gn,select:g5,selectAll:h5,selectChild:qn.selectChild,selectChildren:qn.selectChildren,filter:i5,merge:l5,selection:p5,transition:T5,call:qn.call,nodes:qn.nodes,node:qn.node,size:qn.size,empty:qn.empty,each:qn.each,on:u5,attr:G4,attrTween:K4,style:N5,styleTween:S5,text:C5,textTween:A5,remove:f5,tween:H4,delay:W4,duration:t5,ease:a5,easeVarying:r5,end:M5,[Symbol.iterator]:qn[Symbol.iterator]};function O5(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var L5={time:null,delay:0,duration:250,ease:O5};function R5(n,s){for(var l;!(l=n.__transition)||!(l=l[s]);)if(!(n=n.parentNode))throw new Error(`transition ${s} not found`);return l}function H5(n){var s,l;n instanceof Gn?(s=n._id,n=n._name):(s=_x(),(l=L5).time=af(),n=n==null?null:n+"");for(var o=this._groups,c=o.length,d=0;d<c;++d)for(var f=o[d],h=f.length,p,m=0;m<h;++m)(p=f[m])&&Bo(p,n,s,m,f,l||R5(p,s));return new Gn(o,this._parents,n,s)}Ai.prototype.interrupt=O4;Ai.prototype.transition=H5;const lo=n=>()=>n;function U5(n,{sourceEvent:s,target:l,transform:o,dispatch:c}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:s,enumerable:!0,configurable:!0},target:{value:l,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:c}})}function Yn(n,s,l){this.k=n,this.x=s,this.y=l}Yn.prototype={constructor:Yn,scale:function(n){return n===1?this:new Yn(this.k*n,this.x,this.y)},translate:function(n,s){return n===0&s===0?this:new Yn(this.k,this.x+this.k*n,this.y+this.k*s)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $o=new Yn(1,0,0);kx.prototype=Yn.prototype;function kx(n){for(;!n.__zoom;)if(!(n=n.parentNode))return $o;return n.__zoom}function _d(n){n.stopImmediatePropagation()}function ci(n){n.preventDefault(),n.stopImmediatePropagation()}function B5(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function $5(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function Y0(){return this.__zoom||$o}function V5(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function q5(){return navigator.maxTouchPoints||"ontouchstart"in this}function Y5(n,s,l){var o=n.invertX(s[0][0])-l[0][0],c=n.invertX(s[1][0])-l[1][0],d=n.invertY(s[0][1])-l[0][1],f=n.invertY(s[1][1])-l[1][1];return n.translate(c>o?(o+c)/2:Math.min(0,o)||Math.max(0,c),f>d?(d+f)/2:Math.min(0,d)||Math.max(0,f))}function Cx(){var n=B5,s=$5,l=Y5,o=V5,c=q5,d=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],h=250,p=go,m=Ro("start","zoom","end"),y,x,v,j=500,w=150,T=0,z=10;function A(C){C.property("__zoom",Y0).on("wheel.zoom",X,{passive:!1}).on("mousedown.zoom",H).on("dblclick.zoom",K).filter(c).on("touchstart.zoom",q).on("touchmove.zoom",Z).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}A.transform=function(C,D,_,O){var U=C.selection?C.selection():C;U.property("__zoom",Y0),C!==U?L(C,D,_,O):U.interrupt().each(function(){B(this,arguments).event(O).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},A.scaleBy=function(C,D,_,O){A.scaleTo(C,function(){var U=this.__zoom.k,Y=typeof D=="function"?D.apply(this,arguments):D;return U*Y},_,O)},A.scaleTo=function(C,D,_,O){A.transform(C,function(){var U=s.apply(this,arguments),Y=this.__zoom,te=_==null?E(U):typeof _=="function"?_.apply(this,arguments):_,F=Y.invert(te),P=typeof D=="function"?D.apply(this,arguments):D;return l(N(k(Y,P),te,F),U,f)},_,O)},A.translateBy=function(C,D,_,O){A.transform(C,function(){return l(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof _=="function"?_.apply(this,arguments):_),s.apply(this,arguments),f)},null,O)},A.translateTo=function(C,D,_,O,U){A.transform(C,function(){var Y=s.apply(this,arguments),te=this.__zoom,F=O==null?E(Y):typeof O=="function"?O.apply(this,arguments):O;return l($o.translate(F[0],F[1]).scale(te.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof _=="function"?-_.apply(this,arguments):-_),Y,f)},O,U)};function k(C,D){return D=Math.max(d[0],Math.min(d[1],D)),D===C.k?C:new Yn(D,C.x,C.y)}function N(C,D,_){var O=D[0]-_[0]*C.k,U=D[1]-_[1]*C.k;return O===C.x&&U===C.y?C:new Yn(C.k,O,U)}function E(C){return[(+C[0][0]+ +C[1][0])/2,(+C[0][1]+ +C[1][1])/2]}function L(C,D,_,O){C.on("start.zoom",function(){B(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){B(this,arguments).event(O).end()}).tween("zoom",function(){var U=this,Y=arguments,te=B(U,Y).event(O),F=s.apply(U,Y),P=_==null?E(F):typeof _=="function"?_.apply(U,Y):_,se=Math.max(F[1][0]-F[0][0],F[1][1]-F[0][1]),le=U.__zoom,fe=typeof D=="function"?D.apply(U,Y):D,be=p(le.invert(P).concat(se/le.k),fe.invert(P).concat(se/fe.k));return function(he){if(he===1)he=fe;else{var oe=be(he),ue=se/oe[2];he=new Yn(ue,P[0]-oe[0]*ue,P[1]-oe[1]*ue)}te.zoom(null,he)}})}function B(C,D,_){return!_&&C.__zooming||new V(C,D)}function V(C,D){this.that=C,this.args=D,this.active=0,this.sourceEvent=null,this.extent=s.apply(C,D),this.taps=0}V.prototype={event:function(C){return C&&(this.sourceEvent=C),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(C,D){return this.mouse&&C!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&C!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&C!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(C){var D=Ht(this.that).datum();m.call(C,this.that,new U5(C,{sourceEvent:this.sourceEvent,target:A,transform:this.that.__zoom,dispatch:m}),D)}};function X(C,...D){if(!n.apply(this,arguments))return;var _=B(this,D).event(C),O=this.__zoom,U=Math.max(d[0],Math.min(d[1],O.k*Math.pow(2,o.apply(this,arguments)))),Y=en(C);if(_.wheel)(_.mouse[0][0]!==Y[0]||_.mouse[0][1]!==Y[1])&&(_.mouse[1]=O.invert(_.mouse[0]=Y)),clearTimeout(_.wheel);else{if(O.k===U)return;_.mouse=[Y,O.invert(Y)],yo(this),_.start()}ci(C),_.wheel=setTimeout(te,w),_.zoom("mouse",l(N(k(O,U),_.mouse[0],_.mouse[1]),_.extent,f));function te(){_.wheel=null,_.end()}}function H(C,...D){if(v||!n.apply(this,arguments))return;var _=C.currentTarget,O=B(this,D,!0).event(C),U=Ht(C.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",se,!0),Y=en(C,_),te=C.clientX,F=C.clientY;px(C.view),_d(C),O.mouse=[Y,this.__zoom.invert(Y)],yo(this),O.start();function P(le){if(ci(le),!O.moved){var fe=le.clientX-te,be=le.clientY-F;O.moved=fe*fe+be*be>T}O.event(le).zoom("mouse",l(N(O.that.__zoom,O.mouse[0]=en(le,_),O.mouse[1]),O.extent,f))}function se(le){U.on("mousemove.zoom mouseup.zoom",null),xx(le.view,O.moved),ci(le),O.event(le).end()}}function K(C,...D){if(n.apply(this,arguments)){var _=this.__zoom,O=en(C.changedTouches?C.changedTouches[0]:C,this),U=_.invert(O),Y=_.k*(C.shiftKey?.5:2),te=l(N(k(_,Y),O,U),s.apply(this,D),f);ci(C),h>0?Ht(this).transition().duration(h).call(L,te,O,C):Ht(this).call(A.transform,te,O,C)}}function q(C,...D){if(n.apply(this,arguments)){var _=C.touches,O=_.length,U=B(this,D,C.changedTouches.length===O).event(C),Y,te,F,P;for(_d(C),te=0;te<O;++te)F=_[te],P=en(F,this),P=[P,this.__zoom.invert(P),F.identifier],U.touch0?!U.touch1&&U.touch0[2]!==P[2]&&(U.touch1=P,U.taps=0):(U.touch0=P,Y=!0,U.taps=1+!!y);y&&(y=clearTimeout(y)),Y&&(U.taps<2&&(x=P[0],y=setTimeout(function(){y=null},j)),yo(this),U.start())}}function Z(C,...D){if(this.__zooming){var _=B(this,D).event(C),O=C.changedTouches,U=O.length,Y,te,F,P;for(ci(C),Y=0;Y<U;++Y)te=O[Y],F=en(te,this),_.touch0&&_.touch0[2]===te.identifier?_.touch0[0]=F:_.touch1&&_.touch1[2]===te.identifier&&(_.touch1[0]=F);if(te=_.that.__zoom,_.touch1){var se=_.touch0[0],le=_.touch0[1],fe=_.touch1[0],be=_.touch1[1],he=(he=fe[0]-se[0])*he+(he=fe[1]-se[1])*he,oe=(oe=be[0]-le[0])*oe+(oe=be[1]-le[1])*oe;te=k(te,Math.sqrt(he/oe)),F=[(se[0]+fe[0])/2,(se[1]+fe[1])/2],P=[(le[0]+be[0])/2,(le[1]+be[1])/2]}else if(_.touch0)F=_.touch0[0],P=_.touch0[1];else return;_.zoom("touch",l(N(te,F,P),_.extent,f))}}function Q(C,...D){if(this.__zooming){var _=B(this,D).event(C),O=C.changedTouches,U=O.length,Y,te;for(_d(C),v&&clearTimeout(v),v=setTimeout(function(){v=null},j),Y=0;Y<U;++Y)te=O[Y],_.touch0&&_.touch0[2]===te.identifier?delete _.touch0:_.touch1&&_.touch1[2]===te.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(te=en(te,this),Math.hypot(x[0]-te[0],x[1]-te[1])<z)){var F=Ht(this).on("dblclick.zoom");F&&F.apply(this,arguments)}}}return A.wheelDelta=function(C){return arguments.length?(o=typeof C=="function"?C:lo(+C),A):o},A.filter=function(C){return arguments.length?(n=typeof C=="function"?C:lo(!!C),A):n},A.touchable=function(C){return arguments.length?(c=typeof C=="function"?C:lo(!!C),A):c},A.extent=function(C){return arguments.length?(s=typeof C=="function"?C:lo([[+C[0][0],+C[0][1]],[+C[1][0],+C[1][1]]]),A):s},A.scaleExtent=function(C){return arguments.length?(d[0]=+C[0],d[1]=+C[1],A):[d[0],d[1]]},A.translateExtent=function(C){return arguments.length?(f[0][0]=+C[0][0],f[1][0]=+C[1][0],f[0][1]=+C[0][1],f[1][1]=+C[1][1],A):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},A.constrain=function(C){return arguments.length?(l=C,A):l},A.duration=function(C){return arguments.length?(h=+C,A):h},A.interpolate=function(C){return arguments.length?(p=C,A):p},A.on=function(){var C=m.on.apply(m,arguments);return C===m?A:C},A.clickDistance=function(C){return arguments.length?(T=(C=+C)*C,A):Math.sqrt(T)},A.tapDistance=function(C){return arguments.length?(z=+C,A):z},A}const xn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:n=>`Node type "${n}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:n=>`The old edge with id=${n} does not exist.`,error009:n=>`Marker type "${n}" doesn't exist.`,error008:(n,{id:s,sourceHandle:l,targetHandle:o})=>`Couldn't create edge for ${n} handle id: "${n==="source"?l:o}", edge id: ${s}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:n=>`Edge type "${n}" not found. Using fallback type "default".`,error012:n=>`Node with id "${n}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(n="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${n}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},ji=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ex=["Enter"," ","Escape"],zx={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:n,x:s,y:l})=>`Moved selected node ${n}. New position, x: ${s}, y: ${l}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var ir;(function(n){n.Strict="strict",n.Loose="loose"})(ir||(ir={}));var Pa;(function(n){n.Free="free",n.Vertical="vertical",n.Horizontal="horizontal"})(Pa||(Pa={}));var wi;(function(n){n.Partial="partial",n.Full="full"})(wi||(wi={}));const Ax={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var wa;(function(n){n.Bezier="default",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n.SimpleBezier="simplebezier"})(wa||(wa={}));var Co;(function(n){n.Arrow="arrow",n.ArrowClosed="arrowclosed"})(Co||(Co={}));var me;(function(n){n.Left="left",n.Top="top",n.Right="right",n.Bottom="bottom"})(me||(me={}));const G0={[me.Left]:me.Right,[me.Right]:me.Left,[me.Top]:me.Bottom,[me.Bottom]:me.Top};function Tx(n){return n===null?null:n?"valid":"invalid"}const Mx=n=>"id"in n&&"source"in n&&"target"in n,G5=n=>"id"in n&&"position"in n&&!("source"in n)&&!("target"in n),lf=n=>"id"in n&&"internals"in n&&!("source"in n)&&!("target"in n),Ti=(n,s=[0,0])=>{const{width:l,height:o}=Xn(n),c=n.origin??s,d=l*c[0],f=o*c[1];return{x:n.position.x-d,y:n.position.y-f}},X5=(n,s={nodeOrigin:[0,0]})=>{if(n.length===0)return{x:0,y:0,width:0,height:0};const l=n.reduce((o,c)=>{const d=typeof c=="string";let f=!s.nodeLookup&&!d?c:void 0;s.nodeLookup&&(f=d?s.nodeLookup.get(c):lf(c)?c:s.nodeLookup.get(c.id));const h=f?Eo(f,s.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Vo(o,h)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return qo(l)},Mi=(n,s={})=>{let l={x:1/0,y:1/0,x2:-1/0,y2:-1/0},o=!1;return n.forEach(c=>{(s.filter===void 0||s.filter(c))&&(l=Vo(l,Eo(c)),o=!0)}),o?qo(l):{x:0,y:0,width:0,height:0}},of=(n,s,[l,o,c]=[0,0,1],d=!1,f=!1)=>{const h={...Oi(s,[l,o,c]),width:s.width/c,height:s.height/c},p=[];for(const m of n.values()){const{measured:y,selectable:x=!0,hidden:v=!1}=m;if(f&&!x||v)continue;const j=y.width??m.width??m.initialWidth??null,w=y.height??m.height??m.initialHeight??null,T=Si(h,or(m)),z=(j??0)*(w??0),A=d&&T>0;(!m.internals.handleBounds||A||T>=z||m.dragging)&&p.push(m)}return p},Z5=(n,s)=>{const l=new Set;return n.forEach(o=>{l.add(o.id)}),s.filter(o=>l.has(o.source)||l.has(o.target))};function Q5(n,s){const l=new Map,o=s?.nodes?new Set(s.nodes.map(c=>c.id)):null;return n.forEach(c=>{c.measured.width&&c.measured.height&&(s?.includeHiddenNodes||!c.hidden)&&(!o||o.has(c.id))&&l.set(c.id,c)}),l}async function F5({nodes:n,width:s,height:l,panZoom:o,minZoom:c,maxZoom:d},f){if(n.size===0)return Promise.resolve(!0);const h=Q5(n,f),p=Mi(h),m=cf(p,s,l,f?.minZoom??c,f?.maxZoom??d,f?.padding??.1);return await o.setViewport(m,{duration:f?.duration,ease:f?.ease,interpolate:f?.interpolate}),Promise.resolve(!0)}function Dx({nodeId:n,nextPosition:s,nodeLookup:l,nodeOrigin:o=[0,0],nodeExtent:c,onError:d}){const f=l.get(n),h=f.parentId?l.get(f.parentId):void 0,{x:p,y:m}=h?h.internals.positionAbsolute:{x:0,y:0},y=f.origin??o;let x=f.extent||c;if(f.extent==="parent"&&!f.expandParent)if(!h)d?.("005",xn.error005());else{const j=h.measured.width,w=h.measured.height;j&&w&&(x=[[p,m],[p+j,m+w]])}else h&&cr(f.extent)&&(x=[[f.extent[0][0]+p,f.extent[0][1]+m],[f.extent[1][0]+p,f.extent[1][1]+m]]);const v=cr(x)?ns(s,x,f.measured):s;return(f.measured.width===void 0||f.measured.height===void 0)&&d?.("015",xn.error015()),{position:{x:v.x-p+(f.measured.width??0)*y[0],y:v.y-m+(f.measured.height??0)*y[1]},positionAbsolute:v}}async function K5({nodesToRemove:n=[],edgesToRemove:s=[],nodes:l,edges:o,onBeforeDelete:c}){const d=new Set(n.map(v=>v.id)),f=[];for(const v of l){if(v.deletable===!1)continue;const j=d.has(v.id),w=!j&&v.parentId&&f.find(T=>T.id===v.parentId);(j||w)&&f.push(v)}const h=new Set(s.map(v=>v.id)),p=o.filter(v=>v.deletable!==!1),y=Z5(f,p);for(const v of p)h.has(v.id)&&!y.find(w=>w.id===v.id)&&y.push(v);if(!c)return{edges:y,nodes:f};const x=await c({nodes:f,edges:y});return typeof x=="boolean"?x?{edges:y,nodes:f}:{edges:[],nodes:[]}:x}const lr=(n,s=0,l=1)=>Math.min(Math.max(n,s),l),ns=(n={x:0,y:0},s,l)=>({x:lr(n.x,s[0][0],s[1][0]-(l?.width??0)),y:lr(n.y,s[0][1],s[1][1]-(l?.height??0))});function Ox(n,s,l){const{width:o,height:c}=Xn(l),{x:d,y:f}=l.internals.positionAbsolute;return ns(n,[[d,f],[d+o,f+c]],s)}const X0=(n,s,l)=>n<s?lr(Math.abs(n-s),1,s)/s:n>l?-lr(Math.abs(n-l),1,s)/s:0,Lx=(n,s,l=15,o=40)=>{const c=X0(n.x,o,s.width-o)*l,d=X0(n.y,o,s.height-o)*l;return[c,d]},Vo=(n,s)=>({x:Math.min(n.x,s.x),y:Math.min(n.y,s.y),x2:Math.max(n.x2,s.x2),y2:Math.max(n.y2,s.y2)}),Yd=({x:n,y:s,width:l,height:o})=>({x:n,y:s,x2:n+l,y2:s+o}),qo=({x:n,y:s,x2:l,y2:o})=>({x:n,y:s,width:l-n,height:o-s}),or=(n,s=[0,0])=>{const{x:l,y:o}=lf(n)?n.internals.positionAbsolute:Ti(n,s);return{x:l,y:o,width:n.measured?.width??n.width??n.initialWidth??0,height:n.measured?.height??n.height??n.initialHeight??0}},Eo=(n,s=[0,0])=>{const{x:l,y:o}=lf(n)?n.internals.positionAbsolute:Ti(n,s);return{x:l,y:o,x2:l+(n.measured?.width??n.width??n.initialWidth??0),y2:o+(n.measured?.height??n.height??n.initialHeight??0)}},Rx=(n,s)=>qo(Vo(Yd(n),Yd(s))),Si=(n,s)=>{const l=Math.max(0,Math.min(n.x+n.width,s.x+s.width)-Math.max(n.x,s.x)),o=Math.max(0,Math.min(n.y+n.height,s.y+s.height)-Math.max(n.y,s.y));return Math.ceil(l*o)},Z0=n=>tn(n.width)&&tn(n.height)&&tn(n.x)&&tn(n.y),tn=n=>!isNaN(n)&&isFinite(n),I5=(n,s)=>{},Di=(n,s=[1,1])=>({x:s[0]*Math.round(n.x/s[0]),y:s[1]*Math.round(n.y/s[1])}),Oi=({x:n,y:s},[l,o,c],d=!1,f=[1,1])=>{const h={x:(n-l)/c,y:(s-o)/c};return d?Di(h,f):h},zo=({x:n,y:s},[l,o,c])=>({x:n*c+l,y:s*c+o});function Js(n,s){if(typeof n=="number")return Math.floor((s-s/(1+n))*.5);if(typeof n=="string"&&n.endsWith("px")){const l=parseFloat(n);if(!Number.isNaN(l))return Math.floor(l)}if(typeof n=="string"&&n.endsWith("%")){const l=parseFloat(n);if(!Number.isNaN(l))return Math.floor(s*l*.01)}return console.error(`[React Flow] The padding value "${n}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function J5(n,s,l){if(typeof n=="string"||typeof n=="number"){const o=Js(n,l),c=Js(n,s);return{top:o,right:c,bottom:o,left:c,x:c*2,y:o*2}}if(typeof n=="object"){const o=Js(n.top??n.y??0,l),c=Js(n.bottom??n.y??0,l),d=Js(n.left??n.x??0,s),f=Js(n.right??n.x??0,s);return{top:o,right:f,bottom:c,left:d,x:d+f,y:o+c}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function W5(n,s,l,o,c,d){const{x:f,y:h}=zo(n,[s,l,o]),{x:p,y:m}=zo({x:n.x+n.width,y:n.y+n.height},[s,l,o]),y=c-p,x=d-m;return{left:Math.floor(f),top:Math.floor(h),right:Math.floor(y),bottom:Math.floor(x)}}const cf=(n,s,l,o,c,d)=>{const f=J5(d,s,l),h=(s-f.x)/n.width,p=(l-f.y)/n.height,m=Math.min(h,p),y=lr(m,o,c),x=n.x+n.width/2,v=n.y+n.height/2,j=s/2-x*y,w=l/2-v*y,T=W5(n,j,w,y,s,l),z={left:Math.min(T.left-f.left,0),top:Math.min(T.top-f.top,0),right:Math.min(T.right-f.right,0),bottom:Math.min(T.bottom-f.bottom,0)};return{x:j-z.left+z.right,y:w-z.top+z.bottom,zoom:y}},_i=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function cr(n){return n!=null&&n!=="parent"}function Xn(n){return{width:n.measured?.width??n.width??n.initialWidth??0,height:n.measured?.height??n.height??n.initialHeight??0}}function Hx(n){return(n.measured?.width??n.width??n.initialWidth)!==void 0&&(n.measured?.height??n.height??n.initialHeight)!==void 0}function Ux(n,s={width:0,height:0},l,o,c){const d={...n},f=o.get(l);if(f){const h=f.origin||c;d.x+=f.internals.positionAbsolute.x-(s.width??0)*h[0],d.y+=f.internals.positionAbsolute.y-(s.height??0)*h[1]}return d}function Q0(n,s){if(n.size!==s.size)return!1;for(const l of n)if(!s.has(l))return!1;return!0}function P5(){let n,s;return{promise:new Promise((o,c)=>{n=o,s=c}),resolve:n,reject:s}}function e3(n){return{...zx,...n||{}}}function mi(n,{snapGrid:s=[0,0],snapToGrid:l=!1,transform:o,containerBounds:c}){const{x:d,y:f}=nn(n),h=Oi({x:d-(c?.left??0),y:f-(c?.top??0)},o),{x:p,y:m}=l?Di(h,s):h;return{xSnapped:p,ySnapped:m,...h}}const uf=n=>({width:n.offsetWidth,height:n.offsetHeight}),Bx=n=>n?.getRootNode?.()||window?.document,t3=["INPUT","SELECT","TEXTAREA"];function $x(n){const s=n.composedPath?.()?.[0]||n.target;return s?.nodeType!==1?!1:t3.includes(s.nodeName)||s.hasAttribute("contenteditable")||!!s.closest(".nokey")}const Vx=n=>"clientX"in n,nn=(n,s)=>{const l=Vx(n),o=l?n.clientX:n.touches?.[0].clientX,c=l?n.clientY:n.touches?.[0].clientY;return{x:o-(s?.left??0),y:c-(s?.top??0)}},F0=(n,s,l,o,c)=>{const d=s.querySelectorAll(`.${n}`);return!d||!d.length?null:Array.from(d).map(f=>{const h=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),type:n,nodeId:c,position:f.getAttribute("data-handlepos"),x:(h.left-l.left)/o,y:(h.top-l.top)/o,...uf(f)}})};function qx({sourceX:n,sourceY:s,targetX:l,targetY:o,sourceControlX:c,sourceControlY:d,targetControlX:f,targetControlY:h}){const p=n*.125+c*.375+f*.375+l*.125,m=s*.125+d*.375+h*.375+o*.125,y=Math.abs(p-n),x=Math.abs(m-s);return[p,m,y,x]}function oo(n,s){return n>=0?.5*n:s*25*Math.sqrt(-n)}function K0({pos:n,x1:s,y1:l,x2:o,y2:c,c:d}){switch(n){case me.Left:return[s-oo(s-o,d),l];case me.Right:return[s+oo(o-s,d),l];case me.Top:return[s,l-oo(l-c,d)];case me.Bottom:return[s,l+oo(c-l,d)]}}function Yx({sourceX:n,sourceY:s,sourcePosition:l=me.Bottom,targetX:o,targetY:c,targetPosition:d=me.Top,curvature:f=.25}){const[h,p]=K0({pos:l,x1:n,y1:s,x2:o,y2:c,c:f}),[m,y]=K0({pos:d,x1:o,y1:c,x2:n,y2:s,c:f}),[x,v,j,w]=qx({sourceX:n,sourceY:s,targetX:o,targetY:c,sourceControlX:h,sourceControlY:p,targetControlX:m,targetControlY:y});return[`M${n},${s} C${h},${p} ${m},${y} ${o},${c}`,x,v,j,w]}function Gx({sourceX:n,sourceY:s,targetX:l,targetY:o}){const c=Math.abs(l-n)/2,d=l<n?l+c:l-c,f=Math.abs(o-s)/2,h=o<s?o+f:o-f;return[d,h,c,f]}function n3({sourceNode:n,targetNode:s,selected:l=!1,zIndex:o=0,elevateOnSelect:c=!1,zIndexMode:d="basic"}){if(d==="manual")return o;const f=c&&l?o+1e3:o,h=Math.max(n.parentId||c&&n.selected?n.internals.z:0,s.parentId||c&&s.selected?s.internals.z:0);return f+h}function a3({sourceNode:n,targetNode:s,width:l,height:o,transform:c}){const d=Vo(Eo(n),Eo(s));d.x===d.x2&&(d.x2+=1),d.y===d.y2&&(d.y2+=1);const f={x:-c[0]/c[2],y:-c[1]/c[2],width:l/c[2],height:o/c[2]};return Si(f,qo(d))>0}const s3=({source:n,sourceHandle:s,target:l,targetHandle:o})=>`xy-edge__${n}${s||""}-${l}${o||""}`,r3=(n,s)=>s.some(l=>l.source===n.source&&l.target===n.target&&(l.sourceHandle===n.sourceHandle||!l.sourceHandle&&!n.sourceHandle)&&(l.targetHandle===n.targetHandle||!l.targetHandle&&!n.targetHandle)),Xx=(n,s,l={})=>{if(!n.source||!n.target)return s;const o=l.getEdgeId||s3;let c;return Mx(n)?c={...n}:c={...n,id:o(n)},r3(c,s)?s:(c.sourceHandle===null&&delete c.sourceHandle,c.targetHandle===null&&delete c.targetHandle,s.concat(c))};function Zx({sourceX:n,sourceY:s,targetX:l,targetY:o}){const[c,d,f,h]=Gx({sourceX:n,sourceY:s,targetX:l,targetY:o});return[`M ${n},${s}L ${l},${o}`,c,d,f,h]}const I0={[me.Left]:{x:-1,y:0},[me.Right]:{x:1,y:0},[me.Top]:{x:0,y:-1},[me.Bottom]:{x:0,y:1}},i3=({source:n,sourcePosition:s=me.Bottom,target:l})=>s===me.Left||s===me.Right?n.x<l.x?{x:1,y:0}:{x:-1,y:0}:n.y<l.y?{x:0,y:1}:{x:0,y:-1},J0=(n,s)=>Math.sqrt(Math.pow(s.x-n.x,2)+Math.pow(s.y-n.y,2));function l3({source:n,sourcePosition:s=me.Bottom,target:l,targetPosition:o=me.Top,center:c,offset:d,stepPosition:f}){const h=I0[s],p=I0[o],m={x:n.x+h.x*d,y:n.y+h.y*d},y={x:l.x+p.x*d,y:l.y+p.y*d},x=i3({source:m,sourcePosition:s,target:y}),v=x.x!==0?"x":"y",j=x[v];let w=[],T,z;const A={x:0,y:0},k={x:0,y:0},[,,N,E]=Gx({sourceX:n.x,sourceY:n.y,targetX:l.x,targetY:l.y});if(h[v]*p[v]===-1){v==="x"?(T=c.x??m.x+(y.x-m.x)*f,z=c.y??(m.y+y.y)/2):(T=c.x??(m.x+y.x)/2,z=c.y??m.y+(y.y-m.y)*f);const B=[{x:T,y:m.y},{x:T,y:y.y}],V=[{x:m.x,y:z},{x:y.x,y:z}];h[v]===j?w=v==="x"?B:V:w=v==="x"?V:B}else{const B=[{x:m.x,y:y.y}],V=[{x:y.x,y:m.y}];if(v==="x"?w=h.x===j?V:B:w=h.y===j?B:V,s===o){const Z=Math.abs(n[v]-l[v]);if(Z<=d){const Q=Math.min(d-1,d-Z);h[v]===j?A[v]=(m[v]>n[v]?-1:1)*Q:k[v]=(y[v]>l[v]?-1:1)*Q}}if(s!==o){const Z=v==="x"?"y":"x",Q=h[v]===p[Z],C=m[Z]>y[Z],D=m[Z]<y[Z];(h[v]===1&&(!Q&&C||Q&&D)||h[v]!==1&&(!Q&&D||Q&&C))&&(w=v==="x"?B:V)}const X={x:m.x+A.x,y:m.y+A.y},H={x:y.x+k.x,y:y.y+k.y},K=Math.max(Math.abs(X.x-w[0].x),Math.abs(H.x-w[0].x)),q=Math.max(Math.abs(X.y-w[0].y),Math.abs(H.y-w[0].y));K>=q?(T=(X.x+H.x)/2,z=w[0].y):(T=w[0].x,z=(X.y+H.y)/2)}return[[n,{x:m.x+A.x,y:m.y+A.y},...w,{x:y.x+k.x,y:y.y+k.y},l],T,z,N,E]}function o3(n,s,l,o){const c=Math.min(J0(n,s)/2,J0(s,l)/2,o),{x:d,y:f}=s;if(n.x===d&&d===l.x||n.y===f&&f===l.y)return`L${d} ${f}`;if(n.y===f){const m=n.x<l.x?-1:1,y=n.y<l.y?1:-1;return`L ${d+c*m},${f}Q ${d},${f} ${d},${f+c*y}`}const h=n.x<l.x?1:-1,p=n.y<l.y?-1:1;return`L ${d},${f+c*p}Q ${d},${f} ${d+c*h},${f}`}function Gd({sourceX:n,sourceY:s,sourcePosition:l=me.Bottom,targetX:o,targetY:c,targetPosition:d=me.Top,borderRadius:f=5,centerX:h,centerY:p,offset:m=20,stepPosition:y=.5}){const[x,v,j,w,T]=l3({source:{x:n,y:s},sourcePosition:l,target:{x:o,y:c},targetPosition:d,center:{x:h,y:p},offset:m,stepPosition:y});return[x.reduce((A,k,N)=>{let E="";return N>0&&N<x.length-1?E=o3(x[N-1],k,x[N+1],f):E=`${N===0?"M":"L"}${k.x} ${k.y}`,A+=E,A},""),v,j,w,T]}function W0(n){return n&&!!(n.internals.handleBounds||n.handles?.length)&&!!(n.measured.width||n.width||n.initialWidth)}function c3(n){const{sourceNode:s,targetNode:l}=n;if(!W0(s)||!W0(l))return null;const o=s.internals.handleBounds||P0(s.handles),c=l.internals.handleBounds||P0(l.handles),d=ep(o?.source??[],n.sourceHandle),f=ep(n.connectionMode===ir.Strict?c?.target??[]:(c?.target??[]).concat(c?.source??[]),n.targetHandle);if(!d||!f)return n.onError?.("008",xn.error008(d?"target":"source",{id:n.id,sourceHandle:n.sourceHandle,targetHandle:n.targetHandle})),null;const h=d?.position||me.Bottom,p=f?.position||me.Top,m=as(s,d,h),y=as(l,f,p);return{sourceX:m.x,sourceY:m.y,targetX:y.x,targetY:y.y,sourcePosition:h,targetPosition:p}}function P0(n){if(!n)return null;const s=[],l=[];for(const o of n)o.width=o.width??1,o.height=o.height??1,o.type==="source"?s.push(o):o.type==="target"&&l.push(o);return{source:s,target:l}}function as(n,s,l=me.Left,o=!1){const c=(s?.x??0)+n.internals.positionAbsolute.x,d=(s?.y??0)+n.internals.positionAbsolute.y,{width:f,height:h}=s??Xn(n);if(o)return{x:c+f/2,y:d+h/2};switch(s?.position??l){case me.Top:return{x:c+f/2,y:d};case me.Right:return{x:c+f,y:d+h/2};case me.Bottom:return{x:c+f/2,y:d+h};case me.Left:return{x:c,y:d+h/2}}}function ep(n,s){return n&&(s?n.find(l=>l.id===s):n[0])||null}function Xd(n,s){return n?typeof n=="string"?n:`${s?`${s}__`:""}${Object.keys(n).sort().map(o=>`${o}=${n[o]}`).join("&")}`:""}function u3(n,{id:s,defaultColor:l,defaultMarkerStart:o,defaultMarkerEnd:c}){const d=new Set;return n.reduce((f,h)=>([h.markerStart||o,h.markerEnd||c].forEach(p=>{if(p&&typeof p=="object"){const m=Xd(p,s);d.has(m)||(f.push({id:m,color:p.color||l,...p}),d.add(m))}}),f),[]).sort((f,h)=>f.id.localeCompare(h.id))}const Qx=1e3,d3=10,df={nodeOrigin:[0,0],nodeExtent:ji,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},f3={...df,checkEquality:!0};function ff(n,s){const l={...n};for(const o in s)s[o]!==void 0&&(l[o]=s[o]);return l}function g3(n,s,l){const o=ff(df,l);for(const c of n.values())if(c.parentId)hf(c,n,s,o);else{const d=Ti(c,o.nodeOrigin),f=cr(c.extent)?c.extent:o.nodeExtent,h=ns(d,f,Xn(c));c.internals.positionAbsolute=h}}function h3(n,s){if(!n.handles)return n.measured?s?.internals.handleBounds:void 0;const l=[],o=[];for(const c of n.handles){const d={id:c.id,width:c.width??1,height:c.height??1,nodeId:n.id,x:c.x,y:c.y,position:c.position,type:c.type};c.type==="source"?l.push(d):c.type==="target"&&o.push(d)}return{source:l,target:o}}function gf(n){return n==="manual"}function Zd(n,s,l,o={}){const c=ff(f3,o),d={i:0},f=new Map(s),h=c?.elevateNodesOnSelect&&!gf(c.zIndexMode)?Qx:0;let p=n.length>0;s.clear(),l.clear();for(const m of n){let y=f.get(m.id);if(c.checkEquality&&m===y?.internals.userNode)s.set(m.id,y);else{const x=Ti(m,c.nodeOrigin),v=cr(m.extent)?m.extent:c.nodeExtent,j=ns(x,v,Xn(m));y={...c.defaults,...m,measured:{width:m.measured?.width,height:m.measured?.height},internals:{positionAbsolute:j,handleBounds:h3(m,y),z:Fx(m,h,c.zIndexMode),userNode:m}},s.set(m.id,y)}(y.measured===void 0||y.measured.width===void 0||y.measured.height===void 0)&&!y.hidden&&(p=!1),m.parentId&&hf(y,s,l,o,d)}return p}function m3(n,s){if(!n.parentId)return;const l=s.get(n.parentId);l?l.set(n.id,n):s.set(n.parentId,new Map([[n.id,n]]))}function hf(n,s,l,o,c){const{elevateNodesOnSelect:d,nodeOrigin:f,nodeExtent:h,zIndexMode:p}=ff(df,o),m=n.parentId,y=s.get(m);if(!y){console.warn(`Parent node ${m} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}m3(n,l),c&&!y.parentId&&y.internals.rootParentIndex===void 0&&p==="auto"&&(y.internals.rootParentIndex=++c.i,y.internals.z=y.internals.z+c.i*d3),c&&y.internals.rootParentIndex!==void 0&&(c.i=y.internals.rootParentIndex);const x=d&&!gf(p)?Qx:0,{x:v,y:j,z:w}=p3(n,y,f,h,x,p),{positionAbsolute:T}=n.internals,z=v!==T.x||j!==T.y;(z||w!==n.internals.z)&&s.set(n.id,{...n,internals:{...n.internals,positionAbsolute:z?{x:v,y:j}:T,z:w}})}function Fx(n,s,l){const o=tn(n.zIndex)?n.zIndex:0;return gf(l)?o:o+(n.selected?s:0)}function p3(n,s,l,o,c,d){const{x:f,y:h}=s.internals.positionAbsolute,p=Xn(n),m=Ti(n,l),y=cr(n.extent)?ns(m,n.extent,p):m;let x=ns({x:f+y.x,y:h+y.y},o,p);n.extent==="parent"&&(x=Ox(x,p,s));const v=Fx(n,c,d),j=s.internals.z??0;return{x:x.x,y:x.y,z:j>=v?j+1:v}}function mf(n,s,l,o=[0,0]){const c=[],d=new Map;for(const f of n){const h=s.get(f.parentId);if(!h)continue;const p=d.get(f.parentId)?.expandedRect??or(h),m=Rx(p,f.rect);d.set(f.parentId,{expandedRect:m,parent:h})}return d.size>0&&d.forEach(({expandedRect:f,parent:h},p)=>{const m=h.internals.positionAbsolute,y=Xn(h),x=h.origin??o,v=f.x<m.x?Math.round(Math.abs(m.x-f.x)):0,j=f.y<m.y?Math.round(Math.abs(m.y-f.y)):0,w=Math.max(y.width,Math.round(f.width)),T=Math.max(y.height,Math.round(f.height)),z=(w-y.width)*x[0],A=(T-y.height)*x[1];(v>0||j>0||z||A)&&(c.push({id:p,type:"position",position:{x:h.position.x-v+z,y:h.position.y-j+A}}),l.get(p)?.forEach(k=>{n.some(N=>N.id===k.id)||c.push({id:k.id,type:"position",position:{x:k.position.x+v,y:k.position.y+j}})})),(y.width<f.width||y.height<f.height||v||j)&&c.push({id:p,type:"dimensions",setAttributes:!0,dimensions:{width:w+(v?x[0]*v-z:0),height:T+(j?x[1]*j-A:0)}})}),c}function x3(n,s,l,o,c,d,f){const h=o?.querySelector(".xyflow__viewport");let p=!1;if(!h)return{changes:[],updatedInternals:p};const m=[],y=window.getComputedStyle(h),{m22:x}=new window.DOMMatrixReadOnly(y.transform),v=[];for(const j of n.values()){const w=s.get(j.id);if(!w)continue;if(w.hidden){s.set(w.id,{...w,internals:{...w.internals,handleBounds:void 0}}),p=!0;continue}const T=uf(j.nodeElement),z=w.measured.width!==T.width||w.measured.height!==T.height;if(!!(T.width&&T.height&&(z||!w.internals.handleBounds||j.force))){const k=j.nodeElement.getBoundingClientRect(),N=cr(w.extent)?w.extent:d;let{positionAbsolute:E}=w.internals;w.parentId&&w.extent==="parent"?E=Ox(E,T,s.get(w.parentId)):N&&(E=ns(E,N,T));const L={...w,measured:T,internals:{...w.internals,positionAbsolute:E,handleBounds:{source:F0("source",j.nodeElement,k,x,w.id),target:F0("target",j.nodeElement,k,x,w.id)}}};s.set(w.id,L),w.parentId&&hf(L,s,l,{nodeOrigin:c,zIndexMode:f}),p=!0,z&&(m.push({id:w.id,type:"dimensions",dimensions:T}),w.expandParent&&w.parentId&&v.push({id:w.id,parentId:w.parentId,rect:or(L,c)}))}}if(v.length>0){const j=mf(v,s,l,c);m.push(...j)}return{changes:m,updatedInternals:p}}async function y3({delta:n,panZoom:s,transform:l,translateExtent:o,width:c,height:d}){if(!s||!n.x&&!n.y)return Promise.resolve(!1);const f=await s.setViewportConstrained({x:l[0]+n.x,y:l[1]+n.y,zoom:l[2]},[[0,0],[c,d]],o),h=!!f&&(f.x!==l[0]||f.y!==l[1]||f.k!==l[2]);return Promise.resolve(h)}function tp(n,s,l,o,c,d){let f=c;const h=o.get(f)||new Map;o.set(f,h.set(l,s)),f=`${c}-${n}`;const p=o.get(f)||new Map;if(o.set(f,p.set(l,s)),d){f=`${c}-${n}-${d}`;const m=o.get(f)||new Map;o.set(f,m.set(l,s))}}function Kx(n,s,l){n.clear(),s.clear();for(const o of l){const{source:c,target:d,sourceHandle:f=null,targetHandle:h=null}=o,p={edgeId:o.id,source:c,target:d,sourceHandle:f,targetHandle:h},m=`${c}-${f}--${d}-${h}`,y=`${d}-${h}--${c}-${f}`;tp("source",p,y,n,c,f),tp("target",p,m,n,d,h),s.set(o.id,o)}}function Ix(n,s){if(!n.parentId)return!1;const l=s.get(n.parentId);return l?l.selected?!0:Ix(l,s):!1}function np(n,s,l){let o=n;do{if(o?.matches?.(s))return!0;if(o===l)return!1;o=o?.parentElement}while(o);return!1}function b3(n,s,l,o){const c=new Map;for(const[d,f]of n)if((f.selected||f.id===o)&&(!f.parentId||!Ix(f,n))&&(f.draggable||s&&typeof f.draggable>"u")){const h=n.get(d);h&&c.set(d,{id:d,position:h.position||{x:0,y:0},distance:{x:l.x-h.internals.positionAbsolute.x,y:l.y-h.internals.positionAbsolute.y},extent:h.extent,parentId:h.parentId,origin:h.origin,expandParent:h.expandParent,internals:{positionAbsolute:h.internals.positionAbsolute||{x:0,y:0}},measured:{width:h.measured.width??0,height:h.measured.height??0}})}return c}function kd({nodeId:n,dragItems:s,nodeLookup:l,dragging:o=!0}){const c=[];for(const[f,h]of s){const p=l.get(f)?.internals.userNode;p&&c.push({...p,position:h.position,dragging:o})}if(!n)return[c[0],c];const d=l.get(n)?.internals.userNode;return[d?{...d,position:s.get(n)?.position||d.position,dragging:o}:c[0],c]}function v3({dragItems:n,snapGrid:s,x:l,y:o}){const c=n.values().next().value;if(!c)return null;const d={x:l-c.distance.x,y:o-c.distance.y},f=Di(d,s);return{x:f.x-d.x,y:f.y-d.y}}function N3({onNodeMouseDown:n,getStoreItems:s,onDragStart:l,onDrag:o,onDragStop:c}){let d={x:null,y:null},f=0,h=new Map,p=!1,m={x:0,y:0},y=null,x=!1,v=null,j=!1,w=!1,T=null;function z({noDragClassName:k,handleSelector:N,domNode:E,isSelectable:L,nodeId:B,nodeClickDistance:V=0}){v=Ht(E);function X({x:Z,y:Q}){const{nodeLookup:C,nodeExtent:D,snapGrid:_,snapToGrid:O,nodeOrigin:U,onNodeDrag:Y,onSelectionDrag:te,onError:F,updateNodePositions:P}=s();d={x:Z,y:Q};let se=!1;const le=h.size>1,fe=le&&D?Yd(Mi(h)):null,be=le&&O?v3({dragItems:h,snapGrid:_,x:Z,y:Q}):null;for(const[he,oe]of h){if(!C.has(he))continue;let ue={x:Z-oe.distance.x,y:Q-oe.distance.y};O&&(ue=be?{x:Math.round(ue.x+be.x),y:Math.round(ue.y+be.y)}:Di(ue,_));let _e=null;if(le&&D&&!oe.extent&&fe){const{positionAbsolute:Ne}=oe.internals,ie=Ne.x-fe.x+D[0][0],ye=Ne.x+oe.measured.width-fe.x2+D[1][0],Se=Ne.y-fe.y+D[0][1],Ye=Ne.y+oe.measured.height-fe.y2+D[1][1];_e=[[ie,Se],[ye,Ye]]}const{position:we,positionAbsolute:xe}=Dx({nodeId:he,nextPosition:ue,nodeLookup:C,nodeExtent:_e||D,nodeOrigin:U,onError:F});se=se||oe.position.x!==we.x||oe.position.y!==we.y,oe.position=we,oe.internals.positionAbsolute=xe}if(w=w||se,!!se&&(P(h,!0),T&&(o||Y||!B&&te))){const[he,oe]=kd({nodeId:B,dragItems:h,nodeLookup:C});o?.(T,h,he,oe),Y?.(T,he,oe),B||te?.(T,oe)}}async function H(){if(!y)return;const{transform:Z,panBy:Q,autoPanSpeed:C,autoPanOnNodeDrag:D}=s();if(!D){p=!1,cancelAnimationFrame(f);return}const[_,O]=Lx(m,y,C);(_!==0||O!==0)&&(d.x=(d.x??0)-_/Z[2],d.y=(d.y??0)-O/Z[2],await Q({x:_,y:O})&&X(d)),f=requestAnimationFrame(H)}function K(Z){const{nodeLookup:Q,multiSelectionActive:C,nodesDraggable:D,transform:_,snapGrid:O,snapToGrid:U,selectNodesOnDrag:Y,onNodeDragStart:te,onSelectionDragStart:F,unselectNodesAndEdges:P}=s();x=!0,(!Y||!L)&&!C&&B&&(Q.get(B)?.selected||P()),L&&Y&&B&&n?.(B);const se=mi(Z.sourceEvent,{transform:_,snapGrid:O,snapToGrid:U,containerBounds:y});if(d=se,h=b3(Q,D,se,B),h.size>0&&(l||te||!B&&F)){const[le,fe]=kd({nodeId:B,dragItems:h,nodeLookup:Q});l?.(Z.sourceEvent,h,le,fe),te?.(Z.sourceEvent,le,fe),B||F?.(Z.sourceEvent,fe)}}const q=yx().clickDistance(V).on("start",Z=>{const{domNode:Q,nodeDragThreshold:C,transform:D,snapGrid:_,snapToGrid:O}=s();y=Q?.getBoundingClientRect()||null,j=!1,w=!1,T=Z.sourceEvent,C===0&&K(Z),d=mi(Z.sourceEvent,{transform:D,snapGrid:_,snapToGrid:O,containerBounds:y}),m=nn(Z.sourceEvent,y)}).on("drag",Z=>{const{autoPanOnNodeDrag:Q,transform:C,snapGrid:D,snapToGrid:_,nodeDragThreshold:O,nodeLookup:U}=s(),Y=mi(Z.sourceEvent,{transform:C,snapGrid:D,snapToGrid:_,containerBounds:y});if(T=Z.sourceEvent,(Z.sourceEvent.type==="touchmove"&&Z.sourceEvent.touches.length>1||B&&!U.has(B))&&(j=!0),!j){if(!p&&Q&&x&&(p=!0,H()),!x){const te=nn(Z.sourceEvent,y),F=te.x-m.x,P=te.y-m.y;Math.sqrt(F*F+P*P)>O&&K(Z)}(d.x!==Y.xSnapped||d.y!==Y.ySnapped)&&h&&x&&(m=nn(Z.sourceEvent,y),X(Y))}}).on("end",Z=>{if(!(!x||j)&&(p=!1,x=!1,cancelAnimationFrame(f),h.size>0)){const{nodeLookup:Q,updateNodePositions:C,onNodeDragStop:D,onSelectionDragStop:_}=s();if(w&&(C(h,!1),w=!1),c||D||!B&&_){const[O,U]=kd({nodeId:B,dragItems:h,nodeLookup:Q,dragging:!1});c?.(Z.sourceEvent,h,O,U),D?.(Z.sourceEvent,O,U),B||_?.(Z.sourceEvent,U)}}}).filter(Z=>{const Q=Z.target;return!Z.button&&(!k||!np(Q,`.${k}`,E))&&(!N||np(Q,N,E))});v.call(q)}function A(){v?.on(".drag",null)}return{update:z,destroy:A}}function j3(n,s,l){const o=[],c={x:n.x-l,y:n.y-l,width:l*2,height:l*2};for(const d of s.values())Si(c,or(d))>0&&o.push(d);return o}const w3=250;function S3(n,s,l,o){let c=[],d=1/0;const f=j3(n,l,s+w3);for(const h of f){const p=[...h.internals.handleBounds?.source??[],...h.internals.handleBounds?.target??[]];for(const m of p){if(o.nodeId===m.nodeId&&o.type===m.type&&o.id===m.id)continue;const{x:y,y:x}=as(h,m,m.position,!0),v=Math.sqrt(Math.pow(y-n.x,2)+Math.pow(x-n.y,2));v>s||(v<d?(c=[{...m,x:y,y:x}],d=v):v===d&&c.push({...m,x:y,y:x}))}}if(!c.length)return null;if(c.length>1){const h=o.type==="source"?"target":"source";return c.find(p=>p.type===h)??c[0]}return c[0]}function Jx(n,s,l,o,c,d=!1){const f=o.get(n);if(!f)return null;const h=c==="strict"?f.internals.handleBounds?.[s]:[...f.internals.handleBounds?.source??[],...f.internals.handleBounds?.target??[]],p=(l?h?.find(m=>m.id===l):h?.[0])??null;return p&&d?{...p,...as(f,p,p.position,!0)}:p}function Wx(n,s){return n||(s?.classList.contains("target")?"target":s?.classList.contains("source")?"source":null)}function _3(n,s){let l=null;return s?l=!0:n&&!s&&(l=!1),l}const Px=()=>!0;function k3(n,{connectionMode:s,connectionRadius:l,handleId:o,nodeId:c,edgeUpdaterType:d,isTarget:f,domNode:h,nodeLookup:p,lib:m,autoPanOnConnect:y,flowId:x,panBy:v,cancelConnection:j,onConnectStart:w,onConnect:T,onConnectEnd:z,isValidConnection:A=Px,onReconnectEnd:k,updateConnection:N,getTransform:E,getFromHandle:L,autoPanSpeed:B,dragThreshold:V=1,handleDomNode:X}){const H=Bx(n.target);let K=0,q;const{x:Z,y:Q}=nn(n),C=Wx(d,X),D=h?.getBoundingClientRect();let _=!1;if(!D||!C)return;const O=Jx(c,C,o,p,s);if(!O)return;let U=nn(n,D),Y=!1,te=null,F=!1,P=null;function se(){if(!y||!D)return;const[we,xe]=Lx(U,D,B);v({x:we,y:xe}),K=requestAnimationFrame(se)}const le={...O,nodeId:c,type:C,position:O.position},fe=p.get(c);let he={inProgress:!0,isValid:null,from:as(fe,le,me.Left,!0),fromHandle:le,fromPosition:le.position,fromNode:fe,to:U,toHandle:null,toPosition:G0[le.position],toNode:null,pointer:U};function oe(){_=!0,N(he),w?.(n,{nodeId:c,handleId:o,handleType:C})}V===0&&oe();function ue(we){if(!_){const{x:Ye,y:Ft}=nn(we),zt=Ye-Z,Kt=Ft-Q;if(!(zt*zt+Kt*Kt>V*V))return;oe()}if(!L()||!le){_e(we);return}const xe=E();U=nn(we,D),q=S3(Oi(U,xe,!1,[1,1]),l,p,le),Y||(se(),Y=!0);const Ne=ey(we,{handle:q,connectionMode:s,fromNodeId:c,fromHandleId:o,fromType:f?"target":"source",isValidConnection:A,doc:H,lib:m,flowId:x,nodeLookup:p});P=Ne.handleDomNode,te=Ne.connection,F=_3(!!q,Ne.isValid);const ie=p.get(c),ye=ie?as(ie,le,me.Left,!0):he.from,Se={...he,from:ye,isValid:F,to:Ne.toHandle&&F?zo({x:Ne.toHandle.x,y:Ne.toHandle.y},xe):U,toHandle:Ne.toHandle,toPosition:F&&Ne.toHandle?Ne.toHandle.position:G0[le.position],toNode:Ne.toHandle?p.get(Ne.toHandle.nodeId):null,pointer:U};N(Se),he=Se}function _e(we){if(!("touches"in we&&we.touches.length>0)){if(_){(q||P)&&te&&F&&T?.(te);const{inProgress:xe,...Ne}=he,ie={...Ne,toPosition:he.toHandle?he.toPosition:null};z?.(we,ie),d&&k?.(we,ie)}j(),cancelAnimationFrame(K),Y=!1,F=!1,te=null,P=null,H.removeEventListener("mousemove",ue),H.removeEventListener("mouseup",_e),H.removeEventListener("touchmove",ue),H.removeEventListener("touchend",_e)}}H.addEventListener("mousemove",ue),H.addEventListener("mouseup",_e),H.addEventListener("touchmove",ue),H.addEventListener("touchend",_e)}function ey(n,{handle:s,connectionMode:l,fromNodeId:o,fromHandleId:c,fromType:d,doc:f,lib:h,flowId:p,isValidConnection:m=Px,nodeLookup:y}){const x=d==="target",v=s?f.querySelector(`.${h}-flow__handle[data-id="${p}-${s?.nodeId}-${s?.id}-${s?.type}"]`):null,{x:j,y:w}=nn(n),T=f.elementFromPoint(j,w),z=T?.classList.contains(`${h}-flow__handle`)?T:v,A={handleDomNode:z,isValid:!1,connection:null,toHandle:null};if(z){const k=Wx(void 0,z),N=z.getAttribute("data-nodeid"),E=z.getAttribute("data-handleid"),L=z.classList.contains("connectable"),B=z.classList.contains("connectableend");if(!N||!k)return A;const V={source:x?N:o,sourceHandle:x?E:c,target:x?o:N,targetHandle:x?c:E};A.connection=V;const H=L&&B&&(l===ir.Strict?x&&k==="source"||!x&&k==="target":N!==o||E!==c);A.isValid=H&&m(V),A.toHandle=Jx(N,k,E,y,l,!0)}return A}const Qd={onPointerDown:k3,isValid:ey};function C3({domNode:n,panZoom:s,getTransform:l,getViewScale:o}){const c=Ht(n);function d({translateExtent:h,width:p,height:m,zoomStep:y=1,pannable:x=!0,zoomable:v=!0,inversePan:j=!1}){const w=N=>{if(N.sourceEvent.type!=="wheel"||!s)return;const E=l(),L=N.sourceEvent.ctrlKey&&_i()?10:1,B=-N.sourceEvent.deltaY*(N.sourceEvent.deltaMode===1?.05:N.sourceEvent.deltaMode?1:.002)*y,V=E[2]*Math.pow(2,B*L);s.scaleTo(V)};let T=[0,0];const z=N=>{(N.sourceEvent.type==="mousedown"||N.sourceEvent.type==="touchstart")&&(T=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY])},A=N=>{const E=l();if(N.sourceEvent.type!=="mousemove"&&N.sourceEvent.type!=="touchmove"||!s)return;const L=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY],B=[L[0]-T[0],L[1]-T[1]];T=L;const V=o()*Math.max(E[2],Math.log(E[2]))*(j?-1:1),X={x:E[0]-B[0]*V,y:E[1]-B[1]*V},H=[[0,0],[p,m]];s.setViewportConstrained({x:X.x,y:X.y,zoom:E[2]},H,h)},k=Cx().on("start",z).on("zoom",x?A:null).on("zoom.wheel",v?w:null);c.call(k,{})}function f(){c.on("zoom",null)}return{update:d,destroy:f,pointer:en}}const Yo=n=>({x:n.x,y:n.y,zoom:n.k}),Cd=({x:n,y:s,zoom:l})=>$o.translate(n,s).scale(l),Ws=(n,s)=>n.target.closest(`.${s}`),ty=(n,s)=>s===2&&Array.isArray(n)&&n.includes(2),E3=n=>((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2,Ed=(n,s=0,l=E3,o=()=>{})=>{const c=typeof s=="number"&&s>0;return c||o(),c?n.transition().duration(s).ease(l).on("end",o):n},ny=n=>{const s=n.ctrlKey&&_i()?10:1;return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*s};function z3({zoomPanValues:n,noWheelClassName:s,d3Selection:l,d3Zoom:o,panOnScrollMode:c,panOnScrollSpeed:d,zoomOnPinch:f,onPanZoomStart:h,onPanZoom:p,onPanZoomEnd:m}){return y=>{if(Ws(y,s))return y.ctrlKey&&y.preventDefault(),!1;y.preventDefault(),y.stopImmediatePropagation();const x=l.property("__zoom").k||1;if(y.ctrlKey&&f){const z=en(y),A=ny(y),k=x*Math.pow(2,A);o.scaleTo(l,k,z,y);return}const v=y.deltaMode===1?20:1;let j=c===Pa.Vertical?0:y.deltaX*v,w=c===Pa.Horizontal?0:y.deltaY*v;!_i()&&y.shiftKey&&c!==Pa.Vertical&&(j=y.deltaY*v,w=0),o.translateBy(l,-(j/x)*d,-(w/x)*d,{internal:!0});const T=Yo(l.property("__zoom"));clearTimeout(n.panScrollTimeout),n.isPanScrolling?(p?.(y,T),n.panScrollTimeout=setTimeout(()=>{m?.(y,T),n.isPanScrolling=!1},150)):(n.isPanScrolling=!0,h?.(y,T))}}function A3({noWheelClassName:n,preventScrolling:s,d3ZoomHandler:l}){return function(o,c){const d=o.type==="wheel",f=!s&&d&&!o.ctrlKey,h=Ws(o,n);if(o.ctrlKey&&d&&h&&o.preventDefault(),f||h)return null;o.preventDefault(),l.call(this,o,c)}}function T3({zoomPanValues:n,onDraggingChange:s,onPanZoomStart:l}){return o=>{if(o.sourceEvent?.internal)return;const c=Yo(o.transform);n.mouseButton=o.sourceEvent?.button||0,n.isZoomingOrPanning=!0,n.prevViewport=c,o.sourceEvent?.type==="mousedown"&&s(!0),l&&l?.(o.sourceEvent,c)}}function M3({zoomPanValues:n,panOnDrag:s,onPaneContextMenu:l,onTransformChange:o,onPanZoom:c}){return d=>{n.usedRightMouseButton=!!(l&&ty(s,n.mouseButton??0)),d.sourceEvent?.sync||o([d.transform.x,d.transform.y,d.transform.k]),c&&!d.sourceEvent?.internal&&c?.(d.sourceEvent,Yo(d.transform))}}function D3({zoomPanValues:n,panOnDrag:s,panOnScroll:l,onDraggingChange:o,onPanZoomEnd:c,onPaneContextMenu:d}){return f=>{if(!f.sourceEvent?.internal&&(n.isZoomingOrPanning=!1,d&&ty(s,n.mouseButton??0)&&!n.usedRightMouseButton&&f.sourceEvent&&d(f.sourceEvent),n.usedRightMouseButton=!1,o(!1),c)){const h=Yo(f.transform);n.prevViewport=h,clearTimeout(n.timerId),n.timerId=setTimeout(()=>{c?.(f.sourceEvent,h)},l?150:0)}}}function O3({zoomActivationKeyPressed:n,zoomOnScroll:s,zoomOnPinch:l,panOnDrag:o,panOnScroll:c,zoomOnDoubleClick:d,userSelectionActive:f,noWheelClassName:h,noPanClassName:p,lib:m,connectionInProgress:y}){return x=>{const v=n||s,j=l&&x.ctrlKey,w=x.type==="wheel";if(x.button===1&&x.type==="mousedown"&&(Ws(x,`${m}-flow__node`)||Ws(x,`${m}-flow__edge`)))return!0;if(!o&&!v&&!c&&!d&&!l||f||y&&!w||Ws(x,h)&&w||Ws(x,p)&&(!w||c&&w&&!n)||!l&&x.ctrlKey&&w)return!1;if(!l&&x.type==="touchstart"&&x.touches?.length>1)return x.preventDefault(),!1;if(!v&&!c&&!j&&w||!o&&(x.type==="mousedown"||x.type==="touchstart")||Array.isArray(o)&&!o.includes(x.button)&&x.type==="mousedown")return!1;const T=Array.isArray(o)&&o.includes(x.button)||!x.button||x.button<=1;return(!x.ctrlKey||w)&&T}}function L3({domNode:n,minZoom:s,maxZoom:l,translateExtent:o,viewport:c,onPanZoom:d,onPanZoomStart:f,onPanZoomEnd:h,onDraggingChange:p}){const m={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},y=n.getBoundingClientRect(),x=Cx().scaleExtent([s,l]).translateExtent(o),v=Ht(n).call(x);k({x:c.x,y:c.y,zoom:lr(c.zoom,s,l)},[[0,0],[y.width,y.height]],o);const j=v.on("wheel.zoom"),w=v.on("dblclick.zoom");x.wheelDelta(ny);function T(q,Z){return v?new Promise(Q=>{x?.interpolate(Z?.interpolate==="linear"?md:go).transform(Ed(v,Z?.duration,Z?.ease,()=>Q(!0)),q)}):Promise.resolve(!1)}function z({noWheelClassName:q,noPanClassName:Z,onPaneContextMenu:Q,userSelectionActive:C,panOnScroll:D,panOnDrag:_,panOnScrollMode:O,panOnScrollSpeed:U,preventScrolling:Y,zoomOnPinch:te,zoomOnScroll:F,zoomOnDoubleClick:P,zoomActivationKeyPressed:se,lib:le,onTransformChange:fe,connectionInProgress:be,paneClickDistance:he,selectionOnDrag:oe}){C&&!m.isZoomingOrPanning&&A();const ue=D&&!se&&!C;x.clickDistance(oe?1/0:!tn(he)||he<0?0:he);const _e=ue?z3({zoomPanValues:m,noWheelClassName:q,d3Selection:v,d3Zoom:x,panOnScrollMode:O,panOnScrollSpeed:U,zoomOnPinch:te,onPanZoomStart:f,onPanZoom:d,onPanZoomEnd:h}):A3({noWheelClassName:q,preventScrolling:Y,d3ZoomHandler:j});if(v.on("wheel.zoom",_e,{passive:!1}),!C){const xe=T3({zoomPanValues:m,onDraggingChange:p,onPanZoomStart:f});x.on("start",xe);const Ne=M3({zoomPanValues:m,panOnDrag:_,onPaneContextMenu:!!Q,onPanZoom:d,onTransformChange:fe});x.on("zoom",Ne);const ie=D3({zoomPanValues:m,panOnDrag:_,panOnScroll:D,onPaneContextMenu:Q,onPanZoomEnd:h,onDraggingChange:p});x.on("end",ie)}const we=O3({zoomActivationKeyPressed:se,panOnDrag:_,zoomOnScroll:F,panOnScroll:D,zoomOnDoubleClick:P,zoomOnPinch:te,userSelectionActive:C,noPanClassName:Z,noWheelClassName:q,lib:le,connectionInProgress:be});x.filter(we),P?v.on("dblclick.zoom",w):v.on("dblclick.zoom",null)}function A(){x.on("zoom",null)}async function k(q,Z,Q){const C=Cd(q),D=x?.constrain()(C,Z,Q);return D&&await T(D),new Promise(_=>_(D))}async function N(q,Z){const Q=Cd(q);return await T(Q,Z),new Promise(C=>C(Q))}function E(q){if(v){const Z=Cd(q),Q=v.property("__zoom");(Q.k!==q.zoom||Q.x!==q.x||Q.y!==q.y)&&x?.transform(v,Z,null,{sync:!0})}}function L(){const q=v?kx(v.node()):{x:0,y:0,k:1};return{x:q.x,y:q.y,zoom:q.k}}function B(q,Z){return v?new Promise(Q=>{x?.interpolate(Z?.interpolate==="linear"?md:go).scaleTo(Ed(v,Z?.duration,Z?.ease,()=>Q(!0)),q)}):Promise.resolve(!1)}function V(q,Z){return v?new Promise(Q=>{x?.interpolate(Z?.interpolate==="linear"?md:go).scaleBy(Ed(v,Z?.duration,Z?.ease,()=>Q(!0)),q)}):Promise.resolve(!1)}function X(q){x?.scaleExtent(q)}function H(q){x?.translateExtent(q)}function K(q){const Z=!tn(q)||q<0?0:q;x?.clickDistance(Z)}return{update:z,destroy:A,setViewport:N,setViewportConstrained:k,getViewport:L,scaleTo:B,scaleBy:V,setScaleExtent:X,setTranslateExtent:H,syncViewport:E,setClickDistance:K}}var ur;(function(n){n.Line="line",n.Handle="handle"})(ur||(ur={}));function R3({width:n,prevWidth:s,height:l,prevHeight:o,affectsX:c,affectsY:d}){const f=n-s,h=l-o,p=[f>0?1:f<0?-1:0,h>0?1:h<0?-1:0];return f&&c&&(p[0]=p[0]*-1),h&&d&&(p[1]=p[1]*-1),p}function ap(n){const s=n.includes("right")||n.includes("left"),l=n.includes("bottom")||n.includes("top"),o=n.includes("left"),c=n.includes("top");return{isHorizontal:s,isVertical:l,affectsX:o,affectsY:c}}function Na(n,s){return Math.max(0,s-n)}function ja(n,s){return Math.max(0,n-s)}function co(n,s,l){return Math.max(0,s-n,n-l)}function sp(n,s){return n?!s:s}function H3(n,s,l,o,c,d,f,h){let{affectsX:p,affectsY:m}=s;const{isHorizontal:y,isVertical:x}=s,v=y&&x,{xSnapped:j,ySnapped:w}=l,{minWidth:T,maxWidth:z,minHeight:A,maxHeight:k}=o,{x:N,y:E,width:L,height:B,aspectRatio:V}=n;let X=Math.floor(y?j-n.pointerX:0),H=Math.floor(x?w-n.pointerY:0);const K=L+(p?-X:X),q=B+(m?-H:H),Z=-d[0]*L,Q=-d[1]*B;let C=co(K,T,z),D=co(q,A,k);if(f){let U=0,Y=0;p&&X<0?U=Na(N+X+Z,f[0][0]):!p&&X>0&&(U=ja(N+K+Z,f[1][0])),m&&H<0?Y=Na(E+H+Q,f[0][1]):!m&&H>0&&(Y=ja(E+q+Q,f[1][1])),C=Math.max(C,U),D=Math.max(D,Y)}if(h){let U=0,Y=0;p&&X>0?U=ja(N+X,h[0][0]):!p&&X<0&&(U=Na(N+K,h[1][0])),m&&H>0?Y=ja(E+H,h[0][1]):!m&&H<0&&(Y=Na(E+q,h[1][1])),C=Math.max(C,U),D=Math.max(D,Y)}if(c){if(y){const U=co(K/V,A,k)*V;if(C=Math.max(C,U),f){let Y=0;!p&&!m||p&&!m&&v?Y=ja(E+Q+K/V,f[1][1])*V:Y=Na(E+Q+(p?X:-X)/V,f[0][1])*V,C=Math.max(C,Y)}if(h){let Y=0;!p&&!m||p&&!m&&v?Y=Na(E+K/V,h[1][1])*V:Y=ja(E+(p?X:-X)/V,h[0][1])*V,C=Math.max(C,Y)}}if(x){const U=co(q*V,T,z)/V;if(D=Math.max(D,U),f){let Y=0;!p&&!m||m&&!p&&v?Y=ja(N+q*V+Z,f[1][0])/V:Y=Na(N+(m?H:-H)*V+Z,f[0][0])/V,D=Math.max(D,Y)}if(h){let Y=0;!p&&!m||m&&!p&&v?Y=Na(N+q*V,h[1][0])/V:Y=ja(N+(m?H:-H)*V,h[0][0])/V,D=Math.max(D,Y)}}}H=H+(H<0?D:-D),X=X+(X<0?C:-C),c&&(v?K>q*V?H=(sp(p,m)?-X:X)/V:X=(sp(p,m)?-H:H)*V:y?(H=X/V,m=p):(X=H*V,p=m));const _=p?N+X:N,O=m?E+H:E;return{width:L+(p?-X:X),height:B+(m?-H:H),x:d[0]*X*(p?-1:1)+_,y:d[1]*H*(m?-1:1)+O}}const ay={width:0,height:0,x:0,y:0},U3={...ay,pointerX:0,pointerY:0,aspectRatio:1};function B3(n){return[[0,0],[n.measured.width,n.measured.height]]}function $3(n,s,l){const o=s.position.x+n.position.x,c=s.position.y+n.position.y,d=n.measured.width??0,f=n.measured.height??0,h=l[0]*d,p=l[1]*f;return[[o-h,c-p],[o+d-h,c+f-p]]}function V3({domNode:n,nodeId:s,getStoreItems:l,onChange:o,onEnd:c}){const d=Ht(n);let f={controlDirection:ap("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function h({controlPosition:m,boundaries:y,keepAspectRatio:x,resizeDirection:v,onResizeStart:j,onResize:w,onResizeEnd:T,shouldResize:z}){let A={...ay},k={...U3};f={boundaries:y,resizeDirection:v,keepAspectRatio:x,controlDirection:ap(m)};let N,E=null,L=[],B,V,X,H=!1;const K=yx().on("start",q=>{const{nodeLookup:Z,transform:Q,snapGrid:C,snapToGrid:D,nodeOrigin:_,paneDomNode:O}=l();if(N=Z.get(s),!N)return;E=O?.getBoundingClientRect()??null;const{xSnapped:U,ySnapped:Y}=mi(q.sourceEvent,{transform:Q,snapGrid:C,snapToGrid:D,containerBounds:E});A={width:N.measured.width??0,height:N.measured.height??0,x:N.position.x??0,y:N.position.y??0},k={...A,pointerX:U,pointerY:Y,aspectRatio:A.width/A.height},B=void 0,N.parentId&&(N.extent==="parent"||N.expandParent)&&(B=Z.get(N.parentId),V=B&&N.extent==="parent"?B3(B):void 0),L=[],X=void 0;for(const[te,F]of Z)if(F.parentId===s&&(L.push({id:te,position:{...F.position},extent:F.extent}),F.extent==="parent"||F.expandParent)){const P=$3(F,N,F.origin??_);X?X=[[Math.min(P[0][0],X[0][0]),Math.min(P[0][1],X[0][1])],[Math.max(P[1][0],X[1][0]),Math.max(P[1][1],X[1][1])]]:X=P}j?.(q,{...A})}).on("drag",q=>{const{transform:Z,snapGrid:Q,snapToGrid:C,nodeOrigin:D}=l(),_=mi(q.sourceEvent,{transform:Z,snapGrid:Q,snapToGrid:C,containerBounds:E}),O=[];if(!N)return;const{x:U,y:Y,width:te,height:F}=A,P={},se=N.origin??D,{width:le,height:fe,x:be,y:he}=H3(k,f.controlDirection,_,f.boundaries,f.keepAspectRatio,se,V,X),oe=le!==te,ue=fe!==F,_e=be!==U&&oe,we=he!==Y&&ue;if(!_e&&!we&&!oe&&!ue)return;if((_e||we||se[0]===1||se[1]===1)&&(P.x=_e?be:A.x,P.y=we?he:A.y,A.x=P.x,A.y=P.y,L.length>0)){const ye=be-U,Se=he-Y;for(const Ye of L)Ye.position={x:Ye.position.x-ye+se[0]*(le-te),y:Ye.position.y-Se+se[1]*(fe-F)},O.push(Ye)}if((oe||ue)&&(P.width=oe&&(!f.resizeDirection||f.resizeDirection==="horizontal")?le:A.width,P.height=ue&&(!f.resizeDirection||f.resizeDirection==="vertical")?fe:A.height,A.width=P.width,A.height=P.height),B&&N.expandParent){const ye=se[0]*(P.width??0);P.x&&P.x<ye&&(A.x=ye,k.x=k.x-(P.x-ye));const Se=se[1]*(P.height??0);P.y&&P.y<Se&&(A.y=Se,k.y=k.y-(P.y-Se))}const xe=R3({width:A.width,prevWidth:te,height:A.height,prevHeight:F,affectsX:f.controlDirection.affectsX,affectsY:f.controlDirection.affectsY}),Ne={...A,direction:xe};z?.(q,Ne)!==!1&&(H=!0,w?.(q,Ne),o(P,O))}).on("end",q=>{H&&(T?.(q,{...A}),c?.({...A}),H=!1)});d.call(K)}function p(){d.on(".drag",null)}return{update:h,destroy:p}}const q3={},rp=n=>{let s;const l=new Set,o=(y,x)=>{const v=typeof y=="function"?y(s):y;if(!Object.is(v,s)){const j=s;s=x??(typeof v!="object"||v===null)?v:Object.assign({},s,v),l.forEach(w=>w(s,j))}},c=()=>s,p={setState:o,getState:c,getInitialState:()=>m,subscribe:y=>(l.add(y),()=>l.delete(y)),destroy:()=>{(q3?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),l.clear()}},m=s=n(o,c,p);return p},Y3=n=>n?rp(n):rp,{useDebugValue:G3}=ar,{useSyncExternalStoreWithSelector:X3}=e1,Z3=n=>n;function sy(n,s=Z3,l){const o=X3(n.subscribe,n.getState,n.getServerState||n.getInitialState,s,l);return G3(o),o}const ip=(n,s)=>{const l=Y3(n),o=(c,d=s)=>sy(l,c,d);return Object.assign(o,l),o},Q3=(n,s)=>n?ip(n,s):ip;function Qe(n,s){if(Object.is(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;if(n instanceof Map&&s instanceof Map){if(n.size!==s.size)return!1;for(const[o,c]of n)if(!Object.is(c,s.get(o)))return!1;return!0}if(n instanceof Set&&s instanceof Set){if(n.size!==s.size)return!1;for(const o of n)if(!s.has(o))return!1;return!0}const l=Object.keys(n);if(l.length!==Object.keys(s).length)return!1;for(const o of l)if(!Object.prototype.hasOwnProperty.call(s,o)||!Object.is(n[o],s[o]))return!1;return!0}const Go=M.createContext(null),F3=Go.Provider,ry=xn.error001();function De(n,s){const l=M.useContext(Go);if(l===null)throw new Error(ry);return sy(l,n,s)}function Fe(){const n=M.useContext(Go);if(n===null)throw new Error(ry);return M.useMemo(()=>({getState:n.getState,setState:n.setState,subscribe:n.subscribe}),[n])}const lp={display:"none"},K3={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},iy="react-flow__node-desc",ly="react-flow__edge-desc",I3="react-flow__aria-live",J3=n=>n.ariaLiveMessage,W3=n=>n.ariaLabelConfig;function P3({rfId:n}){const s=De(J3);return r.jsx("div",{id:`${I3}-${n}`,"aria-live":"assertive","aria-atomic":"true",style:K3,children:s})}function eE({rfId:n,disableKeyboardA11y:s}){const l=De(W3);return r.jsxs(r.Fragment,{children:[r.jsx("div",{id:`${iy}-${n}`,style:lp,children:s?l["node.a11yDescription.default"]:l["node.a11yDescription.keyboardDisabled"]}),r.jsx("div",{id:`${ly}-${n}`,style:lp,children:l["edge.a11yDescription.default"]}),!s&&r.jsx(P3,{rfId:n})]})}const Xo=M.forwardRef(({position:n="top-left",children:s,className:l,style:o,...c},d)=>{const f=`${n}`.split("-");return r.jsx("div",{className:st(["react-flow__panel",l,...f]),style:o,ref:d,...c,children:s})});Xo.displayName="Panel";function tE({proOptions:n,position:s="bottom-right"}){return n?.hideAttribution?null:r.jsx(Xo,{position:s,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:r.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const nE=n=>{const s=[],l=[];for(const[,o]of n.nodeLookup)o.selected&&s.push(o.internals.userNode);for(const[,o]of n.edgeLookup)o.selected&&l.push(o);return{selectedNodes:s,selectedEdges:l}},uo=n=>n.id;function aE(n,s){return Qe(n.selectedNodes.map(uo),s.selectedNodes.map(uo))&&Qe(n.selectedEdges.map(uo),s.selectedEdges.map(uo))}function sE({onSelectionChange:n}){const s=Fe(),{selectedNodes:l,selectedEdges:o}=De(nE,aE);return M.useEffect(()=>{const c={nodes:l,edges:o};n?.(c),s.getState().onSelectionChangeHandlers.forEach(d=>d(c))},[l,o,n]),null}const rE=n=>!!n.onSelectionChangeHandlers;function iE({onSelectionChange:n}){const s=De(rE);return n||s?r.jsx(sE,{onSelectionChange:n}):null}const oy=[0,0],lE={x:0,y:0,zoom:1},oE=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],op=[...oE,"rfId"],cE=n=>({setNodes:n.setNodes,setEdges:n.setEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges}),cp={translateExtent:ji,nodeOrigin:oy,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function uE(n){const{setNodes:s,setEdges:l,setMinZoom:o,setMaxZoom:c,setTranslateExtent:d,setNodeExtent:f,reset:h,setDefaultNodesAndEdges:p}=De(cE,Qe),m=Fe();M.useEffect(()=>(p(n.defaultNodes,n.defaultEdges),()=>{y.current=cp,h()}),[]);const y=M.useRef(cp);return M.useEffect(()=>{for(const x of op){const v=n[x],j=y.current[x];v!==j&&(typeof n[x]>"u"||(x==="nodes"?s(v):x==="edges"?l(v):x==="minZoom"?o(v):x==="maxZoom"?c(v):x==="translateExtent"?d(v):x==="nodeExtent"?f(v):x==="ariaLabelConfig"?m.setState({ariaLabelConfig:e3(v)}):x==="fitView"?m.setState({fitViewQueued:v}):x==="fitViewOptions"?m.setState({fitViewOptions:v}):m.setState({[x]:v})))}y.current=n},op.map(x=>n[x])),null}function up(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function dE(n){const[s,l]=M.useState(n==="system"?null:n);return M.useEffect(()=>{if(n!=="system"){l(n);return}const o=up(),c=()=>l(o?.matches?"dark":"light");return c(),o?.addEventListener("change",c),()=>{o?.removeEventListener("change",c)}},[n]),s!==null?s:up()?.matches?"dark":"light"}const dp=typeof document<"u"?document:null;function ki(n=null,s={target:dp,actInsideInputWithModifier:!0}){const[l,o]=M.useState(!1),c=M.useRef(!1),d=M.useRef(new Set([])),[f,h]=M.useMemo(()=>{if(n!==null){const m=(Array.isArray(n)?n:[n]).filter(x=>typeof x=="string").map(x=>x.replace("+",`
`).replace(`

`,`
+`).split(`
`)),y=m.reduce((x,v)=>x.concat(...v),[]);return[m,y]}return[[],[]]},[n]);return M.useEffect(()=>{const p=s?.target??dp,m=s?.actInsideInputWithModifier??!0;if(n!==null){const y=j=>{if(c.current=j.ctrlKey||j.metaKey||j.shiftKey||j.altKey,(!c.current||c.current&&!m)&&$x(j))return!1;const T=gp(j.code,h);if(d.current.add(j[T]),fp(f,d.current,!1)){const z=j.composedPath?.()?.[0]||j.target,A=z?.nodeName==="BUTTON"||z?.nodeName==="A";s.preventDefault!==!1&&(c.current||!A)&&j.preventDefault(),o(!0)}},x=j=>{const w=gp(j.code,h);fp(f,d.current,!0)?(o(!1),d.current.clear()):d.current.delete(j[w]),j.key==="Meta"&&d.current.clear(),c.current=!1},v=()=>{d.current.clear(),o(!1)};return p?.addEventListener("keydown",y),p?.addEventListener("keyup",x),window.addEventListener("blur",v),window.addEventListener("contextmenu",v),()=>{p?.removeEventListener("keydown",y),p?.removeEventListener("keyup",x),window.removeEventListener("blur",v),window.removeEventListener("contextmenu",v)}}},[n,o]),l}function fp(n,s,l){return n.filter(o=>l||o.length===s.size).some(o=>o.every(c=>s.has(c)))}function gp(n,s){return s.includes(n)?"code":"key"}const fE=()=>{const n=Fe();return M.useMemo(()=>({zoomIn:s=>{const{panZoom:l}=n.getState();return l?l.scaleBy(1.2,{duration:s?.duration}):Promise.resolve(!1)},zoomOut:s=>{const{panZoom:l}=n.getState();return l?l.scaleBy(1/1.2,{duration:s?.duration}):Promise.resolve(!1)},zoomTo:(s,l)=>{const{panZoom:o}=n.getState();return o?o.scaleTo(s,{duration:l?.duration}):Promise.resolve(!1)},getZoom:()=>n.getState().transform[2],setViewport:async(s,l)=>{const{transform:[o,c,d],panZoom:f}=n.getState();return f?(await f.setViewport({x:s.x??o,y:s.y??c,zoom:s.zoom??d},l),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[s,l,o]=n.getState().transform;return{x:s,y:l,zoom:o}},setCenter:async(s,l,o)=>n.getState().setCenter(s,l,o),fitBounds:async(s,l)=>{const{width:o,height:c,minZoom:d,maxZoom:f,panZoom:h}=n.getState(),p=cf(s,o,c,d,f,l?.padding??.1);return h?(await h.setViewport(p,{duration:l?.duration,ease:l?.ease,interpolate:l?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(s,l={})=>{const{transform:o,snapGrid:c,snapToGrid:d,domNode:f}=n.getState();if(!f)return s;const{x:h,y:p}=f.getBoundingClientRect(),m={x:s.x-h,y:s.y-p},y=l.snapGrid??c,x=l.snapToGrid??d;return Oi(m,o,x,y)},flowToScreenPosition:s=>{const{transform:l,domNode:o}=n.getState();if(!o)return s;const{x:c,y:d}=o.getBoundingClientRect(),f=zo(s,l);return{x:f.x+c,y:f.y+d}}}),[])};function cy(n,s){const l=[],o=new Map,c=[];for(const d of n)if(d.type==="add"){c.push(d);continue}else if(d.type==="remove"||d.type==="replace")o.set(d.id,[d]);else{const f=o.get(d.id);f?f.push(d):o.set(d.id,[d])}for(const d of s){const f=o.get(d.id);if(!f){l.push(d);continue}if(f[0].type==="remove")continue;if(f[0].type==="replace"){l.push({...f[0].item});continue}const h={...d};for(const p of f)gE(p,h);l.push(h)}return c.length&&c.forEach(d=>{d.index!==void 0?l.splice(d.index,0,{...d.item}):l.push({...d.item})}),l}function gE(n,s){switch(n.type){case"select":{s.selected=n.selected;break}case"position":{typeof n.position<"u"&&(s.position=n.position),typeof n.dragging<"u"&&(s.dragging=n.dragging);break}case"dimensions":{typeof n.dimensions<"u"&&(s.measured={...n.dimensions},n.setAttributes&&((n.setAttributes===!0||n.setAttributes==="width")&&(s.width=n.dimensions.width),(n.setAttributes===!0||n.setAttributes==="height")&&(s.height=n.dimensions.height))),typeof n.resizing=="boolean"&&(s.resizing=n.resizing);break}}}function uy(n,s){return cy(n,s)}function dy(n,s){return cy(n,s)}function Wa(n,s){return{id:n,type:"select",selected:s}}function Ps(n,s=new Set,l=!1){const o=[];for(const[c,d]of n){const f=s.has(c);!(d.selected===void 0&&!f)&&d.selected!==f&&(l&&(d.selected=f),o.push(Wa(d.id,f)))}return o}function hp({items:n=[],lookup:s}){const l=[],o=new Map(n.map(c=>[c.id,c]));for(const[c,d]of n.entries()){const f=s.get(d.id),h=f?.internals?.userNode??f;h!==void 0&&h!==d&&l.push({id:d.id,item:d,type:"replace"}),h===void 0&&l.push({item:d,type:"add",index:c})}for(const[c]of s)o.get(c)===void 0&&l.push({id:c,type:"remove"});return l}function mp(n){return{id:n.id,type:"remove"}}const pp=n=>G5(n),hE=n=>Mx(n);function fy(n){return M.forwardRef(n)}const mE=typeof window<"u"?M.useLayoutEffect:M.useEffect;function xp(n){const[s,l]=M.useState(BigInt(0)),[o]=M.useState(()=>pE(()=>l(c=>c+BigInt(1))));return mE(()=>{const c=o.get();c.length&&(n(c),o.reset())},[s]),o}function pE(n){let s=[];return{get:()=>s,reset:()=>{s=[]},push:l=>{s.push(l),n()}}}const gy=M.createContext(null);function xE({children:n}){const s=Fe(),l=M.useCallback(h=>{const{nodes:p=[],setNodes:m,hasDefaultNodes:y,onNodesChange:x,nodeLookup:v,fitViewQueued:j,onNodesChangeMiddlewareMap:w}=s.getState();let T=p;for(const A of h)T=typeof A=="function"?A(T):A;let z=hp({items:T,lookup:v});for(const A of w.values())z=A(z);y&&m(T),z.length>0?x?.(z):j&&window.requestAnimationFrame(()=>{const{fitViewQueued:A,nodes:k,setNodes:N}=s.getState();A&&N(k)})},[]),o=xp(l),c=M.useCallback(h=>{const{edges:p=[],setEdges:m,hasDefaultEdges:y,onEdgesChange:x,edgeLookup:v}=s.getState();let j=p;for(const w of h)j=typeof w=="function"?w(j):w;y?m(j):x&&x(hp({items:j,lookup:v}))},[]),d=xp(c),f=M.useMemo(()=>({nodeQueue:o,edgeQueue:d}),[]);return r.jsx(gy.Provider,{value:f,children:n})}function yE(){const n=M.useContext(gy);if(!n)throw new Error("useBatchContext must be used within a BatchProvider");return n}const bE=n=>!!n.panZoom;function Zo(){const n=fE(),s=Fe(),l=yE(),o=De(bE),c=M.useMemo(()=>{const d=x=>s.getState().nodeLookup.get(x),f=x=>{l.nodeQueue.push(x)},h=x=>{l.edgeQueue.push(x)},p=x=>{const{nodeLookup:v,nodeOrigin:j}=s.getState(),w=pp(x)?x:v.get(x.id),T=w.parentId?Ux(w.position,w.measured,w.parentId,v,j):w.position,z={...w,position:T,width:w.measured?.width??w.width,height:w.measured?.height??w.height};return or(z)},m=(x,v,j={replace:!1})=>{f(w=>w.map(T=>{if(T.id===x){const z=typeof v=="function"?v(T):v;return j.replace&&pp(z)?z:{...T,...z}}return T}))},y=(x,v,j={replace:!1})=>{h(w=>w.map(T=>{if(T.id===x){const z=typeof v=="function"?v(T):v;return j.replace&&hE(z)?z:{...T,...z}}return T}))};return{getNodes:()=>s.getState().nodes.map(x=>({...x})),getNode:x=>d(x)?.internals.userNode,getInternalNode:d,getEdges:()=>{const{edges:x=[]}=s.getState();return x.map(v=>({...v}))},getEdge:x=>s.getState().edgeLookup.get(x),setNodes:f,setEdges:h,addNodes:x=>{const v=Array.isArray(x)?x:[x];l.nodeQueue.push(j=>[...j,...v])},addEdges:x=>{const v=Array.isArray(x)?x:[x];l.edgeQueue.push(j=>[...j,...v])},toObject:()=>{const{nodes:x=[],edges:v=[],transform:j}=s.getState(),[w,T,z]=j;return{nodes:x.map(A=>({...A})),edges:v.map(A=>({...A})),viewport:{x:w,y:T,zoom:z}}},deleteElements:async({nodes:x=[],edges:v=[]})=>{const{nodes:j,edges:w,onNodesDelete:T,onEdgesDelete:z,triggerNodeChanges:A,triggerEdgeChanges:k,onDelete:N,onBeforeDelete:E}=s.getState(),{nodes:L,edges:B}=await K5({nodesToRemove:x,edgesToRemove:v,nodes:j,edges:w,onBeforeDelete:E}),V=B.length>0,X=L.length>0;if(V){const H=B.map(mp);z?.(B),k(H)}if(X){const H=L.map(mp);T?.(L),A(H)}return(X||V)&&N?.({nodes:L,edges:B}),{deletedNodes:L,deletedEdges:B}},getIntersectingNodes:(x,v=!0,j)=>{const w=Z0(x),T=w?x:p(x),z=j!==void 0;return T?(j||s.getState().nodes).filter(A=>{const k=s.getState().nodeLookup.get(A.id);if(k&&!w&&(A.id===x.id||!k.internals.positionAbsolute))return!1;const N=or(z?A:k),E=Si(N,T);return v&&E>0||E>=N.width*N.height||E>=T.width*T.height}):[]},isNodeIntersecting:(x,v,j=!0)=>{const T=Z0(x)?x:p(x);if(!T)return!1;const z=Si(T,v);return j&&z>0||z>=v.width*v.height||z>=T.width*T.height},updateNode:m,updateNodeData:(x,v,j={replace:!1})=>{m(x,w=>{const T=typeof v=="function"?v(w):v;return j.replace?{...w,data:T}:{...w,data:{...w.data,...T}}},j)},updateEdge:y,updateEdgeData:(x,v,j={replace:!1})=>{y(x,w=>{const T=typeof v=="function"?v(w):v;return j.replace?{...w,data:T}:{...w,data:{...w.data,...T}}},j)},getNodesBounds:x=>{const{nodeLookup:v,nodeOrigin:j}=s.getState();return X5(x,{nodeLookup:v,nodeOrigin:j})},getHandleConnections:({type:x,id:v,nodeId:j})=>Array.from(s.getState().connectionLookup.get(`${j}-${x}${v?`-${v}`:""}`)?.values()??[]),getNodeConnections:({type:x,handleId:v,nodeId:j})=>Array.from(s.getState().connectionLookup.get(`${j}${x?v?`-${x}-${v}`:`-${x}`:""}`)?.values()??[]),fitView:async x=>{const v=s.getState().fitViewResolver??P5();return s.setState({fitViewQueued:!0,fitViewOptions:x,fitViewResolver:v}),l.nodeQueue.push(j=>[...j]),v.promise}}},[]);return M.useMemo(()=>({...c,...n,viewportInitialized:o}),[o])}const yp=n=>n.selected,vE=typeof window<"u"?window:void 0;function NE({deleteKeyCode:n,multiSelectionKeyCode:s}){const l=Fe(),{deleteElements:o}=Zo(),c=ki(n,{actInsideInputWithModifier:!1}),d=ki(s,{target:vE});M.useEffect(()=>{if(c){const{edges:f,nodes:h}=l.getState();o({nodes:h.filter(yp),edges:f.filter(yp)}),l.setState({nodesSelectionActive:!1})}},[c]),M.useEffect(()=>{l.setState({multiSelectionActive:d})},[d])}function jE(n){const s=Fe();M.useEffect(()=>{const l=()=>{if(!n.current||!(n.current.checkVisibility?.()??!0))return!1;const o=uf(n.current);(o.height===0||o.width===0)&&s.getState().onError?.("004",xn.error004()),s.setState({width:o.width||500,height:o.height||500})};if(n.current){l(),window.addEventListener("resize",l);const o=new ResizeObserver(()=>l());return o.observe(n.current),()=>{window.removeEventListener("resize",l),o&&n.current&&o.unobserve(n.current)}}},[])}const Qo={position:"absolute",width:"100%",height:"100%",top:0,left:0},wE=n=>({userSelectionActive:n.userSelectionActive,lib:n.lib,connectionInProgress:n.connection.inProgress});function SE({onPaneContextMenu:n,zoomOnScroll:s=!0,zoomOnPinch:l=!0,panOnScroll:o=!1,panOnScrollSpeed:c=.5,panOnScrollMode:d=Pa.Free,zoomOnDoubleClick:f=!0,panOnDrag:h=!0,defaultViewport:p,translateExtent:m,minZoom:y,maxZoom:x,zoomActivationKeyCode:v,preventScrolling:j=!0,children:w,noWheelClassName:T,noPanClassName:z,onViewportChange:A,isControlledViewport:k,paneClickDistance:N,selectionOnDrag:E}){const L=Fe(),B=M.useRef(null),{userSelectionActive:V,lib:X,connectionInProgress:H}=De(wE,Qe),K=ki(v),q=M.useRef();jE(B);const Z=M.useCallback(Q=>{A?.({x:Q[0],y:Q[1],zoom:Q[2]}),k||L.setState({transform:Q})},[A,k]);return M.useEffect(()=>{if(B.current){q.current=L3({domNode:B.current,minZoom:y,maxZoom:x,translateExtent:m,viewport:p,onDraggingChange:_=>L.setState({paneDragging:_}),onPanZoomStart:(_,O)=>{const{onViewportChangeStart:U,onMoveStart:Y}=L.getState();Y?.(_,O),U?.(O)},onPanZoom:(_,O)=>{const{onViewportChange:U,onMove:Y}=L.getState();Y?.(_,O),U?.(O)},onPanZoomEnd:(_,O)=>{const{onViewportChangeEnd:U,onMoveEnd:Y}=L.getState();Y?.(_,O),U?.(O)}});const{x:Q,y:C,zoom:D}=q.current.getViewport();return L.setState({panZoom:q.current,transform:[Q,C,D],domNode:B.current.closest(".react-flow")}),()=>{q.current?.destroy()}}},[]),M.useEffect(()=>{q.current?.update({onPaneContextMenu:n,zoomOnScroll:s,zoomOnPinch:l,panOnScroll:o,panOnScrollSpeed:c,panOnScrollMode:d,zoomOnDoubleClick:f,panOnDrag:h,zoomActivationKeyPressed:K,preventScrolling:j,noPanClassName:z,userSelectionActive:V,noWheelClassName:T,lib:X,onTransformChange:Z,connectionInProgress:H,selectionOnDrag:E,paneClickDistance:N})},[n,s,l,o,c,d,f,h,K,j,z,V,T,X,Z,H,E,N]),r.jsx("div",{className:"react-flow__renderer",ref:B,style:Qo,children:w})}const _E=n=>({userSelectionActive:n.userSelectionActive,userSelectionRect:n.userSelectionRect});function kE(){const{userSelectionActive:n,userSelectionRect:s}=De(_E,Qe);return n&&s?r.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:s.width,height:s.height,transform:`translate(${s.x}px, ${s.y}px)`}}):null}const zd=(n,s)=>l=>{l.target===s.current&&n?.(l)},CE=n=>({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable,connectionInProgress:n.connection.inProgress,dragging:n.paneDragging});function EE({isSelecting:n,selectionKeyPressed:s,selectionMode:l=wi.Full,panOnDrag:o,paneClickDistance:c,selectionOnDrag:d,onSelectionStart:f,onSelectionEnd:h,onPaneClick:p,onPaneContextMenu:m,onPaneScroll:y,onPaneMouseEnter:x,onPaneMouseMove:v,onPaneMouseLeave:j,children:w}){const T=Fe(),{userSelectionActive:z,elementsSelectable:A,dragging:k,connectionInProgress:N}=De(CE,Qe),E=A&&(n||z),L=M.useRef(null),B=M.useRef(),V=M.useRef(new Set),X=M.useRef(new Set),H=M.useRef(!1),K=U=>{if(H.current||N){H.current=!1;return}p?.(U),T.getState().resetSelectedElements(),T.setState({nodesSelectionActive:!1})},q=U=>{if(Array.isArray(o)&&o?.includes(2)){U.preventDefault();return}m?.(U)},Z=y?U=>y(U):void 0,Q=U=>{H.current&&(U.stopPropagation(),H.current=!1)},C=U=>{const{domNode:Y}=T.getState();if(B.current=Y?.getBoundingClientRect(),!B.current)return;const te=U.target===L.current;if(!te&&!!U.target.closest(".nokey")||!n||!(d&&te||s)||U.button!==0||!U.isPrimary)return;U.target?.setPointerCapture?.(U.pointerId),H.current=!1;const{x:se,y:le}=nn(U.nativeEvent,B.current);T.setState({userSelectionRect:{width:0,height:0,startX:se,startY:le,x:se,y:le}}),te||(U.stopPropagation(),U.preventDefault())},D=U=>{const{userSelectionRect:Y,transform:te,nodeLookup:F,edgeLookup:P,connectionLookup:se,triggerNodeChanges:le,triggerEdgeChanges:fe,defaultEdgeOptions:be,resetSelectedElements:he}=T.getState();if(!B.current||!Y)return;const{x:oe,y:ue}=nn(U.nativeEvent,B.current),{startX:_e,startY:we}=Y;if(!H.current){const Se=s?0:c;if(Math.hypot(oe-_e,ue-we)<=Se)return;he(),f?.(U)}H.current=!0;const xe={startX:_e,startY:we,x:oe<_e?oe:_e,y:ue<we?ue:we,width:Math.abs(oe-_e),height:Math.abs(ue-we)},Ne=V.current,ie=X.current;V.current=new Set(of(F,xe,te,l===wi.Partial,!0).map(Se=>Se.id)),X.current=new Set;const ye=be?.selectable??!0;for(const Se of V.current){const Ye=se.get(Se);if(Ye)for(const{edgeId:Ft}of Ye.values()){const zt=P.get(Ft);zt&&(zt.selectable??ye)&&X.current.add(Ft)}}if(!Q0(Ne,V.current)){const Se=Ps(F,V.current,!0);le(Se)}if(!Q0(ie,X.current)){const Se=Ps(P,X.current);fe(Se)}T.setState({userSelectionRect:xe,userSelectionActive:!0,nodesSelectionActive:!1})},_=U=>{U.button===0&&(U.target?.releasePointerCapture?.(U.pointerId),!z&&U.target===L.current&&T.getState().userSelectionRect&&K?.(U),T.setState({userSelectionActive:!1,userSelectionRect:null}),H.current&&(h?.(U),T.setState({nodesSelectionActive:V.current.size>0})))},O=o===!0||Array.isArray(o)&&o.includes(0);return r.jsxs("div",{className:st(["react-flow__pane",{draggable:O,dragging:k,selection:n}]),onClick:E?void 0:zd(K,L),onContextMenu:zd(q,L),onWheel:zd(Z,L),onPointerEnter:E?void 0:x,onPointerMove:E?D:v,onPointerUp:E?_:void 0,onPointerDownCapture:E?C:void 0,onClickCapture:E?Q:void 0,onPointerLeave:j,ref:L,style:Qo,children:[w,r.jsx(kE,{})]})}function Fd({id:n,store:s,unselect:l=!1,nodeRef:o}){const{addSelectedNodes:c,unselectNodesAndEdges:d,multiSelectionActive:f,nodeLookup:h,onError:p}=s.getState(),m=h.get(n);if(!m){p?.("012",xn.error012(n));return}s.setState({nodesSelectionActive:!1}),m.selected?(l||m.selected&&f)&&(d({nodes:[m],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):c([n])}function hy({nodeRef:n,disabled:s=!1,noDragClassName:l,handleSelector:o,nodeId:c,isSelectable:d,nodeClickDistance:f}){const h=Fe(),[p,m]=M.useState(!1),y=M.useRef();return M.useEffect(()=>{y.current=N3({getStoreItems:()=>h.getState(),onNodeMouseDown:x=>{Fd({id:x,store:h,nodeRef:n})},onDragStart:()=>{m(!0)},onDragStop:()=>{m(!1)}})},[]),M.useEffect(()=>{if(s)y.current?.destroy();else if(n.current)return y.current?.update({noDragClassName:l,handleSelector:o,domNode:n.current,isSelectable:d,nodeId:c,nodeClickDistance:f}),()=>{y.current?.destroy()}},[l,o,s,d,n,c]),p}const zE=n=>s=>s.selected&&(s.draggable||n&&typeof s.draggable>"u");function my(){const n=Fe();return M.useCallback(l=>{const{nodeExtent:o,snapToGrid:c,snapGrid:d,nodesDraggable:f,onError:h,updateNodePositions:p,nodeLookup:m,nodeOrigin:y}=n.getState(),x=new Map,v=zE(f),j=c?d[0]:5,w=c?d[1]:5,T=l.direction.x*j*l.factor,z=l.direction.y*w*l.factor;for(const[,A]of m){if(!v(A))continue;let k={x:A.internals.positionAbsolute.x+T,y:A.internals.positionAbsolute.y+z};c&&(k=Di(k,d));const{position:N,positionAbsolute:E}=Dx({nodeId:A.id,nextPosition:k,nodeLookup:m,nodeExtent:o,nodeOrigin:y,onError:h});A.position=N,A.internals.positionAbsolute=E,x.set(A.id,A)}p(x)},[])}const pf=M.createContext(null),AE=pf.Provider;pf.Consumer;const py=()=>M.useContext(pf),TE=n=>({connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName,rfId:n.rfId}),ME=(n,s,l)=>o=>{const{connectionClickStartHandle:c,connectionMode:d,connection:f}=o,{fromHandle:h,toHandle:p,isValid:m}=f,y=p?.nodeId===n&&p?.id===s&&p?.type===l;return{connectingFrom:h?.nodeId===n&&h?.id===s&&h?.type===l,connectingTo:y,clickConnecting:c?.nodeId===n&&c?.id===s&&c?.type===l,isPossibleEndHandle:d===ir.Strict?h?.type!==l:n!==h?.nodeId||s!==h?.id,connectionInProcess:!!h,clickConnectionInProcess:!!c,valid:y&&m}};function DE({type:n="source",position:s=me.Top,isValidConnection:l,isConnectable:o=!0,isConnectableStart:c=!0,isConnectableEnd:d=!0,id:f,onConnect:h,children:p,className:m,onMouseDown:y,onTouchStart:x,...v},j){const w=f||null,T=n==="target",z=Fe(),A=py(),{connectOnClick:k,noPanClassName:N,rfId:E}=De(TE,Qe),{connectingFrom:L,connectingTo:B,clickConnecting:V,isPossibleEndHandle:X,connectionInProcess:H,clickConnectionInProcess:K,valid:q}=De(ME(A,w,n),Qe);A||z.getState().onError?.("010",xn.error010());const Z=D=>{const{defaultEdgeOptions:_,onConnect:O,hasDefaultEdges:U}=z.getState(),Y={..._,...D};if(U){const{edges:te,setEdges:F}=z.getState();F(Xx(Y,te))}O?.(Y),h?.(Y)},Q=D=>{if(!A)return;const _=Vx(D.nativeEvent);if(c&&(_&&D.button===0||!_)){const O=z.getState();Qd.onPointerDown(D.nativeEvent,{handleDomNode:D.currentTarget,autoPanOnConnect:O.autoPanOnConnect,connectionMode:O.connectionMode,connectionRadius:O.connectionRadius,domNode:O.domNode,nodeLookup:O.nodeLookup,lib:O.lib,isTarget:T,handleId:w,nodeId:A,flowId:O.rfId,panBy:O.panBy,cancelConnection:O.cancelConnection,onConnectStart:O.onConnectStart,onConnectEnd:O.onConnectEnd,updateConnection:O.updateConnection,onConnect:Z,isValidConnection:l||O.isValidConnection,getTransform:()=>z.getState().transform,getFromHandle:()=>z.getState().connection.fromHandle,autoPanSpeed:O.autoPanSpeed,dragThreshold:O.connectionDragThreshold})}_?y?.(D):x?.(D)},C=D=>{const{onClickConnectStart:_,onClickConnectEnd:O,connectionClickStartHandle:U,connectionMode:Y,isValidConnection:te,lib:F,rfId:P,nodeLookup:se,connection:le}=z.getState();if(!A||!U&&!c)return;if(!U){_?.(D.nativeEvent,{nodeId:A,handleId:w,handleType:n}),z.setState({connectionClickStartHandle:{nodeId:A,type:n,id:w}});return}const fe=Bx(D.target),be=l||te,{connection:he,isValid:oe}=Qd.isValid(D.nativeEvent,{handle:{nodeId:A,id:w,type:n},connectionMode:Y,fromNodeId:U.nodeId,fromHandleId:U.id||null,fromType:U.type,isValidConnection:be,flowId:P,doc:fe,lib:F,nodeLookup:se});oe&&he&&Z(he);const ue=structuredClone(le);delete ue.inProgress,ue.toPosition=ue.toHandle?ue.toHandle.position:null,O?.(D,ue),z.setState({connectionClickStartHandle:null})};return r.jsx("div",{"data-handleid":w,"data-nodeid":A,"data-handlepos":s,"data-id":`${E}-${A}-${w}-${n}`,className:st(["react-flow__handle",`react-flow__handle-${s}`,"nodrag",N,m,{source:!T,target:T,connectable:o,connectablestart:c,connectableend:d,clickconnecting:V,connectingfrom:L,connectingto:B,valid:q,connectionindicator:o&&(!H||X)&&(H||K?d:c)}]),onMouseDown:Q,onTouchStart:Q,onClick:k?C:void 0,ref:j,...v,children:p})}const pn=M.memo(fy(DE));function OE({data:n,isConnectable:s,sourcePosition:l=me.Bottom}){return r.jsxs(r.Fragment,{children:[n?.label,r.jsx(pn,{type:"source",position:l,isConnectable:s})]})}function LE({data:n,isConnectable:s,targetPosition:l=me.Top,sourcePosition:o=me.Bottom}){return r.jsxs(r.Fragment,{children:[r.jsx(pn,{type:"target",position:l,isConnectable:s}),n?.label,r.jsx(pn,{type:"source",position:o,isConnectable:s})]})}function RE(){return null}function HE({data:n,isConnectable:s,targetPosition:l=me.Top}){return r.jsxs(r.Fragment,{children:[r.jsx(pn,{type:"target",position:l,isConnectable:s}),n?.label]})}const Ao={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},bp={input:OE,default:LE,output:HE,group:RE};function UE(n){return n.internals.handleBounds===void 0?{width:n.width??n.initialWidth??n.style?.width,height:n.height??n.initialHeight??n.style?.height}:{width:n.width??n.style?.width,height:n.height??n.style?.height}}const BE=n=>{const{width:s,height:l,x:o,y:c}=Mi(n.nodeLookup,{filter:d=>!!d.selected});return{width:tn(s)?s:null,height:tn(l)?l:null,userSelectionActive:n.userSelectionActive,transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]}) translate(${o}px,${c}px)`}};function $E({onSelectionContextMenu:n,noPanClassName:s,disableKeyboardA11y:l}){const o=Fe(),{width:c,height:d,transformString:f,userSelectionActive:h}=De(BE,Qe),p=my(),m=M.useRef(null);if(M.useEffect(()=>{l||m.current?.focus({preventScroll:!0})},[l]),hy({nodeRef:m}),h||!c||!d)return null;const y=n?v=>{const j=o.getState().nodes.filter(w=>w.selected);n(v,j)}:void 0,x=v=>{Object.prototype.hasOwnProperty.call(Ao,v.key)&&(v.preventDefault(),p({direction:Ao[v.key],factor:v.shiftKey?4:1}))};return r.jsx("div",{className:st(["react-flow__nodesselection","react-flow__container",s]),style:{transform:f},children:r.jsx("div",{ref:m,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:l?void 0:-1,onKeyDown:l?void 0:x,style:{width:c,height:d}})})}const vp=typeof window<"u"?window:void 0,VE=n=>({nodesSelectionActive:n.nodesSelectionActive,userSelectionActive:n.userSelectionActive});function xy({children:n,onPaneClick:s,onPaneMouseEnter:l,onPaneMouseMove:o,onPaneMouseLeave:c,onPaneContextMenu:d,onPaneScroll:f,paneClickDistance:h,deleteKeyCode:p,selectionKeyCode:m,selectionOnDrag:y,selectionMode:x,onSelectionStart:v,onSelectionEnd:j,multiSelectionKeyCode:w,panActivationKeyCode:T,zoomActivationKeyCode:z,elementsSelectable:A,zoomOnScroll:k,zoomOnPinch:N,panOnScroll:E,panOnScrollSpeed:L,panOnScrollMode:B,zoomOnDoubleClick:V,panOnDrag:X,defaultViewport:H,translateExtent:K,minZoom:q,maxZoom:Z,preventScrolling:Q,onSelectionContextMenu:C,noWheelClassName:D,noPanClassName:_,disableKeyboardA11y:O,onViewportChange:U,isControlledViewport:Y}){const{nodesSelectionActive:te,userSelectionActive:F}=De(VE,Qe),P=ki(m,{target:vp}),se=ki(T,{target:vp}),le=se||X,fe=se||E,be=y&&le!==!0,he=P||F||be;return NE({deleteKeyCode:p,multiSelectionKeyCode:w}),r.jsx(SE,{onPaneContextMenu:d,elementsSelectable:A,zoomOnScroll:k,zoomOnPinch:N,panOnScroll:fe,panOnScrollSpeed:L,panOnScrollMode:B,zoomOnDoubleClick:V,panOnDrag:!P&&le,defaultViewport:H,translateExtent:K,minZoom:q,maxZoom:Z,zoomActivationKeyCode:z,preventScrolling:Q,noWheelClassName:D,noPanClassName:_,onViewportChange:U,isControlledViewport:Y,paneClickDistance:h,selectionOnDrag:be,children:r.jsxs(EE,{onSelectionStart:v,onSelectionEnd:j,onPaneClick:s,onPaneMouseEnter:l,onPaneMouseMove:o,onPaneMouseLeave:c,onPaneContextMenu:d,onPaneScroll:f,panOnDrag:le,isSelecting:!!he,selectionMode:x,selectionKeyPressed:P,paneClickDistance:h,selectionOnDrag:be,children:[n,te&&r.jsx($E,{onSelectionContextMenu:C,noPanClassName:_,disableKeyboardA11y:O})]})})}xy.displayName="FlowRenderer";const qE=M.memo(xy),YE=n=>s=>n?of(s.nodeLookup,{x:0,y:0,width:s.width,height:s.height},s.transform,!0).map(l=>l.id):Array.from(s.nodeLookup.keys());function GE(n){return De(M.useCallback(YE(n),[n]),Qe)}const XE=n=>n.updateNodeInternals;function ZE(){const n=De(XE),[s]=M.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(l=>{const o=new Map;l.forEach(c=>{const d=c.target.getAttribute("data-id");o.set(d,{id:d,nodeElement:c.target,force:!0})}),n(o)}));return M.useEffect(()=>()=>{s?.disconnect()},[s]),s}function QE({node:n,nodeType:s,hasDimensions:l,resizeObserver:o}){const c=Fe(),d=M.useRef(null),f=M.useRef(null),h=M.useRef(n.sourcePosition),p=M.useRef(n.targetPosition),m=M.useRef(s),y=l&&!!n.internals.handleBounds;return M.useEffect(()=>{d.current&&!n.hidden&&(!y||f.current!==d.current)&&(f.current&&o?.unobserve(f.current),o?.observe(d.current),f.current=d.current)},[y,n.hidden]),M.useEffect(()=>()=>{f.current&&(o?.unobserve(f.current),f.current=null)},[]),M.useEffect(()=>{if(d.current){const x=m.current!==s,v=h.current!==n.sourcePosition,j=p.current!==n.targetPosition;(x||v||j)&&(m.current=s,h.current=n.sourcePosition,p.current=n.targetPosition,c.getState().updateNodeInternals(new Map([[n.id,{id:n.id,nodeElement:d.current,force:!0}]])))}},[n.id,s,n.sourcePosition,n.targetPosition]),d}function FE({id:n,onClick:s,onMouseEnter:l,onMouseMove:o,onMouseLeave:c,onContextMenu:d,onDoubleClick:f,nodesDraggable:h,elementsSelectable:p,nodesConnectable:m,nodesFocusable:y,resizeObserver:x,noDragClassName:v,noPanClassName:j,disableKeyboardA11y:w,rfId:T,nodeTypes:z,nodeClickDistance:A,onError:k}){const{node:N,internals:E,isParent:L}=De(oe=>{const ue=oe.nodeLookup.get(n),_e=oe.parentLookup.has(n);return{node:ue,internals:ue.internals,isParent:_e}},Qe);let B=N.type||"default",V=z?.[B]||bp[B];V===void 0&&(k?.("003",xn.error003(B)),B="default",V=z?.default||bp.default);const X=!!(N.draggable||h&&typeof N.draggable>"u"),H=!!(N.selectable||p&&typeof N.selectable>"u"),K=!!(N.connectable||m&&typeof N.connectable>"u"),q=!!(N.focusable||y&&typeof N.focusable>"u"),Z=Fe(),Q=Hx(N),C=QE({node:N,nodeType:B,hasDimensions:Q,resizeObserver:x}),D=hy({nodeRef:C,disabled:N.hidden||!X,noDragClassName:v,handleSelector:N.dragHandle,nodeId:n,isSelectable:H,nodeClickDistance:A}),_=my();if(N.hidden)return null;const O=Xn(N),U=UE(N),Y=H||X||s||l||o||c,te=l?oe=>l(oe,{...E.userNode}):void 0,F=o?oe=>o(oe,{...E.userNode}):void 0,P=c?oe=>c(oe,{...E.userNode}):void 0,se=d?oe=>d(oe,{...E.userNode}):void 0,le=f?oe=>f(oe,{...E.userNode}):void 0,fe=oe=>{const{selectNodesOnDrag:ue,nodeDragThreshold:_e}=Z.getState();H&&(!ue||!X||_e>0)&&Fd({id:n,store:Z,nodeRef:C}),s&&s(oe,{...E.userNode})},be=oe=>{if(!($x(oe.nativeEvent)||w)){if(Ex.includes(oe.key)&&H){const ue=oe.key==="Escape";Fd({id:n,store:Z,unselect:ue,nodeRef:C})}else if(X&&N.selected&&Object.prototype.hasOwnProperty.call(Ao,oe.key)){oe.preventDefault();const{ariaLabelConfig:ue}=Z.getState();Z.setState({ariaLiveMessage:ue["node.a11yDescription.ariaLiveMessage"]({direction:oe.key.replace("Arrow","").toLowerCase(),x:~~E.positionAbsolute.x,y:~~E.positionAbsolute.y})}),_({direction:Ao[oe.key],factor:oe.shiftKey?4:1})}}},he=()=>{if(w||!C.current?.matches(":focus-visible"))return;const{transform:oe,width:ue,height:_e,autoPanOnNodeFocus:we,setCenter:xe}=Z.getState();if(!we)return;of(new Map([[n,N]]),{x:0,y:0,width:ue,height:_e},oe,!0).length>0||xe(N.position.x+O.width/2,N.position.y+O.height/2,{zoom:oe[2]})};return r.jsx("div",{className:st(["react-flow__node",`react-flow__node-${B}`,{[j]:X},N.className,{selected:N.selected,selectable:H,parent:L,draggable:X,dragging:D}]),ref:C,style:{zIndex:E.z,transform:`translate(${E.positionAbsolute.x}px,${E.positionAbsolute.y}px)`,pointerEvents:Y?"all":"none",visibility:Q?"visible":"hidden",...N.style,...U},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:te,onMouseMove:F,onMouseLeave:P,onContextMenu:se,onClick:fe,onDoubleClick:le,onKeyDown:q?be:void 0,tabIndex:q?0:void 0,onFocus:q?he:void 0,role:N.ariaRole??(q?"group":void 0),"aria-roledescription":"node","aria-describedby":w?void 0:`${iy}-${T}`,"aria-label":N.ariaLabel,...N.domAttributes,children:r.jsx(AE,{value:n,children:r.jsx(V,{id:n,data:N.data,type:B,positionAbsoluteX:E.positionAbsolute.x,positionAbsoluteY:E.positionAbsolute.y,selected:N.selected??!1,selectable:H,draggable:X,deletable:N.deletable??!0,isConnectable:K,sourcePosition:N.sourcePosition,targetPosition:N.targetPosition,dragging:D,dragHandle:N.dragHandle,zIndex:E.z,parentId:N.parentId,...O})})})}var KE=M.memo(FE);const IE=n=>({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,onError:n.onError});function yy(n){const{nodesDraggable:s,nodesConnectable:l,nodesFocusable:o,elementsSelectable:c,onError:d}=De(IE,Qe),f=GE(n.onlyRenderVisibleElements),h=ZE();return r.jsx("div",{className:"react-flow__nodes",style:Qo,children:f.map(p=>r.jsx(KE,{id:p,nodeTypes:n.nodeTypes,nodeExtent:n.nodeExtent,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,resizeObserver:h,nodesDraggable:s,nodesConnectable:l,nodesFocusable:o,elementsSelectable:c,nodeClickDistance:n.nodeClickDistance,onError:d},p))})}yy.displayName="NodeRenderer";const JE=M.memo(yy);function WE(n){return De(M.useCallback(l=>{if(!n)return l.edges.map(c=>c.id);const o=[];if(l.width&&l.height)for(const c of l.edges){const d=l.nodeLookup.get(c.source),f=l.nodeLookup.get(c.target);d&&f&&a3({sourceNode:d,targetNode:f,width:l.width,height:l.height,transform:l.transform})&&o.push(c.id)}return o},[n]),Qe)}const PE=({color:n="none",strokeWidth:s=1})=>{const l={strokeWidth:s,...n&&{stroke:n}};return r.jsx("polyline",{className:"arrow",style:l,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},ez=({color:n="none",strokeWidth:s=1})=>{const l={strokeWidth:s,...n&&{stroke:n,fill:n}};return r.jsx("polyline",{className:"arrowclosed",style:l,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Np={[Co.Arrow]:PE,[Co.ArrowClosed]:ez};function tz(n){const s=Fe();return M.useMemo(()=>Object.prototype.hasOwnProperty.call(Np,n)?Np[n]:(s.getState().onError?.("009",xn.error009(n)),null),[n])}const nz=({id:n,type:s,color:l,width:o=12.5,height:c=12.5,markerUnits:d="strokeWidth",strokeWidth:f,orient:h="auto-start-reverse"})=>{const p=tz(s);return p?r.jsx("marker",{className:"react-flow__arrowhead",id:n,markerWidth:`${o}`,markerHeight:`${c}`,viewBox:"-10 -10 20 20",markerUnits:d,orient:h,refX:"0",refY:"0",children:r.jsx(p,{color:l,strokeWidth:f})}):null},by=({defaultColor:n,rfId:s})=>{const l=De(d=>d.edges),o=De(d=>d.defaultEdgeOptions),c=M.useMemo(()=>u3(l,{id:s,defaultColor:n,defaultMarkerStart:o?.markerStart,defaultMarkerEnd:o?.markerEnd}),[l,o,s,n]);return c.length?r.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:r.jsx("defs",{children:c.map(d=>r.jsx(nz,{id:d.id,type:d.type,color:d.color,width:d.width,height:d.height,markerUnits:d.markerUnits,strokeWidth:d.strokeWidth,orient:d.orient},d.id))})}):null};by.displayName="MarkerDefinitions";var az=M.memo(by);function vy({x:n,y:s,label:l,labelStyle:o,labelShowBg:c=!0,labelBgStyle:d,labelBgPadding:f=[2,4],labelBgBorderRadius:h=2,children:p,className:m,...y}){const[x,v]=M.useState({x:1,y:0,width:0,height:0}),j=st(["react-flow__edge-textwrapper",m]),w=M.useRef(null);return M.useEffect(()=>{if(w.current){const T=w.current.getBBox();v({x:T.x,y:T.y,width:T.width,height:T.height})}},[l]),l?r.jsxs("g",{transform:`translate(${n-x.width/2} ${s-x.height/2})`,className:j,visibility:x.width?"visible":"hidden",...y,children:[c&&r.jsx("rect",{width:x.width+2*f[0],x:-f[0],y:-f[1],height:x.height+2*f[1],className:"react-flow__edge-textbg",style:d,rx:h,ry:h}),r.jsx("text",{className:"react-flow__edge-text",y:x.height/2,dy:"0.3em",ref:w,style:o,children:l}),p]}):null}vy.displayName="EdgeText";const sz=M.memo(vy);function Fo({path:n,labelX:s,labelY:l,label:o,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,interactionWidth:m=20,...y}){return r.jsxs(r.Fragment,{children:[r.jsx("path",{...y,d:n,fill:"none",className:st(["react-flow__edge-path",y.className])}),m?r.jsx("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}):null,o&&tn(s)&&tn(l)?r.jsx(sz,{x:s,y:l,label:o,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p}):null]})}function jp({pos:n,x1:s,y1:l,x2:o,y2:c}){return n===me.Left||n===me.Right?[.5*(s+o),l]:[s,.5*(l+c)]}function Ny({sourceX:n,sourceY:s,sourcePosition:l=me.Bottom,targetX:o,targetY:c,targetPosition:d=me.Top}){const[f,h]=jp({pos:l,x1:n,y1:s,x2:o,y2:c}),[p,m]=jp({pos:d,x1:o,y1:c,x2:n,y2:s}),[y,x,v,j]=qx({sourceX:n,sourceY:s,targetX:o,targetY:c,sourceControlX:f,sourceControlY:h,targetControlX:p,targetControlY:m});return[`M${n},${s} C${f},${h} ${p},${m} ${o},${c}`,y,x,v,j]}function jy(n){return M.memo(({id:s,sourceX:l,sourceY:o,targetX:c,targetY:d,sourcePosition:f,targetPosition:h,label:p,labelStyle:m,labelShowBg:y,labelBgStyle:x,labelBgPadding:v,labelBgBorderRadius:j,style:w,markerEnd:T,markerStart:z,interactionWidth:A})=>{const[k,N,E]=Ny({sourceX:l,sourceY:o,sourcePosition:f,targetX:c,targetY:d,targetPosition:h}),L=n.isInternal?void 0:s;return r.jsx(Fo,{id:L,path:k,labelX:N,labelY:E,label:p,labelStyle:m,labelShowBg:y,labelBgStyle:x,labelBgPadding:v,labelBgBorderRadius:j,style:w,markerEnd:T,markerStart:z,interactionWidth:A})})}const rz=jy({isInternal:!1}),wy=jy({isInternal:!0});rz.displayName="SimpleBezierEdge";wy.displayName="SimpleBezierEdgeInternal";function Sy(n){return M.memo(({id:s,sourceX:l,sourceY:o,targetX:c,targetY:d,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:x,style:v,sourcePosition:j=me.Bottom,targetPosition:w=me.Top,markerEnd:T,markerStart:z,pathOptions:A,interactionWidth:k})=>{const[N,E,L]=Gd({sourceX:l,sourceY:o,sourcePosition:j,targetX:c,targetY:d,targetPosition:w,borderRadius:A?.borderRadius,offset:A?.offset,stepPosition:A?.stepPosition}),B=n.isInternal?void 0:s;return r.jsx(Fo,{id:B,path:N,labelX:E,labelY:L,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:x,style:v,markerEnd:T,markerStart:z,interactionWidth:k})})}const _y=Sy({isInternal:!1}),ky=Sy({isInternal:!0});_y.displayName="SmoothStepEdge";ky.displayName="SmoothStepEdgeInternal";function Cy(n){return M.memo(({id:s,...l})=>{const o=n.isInternal?void 0:s;return r.jsx(_y,{...l,id:o,pathOptions:M.useMemo(()=>({borderRadius:0,offset:l.pathOptions?.offset}),[l.pathOptions?.offset])})})}const iz=Cy({isInternal:!1}),Ey=Cy({isInternal:!0});iz.displayName="StepEdge";Ey.displayName="StepEdgeInternal";function zy(n){return M.memo(({id:s,sourceX:l,sourceY:o,targetX:c,targetY:d,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:x,style:v,markerEnd:j,markerStart:w,interactionWidth:T})=>{const[z,A,k]=Zx({sourceX:l,sourceY:o,targetX:c,targetY:d}),N=n.isInternal?void 0:s;return r.jsx(Fo,{id:N,path:z,labelX:A,labelY:k,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:x,style:v,markerEnd:j,markerStart:w,interactionWidth:T})})}const lz=zy({isInternal:!1}),Ay=zy({isInternal:!0});lz.displayName="StraightEdge";Ay.displayName="StraightEdgeInternal";function Ty(n){return M.memo(({id:s,sourceX:l,sourceY:o,targetX:c,targetY:d,sourcePosition:f=me.Bottom,targetPosition:h=me.Top,label:p,labelStyle:m,labelShowBg:y,labelBgStyle:x,labelBgPadding:v,labelBgBorderRadius:j,style:w,markerEnd:T,markerStart:z,pathOptions:A,interactionWidth:k})=>{const[N,E,L]=Yx({sourceX:l,sourceY:o,sourcePosition:f,targetX:c,targetY:d,targetPosition:h,curvature:A?.curvature}),B=n.isInternal?void 0:s;return r.jsx(Fo,{id:B,path:N,labelX:E,labelY:L,label:p,labelStyle:m,labelShowBg:y,labelBgStyle:x,labelBgPadding:v,labelBgBorderRadius:j,style:w,markerEnd:T,markerStart:z,interactionWidth:k})})}const oz=Ty({isInternal:!1}),My=Ty({isInternal:!0});oz.displayName="BezierEdge";My.displayName="BezierEdgeInternal";const wp={default:My,straight:Ay,step:Ey,smoothstep:ky,simplebezier:wy},Sp={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},cz=(n,s,l)=>l===me.Left?n-s:l===me.Right?n+s:n,uz=(n,s,l)=>l===me.Top?n-s:l===me.Bottom?n+s:n,_p="react-flow__edgeupdater";function kp({position:n,centerX:s,centerY:l,radius:o=10,onMouseDown:c,onMouseEnter:d,onMouseOut:f,type:h}){return r.jsx("circle",{onMouseDown:c,onMouseEnter:d,onMouseOut:f,className:st([_p,`${_p}-${h}`]),cx:cz(s,o,n),cy:uz(l,o,n),r:o,stroke:"transparent",fill:"transparent"})}function dz({isReconnectable:n,reconnectRadius:s,edge:l,sourceX:o,sourceY:c,targetX:d,targetY:f,sourcePosition:h,targetPosition:p,onReconnect:m,onReconnectStart:y,onReconnectEnd:x,setReconnecting:v,setUpdateHover:j}){const w=Fe(),T=(E,L)=>{if(E.button!==0)return;const{autoPanOnConnect:B,domNode:V,isValidConnection:X,connectionMode:H,connectionRadius:K,lib:q,onConnectStart:Z,onConnectEnd:Q,cancelConnection:C,nodeLookup:D,rfId:_,panBy:O,updateConnection:U}=w.getState(),Y=L.type==="target",te=(se,le)=>{v(!1),x?.(se,l,L.type,le)},F=se=>m?.(l,se),P=(se,le)=>{v(!0),y?.(E,l,L.type),Z?.(se,le)};Qd.onPointerDown(E.nativeEvent,{autoPanOnConnect:B,connectionMode:H,connectionRadius:K,domNode:V,handleId:L.id,nodeId:L.nodeId,nodeLookup:D,isTarget:Y,edgeUpdaterType:L.type,lib:q,flowId:_,cancelConnection:C,panBy:O,isValidConnection:X,onConnect:F,onConnectStart:P,onConnectEnd:Q,onReconnectEnd:te,updateConnection:U,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,dragThreshold:w.getState().connectionDragThreshold,handleDomNode:E.currentTarget})},z=E=>T(E,{nodeId:l.target,id:l.targetHandle??null,type:"target"}),A=E=>T(E,{nodeId:l.source,id:l.sourceHandle??null,type:"source"}),k=()=>j(!0),N=()=>j(!1);return r.jsxs(r.Fragment,{children:[(n===!0||n==="source")&&r.jsx(kp,{position:h,centerX:o,centerY:c,radius:s,onMouseDown:z,onMouseEnter:k,onMouseOut:N,type:"source"}),(n===!0||n==="target")&&r.jsx(kp,{position:p,centerX:d,centerY:f,radius:s,onMouseDown:A,onMouseEnter:k,onMouseOut:N,type:"target"})]})}function fz({id:n,edgesFocusable:s,edgesReconnectable:l,elementsSelectable:o,onClick:c,onDoubleClick:d,onContextMenu:f,onMouseEnter:h,onMouseMove:p,onMouseLeave:m,reconnectRadius:y,onReconnect:x,onReconnectStart:v,onReconnectEnd:j,rfId:w,edgeTypes:T,noPanClassName:z,onError:A,disableKeyboardA11y:k}){let N=De(xe=>xe.edgeLookup.get(n));const E=De(xe=>xe.defaultEdgeOptions);N=E?{...E,...N}:N;let L=N.type||"default",B=T?.[L]||wp[L];B===void 0&&(A?.("011",xn.error011(L)),L="default",B=T?.default||wp.default);const V=!!(N.focusable||s&&typeof N.focusable>"u"),X=typeof x<"u"&&(N.reconnectable||l&&typeof N.reconnectable>"u"),H=!!(N.selectable||o&&typeof N.selectable>"u"),K=M.useRef(null),[q,Z]=M.useState(!1),[Q,C]=M.useState(!1),D=Fe(),{zIndex:_,sourceX:O,sourceY:U,targetX:Y,targetY:te,sourcePosition:F,targetPosition:P}=De(M.useCallback(xe=>{const Ne=xe.nodeLookup.get(N.source),ie=xe.nodeLookup.get(N.target);if(!Ne||!ie)return{zIndex:N.zIndex,...Sp};const ye=c3({id:n,sourceNode:Ne,targetNode:ie,sourceHandle:N.sourceHandle||null,targetHandle:N.targetHandle||null,connectionMode:xe.connectionMode,onError:A});return{zIndex:n3({selected:N.selected,zIndex:N.zIndex,sourceNode:Ne,targetNode:ie,elevateOnSelect:xe.elevateEdgesOnSelect,zIndexMode:xe.zIndexMode}),...ye||Sp}},[N.source,N.target,N.sourceHandle,N.targetHandle,N.selected,N.zIndex]),Qe),se=M.useMemo(()=>N.markerStart?`url('#${Xd(N.markerStart,w)}')`:void 0,[N.markerStart,w]),le=M.useMemo(()=>N.markerEnd?`url('#${Xd(N.markerEnd,w)}')`:void 0,[N.markerEnd,w]);if(N.hidden||O===null||U===null||Y===null||te===null)return null;const fe=xe=>{const{addSelectedEdges:Ne,unselectNodesAndEdges:ie,multiSelectionActive:ye}=D.getState();H&&(D.setState({nodesSelectionActive:!1}),N.selected&&ye?(ie({nodes:[],edges:[N]}),K.current?.blur()):Ne([n])),c&&c(xe,N)},be=d?xe=>{d(xe,{...N})}:void 0,he=f?xe=>{f(xe,{...N})}:void 0,oe=h?xe=>{h(xe,{...N})}:void 0,ue=p?xe=>{p(xe,{...N})}:void 0,_e=m?xe=>{m(xe,{...N})}:void 0,we=xe=>{if(!k&&Ex.includes(xe.key)&&H){const{unselectNodesAndEdges:Ne,addSelectedEdges:ie}=D.getState();xe.key==="Escape"?(K.current?.blur(),Ne({edges:[N]})):ie([n])}};return r.jsx("svg",{style:{zIndex:_},children:r.jsxs("g",{className:st(["react-flow__edge",`react-flow__edge-${L}`,N.className,z,{selected:N.selected,animated:N.animated,inactive:!H&&!c,updating:q,selectable:H}]),onClick:fe,onDoubleClick:be,onContextMenu:he,onMouseEnter:oe,onMouseMove:ue,onMouseLeave:_e,onKeyDown:V?we:void 0,tabIndex:V?0:void 0,role:N.ariaRole??(V?"group":"img"),"aria-roledescription":"edge","data-id":n,"data-testid":`rf__edge-${n}`,"aria-label":N.ariaLabel===null?void 0:N.ariaLabel||`Edge from ${N.source} to ${N.target}`,"aria-describedby":V?`${ly}-${w}`:void 0,ref:K,...N.domAttributes,children:[!Q&&r.jsx(B,{id:n,source:N.source,target:N.target,type:N.type,selected:N.selected,animated:N.animated,selectable:H,deletable:N.deletable??!0,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,sourceX:O,sourceY:U,targetX:Y,targetY:te,sourcePosition:F,targetPosition:P,data:N.data,style:N.style,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerStart:se,markerEnd:le,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth}),X&&r.jsx(dz,{edge:N,isReconnectable:X,reconnectRadius:y,onReconnect:x,onReconnectStart:v,onReconnectEnd:j,sourceX:O,sourceY:U,targetX:Y,targetY:te,sourcePosition:F,targetPosition:P,setUpdateHover:Z,setReconnecting:C})]})})}var gz=M.memo(fz);const hz=n=>({edgesFocusable:n.edgesFocusable,edgesReconnectable:n.edgesReconnectable,elementsSelectable:n.elementsSelectable,connectionMode:n.connectionMode,onError:n.onError});function Dy({defaultMarkerColor:n,onlyRenderVisibleElements:s,rfId:l,edgeTypes:o,noPanClassName:c,onReconnect:d,onEdgeContextMenu:f,onEdgeMouseEnter:h,onEdgeMouseMove:p,onEdgeMouseLeave:m,onEdgeClick:y,reconnectRadius:x,onEdgeDoubleClick:v,onReconnectStart:j,onReconnectEnd:w,disableKeyboardA11y:T}){const{edgesFocusable:z,edgesReconnectable:A,elementsSelectable:k,onError:N}=De(hz,Qe),E=WE(s);return r.jsxs("div",{className:"react-flow__edges",children:[r.jsx(az,{defaultColor:n,rfId:l}),E.map(L=>r.jsx(gz,{id:L,edgesFocusable:z,edgesReconnectable:A,elementsSelectable:k,noPanClassName:c,onReconnect:d,onContextMenu:f,onMouseEnter:h,onMouseMove:p,onMouseLeave:m,onClick:y,reconnectRadius:x,onDoubleClick:v,onReconnectStart:j,onReconnectEnd:w,rfId:l,onError:N,edgeTypes:o,disableKeyboardA11y:T},L))]})}Dy.displayName="EdgeRenderer";const mz=M.memo(Dy),pz=n=>`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function xz({children:n}){const s=De(pz);return r.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:s},children:n})}function yz(n){const s=Zo(),l=M.useRef(!1);M.useEffect(()=>{!l.current&&s.viewportInitialized&&n&&(setTimeout(()=>n(s),1),l.current=!0)},[n,s.viewportInitialized])}const bz=n=>n.panZoom?.syncViewport;function vz(n){const s=De(bz),l=Fe();return M.useEffect(()=>{n&&(s?.(n),l.setState({transform:[n.x,n.y,n.zoom]}))},[n,s]),null}function Nz(n){return n.connection.inProgress?{...n.connection,to:Oi(n.connection.to,n.transform)}:{...n.connection}}function jz(n){return Nz}function wz(n){const s=jz();return De(s,Qe)}const Sz=n=>({nodesConnectable:n.nodesConnectable,isValid:n.connection.isValid,inProgress:n.connection.inProgress,width:n.width,height:n.height});function _z({containerStyle:n,style:s,type:l,component:o}){const{nodesConnectable:c,width:d,height:f,isValid:h,inProgress:p}=De(Sz,Qe);return!(d&&c&&p)?null:r.jsx("svg",{style:n,width:d,height:f,className:"react-flow__connectionline react-flow__container",children:r.jsx("g",{className:st(["react-flow__connection",Tx(h)]),children:r.jsx(Oy,{style:s,type:l,CustomComponent:o,isValid:h})})})}const Oy=({style:n,type:s=wa.Bezier,CustomComponent:l,isValid:o})=>{const{inProgress:c,from:d,fromNode:f,fromHandle:h,fromPosition:p,to:m,toNode:y,toHandle:x,toPosition:v,pointer:j}=wz();if(!c)return;if(l)return r.jsx(l,{connectionLineType:s,connectionLineStyle:n,fromNode:f,fromHandle:h,fromX:d.x,fromY:d.y,toX:m.x,toY:m.y,fromPosition:p,toPosition:v,connectionStatus:Tx(o),toNode:y,toHandle:x,pointer:j});let w="";const T={sourceX:d.x,sourceY:d.y,sourcePosition:p,targetX:m.x,targetY:m.y,targetPosition:v};switch(s){case wa.Bezier:[w]=Yx(T);break;case wa.SimpleBezier:[w]=Ny(T);break;case wa.Step:[w]=Gd({...T,borderRadius:0});break;case wa.SmoothStep:[w]=Gd(T);break;default:[w]=Zx(T)}return r.jsx("path",{d:w,fill:"none",className:"react-flow__connection-path",style:n})};Oy.displayName="ConnectionLine";const kz={};function Cp(n=kz){M.useRef(n),Fe(),M.useEffect(()=>{},[n])}function Cz(){Fe(),M.useRef(!1),M.useEffect(()=>{},[])}function Ly({nodeTypes:n,edgeTypes:s,onInit:l,onNodeClick:o,onEdgeClick:c,onNodeDoubleClick:d,onEdgeDoubleClick:f,onNodeMouseEnter:h,onNodeMouseMove:p,onNodeMouseLeave:m,onNodeContextMenu:y,onSelectionContextMenu:x,onSelectionStart:v,onSelectionEnd:j,connectionLineType:w,connectionLineStyle:T,connectionLineComponent:z,connectionLineContainerStyle:A,selectionKeyCode:k,selectionOnDrag:N,selectionMode:E,multiSelectionKeyCode:L,panActivationKeyCode:B,zoomActivationKeyCode:V,deleteKeyCode:X,onlyRenderVisibleElements:H,elementsSelectable:K,defaultViewport:q,translateExtent:Z,minZoom:Q,maxZoom:C,preventScrolling:D,defaultMarkerColor:_,zoomOnScroll:O,zoomOnPinch:U,panOnScroll:Y,panOnScrollSpeed:te,panOnScrollMode:F,zoomOnDoubleClick:P,panOnDrag:se,onPaneClick:le,onPaneMouseEnter:fe,onPaneMouseMove:be,onPaneMouseLeave:he,onPaneScroll:oe,onPaneContextMenu:ue,paneClickDistance:_e,nodeClickDistance:we,onEdgeContextMenu:xe,onEdgeMouseEnter:Ne,onEdgeMouseMove:ie,onEdgeMouseLeave:ye,reconnectRadius:Se,onReconnect:Ye,onReconnectStart:Ft,onReconnectEnd:zt,noDragClassName:Kt,noWheelClassName:bn,noPanClassName:Ca,disableKeyboardA11y:Ea,nodeExtent:ct,rfId:is,viewport:vn,onViewportChange:Zn}){return Cp(n),Cp(s),Cz(),yz(l),vz(vn),r.jsx(qE,{onPaneClick:le,onPaneMouseEnter:fe,onPaneMouseMove:be,onPaneMouseLeave:he,onPaneContextMenu:ue,onPaneScroll:oe,paneClickDistance:_e,deleteKeyCode:X,selectionKeyCode:k,selectionOnDrag:N,selectionMode:E,onSelectionStart:v,onSelectionEnd:j,multiSelectionKeyCode:L,panActivationKeyCode:B,zoomActivationKeyCode:V,elementsSelectable:K,zoomOnScroll:O,zoomOnPinch:U,zoomOnDoubleClick:P,panOnScroll:Y,panOnScrollSpeed:te,panOnScrollMode:F,panOnDrag:se,defaultViewport:q,translateExtent:Z,minZoom:Q,maxZoom:C,onSelectionContextMenu:x,preventScrolling:D,noDragClassName:Kt,noWheelClassName:bn,noPanClassName:Ca,disableKeyboardA11y:Ea,onViewportChange:Zn,isControlledViewport:!!vn,children:r.jsxs(xz,{children:[r.jsx(mz,{edgeTypes:s,onEdgeClick:c,onEdgeDoubleClick:f,onReconnect:Ye,onReconnectStart:Ft,onReconnectEnd:zt,onlyRenderVisibleElements:H,onEdgeContextMenu:xe,onEdgeMouseEnter:Ne,onEdgeMouseMove:ie,onEdgeMouseLeave:ye,reconnectRadius:Se,defaultMarkerColor:_,noPanClassName:Ca,disableKeyboardA11y:Ea,rfId:is}),r.jsx(_z,{style:T,type:w,component:z,containerStyle:A}),r.jsx("div",{className:"react-flow__edgelabel-renderer"}),r.jsx(JE,{nodeTypes:n,onNodeClick:o,onNodeDoubleClick:d,onNodeMouseEnter:h,onNodeMouseMove:p,onNodeMouseLeave:m,onNodeContextMenu:y,nodeClickDistance:we,onlyRenderVisibleElements:H,noPanClassName:Ca,noDragClassName:Kt,disableKeyboardA11y:Ea,nodeExtent:ct,rfId:is}),r.jsx("div",{className:"react-flow__viewport-portal"})]})})}Ly.displayName="GraphView";const Ez=M.memo(Ly),Ep=({nodes:n,edges:s,defaultNodes:l,defaultEdges:o,width:c,height:d,fitView:f,fitViewOptions:h,minZoom:p=.5,maxZoom:m=2,nodeOrigin:y,nodeExtent:x,zIndexMode:v="basic"}={})=>{const j=new Map,w=new Map,T=new Map,z=new Map,A=o??s??[],k=l??n??[],N=y??[0,0],E=x??ji;Kx(T,z,A);const L=Zd(k,j,w,{nodeOrigin:N,nodeExtent:E,zIndexMode:v});let B=[0,0,1];if(f&&c&&d){const V=Mi(j,{filter:q=>!!((q.width||q.initialWidth)&&(q.height||q.initialHeight))}),{x:X,y:H,zoom:K}=cf(V,c,d,p,m,h?.padding??.1);B=[X,H,K]}return{rfId:"1",width:c??0,height:d??0,transform:B,nodes:k,nodesInitialized:L,nodeLookup:j,parentLookup:w,edges:A,edgeLookup:z,connectionLookup:T,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:l!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:p,maxZoom:m,translateExtent:ji,nodeExtent:E,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:ir.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:N,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:f??!1,fitViewOptions:h,fitViewResolver:null,connection:{...Ax},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:I5,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:zx,zIndexMode:v,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},zz=({nodes:n,edges:s,defaultNodes:l,defaultEdges:o,width:c,height:d,fitView:f,fitViewOptions:h,minZoom:p,maxZoom:m,nodeOrigin:y,nodeExtent:x,zIndexMode:v})=>Q3((j,w)=>{async function T(){const{nodeLookup:z,panZoom:A,fitViewOptions:k,fitViewResolver:N,width:E,height:L,minZoom:B,maxZoom:V}=w();A&&(await F5({nodes:z,width:E,height:L,panZoom:A,minZoom:B,maxZoom:V},k),N?.resolve(!0),j({fitViewResolver:null}))}return{...Ep({nodes:n,edges:s,width:c,height:d,fitView:f,fitViewOptions:h,minZoom:p,maxZoom:m,nodeOrigin:y,nodeExtent:x,defaultNodes:l,defaultEdges:o,zIndexMode:v}),setNodes:z=>{const{nodeLookup:A,parentLookup:k,nodeOrigin:N,elevateNodesOnSelect:E,fitViewQueued:L,zIndexMode:B}=w(),V=Zd(z,A,k,{nodeOrigin:N,nodeExtent:x,elevateNodesOnSelect:E,checkEquality:!0,zIndexMode:B});L&&V?(T(),j({nodes:z,nodesInitialized:V,fitViewQueued:!1,fitViewOptions:void 0})):j({nodes:z,nodesInitialized:V})},setEdges:z=>{const{connectionLookup:A,edgeLookup:k}=w();Kx(A,k,z),j({edges:z})},setDefaultNodesAndEdges:(z,A)=>{if(z){const{setNodes:k}=w();k(z),j({hasDefaultNodes:!0})}if(A){const{setEdges:k}=w();k(A),j({hasDefaultEdges:!0})}},updateNodeInternals:z=>{const{triggerNodeChanges:A,nodeLookup:k,parentLookup:N,domNode:E,nodeOrigin:L,nodeExtent:B,debug:V,fitViewQueued:X,zIndexMode:H}=w(),{changes:K,updatedInternals:q}=x3(z,k,N,E,L,B,H);q&&(g3(k,N,{nodeOrigin:L,nodeExtent:B,zIndexMode:H}),X?(T(),j({fitViewQueued:!1,fitViewOptions:void 0})):j({}),K?.length>0&&(V&&console.log("React Flow: trigger node changes",K),A?.(K)))},updateNodePositions:(z,A=!1)=>{const k=[];let N=[];const{nodeLookup:E,triggerNodeChanges:L,connection:B,updateConnection:V,onNodesChangeMiddlewareMap:X}=w();for(const[H,K]of z){const q=E.get(H),Z=!!(q?.expandParent&&q?.parentId&&K?.position),Q={id:H,type:"position",position:Z?{x:Math.max(0,K.position.x),y:Math.max(0,K.position.y)}:K.position,dragging:A};if(q&&B.inProgress&&B.fromNode.id===q.id){const C=as(q,B.fromHandle,me.Left,!0);V({...B,from:C})}Z&&q.parentId&&k.push({id:H,parentId:q.parentId,rect:{...K.internals.positionAbsolute,width:K.measured.width??0,height:K.measured.height??0}}),N.push(Q)}if(k.length>0){const{parentLookup:H,nodeOrigin:K}=w(),q=mf(k,E,H,K);N.push(...q)}for(const H of X.values())N=H(N);L(N)},triggerNodeChanges:z=>{const{onNodesChange:A,setNodes:k,nodes:N,hasDefaultNodes:E,debug:L}=w();if(z?.length){if(E){const B=uy(z,N);k(B)}L&&console.log("React Flow: trigger node changes",z),A?.(z)}},triggerEdgeChanges:z=>{const{onEdgesChange:A,setEdges:k,edges:N,hasDefaultEdges:E,debug:L}=w();if(z?.length){if(E){const B=dy(z,N);k(B)}L&&console.log("React Flow: trigger edge changes",z),A?.(z)}},addSelectedNodes:z=>{const{multiSelectionActive:A,edgeLookup:k,nodeLookup:N,triggerNodeChanges:E,triggerEdgeChanges:L}=w();if(A){const B=z.map(V=>Wa(V,!0));E(B);return}E(Ps(N,new Set([...z]),!0)),L(Ps(k))},addSelectedEdges:z=>{const{multiSelectionActive:A,edgeLookup:k,nodeLookup:N,triggerNodeChanges:E,triggerEdgeChanges:L}=w();if(A){const B=z.map(V=>Wa(V,!0));L(B);return}L(Ps(k,new Set([...z]))),E(Ps(N,new Set,!0))},unselectNodesAndEdges:({nodes:z,edges:A}={})=>{const{edges:k,nodes:N,nodeLookup:E,triggerNodeChanges:L,triggerEdgeChanges:B}=w(),V=z||N,X=A||k,H=V.map(q=>{const Z=E.get(q.id);return Z&&(Z.selected=!1),Wa(q.id,!1)}),K=X.map(q=>Wa(q.id,!1));L(H),B(K)},setMinZoom:z=>{const{panZoom:A,maxZoom:k}=w();A?.setScaleExtent([z,k]),j({minZoom:z})},setMaxZoom:z=>{const{panZoom:A,minZoom:k}=w();A?.setScaleExtent([k,z]),j({maxZoom:z})},setTranslateExtent:z=>{w().panZoom?.setTranslateExtent(z),j({translateExtent:z})},resetSelectedElements:()=>{const{edges:z,nodes:A,triggerNodeChanges:k,triggerEdgeChanges:N,elementsSelectable:E}=w();if(!E)return;const L=A.reduce((V,X)=>X.selected?[...V,Wa(X.id,!1)]:V,[]),B=z.reduce((V,X)=>X.selected?[...V,Wa(X.id,!1)]:V,[]);k(L),N(B)},setNodeExtent:z=>{const{nodes:A,nodeLookup:k,parentLookup:N,nodeOrigin:E,elevateNodesOnSelect:L,nodeExtent:B,zIndexMode:V}=w();z[0][0]===B[0][0]&&z[0][1]===B[0][1]&&z[1][0]===B[1][0]&&z[1][1]===B[1][1]||(Zd(A,k,N,{nodeOrigin:E,nodeExtent:z,elevateNodesOnSelect:L,checkEquality:!1,zIndexMode:V}),j({nodeExtent:z}))},panBy:z=>{const{transform:A,width:k,height:N,panZoom:E,translateExtent:L}=w();return y3({delta:z,panZoom:E,transform:A,translateExtent:L,width:k,height:N})},setCenter:async(z,A,k)=>{const{width:N,height:E,maxZoom:L,panZoom:B}=w();if(!B)return Promise.resolve(!1);const V=typeof k?.zoom<"u"?k.zoom:L;return await B.setViewport({x:N/2-z*V,y:E/2-A*V,zoom:V},{duration:k?.duration,ease:k?.ease,interpolate:k?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{j({connection:{...Ax}})},updateConnection:z=>{j({connection:z})},reset:()=>j({...Ep()})}},Object.is);function Az({initialNodes:n,initialEdges:s,defaultNodes:l,defaultEdges:o,initialWidth:c,initialHeight:d,initialMinZoom:f,initialMaxZoom:h,initialFitViewOptions:p,fitView:m,nodeOrigin:y,nodeExtent:x,zIndexMode:v,children:j}){const[w]=M.useState(()=>zz({nodes:n,edges:s,defaultNodes:l,defaultEdges:o,width:c,height:d,fitView:m,minZoom:f,maxZoom:h,fitViewOptions:p,nodeOrigin:y,nodeExtent:x,zIndexMode:v}));return r.jsx(F3,{value:w,children:r.jsx(xE,{children:j})})}function Tz({children:n,nodes:s,edges:l,defaultNodes:o,defaultEdges:c,width:d,height:f,fitView:h,fitViewOptions:p,minZoom:m,maxZoom:y,nodeOrigin:x,nodeExtent:v,zIndexMode:j}){return M.useContext(Go)?r.jsx(r.Fragment,{children:n}):r.jsx(Az,{initialNodes:s,initialEdges:l,defaultNodes:o,defaultEdges:c,initialWidth:d,initialHeight:f,fitView:h,initialFitViewOptions:p,initialMinZoom:m,initialMaxZoom:y,nodeOrigin:x,nodeExtent:v,zIndexMode:j,children:n})}const Mz={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Dz({nodes:n,edges:s,defaultNodes:l,defaultEdges:o,className:c,nodeTypes:d,edgeTypes:f,onNodeClick:h,onEdgeClick:p,onInit:m,onMove:y,onMoveStart:x,onMoveEnd:v,onConnect:j,onConnectStart:w,onConnectEnd:T,onClickConnectStart:z,onClickConnectEnd:A,onNodeMouseEnter:k,onNodeMouseMove:N,onNodeMouseLeave:E,onNodeContextMenu:L,onNodeDoubleClick:B,onNodeDragStart:V,onNodeDrag:X,onNodeDragStop:H,onNodesDelete:K,onEdgesDelete:q,onDelete:Z,onSelectionChange:Q,onSelectionDragStart:C,onSelectionDrag:D,onSelectionDragStop:_,onSelectionContextMenu:O,onSelectionStart:U,onSelectionEnd:Y,onBeforeDelete:te,connectionMode:F,connectionLineType:P=wa.Bezier,connectionLineStyle:se,connectionLineComponent:le,connectionLineContainerStyle:fe,deleteKeyCode:be="Backspace",selectionKeyCode:he="Shift",selectionOnDrag:oe=!1,selectionMode:ue=wi.Full,panActivationKeyCode:_e="Space",multiSelectionKeyCode:we=_i()?"Meta":"Control",zoomActivationKeyCode:xe=_i()?"Meta":"Control",snapToGrid:Ne,snapGrid:ie,onlyRenderVisibleElements:ye=!1,selectNodesOnDrag:Se,nodesDraggable:Ye,autoPanOnNodeFocus:Ft,nodesConnectable:zt,nodesFocusable:Kt,nodeOrigin:bn=oy,edgesFocusable:Ca,edgesReconnectable:Ea,elementsSelectable:ct=!0,defaultViewport:is=lE,minZoom:vn=.5,maxZoom:Zn=2,translateExtent:za=ji,preventScrolling:Io=!0,nodeExtent:ls,defaultMarkerColor:Jo="#b1b1b7",zoomOnScroll:Wo=!0,zoomOnPinch:Aa=!0,panOnScroll:mt=!1,panOnScrollSpeed:ln=.5,panOnScrollMode:pt=Pa.Free,zoomOnDoubleClick:Po=!0,panOnDrag:ec=!0,onPaneClick:tc,onPaneMouseEnter:os,onPaneMouseMove:cs,onPaneMouseLeave:us,onPaneScroll:Nn,onPaneContextMenu:ds,paneClickDistance:Ta=1,nodeClickDistance:nc=0,children:Li,onReconnect:fr,onReconnectStart:Ma,onReconnectEnd:ac,onEdgeContextMenu:Ri,onEdgeDoubleClick:Hi,onEdgeMouseEnter:Ui,onEdgeMouseMove:gr,onEdgeMouseLeave:hr,reconnectRadius:Bi=10,onNodesChange:$i,onEdgesChange:on,noDragClassName:rt="nodrag",noWheelClassName:ht="nowheel",noPanClassName:jn="nopan",fitView:fs,fitViewOptions:Vi,connectOnClick:sc,attributionPosition:qi,proOptions:Da,defaultEdgeOptions:mr,elevateNodesOnSelect:Qn=!0,elevateEdgesOnSelect:Fn=!1,disableKeyboardA11y:Kn=!1,autoPanOnConnect:In,autoPanOnNodeDrag:Pe,autoPanSpeed:Yi,connectionRadius:Gi,isValidConnection:wn,onError:Jn,style:rc,id:pr,nodeDragThreshold:Xi,connectionDragThreshold:ic,viewport:gs,onViewportChange:hs,width:It,height:Nt,colorMode:Zi="light",debug:lc,onScroll:ms,ariaLabelConfig:Qi,zIndexMode:Oa="basic",...oc},jt){const La=pr||"1",Fi=dE(Zi),xr=M.useCallback(Sn=>{Sn.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),ms?.(Sn)},[ms]);return r.jsx("div",{"data-testid":"rf__wrapper",...oc,onScroll:xr,style:{...rc,...Mz},ref:jt,className:st(["react-flow",c,Fi]),id:pr,role:"application",children:r.jsxs(Tz,{nodes:n,edges:s,width:It,height:Nt,fitView:fs,fitViewOptions:Vi,minZoom:vn,maxZoom:Zn,nodeOrigin:bn,nodeExtent:ls,zIndexMode:Oa,children:[r.jsx(Ez,{onInit:m,onNodeClick:h,onEdgeClick:p,onNodeMouseEnter:k,onNodeMouseMove:N,onNodeMouseLeave:E,onNodeContextMenu:L,onNodeDoubleClick:B,nodeTypes:d,edgeTypes:f,connectionLineType:P,connectionLineStyle:se,connectionLineComponent:le,connectionLineContainerStyle:fe,selectionKeyCode:he,selectionOnDrag:oe,selectionMode:ue,deleteKeyCode:be,multiSelectionKeyCode:we,panActivationKeyCode:_e,zoomActivationKeyCode:xe,onlyRenderVisibleElements:ye,defaultViewport:is,translateExtent:za,minZoom:vn,maxZoom:Zn,preventScrolling:Io,zoomOnScroll:Wo,zoomOnPinch:Aa,zoomOnDoubleClick:Po,panOnScroll:mt,panOnScrollSpeed:ln,panOnScrollMode:pt,panOnDrag:ec,onPaneClick:tc,onPaneMouseEnter:os,onPaneMouseMove:cs,onPaneMouseLeave:us,onPaneScroll:Nn,onPaneContextMenu:ds,paneClickDistance:Ta,nodeClickDistance:nc,onSelectionContextMenu:O,onSelectionStart:U,onSelectionEnd:Y,onReconnect:fr,onReconnectStart:Ma,onReconnectEnd:ac,onEdgeContextMenu:Ri,onEdgeDoubleClick:Hi,onEdgeMouseEnter:Ui,onEdgeMouseMove:gr,onEdgeMouseLeave:hr,reconnectRadius:Bi,defaultMarkerColor:Jo,noDragClassName:rt,noWheelClassName:ht,noPanClassName:jn,rfId:La,disableKeyboardA11y:Kn,nodeExtent:ls,viewport:gs,onViewportChange:hs}),r.jsx(uE,{nodes:n,edges:s,defaultNodes:l,defaultEdges:o,onConnect:j,onConnectStart:w,onConnectEnd:T,onClickConnectStart:z,onClickConnectEnd:A,nodesDraggable:Ye,autoPanOnNodeFocus:Ft,nodesConnectable:zt,nodesFocusable:Kt,edgesFocusable:Ca,edgesReconnectable:Ea,elementsSelectable:ct,elevateNodesOnSelect:Qn,elevateEdgesOnSelect:Fn,minZoom:vn,maxZoom:Zn,nodeExtent:ls,onNodesChange:$i,onEdgesChange:on,snapToGrid:Ne,snapGrid:ie,connectionMode:F,translateExtent:za,connectOnClick:sc,defaultEdgeOptions:mr,fitView:fs,fitViewOptions:Vi,onNodesDelete:K,onEdgesDelete:q,onDelete:Z,onNodeDragStart:V,onNodeDrag:X,onNodeDragStop:H,onSelectionDrag:D,onSelectionDragStart:C,onSelectionDragStop:_,onMove:y,onMoveStart:x,onMoveEnd:v,noPanClassName:jn,nodeOrigin:bn,rfId:La,autoPanOnConnect:In,autoPanOnNodeDrag:Pe,autoPanSpeed:Yi,onError:Jn,connectionRadius:Gi,isValidConnection:wn,selectNodesOnDrag:Se,nodeDragThreshold:Xi,connectionDragThreshold:ic,onBeforeDelete:te,debug:lc,ariaLabelConfig:Qi,zIndexMode:Oa}),r.jsx(iE,{onSelectionChange:Q}),Li,r.jsx(tE,{proOptions:Da,position:qi}),r.jsx(eE,{rfId:La,disableKeyboardA11y:Kn})]})})}var Oz=fy(Dz);function Lz(n){const[s,l]=M.useState(n),o=M.useCallback(c=>l(d=>uy(c,d)),[]);return[s,l,o]}function Rz(n){const[s,l]=M.useState(n),o=M.useCallback(c=>l(d=>dy(c,d)),[]);return[s,l,o]}function Hz({dimensions:n,lineWidth:s,variant:l,className:o}){return r.jsx("path",{strokeWidth:s,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`,className:st(["react-flow__background-pattern",l,o])})}function Uz({radius:n,className:s}){return r.jsx("circle",{cx:n,cy:n,r:n,className:st(["react-flow__background-pattern","dots",s])})}var Sa;(function(n){n.Lines="lines",n.Dots="dots",n.Cross="cross"})(Sa||(Sa={}));const Bz={[Sa.Dots]:1,[Sa.Lines]:1,[Sa.Cross]:6},$z=n=>({transform:n.transform,patternId:`pattern-${n.rfId}`});function Ry({id:n,variant:s=Sa.Dots,gap:l=20,size:o,lineWidth:c=1,offset:d=0,color:f,bgColor:h,style:p,className:m,patternClassName:y}){const x=M.useRef(null),{transform:v,patternId:j}=De($z,Qe),w=o||Bz[s],T=s===Sa.Dots,z=s===Sa.Cross,A=Array.isArray(l)?l:[l,l],k=[A[0]*v[2]||1,A[1]*v[2]||1],N=w*v[2],E=Array.isArray(d)?d:[d,d],L=z?[N,N]:k,B=[E[0]*v[2]||1+L[0]/2,E[1]*v[2]||1+L[1]/2],V=`${j}${n||""}`;return r.jsxs("svg",{className:st(["react-flow__background",m]),style:{...p,...Qo,"--xy-background-color-props":h,"--xy-background-pattern-color-props":f},ref:x,"data-testid":"rf__background",children:[r.jsx("pattern",{id:V,x:v[0]%k[0],y:v[1]%k[1],width:k[0],height:k[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${B[0]},-${B[1]})`,children:T?r.jsx(Uz,{radius:N/2,className:y}):r.jsx(Hz,{dimensions:L,lineWidth:c,variant:s,className:y})}),r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${V})`})]})}Ry.displayName="Background";const Vz=M.memo(Ry);function qz(){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:r.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Yz(){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:r.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Gz(){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:r.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Xz(){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:r.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Zz(){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:r.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function fo({children:n,className:s,...l}){return r.jsx("button",{type:"button",className:st(["react-flow__controls-button",s]),...l,children:n})}const Qz=n=>({isInteractive:n.nodesDraggable||n.nodesConnectable||n.elementsSelectable,minZoomReached:n.transform[2]<=n.minZoom,maxZoomReached:n.transform[2]>=n.maxZoom,ariaLabelConfig:n.ariaLabelConfig});function Hy({style:n,showZoom:s=!0,showFitView:l=!0,showInteractive:o=!0,fitViewOptions:c,onZoomIn:d,onZoomOut:f,onFitView:h,onInteractiveChange:p,className:m,children:y,position:x="bottom-left",orientation:v="vertical","aria-label":j}){const w=Fe(),{isInteractive:T,minZoomReached:z,maxZoomReached:A,ariaLabelConfig:k}=De(Qz,Qe),{zoomIn:N,zoomOut:E,fitView:L}=Zo(),B=()=>{N(),d?.()},V=()=>{E(),f?.()},X=()=>{L(c),h?.()},H=()=>{w.setState({nodesDraggable:!T,nodesConnectable:!T,elementsSelectable:!T}),p?.(!T)},K=v==="horizontal"?"horizontal":"vertical";return r.jsxs(Xo,{className:st(["react-flow__controls",K,m]),position:x,style:n,"data-testid":"rf__controls","aria-label":j??k["controls.ariaLabel"],children:[s&&r.jsxs(r.Fragment,{children:[r.jsx(fo,{onClick:B,className:"react-flow__controls-zoomin",title:k["controls.zoomIn.ariaLabel"],"aria-label":k["controls.zoomIn.ariaLabel"],disabled:A,children:r.jsx(qz,{})}),r.jsx(fo,{onClick:V,className:"react-flow__controls-zoomout",title:k["controls.zoomOut.ariaLabel"],"aria-label":k["controls.zoomOut.ariaLabel"],disabled:z,children:r.jsx(Yz,{})})]}),l&&r.jsx(fo,{className:"react-flow__controls-fitview",onClick:X,title:k["controls.fitView.ariaLabel"],"aria-label":k["controls.fitView.ariaLabel"],children:r.jsx(Gz,{})}),o&&r.jsx(fo,{className:"react-flow__controls-interactive",onClick:H,title:k["controls.interactive.ariaLabel"],"aria-label":k["controls.interactive.ariaLabel"],children:T?r.jsx(Zz,{}):r.jsx(Xz,{})}),y]})}Hy.displayName="Controls";const Fz=M.memo(Hy);function Kz({id:n,x:s,y:l,width:o,height:c,style:d,color:f,strokeColor:h,strokeWidth:p,className:m,borderRadius:y,shapeRendering:x,selected:v,onClick:j}){const{background:w,backgroundColor:T}=d||{},z=f||w||T;return r.jsx("rect",{className:st(["react-flow__minimap-node",{selected:v},m]),x:s,y:l,rx:y,ry:y,width:o,height:c,style:{fill:z,stroke:h,strokeWidth:p},shapeRendering:x,onClick:j?A=>j(A,n):void 0})}const Iz=M.memo(Kz),Jz=n=>n.nodes.map(s=>s.id),Ad=n=>n instanceof Function?n:()=>n;function Wz({nodeStrokeColor:n,nodeColor:s,nodeClassName:l="",nodeBorderRadius:o=5,nodeStrokeWidth:c,nodeComponent:d=Iz,onClick:f}){const h=De(Jz,Qe),p=Ad(s),m=Ad(n),y=Ad(l),x=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return r.jsx(r.Fragment,{children:h.map(v=>r.jsx(eA,{id:v,nodeColorFunc:p,nodeStrokeColorFunc:m,nodeClassNameFunc:y,nodeBorderRadius:o,nodeStrokeWidth:c,NodeComponent:d,onClick:f,shapeRendering:x},v))})}function Pz({id:n,nodeColorFunc:s,nodeStrokeColorFunc:l,nodeClassNameFunc:o,nodeBorderRadius:c,nodeStrokeWidth:d,shapeRendering:f,NodeComponent:h,onClick:p}){const{node:m,x:y,y:x,width:v,height:j}=De(w=>{const{internals:T}=w.nodeLookup.get(n),z=T.userNode,{x:A,y:k}=T.positionAbsolute,{width:N,height:E}=Xn(z);return{node:z,x:A,y:k,width:N,height:E}},Qe);return!m||m.hidden||!Hx(m)?null:r.jsx(h,{x:y,y:x,width:v,height:j,style:m.style,selected:!!m.selected,className:o(m),color:s(m),borderRadius:c,strokeColor:l(m),strokeWidth:d,shapeRendering:f,onClick:p,id:m.id})}const eA=M.memo(Pz);var tA=M.memo(Wz);const nA=200,aA=150,sA=n=>!n.hidden,rA=n=>{const s={x:-n.transform[0]/n.transform[2],y:-n.transform[1]/n.transform[2],width:n.width/n.transform[2],height:n.height/n.transform[2]};return{viewBB:s,boundingRect:n.nodeLookup.size>0?Rx(Mi(n.nodeLookup,{filter:sA}),s):s,rfId:n.rfId,panZoom:n.panZoom,translateExtent:n.translateExtent,flowWidth:n.width,flowHeight:n.height,ariaLabelConfig:n.ariaLabelConfig}},iA="react-flow__minimap-desc";function Uy({style:n,className:s,nodeStrokeColor:l,nodeColor:o,nodeClassName:c="",nodeBorderRadius:d=5,nodeStrokeWidth:f,nodeComponent:h,bgColor:p,maskColor:m,maskStrokeColor:y,maskStrokeWidth:x,position:v="bottom-right",onClick:j,onNodeClick:w,pannable:T=!1,zoomable:z=!1,ariaLabel:A,inversePan:k,zoomStep:N=1,offsetScale:E=5}){const L=Fe(),B=M.useRef(null),{boundingRect:V,viewBB:X,rfId:H,panZoom:K,translateExtent:q,flowWidth:Z,flowHeight:Q,ariaLabelConfig:C}=De(rA,Qe),D=n?.width??nA,_=n?.height??aA,O=V.width/D,U=V.height/_,Y=Math.max(O,U),te=Y*D,F=Y*_,P=E*Y,se=V.x-(te-V.width)/2-P,le=V.y-(F-V.height)/2-P,fe=te+P*2,be=F+P*2,he=`${iA}-${H}`,oe=M.useRef(0),ue=M.useRef();oe.current=Y,M.useEffect(()=>{if(B.current&&K)return ue.current=C3({domNode:B.current,panZoom:K,getTransform:()=>L.getState().transform,getViewScale:()=>oe.current}),()=>{ue.current?.destroy()}},[K]),M.useEffect(()=>{ue.current?.update({translateExtent:q,width:Z,height:Q,inversePan:k,pannable:T,zoomStep:N,zoomable:z})},[T,z,k,N,q,Z,Q]);const _e=j?Ne=>{const[ie,ye]=ue.current?.pointer(Ne)||[0,0];j(Ne,{x:ie,y:ye})}:void 0,we=w?M.useCallback((Ne,ie)=>{const ye=L.getState().nodeLookup.get(ie).internals.userNode;w(Ne,ye)},[]):void 0,xe=A??C["minimap.ariaLabel"];return r.jsx(Xo,{position:v,style:{...n,"--xy-minimap-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-background-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-stroke-color-props":typeof y=="string"?y:void 0,"--xy-minimap-mask-stroke-width-props":typeof x=="number"?x*Y:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof l=="string"?l:void 0,"--xy-minimap-node-stroke-width-props":typeof f=="number"?f:void 0},className:st(["react-flow__minimap",s]),"data-testid":"rf__minimap",children:r.jsxs("svg",{width:D,height:_,viewBox:`${se} ${le} ${fe} ${be}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":he,ref:B,onClick:_e,children:[xe&&r.jsx("title",{id:he,children:xe}),r.jsx(tA,{onClick:we,nodeColor:o,nodeStrokeColor:l,nodeBorderRadius:d,nodeClassName:c,nodeStrokeWidth:f,nodeComponent:h}),r.jsx("path",{className:"react-flow__minimap-mask",d:`M${se-P},${le-P}h${fe+P*2}v${be+P*2}h${-fe-P*2}z
        M${X.x},${X.y}h${X.width}v${X.height}h${-X.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Uy.displayName="MiniMap";const lA=M.memo(Uy),oA=n=>s=>n?`${Math.max(1/s.transform[2],1)}`:void 0,cA={[ur.Line]:"right",[ur.Handle]:"bottom-right"};function uA({nodeId:n,position:s,variant:l=ur.Handle,className:o,style:c=void 0,children:d,color:f,minWidth:h=10,minHeight:p=10,maxWidth:m=Number.MAX_VALUE,maxHeight:y=Number.MAX_VALUE,keepAspectRatio:x=!1,resizeDirection:v,autoScale:j=!0,shouldResize:w,onResizeStart:T,onResize:z,onResizeEnd:A}){const k=py(),N=typeof n=="string"?n:k,E=Fe(),L=M.useRef(null),B=l===ur.Handle,V=De(M.useCallback(oA(B&&j),[B,j]),Qe),X=M.useRef(null),H=s??cA[l];M.useEffect(()=>{if(!(!L.current||!N))return X.current||(X.current=V3({domNode:L.current,nodeId:N,getStoreItems:()=>{const{nodeLookup:q,transform:Z,snapGrid:Q,snapToGrid:C,nodeOrigin:D,domNode:_}=E.getState();return{nodeLookup:q,transform:Z,snapGrid:Q,snapToGrid:C,nodeOrigin:D,paneDomNode:_}},onChange:(q,Z)=>{const{triggerNodeChanges:Q,nodeLookup:C,parentLookup:D,nodeOrigin:_}=E.getState(),O=[],U={x:q.x,y:q.y},Y=C.get(N);if(Y&&Y.expandParent&&Y.parentId){const te=Y.origin??_,F=q.width??Y.measured.width??0,P=q.height??Y.measured.height??0,se={id:Y.id,parentId:Y.parentId,rect:{width:F,height:P,...Ux({x:q.x??Y.position.x,y:q.y??Y.position.y},{width:F,height:P},Y.parentId,C,te)}},le=mf([se],C,D,_);O.push(...le),U.x=q.x?Math.max(te[0]*F,q.x):void 0,U.y=q.y?Math.max(te[1]*P,q.y):void 0}if(U.x!==void 0&&U.y!==void 0){const te={id:N,type:"position",position:{...U}};O.push(te)}if(q.width!==void 0&&q.height!==void 0){const F={id:N,type:"dimensions",resizing:!0,setAttributes:v?v==="horizontal"?"width":"height":!0,dimensions:{width:q.width,height:q.height}};O.push(F)}for(const te of Z){const F={...te,type:"position"};O.push(F)}Q(O)},onEnd:({width:q,height:Z})=>{const Q={id:N,type:"dimensions",resizing:!1,dimensions:{width:q,height:Z}};E.getState().triggerNodeChanges([Q])}})),X.current.update({controlPosition:H,boundaries:{minWidth:h,minHeight:p,maxWidth:m,maxHeight:y},keepAspectRatio:x,resizeDirection:v,onResizeStart:T,onResize:z,onResizeEnd:A,shouldResize:w}),()=>{X.current?.destroy()}},[H,h,p,m,y,x,T,z,A,w]);const K=H.split("-");return r.jsx("div",{className:st(["react-flow__resize-control","nodrag",...K,l,o]),ref:L,style:{...c,scale:V,...f&&{[B?"backgroundColor":"borderColor"]:f}},children:d})}M.memo(uA);function dA({data:n}){const l={NEW_CONVERSATION:"New conversation",KEYWORDS:"Text contains specific keywords",HAS_TAGS:"Contact has specific tags",PIPELINE_UPDATE:"Contact has been affected to a pipeline",SHORT_RESPONSE:"Advanced Short response"}[n.triggerType]||"Select option";return r.jsxs("div",{className:"min-w-[280px] bg-white dark:bg-[#0F0F0F] rounded-lg shadow-md border border-gray-200 dark:border-[#262626] font-sans transition-colors duration-200",children:[r.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-[#262626]",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"bg-indigo-600 rounded p-1",children:r.jsx(tr,{size:14,className:"text-white",fill:"white"})}),r.jsx("span",{className:"text-gray-700 dark:text-neutral-200 font-semibold text-sm",children:"Trigger"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-neutral-400 leading-snug",children:"Define the input parameters to trigger the workflow, to ensure that accurate information is captured in the conversation flow."})]}),r.jsxs("div",{className:"p-4",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-700 dark:text-neutral-300 mb-2",children:"Starting Step"}),r.jsx("div",{className:"relative",children:r.jsxs("div",{className:"w-full bg-gray-50 dark:bg-[#1A1A1A] text-gray-700 dark:text-neutral-200 text-sm px-3 py-2.5 rounded border border-gray-200 dark:border-[#404040] flex items-center justify-between",children:[r.jsx("span",{className:"truncate",children:l}),r.jsx(Ei,{size:16,className:"text-gray-400"})]})}),n.triggerType==="KEYWORDS"&&n.keyword&&r.jsxs("div",{className:"mt-2 text-xs text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-1 rounded border border-indigo-100 dark:border-indigo-800",children:['Contains: "',n.keyword,'"']})]}),r.jsx(pn,{type:"source",position:me.Right,className:"!bg-emerald-400 !w-4 !h-4 !border-4 !border-white dark:!border-[#0F0F0F] !-right-2"})]})}const fA={text:dr,media:pi,buttons:Vp,list:Kd,template:Ci,addGroup:hn,removeGroup:Wd,addTag:Do,removeTag:$p,addPipeline:Bp,removePipeline:sn,delay:xi},zp=(n,s,l=!1)=>{const o=n.selectionStart,c=n.selectionEnd,d=n.value,f=d.substring(0,o),h=d.substring(c),p=d.substring(o,c);let m,y;l?(m=f+s+p+s+h,y=o+s.length+p.length+s.length):(m=f+s+h,y=o+s.length),Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value").set.call(n,m),n.dispatchEvent(new Event("input",{bubbles:!0})),n.focus(),n.setSelectionRange(y,y)},gA=({label:n,icon:s,actions:l})=>{const[o,c]=M.useState(!1),[d,f]=M.useState(!1),[h,p]=M.useState(n),m=M.useRef(null),y=M.useRef(null);M.useEffect(()=>{const j=w=>{m.current&&!m.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),M.useEffect(()=>{d&&y.current&&(y.current.focus(),y.current.select())},[d]);const x=()=>{h.trim()?l.onRename(h):p(n),f(!1)},v=j=>{j.key==="Enter"&&x(),j.key==="Escape"&&(p(n),f(!1))};return r.jsxs("div",{className:"flex items-center justify-between mb-3 h-8",children:[r.jsxs("div",{className:"flex items-center gap-2 font-semibold text-gray-800 dark:text-gray-100 flex-1 min-w-0",children:[s&&r.jsx(s,{size:18,className:"text-gray-500 dark:text-gray-400 flex-shrink-0"}),d?r.jsx("input",{ref:y,type:"text",className:"nodrag w-full bg-white dark:bg-[#1A1A1A] border border-indigo-500 rounded px-1 py-0.5 text-sm outline-none text-gray-800 dark:text-gray-100",value:h,onChange:j=>p(j.target.value),onBlur:x,onKeyDown:v,onClick:j=>j.stopPropagation()}):r.jsx("span",{className:"truncate cursor-text",onDoubleClick:()=>f(!0),title:"Double click to rename",children:n})]}),r.jsxs("div",{className:"relative flex-shrink-0 ml-2",ref:m,children:[r.jsx("button",{onClick:j=>{j.stopPropagation(),c(!o)},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:r.jsx(Hp,{size:16,className:"text-gray-400 dark:text-gray-500"})}),o&&r.jsxs("div",{className:"absolute right-0 top-full mt-1 w-40 bg-white dark:bg-[#1A1A1A] rounded-lg shadow-xl border border-gray-100 dark:border-[#333] z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-100",children:[r.jsxs("button",{onClick:j=>{j.stopPropagation(),p(n),f(!0),c(!1)},className:"w-full text-left px-3 py-2 text-xs text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#252525] flex items-center gap-2 transition-colors",children:[r.jsx(zi,{size:14})," Rename"]}),r.jsxs("button",{onClick:j=>{j.stopPropagation(),l.onDuplicate(),c(!1)},className:"w-full text-left px-3 py-2 text-xs text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#252525] flex items-center gap-2 transition-colors",children:[r.jsx(Jd,{size:14})," Duplicate"]}),r.jsx("div",{className:"h-px bg-gray-100 dark:bg-[#333] my-1"}),r.jsxs("button",{onClick:j=>{j.stopPropagation(),l.onDelete(),c(!1)},className:"w-full text-left px-3 py-2 text-xs text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 flex items-center gap-2 transition-colors",children:[r.jsx(sn,{size:14})," Delete"]})]})]})]})},Ko=({message:n="Please fill all the required fields"})=>r.jsxs("div",{className:"bg-red-600 text-white px-3 py-2 rounded-lg flex items-center gap-2 text-xs font-medium mb-3 shadow-sm",children:[r.jsx(ka,{size:14,className:"flex-shrink-0"}),r.jsx("span",{children:n})]}),By=({inputRef:n})=>{const s=(o,c=!0)=>n.current&&zp(n.current,o,c),l=()=>n.current&&zp(n.current,"{{variable}}",!1);return r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>s("*"),className:"p-1.5 text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 dark:text-indigo-400 rounded hover:bg-indigo-100 dark:hover:bg-indigo-900/40",children:r.jsx(_1,{size:14})}),r.jsx("button",{onClick:()=>s("_"),className:"p-1.5 text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 dark:text-indigo-400 rounded hover:bg-indigo-100 dark:hover:bg-indigo-900/40",children:r.jsx(k1,{size:14})}),r.jsx("button",{onClick:()=>s("~"),className:"p-1.5 text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 dark:text-indigo-400 rounded hover:bg-indigo-100 dark:hover:bg-indigo-900/40",children:r.jsx(C1,{size:14})})]}),r.jsx("div",{className:"flex-1"}),r.jsx("button",{onClick:l,className:"text-xs font-semibold text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/20 px-3 py-1.5 rounded-full hover:bg-indigo-100 dark:hover:bg-indigo-900/40",children:"Add Variable"})]})},lt=({children:n,required:s})=>r.jsxs("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1",children:[s&&r.jsx("span",{className:"text-red-500 mr-1",children:"*"}),n]}),Qt=n=>r.jsx("input",{...n,className:`nodrag w-full border border-gray-200 dark:border-[#333] bg-white dark:bg-[#0A0A0A] dark:text-gray-100 rounded-lg p-2.5 text-sm focus:ring-2 focus:ring-indigo-500 outline-none ${n.className}`}),xf=n=>r.jsx("textarea",{...n,className:`nodrag w-full border border-gray-200 dark:border-[#333] bg-white dark:bg-[#0A0A0A] dark:text-gray-100 rounded-lg p-3 text-sm focus:ring-2 focus:ring-indigo-500 resize-none ${n.className}`}),hA=({data:n,onChange:s})=>{const l=n.content?.length>0,o=M.useRef(null);return r.jsxs("div",{children:[!l&&r.jsx(Ko,{}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 font-medium",children:[r.jsx("span",{className:"text-red-500",children:"*"})," Respond with a simple text message."]}),r.jsx("div",{className:"relative",children:r.jsx(xf,{ref:o,placeholder:"Enter text",minRows:3,value:n.content||"",onChange:c=>s("content",c.target.value)})}),r.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 mb-3",children:["Characters: ",(n.content||"").length,"/1098"]}),r.jsx(By,{inputRef:o})]})},mA=({data:n,onChange:s})=>{const[l,o]=M.useState(n.buttonType||"reply"),c=n.body?.length>0&&(l==="reply"?n.buttons?.length>0:n.cta?.url),d=M.useRef(null);M.useEffect(()=>{n.buttons||s("buttons",[])},[]);const f=()=>{(n.buttons||[]).length<3&&s("buttons",[...n.buttons||[],{id:Date.now(),label:""}])},h=(m,y)=>{const x=[...n.buttons||[]];x[m].label=y,s("buttons",x)},p=m=>{const y=[...n.buttons||[]];y.splice(m,1),s("buttons",y)};return r.jsxs("div",{className:"space-y-4",children:[!c&&r.jsx(Ko,{}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Send interactive buttons or a call to action button."}),r.jsxs("div",{children:[r.jsx(lt,{children:"Header (Optional)"}),r.jsxs("select",{className:"nodrag w-full border border-gray-200 dark:border-[#333] bg-white dark:bg-[#0A0A0A] dark:text-gray-100 rounded-lg p-2 text-sm mb-2",value:n.headerType||"None",onChange:m=>s("headerType",m.target.value),children:[r.jsx("option",{value:"None",children:"None"}),r.jsx("option",{value:"Text",children:"Text"}),r.jsx("option",{value:"Image",children:"Image"})]}),n.headerType==="Text"&&r.jsx(Qt,{placeholder:"Enter header text",value:n.headerText||"",onChange:m=>s("headerText",m.target.value)})]}),r.jsxs("div",{children:[r.jsx(lt,{required:!0,children:"Body"}),r.jsx(xf,{ref:d,placeholder:"Enter the main message",value:n.body||"",onChange:m=>s("body",m.target.value)}),r.jsx(By,{inputRef:d})]}),r.jsxs("div",{children:[r.jsx(lt,{children:"Footer Text (Optional)"}),r.jsx(Qt,{placeholder:"Enter footer text",value:n.footer||"",onChange:m=>s("footer",m.target.value)})]}),r.jsxs("div",{children:[r.jsx(lt,{children:"Button type:"}),r.jsxs("div",{className:"flex gap-4 mt-2",children:[r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("input",{type:"radio",checked:l==="reply",onChange:()=>{o("reply"),s("buttonType","reply")},className:"text-indigo-600"}),"Reply Buttons"]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("input",{type:"radio",checked:l==="cta",onChange:()=>{o("cta"),s("buttonType","cta")},className:"text-indigo-600"}),"CTA URL Button"]})]})]}),l==="reply"?r.jsxs("div",{className:"bg-gray-50 dark:bg-[#151515] p-3 rounded-lg border border-gray-100 dark:border-[#333]",children:[r.jsx(lt,{required:!0,children:"Reply Buttons (at least 1)"}),(n.buttons||[]).map((m,y)=>r.jsxs("div",{className:"mb-3",children:[r.jsx(lt,{children:`Button ${y+1} Label`}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Qt,{value:m.label,onChange:x=>h(y,x.target.value),placeholder:"Label",maxLength:20}),r.jsx("button",{onClick:()=>p(y),className:"text-red-500 hover:bg-red-50 p-2 rounded",children:r.jsx(sn,{size:16})})]}),r.jsxs("div",{className:"text-xs text-gray-400 text-right",children:[m.label.length,"/20"]})]},y)),(n.buttons?.length||0)<3&&r.jsx("button",{onClick:f,className:"w-full py-2 border border-dashed border-gray-300 dark:border-[#444] rounded text-gray-500 text-sm hover:bg-gray-100 dark:hover:bg-[#222]",children:"+ Add Button"})]}):r.jsxs("div",{className:"bg-gray-50 dark:bg-[#151515] p-3 rounded-lg border border-gray-100 dark:border-[#333]",children:[r.jsxs("div",{className:"mb-3",children:[r.jsx(lt,{required:!0,children:"Display Text"}),r.jsx(Qt,{value:n.cta?.displayText||"",onChange:m=>s("cta",{...n.cta,displayText:m.target.value})})]}),r.jsxs("div",{children:[r.jsx(lt,{required:!0,children:"URL"}),r.jsx(Qt,{value:n.cta?.url||"",onChange:m=>s("cta",{...n.cta,url:m.target.value}),placeholder:"https://"})]})]})]})},pA=({data:n,onChange:s})=>{const l=n.body?.length>0&&n.buttonLabel&&n.sections?.length>0,o=()=>{s("sections",[...n.sections||[],{id:Date.now(),title:"",rows:[{id:Date.now()+1,title:""}]}])},c=(h,p,m)=>{const y=[...n.sections||[]];y[h][p]=m,s("sections",y)},d=h=>{const p=[...n.sections||[]];p[h].rows.push({id:Date.now(),title:"",description:""}),s("sections",p)},f=(h,p,m,y)=>{const x=[...n.sections||[]];x[h].rows[p][m]=y,s("sections",x)};return r.jsxs("div",{className:"space-y-4",children:[!l&&r.jsx(Ko,{}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Send interactive list message."}),r.jsxs("div",{children:[r.jsx(lt,{children:"Header (Optional)"}),r.jsx(Qt,{value:n.headerText||"",onChange:h=>s("headerText",h.target.value)})]}),r.jsxs("div",{children:[r.jsx(lt,{required:!0,children:"Body"}),r.jsx(xf,{value:n.body||"",onChange:h=>s("body",h.target.value)})]}),r.jsxs("div",{children:[r.jsx(lt,{children:"Footer (Optional)"}),r.jsx(Qt,{value:n.footer||"",onChange:h=>s("footer",h.target.value)})]}),r.jsxs("div",{children:[r.jsx(lt,{required:!0,children:"Button Label"}),r.jsx(Qt,{value:n.buttonLabel||"",onChange:h=>s("buttonLabel",h.target.value),placeholder:"View List"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx(lt,{required:!0,children:"Sections"}),r.jsx("button",{onClick:o,className:"text-xs bg-indigo-50 text-indigo-600 px-2 py-1 rounded",children:"Add Section"})]}),(n.sections||[]).map((h,p)=>r.jsxs("div",{className:"border border-gray-200 dark:border-[#333] rounded-lg p-3 mb-3 bg-gray-50 dark:bg-[#151515]",children:[r.jsxs("div",{className:"mb-2",children:[r.jsx(lt,{required:!0,children:"Section Title"}),r.jsx(Qt,{value:h.title,onChange:m=>c(p,"title",m.target.value)})]}),r.jsxs("div",{className:"ml-2 pl-2 border-l-2 border-indigo-100 dark:border-[#333]",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx(lt,{children:"Rows"}),r.jsx("button",{onClick:()=>d(p),className:"text-xs text-indigo-500",children:"+ Row"})]}),h.rows.map((m,y)=>r.jsxs("div",{className:"mb-3 grid grid-cols-2 gap-2",children:[r.jsx("div",{className:"col-span-2",children:r.jsx(Qt,{placeholder:"Row Title",value:m.title,onChange:x=>f(p,y,"title",x.target.value)})}),r.jsx(Qt,{placeholder:"ID",value:m.id,onChange:x=>f(p,y,"id",x.target.value)}),r.jsx(Qt,{placeholder:"Desc",value:m.description,onChange:x=>f(p,y,"description",x.target.value)})]},m.id))]})]},h.id))]})]})},xA=({data:n,onChange:s})=>{const l=[{name:"welcome_msg",id:"1",lang:"en",variables:0},{name:"offer_alert",id:"2",lang:"en",variables:1}];return r.jsxs("div",{children:[r.jsxs("div",{className:"mb-4",children:[r.jsx(lt,{required:!0,children:"Select Template"}),r.jsxs("select",{className:"nodrag w-full border border-gray-200 dark:border-[#333] bg-white dark:bg-[#0A0A0A] dark:text-gray-100 rounded-lg p-2.5 text-sm",value:n.template?.id||"",onChange:o=>{const c=l.find(d=>d.id===o.target.value);s("template",c)},children:[r.jsx("option",{value:"",children:"Select a template..."}),l.map(o=>r.jsx("option",{value:o.id,children:o.name},o.id))]})]}),n.template&&r.jsxs("div",{className:"bg-gray-50 dark:bg-[#151515] rounded-xl p-4 border border-gray-200 dark:border-[#333]",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2 font-semibold text-gray-800 dark:text-gray-100",children:[r.jsx(Ci,{size:18,className:"text-teal-600"}),r.jsx("span",{children:n.template.name})]}),r.jsxs("div",{className:"flex gap-2 text-gray-400",children:[r.jsx(zi,{size:16,className:"cursor-pointer hover:text-gray-600"}),r.jsx(sn,{size:16,className:"cursor-pointer hover:text-red-500",onClick:()=>s("template",null)})]})]}),r.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[r.jsxs("div",{children:["ID: ",n.template.id]}),r.jsxs("div",{children:["Lang: ",n.template.lang]}),r.jsxs("div",{children:["Variables: ",n.template.variables]})]}),r.jsx("div",{className:"mt-3 flex justify-end",children:r.jsx("span",{className:"bg-gray-200 dark:bg-[#333] text-gray-600 dark:text-gray-300 px-2 py-0.5 rounded text-xs",children:"Inactive"})})]})]})},yA=({data:n,onChange:s,type:l})=>{const o=[{id:"1",name:"VIP Customers"},{id:"2",name:"Leads"}],c=l==="addGroup";return r.jsxs("div",{className:"bg-gray-50 dark:bg-[#151515] rounded-xl p-4 border border-gray-200 dark:border-[#333]",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2 font-semibold text-gray-800 dark:text-gray-100",children:[c?r.jsx(hn,{size:18,className:"text-teal-600"}):r.jsx(Wd,{size:18,className:"text-teal-600"}),r.jsx("span",{children:c?"Add to Group":"Remove from Group"})]}),r.jsxs("div",{className:"flex gap-2 text-gray-400",children:[r.jsx(zi,{size:16}),r.jsx(sn,{size:16})]})]}),r.jsxs("div",{className:"mb-2",children:[r.jsx(lt,{children:c?"Add to:":"Remove from:"}),r.jsxs("select",{className:"nodrag w-full bg-transparent border-b border-gray-300 dark:border-[#444] py-1 text-sm focus:border-indigo-500 outline-none dark:text-gray-200",value:n.groupId||"",onChange:d=>s("groupId",d.target.value),children:[r.jsx("option",{value:"",children:"No group selected"}),o.map(d=>r.jsx("option",{value:d.id,children:d.name},d.id))]})]}),r.jsxs("div",{className:"flex justify-between items-center mt-4",children:[r.jsx("span",{className:"text-xs text-gray-500",children:"Action"}),r.jsx("span",{className:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 px-3 py-1 rounded-full text-xs font-medium",children:"Active"})]})]})},bA=({data:n,onChange:s})=>{const l=n.mediaType&&n.file;return r.jsxs("div",{children:[!l&&r.jsx(Ko,{}),r.jsx(lt,{required:!0,children:"Media Type"}),r.jsxs("select",{className:"nodrag w-full border border-gray-200 dark:border-[#333] rounded-lg p-2 mb-2 dark:bg-[#0A0A0A] dark:text-white",value:n.mediaType,onChange:o=>s("mediaType",o.target.value),children:[r.jsx("option",{children:"Image"}),r.jsx("option",{children:"Video"})]}),r.jsx(lt,{children:"Upload"}),r.jsx("div",{className:"border border-dashed p-4 rounded text-center dark:border-[#333] text-gray-500",children:r.jsx("input",{type:"file",onChange:o=>s("file",o.target.files[0])})})]})};function vA({id:n,data:s}){const{setNodes:l,deleteElements:o,getNodes:c}=Zo(),d=M.useCallback((m,y)=>{l(x=>x.map(v=>v.id===n?{...v,data:{...v.data,[m]:y}}:v))},[n,l]),f={onDelete:()=>o({nodes:[{id:n}]}),onDuplicate:()=>{const m=c().find(y=>y.id===n);m&&l(y=>y.concat({...m,id:`${m.data.subType}-${Date.now()}`,position:{x:m.position.x+50,y:m.position.y+50},selected:!1}))},onRename:m=>d("label",m)},h=fA[s.subType]||dr,p=()=>{switch(s.subType){case"text":return r.jsx(hA,{data:s,onChange:d});case"buttons":return r.jsx(mA,{data:s,onChange:d});case"list":return r.jsx(pA,{data:s,onChange:d});case"template":return r.jsx(xA,{data:s,onChange:d});case"addGroup":case"removeGroup":return r.jsx(yA,{data:s,onChange:d,type:s.subType});case"media":return r.jsx(bA,{data:s,onChange:d});default:return r.jsxs("div",{className:"text-gray-500 text-center py-4",children:["Coming Soon: ",s.subType]})}};return r.jsxs("div",{className:"min-w-[320px] max-w-[360px] bg-white dark:bg-[#0F0F0F] rounded-xl shadow-lg border border-gray-200 dark:border-[#262626] font-sans transition-colors duration-200",children:[r.jsx(pn,{type:"target",position:me.Left,className:"!bg-gray-400 dark:!bg-neutral-600 !w-3 !h-3 !-left-1.5"}),r.jsxs("div",{className:"p-5",children:[["addGroup","removeGroup"].includes(s.subType)?null:r.jsx(gA,{label:s.label,icon:h,actions:f}),p()]}),r.jsx(pn,{type:"source",position:me.Right,className:"!bg-gray-400 dark:!bg-neutral-600 !w-3 !h-3 !-right-1.5"})]})}function NA({data:n}){return r.jsxs("div",{className:"min-w-[240px] bg-white dark:bg-[#0F0F0F] rounded-lg shadow-sm border border-gray-200 dark:border-[#262626] transition-colors duration-200",children:[r.jsx(pn,{type:"target",position:me.Top,className:"!bg-gray-400 dark:!bg-neutral-600 !w-3 !h-3"}),r.jsxs("div",{className:"p-3 border-b border-gray-50 dark:border-[#262626] flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-teal-50 dark:bg-teal-900/10 flex items-center justify-center border border-teal-100 dark:border-teal-900/30",children:r.jsx(bo,{size:16,className:"text-teal-600 dark:text-teal-400"})}),r.jsx("span",{className:"text-sm font-semibold text-gray-800 dark:text-neutral-100",children:"Condition"})]}),r.jsxs("div",{className:"p-3",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-neutral-500 mb-2",children:"Check if..."}),r.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-neutral-200 bg-gray-50 dark:bg-[#1A1A1A] p-2 rounded border border-gray-100 dark:border-[#262626]",children:n.condition||'User replies "Yes"'}),r.jsxs("div",{className:"flex justify-between mt-4",children:[r.jsx("div",{className:"text-xs font-semibold text-green-600 dark:text-green-400 uppercase",children:"True"}),r.jsx("div",{className:"text-xs font-semibold text-red-600 dark:text-red-400 uppercase",children:"False"})]})]}),r.jsx(pn,{type:"source",position:me.Bottom,id:"true",className:"!bg-green-500 !w-3 !h-3 !left-[25%]"}),r.jsx(pn,{type:"source",position:me.Bottom,id:"false",className:"!bg-red-500 !w-3 !h-3 !left-[75%]"})]})}const jA={trigger:dA,condition:NA,action:vA},wA=[{id:"messages",title:"Messages",items:[{id:"text",label:"Simple text",icon:dr,subType:"text"},{id:"media",label:"Media files",icon:pi,subType:"media"},{id:"buttons",label:"Interactive buttons",icon:Vp,subType:"buttons"},{id:"list",label:"Interactive list",icon:Kd,subType:"list"},{id:"template",label:"Template",icon:Ci,subType:"template"}]},{id:"groups",title:"Group Actions",items:[{id:"addGroup",label:"Add to group",icon:hn,subType:"addGroup"},{id:"removeGroup",label:"Remove from Group",icon:Wd,subType:"removeGroup"}]},{id:"tags",title:"Tag",items:[{id:"addTag",label:"Add Tags",icon:Do,subType:"addTag"},{id:"removeTag",label:"Remove Tags",icon:$p,subType:"removeTag"}]},{id:"funnel",title:"Funnel",items:[{id:"addPipeline",label:"Add/Edit to Pipeline",icon:Bp,subType:"addPipeline"},{id:"removePipeline",label:"Remove from Pipeline",icon:sn,subType:"removePipeline"}]},{id:"others",title:"Others",items:[{id:"delay",label:"Delay",icon:xi,subType:"delay"}]}],SA=[{value:"NEW_CONVERSATION",label:"New conversation"},{value:"KEYWORDS",label:"Text contains specific keywords"},{value:"HAS_TAGS",label:"Contact has specific tags"},{value:"PIPELINE_UPDATE",label:"Contact has been affected to a pipeline"},{value:"SHORT_RESPONSE",label:"Advanced Short response"}];function _A(){const{id:n}=Yp(),s=ss(),l=n==="new",o=M.useRef(null),[c,d,f]=Lz([]),[h,p,m]=Rz([]),[y,x]=M.useState("Untitled Flow"),[v,j]=M.useState("NEW_CONVERSATION"),[w,T]=M.useState({}),[z,A]=M.useState(!1),[k,N]=M.useState(!1),[E,L]=M.useState({messages:!0,groups:!0,tags:!0,funnel:!1,others:!0}),[B,V]=M.useState(null);M.useEffect(()=>{l?d([{id:"trigger-1",type:"trigger",data:{triggerType:"NEW_CONVERSATION"},position:{x:100,y:300},deletable:!1}]):X()},[n]),M.useEffect(()=>{d(Q=>Q.map(C=>C.type==="trigger"?{...C,data:{...C.data,triggerType:v,...w}}:C))},[v,w,d]);const X=async()=>{try{const Q=await ce.get(`/flows/${n}`);x(Q.name),j(Q.triggerType||"NEW_CONVERSATION"),T(Q.triggerData||{}),A(Q.isActive),Q.content&&Q.content.nodes&&(d(Q.content.nodes),p(Q.content.edges||[]))}catch(Q){console.error("Failed to load flow",Q)}},H=M.useCallback(Q=>{p(C=>Xx({...Q,animated:!0,style:{stroke:"#94a3b8",strokeWidth:2}},C))},[p]),K=async()=>{N(!0);const Q={name:y,content:{nodes:c,edges:h},triggerType:v,triggerData:w,isActive:z};try{let C;l?C=await ce.post("/flows",Q):C=await ce.put(`/flows/${n}`,Q),l&&s(`/automations/${C.id}`,{replace:!0})}catch(C){console.error("Failed to save",C),alert(`Failed to save: ${C.message}`)}finally{N(!1)}},q=Q=>{const C={id:`${Q.subType}-${Date.now()}`,type:"action",data:{label:Q.label,subType:Q.subType,description:"Click to configure"},position:{x:500,y:300}};d(D=>D.concat(C))},Z=Q=>{L(C=>({...C,[Q]:!C[Q]}))};return r.jsxs("div",{className:"h-screen flex bg-gray-50 dark:bg-[#050505] font-sans text-gray-900 dark:text-neutral-100 transition-colors duration-300",children:[r.jsxs("div",{className:"w-72 bg-white dark:bg-[#0F0F0F] border-r border-gray-200 dark:border-[#262626] flex flex-col shadow-sm z-10 transition-colors duration-300",children:[r.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-[#262626] flex items-center justify-between",children:[r.jsx("button",{onClick:()=>s("/automations"),className:"text-gray-500 hover:text-gray-800 dark:hover:text-neutral-200 transition-colors",children:r.jsx(E1,{size:18})}),r.jsx("span",{className:"font-semibold text-gray-700 dark:text-neutral-200",children:"Components"}),r.jsx("div",{className:"w-5"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:wA.map(Q=>r.jsxs("div",{className:"border-b border-gray-100 dark:border-[#262626]",children:[r.jsxs("button",{onClick:()=>Z(Q.id),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-[#1A1A1A] transition-colors",children:[r.jsx("span",{className:"font-semibold text-sm text-gray-800 dark:text-neutral-200",children:Q.title}),E[Q.id]?r.jsx(Ei,{size:16,className:"text-gray-400"}):r.jsx(Lp,{size:16,className:"text-gray-400"})]}),E[Q.id]&&r.jsx("div",{className:"pb-2",children:Q.items.map(C=>r.jsxs("div",{onClick:()=>q(C),className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-[#1A1A1A] cursor-pointer flex items-center gap-3 group transition-colors",children:[r.jsx(C.icon,{size:18,className:"text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-neutral-400 group-hover:text-gray-900 dark:group-hover:text-neutral-200 transition-colors",children:C.label}),r.jsx("div",{className:"flex-1"}),r.jsx("span",{className:"opacity-0 group-hover:opacity-100 text-gray-400",children:r.jsxs("div",{className:"grid grid-cols-2 gap-0.5",children:[r.jsx("div",{className:"w-1 h-1 rounded-full bg-current"}),r.jsx("div",{className:"w-1 h-1 rounded-full bg-current"}),r.jsx("div",{className:"w-1 h-1 rounded-full bg-current"}),r.jsx("div",{className:"w-1 h-1 rounded-full bg-current"})]})})]},C.id))})]},Q.id))})]}),r.jsxs("div",{className:"flex-1 flex flex-col relative",children:[r.jsxs("div",{className:"h-16 bg-white dark:bg-[#0F0F0F] border-b border-gray-200 dark:border-[#262626] flex items-center justify-between px-6 shadow-sm z-10 transition-colors duration-300",children:[r.jsx("div",{className:"flex items-center gap-4",children:r.jsx("input",{value:y,onChange:Q=>x(Q.target.value),className:"text-lg font-bold text-gray-800 dark:text-neutral-100 bg-transparent border-none focus:ring-0 placeholder-gray-400 dark:placeholder-neutral-600",placeholder:"Untitled Flow"})}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:()=>A(!z),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium border transition-colors ${z?"bg-green-50 border-green-200 text-green-700 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400":"bg-gray-50 border-gray-200 text-gray-600 hover:bg-gray-100 dark:bg-[#1A1A1A] dark:border-[#404040] dark:text-neutral-400 dark:hover:bg-[#262626]"}`,children:[z?r.jsx(Up,{size:16}):r.jsx(tr,{size:16}),z?"Active":"Draft"]}),r.jsxs("button",{onClick:K,disabled:k,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2 rounded-lg font-medium text-sm flex items-center gap-2 transition-all shadow-sm hover:shadow active:scale-95",children:[r.jsx(Rp,{size:18}),k?"Saving...":"Save Flow"]})]})]}),r.jsx("div",{className:"absolute top-20 right-6 z-20 w-80",children:B?.type==="trigger"?r.jsxs("div",{className:"bg-white dark:bg-[#0F0F0F] rounded-xl shadow-xl border border-gray-100 dark:border-[#262626] overflow-hidden animate-in fade-in slide-in-from-right-4 duration-200",children:[r.jsx("div",{className:"bg-gray-50 dark:bg-[#151515] px-4 py-3 border-b border-gray-100 dark:border-[#262626] flex items-center justify-between",children:r.jsx("span",{className:"font-semibold text-gray-700 dark:text-neutral-200 text-sm",children:"Configure Trigger"})}),r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-500 dark:text-neutral-400 mb-1",children:"Trigger Event"}),r.jsx("select",{value:v,onChange:Q=>j(Q.target.value),className:"w-full text-sm border-gray-200 dark:border-[#404040] dark:bg-[#1A1A1A] dark:text-neutral-200 rounded-lg focus:ring-indigo-500 focus:border-indigo-500",children:SA.map(Q=>r.jsx("option",{value:Q.value,children:Q.label},Q.value))})]}),v==="KEYWORDS"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-500 dark:text-neutral-400 mb-1",children:"Keywords"}),r.jsx("input",{type:"text",placeholder:"e.g. hello, pricing",className:"w-full text-sm border-gray-200 dark:border-[#404040] dark:bg-[#1A1A1A] dark:text-neutral-200 rounded-lg focus:ring-indigo-500 focus:border-indigo-500",value:w.keyword||"",onChange:Q=>T({...w,keyword:Q.target.value})}),r.jsx("p",{className:"text-xs text-gray-400 dark:text-neutral-500 mt-1",children:"Comma separated"})]})]})]}):null}),r.jsxs("div",{className:"flex-1 bg-slate-50 dark:bg-[#050505] relative transition-colors duration-300",ref:o,children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.4] dark:opacity-[0.1]",style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"}}),r.jsxs(Oz,{nodes:c,edges:h,onNodesChange:f,onEdgesChange:m,onConnect:H,onNodeClick:(Q,C)=>V(C),onPaneClick:()=>V(null),nodeTypes:jA,fitView:!0,attributionPosition:"bottom-right",className:"dark:invert-0",children:[r.jsx(Vz,{color:"#cbd5e1",gap:20,size:1,className:"dark:opacity-10"}),r.jsx(Fz,{className:"!bg-white dark:!bg-[#0F0F0F] !border-gray-200 dark:!border-[#262626] !shadow-sm [&>button]:!text-gray-600 dark:[&>button]:!text-neutral-400 hover:[&>button]:!bg-gray-50 dark:hover:[&>button]:!bg-[#1A1A1A]"}),r.jsx(lA,{className:"!bg-white dark:!bg-[#0F0F0F] !border-gray-200 dark:!border-[#262626] !shadow-sm",nodeColor:"#e2e8f0",maskColor:"rgba(248, 250, 252, 0.7)"})]})]})]})]})}const kA=()=>{const[n,s]=M.useState([]),[l,o]=M.useState(!0),[c,d]=M.useState("OPEN"),[f,h]=M.useState([]);M.useEffect(()=>{p(),m()},[c]);const p=async()=>{try{o(!0);const y=await ce.getConversations({status:c});s(y)}catch(y){console.error("Failed to fetch conversations:",y)}finally{o(!1)}},m=async()=>{try{const y=await ce.getTeamMembers();h(y)}catch(y){console.error("Failed to fetch team members:",y)}};return r.jsxs("div",{className:"inbox-page p-6 h-full flex flex-col bg-gray-50 dark:bg-black transition-colors duration-300",children:[r.jsxs("header",{className:"mb-6 flex justify-between items-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Team Inbox"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>d("OPEN"),className:`px-3 py-1 rounded text-sm transition-colors ${c==="OPEN"?"bg-blue-600 dark:bg-green-600 text-white":"bg-gray-200 dark:bg-zinc-800 text-gray-700 dark:text-zinc-300"}`,children:"Open"}),r.jsx("button",{onClick:()=>d("CLOSED"),className:`px-3 py-1 rounded text-sm transition-colors ${c==="CLOSED"?"bg-blue-600 dark:bg-green-600 text-white":"bg-gray-200 dark:bg-zinc-800 text-gray-700 dark:text-zinc-300"}`,children:"Closed"})]})]}),r.jsx("div",{className:"bg-white dark:bg-[#09090b] rounded-lg shadow overflow-hidden flex-1 border border-gray-100 dark:border-zinc-800",children:r.jsx("div",{className:"grid grid-cols-1 divide-y divide-gray-100 dark:divide-zinc-800",children:l?r.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"Loading conversations..."}):n.length===0?r.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No conversations found."}):n.map(y=>r.jsx(ho,{to:`/inbox/${y.id}`,className:"block hover:bg-gray-50 dark:hover:bg-zinc-900/50 transition-colors p-4",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-green-900/20 flex items-center justify-center text-blue-600 dark:text-green-500 font-semibold",children:y.contact?.name?.[0]||"?"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900 dark:text-zinc-100",children:y.contact?.name||"Unknown Contact"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 truncate max-w-md",children:y.lastMessage||"No messages yet"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-xs text-gray-400 dark:text-zinc-500",children:y.updatedAt?new Date(y.updatedAt).toLocaleString():""}),y.assignedTo?r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 mt-1",children:y.assignedTo.name}):r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 dark:bg-zinc-800 text-gray-800 dark:text-zinc-300 mt-1",children:"Unassigned"})]})]})},y.id))})})]})},CA=({contactId:n})=>{const[s,l]=M.useState([]),[o,c]=M.useState(""),[d,f]=M.useState(!0);M.useEffect(()=>{n&&h()},[n]);const h=async()=>{try{f(!0);const m=await ce.getNotes(n);l(m)}catch(m){console.error("Failed to fetch notes:",m)}finally{f(!1)}},p=async m=>{if(m.preventDefault(),!!o.trim())try{await ce.addNote({contactId:parseInt(n),content:o}),c(""),h()}catch(y){console.error("Failed to add note:",y)}};return r.jsxs("div",{className:"internal-notes bg-gray-50 dark:bg-zinc-900/30 p-4 rounded-lg border border-gray-200 dark:border-zinc-800",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-zinc-300 mb-3",children:"Internal Notes"}),r.jsx("div",{className:"notes-list space-y-3 mb-4 max-h-60 overflow-y-auto",children:d?r.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Loading notes..."}):s.length===0?r.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 italic",children:"No notes yet."}):s.map(m=>r.jsxs("div",{className:"note-item bg-white dark:bg-zinc-900 p-2 rounded border border-gray-100 dark:border-zinc-800 shadow-sm",children:[r.jsx("p",{className:"text-xs text-gray-800 dark:text-zinc-200 whitespace-pre-wrap",children:m.content}),r.jsxs("div",{className:"flex justify-between items-center mt-1",children:[r.jsx("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400",children:m.author?m.author.name:"Unknown User"}),r.jsx("span",{className:"text-[10px] text-gray-400 dark:text-zinc-500",children:new Date(m.createdAt).toLocaleString()})]})]},m.id))}),r.jsxs("form",{onSubmit:p,className:"note-form",children:[r.jsx("textarea",{value:o,onChange:m=>c(m.target.value),placeholder:"Add an internal note...",className:"w-full text-xs p-2 border border-gray-300 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white rounded mb-2 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:focus:ring-green-500 dark:placeholder-zinc-500",rows:"2"}),r.jsx("button",{type:"submit",disabled:!o.trim(),className:"w-full bg-gray-600 dark:bg-zinc-700 hover:bg-gray-700 dark:hover:bg-zinc-600 text-white text-xs py-1 px-2 rounded disabled:opacity-50 transition-colors",children:"Add Note"})]})]})},EA=()=>{const{id:n}=Yp(),s=ss(),[l,o]=M.useState(null),[c,d]=M.useState([]),[f,h]=M.useState(""),[p,m]=M.useState(!0),[y,x]=M.useState([]),v=M.useRef(null);M.useEffect(()=>{n&&(w(),T())},[n]),M.useEffect(()=>{j()},[c]);const j=()=>{v.current?.scrollIntoView({behavior:"smooth"})},w=async()=>{try{m(!0);const N=await ce.getConversation(n);o(N),d(N.messages||[])}catch(N){console.error("Failed to fetch conversation:",N)}finally{m(!1)}},T=async()=>{try{const N=await ce.getTeamMembers();x(N)}catch(N){console.error("Failed to fetch team members:",N)}},z=async N=>{if(N.preventDefault(),!!f.trim())try{const E=await ce.sendMessage(n,{content:f});d([...c,E]),h("")}catch(E){console.error("Failed to send message:",E)}},A=async N=>{const E=N.target.value;try{const L=await ce.assignConversation(n,E);o(B=>({...B,assignedTo:L.assignedTo,assignedToId:L.assignedToId}))}catch(L){console.error("Failed to assign agent:",L)}},k=async N=>{try{const E=await ce.updateConversationStatus(n,N);o(L=>({...L,status:E.status}))}catch(E){console.error("Failed to update status:",E)}};return p?r.jsx("div",{className:"p-6 text-center",children:"Loading conversation..."}):l?r.jsxs("div",{className:"conversation-page h-[calc(100vh-64px)] flex flex-col md:flex-row bg-white dark:bg-gray-900",children:[r.jsxs("div",{className:"flex-1 flex flex-col border-r border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-white dark:bg-gray-800",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>s("/inbox"),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 mr-2 md:hidden",children:" Back"}),r.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400 font-semibold text-lg",children:l.contact?.name?.[0]||"C"}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-bold text-gray-800 dark:text-white",children:l.contact?.name}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:l.contact?.phone})]})]}),r.jsx("div",{className:"flex items-center gap-2",children:l.status==="OPEN"?r.jsx("button",{onClick:()=>k("CLOSED"),className:"text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 px-3 py-1 rounded",children:"Mark Closed"}):r.jsx("button",{onClick:()=>k("OPEN"),className:"text-xs bg-green-50 dark:bg-green-900/10 hover:bg-green-100 dark:hover:bg-green-900/20 text-green-700 dark:text-green-400 px-3 py-1 rounded",children:"Reopen"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50 dark:bg-gray-900 space-y-4",children:[c.map(N=>{const E=N.direction==="OUTBOUND";return r.jsx("div",{className:`flex ${E?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${E?"bg-blue-600 text-white rounded-br-none":"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-800 dark:text-gray-100 rounded-bl-none"} shadow-sm`,children:[r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:N.content}),r.jsxs("div",{className:`text-[10px] mt-1 ${E?"text-blue-100":"text-gray-400 dark:text-gray-500"}`,children:[new Date(N.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),E&&N.sender&&`  ${N.sender.name}`]})]})},N.id)}),r.jsx("div",{ref:v})]}),r.jsx("div",{className:"p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("form",{onSubmit:z,className:"flex gap-2",children:[r.jsx("input",{type:"text",value:f,onChange:N=>h(N.target.value),placeholder:"Type a message...",className:"flex-1 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:placeholder-gray-400"}),r.jsx("button",{type:"submit",disabled:!f.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-colors",children:"Send"})]})})]}),r.jsxs("div",{className:"w-full md:w-80 bg-white dark:bg-gray-800 p-4 overflow-y-auto border-l border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:"Assignment"}),r.jsxs("select",{value:l.assignedToId||"",onChange:A,className:"w-full p-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Unassigned"}),y.map(N=>r.jsx("option",{value:N.id,children:N.name},N.id))]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:"Contact Info"}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded border border-gray-100 dark:border-gray-600",children:[r.jsxs("p",{className:"text-sm text-gray-800 dark:text-gray-200 mb-1",children:[r.jsx("span",{className:"font-semibold",children:"Name:"})," ",l.contact?.name]}),r.jsxs("p",{className:"text-sm text-gray-800 dark:text-gray-200 mb-1",children:[r.jsx("span",{className:"font-semibold",children:"Phone:"})," ",l.contact?.phone]}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:l.contact?.tags?.map((N,E)=>r.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 px-2 py-0.5 rounded-full",children:N},E))})]})]}),r.jsx(CA,{contactId:l.contactId})]})]}):r.jsx("div",{className:"p-6 text-center",children:"Conversation not found"})},zA=()=>{const[n,s]=M.useState([]),[l,o]=M.useState(!0),[c,d]=M.useState("Verified"),[f,h]=M.useState(!1),[p,m]=M.useState({name:"",email:"",role:"AGENT",avatar:""});M.useEffect(()=>{y()},[]);const y=async()=>{try{o(!0);const w=await ce.getTeamMembers();s(w)}catch(w){console.error("Failed to fetch team members:",w)}finally{o(!1)}},x=w=>{const{name:T,value:z}=w.target;m(A=>({...A,[T]:z}))},v=async w=>{w.preventDefault();try{await ce.addTeamMember(p),y(),h(!1),m({name:"",email:"",role:"AGENT",avatar:""})}catch(T){console.error("Failed to add team member:",T),alert("Failed to add team member")}},j=async w=>{if(window.confirm("Are you sure you want to remove this team member?"))try{await ce.deleteTeamMember(w),y()}catch(T){console.error("Failed to delete member:",T)}};return r.jsxs("div",{className:"team-page p-6 bg-gray-50 dark:bg-black min-h-full transition-colors duration-300",children:[r.jsxs("div",{className:"flex gap-8 border-b border-gray-200 dark:border-zinc-800 mb-8",children:[r.jsxs("button",{className:`pb-3 text-sm font-medium transition-colors relative ${c==="Verified"?"text-blue-600 dark:text-green-500":"text-gray-500 dark:text-zinc-500 hover:text-gray-700 dark:hover:text-zinc-300"}`,onClick:()=>d("Verified"),children:["Verified",c==="Verified"&&r.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 dark:bg-green-500 rounded-t-full"})]}),r.jsxs("button",{className:`pb-3 text-sm font-medium transition-colors relative ${c==="Unverified"?"text-blue-600 dark:text-green-500":"text-gray-500 dark:text-zinc-500 hover:text-gray-700 dark:hover:text-zinc-300"}`,onClick:()=>d("Unverified"),children:["Unverified",c==="Unverified"&&r.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 dark:bg-green-500 rounded-t-full"})]})]}),r.jsxs("div",{className:"flex justify-between items-start mb-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:"Team"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Add, edit, and delete accounts in your team"})]}),r.jsxs("button",{onClick:()=>h(!0),className:"bg-blue-600 hover:bg-blue-700 dark:bg-green-600 dark:hover:bg-green-700 text-white px-4 py-2 rounded-full text-sm font-medium flex items-center gap-2 transition-colors shadow-sm",children:["Invite User ",r.jsx(_a,{size:16})]})]}),r.jsxs("div",{className:"bg-white dark:bg-[#09090b] p-4 rounded-xl shadow-sm mb-6 flex justify-between items-center border border-gray-100 dark:border-zinc-800",children:[r.jsxs("div",{className:"relative w-64",children:[r.jsx(Id,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500",size:18}),r.jsx("input",{type:"text",placeholder:"Search Team",className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-zinc-900/50 border-none rounded-lg text-sm focus:ring-2 focus:ring-blue-100 dark:focus:ring-green-900 focus:bg-white dark:focus:bg-zinc-900 transition-all outline-none text-gray-700 dark:text-zinc-200 placeholder-gray-400 dark:placeholder-zinc-600"})]}),r.jsxs("button",{className:"flex items-center gap-2 text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-200 border border-gray-200 dark:border-zinc-800 hover:border-gray-300 dark:hover:border-zinc-700 rounded-lg px-3 py-2 text-sm transition-all bg-white dark:bg-[#09090b]",children:[r.jsx(z1,{size:16}),"Columns"]})]}),r.jsx("div",{className:"bg-white dark:bg-[#09090b] rounded-xl shadow-sm overflow-hidden border border-gray-100 dark:border-zinc-800",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-50/50 dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800",children:[r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:"Name"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:"Email"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:"Role"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:"Active/Inactive"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:"Assignable"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:"Last updated"}),r.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-900 dark:text-zinc-200",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-50 dark:divide-zinc-800",children:l?r.jsx("tr",{children:r.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500 dark:text-zinc-500 text-sm",children:"Loading..."})}):n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500 dark:text-zinc-500 text-sm",children:"No team members found."})}):n.map(w=>r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-zinc-900/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"flex items-center",children:r.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-zinc-200",children:w.name})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-zinc-400",children:w.email}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"text-sm text-gray-900 dark:text-zinc-300 capitalize",children:w.role.toLowerCase()})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsx("div",{className:"w-8 h-4 bg-green-200 dark:bg-green-900/40 rounded-full relative cursor-pointer",children:r.jsx("div",{className:"absolute right-0.5 top-0.5 w-3 h-3 bg-white rounded-full shadow-sm"})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsx("input",{type:"checkbox",className:"rounded text-blue-600 dark:text-green-600 focus:ring-blue-500 dark:focus:ring-green-500 border-gray-300 dark:border-zinc-700 dark:bg-zinc-900",defaultChecked:!0})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-zinc-500",children:[new Date(w.updatedAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})," ",new Date(w.updatedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:r.jsx("button",{onClick:()=>j(w.id),className:"text-gray-400 dark:text-zinc-600 hover:text-red-600 dark:hover:text-red-500 transition-colors",children:"Remove"})})]},w.id))})]})}),f&&r.jsx("div",{className:"fixed inset-0 bg-black/20 dark:bg-black/70 backdrop-blur-sm overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:r.jsxs("div",{className:"relative p-6 border dark:border-zinc-800 w-96 shadow-2xl rounded-xl bg-white dark:bg-[#09090b] animate-fade-in up",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:"Invite Team Member"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 mb-4",children:"Send an invitation to join your team."}),r.jsxs("form",{onSubmit:v,children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 dark:text-zinc-300 text-xs font-semibold mb-1.5 uppercase tracking-wide",children:"Name"}),r.jsx("input",{type:"text",name:"name",value:p.name,onChange:x,className:"w-full px-3 py-2 border border-gray-200 dark:border-zinc-800 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-green-500/20 focus:border-blue-500 dark:focus:border-green-500 transition-all placeholder-gray-300 dark:placeholder-zinc-600 dark:bg-zinc-900 dark:text-white",placeholder:"Jane Doe",required:!0})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 dark:text-zinc-300 text-xs font-semibold mb-1.5 uppercase tracking-wide",children:"Email"}),r.jsx("input",{type:"email",name:"email",value:p.email,onChange:x,className:"w-full px-3 py-2 border border-gray-200 dark:border-zinc-800 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-green-500/20 focus:border-blue-500 dark:focus:border-green-500 transition-all placeholder-gray-300 dark:placeholder-zinc-600 dark:bg-zinc-900 dark:text-white",placeholder:"jane@example.com",required:!0})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-gray-700 dark:text-zinc-300 text-xs font-semibold mb-1.5 uppercase tracking-wide",children:"Role"}),r.jsxs("select",{name:"role",value:p.role,onChange:x,className:"w-full px-3 py-2 border border-gray-200 dark:border-zinc-800 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-green-500/20 focus:border-blue-500 dark:focus:border-green-500 transition-all bg-white dark:bg-zinc-900 dark:text-white",children:[r.jsx("option",{value:"AGENT",children:"Agent"}),r.jsx("option",{value:"MANAGER",children:"Manager"}),r.jsx("option",{value:"ADMIN",children:"Admin"})]})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 bg-gray-100 dark:bg-zinc-900 text-gray-700 dark:text-zinc-300 text-sm font-medium rounded-lg hover:bg-gray-200 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 dark:bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 dark:hover:bg-green-700 shadow-sm shadow-blue-200 dark:shadow-none transition-colors",children:"Send Invitation"})]})]})]})})]})};function AA(){return r.jsx(Sk,{children:r.jsx(_k,{children:r.jsx(jk,{children:r.jsx(M1,{children:r.jsxs(D1,{children:[r.jsx(yt,{path:"/login",element:r.jsx(Mk,{})}),r.jsxs(yt,{path:"/",element:r.jsx(kk,{children:r.jsx(Ck,{})}),children:[r.jsx(yt,{index:!0,element:r.jsx(Ek,{})}),r.jsx(yt,{path:"contacts",element:r.jsx(Ak,{})}),r.jsx(yt,{path:"lists",element:r.jsx(Tk,{})}),r.jsx(yt,{path:"campaigns",element:r.jsx(Ok,{})}),r.jsx(yt,{path:"campaigns/new",element:r.jsx(Dk,{})}),r.jsx(yt,{path:"templates",element:r.jsx(Hk,{})}),r.jsx(yt,{path:"media",element:r.jsx(Lk,{})}),r.jsx(yt,{path:"settings",element:r.jsx(Uk,{})}),r.jsx(yt,{path:"automations",element:r.jsx(Bk,{})}),r.jsx(yt,{path:"automations/:id",element:r.jsx(_A,{})}),r.jsx(yt,{path:"inbox",element:r.jsx(kA,{})}),r.jsx(yt,{path:"inbox/:id",element:r.jsx(EA,{})}),r.jsx(yt,{path:"team",element:r.jsx(zA,{})})]})]})})})})})}$1.createRoot(document.getElementById("root")).render(r.jsx(M.StrictMode,{children:r.jsx(AA,{})}));
