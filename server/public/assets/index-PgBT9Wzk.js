import{a as Xv,b as Zv,r as T,c as Qv,R as e0,A as Fv,C as t0,X as n0,Y as a0,T as s0,d as gd,B as Kv,e as hd,f as ar,i as Iv,g as r0,h as Jv,j as i0,k as Wv,l as Pv,m as go,n as md,u as e_}from"./recharts-CLtLozKo.js";import{X as _t,I as t_,C as Ca,a as Ap,b as Td,L as Tp,c as n_,U as a_,d as mn,e as Kd,M as s_,H as r_,f as Ci,G as bo,g as pi,S as Md,h as l0,i as i_,j as l_,k as To,l as xi,R as Mo,m as er,P as ka,n as fi,o as sn,p as o_,q as Mp,T as o0,A as c0,r as Dd,s as c_,F as dr,t as hn,u as Dp,v as Id,w as Do,x as zi,y as u_,z as rn,B as u0,D as Op,E as d_,J as f_,K as g_,N as h_,W as pd,O as m_,Q as Jd,V as yi,Y as Lp,Z as tr,_ as p_,$ as x_,a0 as y_,a1 as Ei,a2 as b_,a3 as v_,a4 as __,a5 as N_,a6 as j_,a7 as Rp,a8 as d0,a9 as $p,aa as Hp,ab as w_,ac as Up,ad as Bp,ae as Wd,af as Vp,ag as S_,ah as k_,ai as C_,aj as z_,ak as E_}from"./icons-DhOyLYQ6.js";import{u as qp,N as A_,a as rs,b as so,O as T_,L as ho,c as Yp,B as M_,R as D_,d as vt}from"./router-BJ1N55rV.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function l(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(c){if(c.ep)return;c.ep=!0;const d=l(c);fetch(c.href,d)}})();var xd={exports:{}},ri={};var f0;function O_(){if(f0)return ri;f0=1;var n=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function l(o,c,d){var f=null;if(d!==void 0&&(f=""+d),c.key!==void 0&&(f=""+c.key),"key"in c){d={};for(var h in c)h!=="key"&&(d[h]=c[h])}else d=c;return c=d.ref,{$$typeof:n,type:o,key:f,ref:c!==void 0?c:null,props:d}}return ri.Fragment=s,ri.jsx=l,ri.jsxs=l,ri}var g0;function L_(){return g0||(g0=1,xd.exports=O_()),xd.exports}var r=L_(),yd={exports:{}},ii={},bd={exports:{}},vd={};var h0;function R_(){return h0||(h0=1,(function(n){function s(j,D){var H=j.length;j.push(D);e:for(;0<H;){var q=H-1>>>1,P=j[q];if(0<c(P,D))j[q]=D,j[H]=P,H=q;else break e}}function l(j){return j.length===0?null:j[0]}function o(j){if(j.length===0)return null;var D=j[0],H=j.pop();if(H!==D){j[0]=H;e:for(var q=0,P=j.length,X=P>>>1;q<X;){var W=2*(q+1)-1,se=j[W],le=W+1,de=j[le];if(0>c(se,H))le<P&&0>c(de,se)?(j[q]=de,j[le]=H,q=le):(j[q]=se,j[W]=H,q=W);else if(le<P&&0>c(de,H))j[q]=de,j[le]=H,q=le;else break e}}return D}function c(j,D){var H=j.sortIndex-D.sortIndex;return H!==0?H:j.id-D.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;n.unstable_now=function(){return d.now()}}else{var f=Date,h=f.now();n.unstable_now=function(){return f.now()-h}}var p=[],m=[],y=1,x=null,v=3,_=!1,w=!1,M=!1,E=!1,A=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function k(j){for(var D=l(m);D!==null;){if(D.callback===null)o(m);else if(D.startTime<=j)o(m),D.sortIndex=D.expirationTime,s(p,D);else break;D=l(m)}}function U(j){if(M=!1,k(j),!w)if(l(p)!==null)w=!0,O||(O=!0,Z());else{var D=l(m);D!==null&&R(U,D.startTime-j)}}var O=!1,V=-1,G=5,L=-1;function F(){return E?!0:!(n.unstable_now()-L<G)}function Y(){if(E=!1,O){var j=n.unstable_now();L=j;var D=!0;try{e:{w=!1,M&&(M=!1,z(V),V=-1),_=!0;var H=v;try{t:{for(k(j),x=l(p);x!==null&&!(x.expirationTime>j&&F());){var q=x.callback;if(typeof q=="function"){x.callback=null,v=x.priorityLevel;var P=q(x.expirationTime<=j);if(j=n.unstable_now(),typeof P=="function"){x.callback=P,k(j),D=!0;break t}x===l(p)&&o(p),k(j)}else o(p);x=l(p)}if(x!==null)D=!0;else{var X=l(m);X!==null&&R(U,X.startTime-j),D=!1}}break e}finally{x=null,v=H,_=!1}D=void 0}}finally{D?Z():O=!1}}}var Z;if(typeof N=="function")Z=function(){N(Y)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,C=te.port2;te.port1.onmessage=Y,Z=function(){C.postMessage(null)}}else Z=function(){A(Y,0)};function R(j,D){V=A(function(){j(n.unstable_now())},D)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(j){switch(v){case 1:case 2:case 3:var D=3;break;default:D=v}var H=v;v=D;try{return j()}finally{v=H}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(j,D){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var H=v;v=j;try{return D()}finally{v=H}},n.unstable_scheduleCallback=function(j,D,H){var q=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?q+H:q):H=q,j){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=H+P,j={id:y++,callback:D,priorityLevel:j,startTime:H,expirationTime:P,sortIndex:-1},H>q?(j.sortIndex=H,s(m,j),l(p)===null&&j===l(m)&&(M?(z(V),V=-1):M=!0,R(U,H-q))):(j.sortIndex=P,s(p,j),w||_||(w=!0,O||(O=!0,Z()))),j},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(j){var D=v;return function(){var H=v;v=D;try{return j.apply(this,arguments)}finally{v=H}}}})(vd)),vd}var m0;function $_(){return m0||(m0=1,bd.exports=R_()),bd.exports}var p0;function H_(){if(p0)return ii;p0=1;var n=$_(),s=Xv(),l=Zv();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(d(e)!==e)throw Error(o(188))}function m(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(o(188));return t!==e?null:e}for(var a=e,i=t;;){var u=a.return;if(u===null)break;var g=u.alternate;if(g===null){if(i=u.return,i!==null){a=i;continue}break}if(u.child===g.child){for(g=u.child;g;){if(g===a)return p(u),e;if(g===i)return p(u),t;g=g.sibling}throw Error(o(188))}if(a.return!==i.return)a=u,i=g;else{for(var b=!1,S=u.child;S;){if(S===a){b=!0,a=u,i=g;break}if(S===i){b=!0,i=u,a=g;break}S=S.sibling}if(!b){for(S=g.child;S;){if(S===a){b=!0,a=g,i=u;break}if(S===i){b=!0,i=g,a=u;break}S=S.sibling}if(!b)throw Error(o(189))}}if(a.alternate!==i)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,v=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),N=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function Z(e){return e===null||typeof e!="object"?null:(e=Y&&e[Y]||e["@@iterator"],typeof e=="function"?e:null)}var te=Symbol.for("react.client.reference");function C(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===te?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case M:return"Fragment";case A:return"Profiler";case E:return"StrictMode";case U:return"Suspense";case O:return"SuspenseList";case L:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case N:return e.displayName||"Context";case z:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case V:return t=e.displayName||null,t!==null?t:C(e.type)||"Memo";case G:t=e._payload,e=e._init;try{return C(e(t))}catch{}}return null}var R=Array.isArray,j=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},q=[],P=-1;function X(e){return{current:e}}function W(e){0>P||(e.current=q[P],q[P]=null,P--)}function se(e,t){P++,q[P]=e.current,e.current=t}var le=X(null),de=X(null),be=X(null),me=X(null);function oe(e,t){switch(se(be,t),se(de,e),se(le,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?jm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=jm(t),e=wm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}W(le),se(le,e)}function fe(){W(le),W(de),W(be)}function we(e){e.memoizedState!==null&&se(me,e);var t=le.current,a=wm(t,e.type);t!==a&&(se(de,e),se(le,a))}function Ne(e){de.current===e&&(W(le),W(de)),me.current===e&&(W(me),ti._currentValue=H)}var ye,_e;function Ce(e){if(ye===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);ye=t&&t[1]||"",_e=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ye+e+_e}var ie=!1;function ge(e,t){if(!e||ie)return"";ie=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(ee){var J=ee}Reflect.construct(e,[],re)}else{try{re.call()}catch(ee){J=ee}e.call(re.prototype)}}else{try{throw Error()}catch(ee){J=ee}(re=e())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(ee){if(ee&&J&&typeof ee.stack=="string")return[ee.stack,J.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=i.DetermineComponentFrameRoot(),b=g[0],S=g[1];if(b&&S){var $=b.split(`
`),I=S.split(`
`);for(u=i=0;i<$.length&&!$[i].includes("DetermineComponentFrameRoot");)i++;for(;u<I.length&&!I[u].includes("DetermineComponentFrameRoot");)u++;if(i===$.length||u===I.length)for(i=$.length-1,u=I.length-1;1<=i&&0<=u&&$[i]!==I[u];)u--;for(;1<=i&&0<=u;i--,u--)if($[i]!==I[u]){if(i!==1||u!==1)do if(i--,u--,0>u||$[i]!==I[u]){var ne=`
`+$[i].replace(" at new "," at ");return e.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",e.displayName)),ne}while(1<=i&&0<=u);break}}}finally{ie=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ce(a):""}function Oe(e,t){switch(e.tag){case 26:case 27:case 5:return Ce(e.type);case 16:return Ce("Lazy");case 13:return e.child!==t&&t!==null?Ce("Suspense Fallback"):Ce("Suspense");case 19:return Ce("SuspenseList");case 0:case 15:return ge(e.type,!1);case 11:return ge(e.type.render,!1);case 1:return ge(e.type,!0);case 31:return Ce("Activity");default:return""}}function rt(e){try{var t="",a=null;do t+=Oe(e,a),a=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Tt=Object.prototype.hasOwnProperty,It=n.unstable_scheduleCallback,vn=n.unstable_cancelCallback,za=n.unstable_shouldYield,Ea=n.unstable_requestPaint,dt=n.unstable_now,is=n.unstable_getCurrentPriorityLevel,_n=n.unstable_ImmediatePriority,Qn=n.unstable_UserBlockingPriority,Aa=n.unstable_NormalPriority,Io=n.unstable_LowPriority,ls=n.unstable_IdlePriority,Jo=n.log,Wo=n.unstable_setDisableYieldValue,Ta=null,xt=null;function on(e){if(typeof Jo=="function"&&Wo(e),xt&&typeof xt.setStrictMode=="function")try{xt.setStrictMode(Ta,e)}catch{}}var yt=Math.clz32?Math.clz32:tc,Po=Math.log,ec=Math.LN2;function tc(e){return e>>>=0,e===0?32:31-(Po(e)/ec|0)|0}var os=256,cs=262144,us=4194304;function Nn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ds(e,t,a){var i=e.pendingLanes;if(i===0)return 0;var u=0,g=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var S=i&134217727;return S!==0?(i=S&~g,i!==0?u=Nn(i):(b&=S,b!==0?u=Nn(b):a||(a=S&~e,a!==0&&(u=Nn(a))))):(S=i&~g,S!==0?u=Nn(S):b!==0?u=Nn(b):a||(a=i&~e,a!==0&&(u=Nn(a)))),u===0?0:t!==0&&t!==u&&(t&g)===0&&(g=u&-u,a=t&-t,g>=a||g===32&&(a&4194048)!==0)?t:u}function Ma(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function nc(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Li(){var e=us;return us<<=1,(us&62914560)===0&&(us=4194304),e}function fr(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Da(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ac(e,t,a,i,u,g){var b=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var S=e.entanglements,$=e.expirationTimes,I=e.hiddenUpdates;for(a=b&~a;0<a;){var ne=31-yt(a),re=1<<ne;S[ne]=0,$[ne]=-1;var J=I[ne];if(J!==null)for(I[ne]=null,ne=0;ne<J.length;ne++){var ee=J[ne];ee!==null&&(ee.lane&=-536870913)}a&=~re}i!==0&&Ri(e,i,0),g!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=g&~(b&~t))}function Ri(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-yt(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|a&261930}function $i(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var i=31-yt(a),u=1<<i;u&t|e[i]&t&&(e[i]|=t),a&=~u}}function Hi(e,t){var a=t&-t;return a=(a&42)!==0?1:gr(a),(a&(e.suspendedLanes|t))!==0?0:a}function gr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function hr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ui(){var e=D.p;return e!==0?e:(e=window.event,e===void 0?32:Qm(e.type))}function Bi(e,t){var a=D.p;try{return D.p=e,t()}finally{D.p=a}}var cn=Math.random().toString(36).slice(2),it="__reactFiber$"+cn,pt="__reactProps$"+cn,jn="__reactContainer$"+cn,fs="__reactEvents$"+cn,Vi="__reactListeners$"+cn,sc="__reactHandles$"+cn,qi="__reactResources$"+cn,Oa="__reactMarker$"+cn;function mr(e){delete e[it],delete e[pt],delete e[fs],delete e[Vi],delete e[sc]}function Fn(e){var t=e[it];if(t)return t;for(var a=e.parentNode;a;){if(t=a[jn]||a[it]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Tm(e);e!==null;){if(a=e[it])return a;e=Tm(e)}return t}e=a,a=e.parentNode}return null}function Kn(e){if(e=e[it]||e[jn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function In(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function Jn(e){var t=e[qi];return t||(t=e[qi]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Pe(e){e[Oa]=!0}var Yi=new Set,Gi={};function wn(e,t){Wn(e,t),Wn(e+"Capture",t)}function Wn(e,t){for(Gi[e]=t,e=0;e<t.length;e++)Yi.add(t[e])}var rc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pr={},Xi={};function ic(e){return Tt.call(Xi,e)?!0:Tt.call(pr,e)?!1:rc.test(e)?Xi[e]=!0:(pr[e]=!0,!1)}function gs(e,t,a){if(ic(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function hs(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Jt(e,t,a,i){if(i===null)e.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+i)}}function jt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Zi(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function lc(e,t,a){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var u=i.get,g=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(b){a=""+b,g.call(this,b)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ms(e){if(!e._valueTracker){var t=Zi(e)?"checked":"value";e._valueTracker=lc(e,t,""+e[t])}}function Qi(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),i="";return e&&(i=Zi(e)?e.checked?"true":"false":e.value),e=i,e!==a?(t.setValue(e),!0):!1}function La(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var oc=/[\n"\\]/g;function wt(e){return e.replace(oc,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ra(e,t,a,i,u,g,b,S){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),t!=null?b==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+jt(t)):e.value!==""+jt(t)&&(e.value=""+jt(t)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),t!=null?xr(e,b,jt(t)):a!=null?xr(e,b,jt(a)):i!=null&&e.removeAttribute("value"),u==null&&g!=null&&(e.defaultChecked=!!g),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+jt(S):e.removeAttribute("name")}function Fi(e,t,a,i,u,g,b,S){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),t!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||t!=null)){ms(e);return}a=a!=null?""+jt(a):"",t=t!=null?""+jt(t):a,S||t===e.value||(e.value=t),e.defaultValue=t}i=i??u,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=S?e.checked:!!i,e.defaultChecked=!!i,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),ms(e)}function xr(e,t,a){t==="number"&&La(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Sn(e,t,a,i){if(e=e.options,t){t={};for(var u=0;u<a.length;u++)t["$"+a[u]]=!0;for(a=0;a<e.length;a++)u=t.hasOwnProperty("$"+e[a].value),e[a].selected!==u&&(e[a].selected=u),u&&i&&(e[a].defaultSelected=!0)}else{for(a=""+jt(a),t=null,u=0;u<e.length;u++){if(e[u].value===a){e[u].selected=!0,i&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function yf(e,t,a){if(t!=null&&(t=""+jt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+jt(a):""}function bf(e,t,a,i){if(t==null){if(i!=null){if(a!=null)throw Error(o(92));if(R(i)){if(1<i.length)throw Error(o(93));i=i[0]}a=i}a==null&&(a=""),t=a}a=jt(t),e.defaultValue=a,i=e.textContent,i===a&&i!==""&&i!==null&&(e.value=i),ms(e)}function ps(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var By=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vf(e,t,a){var i=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,a):typeof a!="number"||a===0||By.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function _f(e,t,a){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,a!=null){for(var i in a)!a.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var u in t)i=t[u],t.hasOwnProperty(u)&&a[u]!==i&&vf(e,u,i)}else for(var g in t)t.hasOwnProperty(g)&&vf(e,g,t[g])}function cc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ki(e){return qy.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function kn(){}var uc=null;function dc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xs=null,ys=null;function Nf(e){var t=Kn(e);if(t&&(e=t.stateNode)){var a=e[pt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ra(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+wt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var i=a[t];if(i!==e&&i.form===e.form){var u=i[pt]||null;if(!u)throw Error(o(90));Ra(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<a.length;t++)i=a[t],i.form===e.form&&Qi(i)}break e;case"textarea":yf(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Sn(e,!!a.multiple,t,!1)}}}var fc=!1;function jf(e,t,a){if(fc)return e(t,a);fc=!0;try{var i=e(t);return i}finally{if(fc=!1,(xs!==null||ys!==null)&&(Rl(),xs&&(t=xs,e=ys,ys=xs=null,Nf(t),e)))for(t=0;t<e.length;t++)Nf(e[t])}}function yr(e,t){var a=e.stateNode;if(a===null)return null;var i=a[pt]||null;if(i===null)return null;a=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(o(231,t,typeof a));return a}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gc=!1;if(Cn)try{var br={};Object.defineProperty(br,"passive",{get:function(){gc=!0}}),window.addEventListener("test",br,br),window.removeEventListener("test",br,br)}catch{gc=!1}var Pn=null,hc=null,Ii=null;function wf(){if(Ii)return Ii;var e,t=hc,a=t.length,i,u="value"in Pn?Pn.value:Pn.textContent,g=u.length;for(e=0;e<a&&t[e]===u[e];e++);var b=a-e;for(i=1;i<=b&&t[a-i]===u[g-i];i++);return Ii=u.slice(e,1<i?1-i:void 0)}function Ji(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Wi(){return!0}function Sf(){return!1}function St(e){function t(a,i,u,g,b){this._reactName=a,this._targetInst=u,this.type=i,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(a=e[S],this[S]=a?a(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Wi:Sf,this.isPropagationStopped=Sf,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wi)},persist:function(){},isPersistent:Wi}),t}var $a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pi=St($a),vr=x({},$a,{view:0,detail:0}),Yy=St(vr),mc,pc,_r,el=x({},vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_r&&(_r&&e.type==="mousemove"?(mc=e.screenX-_r.screenX,pc=e.screenY-_r.screenY):pc=mc=0,_r=e),mc)},movementY:function(e){return"movementY"in e?e.movementY:pc}}),kf=St(el),Gy=x({},el,{dataTransfer:0}),Xy=St(Gy),Zy=x({},vr,{relatedTarget:0}),xc=St(Zy),Qy=x({},$a,{animationName:0,elapsedTime:0,pseudoElement:0}),Fy=St(Qy),Ky=x({},$a,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Iy=St(Ky),Jy=x({},$a,{data:0}),Cf=St(Jy),Wy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Py={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=eb[e])?!!t[e]:!1}function yc(){return tb}var nb=x({},vr,{key:function(e){if(e.key){var t=Wy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ji(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Py[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yc,charCode:function(e){return e.type==="keypress"?Ji(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ji(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ab=St(nb),sb=x({},el,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zf=St(sb),rb=x({},vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yc}),ib=St(rb),lb=x({},$a,{propertyName:0,elapsedTime:0,pseudoElement:0}),ob=St(lb),cb=x({},el,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ub=St(cb),db=x({},$a,{newState:0,oldState:0}),fb=St(db),gb=[9,13,27,32],bc=Cn&&"CompositionEvent"in window,Nr=null;Cn&&"documentMode"in document&&(Nr=document.documentMode);var hb=Cn&&"TextEvent"in window&&!Nr,Ef=Cn&&(!bc||Nr&&8<Nr&&11>=Nr),Af=" ",Tf=!1;function Mf(e,t){switch(e){case"keyup":return gb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Df(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bs=!1;function mb(e,t){switch(e){case"compositionend":return Df(t);case"keypress":return t.which!==32?null:(Tf=!0,Af);case"textInput":return e=t.data,e===Af&&Tf?null:e;default:return null}}function pb(e,t){if(bs)return e==="compositionend"||!bc&&Mf(e,t)?(e=wf(),Ii=hc=Pn=null,bs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ef&&t.locale!=="ko"?null:t.data;default:return null}}var xb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Of(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!xb[e.type]:t==="textarea"}function Lf(e,t,a,i){xs?ys?ys.push(i):ys=[i]:xs=i,t=Yl(t,"onChange"),0<t.length&&(a=new Pi("onChange","change",null,a,i),e.push({event:a,listeners:t}))}var jr=null,wr=null;function yb(e){xm(e,0)}function tl(e){var t=In(e);if(Qi(t))return e}function Rf(e,t){if(e==="change")return t}var $f=!1;if(Cn){var vc;if(Cn){var _c="oninput"in document;if(!_c){var Hf=document.createElement("div");Hf.setAttribute("oninput","return;"),_c=typeof Hf.oninput=="function"}vc=_c}else vc=!1;$f=vc&&(!document.documentMode||9<document.documentMode)}function Uf(){jr&&(jr.detachEvent("onpropertychange",Bf),wr=jr=null)}function Bf(e){if(e.propertyName==="value"&&tl(wr)){var t=[];Lf(t,wr,e,dc(e)),jf(yb,t)}}function bb(e,t,a){e==="focusin"?(Uf(),jr=t,wr=a,jr.attachEvent("onpropertychange",Bf)):e==="focusout"&&Uf()}function vb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return tl(wr)}function _b(e,t){if(e==="click")return tl(t)}function Nb(e,t){if(e==="input"||e==="change")return tl(t)}function jb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mt=typeof Object.is=="function"?Object.is:jb;function Sr(e,t){if(Mt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(i=0;i<a.length;i++){var u=a[i];if(!Tt.call(t,u)||!Mt(e[u],t[u]))return!1}return!0}function Vf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qf(e,t){var a=Vf(e);e=0;for(var i;a;){if(a.nodeType===3){if(i=e+a.textContent.length,e<=t&&i>=t)return{node:a,offset:t-e};e=i}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Vf(a)}}function Yf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Yf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Gf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=La(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=La(e.document)}return t}function Nc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var wb=Cn&&"documentMode"in document&&11>=document.documentMode,vs=null,jc=null,kr=null,wc=!1;function Xf(e,t,a){var i=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;wc||vs==null||vs!==La(i)||(i=vs,"selectionStart"in i&&Nc(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),kr&&Sr(kr,i)||(kr=i,i=Yl(jc,"onSelect"),0<i.length&&(t=new Pi("onSelect","select",null,t,a),e.push({event:t,listeners:i}),t.target=vs)))}function Ha(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var _s={animationend:Ha("Animation","AnimationEnd"),animationiteration:Ha("Animation","AnimationIteration"),animationstart:Ha("Animation","AnimationStart"),transitionrun:Ha("Transition","TransitionRun"),transitionstart:Ha("Transition","TransitionStart"),transitioncancel:Ha("Transition","TransitionCancel"),transitionend:Ha("Transition","TransitionEnd")},Sc={},Zf={};Cn&&(Zf=document.createElement("div").style,"AnimationEvent"in window||(delete _s.animationend.animation,delete _s.animationiteration.animation,delete _s.animationstart.animation),"TransitionEvent"in window||delete _s.transitionend.transition);function Ua(e){if(Sc[e])return Sc[e];if(!_s[e])return e;var t=_s[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Zf)return Sc[e]=t[a];return e}var Qf=Ua("animationend"),Ff=Ua("animationiteration"),Kf=Ua("animationstart"),Sb=Ua("transitionrun"),kb=Ua("transitionstart"),Cb=Ua("transitioncancel"),If=Ua("transitionend"),Jf=new Map,kc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kc.push("scrollEnd");function Wt(e,t){Jf.set(e,t),wn(t,[e])}var nl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Vt=[],Ns=0,Cc=0;function al(){for(var e=Ns,t=Cc=Ns=0;t<e;){var a=Vt[t];Vt[t++]=null;var i=Vt[t];Vt[t++]=null;var u=Vt[t];Vt[t++]=null;var g=Vt[t];if(Vt[t++]=null,i!==null&&u!==null){var b=i.pending;b===null?u.next=u:(u.next=b.next,b.next=u),i.pending=u}g!==0&&Wf(a,u,g)}}function sl(e,t,a,i){Vt[Ns++]=e,Vt[Ns++]=t,Vt[Ns++]=a,Vt[Ns++]=i,Cc|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function zc(e,t,a,i){return sl(e,t,a,i),rl(e)}function Ba(e,t){return sl(e,null,null,t),rl(e)}function Wf(e,t,a){e.lanes|=a;var i=e.alternate;i!==null&&(i.lanes|=a);for(var u=!1,g=e.return;g!==null;)g.childLanes|=a,i=g.alternate,i!==null&&(i.childLanes|=a),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(u=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,u&&t!==null&&(u=31-yt(a),e=g.hiddenUpdates,i=e[u],i===null?e[u]=[t]:i.push(t),t.lane=a|536870912),g):null}function rl(e){if(50<Fr)throw Fr=0,$u=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var js={};function zb(e,t,a,i){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(e,t,a,i){return new zb(e,t,a,i)}function Ec(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zn(e,t){var a=e.alternate;return a===null?(a=Dt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Pf(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function il(e,t,a,i,u,g){var b=0;if(i=e,typeof e=="function")Ec(e)&&(b=1);else if(typeof e=="string")b=Dv(e,a,le.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case L:return e=Dt(31,a,t,u),e.elementType=L,e.lanes=g,e;case M:return Va(a.children,u,g,t);case E:b=8,u|=24;break;case A:return e=Dt(12,a,t,u|2),e.elementType=A,e.lanes=g,e;case U:return e=Dt(13,a,t,u),e.elementType=U,e.lanes=g,e;case O:return e=Dt(19,a,t,u),e.elementType=O,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N:b=10;break e;case z:b=9;break e;case k:b=11;break e;case V:b=14;break e;case G:b=16,i=null;break e}b=29,a=Error(o(130,e===null?"null":typeof e,"")),i=null}return t=Dt(b,a,t,u),t.elementType=e,t.type=i,t.lanes=g,t}function Va(e,t,a,i){return e=Dt(7,e,i,t),e.lanes=a,e}function Ac(e,t,a){return e=Dt(6,e,null,t),e.lanes=a,e}function eg(e){var t=Dt(18,null,null,0);return t.stateNode=e,t}function Tc(e,t,a){return t=Dt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var tg=new WeakMap;function qt(e,t){if(typeof e=="object"&&e!==null){var a=tg.get(e);return a!==void 0?a:(t={value:e,source:t,stack:rt(t)},tg.set(e,t),t)}return{value:e,source:t,stack:rt(t)}}var ws=[],Ss=0,ll=null,Cr=0,Yt=[],Gt=0,ea=null,un=1,dn="";function En(e,t){ws[Ss++]=Cr,ws[Ss++]=ll,ll=e,Cr=t}function ng(e,t,a){Yt[Gt++]=un,Yt[Gt++]=dn,Yt[Gt++]=ea,ea=e;var i=un;e=dn;var u=32-yt(i)-1;i&=~(1<<u),a+=1;var g=32-yt(t)+u;if(30<g){var b=u-u%5;g=(i&(1<<b)-1).toString(32),i>>=b,u-=b,un=1<<32-yt(t)+u|a<<u|i,dn=g+e}else un=1<<g|a<<u|i,dn=e}function Mc(e){e.return!==null&&(En(e,1),ng(e,1,0))}function Dc(e){for(;e===ll;)ll=ws[--Ss],ws[Ss]=null,Cr=ws[--Ss],ws[Ss]=null;for(;e===ea;)ea=Yt[--Gt],Yt[Gt]=null,dn=Yt[--Gt],Yt[Gt]=null,un=Yt[--Gt],Yt[Gt]=null}function ag(e,t){Yt[Gt++]=un,Yt[Gt++]=dn,Yt[Gt++]=ea,un=t.id,dn=t.overflow,ea=e}var ft=null,Ge=null,Me=!1,ta=null,Xt=!1,Oc=Error(o(519));function na(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw zr(qt(t,e)),Oc}function sg(e){var t=e.stateNode,a=e.type,i=e.memoizedProps;switch(t[it]=e,t[pt]=i,a){case"dialog":Ee("cancel",t),Ee("close",t);break;case"iframe":case"object":case"embed":Ee("load",t);break;case"video":case"audio":for(a=0;a<Ir.length;a++)Ee(Ir[a],t);break;case"source":Ee("error",t);break;case"img":case"image":case"link":Ee("error",t),Ee("load",t);break;case"details":Ee("toggle",t);break;case"input":Ee("invalid",t),Fi(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Ee("invalid",t);break;case"textarea":Ee("invalid",t),bf(t,i.value,i.defaultValue,i.children)}a=i.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||i.suppressHydrationWarning===!0||_m(t.textContent,a)?(i.popover!=null&&(Ee("beforetoggle",t),Ee("toggle",t)),i.onScroll!=null&&Ee("scroll",t),i.onScrollEnd!=null&&Ee("scrollend",t),i.onClick!=null&&(t.onclick=kn),t=!0):t=!1,t||na(e,!0)}function rg(e){for(ft=e.return;ft;)switch(ft.tag){case 5:case 31:case 13:Xt=!1;return;case 27:case 3:Xt=!0;return;default:ft=ft.return}}function ks(e){if(e!==ft)return!1;if(!Me)return rg(e),Me=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Wu(e.type,e.memoizedProps)),a=!a),a&&Ge&&na(e),rg(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Ge=Am(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Ge=Am(e)}else t===27?(t=Ge,pa(e.type)?(e=ad,ad=null,Ge=e):Ge=t):Ge=ft?Qt(e.stateNode.nextSibling):null;return!0}function qa(){Ge=ft=null,Me=!1}function Lc(){var e=ta;return e!==null&&(Et===null?Et=e:Et.push.apply(Et,e),ta=null),e}function zr(e){ta===null?ta=[e]:ta.push(e)}var Rc=X(null),Ya=null,An=null;function aa(e,t,a){se(Rc,t._currentValue),t._currentValue=a}function Tn(e){e._currentValue=Rc.current,W(Rc)}function $c(e,t,a){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===a)break;e=e.return}}function Hc(e,t,a,i){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var g=u.dependencies;if(g!==null){var b=u.child;g=g.firstContext;e:for(;g!==null;){var S=g;g=u;for(var $=0;$<t.length;$++)if(S.context===t[$]){g.lanes|=a,S=g.alternate,S!==null&&(S.lanes|=a),$c(g.return,a,e),i||(b=null);break e}g=S.next}}else if(u.tag===18){if(b=u.return,b===null)throw Error(o(341));b.lanes|=a,g=b.alternate,g!==null&&(g.lanes|=a),$c(b,a,e),b=null}else b=u.child;if(b!==null)b.return=u;else for(b=u;b!==null;){if(b===e){b=null;break}if(u=b.sibling,u!==null){u.return=b.return,b=u;break}b=b.return}u=b}}function Cs(e,t,a,i){e=null;for(var u=t,g=!1;u!==null;){if(!g){if((u.flags&524288)!==0)g=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var b=u.alternate;if(b===null)throw Error(o(387));if(b=b.memoizedProps,b!==null){var S=u.type;Mt(u.pendingProps.value,b.value)||(e!==null?e.push(S):e=[S])}}else if(u===me.current){if(b=u.alternate,b===null)throw Error(o(387));b.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(ti):e=[ti])}u=u.return}e!==null&&Hc(t,e,a,i),t.flags|=262144}function ol(e){for(e=e.firstContext;e!==null;){if(!Mt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ga(e){Ya=e,An=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function gt(e){return ig(Ya,e)}function cl(e,t){return Ya===null&&Ga(e),ig(e,t)}function ig(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},An===null){if(e===null)throw Error(o(308));An=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else An=An.next=t;return a}var Eb=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Ab=n.unstable_scheduleCallback,Tb=n.unstable_NormalPriority,et={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Uc(){return{controller:new Eb,data:new Map,refCount:0}}function Er(e){e.refCount--,e.refCount===0&&Ab(Tb,function(){e.controller.abort()})}var Ar=null,Bc=0,zs=0,Es=null;function Mb(e,t){if(Ar===null){var a=Ar=[];Bc=0,zs=Yu(),Es={status:"pending",value:void 0,then:function(i){a.push(i)}}}return Bc++,t.then(lg,lg),t}function lg(){if(--Bc===0&&Ar!==null){Es!==null&&(Es.status="fulfilled");var e=Ar;Ar=null,zs=0,Es=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Db(e,t){var a=[],i={status:"pending",value:null,reason:null,then:function(u){a.push(u)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var u=0;u<a.length;u++)(0,a[u])(t)},function(u){for(i.status="rejected",i.reason=u,u=0;u<a.length;u++)(0,a[u])(void 0)}),i}var og=j.S;j.S=function(e,t){Xh=dt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Mb(e,t),og!==null&&og(e,t)};var Xa=X(null);function Vc(){var e=Xa.current;return e!==null?e:Ye.pooledCache}function ul(e,t){t===null?se(Xa,Xa.current):se(Xa,t.pool)}function cg(){var e=Vc();return e===null?null:{parent:et._currentValue,pool:e}}var As=Error(o(460)),qc=Error(o(474)),dl=Error(o(542)),fl={then:function(){}};function ug(e){return e=e.status,e==="fulfilled"||e==="rejected"}function dg(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(kn,kn),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,gg(e),e;default:if(typeof t.status=="string")t.then(kn,kn);else{if(e=Ye,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=i}},function(i){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,gg(e),e}throw Qa=t,As}}function Za(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Qa=a,As):a}}var Qa=null;function fg(){if(Qa===null)throw Error(o(459));var e=Qa;return Qa=null,e}function gg(e){if(e===As||e===dl)throw Error(o(483))}var Ts=null,Tr=0;function gl(e){var t=Tr;return Tr+=1,Ts===null&&(Ts=[]),dg(Ts,e,t)}function Mr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function hl(e,t){throw t.$$typeof===v?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function hg(e){function t(Q,B){if(e){var K=Q.deletions;K===null?(Q.deletions=[B],Q.flags|=16):K.push(B)}}function a(Q,B){if(!e)return null;for(;B!==null;)t(Q,B),B=B.sibling;return null}function i(Q){for(var B=new Map;Q!==null;)Q.key!==null?B.set(Q.key,Q):B.set(Q.index,Q),Q=Q.sibling;return B}function u(Q,B){return Q=zn(Q,B),Q.index=0,Q.sibling=null,Q}function g(Q,B,K){return Q.index=K,e?(K=Q.alternate,K!==null?(K=K.index,K<B?(Q.flags|=67108866,B):K):(Q.flags|=67108866,B)):(Q.flags|=1048576,B)}function b(Q){return e&&Q.alternate===null&&(Q.flags|=67108866),Q}function S(Q,B,K,ae){return B===null||B.tag!==6?(B=Ac(K,Q.mode,ae),B.return=Q,B):(B=u(B,K),B.return=Q,B)}function $(Q,B,K,ae){var xe=K.type;return xe===M?ne(Q,B,K.props.children,ae,K.key):B!==null&&(B.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===G&&Za(xe)===B.type)?(B=u(B,K.props),Mr(B,K),B.return=Q,B):(B=il(K.type,K.key,K.props,null,Q.mode,ae),Mr(B,K),B.return=Q,B)}function I(Q,B,K,ae){return B===null||B.tag!==4||B.stateNode.containerInfo!==K.containerInfo||B.stateNode.implementation!==K.implementation?(B=Tc(K,Q.mode,ae),B.return=Q,B):(B=u(B,K.children||[]),B.return=Q,B)}function ne(Q,B,K,ae,xe){return B===null||B.tag!==7?(B=Va(K,Q.mode,ae,xe),B.return=Q,B):(B=u(B,K),B.return=Q,B)}function re(Q,B,K){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Ac(""+B,Q.mode,K),B.return=Q,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case _:return K=il(B.type,B.key,B.props,null,Q.mode,K),Mr(K,B),K.return=Q,K;case w:return B=Tc(B,Q.mode,K),B.return=Q,B;case G:return B=Za(B),re(Q,B,K)}if(R(B)||Z(B))return B=Va(B,Q.mode,K,null),B.return=Q,B;if(typeof B.then=="function")return re(Q,gl(B),K);if(B.$$typeof===N)return re(Q,cl(Q,B),K);hl(Q,B)}return null}function J(Q,B,K,ae){var xe=B!==null?B.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return xe!==null?null:S(Q,B,""+K,ae);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case _:return K.key===xe?$(Q,B,K,ae):null;case w:return K.key===xe?I(Q,B,K,ae):null;case G:return K=Za(K),J(Q,B,K,ae)}if(R(K)||Z(K))return xe!==null?null:ne(Q,B,K,ae,null);if(typeof K.then=="function")return J(Q,B,gl(K),ae);if(K.$$typeof===N)return J(Q,B,cl(Q,K),ae);hl(Q,K)}return null}function ee(Q,B,K,ae,xe){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Q=Q.get(K)||null,S(B,Q,""+ae,xe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case _:return Q=Q.get(ae.key===null?K:ae.key)||null,$(B,Q,ae,xe);case w:return Q=Q.get(ae.key===null?K:ae.key)||null,I(B,Q,ae,xe);case G:return ae=Za(ae),ee(Q,B,K,ae,xe)}if(R(ae)||Z(ae))return Q=Q.get(K)||null,ne(B,Q,ae,xe,null);if(typeof ae.then=="function")return ee(Q,B,K,gl(ae),xe);if(ae.$$typeof===N)return ee(Q,B,K,cl(B,ae),xe);hl(B,ae)}return null}function ue(Q,B,K,ae){for(var xe=null,Le=null,he=B,ke=B=0,Te=null;he!==null&&ke<K.length;ke++){he.index>ke?(Te=he,he=null):Te=he.sibling;var Re=J(Q,he,K[ke],ae);if(Re===null){he===null&&(he=Te);break}e&&he&&Re.alternate===null&&t(Q,he),B=g(Re,B,ke),Le===null?xe=Re:Le.sibling=Re,Le=Re,he=Te}if(ke===K.length)return a(Q,he),Me&&En(Q,ke),xe;if(he===null){for(;ke<K.length;ke++)he=re(Q,K[ke],ae),he!==null&&(B=g(he,B,ke),Le===null?xe=he:Le.sibling=he,Le=he);return Me&&En(Q,ke),xe}for(he=i(he);ke<K.length;ke++)Te=ee(he,Q,ke,K[ke],ae),Te!==null&&(e&&Te.alternate!==null&&he.delete(Te.key===null?ke:Te.key),B=g(Te,B,ke),Le===null?xe=Te:Le.sibling=Te,Le=Te);return e&&he.forEach(function(_a){return t(Q,_a)}),Me&&En(Q,ke),xe}function ve(Q,B,K,ae){if(K==null)throw Error(o(151));for(var xe=null,Le=null,he=B,ke=B=0,Te=null,Re=K.next();he!==null&&!Re.done;ke++,Re=K.next()){he.index>ke?(Te=he,he=null):Te=he.sibling;var _a=J(Q,he,Re.value,ae);if(_a===null){he===null&&(he=Te);break}e&&he&&_a.alternate===null&&t(Q,he),B=g(_a,B,ke),Le===null?xe=_a:Le.sibling=_a,Le=_a,he=Te}if(Re.done)return a(Q,he),Me&&En(Q,ke),xe;if(he===null){for(;!Re.done;ke++,Re=K.next())Re=re(Q,Re.value,ae),Re!==null&&(B=g(Re,B,ke),Le===null?xe=Re:Le.sibling=Re,Le=Re);return Me&&En(Q,ke),xe}for(he=i(he);!Re.done;ke++,Re=K.next())Re=ee(he,Q,ke,Re.value,ae),Re!==null&&(e&&Re.alternate!==null&&he.delete(Re.key===null?ke:Re.key),B=g(Re,B,ke),Le===null?xe=Re:Le.sibling=Re,Le=Re);return e&&he.forEach(function(Gv){return t(Q,Gv)}),Me&&En(Q,ke),xe}function qe(Q,B,K,ae){if(typeof K=="object"&&K!==null&&K.type===M&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case _:e:{for(var xe=K.key;B!==null;){if(B.key===xe){if(xe=K.type,xe===M){if(B.tag===7){a(Q,B.sibling),ae=u(B,K.props.children),ae.return=Q,Q=ae;break e}}else if(B.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===G&&Za(xe)===B.type){a(Q,B.sibling),ae=u(B,K.props),Mr(ae,K),ae.return=Q,Q=ae;break e}a(Q,B);break}else t(Q,B);B=B.sibling}K.type===M?(ae=Va(K.props.children,Q.mode,ae,K.key),ae.return=Q,Q=ae):(ae=il(K.type,K.key,K.props,null,Q.mode,ae),Mr(ae,K),ae.return=Q,Q=ae)}return b(Q);case w:e:{for(xe=K.key;B!==null;){if(B.key===xe)if(B.tag===4&&B.stateNode.containerInfo===K.containerInfo&&B.stateNode.implementation===K.implementation){a(Q,B.sibling),ae=u(B,K.children||[]),ae.return=Q,Q=ae;break e}else{a(Q,B);break}else t(Q,B);B=B.sibling}ae=Tc(K,Q.mode,ae),ae.return=Q,Q=ae}return b(Q);case G:return K=Za(K),qe(Q,B,K,ae)}if(R(K))return ue(Q,B,K,ae);if(Z(K)){if(xe=Z(K),typeof xe!="function")throw Error(o(150));return K=xe.call(K),ve(Q,B,K,ae)}if(typeof K.then=="function")return qe(Q,B,gl(K),ae);if(K.$$typeof===N)return qe(Q,B,cl(Q,K),ae);hl(Q,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,B!==null&&B.tag===6?(a(Q,B.sibling),ae=u(B,K),ae.return=Q,Q=ae):(a(Q,B),ae=Ac(K,Q.mode,ae),ae.return=Q,Q=ae),b(Q)):a(Q,B)}return function(Q,B,K,ae){try{Tr=0;var xe=qe(Q,B,K,ae);return Ts=null,xe}catch(he){if(he===As||he===dl)throw he;var Le=Dt(29,he,null,Q.mode);return Le.lanes=ae,Le.return=Q,Le}}}var Fa=hg(!0),mg=hg(!1),sa=!1;function Yc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ra(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ia(e,t,a){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,($e&2)!==0){var u=i.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),i.pending=t,t=rl(e),Wf(e,null,a),t}return sl(e,i,t,a),rl(e)}function Dr(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,$i(e,a)}}function Xc(e,t){var a=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,a===i)){var u=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?u=g=b:g=g.next=b,a=a.next}while(a!==null);g===null?u=g=t:g=g.next=t}else u=g=t;a={baseState:i.baseState,firstBaseUpdate:u,lastBaseUpdate:g,shared:i.shared,callbacks:i.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Zc=!1;function Or(){if(Zc){var e=Es;if(e!==null)throw e}}function Lr(e,t,a,i){Zc=!1;var u=e.updateQueue;sa=!1;var g=u.firstBaseUpdate,b=u.lastBaseUpdate,S=u.shared.pending;if(S!==null){u.shared.pending=null;var $=S,I=$.next;$.next=null,b===null?g=I:b.next=I,b=$;var ne=e.alternate;ne!==null&&(ne=ne.updateQueue,S=ne.lastBaseUpdate,S!==b&&(S===null?ne.firstBaseUpdate=I:S.next=I,ne.lastBaseUpdate=$))}if(g!==null){var re=u.baseState;b=0,ne=I=$=null,S=g;do{var J=S.lane&-536870913,ee=J!==S.lane;if(ee?(Ae&J)===J:(i&J)===J){J!==0&&J===zs&&(Zc=!0),ne!==null&&(ne=ne.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var ue=e,ve=S;J=t;var qe=a;switch(ve.tag){case 1:if(ue=ve.payload,typeof ue=="function"){re=ue.call(qe,re,J);break e}re=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=ve.payload,J=typeof ue=="function"?ue.call(qe,re,J):ue,J==null)break e;re=x({},re,J);break e;case 2:sa=!0}}J=S.callback,J!==null&&(e.flags|=64,ee&&(e.flags|=8192),ee=u.callbacks,ee===null?u.callbacks=[J]:ee.push(J))}else ee={lane:J,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ne===null?(I=ne=ee,$=re):ne=ne.next=ee,b|=J;if(S=S.next,S===null){if(S=u.shared.pending,S===null)break;ee=S,S=ee.next,ee.next=null,u.lastBaseUpdate=ee,u.shared.pending=null}}while(!0);ne===null&&($=re),u.baseState=$,u.firstBaseUpdate=I,u.lastBaseUpdate=ne,g===null&&(u.shared.lanes=0),da|=b,e.lanes=b,e.memoizedState=re}}function pg(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function xg(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)pg(a[e],t)}var Ms=X(null),ml=X(0);function yg(e,t){e=Bn,se(ml,e),se(Ms,t),Bn=e|t.baseLanes}function Qc(){se(ml,Bn),se(Ms,Ms.current)}function Fc(){Bn=ml.current,W(Ms),W(ml)}var Ot=X(null),Zt=null;function la(e){var t=e.alternate;se(Je,Je.current&1),se(Ot,e),Zt===null&&(t===null||Ms.current!==null||t.memoizedState!==null)&&(Zt=e)}function Kc(e){se(Je,Je.current),se(Ot,e),Zt===null&&(Zt=e)}function bg(e){e.tag===22?(se(Je,Je.current),se(Ot,e),Zt===null&&(Zt=e)):oa()}function oa(){se(Je,Je.current),se(Ot,Ot.current)}function Lt(e){W(Ot),Zt===e&&(Zt=null),W(Je)}var Je=X(0);function pl(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||td(a)||nd(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Mn=0,Se=null,Be=null,tt=null,xl=!1,Ds=!1,Ka=!1,yl=0,Rr=0,Os=null,Ob=0;function Ke(){throw Error(o(321))}function Ic(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Mt(e[a],t[a]))return!1;return!0}function Jc(e,t,a,i,u,g){return Mn=g,Se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,j.H=e===null||e.memoizedState===null?nh:fu,Ka=!1,g=a(i,u),Ka=!1,Ds&&(g=_g(t,a,i,u)),vg(e),g}function vg(e){j.H=Ur;var t=Be!==null&&Be.next!==null;if(Mn=0,tt=Be=Se=null,xl=!1,Rr=0,Os=null,t)throw Error(o(300));e===null||nt||(e=e.dependencies,e!==null&&ol(e)&&(nt=!0))}function _g(e,t,a,i){Se=e;var u=0;do{if(Ds&&(Os=null),Rr=0,Ds=!1,25<=u)throw Error(o(301));if(u+=1,tt=Be=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}j.H=ah,g=t(a,i)}while(Ds);return g}function Lb(){var e=j.H,t=e.useState()[0];return t=typeof t.then=="function"?$r(t):t,e=e.useState()[0],(Be!==null?Be.memoizedState:null)!==e&&(Se.flags|=1024),t}function Wc(){var e=yl!==0;return yl=0,e}function Pc(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function eu(e){if(xl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}xl=!1}Mn=0,tt=Be=Se=null,Ds=!1,Rr=yl=0,Os=null}function bt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Se.memoizedState=tt=e:tt=tt.next=e,tt}function We(){if(Be===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=tt===null?Se.memoizedState:tt.next;if(t!==null)tt=t,Be=e;else{if(e===null)throw Se.alternate===null?Error(o(467)):Error(o(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},tt===null?Se.memoizedState=tt=e:tt=tt.next=e}return tt}function bl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $r(e){var t=Rr;return Rr+=1,Os===null&&(Os=[]),e=dg(Os,e,t),t=Se,(tt===null?t.memoizedState:tt.next)===null&&(t=t.alternate,j.H=t===null||t.memoizedState===null?nh:fu),e}function vl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return $r(e);if(e.$$typeof===N)return gt(e)}throw Error(o(438,String(e)))}function tu(e){var t=null,a=Se.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var i=Se.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=bl(),Se.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),i=0;i<e;i++)a[i]=F;return t.index++,a}function Dn(e,t){return typeof t=="function"?t(e):t}function _l(e){var t=We();return nu(t,Be,e)}function nu(e,t,a){var i=e.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=a;var u=e.baseQueue,g=i.pending;if(g!==null){if(u!==null){var b=u.next;u.next=g.next,g.next=b}t.baseQueue=u=g,i.pending=null}if(g=e.baseState,u===null)e.memoizedState=g;else{t=u.next;var S=b=null,$=null,I=t,ne=!1;do{var re=I.lane&-536870913;if(re!==I.lane?(Ae&re)===re:(Mn&re)===re){var J=I.revertLane;if(J===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),re===zs&&(ne=!0);else if((Mn&J)===J){I=I.next,J===zs&&(ne=!0);continue}else re={lane:0,revertLane:I.revertLane,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},$===null?(S=$=re,b=g):$=$.next=re,Se.lanes|=J,da|=J;re=I.action,Ka&&a(g,re),g=I.hasEagerState?I.eagerState:a(g,re)}else J={lane:re,revertLane:I.revertLane,gesture:I.gesture,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},$===null?(S=$=J,b=g):$=$.next=J,Se.lanes|=re,da|=re;I=I.next}while(I!==null&&I!==t);if($===null?b=g:$.next=S,!Mt(g,e.memoizedState)&&(nt=!0,ne&&(a=Es,a!==null)))throw a;e.memoizedState=g,e.baseState=b,e.baseQueue=$,i.lastRenderedState=g}return u===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function au(e){var t=We(),a=t.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=e;var i=a.dispatch,u=a.pending,g=t.memoizedState;if(u!==null){a.pending=null;var b=u=u.next;do g=e(g,b.action),b=b.next;while(b!==u);Mt(g,t.memoizedState)||(nt=!0),t.memoizedState=g,t.baseQueue===null&&(t.baseState=g),a.lastRenderedState=g}return[g,i]}function Ng(e,t,a){var i=Se,u=We(),g=Me;if(g){if(a===void 0)throw Error(o(407));a=a()}else a=t();var b=!Mt((Be||u).memoizedState,a);if(b&&(u.memoizedState=a,nt=!0),u=u.queue,iu(Sg.bind(null,i,u,e),[e]),u.getSnapshot!==t||b||tt!==null&&tt.memoizedState.tag&1){if(i.flags|=2048,Ls(9,{destroy:void 0},wg.bind(null,i,u,a,t),null),Ye===null)throw Error(o(349));g||(Mn&127)!==0||jg(i,t,a)}return a}function jg(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Se.updateQueue,t===null?(t=bl(),Se.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function wg(e,t,a,i){t.value=a,t.getSnapshot=i,kg(t)&&Cg(e)}function Sg(e,t,a){return a(function(){kg(t)&&Cg(e)})}function kg(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Mt(e,a)}catch{return!0}}function Cg(e){var t=Ba(e,2);t!==null&&At(t,e,2)}function su(e){var t=bt();if(typeof e=="function"){var a=e;if(e=a(),Ka){on(!0);try{a()}finally{on(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:e},t}function zg(e,t,a,i){return e.baseState=a,nu(e,Be,typeof i=="function"?i:Dn)}function Rb(e,t,a,i,u){if(wl(e))throw Error(o(485));if(e=t.action,e!==null){var g={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};j.T!==null?a(!0):g.isTransition=!1,i(g),a=t.pending,a===null?(g.next=t.pending=g,Eg(t,g)):(g.next=a.next,t.pending=a.next=g)}}function Eg(e,t){var a=t.action,i=t.payload,u=e.state;if(t.isTransition){var g=j.T,b={};j.T=b;try{var S=a(u,i),$=j.S;$!==null&&$(b,S),Ag(e,t,S)}catch(I){ru(e,t,I)}finally{g!==null&&b.types!==null&&(g.types=b.types),j.T=g}}else try{g=a(u,i),Ag(e,t,g)}catch(I){ru(e,t,I)}}function Ag(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(i){Tg(e,t,i)},function(i){return ru(e,t,i)}):Tg(e,t,a)}function Tg(e,t,a){t.status="fulfilled",t.value=a,Mg(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Eg(e,a)))}function ru(e,t,a){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=a,Mg(t),t=t.next;while(t!==i)}e.action=null}function Mg(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Dg(e,t){return t}function Og(e,t){if(Me){var a=Ye.formState;if(a!==null){e:{var i=Se;if(Me){if(Ge){t:{for(var u=Ge,g=Xt;u.nodeType!==8;){if(!g){u=null;break t}if(u=Qt(u.nextSibling),u===null){u=null;break t}}g=u.data,u=g==="F!"||g==="F"?u:null}if(u){Ge=Qt(u.nextSibling),i=u.data==="F!";break e}}na(i)}i=!1}i&&(t=a[0])}}return a=bt(),a.memoizedState=a.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dg,lastRenderedState:t},a.queue=i,a=Pg.bind(null,Se,i),i.dispatch=a,i=su(!1),g=du.bind(null,Se,!1,i.queue),i=bt(),u={state:t,dispatch:null,action:e,pending:null},i.queue=u,a=Rb.bind(null,Se,u,g,a),u.dispatch=a,i.memoizedState=e,[t,a,!1]}function Lg(e){var t=We();return Rg(t,Be,e)}function Rg(e,t,a){if(t=nu(e,t,Dg)[0],e=_l(Dn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=$r(t)}catch(b){throw b===As?dl:b}else i=t;t=We();var u=t.queue,g=u.dispatch;return a!==t.memoizedState&&(Se.flags|=2048,Ls(9,{destroy:void 0},$b.bind(null,u,a),null)),[i,g,e]}function $b(e,t){e.action=t}function $g(e){var t=We(),a=Be;if(a!==null)return Rg(t,a,e);We(),t=t.memoizedState,a=We();var i=a.queue.dispatch;return a.memoizedState=e,[t,i,!1]}function Ls(e,t,a,i){return e={tag:e,create:a,deps:i,inst:t,next:null},t=Se.updateQueue,t===null&&(t=bl(),Se.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(i=a.next,a.next=e,e.next=i,t.lastEffect=e),e}function Hg(){return We().memoizedState}function Nl(e,t,a,i){var u=bt();Se.flags|=e,u.memoizedState=Ls(1|t,{destroy:void 0},a,i===void 0?null:i)}function jl(e,t,a,i){var u=We();i=i===void 0?null:i;var g=u.memoizedState.inst;Be!==null&&i!==null&&Ic(i,Be.memoizedState.deps)?u.memoizedState=Ls(t,g,a,i):(Se.flags|=e,u.memoizedState=Ls(1|t,g,a,i))}function Ug(e,t){Nl(8390656,8,e,t)}function iu(e,t){jl(2048,8,e,t)}function Hb(e){Se.flags|=4;var t=Se.updateQueue;if(t===null)t=bl(),Se.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Bg(e){var t=We().memoizedState;return Hb({ref:t,nextImpl:e}),function(){if(($e&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Vg(e,t){return jl(4,2,e,t)}function qg(e,t){return jl(4,4,e,t)}function Yg(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gg(e,t,a){a=a!=null?a.concat([e]):null,jl(4,4,Yg.bind(null,t,e),a)}function lu(){}function Xg(e,t){var a=We();t=t===void 0?null:t;var i=a.memoizedState;return t!==null&&Ic(t,i[1])?i[0]:(a.memoizedState=[e,t],e)}function Zg(e,t){var a=We();t=t===void 0?null:t;var i=a.memoizedState;if(t!==null&&Ic(t,i[1]))return i[0];if(i=e(),Ka){on(!0);try{e()}finally{on(!1)}}return a.memoizedState=[i,t],i}function ou(e,t,a){return a===void 0||(Mn&1073741824)!==0&&(Ae&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Qh(),Se.lanes|=e,da|=e,a)}function Qg(e,t,a,i){return Mt(a,t)?a:Ms.current!==null?(e=ou(e,a,i),Mt(e,t)||(nt=!0),e):(Mn&42)===0||(Mn&1073741824)!==0&&(Ae&261930)===0?(nt=!0,e.memoizedState=a):(e=Qh(),Se.lanes|=e,da|=e,t)}function Fg(e,t,a,i,u){var g=D.p;D.p=g!==0&&8>g?g:8;var b=j.T,S={};j.T=S,du(e,!1,t,a);try{var $=u(),I=j.S;if(I!==null&&I(S,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var ne=Db($,i);Hr(e,t,ne,Ht(e))}else Hr(e,t,i,Ht(e))}catch(re){Hr(e,t,{then:function(){},status:"rejected",reason:re},Ht())}finally{D.p=g,b!==null&&S.types!==null&&(b.types=S.types),j.T=b}}function Ub(){}function cu(e,t,a,i){if(e.tag!==5)throw Error(o(476));var u=Kg(e).queue;Fg(e,u,t,H,a===null?Ub:function(){return Ig(e),a(i)})}function Kg(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:H},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ig(e){var t=Kg(e);t.next===null&&(t=e.alternate.memoizedState),Hr(e,t.next.queue,{},Ht())}function uu(){return gt(ti)}function Jg(){return We().memoizedState}function Wg(){return We().memoizedState}function Bb(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Ht();e=ra(a);var i=ia(t,e,a);i!==null&&(At(i,t,a),Dr(i,t,a)),t={cache:Uc()},e.payload=t;return}t=t.return}}function Vb(e,t,a){var i=Ht();a={lane:i,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},wl(e)?eh(t,a):(a=zc(e,t,a,i),a!==null&&(At(a,e,i),th(a,t,i)))}function Pg(e,t,a){var i=Ht();Hr(e,t,a,i)}function Hr(e,t,a,i){var u={lane:i,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(wl(e))eh(t,u);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=t.lastRenderedReducer,g!==null))try{var b=t.lastRenderedState,S=g(b,a);if(u.hasEagerState=!0,u.eagerState=S,Mt(S,b))return sl(e,t,u,0),Ye===null&&al(),!1}catch{}if(a=zc(e,t,u,i),a!==null)return At(a,e,i),th(a,t,i),!0}return!1}function du(e,t,a,i){if(i={lane:2,revertLane:Yu(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},wl(e)){if(t)throw Error(o(479))}else t=zc(e,a,i,2),t!==null&&At(t,e,2)}function wl(e){var t=e.alternate;return e===Se||t!==null&&t===Se}function eh(e,t){Ds=xl=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function th(e,t,a){if((a&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,$i(e,a)}}var Ur={readContext:gt,use:vl,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useLayoutEffect:Ke,useInsertionEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useSyncExternalStore:Ke,useId:Ke,useHostTransitionStatus:Ke,useFormState:Ke,useActionState:Ke,useOptimistic:Ke,useMemoCache:Ke,useCacheRefresh:Ke};Ur.useEffectEvent=Ke;var nh={readContext:gt,use:vl,useCallback:function(e,t){return bt().memoizedState=[e,t===void 0?null:t],e},useContext:gt,useEffect:Ug,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Nl(4194308,4,Yg.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Nl(4194308,4,e,t)},useInsertionEffect:function(e,t){Nl(4,2,e,t)},useMemo:function(e,t){var a=bt();t=t===void 0?null:t;var i=e();if(Ka){on(!0);try{e()}finally{on(!1)}}return a.memoizedState=[i,t],i},useReducer:function(e,t,a){var i=bt();if(a!==void 0){var u=a(t);if(Ka){on(!0);try{a(t)}finally{on(!1)}}}else u=t;return i.memoizedState=i.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},i.queue=e,e=e.dispatch=Vb.bind(null,Se,e),[i.memoizedState,e]},useRef:function(e){var t=bt();return e={current:e},t.memoizedState=e},useState:function(e){e=su(e);var t=e.queue,a=Pg.bind(null,Se,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:lu,useDeferredValue:function(e,t){var a=bt();return ou(a,e,t)},useTransition:function(){var e=su(!1);return e=Fg.bind(null,Se,e.queue,!0,!1),bt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var i=Se,u=bt();if(Me){if(a===void 0)throw Error(o(407));a=a()}else{if(a=t(),Ye===null)throw Error(o(349));(Ae&127)!==0||jg(i,t,a)}u.memoizedState=a;var g={value:a,getSnapshot:t};return u.queue=g,Ug(Sg.bind(null,i,g,e),[e]),i.flags|=2048,Ls(9,{destroy:void 0},wg.bind(null,i,g,a,t),null),a},useId:function(){var e=bt(),t=Ye.identifierPrefix;if(Me){var a=dn,i=un;a=(i&~(1<<32-yt(i)-1)).toString(32)+a,t="_"+t+"R_"+a,a=yl++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Ob++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:uu,useFormState:Og,useActionState:Og,useOptimistic:function(e){var t=bt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=du.bind(null,Se,!0,a),a.dispatch=t,[e,t]},useMemoCache:tu,useCacheRefresh:function(){return bt().memoizedState=Bb.bind(null,Se)},useEffectEvent:function(e){var t=bt(),a={impl:e};return t.memoizedState=a,function(){if(($e&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},fu={readContext:gt,use:vl,useCallback:Xg,useContext:gt,useEffect:iu,useImperativeHandle:Gg,useInsertionEffect:Vg,useLayoutEffect:qg,useMemo:Zg,useReducer:_l,useRef:Hg,useState:function(){return _l(Dn)},useDebugValue:lu,useDeferredValue:function(e,t){var a=We();return Qg(a,Be.memoizedState,e,t)},useTransition:function(){var e=_l(Dn)[0],t=We().memoizedState;return[typeof e=="boolean"?e:$r(e),t]},useSyncExternalStore:Ng,useId:Jg,useHostTransitionStatus:uu,useFormState:Lg,useActionState:Lg,useOptimistic:function(e,t){var a=We();return zg(a,Be,e,t)},useMemoCache:tu,useCacheRefresh:Wg};fu.useEffectEvent=Bg;var ah={readContext:gt,use:vl,useCallback:Xg,useContext:gt,useEffect:iu,useImperativeHandle:Gg,useInsertionEffect:Vg,useLayoutEffect:qg,useMemo:Zg,useReducer:au,useRef:Hg,useState:function(){return au(Dn)},useDebugValue:lu,useDeferredValue:function(e,t){var a=We();return Be===null?ou(a,e,t):Qg(a,Be.memoizedState,e,t)},useTransition:function(){var e=au(Dn)[0],t=We().memoizedState;return[typeof e=="boolean"?e:$r(e),t]},useSyncExternalStore:Ng,useId:Jg,useHostTransitionStatus:uu,useFormState:$g,useActionState:$g,useOptimistic:function(e,t){var a=We();return Be!==null?zg(a,Be,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:tu,useCacheRefresh:Wg};ah.useEffectEvent=Bg;function gu(e,t,a,i){t=e.memoizedState,a=a(i,t),a=a==null?t:x({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var hu={enqueueSetState:function(e,t,a){e=e._reactInternals;var i=Ht(),u=ra(i);u.payload=t,a!=null&&(u.callback=a),t=ia(e,u,i),t!==null&&(At(t,e,i),Dr(t,e,i))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var i=Ht(),u=ra(i);u.tag=1,u.payload=t,a!=null&&(u.callback=a),t=ia(e,u,i),t!==null&&(At(t,e,i),Dr(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Ht(),i=ra(a);i.tag=2,t!=null&&(i.callback=t),t=ia(e,i,a),t!==null&&(At(t,e,a),Dr(t,e,a))}};function sh(e,t,a,i,u,g,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,g,b):t.prototype&&t.prototype.isPureReactComponent?!Sr(a,i)||!Sr(u,g):!0}function rh(e,t,a,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,i),t.state!==e&&hu.enqueueReplaceState(t,t.state,null)}function Ia(e,t){var a=t;if("ref"in t){a={};for(var i in t)i!=="ref"&&(a[i]=t[i])}if(e=e.defaultProps){a===t&&(a=x({},a));for(var u in e)a[u]===void 0&&(a[u]=e[u])}return a}function ih(e){nl(e)}function lh(e){console.error(e)}function oh(e){nl(e)}function Sl(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function ch(e,t,a){try{var i=e.onCaughtError;i(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function mu(e,t,a){return a=ra(a),a.tag=3,a.payload={element:null},a.callback=function(){Sl(e,t)},a}function uh(e){return e=ra(e),e.tag=3,e}function dh(e,t,a,i){var u=a.type.getDerivedStateFromError;if(typeof u=="function"){var g=i.value;e.payload=function(){return u(g)},e.callback=function(){ch(t,a,i)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){ch(t,a,i),typeof u!="function"&&(fa===null?fa=new Set([this]):fa.add(this));var S=i.stack;this.componentDidCatch(i.value,{componentStack:S!==null?S:""})})}function qb(e,t,a,i,u){if(a.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=a.alternate,t!==null&&Cs(t,a,u,!0),a=Ot.current,a!==null){switch(a.tag){case 31:case 13:return Zt===null?$l():a.alternate===null&&Ie===0&&(Ie=3),a.flags&=-257,a.flags|=65536,a.lanes=u,i===fl?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([i]):t.add(i),Bu(e,i,u)),!1;case 22:return a.flags|=65536,i===fl?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([i]):a.add(i)),Bu(e,i,u)),!1}throw Error(o(435,a.tag))}return Bu(e,i,u),$l(),!1}if(Me)return t=Ot.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,i!==Oc&&(e=Error(o(422),{cause:i}),zr(qt(e,a)))):(i!==Oc&&(t=Error(o(423),{cause:i}),zr(qt(t,a))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,i=qt(i,a),u=mu(e.stateNode,i,u),Xc(e,u),Ie!==4&&(Ie=2)),!1;var g=Error(o(520),{cause:i});if(g=qt(g,a),Qr===null?Qr=[g]:Qr.push(g),Ie!==4&&(Ie=2),t===null)return!0;i=qt(i,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=u&-u,a.lanes|=e,e=mu(a.stateNode,i,e),Xc(a,e),!1;case 1:if(t=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(fa===null||!fa.has(g))))return a.flags|=65536,u&=-u,a.lanes|=u,u=uh(u),dh(u,e,a,i),Xc(a,u),!1}a=a.return}while(a!==null);return!1}var pu=Error(o(461)),nt=!1;function ht(e,t,a,i){t.child=e===null?mg(t,null,a,i):Fa(t,e.child,a,i)}function fh(e,t,a,i,u){a=a.render;var g=t.ref;if("ref"in i){var b={};for(var S in i)S!=="ref"&&(b[S]=i[S])}else b=i;return Ga(t),i=Jc(e,t,a,b,g,u),S=Wc(),e!==null&&!nt?(Pc(e,t,u),On(e,t,u)):(Me&&S&&Mc(t),t.flags|=1,ht(e,t,i,u),t.child)}function gh(e,t,a,i,u){if(e===null){var g=a.type;return typeof g=="function"&&!Ec(g)&&g.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=g,hh(e,t,g,i,u)):(e=il(a.type,null,i,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(g=e.child,!wu(e,u)){var b=g.memoizedProps;if(a=a.compare,a=a!==null?a:Sr,a(b,i)&&e.ref===t.ref)return On(e,t,u)}return t.flags|=1,e=zn(g,i),e.ref=t.ref,e.return=t,t.child=e}function hh(e,t,a,i,u){if(e!==null){var g=e.memoizedProps;if(Sr(g,i)&&e.ref===t.ref)if(nt=!1,t.pendingProps=i=g,wu(e,u))(e.flags&131072)!==0&&(nt=!0);else return t.lanes=e.lanes,On(e,t,u)}return xu(e,t,a,i,u)}function mh(e,t,a,i){var u=i.children,g=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(g=g!==null?g.baseLanes|a:a,e!==null){for(i=t.child=e.child,u=0;i!==null;)u=u|i.lanes|i.childLanes,i=i.sibling;i=u&~g}else i=0,t.child=null;return ph(e,t,g,a,i)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ul(t,g!==null?g.cachePool:null),g!==null?yg(t,g):Qc(),bg(t);else return i=t.lanes=536870912,ph(e,t,g!==null?g.baseLanes|a:a,a,i)}else g!==null?(ul(t,g.cachePool),yg(t,g),oa(),t.memoizedState=null):(e!==null&&ul(t,null),Qc(),oa());return ht(e,t,u,a),t.child}function Br(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ph(e,t,a,i,u){var g=Vc();return g=g===null?null:{parent:et._currentValue,pool:g},t.memoizedState={baseLanes:a,cachePool:g},e!==null&&ul(t,null),Qc(),bg(t),e!==null&&Cs(e,t,i,!0),t.childLanes=u,null}function kl(e,t){return t=zl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function xh(e,t,a){return Fa(t,e.child,null,a),e=kl(t,t.pendingProps),e.flags|=2,Lt(t),t.memoizedState=null,e}function Yb(e,t,a){var i=t.pendingProps,u=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Me){if(i.mode==="hidden")return e=kl(t,i),t.lanes=536870912,Br(null,e);if(Kc(t),(e=Ge)?(e=Em(e,Xt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ea!==null?{id:un,overflow:dn}:null,retryLane:536870912,hydrationErrors:null},a=eg(e),a.return=t,t.child=a,ft=t,Ge=null)):e=null,e===null)throw na(t);return t.lanes=536870912,null}return kl(t,i)}var g=e.memoizedState;if(g!==null){var b=g.dehydrated;if(Kc(t),u)if(t.flags&256)t.flags&=-257,t=xh(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(nt||Cs(e,t,a,!1),u=(a&e.childLanes)!==0,nt||u){if(i=Ye,i!==null&&(b=Hi(i,a),b!==0&&b!==g.retryLane))throw g.retryLane=b,Ba(e,b),At(i,e,b),pu;$l(),t=xh(e,t,a)}else e=g.treeContext,Ge=Qt(b.nextSibling),ft=t,Me=!0,ta=null,Xt=!1,e!==null&&ag(t,e),t=kl(t,i),t.flags|=4096;return t}return e=zn(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Cl(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function xu(e,t,a,i,u){return Ga(t),a=Jc(e,t,a,i,void 0,u),i=Wc(),e!==null&&!nt?(Pc(e,t,u),On(e,t,u)):(Me&&i&&Mc(t),t.flags|=1,ht(e,t,a,u),t.child)}function yh(e,t,a,i,u,g){return Ga(t),t.updateQueue=null,a=_g(t,i,a,u),vg(e),i=Wc(),e!==null&&!nt?(Pc(e,t,g),On(e,t,g)):(Me&&i&&Mc(t),t.flags|=1,ht(e,t,a,g),t.child)}function bh(e,t,a,i,u){if(Ga(t),t.stateNode===null){var g=js,b=a.contextType;typeof b=="object"&&b!==null&&(g=gt(b)),g=new a(i,g),t.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=hu,t.stateNode=g,g._reactInternals=t,g=t.stateNode,g.props=i,g.state=t.memoizedState,g.refs={},Yc(t),b=a.contextType,g.context=typeof b=="object"&&b!==null?gt(b):js,g.state=t.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(gu(t,a,b,i),g.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&hu.enqueueReplaceState(g,g.state,null),Lr(t,i,g,u),Or(),g.state=t.memoizedState),typeof g.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){g=t.stateNode;var S=t.memoizedProps,$=Ia(a,S);g.props=$;var I=g.context,ne=a.contextType;b=js,typeof ne=="object"&&ne!==null&&(b=gt(ne));var re=a.getDerivedStateFromProps;ne=typeof re=="function"||typeof g.getSnapshotBeforeUpdate=="function",S=t.pendingProps!==S,ne||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S||I!==b)&&rh(t,g,i,b),sa=!1;var J=t.memoizedState;g.state=J,Lr(t,i,g,u),Or(),I=t.memoizedState,S||J!==I||sa?(typeof re=="function"&&(gu(t,a,re,i),I=t.memoizedState),($=sa||sh(t,a,$,i,J,I,b))?(ne||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=I),g.props=i,g.state=I,g.context=b,i=$):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{g=t.stateNode,Gc(e,t),b=t.memoizedProps,ne=Ia(a,b),g.props=ne,re=t.pendingProps,J=g.context,I=a.contextType,$=js,typeof I=="object"&&I!==null&&($=gt(I)),S=a.getDerivedStateFromProps,(I=typeof S=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==re||J!==$)&&rh(t,g,i,$),sa=!1,J=t.memoizedState,g.state=J,Lr(t,i,g,u),Or();var ee=t.memoizedState;b!==re||J!==ee||sa||e!==null&&e.dependencies!==null&&ol(e.dependencies)?(typeof S=="function"&&(gu(t,a,S,i),ee=t.memoizedState),(ne=sa||sh(t,a,ne,i,J,ee,$)||e!==null&&e.dependencies!==null&&ol(e.dependencies))?(I||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(i,ee,$),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(i,ee,$)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&J===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&J===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=ee),g.props=i,g.state=ee,g.context=$,i=ne):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&J===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&J===e.memoizedState||(t.flags|=1024),i=!1)}return g=i,Cl(e,t),i=(t.flags&128)!==0,g||i?(g=t.stateNode,a=i&&typeof a.getDerivedStateFromError!="function"?null:g.render(),t.flags|=1,e!==null&&i?(t.child=Fa(t,e.child,null,u),t.child=Fa(t,null,a,u)):ht(e,t,a,u),t.memoizedState=g.state,e=t.child):e=On(e,t,u),e}function vh(e,t,a,i){return qa(),t.flags|=256,ht(e,t,a,i),t.child}var yu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bu(e){return{baseLanes:e,cachePool:cg()}}function vu(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=$t),e}function _h(e,t,a){var i=t.pendingProps,u=!1,g=(t.flags&128)!==0,b;if((b=g)||(b=e!==null&&e.memoizedState===null?!1:(Je.current&2)!==0),b&&(u=!0,t.flags&=-129),b=(t.flags&32)!==0,t.flags&=-33,e===null){if(Me){if(u?la(t):oa(),(e=Ge)?(e=Em(e,Xt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ea!==null?{id:un,overflow:dn}:null,retryLane:536870912,hydrationErrors:null},a=eg(e),a.return=t,t.child=a,ft=t,Ge=null)):e=null,e===null)throw na(t);return nd(e)?t.lanes=32:t.lanes=536870912,null}var S=i.children;return i=i.fallback,u?(oa(),u=t.mode,S=zl({mode:"hidden",children:S},u),i=Va(i,u,a,null),S.return=t,i.return=t,S.sibling=i,t.child=S,i=t.child,i.memoizedState=bu(a),i.childLanes=vu(e,b,a),t.memoizedState=yu,Br(null,i)):(la(t),_u(t,S))}var $=e.memoizedState;if($!==null&&(S=$.dehydrated,S!==null)){if(g)t.flags&256?(la(t),t.flags&=-257,t=Nu(e,t,a)):t.memoizedState!==null?(oa(),t.child=e.child,t.flags|=128,t=null):(oa(),S=i.fallback,u=t.mode,i=zl({mode:"visible",children:i.children},u),S=Va(S,u,a,null),S.flags|=2,i.return=t,S.return=t,i.sibling=S,t.child=i,Fa(t,e.child,null,a),i=t.child,i.memoizedState=bu(a),i.childLanes=vu(e,b,a),t.memoizedState=yu,t=Br(null,i));else if(la(t),nd(S)){if(b=S.nextSibling&&S.nextSibling.dataset,b)var I=b.dgst;b=I,i=Error(o(419)),i.stack="",i.digest=b,zr({value:i,source:null,stack:null}),t=Nu(e,t,a)}else if(nt||Cs(e,t,a,!1),b=(a&e.childLanes)!==0,nt||b){if(b=Ye,b!==null&&(i=Hi(b,a),i!==0&&i!==$.retryLane))throw $.retryLane=i,Ba(e,i),At(b,e,i),pu;td(S)||$l(),t=Nu(e,t,a)}else td(S)?(t.flags|=192,t.child=e.child,t=null):(e=$.treeContext,Ge=Qt(S.nextSibling),ft=t,Me=!0,ta=null,Xt=!1,e!==null&&ag(t,e),t=_u(t,i.children),t.flags|=4096);return t}return u?(oa(),S=i.fallback,u=t.mode,$=e.child,I=$.sibling,i=zn($,{mode:"hidden",children:i.children}),i.subtreeFlags=$.subtreeFlags&65011712,I!==null?S=zn(I,S):(S=Va(S,u,a,null),S.flags|=2),S.return=t,i.return=t,i.sibling=S,t.child=i,Br(null,i),i=t.child,S=e.child.memoizedState,S===null?S=bu(a):(u=S.cachePool,u!==null?($=et._currentValue,u=u.parent!==$?{parent:$,pool:$}:u):u=cg(),S={baseLanes:S.baseLanes|a,cachePool:u}),i.memoizedState=S,i.childLanes=vu(e,b,a),t.memoizedState=yu,Br(e.child,i)):(la(t),a=e.child,e=a.sibling,a=zn(a,{mode:"visible",children:i.children}),a.return=t,a.sibling=null,e!==null&&(b=t.deletions,b===null?(t.deletions=[e],t.flags|=16):b.push(e)),t.child=a,t.memoizedState=null,a)}function _u(e,t){return t=zl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function zl(e,t){return e=Dt(22,e,null,t),e.lanes=0,e}function Nu(e,t,a){return Fa(t,e.child,null,a),e=_u(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Nh(e,t,a){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),$c(e.return,t,a)}function ju(e,t,a,i,u,g){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:a,tailMode:u,treeForkCount:g}:(b.isBackwards=t,b.rendering=null,b.renderingStartTime=0,b.last=i,b.tail=a,b.tailMode=u,b.treeForkCount=g)}function jh(e,t,a){var i=t.pendingProps,u=i.revealOrder,g=i.tail;i=i.children;var b=Je.current,S=(b&2)!==0;if(S?(b=b&1|2,t.flags|=128):b&=1,se(Je,b),ht(e,t,i,a),i=Me?Cr:0,!S&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Nh(e,a,t);else if(e.tag===19)Nh(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(a=t.child,u=null;a!==null;)e=a.alternate,e!==null&&pl(e)===null&&(u=a),a=a.sibling;a=u,a===null?(u=t.child,t.child=null):(u=a.sibling,a.sibling=null),ju(t,!1,u,a,g,i);break;case"backwards":case"unstable_legacy-backwards":for(a=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&pl(e)===null){t.child=u;break}e=u.sibling,u.sibling=a,a=u,u=e}ju(t,!0,a,null,g,i);break;case"together":ju(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function On(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),da|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Cs(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,a=zn(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=zn(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function wu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ol(e)))}function Gb(e,t,a){switch(t.tag){case 3:oe(t,t.stateNode.containerInfo),aa(t,et,e.memoizedState.cache),qa();break;case 27:case 5:we(t);break;case 4:oe(t,t.stateNode.containerInfo);break;case 10:aa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Kc(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(la(t),t.flags|=128,null):(a&t.child.childLanes)!==0?_h(e,t,a):(la(t),e=On(e,t,a),e!==null?e.sibling:null);la(t);break;case 19:var u=(e.flags&128)!==0;if(i=(a&t.childLanes)!==0,i||(Cs(e,t,a,!1),i=(a&t.childLanes)!==0),u){if(i)return jh(e,t,a);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),se(Je,Je.current),i)break;return null;case 22:return t.lanes=0,mh(e,t,a,t.pendingProps);case 24:aa(t,et,e.memoizedState.cache)}return On(e,t,a)}function wh(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)nt=!0;else{if(!wu(e,a)&&(t.flags&128)===0)return nt=!1,Gb(e,t,a);nt=(e.flags&131072)!==0}else nt=!1,Me&&(t.flags&1048576)!==0&&ng(t,Cr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=Za(t.elementType),t.type=e,typeof e=="function")Ec(e)?(i=Ia(e,i),t.tag=1,t=bh(null,t,e,i,a)):(t.tag=0,t=xu(null,t,e,i,a));else{if(e!=null){var u=e.$$typeof;if(u===k){t.tag=11,t=fh(null,t,e,i,a);break e}else if(u===V){t.tag=14,t=gh(null,t,e,i,a);break e}}throw t=C(e)||e,Error(o(306,t,""))}}return t;case 0:return xu(e,t,t.type,t.pendingProps,a);case 1:return i=t.type,u=Ia(i,t.pendingProps),bh(e,t,i,u,a);case 3:e:{if(oe(t,t.stateNode.containerInfo),e===null)throw Error(o(387));i=t.pendingProps;var g=t.memoizedState;u=g.element,Gc(e,t),Lr(t,i,null,a);var b=t.memoizedState;if(i=b.cache,aa(t,et,i),i!==g.cache&&Hc(t,[et],a,!0),Or(),i=b.element,g.isDehydrated)if(g={element:i,isDehydrated:!1,cache:b.cache},t.updateQueue.baseState=g,t.memoizedState=g,t.flags&256){t=vh(e,t,i,a);break e}else if(i!==u){u=qt(Error(o(424)),t),zr(u),t=vh(e,t,i,a);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ge=Qt(e.firstChild),ft=t,Me=!0,ta=null,Xt=!0,a=mg(t,null,i,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(qa(),i===u){t=On(e,t,a);break e}ht(e,t,i,a)}t=t.child}return t;case 26:return Cl(e,t),e===null?(a=Lm(t.type,null,t.pendingProps,null))?t.memoizedState=a:Me||(a=t.type,e=t.pendingProps,i=Gl(be.current).createElement(a),i[it]=t,i[pt]=e,mt(i,a,e),Pe(i),t.stateNode=i):t.memoizedState=Lm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return we(t),e===null&&Me&&(i=t.stateNode=Mm(t.type,t.pendingProps,be.current),ft=t,Xt=!0,u=Ge,pa(t.type)?(ad=u,Ge=Qt(i.firstChild)):Ge=u),ht(e,t,t.pendingProps.children,a),Cl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Me&&((u=i=Ge)&&(i=vv(i,t.type,t.pendingProps,Xt),i!==null?(t.stateNode=i,ft=t,Ge=Qt(i.firstChild),Xt=!1,u=!0):u=!1),u||na(t)),we(t),u=t.type,g=t.pendingProps,b=e!==null?e.memoizedProps:null,i=g.children,Wu(u,g)?i=null:b!==null&&Wu(u,b)&&(t.flags|=32),t.memoizedState!==null&&(u=Jc(e,t,Lb,null,null,a),ti._currentValue=u),Cl(e,t),ht(e,t,i,a),t.child;case 6:return e===null&&Me&&((e=a=Ge)&&(a=_v(a,t.pendingProps,Xt),a!==null?(t.stateNode=a,ft=t,Ge=null,e=!0):e=!1),e||na(t)),null;case 13:return _h(e,t,a);case 4:return oe(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Fa(t,null,i,a):ht(e,t,i,a),t.child;case 11:return fh(e,t,t.type,t.pendingProps,a);case 7:return ht(e,t,t.pendingProps,a),t.child;case 8:return ht(e,t,t.pendingProps.children,a),t.child;case 12:return ht(e,t,t.pendingProps.children,a),t.child;case 10:return i=t.pendingProps,aa(t,t.type,i.value),ht(e,t,i.children,a),t.child;case 9:return u=t.type._context,i=t.pendingProps.children,Ga(t),u=gt(u),i=i(u),t.flags|=1,ht(e,t,i,a),t.child;case 14:return gh(e,t,t.type,t.pendingProps,a);case 15:return hh(e,t,t.type,t.pendingProps,a);case 19:return jh(e,t,a);case 31:return Yb(e,t,a);case 22:return mh(e,t,a,t.pendingProps);case 24:return Ga(t),i=gt(et),e===null?(u=Vc(),u===null&&(u=Ye,g=Uc(),u.pooledCache=g,g.refCount++,g!==null&&(u.pooledCacheLanes|=a),u=g),t.memoizedState={parent:i,cache:u},Yc(t),aa(t,et,u)):((e.lanes&a)!==0&&(Gc(e,t),Lr(t,null,null,a),Or()),u=e.memoizedState,g=t.memoizedState,u.parent!==i?(u={parent:i,cache:i},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),aa(t,et,i)):(i=g.cache,aa(t,et,i),i!==u.cache&&Hc(t,[et],a,!0))),ht(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Ln(e){e.flags|=4}function Su(e,t,a,i,u){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(Jh())e.flags|=8192;else throw Qa=fl,qc}else e.flags&=-16777217}function Sh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Bm(t))if(Jh())e.flags|=8192;else throw Qa=fl,qc}function El(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Li():536870912,e.lanes|=t,Us|=t)}function Vr(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,i=0;if(t)for(var u=e.child;u!==null;)a|=u.lanes|u.childLanes,i|=u.subtreeFlags&65011712,i|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)a|=u.lanes|u.childLanes,i|=u.subtreeFlags,i|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=i,e.childLanes=a,t}function Xb(e,t,a){var i=t.pendingProps;switch(Dc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return Xe(t),null;case 3:return a=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Tn(et),fe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ks(t)?Ln(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Lc())),Xe(t),null;case 26:var u=t.type,g=t.memoizedState;return e===null?(Ln(t),g!==null?(Xe(t),Sh(t,g)):(Xe(t),Su(t,u,null,i,a))):g?g!==e.memoizedState?(Ln(t),Xe(t),Sh(t,g)):(Xe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&Ln(t),Xe(t),Su(t,u,e,i,a)),null;case 27:if(Ne(t),a=be.current,u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Ln(t);else{if(!i){if(t.stateNode===null)throw Error(o(166));return Xe(t),null}e=le.current,ks(t)?sg(t):(e=Mm(u,i,a),t.stateNode=e,Ln(t))}return Xe(t),null;case 5:if(Ne(t),u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Ln(t);else{if(!i){if(t.stateNode===null)throw Error(o(166));return Xe(t),null}if(g=le.current,ks(t))sg(t);else{var b=Gl(be.current);switch(g){case 1:g=b.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:g=b.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":g=b.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":g=b.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":g=b.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof i.is=="string"?b.createElement("select",{is:i.is}):b.createElement("select"),i.multiple?g.multiple=!0:i.size&&(g.size=i.size);break;default:g=typeof i.is=="string"?b.createElement(u,{is:i.is}):b.createElement(u)}}g[it]=t,g[pt]=i;e:for(b=t.child;b!==null;){if(b.tag===5||b.tag===6)g.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===t)break e;for(;b.sibling===null;){if(b.return===null||b.return===t)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}t.stateNode=g;e:switch(mt(g,u,i),u){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Ln(t)}}return Xe(t),Su(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Ln(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(o(166));if(e=be.current,ks(t)){if(e=t.stateNode,a=t.memoizedProps,i=null,u=ft,u!==null)switch(u.tag){case 27:case 5:i=u.memoizedProps}e[it]=t,e=!!(e.nodeValue===a||i!==null&&i.suppressHydrationWarning===!0||_m(e.nodeValue,a)),e||na(t,!0)}else e=Gl(e).createTextNode(i),e[it]=t,t.stateNode=e}return Xe(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(i=ks(t),a!==null){if(e===null){if(!i)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[it]=t}else qa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Xe(t),e=!1}else a=Lc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(Lt(t),t):(Lt(t),null);if((t.flags&128)!==0)throw Error(o(558))}return Xe(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=ks(t),i!==null&&i.dehydrated!==null){if(e===null){if(!u)throw Error(o(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));u[it]=t}else qa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Xe(t),u=!1}else u=Lc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return t.flags&256?(Lt(t),t):(Lt(t),null)}return Lt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=i!==null,e=e!==null&&e.memoizedState!==null,a&&(i=t.child,u=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(u=i.alternate.memoizedState.cachePool.pool),g=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(g=i.memoizedState.cachePool.pool),g!==u&&(i.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),El(t,t.updateQueue),Xe(t),null);case 4:return fe(),e===null&&Qu(t.stateNode.containerInfo),Xe(t),null;case 10:return Tn(t.type),Xe(t),null;case 19:if(W(Je),i=t.memoizedState,i===null)return Xe(t),null;if(u=(t.flags&128)!==0,g=i.rendering,g===null)if(u)Vr(i,!1);else{if(Ie!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=pl(e),g!==null){for(t.flags|=128,Vr(i,!1),e=g.updateQueue,t.updateQueue=e,El(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Pf(a,e),a=a.sibling;return se(Je,Je.current&1|2),Me&&En(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&dt()>Ol&&(t.flags|=128,u=!0,Vr(i,!1),t.lanes=4194304)}else{if(!u)if(e=pl(g),e!==null){if(t.flags|=128,u=!0,e=e.updateQueue,t.updateQueue=e,El(t,e),Vr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!g.alternate&&!Me)return Xe(t),null}else 2*dt()-i.renderingStartTime>Ol&&a!==536870912&&(t.flags|=128,u=!0,Vr(i,!1),t.lanes=4194304);i.isBackwards?(g.sibling=t.child,t.child=g):(e=i.last,e!==null?e.sibling=g:t.child=g,i.last=g)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=dt(),e.sibling=null,a=Je.current,se(Je,u?a&1|2:a&1),Me&&En(t,i.treeForkCount),e):(Xe(t),null);case 22:case 23:return Lt(t),Fc(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(a&536870912)!==0&&(t.flags&128)===0&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),a=t.updateQueue,a!==null&&El(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==a&&(t.flags|=2048),e!==null&&W(Xa),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Tn(et),Xe(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function Zb(e,t){switch(Dc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Tn(et),fe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ne(t),null;case 31:if(t.memoizedState!==null){if(Lt(t),t.alternate===null)throw Error(o(340));qa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Lt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));qa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return W(Je),null;case 4:return fe(),null;case 10:return Tn(t.type),null;case 22:case 23:return Lt(t),Fc(),e!==null&&W(Xa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Tn(et),null;case 25:return null;default:return null}}function kh(e,t){switch(Dc(t),t.tag){case 3:Tn(et),fe();break;case 26:case 27:case 5:Ne(t);break;case 4:fe();break;case 31:t.memoizedState!==null&&Lt(t);break;case 13:Lt(t);break;case 19:W(Je);break;case 10:Tn(t.type);break;case 22:case 23:Lt(t),Fc(),e!==null&&W(Xa);break;case 24:Tn(et)}}function qr(e,t){try{var a=t.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var u=i.next;a=u;do{if((a.tag&e)===e){i=void 0;var g=a.create,b=a.inst;i=g(),b.destroy=i}a=a.next}while(a!==u)}}catch(S){Ue(t,t.return,S)}}function ca(e,t,a){try{var i=t.updateQueue,u=i!==null?i.lastEffect:null;if(u!==null){var g=u.next;i=g;do{if((i.tag&e)===e){var b=i.inst,S=b.destroy;if(S!==void 0){b.destroy=void 0,u=t;var $=a,I=S;try{I()}catch(ne){Ue(u,$,ne)}}}i=i.next}while(i!==g)}}catch(ne){Ue(t,t.return,ne)}}function Ch(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{xg(t,a)}catch(i){Ue(e,e.return,i)}}}function zh(e,t,a){a.props=Ia(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(i){Ue(e,t,i)}}function Yr(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof a=="function"?e.refCleanup=a(i):a.current=i}}catch(u){Ue(e,t,u)}}function fn(e,t){var a=e.ref,i=e.refCleanup;if(a!==null)if(typeof i=="function")try{i()}catch(u){Ue(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(u){Ue(e,t,u)}else a.current=null}function Eh(e){var t=e.type,a=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&i.focus();break e;case"img":a.src?i.src=a.src:a.srcSet&&(i.srcset=a.srcSet)}}catch(u){Ue(e,e.return,u)}}function ku(e,t,a){try{var i=e.stateNode;hv(i,e.type,a,t),i[pt]=t}catch(u){Ue(e,e.return,u)}}function Ah(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&pa(e.type)||e.tag===4}function Cu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ah(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&pa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zu(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=kn));else if(i!==4&&(i===27&&pa(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(zu(e,t,a),e=e.sibling;e!==null;)zu(e,t,a),e=e.sibling}function Al(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(i!==4&&(i===27&&pa(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Al(e,t,a),e=e.sibling;e!==null;)Al(e,t,a),e=e.sibling}function Th(e){var t=e.stateNode,a=e.memoizedProps;try{for(var i=e.type,u=t.attributes;u.length;)t.removeAttributeNode(u[0]);mt(t,i,a),t[it]=e,t[pt]=a}catch(g){Ue(e,e.return,g)}}var Rn=!1,at=!1,Eu=!1,Mh=typeof WeakSet=="function"?WeakSet:Set,ct=null;function Qb(e,t){if(e=e.containerInfo,Iu=Jl,e=Gf(e),Nc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var i=a.getSelection&&a.getSelection();if(i&&i.rangeCount!==0){a=i.anchorNode;var u=i.anchorOffset,g=i.focusNode;i=i.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var b=0,S=-1,$=-1,I=0,ne=0,re=e,J=null;t:for(;;){for(var ee;re!==a||u!==0&&re.nodeType!==3||(S=b+u),re!==g||i!==0&&re.nodeType!==3||($=b+i),re.nodeType===3&&(b+=re.nodeValue.length),(ee=re.firstChild)!==null;)J=re,re=ee;for(;;){if(re===e)break t;if(J===a&&++I===u&&(S=b),J===g&&++ne===i&&($=b),(ee=re.nextSibling)!==null)break;re=J,J=re.parentNode}re=ee}a=S===-1||$===-1?null:{start:S,end:$}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ju={focusedElem:e,selectionRange:a},Jl=!1,ct=t;ct!==null;)if(t=ct,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ct=e;else for(;ct!==null;){switch(t=ct,g=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)u=e[a],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,a=t,u=g.memoizedProps,g=g.memoizedState,i=a.stateNode;try{var ue=Ia(a.type,u);e=i.getSnapshotBeforeUpdate(ue,g),i.__reactInternalSnapshotBeforeUpdate=e}catch(ve){Ue(a,a.return,ve)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)ed(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ed(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,ct=e;break}ct=t.return}}function Dh(e,t,a){var i=a.flags;switch(a.tag){case 0:case 11:case 15:Hn(e,a),i&4&&qr(5,a);break;case 1:if(Hn(e,a),i&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(b){Ue(a,a.return,b)}else{var u=Ia(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(b){Ue(a,a.return,b)}}i&64&&Ch(a),i&512&&Yr(a,a.return);break;case 3:if(Hn(e,a),i&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{xg(e,t)}catch(b){Ue(a,a.return,b)}}break;case 27:t===null&&i&4&&Th(a);case 26:case 5:Hn(e,a),t===null&&i&4&&Eh(a),i&512&&Yr(a,a.return);break;case 12:Hn(e,a);break;case 31:Hn(e,a),i&4&&Rh(e,a);break;case 13:Hn(e,a),i&4&&$h(e,a),i&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=nv.bind(null,a),Nv(e,a))));break;case 22:if(i=a.memoizedState!==null||Rn,!i){t=t!==null&&t.memoizedState!==null||at,u=Rn;var g=at;Rn=i,(at=t)&&!g?Un(e,a,(a.subtreeFlags&8772)!==0):Hn(e,a),Rn=u,at=g}break;case 30:break;default:Hn(e,a)}}function Oh(e){var t=e.alternate;t!==null&&(e.alternate=null,Oh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&mr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ze=null,kt=!1;function $n(e,t,a){for(a=a.child;a!==null;)Lh(e,t,a),a=a.sibling}function Lh(e,t,a){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(Ta,a)}catch{}switch(a.tag){case 26:at||fn(a,t),$n(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:at||fn(a,t);var i=Ze,u=kt;pa(a.type)&&(Ze=a.stateNode,kt=!1),$n(e,t,a),Wr(a.stateNode),Ze=i,kt=u;break;case 5:at||fn(a,t);case 6:if(i=Ze,u=kt,Ze=null,$n(e,t,a),Ze=i,kt=u,Ze!==null)if(kt)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(a.stateNode)}catch(g){Ue(a,t,g)}else try{Ze.removeChild(a.stateNode)}catch(g){Ue(a,t,g)}break;case 18:Ze!==null&&(kt?(e=Ze,Cm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Qs(e)):Cm(Ze,a.stateNode));break;case 4:i=Ze,u=kt,Ze=a.stateNode.containerInfo,kt=!0,$n(e,t,a),Ze=i,kt=u;break;case 0:case 11:case 14:case 15:ca(2,a,t),at||ca(4,a,t),$n(e,t,a);break;case 1:at||(fn(a,t),i=a.stateNode,typeof i.componentWillUnmount=="function"&&zh(a,t,i)),$n(e,t,a);break;case 21:$n(e,t,a);break;case 22:at=(i=at)||a.memoizedState!==null,$n(e,t,a),at=i;break;default:$n(e,t,a)}}function Rh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Qs(e)}catch(a){Ue(t,t.return,a)}}}function $h(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Qs(e)}catch(a){Ue(t,t.return,a)}}function Fb(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Mh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Mh),t;default:throw Error(o(435,e.tag))}}function Tl(e,t){var a=Fb(e);t.forEach(function(i){if(!a.has(i)){a.add(i);var u=av.bind(null,e,i);i.then(u,u)}})}function Ct(e,t){var a=t.deletions;if(a!==null)for(var i=0;i<a.length;i++){var u=a[i],g=e,b=t,S=b;e:for(;S!==null;){switch(S.tag){case 27:if(pa(S.type)){Ze=S.stateNode,kt=!1;break e}break;case 5:Ze=S.stateNode,kt=!1;break e;case 3:case 4:Ze=S.stateNode.containerInfo,kt=!0;break e}S=S.return}if(Ze===null)throw Error(o(160));Lh(g,b,u),Ze=null,kt=!1,g=u.alternate,g!==null&&(g.return=null),u.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Hh(t,e),t=t.sibling}var Pt=null;function Hh(e,t){var a=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ct(t,e),zt(e),i&4&&(ca(3,e,e.return),qr(3,e),ca(5,e,e.return));break;case 1:Ct(t,e),zt(e),i&512&&(at||a===null||fn(a,a.return)),i&64&&Rn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?i:a.concat(i))));break;case 26:var u=Pt;if(Ct(t,e),zt(e),i&512&&(at||a===null||fn(a,a.return)),i&4){var g=a!==null?a.memoizedState:null;if(i=e.memoizedState,a===null)if(i===null)if(e.stateNode===null){e:{i=e.type,a=e.memoizedProps,u=u.ownerDocument||u;t:switch(i){case"title":g=u.getElementsByTagName("title")[0],(!g||g[Oa]||g[it]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=u.createElement(i),u.head.insertBefore(g,u.querySelector("head > title"))),mt(g,i,a),g[it]=e,Pe(g),i=g;break e;case"link":var b=Hm("link","href",u).get(i+(a.href||""));if(b){for(var S=0;S<b.length;S++)if(g=b[S],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(S,1);break t}}g=u.createElement(i),mt(g,i,a),u.head.appendChild(g);break;case"meta":if(b=Hm("meta","content",u).get(i+(a.content||""))){for(S=0;S<b.length;S++)if(g=b[S],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(S,1);break t}}g=u.createElement(i),mt(g,i,a),u.head.appendChild(g);break;default:throw Error(o(468,i))}g[it]=e,Pe(g),i=g}e.stateNode=i}else Um(u,e.type,e.stateNode);else e.stateNode=$m(u,i,e.memoizedProps);else g!==i?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,i===null?Um(u,e.type,e.stateNode):$m(u,i,e.memoizedProps)):i===null&&e.stateNode!==null&&ku(e,e.memoizedProps,a.memoizedProps)}break;case 27:Ct(t,e),zt(e),i&512&&(at||a===null||fn(a,a.return)),a!==null&&i&4&&ku(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Ct(t,e),zt(e),i&512&&(at||a===null||fn(a,a.return)),e.flags&32){u=e.stateNode;try{ps(u,"")}catch(ue){Ue(e,e.return,ue)}}i&4&&e.stateNode!=null&&(u=e.memoizedProps,ku(e,u,a!==null?a.memoizedProps:u)),i&1024&&(Eu=!0);break;case 6:if(Ct(t,e),zt(e),i&4){if(e.stateNode===null)throw Error(o(162));i=e.memoizedProps,a=e.stateNode;try{a.nodeValue=i}catch(ue){Ue(e,e.return,ue)}}break;case 3:if(Ql=null,u=Pt,Pt=Xl(t.containerInfo),Ct(t,e),Pt=u,zt(e),i&4&&a!==null&&a.memoizedState.isDehydrated)try{Qs(t.containerInfo)}catch(ue){Ue(e,e.return,ue)}Eu&&(Eu=!1,Uh(e));break;case 4:i=Pt,Pt=Xl(e.stateNode.containerInfo),Ct(t,e),zt(e),Pt=i;break;case 12:Ct(t,e),zt(e);break;case 31:Ct(t,e),zt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Tl(e,i)));break;case 13:Ct(t,e),zt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Dl=dt()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Tl(e,i)));break;case 22:u=e.memoizedState!==null;var $=a!==null&&a.memoizedState!==null,I=Rn,ne=at;if(Rn=I||u,at=ne||$,Ct(t,e),at=ne,Rn=I,zt(e),i&8192)e:for(t=e.stateNode,t._visibility=u?t._visibility&-2:t._visibility|1,u&&(a===null||$||Rn||at||Ja(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){$=a=t;try{if(g=$.stateNode,u)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{S=$.stateNode;var re=$.memoizedProps.style,J=re!=null&&re.hasOwnProperty("display")?re.display:null;S.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ue){Ue($,$.return,ue)}}}else if(t.tag===6){if(a===null){$=t;try{$.stateNode.nodeValue=u?"":$.memoizedProps}catch(ue){Ue($,$.return,ue)}}}else if(t.tag===18){if(a===null){$=t;try{var ee=$.stateNode;u?zm(ee,!0):zm($.stateNode,!1)}catch(ue){Ue($,$.return,ue)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(a=i.retryQueue,a!==null&&(i.retryQueue=null,Tl(e,a))));break;case 19:Ct(t,e),zt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Tl(e,i)));break;case 30:break;case 21:break;default:Ct(t,e),zt(e)}}function zt(e){var t=e.flags;if(t&2){try{for(var a,i=e.return;i!==null;){if(Ah(i)){a=i;break}i=i.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var u=a.stateNode,g=Cu(e);Al(e,g,u);break;case 5:var b=a.stateNode;a.flags&32&&(ps(b,""),a.flags&=-33);var S=Cu(e);Al(e,S,b);break;case 3:case 4:var $=a.stateNode.containerInfo,I=Cu(e);zu(e,I,$);break;default:throw Error(o(161))}}catch(ne){Ue(e,e.return,ne)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Uh(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Uh(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Hn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Dh(e,t.alternate,t),t=t.sibling}function Ja(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ca(4,t,t.return),Ja(t);break;case 1:fn(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&zh(t,t.return,a),Ja(t);break;case 27:Wr(t.stateNode);case 26:case 5:fn(t,t.return),Ja(t);break;case 22:t.memoizedState===null&&Ja(t);break;case 30:Ja(t);break;default:Ja(t)}e=e.sibling}}function Un(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,u=e,g=t,b=g.flags;switch(g.tag){case 0:case 11:case 15:Un(u,g,a),qr(4,g);break;case 1:if(Un(u,g,a),i=g,u=i.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(I){Ue(i,i.return,I)}if(i=g,u=i.updateQueue,u!==null){var S=i.stateNode;try{var $=u.shared.hiddenCallbacks;if($!==null)for(u.shared.hiddenCallbacks=null,u=0;u<$.length;u++)pg($[u],S)}catch(I){Ue(i,i.return,I)}}a&&b&64&&Ch(g),Yr(g,g.return);break;case 27:Th(g);case 26:case 5:Un(u,g,a),a&&i===null&&b&4&&Eh(g),Yr(g,g.return);break;case 12:Un(u,g,a);break;case 31:Un(u,g,a),a&&b&4&&Rh(u,g);break;case 13:Un(u,g,a),a&&b&4&&$h(u,g);break;case 22:g.memoizedState===null&&Un(u,g,a),Yr(g,g.return);break;case 30:break;default:Un(u,g,a)}t=t.sibling}}function Au(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Er(a))}function Tu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Er(e))}function en(e,t,a,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Bh(e,t,a,i),t=t.sibling}function Bh(e,t,a,i){var u=t.flags;switch(t.tag){case 0:case 11:case 15:en(e,t,a,i),u&2048&&qr(9,t);break;case 1:en(e,t,a,i);break;case 3:en(e,t,a,i),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Er(e)));break;case 12:if(u&2048){en(e,t,a,i),e=t.stateNode;try{var g=t.memoizedProps,b=g.id,S=g.onPostCommit;typeof S=="function"&&S(b,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch($){Ue(t,t.return,$)}}else en(e,t,a,i);break;case 31:en(e,t,a,i);break;case 13:en(e,t,a,i);break;case 23:break;case 22:g=t.stateNode,b=t.alternate,t.memoizedState!==null?g._visibility&2?en(e,t,a,i):Gr(e,t):g._visibility&2?en(e,t,a,i):(g._visibility|=2,Rs(e,t,a,i,(t.subtreeFlags&10256)!==0||!1)),u&2048&&Au(b,t);break;case 24:en(e,t,a,i),u&2048&&Tu(t.alternate,t);break;default:en(e,t,a,i)}}function Rs(e,t,a,i,u){for(u=u&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var g=e,b=t,S=a,$=i,I=b.flags;switch(b.tag){case 0:case 11:case 15:Rs(g,b,S,$,u),qr(8,b);break;case 23:break;case 22:var ne=b.stateNode;b.memoizedState!==null?ne._visibility&2?Rs(g,b,S,$,u):Gr(g,b):(ne._visibility|=2,Rs(g,b,S,$,u)),u&&I&2048&&Au(b.alternate,b);break;case 24:Rs(g,b,S,$,u),u&&I&2048&&Tu(b.alternate,b);break;default:Rs(g,b,S,$,u)}t=t.sibling}}function Gr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,i=t,u=i.flags;switch(i.tag){case 22:Gr(a,i),u&2048&&Au(i.alternate,i);break;case 24:Gr(a,i),u&2048&&Tu(i.alternate,i);break;default:Gr(a,i)}t=t.sibling}}var Xr=8192;function $s(e,t,a){if(e.subtreeFlags&Xr)for(e=e.child;e!==null;)Vh(e,t,a),e=e.sibling}function Vh(e,t,a){switch(e.tag){case 26:$s(e,t,a),e.flags&Xr&&e.memoizedState!==null&&Ov(a,Pt,e.memoizedState,e.memoizedProps);break;case 5:$s(e,t,a);break;case 3:case 4:var i=Pt;Pt=Xl(e.stateNode.containerInfo),$s(e,t,a),Pt=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=Xr,Xr=16777216,$s(e,t,a),Xr=i):$s(e,t,a));break;default:$s(e,t,a)}}function qh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Zr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];ct=i,Gh(i,e)}qh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Yh(e),e=e.sibling}function Yh(e){switch(e.tag){case 0:case 11:case 15:Zr(e),e.flags&2048&&ca(9,e,e.return);break;case 3:Zr(e);break;case 12:Zr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ml(e)):Zr(e);break;default:Zr(e)}}function Ml(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];ct=i,Gh(i,e)}qh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ca(8,t,t.return),Ml(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Ml(t));break;default:Ml(t)}e=e.sibling}}function Gh(e,t){for(;ct!==null;){var a=ct;switch(a.tag){case 0:case 11:case 15:ca(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var i=a.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Er(a.memoizedState.cache)}if(i=a.child,i!==null)i.return=a,ct=i;else e:for(a=e;ct!==null;){i=ct;var u=i.sibling,g=i.return;if(Oh(i),i===a){ct=null;break e}if(u!==null){u.return=g,ct=u;break e}ct=g}}}var Kb={getCacheForType:function(e){var t=gt(et),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return gt(et).controller.signal}},Ib=typeof WeakMap=="function"?WeakMap:Map,$e=0,Ye=null,ze=null,Ae=0,He=0,Rt=null,ua=!1,Hs=!1,Mu=!1,Bn=0,Ie=0,da=0,Wa=0,Du=0,$t=0,Us=0,Qr=null,Et=null,Ou=!1,Dl=0,Xh=0,Ol=1/0,Ll=null,fa=null,lt=0,ga=null,Bs=null,Vn=0,Lu=0,Ru=null,Zh=null,Fr=0,$u=null;function Ht(){return($e&2)!==0&&Ae!==0?Ae&-Ae:j.T!==null?Yu():Ui()}function Qh(){if($t===0)if((Ae&536870912)===0||Me){var e=cs;cs<<=1,(cs&3932160)===0&&(cs=262144),$t=e}else $t=536870912;return e=Ot.current,e!==null&&(e.flags|=32),$t}function At(e,t,a){(e===Ye&&(He===2||He===9)||e.cancelPendingCommit!==null)&&(Vs(e,0),ha(e,Ae,$t,!1)),Da(e,a),(($e&2)===0||e!==Ye)&&(e===Ye&&(($e&2)===0&&(Wa|=a),Ie===4&&ha(e,Ae,$t,!1)),gn(e))}function Fh(e,t,a){if(($e&6)!==0)throw Error(o(327));var i=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Ma(e,t),u=i?Pb(e,t):Uu(e,t,!0),g=i;do{if(u===0){Hs&&!i&&ha(e,t,0,!1);break}else{if(a=e.current.alternate,g&&!Jb(a)){u=Uu(e,t,!1),g=!1;continue}if(u===2){if(g=t,e.errorRecoveryDisabledLanes&g)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){t=b;e:{var S=e;u=Qr;var $=S.current.memoizedState.isDehydrated;if($&&(Vs(S,b).flags|=256),b=Uu(S,b,!1),b!==2){if(Mu&&!$){S.errorRecoveryDisabledLanes|=g,Wa|=g,u=4;break e}g=Et,Et=u,g!==null&&(Et===null?Et=g:Et.push.apply(Et,g))}u=b}if(g=!1,u!==2)continue}}if(u===1){Vs(e,0),ha(e,t,0,!0);break}e:{switch(i=e,g=u,g){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:ha(i,t,$t,!ua);break e;case 2:Et=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(u=Dl+300-dt(),10<u)){if(ha(i,t,$t,!ua),ds(i,0,!0)!==0)break e;Vn=t,i.timeoutHandle=Sm(Kh.bind(null,i,a,Et,Ll,Ou,t,$t,Wa,Us,ua,g,"Throttled",-0,0),u);break e}Kh(i,a,Et,Ll,Ou,t,$t,Wa,Us,ua,g,null,-0,0)}}break}while(!0);gn(e)}function Kh(e,t,a,i,u,g,b,S,$,I,ne,re,J,ee){if(e.timeoutHandle=-1,re=t.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:kn},Vh(t,g,re);var ue=(g&62914560)===g?Dl-dt():(g&4194048)===g?Xh-dt():0;if(ue=Lv(re,ue),ue!==null){Vn=g,e.cancelPendingCommit=ue(am.bind(null,e,t,g,a,i,u,b,S,$,ne,re,null,J,ee)),ha(e,g,b,!I);return}}am(e,t,g,a,i,u,b,S,$)}function Jb(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var i=0;i<a.length;i++){var u=a[i],g=u.getSnapshot;u=u.value;try{if(!Mt(g(),u))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ha(e,t,a,i){t&=~Du,t&=~Wa,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var u=t;0<u;){var g=31-yt(u),b=1<<g;i[g]=-1,u&=~b}a!==0&&Ri(e,a,t)}function Rl(){return($e&6)===0?(Kr(0),!1):!0}function Hu(){if(ze!==null){if(He===0)var e=ze.return;else e=ze,An=Ya=null,eu(e),Ts=null,Tr=0,e=ze;for(;e!==null;)kh(e.alternate,e),e=e.return;ze=null}}function Vs(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,xv(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Vn=0,Hu(),Ye=e,ze=a=zn(e.current,null),Ae=t,He=0,Rt=null,ua=!1,Hs=Ma(e,t),Mu=!1,Us=$t=Du=Wa=da=Ie=0,Et=Qr=null,Ou=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var u=31-yt(i),g=1<<u;t|=e[u],i&=~g}return Bn=t,al(),a}function Ih(e,t){Se=null,j.H=Ur,t===As||t===dl?(t=fg(),He=3):t===qc?(t=fg(),He=4):He=t===pu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Rt=t,ze===null&&(Ie=1,Sl(e,qt(t,e.current)))}function Jh(){var e=Ot.current;return e===null?!0:(Ae&4194048)===Ae?Zt===null:(Ae&62914560)===Ae||(Ae&536870912)!==0?e===Zt:!1}function Wh(){var e=j.H;return j.H=Ur,e===null?Ur:e}function Ph(){var e=j.A;return j.A=Kb,e}function $l(){Ie=4,ua||(Ae&4194048)!==Ae&&Ot.current!==null||(Hs=!0),(da&134217727)===0&&(Wa&134217727)===0||Ye===null||ha(Ye,Ae,$t,!1)}function Uu(e,t,a){var i=$e;$e|=2;var u=Wh(),g=Ph();(Ye!==e||Ae!==t)&&(Ll=null,Vs(e,t)),t=!1;var b=Ie;e:do try{if(He!==0&&ze!==null){var S=ze,$=Rt;switch(He){case 8:Hu(),b=6;break e;case 3:case 2:case 9:case 6:Ot.current===null&&(t=!0);var I=He;if(He=0,Rt=null,qs(e,S,$,I),a&&Hs){b=0;break e}break;default:I=He,He=0,Rt=null,qs(e,S,$,I)}}Wb(),b=Ie;break}catch(ne){Ih(e,ne)}while(!0);return t&&e.shellSuspendCounter++,An=Ya=null,$e=i,j.H=u,j.A=g,ze===null&&(Ye=null,Ae=0,al()),b}function Wb(){for(;ze!==null;)em(ze)}function Pb(e,t){var a=$e;$e|=2;var i=Wh(),u=Ph();Ye!==e||Ae!==t?(Ll=null,Ol=dt()+500,Vs(e,t)):Hs=Ma(e,t);e:do try{if(He!==0&&ze!==null){t=ze;var g=Rt;t:switch(He){case 1:He=0,Rt=null,qs(e,t,g,1);break;case 2:case 9:if(ug(g)){He=0,Rt=null,tm(t);break}t=function(){He!==2&&He!==9||Ye!==e||(He=7),gn(e)},g.then(t,t);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:ug(g)?(He=0,Rt=null,tm(t)):(He=0,Rt=null,qs(e,t,g,7));break;case 5:var b=null;switch(ze.tag){case 26:b=ze.memoizedState;case 5:case 27:var S=ze;if(b?Bm(b):S.stateNode.complete){He=0,Rt=null;var $=S.sibling;if($!==null)ze=$;else{var I=S.return;I!==null?(ze=I,Hl(I)):ze=null}break t}}He=0,Rt=null,qs(e,t,g,5);break;case 6:He=0,Rt=null,qs(e,t,g,6);break;case 8:Hu(),Ie=6;break e;default:throw Error(o(462))}}ev();break}catch(ne){Ih(e,ne)}while(!0);return An=Ya=null,j.H=i,j.A=u,$e=a,ze!==null?0:(Ye=null,Ae=0,al(),Ie)}function ev(){for(;ze!==null&&!za();)em(ze)}function em(e){var t=wh(e.alternate,e,Bn);e.memoizedProps=e.pendingProps,t===null?Hl(e):ze=t}function tm(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=yh(a,t,t.pendingProps,t.type,void 0,Ae);break;case 11:t=yh(a,t,t.pendingProps,t.type.render,t.ref,Ae);break;case 5:eu(t);default:kh(a,t),t=ze=Pf(t,Bn),t=wh(a,t,Bn)}e.memoizedProps=e.pendingProps,t===null?Hl(e):ze=t}function qs(e,t,a,i){An=Ya=null,eu(t),Ts=null,Tr=0;var u=t.return;try{if(qb(e,u,t,a,Ae)){Ie=1,Sl(e,qt(a,e.current)),ze=null;return}}catch(g){if(u!==null)throw ze=u,g;Ie=1,Sl(e,qt(a,e.current)),ze=null;return}t.flags&32768?(Me||i===1?e=!0:Hs||(Ae&536870912)!==0?e=!1:(ua=e=!0,(i===2||i===9||i===3||i===6)&&(i=Ot.current,i!==null&&i.tag===13&&(i.flags|=16384))),nm(t,e)):Hl(t)}function Hl(e){var t=e;do{if((t.flags&32768)!==0){nm(t,ua);return}e=t.return;var a=Xb(t.alternate,t,Bn);if(a!==null){ze=a;return}if(t=t.sibling,t!==null){ze=t;return}ze=t=e}while(t!==null);Ie===0&&(Ie=5)}function nm(e,t){do{var a=Zb(e.alternate,e);if(a!==null){a.flags&=32767,ze=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){ze=e;return}ze=e=a}while(e!==null);Ie=6,ze=null}function am(e,t,a,i,u,g,b,S,$){e.cancelPendingCommit=null;do Ul();while(lt!==0);if(($e&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(g=t.lanes|t.childLanes,g|=Cc,ac(e,a,g,b,S,$),e===Ye&&(ze=Ye=null,Ae=0),Bs=t,ga=e,Vn=a,Lu=g,Ru=u,Zh=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,sv(Aa,function(){return om(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=j.T,j.T=null,u=D.p,D.p=2,b=$e,$e|=4;try{Qb(e,t,a)}finally{$e=b,D.p=u,j.T=i}}lt=1,sm(),rm(),im()}}function sm(){if(lt===1){lt=0;var e=ga,t=Bs,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=j.T,j.T=null;var i=D.p;D.p=2;var u=$e;$e|=4;try{Hh(t,e);var g=Ju,b=Gf(e.containerInfo),S=g.focusedElem,$=g.selectionRange;if(b!==S&&S&&S.ownerDocument&&Yf(S.ownerDocument.documentElement,S)){if($!==null&&Nc(S)){var I=$.start,ne=$.end;if(ne===void 0&&(ne=I),"selectionStart"in S)S.selectionStart=I,S.selectionEnd=Math.min(ne,S.value.length);else{var re=S.ownerDocument||document,J=re&&re.defaultView||window;if(J.getSelection){var ee=J.getSelection(),ue=S.textContent.length,ve=Math.min($.start,ue),qe=$.end===void 0?ve:Math.min($.end,ue);!ee.extend&&ve>qe&&(b=qe,qe=ve,ve=b);var Q=qf(S,ve),B=qf(S,qe);if(Q&&B&&(ee.rangeCount!==1||ee.anchorNode!==Q.node||ee.anchorOffset!==Q.offset||ee.focusNode!==B.node||ee.focusOffset!==B.offset)){var K=re.createRange();K.setStart(Q.node,Q.offset),ee.removeAllRanges(),ve>qe?(ee.addRange(K),ee.extend(B.node,B.offset)):(K.setEnd(B.node,B.offset),ee.addRange(K))}}}}for(re=[],ee=S;ee=ee.parentNode;)ee.nodeType===1&&re.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<re.length;S++){var ae=re[S];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Jl=!!Iu,Ju=Iu=null}finally{$e=u,D.p=i,j.T=a}}e.current=t,lt=2}}function rm(){if(lt===2){lt=0;var e=ga,t=Bs,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=j.T,j.T=null;var i=D.p;D.p=2;var u=$e;$e|=4;try{Dh(e,t.alternate,t)}finally{$e=u,D.p=i,j.T=a}}lt=3}}function im(){if(lt===4||lt===3){lt=0,Ea();var e=ga,t=Bs,a=Vn,i=Zh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?lt=5:(lt=0,Bs=ga=null,lm(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(fa=null),hr(a),t=t.stateNode,xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(Ta,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=j.T,u=D.p,D.p=2,j.T=null;try{for(var g=e.onRecoverableError,b=0;b<i.length;b++){var S=i[b];g(S.value,{componentStack:S.stack})}}finally{j.T=t,D.p=u}}(Vn&3)!==0&&Ul(),gn(e),u=e.pendingLanes,(a&261930)!==0&&(u&42)!==0?e===$u?Fr++:(Fr=0,$u=e):Fr=0,Kr(0)}}function lm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Er(t)))}function Ul(){return sm(),rm(),im(),om()}function om(){if(lt!==5)return!1;var e=ga,t=Lu;Lu=0;var a=hr(Vn),i=j.T,u=D.p;try{D.p=32>a?32:a,j.T=null,a=Ru,Ru=null;var g=ga,b=Vn;if(lt=0,Bs=ga=null,Vn=0,($e&6)!==0)throw Error(o(331));var S=$e;if($e|=4,Yh(g.current),Bh(g,g.current,b,a),$e=S,Kr(0,!1),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(Ta,g)}catch{}return!0}finally{D.p=u,j.T=i,lm(e,t)}}function cm(e,t,a){t=qt(a,t),t=mu(e.stateNode,t,2),e=ia(e,t,2),e!==null&&(Da(e,2),gn(e))}function Ue(e,t,a){if(e.tag===3)cm(e,e,a);else for(;t!==null;){if(t.tag===3){cm(t,e,a);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(fa===null||!fa.has(i))){e=qt(a,e),a=uh(2),i=ia(t,a,2),i!==null&&(dh(a,i,t,e),Da(i,2),gn(i));break}}t=t.return}}function Bu(e,t,a){var i=e.pingCache;if(i===null){i=e.pingCache=new Ib;var u=new Set;i.set(t,u)}else u=i.get(t),u===void 0&&(u=new Set,i.set(t,u));u.has(a)||(Mu=!0,u.add(a),e=tv.bind(null,e,t,a),t.then(e,e))}function tv(e,t,a){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ye===e&&(Ae&a)===a&&(Ie===4||Ie===3&&(Ae&62914560)===Ae&&300>dt()-Dl?($e&2)===0&&Vs(e,0):Du|=a,Us===Ae&&(Us=0)),gn(e)}function um(e,t){t===0&&(t=Li()),e=Ba(e,t),e!==null&&(Da(e,t),gn(e))}function nv(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),um(e,a)}function av(e,t){var a=0;switch(e.tag){case 31:case 13:var i=e.stateNode,u=e.memoizedState;u!==null&&(a=u.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(o(314))}i!==null&&i.delete(t),um(e,a)}function sv(e,t){return It(e,t)}var Bl=null,Ys=null,Vu=!1,Vl=!1,qu=!1,ma=0;function gn(e){e!==Ys&&e.next===null&&(Ys===null?Bl=Ys=e:Ys=Ys.next=e),Vl=!0,Vu||(Vu=!0,iv())}function Kr(e,t){if(!qu&&Vl){qu=!0;do for(var a=!1,i=Bl;i!==null;){if(e!==0){var u=i.pendingLanes;if(u===0)var g=0;else{var b=i.suspendedLanes,S=i.pingedLanes;g=(1<<31-yt(42|e)+1)-1,g&=u&~(b&~S),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,hm(i,g))}else g=Ae,g=ds(i,i===Ye?g:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(g&3)===0||Ma(i,g)||(a=!0,hm(i,g));i=i.next}while(a);qu=!1}}function rv(){dm()}function dm(){Vl=Vu=!1;var e=0;ma!==0&&pv()&&(e=ma);for(var t=dt(),a=null,i=Bl;i!==null;){var u=i.next,g=fm(i,t);g===0?(i.next=null,a===null?Bl=u:a.next=u,u===null&&(Ys=a)):(a=i,(e!==0||(g&3)!==0)&&(Vl=!0)),i=u}lt!==0&&lt!==5||Kr(e),ma!==0&&(ma=0)}function fm(e,t){for(var a=e.suspendedLanes,i=e.pingedLanes,u=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var b=31-yt(g),S=1<<b,$=u[b];$===-1?((S&a)===0||(S&i)!==0)&&(u[b]=nc(S,t)):$<=t&&(e.expiredLanes|=S),g&=~S}if(t=Ye,a=Ae,a=ds(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,a===0||e===t&&(He===2||He===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&vn(i),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Ma(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(i!==null&&vn(i),hr(a)){case 2:case 8:a=Qn;break;case 32:a=Aa;break;case 268435456:a=ls;break;default:a=Aa}return i=gm.bind(null,e),a=It(a,i),e.callbackPriority=t,e.callbackNode=a,t}return i!==null&&i!==null&&vn(i),e.callbackPriority=2,e.callbackNode=null,2}function gm(e,t){if(lt!==0&&lt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Ul()&&e.callbackNode!==a)return null;var i=Ae;return i=ds(e,e===Ye?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(Fh(e,i,t),fm(e,dt()),e.callbackNode!=null&&e.callbackNode===a?gm.bind(null,e):null)}function hm(e,t){if(Ul())return null;Fh(e,t,!0)}function iv(){yv(function(){($e&6)!==0?It(_n,rv):dm()})}function Yu(){if(ma===0){var e=zs;e===0&&(e=os,os<<=1,(os&261888)===0&&(os=256)),ma=e}return ma}function mm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ki(""+e)}function pm(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function lv(e,t,a,i,u){if(t==="submit"&&a&&a.stateNode===u){var g=mm((u[pt]||null).action),b=i.submitter;b&&(t=(t=b[pt]||null)?mm(t.formAction):b.getAttribute("formAction"),t!==null&&(g=t,b=null));var S=new Pi("action","action",null,i,u);e.push({event:S,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(ma!==0){var $=b?pm(u,b):new FormData(u);cu(a,{pending:!0,data:$,method:u.method,action:g},null,$)}}else typeof g=="function"&&(S.preventDefault(),$=b?pm(u,b):new FormData(u),cu(a,{pending:!0,data:$,method:u.method,action:g},g,$))},currentTarget:u}]})}}for(var Gu=0;Gu<kc.length;Gu++){var Xu=kc[Gu],ov=Xu.toLowerCase(),cv=Xu[0].toUpperCase()+Xu.slice(1);Wt(ov,"on"+cv)}Wt(Qf,"onAnimationEnd"),Wt(Ff,"onAnimationIteration"),Wt(Kf,"onAnimationStart"),Wt("dblclick","onDoubleClick"),Wt("focusin","onFocus"),Wt("focusout","onBlur"),Wt(Sb,"onTransitionRun"),Wt(kb,"onTransitionStart"),Wt(Cb,"onTransitionCancel"),Wt(If,"onTransitionEnd"),Wn("onMouseEnter",["mouseout","mouseover"]),Wn("onMouseLeave",["mouseout","mouseover"]),Wn("onPointerEnter",["pointerout","pointerover"]),Wn("onPointerLeave",["pointerout","pointerover"]),wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wn("onBeforeInput",["compositionend","keypress","textInput","paste"]),wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ir));function xm(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var i=e[a],u=i.event;i=i.listeners;e:{var g=void 0;if(t)for(var b=i.length-1;0<=b;b--){var S=i[b],$=S.instance,I=S.currentTarget;if(S=S.listener,$!==g&&u.isPropagationStopped())break e;g=S,u.currentTarget=I;try{g(u)}catch(ne){nl(ne)}u.currentTarget=null,g=$}else for(b=0;b<i.length;b++){if(S=i[b],$=S.instance,I=S.currentTarget,S=S.listener,$!==g&&u.isPropagationStopped())break e;g=S,u.currentTarget=I;try{g(u)}catch(ne){nl(ne)}u.currentTarget=null,g=$}}}}function Ee(e,t){var a=t[fs];a===void 0&&(a=t[fs]=new Set);var i=e+"__bubble";a.has(i)||(ym(t,e,2,!1),a.add(i))}function Zu(e,t,a){var i=0;t&&(i|=4),ym(a,e,i,t)}var ql="_reactListening"+Math.random().toString(36).slice(2);function Qu(e){if(!e[ql]){e[ql]=!0,Yi.forEach(function(a){a!=="selectionchange"&&(uv.has(a)||Zu(a,!1,e),Zu(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ql]||(t[ql]=!0,Zu("selectionchange",!1,t))}}function ym(e,t,a,i){switch(Qm(t)){case 2:var u=Hv;break;case 8:u=Uv;break;default:u=od}a=u.bind(null,t,a,e),u=void 0,!gc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),i?u!==void 0?e.addEventListener(t,a,{capture:!0,passive:u}):e.addEventListener(t,a,!0):u!==void 0?e.addEventListener(t,a,{passive:u}):e.addEventListener(t,a,!1)}function Fu(e,t,a,i,u){var g=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var b=i.tag;if(b===3||b===4){var S=i.stateNode.containerInfo;if(S===u)break;if(b===4)for(b=i.return;b!==null;){var $=b.tag;if(($===3||$===4)&&b.stateNode.containerInfo===u)return;b=b.return}for(;S!==null;){if(b=Fn(S),b===null)return;if($=b.tag,$===5||$===6||$===26||$===27){i=g=b;continue e}S=S.parentNode}}i=i.return}jf(function(){var I=g,ne=dc(a),re=[];e:{var J=Jf.get(e);if(J!==void 0){var ee=Pi,ue=e;switch(e){case"keypress":if(Ji(a)===0)break e;case"keydown":case"keyup":ee=ab;break;case"focusin":ue="focus",ee=xc;break;case"focusout":ue="blur",ee=xc;break;case"beforeblur":case"afterblur":ee=xc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=kf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Xy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=ib;break;case Qf:case Ff:case Kf:ee=Fy;break;case If:ee=ob;break;case"scroll":case"scrollend":ee=Yy;break;case"wheel":ee=ub;break;case"copy":case"cut":case"paste":ee=Iy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=zf;break;case"toggle":case"beforetoggle":ee=fb}var ve=(t&4)!==0,qe=!ve&&(e==="scroll"||e==="scrollend"),Q=ve?J!==null?J+"Capture":null:J;ve=[];for(var B=I,K;B!==null;){var ae=B;if(K=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||K===null||Q===null||(ae=yr(B,Q),ae!=null&&ve.push(Jr(B,ae,K))),qe)break;B=B.return}0<ve.length&&(J=new ee(J,ue,null,a,ne),re.push({event:J,listeners:ve}))}}if((t&7)===0){e:{if(J=e==="mouseover"||e==="pointerover",ee=e==="mouseout"||e==="pointerout",J&&a!==uc&&(ue=a.relatedTarget||a.fromElement)&&(Fn(ue)||ue[jn]))break e;if((ee||J)&&(J=ne.window===ne?ne:(J=ne.ownerDocument)?J.defaultView||J.parentWindow:window,ee?(ue=a.relatedTarget||a.toElement,ee=I,ue=ue?Fn(ue):null,ue!==null&&(qe=d(ue),ve=ue.tag,ue!==qe||ve!==5&&ve!==27&&ve!==6)&&(ue=null)):(ee=null,ue=I),ee!==ue)){if(ve=kf,ae="onMouseLeave",Q="onMouseEnter",B="mouse",(e==="pointerout"||e==="pointerover")&&(ve=zf,ae="onPointerLeave",Q="onPointerEnter",B="pointer"),qe=ee==null?J:In(ee),K=ue==null?J:In(ue),J=new ve(ae,B+"leave",ee,a,ne),J.target=qe,J.relatedTarget=K,ae=null,Fn(ne)===I&&(ve=new ve(Q,B+"enter",ue,a,ne),ve.target=K,ve.relatedTarget=qe,ae=ve),qe=ae,ee&&ue)t:{for(ve=dv,Q=ee,B=ue,K=0,ae=Q;ae;ae=ve(ae))K++;ae=0;for(var xe=B;xe;xe=ve(xe))ae++;for(;0<K-ae;)Q=ve(Q),K--;for(;0<ae-K;)B=ve(B),ae--;for(;K--;){if(Q===B||B!==null&&Q===B.alternate){ve=Q;break t}Q=ve(Q),B=ve(B)}ve=null}else ve=null;ee!==null&&bm(re,J,ee,ve,!1),ue!==null&&qe!==null&&bm(re,qe,ue,ve,!0)}}e:{if(J=I?In(I):window,ee=J.nodeName&&J.nodeName.toLowerCase(),ee==="select"||ee==="input"&&J.type==="file")var Le=Rf;else if(Of(J))if($f)Le=Nb;else{Le=vb;var he=bb}else ee=J.nodeName,!ee||ee.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?I&&cc(I.elementType)&&(Le=Rf):Le=_b;if(Le&&(Le=Le(e,I))){Lf(re,Le,a,ne);break e}he&&he(e,J,I),e==="focusout"&&I&&J.type==="number"&&I.memoizedProps.value!=null&&xr(J,"number",J.value)}switch(he=I?In(I):window,e){case"focusin":(Of(he)||he.contentEditable==="true")&&(vs=he,jc=I,kr=null);break;case"focusout":kr=jc=vs=null;break;case"mousedown":wc=!0;break;case"contextmenu":case"mouseup":case"dragend":wc=!1,Xf(re,a,ne);break;case"selectionchange":if(wb)break;case"keydown":case"keyup":Xf(re,a,ne)}var ke;if(bc)e:{switch(e){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else bs?Mf(e,a)&&(Te="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(Ef&&a.locale!=="ko"&&(bs||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&bs&&(ke=wf()):(Pn=ne,hc="value"in Pn?Pn.value:Pn.textContent,bs=!0)),he=Yl(I,Te),0<he.length&&(Te=new Cf(Te,e,null,a,ne),re.push({event:Te,listeners:he}),ke?Te.data=ke:(ke=Df(a),ke!==null&&(Te.data=ke)))),(ke=hb?mb(e,a):pb(e,a))&&(Te=Yl(I,"onBeforeInput"),0<Te.length&&(he=new Cf("onBeforeInput","beforeinput",null,a,ne),re.push({event:he,listeners:Te}),he.data=ke)),lv(re,e,I,a,ne)}xm(re,t)})}function Jr(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Yl(e,t){for(var a=t+"Capture",i=[];e!==null;){var u=e,g=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||g===null||(u=yr(e,a),u!=null&&i.unshift(Jr(e,u,g)),u=yr(e,t),u!=null&&i.push(Jr(e,u,g))),e.tag===3)return i;e=e.return}return[]}function dv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function bm(e,t,a,i,u){for(var g=t._reactName,b=[];a!==null&&a!==i;){var S=a,$=S.alternate,I=S.stateNode;if(S=S.tag,$!==null&&$===i)break;S!==5&&S!==26&&S!==27||I===null||($=I,u?(I=yr(a,g),I!=null&&b.unshift(Jr(a,I,$))):u||(I=yr(a,g),I!=null&&b.push(Jr(a,I,$)))),a=a.return}b.length!==0&&e.push({event:t,listeners:b})}var fv=/\r\n?/g,gv=/\u0000|\uFFFD/g;function vm(e){return(typeof e=="string"?e:""+e).replace(fv,`
`).replace(gv,"")}function _m(e,t){return t=vm(t),vm(e)===t}function Ve(e,t,a,i,u,g){switch(a){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||ps(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&ps(e,""+i);break;case"className":hs(e,"class",i);break;case"tabIndex":hs(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":hs(e,a,i);break;case"style":_f(e,i,g);break;case"data":if(t!=="object"){hs(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=Ki(""+i),e.setAttribute(a,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(t!=="input"&&Ve(e,t,"name",u.name,u,null),Ve(e,t,"formEncType",u.formEncType,u,null),Ve(e,t,"formMethod",u.formMethod,u,null),Ve(e,t,"formTarget",u.formTarget,u,null)):(Ve(e,t,"encType",u.encType,u,null),Ve(e,t,"method",u.method,u,null),Ve(e,t,"target",u.target,u,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=Ki(""+i),e.setAttribute(a,i);break;case"onClick":i!=null&&(e.onclick=kn);break;case"onScroll":i!=null&&Ee("scroll",e);break;case"onScrollEnd":i!=null&&Ee("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(o(61));if(a=i.__html,a!=null){if(u.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}a=Ki(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""+i):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":i===!0?e.setAttribute(a,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,i):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(a,i):e.removeAttribute(a);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(a):e.setAttribute(a,i);break;case"popover":Ee("beforetoggle",e),Ee("toggle",e),gs(e,"popover",i);break;case"xlinkActuate":Jt(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Jt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Jt(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Jt(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Jt(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Jt(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Jt(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Jt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Jt(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":gs(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Vy.get(a)||a,gs(e,a,i))}}function Ku(e,t,a,i,u,g){switch(a){case"style":_f(e,i,g);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(o(61));if(a=i.__html,a!=null){if(u.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"children":typeof i=="string"?ps(e,i):(typeof i=="number"||typeof i=="bigint")&&ps(e,""+i);break;case"onScroll":i!=null&&Ee("scroll",e);break;case"onScrollEnd":i!=null&&Ee("scrollend",e);break;case"onClick":i!=null&&(e.onclick=kn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gi.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(u=a.endsWith("Capture"),t=a.slice(2,u?a.length-7:void 0),g=e[pt]||null,g=g!=null?g[a]:null,typeof g=="function"&&e.removeEventListener(t,g,u),typeof i=="function")){typeof g!="function"&&g!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,i,u);break e}a in e?e[a]=i:i===!0?e.setAttribute(a,""):gs(e,a,i)}}}function mt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ee("error",e),Ee("load",e);var i=!1,u=!1,g;for(g in a)if(a.hasOwnProperty(g)){var b=a[g];if(b!=null)switch(g){case"src":i=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ve(e,t,g,b,a,null)}}u&&Ve(e,t,"srcSet",a.srcSet,a,null),i&&Ve(e,t,"src",a.src,a,null);return;case"input":Ee("invalid",e);var S=g=b=u=null,$=null,I=null;for(i in a)if(a.hasOwnProperty(i)){var ne=a[i];if(ne!=null)switch(i){case"name":u=ne;break;case"type":b=ne;break;case"checked":$=ne;break;case"defaultChecked":I=ne;break;case"value":g=ne;break;case"defaultValue":S=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(o(137,t));break;default:Ve(e,t,i,ne,a,null)}}Fi(e,g,S,$,I,b,u,!1);return;case"select":Ee("invalid",e),i=b=g=null;for(u in a)if(a.hasOwnProperty(u)&&(S=a[u],S!=null))switch(u){case"value":g=S;break;case"defaultValue":b=S;break;case"multiple":i=S;default:Ve(e,t,u,S,a,null)}t=g,a=b,e.multiple=!!i,t!=null?Sn(e,!!i,t,!1):a!=null&&Sn(e,!!i,a,!0);return;case"textarea":Ee("invalid",e),g=u=i=null;for(b in a)if(a.hasOwnProperty(b)&&(S=a[b],S!=null))switch(b){case"value":i=S;break;case"defaultValue":u=S;break;case"children":g=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(o(91));break;default:Ve(e,t,b,S,a,null)}bf(e,i,u,g);return;case"option":for($ in a)a.hasOwnProperty($)&&(i=a[$],i!=null)&&($==="selected"?e.selected=i&&typeof i!="function"&&typeof i!="symbol":Ve(e,t,$,i,a,null));return;case"dialog":Ee("beforetoggle",e),Ee("toggle",e),Ee("cancel",e),Ee("close",e);break;case"iframe":case"object":Ee("load",e);break;case"video":case"audio":for(i=0;i<Ir.length;i++)Ee(Ir[i],e);break;case"image":Ee("error",e),Ee("load",e);break;case"details":Ee("toggle",e);break;case"embed":case"source":case"link":Ee("error",e),Ee("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(I in a)if(a.hasOwnProperty(I)&&(i=a[I],i!=null))switch(I){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ve(e,t,I,i,a,null)}return;default:if(cc(t)){for(ne in a)a.hasOwnProperty(ne)&&(i=a[ne],i!==void 0&&Ku(e,t,ne,i,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(i=a[S],i!=null&&Ve(e,t,S,i,a,null))}function hv(e,t,a,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,g=null,b=null,S=null,$=null,I=null,ne=null;for(ee in a){var re=a[ee];if(a.hasOwnProperty(ee)&&re!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":$=re;default:i.hasOwnProperty(ee)||Ve(e,t,ee,null,i,re)}}for(var J in i){var ee=i[J];if(re=a[J],i.hasOwnProperty(J)&&(ee!=null||re!=null))switch(J){case"type":g=ee;break;case"name":u=ee;break;case"checked":I=ee;break;case"defaultChecked":ne=ee;break;case"value":b=ee;break;case"defaultValue":S=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(o(137,t));break;default:ee!==re&&Ve(e,t,J,ee,i,re)}}Ra(e,b,S,$,I,ne,g,u);return;case"select":ee=b=S=J=null;for(g in a)if($=a[g],a.hasOwnProperty(g)&&$!=null)switch(g){case"value":break;case"multiple":ee=$;default:i.hasOwnProperty(g)||Ve(e,t,g,null,i,$)}for(u in i)if(g=i[u],$=a[u],i.hasOwnProperty(u)&&(g!=null||$!=null))switch(u){case"value":J=g;break;case"defaultValue":S=g;break;case"multiple":b=g;default:g!==$&&Ve(e,t,u,g,i,$)}t=S,a=b,i=ee,J!=null?Sn(e,!!a,J,!1):!!i!=!!a&&(t!=null?Sn(e,!!a,t,!0):Sn(e,!!a,a?[]:"",!1));return;case"textarea":ee=J=null;for(S in a)if(u=a[S],a.hasOwnProperty(S)&&u!=null&&!i.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Ve(e,t,S,null,i,u)}for(b in i)if(u=i[b],g=a[b],i.hasOwnProperty(b)&&(u!=null||g!=null))switch(b){case"value":J=u;break;case"defaultValue":ee=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(o(91));break;default:u!==g&&Ve(e,t,b,u,i,g)}yf(e,J,ee);return;case"option":for(var ue in a)J=a[ue],a.hasOwnProperty(ue)&&J!=null&&!i.hasOwnProperty(ue)&&(ue==="selected"?e.selected=!1:Ve(e,t,ue,null,i,J));for($ in i)J=i[$],ee=a[$],i.hasOwnProperty($)&&J!==ee&&(J!=null||ee!=null)&&($==="selected"?e.selected=J&&typeof J!="function"&&typeof J!="symbol":Ve(e,t,$,J,i,ee));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)J=a[ve],a.hasOwnProperty(ve)&&J!=null&&!i.hasOwnProperty(ve)&&Ve(e,t,ve,null,i,J);for(I in i)if(J=i[I],ee=a[I],i.hasOwnProperty(I)&&J!==ee&&(J!=null||ee!=null))switch(I){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(o(137,t));break;default:Ve(e,t,I,J,i,ee)}return;default:if(cc(t)){for(var qe in a)J=a[qe],a.hasOwnProperty(qe)&&J!==void 0&&!i.hasOwnProperty(qe)&&Ku(e,t,qe,void 0,i,J);for(ne in i)J=i[ne],ee=a[ne],!i.hasOwnProperty(ne)||J===ee||J===void 0&&ee===void 0||Ku(e,t,ne,J,i,ee);return}}for(var Q in a)J=a[Q],a.hasOwnProperty(Q)&&J!=null&&!i.hasOwnProperty(Q)&&Ve(e,t,Q,null,i,J);for(re in i)J=i[re],ee=a[re],!i.hasOwnProperty(re)||J===ee||J==null&&ee==null||Ve(e,t,re,J,i,ee)}function Nm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),i=0;i<a.length;i++){var u=a[i],g=u.transferSize,b=u.initiatorType,S=u.duration;if(g&&S&&Nm(b)){for(b=0,S=u.responseEnd,i+=1;i<a.length;i++){var $=a[i],I=$.startTime;if(I>S)break;var ne=$.transferSize,re=$.initiatorType;ne&&Nm(re)&&($=$.responseEnd,b+=ne*($<S?1:(S-I)/($-I)))}if(--i,t+=8*(g+b)/(u.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Iu=null,Ju=null;function Gl(e){return e.nodeType===9?e:e.ownerDocument}function jm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Wu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Pu=null;function pv(){var e=window.event;return e&&e.type==="popstate"?e===Pu?!1:(Pu=e,!0):(Pu=null,!1)}var Sm=typeof setTimeout=="function"?setTimeout:void 0,xv=typeof clearTimeout=="function"?clearTimeout:void 0,km=typeof Promise=="function"?Promise:void 0,yv=typeof queueMicrotask=="function"?queueMicrotask:typeof km<"u"?function(e){return km.resolve(null).then(e).catch(bv)}:Sm;function bv(e){setTimeout(function(){throw e})}function pa(e){return e==="head"}function Cm(e,t){var a=t,i=0;do{var u=a.nextSibling;if(e.removeChild(a),u&&u.nodeType===8)if(a=u.data,a==="/$"||a==="/&"){if(i===0){e.removeChild(u),Qs(t);return}i--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")i++;else if(a==="html")Wr(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Wr(a);for(var g=a.firstChild;g;){var b=g.nextSibling,S=g.nodeName;g[Oa]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&g.rel.toLowerCase()==="stylesheet"||a.removeChild(g),g=b}}else a==="body"&&Wr(e.ownerDocument.body);a=u}while(a);Qs(t)}function zm(e,t){var a=e;e=0;do{var i=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),i&&i.nodeType===8)if(a=i.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=i}while(a)}function ed(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ed(a),mr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function vv(e,t,a,i){for(;e.nodeType===1;){var u=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Oa])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var g=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=Qt(e.nextSibling),e===null)break}return null}function _v(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Qt(e.nextSibling),e===null))return null;return e}function Em(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Qt(e.nextSibling),e===null))return null;return e}function td(e){return e.data==="$?"||e.data==="$~"}function nd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Nv(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var i=function(){t(),a.removeEventListener("DOMContentLoaded",i)};a.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Qt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var ad=null;function Am(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Qt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Tm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Mm(e,t,a){switch(t=Gl(a),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Wr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);mr(e)}var Ft=new Map,Dm=new Set;function Xl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var qn=D.d;D.d={f:jv,r:wv,D:Sv,C:kv,L:Cv,m:zv,X:Av,S:Ev,M:Tv};function jv(){var e=qn.f(),t=Rl();return e||t}function wv(e){var t=Kn(e);t!==null&&t.tag===5&&t.type==="form"?Ig(t):qn.r(e)}var Gs=typeof document>"u"?null:document;function Om(e,t,a){var i=Gs;if(i&&typeof t=="string"&&t){var u=wt(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof a=="string"&&(u+='[crossorigin="'+a+'"]'),Dm.has(u)||(Dm.add(u),e={rel:e,crossOrigin:a,href:t},i.querySelector(u)===null&&(t=i.createElement("link"),mt(t,"link",e),Pe(t),i.head.appendChild(t)))}}function Sv(e){qn.D(e),Om("dns-prefetch",e,null)}function kv(e,t){qn.C(e,t),Om("preconnect",e,t)}function Cv(e,t,a){qn.L(e,t,a);var i=Gs;if(i&&e&&t){var u='link[rel="preload"][as="'+wt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(u+='[imagesrcset="'+wt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(u+='[imagesizes="'+wt(a.imageSizes)+'"]')):u+='[href="'+wt(e)+'"]';var g=u;switch(t){case"style":g=Xs(e);break;case"script":g=Zs(e)}Ft.has(g)||(e=x({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Ft.set(g,e),i.querySelector(u)!==null||t==="style"&&i.querySelector(Pr(g))||t==="script"&&i.querySelector(ei(g))||(t=i.createElement("link"),mt(t,"link",e),Pe(t),i.head.appendChild(t)))}}function zv(e,t){qn.m(e,t);var a=Gs;if(a&&e){var i=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+wt(i)+'"][href="'+wt(e)+'"]',g=u;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Zs(e)}if(!Ft.has(g)&&(e=x({rel:"modulepreload",href:e},t),Ft.set(g,e),a.querySelector(u)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ei(g)))return}i=a.createElement("link"),mt(i,"link",e),Pe(i),a.head.appendChild(i)}}}function Ev(e,t,a){qn.S(e,t,a);var i=Gs;if(i&&e){var u=Jn(i).hoistableStyles,g=Xs(e);t=t||"default";var b=u.get(g);if(!b){var S={loading:0,preload:null};if(b=i.querySelector(Pr(g)))S.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Ft.get(g))&&sd(e,a);var $=b=i.createElement("link");Pe($),mt($,"link",e),$._p=new Promise(function(I,ne){$.onload=I,$.onerror=ne}),$.addEventListener("load",function(){S.loading|=1}),$.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Zl(b,t,i)}b={type:"stylesheet",instance:b,count:1,state:S},u.set(g,b)}}}function Av(e,t){qn.X(e,t);var a=Gs;if(a&&e){var i=Jn(a).hoistableScripts,u=Zs(e),g=i.get(u);g||(g=a.querySelector(ei(u)),g||(e=x({src:e,async:!0},t),(t=Ft.get(u))&&rd(e,t),g=a.createElement("script"),Pe(g),mt(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},i.set(u,g))}}function Tv(e,t){qn.M(e,t);var a=Gs;if(a&&e){var i=Jn(a).hoistableScripts,u=Zs(e),g=i.get(u);g||(g=a.querySelector(ei(u)),g||(e=x({src:e,async:!0,type:"module"},t),(t=Ft.get(u))&&rd(e,t),g=a.createElement("script"),Pe(g),mt(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},i.set(u,g))}}function Lm(e,t,a,i){var u=(u=be.current)?Xl(u):null;if(!u)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Xs(a.href),a=Jn(u).hoistableStyles,i=a.get(t),i||(i={type:"style",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Xs(a.href);var g=Jn(u).hoistableStyles,b=g.get(e);if(b||(u=u.ownerDocument||u,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,b),(g=u.querySelector(Pr(e)))&&!g._p&&(b.instance=g,b.state.loading=5),Ft.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ft.set(e,a),g||Mv(u,e,a,b.state))),t&&i===null)throw Error(o(528,""));return b}if(t&&i!==null)throw Error(o(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Zs(a),a=Jn(u).hoistableScripts,i=a.get(t),i||(i={type:"script",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Xs(e){return'href="'+wt(e)+'"'}function Pr(e){return'link[rel="stylesheet"]['+e+"]"}function Rm(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function Mv(e,t,a,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),mt(t,"link",a),Pe(t),e.head.appendChild(t))}function Zs(e){return'[src="'+wt(e)+'"]'}function ei(e){return"script[async]"+e}function $m(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+wt(a.href)+'"]');if(i)return t.instance=i,Pe(i),i;var u=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Pe(i),mt(i,"style",u),Zl(i,a.precedence,e),t.instance=i;case"stylesheet":u=Xs(a.href);var g=e.querySelector(Pr(u));if(g)return t.state.loading|=4,t.instance=g,Pe(g),g;i=Rm(a),(u=Ft.get(u))&&sd(i,u),g=(e.ownerDocument||e).createElement("link"),Pe(g);var b=g;return b._p=new Promise(function(S,$){b.onload=S,b.onerror=$}),mt(g,"link",i),t.state.loading|=4,Zl(g,a.precedence,e),t.instance=g;case"script":return g=Zs(a.src),(u=e.querySelector(ei(g)))?(t.instance=u,Pe(u),u):(i=a,(u=Ft.get(g))&&(i=x({},a),rd(i,u)),e=e.ownerDocument||e,u=e.createElement("script"),Pe(u),mt(u,"link",i),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,Zl(i,a.precedence,e));return t.instance}function Zl(e,t,a){for(var i=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=i.length?i[i.length-1]:null,g=u,b=0;b<i.length;b++){var S=i[b];if(S.dataset.precedence===t)g=S;else if(g!==u)break}g?g.parentNode.insertBefore(e,g.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function sd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function rd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ql=null;function Hm(e,t,a){if(Ql===null){var i=new Map,u=Ql=new Map;u.set(a,i)}else u=Ql,i=u.get(a),i||(i=new Map,u.set(a,i));if(i.has(e))return i;for(i.set(e,null),a=a.getElementsByTagName(e),u=0;u<a.length;u++){var g=a[u];if(!(g[Oa]||g[it]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(t)||"";b=e+b;var S=i.get(b);S?S.push(g):i.set(b,[g])}}return i}function Um(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Dv(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Bm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Ov(e,t,a,i){if(a.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var u=Xs(i.href),g=t.querySelector(Pr(u));if(g){t=g._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Fl.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=g,Pe(g);return}g=t.ownerDocument||t,i=Rm(i),(u=Ft.get(u))&&sd(i,u),g=g.createElement("link"),Pe(g);var b=g;b._p=new Promise(function(S,$){b.onload=S,b.onerror=$}),mt(g,"link",i),a.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Fl.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var id=0;function Lv(e,t){return e.stylesheets&&e.count===0&&Il(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var i=setTimeout(function(){if(e.stylesheets&&Il(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+t);0<e.imgBytes&&id===0&&(id=62500*mv());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Il(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>id?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(u)}}:null}function Fl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Il(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Kl=null;function Il(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Kl=new Map,t.forEach(Rv,e),Kl=null,Fl.call(e))}function Rv(e,t){if(!(t.state.loading&4)){var a=Kl.get(e);if(a)var i=a.get(null);else{a=new Map,Kl.set(e,a);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<u.length;g++){var b=u[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),i=b)}i&&a.set(null,i)}u=t.instance,b=u.getAttribute("data-precedence"),g=a.get(b)||i,g===i&&a.set(null,u),a.set(b,u),this.count++,i=Fl.bind(this),u.addEventListener("load",i),u.addEventListener("error",i),g?g.parentNode.insertBefore(u,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var ti={$$typeof:N,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function $v(e,t,a,i,u,g,b,S,$){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fr(0),this.hiddenUpdates=fr(null),this.identifierPrefix=i,this.onUncaughtError=u,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function Vm(e,t,a,i,u,g,b,S,$,I,ne,re){return e=new $v(e,t,a,b,$,I,ne,re,S),t=1,g===!0&&(t|=24),g=Dt(3,null,null,t),e.current=g,g.stateNode=e,t=Uc(),t.refCount++,e.pooledCache=t,t.refCount++,g.memoizedState={element:i,isDehydrated:a,cache:t},Yc(g),e}function qm(e){return e?(e=js,e):js}function Ym(e,t,a,i,u,g){u=qm(u),i.context===null?i.context=u:i.pendingContext=u,i=ra(t),i.payload={element:a},g=g===void 0?null:g,g!==null&&(i.callback=g),a=ia(e,i,t),a!==null&&(At(a,e,t),Dr(a,e,t))}function Gm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function ld(e,t){Gm(e,t),(e=e.alternate)&&Gm(e,t)}function Xm(e){if(e.tag===13||e.tag===31){var t=Ba(e,67108864);t!==null&&At(t,e,67108864),ld(e,67108864)}}function Zm(e){if(e.tag===13||e.tag===31){var t=Ht();t=gr(t);var a=Ba(e,t);a!==null&&At(a,e,t),ld(e,t)}}var Jl=!0;function Hv(e,t,a,i){var u=j.T;j.T=null;var g=D.p;try{D.p=2,od(e,t,a,i)}finally{D.p=g,j.T=u}}function Uv(e,t,a,i){var u=j.T;j.T=null;var g=D.p;try{D.p=8,od(e,t,a,i)}finally{D.p=g,j.T=u}}function od(e,t,a,i){if(Jl){var u=cd(i);if(u===null)Fu(e,t,i,Wl,a),Fm(e,i);else if(Vv(u,e,t,a,i))i.stopPropagation();else if(Fm(e,i),t&4&&-1<Bv.indexOf(e)){for(;u!==null;){var g=Kn(u);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=Nn(g.pendingLanes);if(b!==0){var S=g;for(S.pendingLanes|=2,S.entangledLanes|=2;b;){var $=1<<31-yt(b);S.entanglements[1]|=$,b&=~$}gn(g),($e&6)===0&&(Ol=dt()+500,Kr(0))}}break;case 31:case 13:S=Ba(g,2),S!==null&&At(S,g,2),Rl(),ld(g,2)}if(g=cd(i),g===null&&Fu(e,t,i,Wl,a),g===u)break;u=g}u!==null&&i.stopPropagation()}else Fu(e,t,i,null,a)}}function cd(e){return e=dc(e),ud(e)}var Wl=null;function ud(e){if(Wl=null,e=Fn(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=h(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Wl=e,null}function Qm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(is()){case _n:return 2;case Qn:return 8;case Aa:case Io:return 32;case ls:return 268435456;default:return 32}default:return 32}}var dd=!1,xa=null,ya=null,ba=null,ni=new Map,ai=new Map,va=[],Bv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fm(e,t){switch(e){case"focusin":case"focusout":xa=null;break;case"dragenter":case"dragleave":ya=null;break;case"mouseover":case"mouseout":ba=null;break;case"pointerover":case"pointerout":ni.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ai.delete(t.pointerId)}}function si(e,t,a,i,u,g){return e===null||e.nativeEvent!==g?(e={blockedOn:t,domEventName:a,eventSystemFlags:i,nativeEvent:g,targetContainers:[u]},t!==null&&(t=Kn(t),t!==null&&Xm(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function Vv(e,t,a,i,u){switch(t){case"focusin":return xa=si(xa,e,t,a,i,u),!0;case"dragenter":return ya=si(ya,e,t,a,i,u),!0;case"mouseover":return ba=si(ba,e,t,a,i,u),!0;case"pointerover":var g=u.pointerId;return ni.set(g,si(ni.get(g)||null,e,t,a,i,u)),!0;case"gotpointercapture":return g=u.pointerId,ai.set(g,si(ai.get(g)||null,e,t,a,i,u)),!0}return!1}function Km(e){var t=Fn(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,Bi(e.priority,function(){Zm(a)});return}}else if(t===31){if(t=h(a),t!==null){e.blockedOn=t,Bi(e.priority,function(){Zm(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Pl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=cd(e.nativeEvent);if(a===null){a=e.nativeEvent;var i=new a.constructor(a.type,a);uc=i,a.target.dispatchEvent(i),uc=null}else return t=Kn(a),t!==null&&Xm(t),e.blockedOn=a,!1;t.shift()}return!0}function Im(e,t,a){Pl(e)&&a.delete(t)}function qv(){dd=!1,xa!==null&&Pl(xa)&&(xa=null),ya!==null&&Pl(ya)&&(ya=null),ba!==null&&Pl(ba)&&(ba=null),ni.forEach(Im),ai.forEach(Im)}function eo(e,t){e.blockedOn===t&&(e.blockedOn=null,dd||(dd=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,qv)))}var to=null;function Jm(e){to!==e&&(to=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){to===e&&(to=null);for(var t=0;t<e.length;t+=3){var a=e[t],i=e[t+1],u=e[t+2];if(typeof i!="function"){if(ud(i||a)===null)continue;break}var g=Kn(a);g!==null&&(e.splice(t,3),t-=3,cu(g,{pending:!0,data:u,method:a.method,action:i},i,u))}}))}function Qs(e){function t($){return eo($,e)}xa!==null&&eo(xa,e),ya!==null&&eo(ya,e),ba!==null&&eo(ba,e),ni.forEach(t),ai.forEach(t);for(var a=0;a<va.length;a++){var i=va[a];i.blockedOn===e&&(i.blockedOn=null)}for(;0<va.length&&(a=va[0],a.blockedOn===null);)Km(a),a.blockedOn===null&&va.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(i=0;i<a.length;i+=3){var u=a[i],g=a[i+1],b=u[pt]||null;if(typeof g=="function")b||Jm(a);else if(b){var S=null;if(g&&g.hasAttribute("formAction")){if(u=g,b=g[pt]||null)S=b.formAction;else if(ud(u)!==null)continue}else S=b.action;typeof S=="function"?a[i+1]=S:(a.splice(i,3),i-=3),Jm(a)}}}function Wm(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(b){return u=b})},focusReset:"manual",scroll:"manual"})}function t(){u!==null&&(u(),u=null),i||setTimeout(a,20)}function a(){if(!i&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),u!==null&&(u(),u=null)}}}function fd(e){this._internalRoot=e}no.prototype.render=fd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var a=t.current,i=Ht();Ym(a,i,e,t,null,null)},no.prototype.unmount=fd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ym(e.current,2,null,e,null,null),Rl(),t[jn]=null}};function no(e){this._internalRoot=e}no.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ui();e={blockedOn:null,target:e,priority:t};for(var a=0;a<va.length&&t!==0&&t<va[a].priority;a++);va.splice(a,0,e),a===0&&Km(e)}};var Pm=s.version;if(Pm!=="19.2.3")throw Error(o(527,Pm,"19.2.3"));D.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=m(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var Yv={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ao=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ao.isDisabled&&ao.supportsFiber)try{Ta=ao.inject(Yv),xt=ao}catch{}}return ii.createRoot=function(e,t){if(!c(e))throw Error(o(299));var a=!1,i="",u=ih,g=lh,b=oh;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(g=t.onCaughtError),t.onRecoverableError!==void 0&&(b=t.onRecoverableError)),t=Vm(e,1,!1,null,null,a,i,null,u,g,b,Wm),e[jn]=t.current,Qu(e),new fd(t)},ii.hydrateRoot=function(e,t,a){if(!c(e))throw Error(o(299));var i=!1,u="",g=ih,b=lh,S=oh,$=null;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.formState!==void 0&&($=a.formState)),t=Vm(e,1,!0,t,a??null,i,u,$,g,b,S,Wm),t.context=qm(null),a=t.current,i=Ht(),i=gr(i),u=ra(i),u.callback=null,ia(a,u,i),a=i,t.current.lanes=a,Da(t,a),gn(t),e[jn]=t.current,Qu(e),new no(t)},ii.version="19.2.3",ii}var x0;function U_(){if(x0)return yd.exports;x0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(s){console.error(s)}}return n(),yd.exports=H_(),yd.exports}var B_=U_();const je=n=>typeof n=="string",li=()=>{let n,s;const l=new Promise((o,c)=>{n=o,s=c});return l.resolve=n,l.reject=s,l},y0=n=>n==null?"":""+n,V_=(n,s,l)=>{n.forEach(o=>{s[o]&&(l[o]=s[o])})},q_=/###/g,b0=n=>n&&n.indexOf("###")>-1?n.replace(q_,"."):n,v0=n=>!n||je(n),gi=(n,s,l)=>{const o=je(s)?s.split("."):s;let c=0;for(;c<o.length-1;){if(v0(n))return{};const d=b0(o[c]);!n[d]&&l&&(n[d]=new l),Object.prototype.hasOwnProperty.call(n,d)?n=n[d]:n={},++c}return v0(n)?{}:{obj:n,k:b0(o[c])}},_0=(n,s,l)=>{const{obj:o,k:c}=gi(n,s,Object);if(o!==void 0||s.length===1){o[c]=l;return}let d=s[s.length-1],f=s.slice(0,s.length-1),h=gi(n,f,Object);for(;h.obj===void 0&&f.length;)d=`${f[f.length-1]}.${d}`,f=f.slice(0,f.length-1),h=gi(n,f,Object),h?.obj&&typeof h.obj[`${h.k}.${d}`]<"u"&&(h.obj=void 0);h.obj[`${h.k}.${d}`]=l},Y_=(n,s,l,o)=>{const{obj:c,k:d}=gi(n,s,Object);c[d]=c[d]||[],c[d].push(l)},vo=(n,s)=>{const{obj:l,k:o}=gi(n,s);if(l&&Object.prototype.hasOwnProperty.call(l,o))return l[o]},G_=(n,s,l)=>{const o=vo(n,l);return o!==void 0?o:vo(s,l)},Gp=(n,s,l)=>{for(const o in s)o!=="__proto__"&&o!=="constructor"&&(o in n?je(n[o])||n[o]instanceof String||je(s[o])||s[o]instanceof String?l&&(n[o]=s[o]):Gp(n[o],s[o],l):n[o]=s[o]);return n},Fs=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var X_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Z_=n=>je(n)?n.replace(/[&<>"'\/]/g,s=>X_[s]):n;class Q_{constructor(s){this.capacity=s,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(s){const l=this.regExpMap.get(s);if(l!==void 0)return l;const o=new RegExp(s);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(s,o),this.regExpQueue.push(s),o}}const F_=[" ",",","?","!",";"],K_=new Q_(20),I_=(n,s,l)=>{s=s||"",l=l||"";const o=F_.filter(f=>s.indexOf(f)<0&&l.indexOf(f)<0);if(o.length===0)return!0;const c=K_.getRegExp(`(${o.map(f=>f==="?"?"\\?":f).join("|")})`);let d=!c.test(n);if(!d){const f=n.indexOf(l);f>0&&!c.test(n.substring(0,f))&&(d=!0)}return d},Od=(n,s,l=".")=>{if(!n)return;if(n[s])return Object.prototype.hasOwnProperty.call(n,s)?n[s]:void 0;const o=s.split(l);let c=n;for(let d=0;d<o.length;){if(!c||typeof c!="object")return;let f,h="";for(let p=d;p<o.length;++p)if(p!==d&&(h+=l),h+=o[p],f=c[h],f!==void 0){if(["string","number","boolean"].indexOf(typeof f)>-1&&p<o.length-1)continue;d+=p-d+1;break}c=f}return c},bi=n=>n?.replace("_","-"),J_={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,s){console?.[n]?.apply?.(console,s)}};class _o{constructor(s,l={}){this.init(s,l)}init(s,l={}){this.prefix=l.prefix||"i18next:",this.logger=s||J_,this.options=l,this.debug=l.debug}log(...s){return this.forward(s,"log","",!0)}warn(...s){return this.forward(s,"warn","",!0)}error(...s){return this.forward(s,"error","")}deprecate(...s){return this.forward(s,"warn","WARNING DEPRECATED: ",!0)}forward(s,l,o,c){return c&&!this.debug?null:(je(s[0])&&(s[0]=`${o}${this.prefix} ${s[0]}`),this.logger[l](s))}create(s){return new _o(this.logger,{prefix:`${this.prefix}:${s}:`,...this.options})}clone(s){return s=s||this.options,s.prefix=s.prefix||this.prefix,new _o(this.logger,s)}}var pn=new _o;class Oo{constructor(){this.observers={}}on(s,l){return s.split(" ").forEach(o=>{this.observers[o]||(this.observers[o]=new Map);const c=this.observers[o].get(l)||0;this.observers[o].set(l,c+1)}),this}off(s,l){if(this.observers[s]){if(!l){delete this.observers[s];return}this.observers[s].delete(l)}}emit(s,...l){this.observers[s]&&Array.from(this.observers[s].entries()).forEach(([c,d])=>{for(let f=0;f<d;f++)c(...l)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([c,d])=>{for(let f=0;f<d;f++)c.apply(c,[s,...l])})}}class N0 extends Oo{constructor(s,l={ns:["translation"],defaultNS:"translation"}){super(),this.data=s||{},this.options=l,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(s){this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}removeNamespaces(s){const l=this.options.ns.indexOf(s);l>-1&&this.options.ns.splice(l,1)}getResource(s,l,o,c={}){const d=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator,f=c.ignoreJSONStructure!==void 0?c.ignoreJSONStructure:this.options.ignoreJSONStructure;let h;s.indexOf(".")>-1?h=s.split("."):(h=[s,l],o&&(Array.isArray(o)?h.push(...o):je(o)&&d?h.push(...o.split(d)):h.push(o)));const p=vo(this.data,h);return!p&&!l&&!o&&s.indexOf(".")>-1&&(s=h[0],l=h[1],o=h.slice(2).join(".")),p||!f||!je(o)?p:Od(this.data?.[s]?.[l],o,d)}addResource(s,l,o,c,d={silent:!1}){const f=d.keySeparator!==void 0?d.keySeparator:this.options.keySeparator;let h=[s,l];o&&(h=h.concat(f?o.split(f):o)),s.indexOf(".")>-1&&(h=s.split("."),c=l,l=h[1]),this.addNamespaces(l),_0(this.data,h,c),d.silent||this.emit("added",s,l,o,c)}addResources(s,l,o,c={silent:!1}){for(const d in o)(je(o[d])||Array.isArray(o[d]))&&this.addResource(s,l,d,o[d],{silent:!0});c.silent||this.emit("added",s,l,o)}addResourceBundle(s,l,o,c,d,f={silent:!1,skipCopy:!1}){let h=[s,l];s.indexOf(".")>-1&&(h=s.split("."),c=o,o=l,l=h[1]),this.addNamespaces(l);let p=vo(this.data,h)||{};f.skipCopy||(o=JSON.parse(JSON.stringify(o))),c?Gp(p,o,d):p={...p,...o},_0(this.data,h,p),f.silent||this.emit("added",s,l,o)}removeResourceBundle(s,l){this.hasResourceBundle(s,l)&&delete this.data[s][l],this.removeNamespaces(l),this.emit("removed",s,l)}hasResourceBundle(s,l){return this.getResource(s,l)!==void 0}getResourceBundle(s,l){return l||(l=this.options.defaultNS),this.getResource(s,l)}getDataByLanguage(s){return this.data[s]}hasLanguageSomeTranslations(s){const l=this.getDataByLanguage(s);return!!(l&&Object.keys(l)||[]).find(c=>l[c]&&Object.keys(l[c]).length>0)}toJSON(){return this.data}}var Xp={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,s,l,o,c){return n.forEach(d=>{s=this.processors[d]?.process(s,l,o,c)??s}),s}};const Zp=Symbol("i18next/PATH_KEY");function W_(){const n=[],s=Object.create(null);let l;return s.get=(o,c)=>(l?.revoke?.(),c===Zp?n:(n.push(c),l=Proxy.revocable(o,s),l.proxy)),Proxy.revocable(Object.create(null),s).proxy}function Ld(n,s){const{[Zp]:l}=n(W_());return l.join(s?.keySeparator??".")}const j0={},_d=n=>!je(n)&&typeof n!="boolean"&&typeof n!="number";class No extends Oo{constructor(s,l={}){super(),V_(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],s,this),this.options=l,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=pn.create("translator")}changeLanguage(s){s&&(this.language=s)}exists(s,l={interpolation:{}}){const o={...l};if(s==null)return!1;const c=this.resolve(s,o);if(c?.res===void 0)return!1;const d=_d(c.res);return!(o.returnObjects===!1&&d)}extractFromKey(s,l){let o=l.nsSeparator!==void 0?l.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");const c=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator;let d=l.ns||this.options.defaultNS||[];const f=o&&s.indexOf(o)>-1,h=!this.options.userDefinedKeySeparator&&!l.keySeparator&&!this.options.userDefinedNsSeparator&&!l.nsSeparator&&!I_(s,o,c);if(f&&!h){const p=s.match(this.interpolator.nestingRegexp);if(p&&p.length>0)return{key:s,namespaces:je(d)?[d]:d};const m=s.split(o);(o!==c||o===c&&this.options.ns.indexOf(m[0])>-1)&&(d=m.shift()),s=m.join(c)}return{key:s,namespaces:je(d)?[d]:d}}translate(s,l,o){let c=typeof l=="object"?{...l}:l;if(typeof c!="object"&&this.options.overloadTranslationOptionHandler&&(c=this.options.overloadTranslationOptionHandler(arguments)),typeof c=="object"&&(c={...c}),c||(c={}),s==null)return"";typeof s=="function"&&(s=Ld(s,{...this.options,...c})),Array.isArray(s)||(s=[String(s)]);const d=c.returnDetails!==void 0?c.returnDetails:this.options.returnDetails,f=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator,{key:h,namespaces:p}=this.extractFromKey(s[s.length-1],c),m=p[p.length-1];let y=c.nsSeparator!==void 0?c.nsSeparator:this.options.nsSeparator;y===void 0&&(y=":");const x=c.lng||this.language,v=c.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(x?.toLowerCase()==="cimode")return v?d?{res:`${m}${y}${h}`,usedKey:h,exactUsedKey:h,usedLng:x,usedNS:m,usedParams:this.getUsedParamsDetails(c)}:`${m}${y}${h}`:d?{res:h,usedKey:h,exactUsedKey:h,usedLng:x,usedNS:m,usedParams:this.getUsedParamsDetails(c)}:h;const _=this.resolve(s,c);let w=_?.res;const M=_?.usedKey||h,E=_?.exactUsedKey||h,A=["[object Number]","[object Function]","[object RegExp]"],z=c.joinArrays!==void 0?c.joinArrays:this.options.joinArrays,N=!this.i18nFormat||this.i18nFormat.handleAsObject,k=c.count!==void 0&&!je(c.count),U=No.hasDefaultValue(c),O=k?this.pluralResolver.getSuffix(x,c.count,c):"",V=c.ordinal&&k?this.pluralResolver.getSuffix(x,c.count,{ordinal:!1}):"",G=k&&!c.ordinal&&c.count===0,L=G&&c[`defaultValue${this.options.pluralSeparator}zero`]||c[`defaultValue${O}`]||c[`defaultValue${V}`]||c.defaultValue;let F=w;N&&!w&&U&&(F=L);const Y=_d(F),Z=Object.prototype.toString.apply(F);if(N&&F&&Y&&A.indexOf(Z)<0&&!(je(z)&&Array.isArray(F))){if(!c.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const te=this.options.returnedObjectHandler?this.options.returnedObjectHandler(M,F,{...c,ns:p}):`key '${h} (${this.language})' returned an object instead of string.`;return d?(_.res=te,_.usedParams=this.getUsedParamsDetails(c),_):te}if(f){const te=Array.isArray(F),C=te?[]:{},R=te?E:M;for(const j in F)if(Object.prototype.hasOwnProperty.call(F,j)){const D=`${R}${f}${j}`;U&&!w?C[j]=this.translate(D,{...c,defaultValue:_d(L)?L[j]:void 0,joinArrays:!1,ns:p}):C[j]=this.translate(D,{...c,joinArrays:!1,ns:p}),C[j]===D&&(C[j]=F[j])}w=C}}else if(N&&je(z)&&Array.isArray(w))w=w.join(z),w&&(w=this.extendTranslation(w,s,c,o));else{let te=!1,C=!1;!this.isValidLookup(w)&&U&&(te=!0,w=L),this.isValidLookup(w)||(C=!0,w=h);const j=(c.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&C?void 0:w,D=U&&L!==w&&this.options.updateMissing;if(C||te||D){if(this.logger.log(D?"updateKey":"missingKey",x,m,h,D?L:w),f){const X=this.resolve(h,{...c,keySeparator:!1});X&&X.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let H=[];const q=this.languageUtils.getFallbackCodes(this.options.fallbackLng,c.lng||this.language);if(this.options.saveMissingTo==="fallback"&&q&&q[0])for(let X=0;X<q.length;X++)H.push(q[X]);else this.options.saveMissingTo==="all"?H=this.languageUtils.toResolveHierarchy(c.lng||this.language):H.push(c.lng||this.language);const P=(X,W,se)=>{const le=U&&se!==w?se:j;this.options.missingKeyHandler?this.options.missingKeyHandler(X,m,W,le,D,c):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(X,m,W,le,D,c),this.emit("missingKey",X,m,W,w)};this.options.saveMissing&&(this.options.saveMissingPlurals&&k?H.forEach(X=>{const W=this.pluralResolver.getSuffixes(X,c);G&&c[`defaultValue${this.options.pluralSeparator}zero`]&&W.indexOf(`${this.options.pluralSeparator}zero`)<0&&W.push(`${this.options.pluralSeparator}zero`),W.forEach(se=>{P([X],h+se,c[`defaultValue${se}`]||L)})}):P(H,h,L))}w=this.extendTranslation(w,s,c,_,o),C&&w===h&&this.options.appendNamespaceToMissingKey&&(w=`${m}${y}${h}`),(C||te)&&this.options.parseMissingKeyHandler&&(w=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${m}${y}${h}`:h,te?w:void 0,c))}return d?(_.res=w,_.usedParams=this.getUsedParamsDetails(c),_):w}extendTranslation(s,l,o,c,d){if(this.i18nFormat?.parse)s=this.i18nFormat.parse(s,{...this.options.interpolation.defaultVariables,...o},o.lng||this.language||c.usedLng,c.usedNS,c.usedKey,{resolved:c});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init({...o,interpolation:{...this.options.interpolation,...o.interpolation}});const p=je(s)&&(o?.interpolation?.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let m;if(p){const x=s.match(this.interpolator.nestingRegexp);m=x&&x.length}let y=o.replace&&!je(o.replace)?o.replace:o;if(this.options.interpolation.defaultVariables&&(y={...this.options.interpolation.defaultVariables,...y}),s=this.interpolator.interpolate(s,y,o.lng||this.language||c.usedLng,o),p){const x=s.match(this.interpolator.nestingRegexp),v=x&&x.length;m<v&&(o.nest=!1)}!o.lng&&c&&c.res&&(o.lng=this.language||c.usedLng),o.nest!==!1&&(s=this.interpolator.nest(s,(...x)=>d?.[0]===x[0]&&!o.context?(this.logger.warn(`It seems you are nesting recursively key: ${x[0]} in key: ${l[0]}`),null):this.translate(...x,l),o)),o.interpolation&&this.interpolator.reset()}const f=o.postProcess||this.options.postProcess,h=je(f)?[f]:f;return s!=null&&h?.length&&o.applyPostProcessor!==!1&&(s=Xp.handle(h,s,l,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...c,usedParams:this.getUsedParamsDetails(o)},...o}:o,this)),s}resolve(s,l={}){let o,c,d,f,h;return je(s)&&(s=[s]),s.forEach(p=>{if(this.isValidLookup(o))return;const m=this.extractFromKey(p,l),y=m.key;c=y;let x=m.namespaces;this.options.fallbackNS&&(x=x.concat(this.options.fallbackNS));const v=l.count!==void 0&&!je(l.count),_=v&&!l.ordinal&&l.count===0,w=l.context!==void 0&&(je(l.context)||typeof l.context=="number")&&l.context!=="",M=l.lngs?l.lngs:this.languageUtils.toResolveHierarchy(l.lng||this.language,l.fallbackLng);x.forEach(E=>{this.isValidLookup(o)||(h=E,!j0[`${M[0]}-${E}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(h)&&(j0[`${M[0]}-${E}`]=!0,this.logger.warn(`key "${c}" for languages "${M.join(", ")}" won't get resolved as namespace "${h}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),M.forEach(A=>{if(this.isValidLookup(o))return;f=A;const z=[y];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(z,y,A,E,l);else{let k;v&&(k=this.pluralResolver.getSuffix(A,l.count,l));const U=`${this.options.pluralSeparator}zero`,O=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(l.ordinal&&k.indexOf(O)===0&&z.push(y+k.replace(O,this.options.pluralSeparator)),z.push(y+k),_&&z.push(y+U)),w){const V=`${y}${this.options.contextSeparator||"_"}${l.context}`;z.push(V),v&&(l.ordinal&&k.indexOf(O)===0&&z.push(V+k.replace(O,this.options.pluralSeparator)),z.push(V+k),_&&z.push(V+U))}}let N;for(;N=z.pop();)this.isValidLookup(o)||(d=N,o=this.getResource(A,E,N,l))}))})}),{res:o,usedKey:c,exactUsedKey:d,usedLng:f,usedNS:h}}isValidLookup(s){return s!==void 0&&!(!this.options.returnNull&&s===null)&&!(!this.options.returnEmptyString&&s==="")}getResource(s,l,o,c={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(s,l,o,c):this.resourceStore.getResource(s,l,o,c)}getUsedParamsDetails(s={}){const l=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],o=s.replace&&!je(s.replace);let c=o?s.replace:s;if(o&&typeof s.count<"u"&&(c.count=s.count),this.options.interpolation.defaultVariables&&(c={...this.options.interpolation.defaultVariables,...c}),!o){c={...c};for(const d of l)delete c[d]}return c}static hasDefaultValue(s){const l="defaultValue";for(const o in s)if(Object.prototype.hasOwnProperty.call(s,o)&&l===o.substring(0,l.length)&&s[o]!==void 0)return!0;return!1}}class w0{constructor(s){this.options=s,this.supportedLngs=this.options.supportedLngs||!1,this.logger=pn.create("languageUtils")}getScriptPartFromCode(s){if(s=bi(s),!s||s.indexOf("-")<0)return null;const l=s.split("-");return l.length===2||(l.pop(),l[l.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(l.join("-"))}getLanguagePartFromCode(s){if(s=bi(s),!s||s.indexOf("-")<0)return s;const l=s.split("-");return this.formatLanguageCode(l[0])}formatLanguageCode(s){if(je(s)&&s.indexOf("-")>-1){let l;try{l=Intl.getCanonicalLocales(s)[0]}catch{}return l&&this.options.lowerCaseLng&&(l=l.toLowerCase()),l||(this.options.lowerCaseLng?s.toLowerCase():s)}return this.options.cleanCode||this.options.lowerCaseLng?s.toLowerCase():s}isSupportedCode(s){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(s=this.getLanguagePartFromCode(s)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(s)>-1}getBestMatchFromCodes(s){if(!s)return null;let l;return s.forEach(o=>{if(l)return;const c=this.formatLanguageCode(o);(!this.options.supportedLngs||this.isSupportedCode(c))&&(l=c)}),!l&&this.options.supportedLngs&&s.forEach(o=>{if(l)return;const c=this.getScriptPartFromCode(o);if(this.isSupportedCode(c))return l=c;const d=this.getLanguagePartFromCode(o);if(this.isSupportedCode(d))return l=d;l=this.options.supportedLngs.find(f=>{if(f===d)return f;if(!(f.indexOf("-")<0&&d.indexOf("-")<0)&&(f.indexOf("-")>0&&d.indexOf("-")<0&&f.substring(0,f.indexOf("-"))===d||f.indexOf(d)===0&&d.length>1))return f})}),l||(l=this.getFallbackCodes(this.options.fallbackLng)[0]),l}getFallbackCodes(s,l){if(!s)return[];if(typeof s=="function"&&(s=s(l)),je(s)&&(s=[s]),Array.isArray(s))return s;if(!l)return s.default||[];let o=s[l];return o||(o=s[this.getScriptPartFromCode(l)]),o||(o=s[this.formatLanguageCode(l)]),o||(o=s[this.getLanguagePartFromCode(l)]),o||(o=s.default),o||[]}toResolveHierarchy(s,l){const o=this.getFallbackCodes((l===!1?[]:l)||this.options.fallbackLng||[],s),c=[],d=f=>{f&&(this.isSupportedCode(f)?c.push(f):this.logger.warn(`rejecting language code not found in supportedLngs: ${f}`))};return je(s)&&(s.indexOf("-")>-1||s.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&d(this.formatLanguageCode(s)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&d(this.getScriptPartFromCode(s)),this.options.load!=="currentOnly"&&d(this.getLanguagePartFromCode(s))):je(s)&&d(this.formatLanguageCode(s)),o.forEach(f=>{c.indexOf(f)<0&&d(this.formatLanguageCode(f))}),c}}const S0={zero:0,one:1,two:2,few:3,many:4,other:5},k0={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class P_{constructor(s,l={}){this.languageUtils=s,this.options=l,this.logger=pn.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(s,l={}){const o=bi(s==="dev"?"en":s),c=l.ordinal?"ordinal":"cardinal",d=JSON.stringify({cleanedCode:o,type:c});if(d in this.pluralRulesCache)return this.pluralRulesCache[d];let f;try{f=new Intl.PluralRules(o,{type:c})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),k0;if(!s.match(/-|_/))return k0;const p=this.languageUtils.getLanguagePartFromCode(s);f=this.getRule(p,l)}return this.pluralRulesCache[d]=f,f}needsPlural(s,l={}){let o=this.getRule(s,l);return o||(o=this.getRule("dev",l)),o?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(s,l,o={}){return this.getSuffixes(s,o).map(c=>`${l}${c}`)}getSuffixes(s,l={}){let o=this.getRule(s,l);return o||(o=this.getRule("dev",l)),o?o.resolvedOptions().pluralCategories.sort((c,d)=>S0[c]-S0[d]).map(c=>`${this.options.prepend}${l.ordinal?`ordinal${this.options.prepend}`:""}${c}`):[]}getSuffix(s,l,o={}){const c=this.getRule(s,o);return c?`${this.options.prepend}${o.ordinal?`ordinal${this.options.prepend}`:""}${c.select(l)}`:(this.logger.warn(`no plural rule found for: ${s}`),this.getSuffix("dev",l,o))}}const C0=(n,s,l,o=".",c=!0)=>{let d=G_(n,s,l);return!d&&c&&je(l)&&(d=Od(n,l,o),d===void 0&&(d=Od(s,l,o))),d},Nd=n=>n.replace(/\$/g,"$$$$");class z0{constructor(s={}){this.logger=pn.create("interpolator"),this.options=s,this.format=s?.interpolation?.format||(l=>l),this.init(s)}init(s={}){s.interpolation||(s.interpolation={escapeValue:!0});const{escape:l,escapeValue:o,useRawValueToEscape:c,prefix:d,prefixEscaped:f,suffix:h,suffixEscaped:p,formatSeparator:m,unescapeSuffix:y,unescapePrefix:x,nestingPrefix:v,nestingPrefixEscaped:_,nestingSuffix:w,nestingSuffixEscaped:M,nestingOptionsSeparator:E,maxReplaces:A,alwaysFormat:z}=s.interpolation;this.escape=l!==void 0?l:Z_,this.escapeValue=o!==void 0?o:!0,this.useRawValueToEscape=c!==void 0?c:!1,this.prefix=d?Fs(d):f||"{{",this.suffix=h?Fs(h):p||"}}",this.formatSeparator=m||",",this.unescapePrefix=y?"":x||"-",this.unescapeSuffix=this.unescapePrefix?"":y||"",this.nestingPrefix=v?Fs(v):_||Fs("$t("),this.nestingSuffix=w?Fs(w):M||Fs(")"),this.nestingOptionsSeparator=E||",",this.maxReplaces=A||1e3,this.alwaysFormat=z!==void 0?z:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const s=(l,o)=>l?.source===o?(l.lastIndex=0,l):new RegExp(o,"g");this.regexp=s(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=s(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=s(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(s,l,o,c){let d,f,h;const p=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},m=_=>{if(_.indexOf(this.formatSeparator)<0){const A=C0(l,p,_,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(A,void 0,o,{...c,...l,interpolationkey:_}):A}const w=_.split(this.formatSeparator),M=w.shift().trim(),E=w.join(this.formatSeparator).trim();return this.format(C0(l,p,M,this.options.keySeparator,this.options.ignoreJSONStructure),E,o,{...c,...l,interpolationkey:M})};this.resetRegExp();const y=c?.missingInterpolationHandler||this.options.missingInterpolationHandler,x=c?.interpolation?.skipOnVariables!==void 0?c.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:_=>Nd(_)},{regex:this.regexp,safeValue:_=>this.escapeValue?Nd(this.escape(_)):Nd(_)}].forEach(_=>{for(h=0;d=_.regex.exec(s);){const w=d[1].trim();if(f=m(w),f===void 0)if(typeof y=="function"){const E=y(s,d,c);f=je(E)?E:""}else if(c&&Object.prototype.hasOwnProperty.call(c,w))f="";else if(x){f=d[0];continue}else this.logger.warn(`missed to pass in variable ${w} for interpolating ${s}`),f="";else!je(f)&&!this.useRawValueToEscape&&(f=y0(f));const M=_.safeValue(f);if(s=s.replace(d[0],M),x?(_.regex.lastIndex+=f.length,_.regex.lastIndex-=d[0].length):_.regex.lastIndex=0,h++,h>=this.maxReplaces)break}}),s}nest(s,l,o={}){let c,d,f;const h=(p,m)=>{const y=this.nestingOptionsSeparator;if(p.indexOf(y)<0)return p;const x=p.split(new RegExp(`${y}[ ]*{`));let v=`{${x[1]}`;p=x[0],v=this.interpolate(v,f);const _=v.match(/'/g),w=v.match(/"/g);((_?.length??0)%2===0&&!w||w.length%2!==0)&&(v=v.replace(/'/g,'"'));try{f=JSON.parse(v),m&&(f={...m,...f})}catch(M){return this.logger.warn(`failed parsing options string in nesting for key ${p}`,M),`${p}${y}${v}`}return f.defaultValue&&f.defaultValue.indexOf(this.prefix)>-1&&delete f.defaultValue,p};for(;c=this.nestingRegexp.exec(s);){let p=[];f={...o},f=f.replace&&!je(f.replace)?f.replace:f,f.applyPostProcessor=!1,delete f.defaultValue;const m=/{.*}/.test(c[1])?c[1].lastIndexOf("}")+1:c[1].indexOf(this.formatSeparator);if(m!==-1&&(p=c[1].slice(m).split(this.formatSeparator).map(y=>y.trim()).filter(Boolean),c[1]=c[1].slice(0,m)),d=l(h.call(this,c[1].trim(),f),f),d&&c[0]===s&&!je(d))return d;je(d)||(d=y0(d)),d||(this.logger.warn(`missed to resolve ${c[1]} for nesting ${s}`),d=""),p.length&&(d=p.reduce((y,x)=>this.format(y,x,o.lng,{...o,interpolationkey:c[1].trim()}),d.trim())),s=s.replace(c[0],d),this.regexp.lastIndex=0}return s}}const e1=n=>{let s=n.toLowerCase().trim();const l={};if(n.indexOf("(")>-1){const o=n.split("(");s=o[0].toLowerCase().trim();const c=o[1].substring(0,o[1].length-1);s==="currency"&&c.indexOf(":")<0?l.currency||(l.currency=c.trim()):s==="relativetime"&&c.indexOf(":")<0?l.range||(l.range=c.trim()):c.split(";").forEach(f=>{if(f){const[h,...p]=f.split(":"),m=p.join(":").trim().replace(/^'+|'+$/g,""),y=h.trim();l[y]||(l[y]=m),m==="false"&&(l[y]=!1),m==="true"&&(l[y]=!0),isNaN(m)||(l[y]=parseInt(m,10))}})}return{formatName:s,formatOptions:l}},E0=n=>{const s={};return(l,o,c)=>{let d=c;c&&c.interpolationkey&&c.formatParams&&c.formatParams[c.interpolationkey]&&c[c.interpolationkey]&&(d={...d,[c.interpolationkey]:void 0});const f=o+JSON.stringify(d);let h=s[f];return h||(h=n(bi(o),c),s[f]=h),h(l)}},t1=n=>(s,l,o)=>n(bi(l),o)(s);class n1{constructor(s={}){this.logger=pn.create("formatter"),this.options=s,this.init(s)}init(s,l={interpolation:{}}){this.formatSeparator=l.interpolation.formatSeparator||",";const o=l.cacheInBuiltFormats?E0:t1;this.formats={number:o((c,d)=>{const f=new Intl.NumberFormat(c,{...d});return h=>f.format(h)}),currency:o((c,d)=>{const f=new Intl.NumberFormat(c,{...d,style:"currency"});return h=>f.format(h)}),datetime:o((c,d)=>{const f=new Intl.DateTimeFormat(c,{...d});return h=>f.format(h)}),relativetime:o((c,d)=>{const f=new Intl.RelativeTimeFormat(c,{...d});return h=>f.format(h,d.range||"day")}),list:o((c,d)=>{const f=new Intl.ListFormat(c,{...d});return h=>f.format(h)})}}add(s,l){this.formats[s.toLowerCase().trim()]=l}addCached(s,l){this.formats[s.toLowerCase().trim()]=E0(l)}format(s,l,o,c={}){const d=l.split(this.formatSeparator);if(d.length>1&&d[0].indexOf("(")>1&&d[0].indexOf(")")<0&&d.find(h=>h.indexOf(")")>-1)){const h=d.findIndex(p=>p.indexOf(")")>-1);d[0]=[d[0],...d.splice(1,h)].join(this.formatSeparator)}return d.reduce((h,p)=>{const{formatName:m,formatOptions:y}=e1(p);if(this.formats[m]){let x=h;try{const v=c?.formatParams?.[c.interpolationkey]||{},_=v.locale||v.lng||c.locale||c.lng||o;x=this.formats[m](h,_,{...y,...c,...v})}catch(v){this.logger.warn(v)}return x}else this.logger.warn(`there was no format function for ${m}`);return h},s)}}const a1=(n,s)=>{n.pending[s]!==void 0&&(delete n.pending[s],n.pendingCount--)};class s1 extends Oo{constructor(s,l,o,c={}){super(),this.backend=s,this.store=l,this.services=o,this.languageUtils=o.languageUtils,this.options=c,this.logger=pn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=c.maxParallelReads||10,this.readingCalls=0,this.maxRetries=c.maxRetries>=0?c.maxRetries:5,this.retryTimeout=c.retryTimeout>=1?c.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(o,c.backend,c)}queueLoad(s,l,o,c){const d={},f={},h={},p={};return s.forEach(m=>{let y=!0;l.forEach(x=>{const v=`${m}|${x}`;!o.reload&&this.store.hasResourceBundle(m,x)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?f[v]===void 0&&(f[v]=!0):(this.state[v]=1,y=!1,f[v]===void 0&&(f[v]=!0),d[v]===void 0&&(d[v]=!0),p[x]===void 0&&(p[x]=!0)))}),y||(h[m]=!0)}),(Object.keys(d).length||Object.keys(f).length)&&this.queue.push({pending:f,pendingCount:Object.keys(f).length,loaded:{},errors:[],callback:c}),{toLoad:Object.keys(d),pending:Object.keys(f),toLoadLanguages:Object.keys(h),toLoadNamespaces:Object.keys(p)}}loaded(s,l,o){const c=s.split("|"),d=c[0],f=c[1];l&&this.emit("failedLoading",d,f,l),!l&&o&&this.store.addResourceBundle(d,f,o,void 0,void 0,{skipCopy:!0}),this.state[s]=l?-1:2,l&&o&&(this.state[s]=0);const h={};this.queue.forEach(p=>{Y_(p.loaded,[d],f),a1(p,s),l&&p.errors.push(l),p.pendingCount===0&&!p.done&&(Object.keys(p.loaded).forEach(m=>{h[m]||(h[m]={});const y=p.loaded[m];y.length&&y.forEach(x=>{h[m][x]===void 0&&(h[m][x]=!0)})}),p.done=!0,p.errors.length?p.callback(p.errors):p.callback())}),this.emit("loaded",h),this.queue=this.queue.filter(p=>!p.done)}read(s,l,o,c=0,d=this.retryTimeout,f){if(!s.length)return f(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:s,ns:l,fcName:o,tried:c,wait:d,callback:f});return}this.readingCalls++;const h=(m,y)=>{if(this.readingCalls--,this.waitingReads.length>0){const x=this.waitingReads.shift();this.read(x.lng,x.ns,x.fcName,x.tried,x.wait,x.callback)}if(m&&y&&c<this.maxRetries){setTimeout(()=>{this.read.call(this,s,l,o,c+1,d*2,f)},d);return}f(m,y)},p=this.backend[o].bind(this.backend);if(p.length===2){try{const m=p(s,l);m&&typeof m.then=="function"?m.then(y=>h(null,y)).catch(h):h(null,m)}catch(m){h(m)}return}return p(s,l,h)}prepareLoading(s,l,o={},c){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),c&&c();je(s)&&(s=this.languageUtils.toResolveHierarchy(s)),je(l)&&(l=[l]);const d=this.queueLoad(s,l,o,c);if(!d.toLoad.length)return d.pending.length||c(),null;d.toLoad.forEach(f=>{this.loadOne(f)})}load(s,l,o){this.prepareLoading(s,l,{},o)}reload(s,l,o){this.prepareLoading(s,l,{reload:!0},o)}loadOne(s,l=""){const o=s.split("|"),c=o[0],d=o[1];this.read(c,d,"read",void 0,void 0,(f,h)=>{f&&this.logger.warn(`${l}loading namespace ${d} for language ${c} failed`,f),!f&&h&&this.logger.log(`${l}loaded namespace ${d} for language ${c}`,h),this.loaded(s,f,h)})}saveMissing(s,l,o,c,d,f={},h=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(l)){this.logger.warn(`did not save key "${o}" as the namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(o==null||o==="")){if(this.backend?.create){const p={...f,isUpdate:d},m=this.backend.create.bind(this.backend);if(m.length<6)try{let y;m.length===5?y=m(s,l,o,c,p):y=m(s,l,o,c),y&&typeof y.then=="function"?y.then(x=>h(null,x)).catch(h):h(null,y)}catch(y){h(y)}else m(s,l,o,c,h,p)}!s||!s[0]||this.store.addResource(s[0],l,o,c)}}}const jd=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let s={};if(typeof n[1]=="object"&&(s=n[1]),je(n[1])&&(s.defaultValue=n[1]),je(n[2])&&(s.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const l=n[3]||n[2];Object.keys(l).forEach(o=>{s[o]=l[o]})}return s},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),A0=n=>(je(n.ns)&&(n.ns=[n.ns]),je(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),je(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),ro=()=>{},r1=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(l=>{typeof n[l]=="function"&&(n[l]=n[l].bind(n))})},i1=n=>!!(n?.modules?.backend?.name?.indexOf("Locize")>0||n?.modules?.backend?.constructor?.name?.indexOf("Locize")>0||n?.options?.backend?.backends&&n.options.backend.backends.some(s=>s?.name?.indexOf("Locize")>0||s?.constructor?.name?.indexOf("Locize")>0));class hi extends Oo{constructor(s={},l){if(super(),this.options=A0(s),this.services={},this.logger=pn,this.modules={external:[]},r1(this),l&&!this.isInitialized&&!s.isClone){if(!this.options.initAsync)return this.init(s,l),this;setTimeout(()=>{this.init(s,l)},0)}}init(s={},l){this.isInitializing=!0,typeof s=="function"&&(l=s,s={}),s.defaultNS==null&&s.ns&&(je(s.ns)?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));const o=jd();this.options={...o,...this.options,...A0(s)},this.options.interpolation={...o.interpolation,...this.options.interpolation},s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=o.overloadTranslationOptionHandler),this.options.showSupportNotice!==!1&&!i1(this)&&typeof console<"u"&&typeof console.info<"u"&&console.info(" i18next is maintained with support from locize.com  consider powering your project with managed localization (AI, CDN, integrations): https://locize.com ");const c=m=>m?typeof m=="function"?new m:m:null;if(!this.options.isClone){this.modules.logger?pn.init(c(this.modules.logger),this.options):pn.init(null,this.options);let m;this.modules.formatter?m=this.modules.formatter:m=n1;const y=new w0(this.options);this.store=new N0(this.options.resources,this.options);const x=this.services;x.logger=pn,x.resourceStore=this.store,x.languageUtils=y,x.pluralResolver=new P_(y,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==o.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),m&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(x.formatter=c(m),x.formatter.init&&x.formatter.init(x,this.options),this.options.interpolation.format=x.formatter.format.bind(x.formatter)),x.interpolator=new z0(this.options),x.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},x.backendConnector=new s1(c(this.modules.backend),x.resourceStore,x,this.options),x.backendConnector.on("*",(_,...w)=>{this.emit(_,...w)}),this.modules.languageDetector&&(x.languageDetector=c(this.modules.languageDetector),x.languageDetector.init&&x.languageDetector.init(x,this.options.detection,this.options)),this.modules.i18nFormat&&(x.i18nFormat=c(this.modules.i18nFormat),x.i18nFormat.init&&x.i18nFormat.init(this)),this.translator=new No(this.services,this.options),this.translator.on("*",(_,...w)=>{this.emit(_,...w)}),this.modules.external.forEach(_=>{_.init&&_.init(this)})}if(this.format=this.options.interpolation.format,l||(l=ro),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const m=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);m.length>0&&m[0]!=="dev"&&(this.options.lng=m[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(m=>{this[m]=(...y)=>this.store[m](...y)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(m=>{this[m]=(...y)=>(this.store[m](...y),this)});const h=li(),p=()=>{const m=(y,x)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),h.resolve(x),l(y,x)};if(this.languages&&!this.isInitialized)return m(null,this.t.bind(this));this.changeLanguage(this.options.lng,m)};return this.options.resources||!this.options.initAsync?p():setTimeout(p,0),h}loadResources(s,l=ro){let o=l;const c=je(s)?s:this.language;if(typeof s=="function"&&(o=s),!this.options.resources||this.options.partialBundledLanguages){if(c?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return o();const d=[],f=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(m=>{m!=="cimode"&&d.indexOf(m)<0&&d.push(m)})};c?f(c):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(p=>f(p)),this.options.preload?.forEach?.(h=>f(h)),this.services.backendConnector.load(d,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),o(h)})}else o(null)}reloadResources(s,l,o){const c=li();return typeof s=="function"&&(o=s,s=void 0),typeof l=="function"&&(o=l,l=void 0),s||(s=this.languages),l||(l=this.options.ns),o||(o=ro),this.services.backendConnector.reload(s,l,d=>{c.resolve(),o(d)}),c}use(s){if(!s)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!s.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return s.type==="backend"&&(this.modules.backend=s),(s.type==="logger"||s.log&&s.warn&&s.error)&&(this.modules.logger=s),s.type==="languageDetector"&&(this.modules.languageDetector=s),s.type==="i18nFormat"&&(this.modules.i18nFormat=s),s.type==="postProcessor"&&Xp.addPostProcessor(s),s.type==="formatter"&&(this.modules.formatter=s),s.type==="3rdParty"&&this.modules.external.push(s),this}setResolvedLanguage(s){if(!(!s||!this.languages)&&!(["cimode","dev"].indexOf(s)>-1)){for(let l=0;l<this.languages.length;l++){const o=this.languages[l];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}!this.resolvedLanguage&&this.languages.indexOf(s)<0&&this.store.hasLanguageSomeTranslations(s)&&(this.resolvedLanguage=s,this.languages.unshift(s))}}changeLanguage(s,l){this.isLanguageChangingTo=s;const o=li();this.emit("languageChanging",s);const c=h=>{this.language=h,this.languages=this.services.languageUtils.toResolveHierarchy(h),this.resolvedLanguage=void 0,this.setResolvedLanguage(h)},d=(h,p)=>{p?this.isLanguageChangingTo===s&&(c(p),this.translator.changeLanguage(p),this.isLanguageChangingTo=void 0,this.emit("languageChanged",p),this.logger.log("languageChanged",p)):this.isLanguageChangingTo=void 0,o.resolve((...m)=>this.t(...m)),l&&l(h,(...m)=>this.t(...m))},f=h=>{!s&&!h&&this.services.languageDetector&&(h=[]);const p=je(h)?h:h&&h[0],m=this.store.hasLanguageSomeTranslations(p)?p:this.services.languageUtils.getBestMatchFromCodes(je(h)?[h]:h);m&&(this.language||c(m),this.translator.language||this.translator.changeLanguage(m),this.services.languageDetector?.cacheUserLanguage?.(m)),this.loadResources(m,y=>{d(y,m)})};return!s&&this.services.languageDetector&&!this.services.languageDetector.async?f(this.services.languageDetector.detect()):!s&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(f):this.services.languageDetector.detect(f):f(s),o}getFixedT(s,l,o){const c=(d,f,...h)=>{let p;typeof f!="object"?p=this.options.overloadTranslationOptionHandler([d,f].concat(h)):p={...f},p.lng=p.lng||c.lng,p.lngs=p.lngs||c.lngs,p.ns=p.ns||c.ns,p.keyPrefix!==""&&(p.keyPrefix=p.keyPrefix||o||c.keyPrefix);const m=this.options.keySeparator||".";let y;return p.keyPrefix&&Array.isArray(d)?y=d.map(x=>(typeof x=="function"&&(x=Ld(x,{...this.options,...f})),`${p.keyPrefix}${m}${x}`)):(typeof d=="function"&&(d=Ld(d,{...this.options,...f})),y=p.keyPrefix?`${p.keyPrefix}${m}${d}`:d),this.t(y,p)};return je(s)?c.lng=s:c.lngs=s,c.ns=l,c.keyPrefix=o,c}t(...s){return this.translator?.translate(...s)}exists(...s){return this.translator?.exists(...s)}setDefaultNamespace(s){this.options.defaultNS=s}hasLoadedNamespace(s,l={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const o=l.lng||this.resolvedLanguage||this.languages[0],c=this.options?this.options.fallbackLng:!1,d=this.languages[this.languages.length-1];if(o.toLowerCase()==="cimode")return!0;const f=(h,p)=>{const m=this.services.backendConnector.state[`${h}|${p}`];return m===-1||m===0||m===2};if(l.precheck){const h=l.precheck(this,f);if(h!==void 0)return h}return!!(this.hasResourceBundle(o,s)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||f(o,s)&&(!c||f(d,s)))}loadNamespaces(s,l){const o=li();return this.options.ns?(je(s)&&(s=[s]),s.forEach(c=>{this.options.ns.indexOf(c)<0&&this.options.ns.push(c)}),this.loadResources(c=>{o.resolve(),l&&l(c)}),o):(l&&l(),Promise.resolve())}loadLanguages(s,l){const o=li();je(s)&&(s=[s]);const c=this.options.preload||[],d=s.filter(f=>c.indexOf(f)<0&&this.services.languageUtils.isSupportedCode(f));return d.length?(this.options.preload=c.concat(d),this.loadResources(f=>{o.resolve(),l&&l(f)}),o):(l&&l(),Promise.resolve())}dir(s){if(s||(s=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!s)return"rtl";try{const c=new Intl.Locale(s);if(c&&c.getTextInfo){const d=c.getTextInfo();if(d&&d.direction)return d.direction}}catch{}const l=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],o=this.services?.languageUtils||new w0(jd());return s.toLowerCase().indexOf("-latn")>1?"ltr":l.indexOf(o.getLanguagePartFromCode(s))>-1||s.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(s={},l){const o=new hi(s,l);return o.createInstance=hi.createInstance,o}cloneInstance(s={},l=ro){const o=s.forkResourceStore;o&&delete s.forkResourceStore;const c={...this.options,...s,isClone:!0},d=new hi(c);if((s.debug!==void 0||s.prefix!==void 0)&&(d.logger=d.logger.clone(s)),["store","services","language"].forEach(h=>{d[h]=this[h]}),d.services={...this.services},d.services.utils={hasLoadedNamespace:d.hasLoadedNamespace.bind(d)},o){const h=Object.keys(this.store.data).reduce((p,m)=>(p[m]={...this.store.data[m]},p[m]=Object.keys(p[m]).reduce((y,x)=>(y[x]={...p[m][x]},y),p[m]),p),{});d.store=new N0(h,c),d.services.resourceStore=d.store}if(s.interpolation){const p={...jd().interpolation,...this.options.interpolation,...s.interpolation},m={...c,interpolation:p};d.services.interpolator=new z0(m)}return d.translator=new No(d.services,c),d.translator.on("*",(h,...p)=>{d.emit(h,...p)}),d.init(c,l),d.translator.options=c,d.translator.backendConnector.services.utils={hasLoadedNamespace:d.hasLoadedNamespace.bind(d)},d}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Nt=hi.createInstance();Nt.createInstance;Nt.dir;Nt.init;Nt.loadResources;Nt.reloadResources;Nt.use;Nt.changeLanguage;Nt.getFixedT;Nt.t;Nt.exists;Nt.setDefaultNamespace;Nt.hasLoadedNamespace;Nt.loadNamespaces;Nt.loadLanguages;const l1=(n,s,l,o)=>{const c=[l,{code:s,...o||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(c,"warn","react-i18next::",!0);ts(c[0])&&(c[0]=`react-i18next:: ${c[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...c):console?.warn&&console.warn(...c)},T0={},Qp=(n,s,l,o)=>{ts(l)&&T0[l]||(ts(l)&&(T0[l]=new Date),l1(n,s,l,o))},Fp=(n,s)=>()=>{if(n.isInitialized)s();else{const l=()=>{setTimeout(()=>{n.off("initialized",l)},0),s()};n.on("initialized",l)}},Rd=(n,s,l)=>{n.loadNamespaces(s,Fp(n,l))},M0=(n,s,l,o)=>{if(ts(l)&&(l=[l]),n.options.preload&&n.options.preload.indexOf(s)>-1)return Rd(n,l,o);l.forEach(c=>{n.options.ns.indexOf(c)<0&&n.options.ns.push(c)}),n.loadLanguages(s,Fp(n,o))},o1=(n,s,l={})=>!s.languages||!s.languages.length?(Qp(s,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:s.languages}),!0):s.hasLoadedNamespace(n,{lng:l.lng,precheck:(o,c)=>{if(l.bindI18n&&l.bindI18n.indexOf("languageChanging")>-1&&o.services.backendConnector.backend&&o.isLanguageChangingTo&&!c(o.isLanguageChangingTo,n))return!1}}),ts=n=>typeof n=="string",c1=n=>typeof n=="object"&&n!==null,u1=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,d1={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},f1=n=>d1[n],g1=n=>n.replace(u1,f1);let $d={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:g1,transDefaultProps:void 0};const h1=(n={})=>{$d={...$d,...n}},m1=()=>$d;let Kp;const p1=n=>{Kp=n},x1=()=>Kp,y1={type:"3rdParty",init(n){h1(n.options.react),p1(n)}},b1=T.createContext();class v1{constructor(){this.usedNamespaces={}}addUsedNamespaces(s){s.forEach(l=>{this.usedNamespaces[l]||(this.usedNamespaces[l]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var _1=Qv();const N1=(n,s)=>ts(s)?s:c1(s)&&ts(s.defaultValue)?s.defaultValue:Array.isArray(n)?n[n.length-1]:n,j1={t:N1,ready:!1},w1=()=>()=>{},ut=(n,s={})=>{const{i18n:l}=s,{i18n:o,defaultNS:c}=T.useContext(b1)||{},d=l||o||x1();d&&!d.reportNamespaces&&(d.reportNamespaces=new v1),d||Qp(d,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const f=T.useMemo(()=>({...m1(),...d?.options?.react,...s}),[d,s]),{useSuspense:h,keyPrefix:p}=f,m=c||d?.options?.defaultNS,y=ts(m)?[m]:m||["translation"],x=T.useMemo(()=>y,y);d?.reportNamespaces?.addUsedNamespaces?.(x);const v=T.useRef(0),_=T.useCallback(L=>{if(!d)return w1;const{bindI18n:F,bindI18nStore:Y}=f,Z=()=>{v.current+=1,L()};return F&&d.on(F,Z),Y&&d.store.on(Y,Z),()=>{F&&F.split(" ").forEach(te=>d.off(te,Z)),Y&&Y.split(" ").forEach(te=>d.store.off(te,Z))}},[d,f]),w=T.useRef(),M=T.useCallback(()=>{if(!d)return j1;const L=!!(d.isInitialized||d.initializedStoreOnce)&&x.every(R=>o1(R,d,f)),F=s.lng||d.language,Y=v.current,Z=w.current;if(Z&&Z.ready===L&&Z.lng===F&&Z.keyPrefix===p&&Z.revision===Y)return Z;const C={t:d.getFixedT(F,f.nsMode==="fallback"?x:x[0],p),ready:L,lng:F,keyPrefix:p,revision:Y};return w.current=C,C},[d,x,p,f,s.lng]),[E,A]=T.useState(0),{t:z,ready:N}=_1.useSyncExternalStore(_,M,M);T.useEffect(()=>{if(d&&!N&&!h){const L=()=>A(F=>F+1);s.lng?M0(d,s.lng,x,L):Rd(d,x,L)}},[d,s.lng,x,N,h,E]);const k=d||{},U=T.useRef(null),O=T.useRef(),V=L=>{const F=Object.getOwnPropertyDescriptors(L);F.__original&&delete F.__original;const Y=Object.create(Object.getPrototypeOf(L),F);if(!Object.prototype.hasOwnProperty.call(Y,"__original"))try{Object.defineProperty(Y,"__original",{value:L,writable:!1,enumerable:!1,configurable:!1})}catch{}return Y},G=T.useMemo(()=>{const L=k,F=L?.language;let Y=L;L&&(U.current&&U.current.__original===L?O.current!==F?(Y=V(L),U.current=Y,O.current=F):Y=U.current:(Y=V(L),U.current=Y,O.current=F));const Z=[z,Y,N];return Z.t=z,Z.i18n=Y,Z.ready=N,Z},[z,k,N,k.resolvedLanguage,k.language,k.languages]);if(d&&h&&!N)throw new Promise(L=>{const F=()=>L();s.lng?M0(d,s.lng,x,F):Rd(d,x,F)});return G},{slice:S1,forEach:k1}=[];function C1(n){return k1.call(S1.call(arguments,1),s=>{if(s)for(const l in s)n[l]===void 0&&(n[l]=s[l])}),n}function z1(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(l=>l.test(n))}const D0=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,E1=function(n,s){const o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},c=encodeURIComponent(s);let d=`${n}=${c}`;if(o.maxAge>0){const f=o.maxAge-0;if(Number.isNaN(f))throw new Error("maxAge should be a Number");d+=`; Max-Age=${Math.floor(f)}`}if(o.domain){if(!D0.test(o.domain))throw new TypeError("option domain is invalid");d+=`; Domain=${o.domain}`}if(o.path){if(!D0.test(o.path))throw new TypeError("option path is invalid");d+=`; Path=${o.path}`}if(o.expires){if(typeof o.expires.toUTCString!="function")throw new TypeError("option expires is invalid");d+=`; Expires=${o.expires.toUTCString()}`}if(o.httpOnly&&(d+="; HttpOnly"),o.secure&&(d+="; Secure"),o.sameSite)switch(typeof o.sameSite=="string"?o.sameSite.toLowerCase():o.sameSite){case!0:d+="; SameSite=Strict";break;case"lax":d+="; SameSite=Lax";break;case"strict":d+="; SameSite=Strict";break;case"none":d+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o.partitioned&&(d+="; Partitioned"),d},O0={create(n,s,l,o){let c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};l&&(c.expires=new Date,c.expires.setTime(c.expires.getTime()+l*60*1e3)),o&&(c.domain=o),document.cookie=E1(n,s,c)},read(n){const s=`${n}=`,l=document.cookie.split(";");for(let o=0;o<l.length;o++){let c=l[o];for(;c.charAt(0)===" ";)c=c.substring(1,c.length);if(c.indexOf(s)===0)return c.substring(s.length,c.length)}return null},remove(n,s){this.create(n,"",-1,s)}};var A1={name:"cookie",lookup(n){let{lookupCookie:s}=n;if(s&&typeof document<"u")return O0.read(s)||void 0},cacheUserLanguage(n,s){let{lookupCookie:l,cookieMinutes:o,cookieDomain:c,cookieOptions:d}=s;l&&typeof document<"u"&&O0.create(l,n,o,c,d)}},T1={name:"querystring",lookup(n){let{lookupQuerystring:s}=n,l;if(typeof window<"u"){let{search:o}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(o=window.location.hash.substring(window.location.hash.indexOf("?")));const d=o.substring(1).split("&");for(let f=0;f<d.length;f++){const h=d[f].indexOf("=");h>0&&d[f].substring(0,h)===s&&(l=d[f].substring(h+1))}}return l}},M1={name:"hash",lookup(n){let{lookupHash:s,lookupFromHashIndex:l}=n,o;if(typeof window<"u"){const{hash:c}=window.location;if(c&&c.length>2){const d=c.substring(1);if(s){const f=d.split("&");for(let h=0;h<f.length;h++){const p=f[h].indexOf("=");p>0&&f[h].substring(0,p)===s&&(o=f[h].substring(p+1))}}if(o)return o;if(!o&&l>-1){const f=c.match(/\/([a-zA-Z-]*)/g);return Array.isArray(f)?f[typeof l=="number"?l:0]?.replace("/",""):void 0}}}return o}};let Ks=null;const L0=()=>{if(Ks!==null)return Ks;try{if(Ks=typeof window<"u"&&window.localStorage!==null,!Ks)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{Ks=!1}return Ks};var D1={name:"localStorage",lookup(n){let{lookupLocalStorage:s}=n;if(s&&L0())return window.localStorage.getItem(s)||void 0},cacheUserLanguage(n,s){let{lookupLocalStorage:l}=s;l&&L0()&&window.localStorage.setItem(l,n)}};let Is=null;const R0=()=>{if(Is!==null)return Is;try{if(Is=typeof window<"u"&&window.sessionStorage!==null,!Is)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{Is=!1}return Is};var O1={name:"sessionStorage",lookup(n){let{lookupSessionStorage:s}=n;if(s&&R0())return window.sessionStorage.getItem(s)||void 0},cacheUserLanguage(n,s){let{lookupSessionStorage:l}=s;l&&R0()&&window.sessionStorage.setItem(l,n)}},L1={name:"navigator",lookup(n){const s=[];if(typeof navigator<"u"){const{languages:l,userLanguage:o,language:c}=navigator;if(l)for(let d=0;d<l.length;d++)s.push(l[d]);o&&s.push(o),c&&s.push(c)}return s.length>0?s:void 0}},R1={name:"htmlTag",lookup(n){let{htmlTag:s}=n,l;const o=s||(typeof document<"u"?document.documentElement:null);return o&&typeof o.getAttribute=="function"&&(l=o.getAttribute("lang")),l}},$1={name:"path",lookup(n){let{lookupFromPathIndex:s}=n;if(typeof window>"u")return;const l=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(l)?l[typeof s=="number"?s:0]?.replace("/",""):void 0}},H1={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:s}=n;const l=typeof s=="number"?s+1:1,o=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(o)return o[l]}};let Ip=!1;try{document.cookie,Ip=!0}catch{}const Jp=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Ip||Jp.splice(1,1);const U1=()=>({order:Jp,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class Wp{constructor(s){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(s,l)}init(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=s,this.options=C1(l,this.options||{},U1()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=c=>c.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=o,this.addDetector(A1),this.addDetector(T1),this.addDetector(D1),this.addDetector(O1),this.addDetector(L1),this.addDetector(R1),this.addDetector($1),this.addDetector(H1),this.addDetector(M1)}addDetector(s){return this.detectors[s.name]=s,this}detect(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,l=[];return s.forEach(o=>{if(this.detectors[o]){let c=this.detectors[o].lookup(this.options);c&&typeof c=="string"&&(c=[c]),c&&(l=l.concat(c))}}),l=l.filter(o=>o!=null&&!z1(o)).map(o=>this.options.convertDetectedLanguage(o)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?l:l.length>0?l[0]:null}cacheUserLanguage(s){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;l&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(s)>-1||l.forEach(o=>{this.detectors[o]&&this.detectors[o].cacheUserLanguage(s,this.options)}))}}Wp.type="languageDetector";const B1="Welcome",V1="Settings",q1="Language",Y1="Select Language",G1="Import Contacts",X1="Dashboard",Z1="Dashboard",Q1="Inbox",F1="Team",K1="Contacts",I1="Lists",J1="New Campaign",W1="History",P1="Templates",eN="Automations",tN="Media Library",nN="Settings",aN="Logout",sN="WHATSMS ORGANIZATION",rN="Logged in as {{name}}",iN="Import Contacts",lN="Click or drag CSV here",oN="Columns: name, phone, interests",cN="Cancel",uN="Importing...",dN="Import Contacts",fN="Import Complete",gN="Imported",hN="Skipped",mN="Errors:",pN="Import More",xN="Done",yN="Sent",bN="Delivered",vN="Read",_N="Replied",NN="Failed",jN="Cancel",wN="Save",SN="Delete",kN="Edit",CN="Loading...",zN="Dashboard",EN="Welcome back! Here's an overview of your campaigns.",AN="New Campaign",TN="Total Campaigns",MN="Messages Sent",DN="Total Contacts",ON="Contact Lists",LN="{{count}} active",RN="{{rate}}% delivery rate",$N="+{{count}} this week",HN="Active lists",UN="Message Trends",BN="Last 7 days",VN="Campaign Comparison",qN="Recent campaigns",YN="No campaigns yet",GN="Performance Overview",XN="Message delivery metrics",ZN="Delivery Rate",QN="Read Rate",FN="Recent Campaigns",KN="Latest updates",IN="View All Campaigns",JN="AI Performance Insights",WN="AI-powered analysis",PN="Analyze",ej="Analyze Again",tj="Analyzing...",nj="Start Analysis ",aj="Contacts",sj="Manage your audience and contact lists",rj="Fetch WhatsApp",ij="Import CSV",lj="Add Contact",oj="Active Lists",cj="New This Week",uj="Showing",dj="Search contacts...",fj="Filter by Tag",gj="Refresh",hj="Contact",mj="Phone",pj="Tags",xj="Lists",yj="Actions",bj="All Contacts",vj="Message Templates",_j="Design structured WhatsApp messages",Nj="Create Template",jj="No templates yet",wj="Edit Template",Sj="New Template",kj="Template Name",Cj="Header (Optional)",zj="Body Text",Ej="Footer (Optional)",Aj="Preview",Tj="Save Template",Mj="Settings",Dj="Configure your WhatsApp Business API connection",Oj="Customize the look and feel",Lj="API Credentials",Rj="Enter your Meta Developer keys",$j="Phone Number ID",Hj="Found in WhatsApp API Setup",Uj="Access Token",Bj="Permanent or Temporary Access Token",Vj="WABA ID",qj="WhatsApp Business Account ID (for reference)",Yj="Save Credentials",Gj="Test Connectivity",Xj="Recipient Phone (e.g. 1555...)",Zj="Send Test",Qj="Sends a standard 'hello_world' template.",Fj="Note: If using a Meta Test Number, you can only send to Verified Numbers.",Kj="Note: Credentials must be saved before testing.",Ij="Webhook Setup",Jj="Connect to Meta for incoming messages",Wj="Callback URL",Pj="Verify Token",ew="Editable",tw="Must match the Verify Token in Meta Dashboard",nw="Setup Instructions:",aw="Go to your App Dashboard in Meta Developers.",sw="Select WhatsApp > Configuration.",rw="Click Edit under Webhook.",iw="Paste the Callback URL and Verify Token above.",lw="Enable events:",ow="Configuration saved successfully!",cw="Failed to save configuration",uw="Please enter a phone number to test",dw="Connection Verified!",fw="Test Connection Failed",gw="Campaigns",hw="View and manage your marketing campaigns",mw="Active Now",pw="Recipients",xw="Progress",yw="No {{filter}} campaigns found",bw="Create your first campaign to get started",vw="Create Campaign",_w="Start sending this campaign now?",Nw="Stop this campaign?",jw="Delete this campaign?",ww="Draft",Sw="Scheduled",kw="In Progress",Cw="Completed",zw="Stopped",Ew="Automations",Aw="Build automated message flows and chatbots",Tw="Create Flow",Mw="No automations yet",Dw="Create your first automated workflow to engage customers 24/7.",Ow="Get Started",Lw="runs",Rw="Active",$w="Draft",Hw="Are you sure? This will stop any active executions.",Uw="Failed to rename flow",Bw="Press Enter to save",Vw="Components",qw="Messages",Yw="Group Actions",Gw="Tag",Xw="Funnel",Zw="Others",Qw="Simple text",Fw="Media files",Kw="Interactive buttons",Iw="Interactive list",Jw="Template",Ww="Add to group",Pw="Remove from Group",e2="Add Tags",t2="Remove Tags",n2="Add/Edit to Pipeline",a2="Remove from Pipeline",s2="Delay",r2="Configure Trigger",i2="Trigger Event",l2="Keywords",o2="Comma separated",c2="Save Flow",u2="Saving...",d2="New conversation",f2="Text contains specific keywords",g2="Contact has specific tags",h2="Contact has been affected to a pipeline",m2="Advanced Short response",p2="Team",x2="Add, edit, and delete accounts in your team",y2="Invite User",b2="Search Team",v2="Columns",_2="Name",N2="Email",j2="Role",w2="Active/Inactive",S2="Assignable",k2="Last updated",C2="Invite Team Member",z2="Send an invitation to join your team.",E2="Send Invitation",A2="Agent",T2="Manager",M2="Admin",D2="Are you sure you want to remove this team member?",O2="Failed to add team member",L2="Verified",R2="Unverified",$2="No team members found.",H2="Team Inbox",U2="Open",B2="Closed",V2="Loading conversations...",q2="No conversations found.",Y2="Unassigned",G2="Unknown Contact",X2="No messages yet",Z2="Loading conversation...",Q2="Conversation not found",F2="Back",K2="Mark Closed",I2="Reopen",J2="Type a message...",W2="Send",P2="Assignment",eS="Contact Info",tS="Name:",nS="Phone:",aS="Welcome Back",sS="Sign in to manage your campaigns",rS="Create Account",iS="Sign up to start managing campaigns",lS="Username",oS="Password",cS="Enter your username",uS="Enter your password",dS="Create a password (min 6 chars)",fS="Sign In",gS="Create Account",hS="Don't have an account?",mS="Already have an account?",pS="Create one",xS="Sign In",yS="Contact Lists",bS="Organize your contacts into targeted lists",vS="Create List",_S="Your Lists",NS="No lists yet. Create your first list!",jS="Create New List",wS="List Name",SS="Description",kS="e.g. VIP Customers",CS="Add Contacts",zS="From List",ES="Add Contacts to {{list}}",AS="Copy From Another List",TS="All contacts from the selected list will be copied to",MS="Copy Contacts",DS="List created successfully!",OS="List deleted",LS="Media Library",RS="Manage images, videos, and documents for your campaigns",$S="Upload File",HS="Uploading...",US="Click to upload",BS="Images, Videos, PDF (Max 16MB)",VS="Upload Media",qS="No media files yet",YS="Upload your first file",GS="AI Assistant",XS="Ask me anything about your {{type}}",ZS="Hi! I can help you write, edit, or analyze your {{type}}.",QS="Ask me anything...",FS="Analyze my text",KS="Make it shorter",IS="Add emojis",JS="Improve CTA",WS="Analyze my current text and give feedback",PS="Make my current text shorter and more concise",ek="Add relevant emojis to my current text",tk="Improve the call-to-action in my text",nk="Copy",ak="Copied!",sk="Apply",rk="Thinking...",ik="Compose",lk="Recipients",ok="Review",ck="Create Campaign",uk="Compose and send messages to your contacts",dk="Compose Message",fk="Campaign Name",gk="Use Template",hk="Message Content",mk="Use {{name}} or {{phone}} for personalization",pk="Schedule (Optional)",xk="Select Recipients",yk="Choose which contact lists will receive this campaign",bk="No contact lists found",vk="Create a list first",_k="Total Recipients:",Nk="Review Campaign",jk="Scheduled For",wk="Continue",Sk="Campaign Created!",kk="Your campaign has been successfully saved as a draft. What would you like to do next?",Ck="Send Now",zk="Go to Dashboard",Ek="Campaign started! Sending messages...",Ak="File size must be less than 10MB",Tk="Internal Notes",Mk="Loading notes...",Dk="No notes yet.",Ok="Unknown User",Lk="Add an internal note...",Rk="Add Note",$k="Sorry, I encountered an error. Please try again.",Hk="e.g., January Newsletter",Uk="Attach Image or PDF",Bk="Creating...",Vk="Failed to start campaign: ",qk="Failed to upload file",Yk="Campaign Name *",Gk="characters",Xk="{{count}} contacts from {{lists}} lists",Zk={welcome:B1,settings:V1,language:q1,select_language:Y1,import_contacts:G1,dashboard:X1,nav_dashboard:Z1,nav_inbox:Q1,nav_team:F1,nav_contacts:K1,nav_lists:I1,nav_new_campaign:J1,nav_history:W1,nav_templates:P1,nav_automations:eN,nav_media_library:tN,nav_settings:nN,nav_logout:aN,organization_header:sN,logged_in_as:rN,import_contacts_title:iN,drag_drop_csv:lN,csv_columns:oN,cancel:cN,importing:uN,import_button:dN,import_complete:fN,imported_count:gN,skipped_count:hN,errors_label:mN,import_more:pN,done:xN,status_sent:yN,status_delivered:bN,status_read:vN,status_replied:_N,status_failed:NN,btn_cancel:jN,btn_save:wN,btn_delete:SN,btn_edit:kN,loading:CN,dashboard_title:zN,dashboard_subtitle:EN,btn_new_campaign:AN,stat_total_campaigns:TN,stat_messages_sent:MN,stat_total_contacts:DN,stat_contact_lists:ON,active_count:LN,delivery_rate:RN,this_week:$N,active_lists:HN,chart_message_trends:UN,last_7_days:BN,chart_campaign_comparison:VN,recent_campaigns:qN,no_campaigns_yet:YN,performance_overview:GN,performance_subtitle:XN,rate_delivery:ZN,rate_read:QN,recent_campaigns_title:FN,latest_updates:KN,btn_view_all_campaigns:IN,ai_insights_title:JN,ai_insights_subtitle:WN,btn_analyze:PN,btn_analyze_again:ej,status_analyzing:tj,btn_start_analysis:nj,contacts_title:aj,contacts_subtitle:sj,btn_fetch_whatsapp:rj,btn_import_csv:ij,btn_add_contact:lj,stat_active_lists:oj,stat_new_this_week:cj,label_showing:uj,placeholder_search_contacts:dj,btn_filter_tag:fj,btn_refresh:gj,col_contact:hj,col_phone:mj,col_tags:pj,col_lists:xj,col_actions:yj,label_all_contacts:bj,templates_title:vj,templates_subtitle:_j,btn_create_template:Nj,no_templates:jj,modal_edit_template:wj,modal_new_template:Sj,label_template_name:kj,label_header_optional:Cj,label_body_text:zj,label_footer_optional:Ej,label_preview:Aj,btn_save_template:Tj,settings_title:Mj,settings_subtitle:Dj,section_appearance:Oj,section_credentials:Lj,section_credentials_subtitle:Rj,label_phone_id:$j,hint_phone_id:Hj,label_access_token:Uj,placeholder_access_token:Bj,label_waba_id:Vj,hint_waba_id:qj,btn_save_credentials:Yj,label_test_connectivity:Gj,placeholder_test_phone:Xj,btn_send_test:Zj,hint_test_message:Qj,hint_test_warning:Fj,hint_save_before_test:Kj,section_webhook:Ij,section_webhook_subtitle:Jj,label_callback_url:Wj,label_verify_token:Pj,label_editable:ew,hint_verify_token:tw,label_setup_instructions:nw,instr_step_1:aw,instr_step_2:sw,instr_step_3:rw,instr_step_4:iw,instr_step_5:lw,success_config_saved:ow,error_config_save:cw,error_no_phone:uw,success_connection:dw,error_connection:fw,campaigns_title:gw,campaigns_subtitle:hw,stat_active_now:mw,stat_recipients:pw,label_progress:xw,no_campaigns_filter:yw,start_campaign_prompt:bw,btn_create_campaign:vw,confirm_send_campaign:_w,confirm_stop_campaign:Nw,confirm_delete_campaign:jw,status_draft:ww,status_scheduled:Sw,status_in_progress:kw,status_completed:Cw,status_stopped:zw,automations_title:Ew,automations_subtitle:Aw,btn_create_flow:Tw,no_automations:Mw,no_automations_subtitle:Dw,btn_get_started:Ow,label_runs:Lw,tooltip_active:Rw,tooltip_draft:$w,confirm_delete_flow:Hw,error_rename_flow:Uw,placeholder_rename:Bw,flow_builder_components:Vw,cat_messages:qw,cat_groups:Yw,cat_tags:Gw,cat_funnel:Xw,cat_others:Zw,node_text:Qw,node_media:Fw,node_buttons:Kw,node_list:Iw,node_template:Jw,node_add_group:Ww,node_remove_group:Pw,node_add_tag:e2,node_remove_tag:t2,node_add_pipeline:n2,node_remove_pipeline:a2,node_delay:s2,config_trigger:r2,label_trigger_event:i2,label_keywords:l2,hint_comma_separated:o2,btn_save_flow:c2,status_saving:u2,trigger_new_conversation:d2,trigger_keywords:f2,trigger_has_tags:g2,trigger_pipeline_update:h2,trigger_short_response:m2,team_title:p2,team_subtitle:x2,btn_invite_user:y2,placeholder_search_team:b2,btn_columns:v2,col_name:_2,col_email:N2,col_role:j2,col_active:w2,col_assignable:S2,col_last_updated:k2,modal_invite_title:C2,modal_invite_subtitle:z2,btn_send_invitation:E2,role_agent:A2,role_manager:T2,role_admin:M2,confirm_remove_member:D2,error_add_member:O2,tab_verified:L2,tab_unverified:R2,no_team_members:$2,inbox_title:H2,filter_open:U2,filter_closed:B2,loading_conversations:V2,no_conversations:q2,label_unassigned:Y2,unknown_contact:G2,no_messages_yet:X2,conversation_loading:Z2,conversation_not_found:Q2,btn_back:F2,btn_mark_closed:K2,btn_reopen:I2,placeholder_type_message:J2,btn_send:W2,label_assignment:P2,label_contact_info:eS,label_name:tS,label_phone:nS,login_title:aS,login_subtitle:sS,register_title:rS,register_subtitle:iS,label_username:lS,label_password:oS,placeholder_username:cS,placeholder_password:uS,placeholder_create_password:dS,btn_login:fS,btn_create_account:gS,text_no_account:hS,text_has_account:mS,link_create_one:pS,link_sign_in:xS,lists_title:yS,lists_subtitle:bS,btn_create_list:vS,header_your_lists:_S,no_lists:NS,modal_create_list:jS,label_list_name:wS,label_list_desc:SS,placeholder_list_name:kS,btn_add_contacts:CS,btn_from_list:zS,modal_add_contacts:ES,modal_copy_list:AS,text_copy_explanation:TS,btn_copy_contacts:MS,msg_list_created:DS,msg_list_deleted:OS,media_title:LS,media_subtitle:RS,btn_upload_file:$S,status_uploading:HS,text_drag_drop:US,text_file_types:BS,modal_upload_title:VS,no_media:qS,btn_upload_first:YS,ai_title:GS,ai_subtitle:XS,ai_welcome:ZS,placeholder_ask_ai:QS,action_analyze:FS,action_shorten:KS,action_emojis:IS,action_cta:JS,prompt_analyze:WS,prompt_shorten:PS,prompt_emojis:ek,prompt_cta:tk,btn_copy:nk,btn_copied:ak,btn_apply:sk,status_thinking:rk,step_compose:ik,step_recipients:lk,step_review:ok,builder_title:ck,builder_subtitle:uk,section_compose:dk,label_campaign_name:fk,label_use_template:gk,label_message_content:hk,hint_personalization:mk,label_schedule:pk,section_select_recipients:xk,text_select_recipients_subtitle:yk,no_lists_found:bk,link_create_list:vk,label_total_recipients:_k,section_review:Nk,label_scheduled_for:jk,btn_continue:wk,modal_success_title:Sk,text_success_subtitle:kk,btn_send_now:Ck,btn_go_dashboard:zk,msg_campaign_started:Ek,error_file_size:Ak,notes_title:Tk,notes_loading:Mk,notes_empty:Dk,notes_unknown_user:Ok,notes_placeholder:Lk,btn_add_note:Rk,error_ai:$k,placeholder_campaign_name:Hk,tooltip_attach:Uk,status_creating:Bk,error_start_campaign:Vk,error_upload_failed:qk,label_campaign_name_required:Yk,text_characters:Gk,text_review_recipients:Xk},Qk="Bienvenue",Fk="Paramtres",Kk="Langue",Ik="Changer la langue",Jk="Importer des contacts",Wk="Tableau de bord",Pk="Tableau de bord",eC="Bote de rception",tC="quipe",nC="Contacts",aC="Listes",sC="Nouvelle Campagne",rC="Historique",iC="Modles",lC="Automations",oC="Mdiathque",cC="Paramtres",uC="Dconnexion",dC="ORGANISATION WHATSMS",fC="Connect en tant que {{name}}",gC="Importer des contacts",hC="Cliquez ou glissez un CSV ici",mC="Colonnes : nom, tlphone, intrts",pC="Annuler",xC="Importation...",yC="Importer",bC="Importation termine",vC="Import",_C="Ignor",NC="Erreurs :",jC="Importer plus",wC="Termin",SC="Envoy",kC="Livr",CC="Lu",zC="Rpondu",EC="chou",AC="Annuler",TC="Enregistrer",MC="Supprimer",DC="Modifier",OC="Chargement...",LC="Tableau de bord",RC="Bon retour ! Voici un aperu de vos campagnes.",$C="Nouvelle Campagne",HC="Total des campagnes",UC="Messages envoys",BC="Total des contacts",VC="Listes de contacts",qC="{{count}} actives",YC="Taux de livraison {{rate}}%",GC="+{{count}} cette semaine",XC="Listes actives",ZC="Tendances des messages",QC="7 derniers jours",FC="Comparaison des campagnes",KC="Campagnes rcentes",IC="Aucune campagne pour le moment",JC="Aperu des performances",WC="Mtriques de livraison des messages",PC="Taux de livraison",e4="Taux de lecture",t4="Campagnes rcentes",n4="Dernires mises  jour",a4="Voir toutes les campagnes",s4="Analyses IA",r4="Analyse par IA",i4="Analyser",l4="Analyser  nouveau",o4="Analyse en cours...",c4="Lancer l'analyse ",u4="Contacts",d4="Grez votre audience et vos listes de contacts",f4="Rcuprer WhatsApp",g4="Importer CSV",h4="Ajouter un contact",m4="Listes actives",p4="Nouveaux cette semaine",x4="Affichage",y4="Rechercher des contacts...",b4="Filtrer par tiquette",v4="Actualiser",_4="Contact",N4="Tlphone",j4="tiquettes",w4="Listes",S4="Actions",k4="Tous les contacts",C4="Modles de messages",z4="Concevez des messages WhatsApp structurs",E4="Crer un modle",A4="Aucun modle pour le moment",T4="Modifier le modle",M4="Nouveau modle",D4="Nom du modle",O4="En-tte (Optionnel)",L4="Corps du texte",R4="Pied de page (Optionnel)",$4="Aperu",H4="Enregistrer le modle",U4="Paramtres",B4="Configurez votre connexion API WhatsApp Business",V4="Personnaliser l'apparence",q4="Identifiants API",Y4="Entrez vos cls Meta Developer",G4="ID du numro de tlphone",X4="Trouv dans la configuration API WhatsApp",Z4="Jeton d'accs",Q4="Jeton d'accs permanent ou temporaire",F4="ID WABA",K4="ID du compte WhatsApp Business (pour rfrence)",I4="Enregistrer les identifiants",J4="Tester la connectivit",W4="Tlphone du destinataire (ex: 1555...)",P4="Envoyer le test",e5="Envoie un modle standard 'hello_world'.",t5="Note : Si vous utilisez un numro de test Meta, vous ne pouvez envoyer qu'aux numros vrifis.",n5="Note : Les identifiants doivent tre enregistrs avant le test.",a5="Configuration Webhook",s5="Connecter  Meta pour les messages entrants",r5="URL de rappel",i5="Jeton de vrification",l5="Modifiable",o5="Doit correspondre au jeton de vrification dans le tableau de bord Meta",c5="Instructions de configuration :",u5="Allez dans votre tableau de bord d'application Meta Developers.",d5="Slectionnez WhatsApp > Configuration.",f5="Cliquez sur Modifier sous Webhook.",g5="Collez l'URL de rappel et le jeton de vrification ci-dessus.",h5="Activez les vnements :",m5="Configuration enregistre avec succs !",p5="chec de l'enregistrement de la configuration",x5="Veuillez entrer un numro de tlphone pour tester",y5="Connexion vrifie !",b5="chec du test de connexion",v5="Campagnes",_5="Voir et grer vos campagnes marketing",N5="Actives maintenant",j5="Destinataires",w5="Progression",S5="Aucune campagne {{filter}} trouve",k5="Crez votre premire campagne pour commencer",C5="Crer une campagne",z5="Commencer l'envoi de cette campagne maintenant ?",E5="Arrter cette campagne ?",A5="Supprimer cette campagne ?",T5="Brouillon",M5="Planifie",D5="En cours",O5="Termine",L5="Arrte",R5="Automatisations",$5="Crez des flux de messages automatiss et des chatbots",H5="Crer un flux",U5="Aucune automatisation pour le moment",B5="Crez votre premier flux de travail automatis pour engager les clients 24h/24 et 7j/7.",V5="Commencer",q5="excutions",Y5="Actif",G5="Brouillon",X5="tes-vous sr ? Cela arrtera toutes les excutions actives.",Z5="chec du renommage du flux",Q5="Appuyez sur Entre pour enregistrer",F5="Composants",K5="Messages",I5="Actions de groupe",J5="tiquette",W5="Entonnoir",P5="Autres",e3="Texte simple",t3="Fichiers multimdias",n3="Boutons interactifs",a3="Liste interactive",s3="Modle",r3="Ajouter au groupe",i3="Retirer du groupe",l3="Ajouter des tiquettes",o3="Retirer des tiquettes",c3="Ajouter/Modifier au pipeline",u3="Retirer du pipeline",d3="Dlai",f3="Configurer le dclencheur",g3="vnement dclencheur",h3="Mots-cls",m3="Spars par des virgules",p3="Enregistrer le flux",x3="Enregistrement...",y3="Nouvelle conversation",b3="Le texte contient des mots-cls spcifiques",v3="Le contact a des tiquettes spcifiques",_3="Le contact a t affect  un pipeline",N3="Rponse courte avance",j3="quipe",w3="Ajoutez, modifiez et supprimez des comptes dans votre quipe",S3="Inviter un utilisateur",k3="Rechercher une quipe",C3="Colonnes",z3="Nom",E3="E-mail",A3="Rle",T3="Actif/Inactif",M3="Assignable",D3="Dernire mise  jour",O3="Inviter un membre de l'quipe",L3="Envoyer une invitation  rejoindre votre quipe.",R3="Envoyer l'invitation",$3="Agent",H3="Manager",U3="Admin",B3="tes-vous sr de vouloir supprimer ce membre de l'quipe ?",V3="chec de l'ajout du membre de l'quipe",q3="Vrifi",Y3="Non vrifi",G3="Aucun membre de l'quipe trouv.",X3="Bote de rception d'quipe",Z3="Ouvert",Q3="Ferm",F3="Chargement des conversations...",K3="Aucune conversation trouve.",I3="Non assign",J3="Contact inconnu",W3="Aucun message pour le moment",P3="Chargement de la conversation...",ez="Conversation introuvable",tz="Retour",nz="Marquer comme ferm",az="Rouvrir",sz="Tapez un message...",rz="Envoyer",iz="Affectation",lz="Informations de contact",oz="Nom :",cz="Tlphone :",uz="Bon retour",dz="Connectez-vous pour grer vos campagnes",fz="Crer un compte",gz="Inscrivez-vous pour commencer  grer vos campagnes",hz="Nom d'utilisateur",mz="Mot de passe",pz="Entrez votre nom d'utilisateur",xz="Entrez votre mot de passe",yz="Crez un mot de passe (min 6 car.)",bz="Se connecter",vz="Crer un compte",_z="Vous n'avez pas de compte ?",Nz="Vous avez dj un compte ?",jz="Crer un compte",wz="Se connecter",Sz="Listes de contacts",kz="Organisez vos contacts en listes cibles",Cz="Crer une liste",zz="Vos listes",Ez="Aucune liste. Crez votre premire liste !",Az="Crer une nouvelle liste",Tz="Nom de la liste",Mz="Description",Dz="ex. Clients VIP",Oz="Ajouter des contacts",Lz="Depuis une liste",Rz="Ajouter des contacts  {{list}}",$z="Copier depuis une autre liste",Hz="Tous les contacts de la liste slectionne seront copis vers",Uz="Copier les contacts",Bz="Liste cre avec succs !",Vz="Liste supprime",qz="Mdiathque",Yz="Grez les images, vidos et documents de vos campagnes",Gz="Tlcharger un fichier",Xz="Tlchargement...",Zz="Cliquez pour tlcharger",Qz="Images, Vidos, PDF (Max 16 Mo)",Fz="Tlcharger un mdia",Kz="Aucun fichier mdia",Iz="Tlchargez votre premier fichier",Jz="Assistant IA",Wz="Posez-moi des questions sur votre {{type}}",Pz="Bonjour ! Je peux vous aider  rdiger, modifier ou analyser votre {{type}}.",eE="Demandez-moi n'importe quoi...",tE="Analyser mon texte",nE="Raccourcir",aE="Ajouter des mojis",sE="Amliorer le CTA",rE="Analyse mon texte actuel et donne-moi un retour",iE="Rends mon texte plus court et concis",lE="Ajoute des mojis pertinents",oE="Amliore l'appel  l'action",cE="Copier",uE="Copi !",dE="Appliquer",fE="Rflexion...",gE="Rdiger",hE="Destinataires",mE="Vrifier",pE="Crer une campagne",xE="Rdigez et envoyez des messages  vos contacts",yE="Rdiger le message",bE="Nom de la campagne",vE="Utiliser un modle",_E="Contenu du message",NE="Utilisez {{name}} ou {{phone}} pour la personnalisation",jE="Planifier (Optionnel)",wE="Slectionner les destinataires",SE="Choisissez les listes de contacts qui recevront cette campagne",kE="Aucune liste de contacts trouve",CE="Crez d'abord une liste",zE="Total des destinataires :",EE="Vrifier la campagne",AE="Planifi pour",TE="Continuer",ME="Campagne cre !",DE="Votre campagne a t enregistre comme brouillon. Que souhaitez-vous faire ?",OE="Envoyer maintenant",LE="Aller au tableau de bord",RE="Campagne lance ! Envoi des messages...",$E="La taille du fichier doit tre infrieure  10 Mo",HE="Notes internes",UE="Chargement des notes...",BE="Pas encore de notes.",VE="Utilisateur inconnu",qE="Ajouter une note interne...",YE="Ajouter une note",GE="Dsol, j'ai rencontr une erreur. Veuillez ressayer.",XE="ex : Newsletter de janvier",ZE="Joindre une image ou un PDF",QE="Cration...",FE="chec du lancement de la campagne : ",KE="chec du tlchargement du fichier",IE="Nom de la campagne *",JE="caractres",WE="{{count}} contacts de {{lists}} listes",PE={welcome:Qk,settings:Fk,language:Kk,select_language:Ik,import_contacts:Jk,dashboard:Wk,nav_dashboard:Pk,nav_inbox:eC,nav_team:tC,nav_contacts:nC,nav_lists:aC,nav_new_campaign:sC,nav_history:rC,nav_templates:iC,nav_automations:lC,nav_media_library:oC,nav_settings:cC,nav_logout:uC,organization_header:dC,logged_in_as:fC,import_contacts_title:gC,drag_drop_csv:hC,csv_columns:mC,cancel:pC,importing:xC,import_button:yC,import_complete:bC,imported_count:vC,skipped_count:_C,errors_label:NC,import_more:jC,done:wC,status_sent:SC,status_delivered:kC,status_read:CC,status_replied:zC,status_failed:EC,btn_cancel:AC,btn_save:TC,btn_delete:MC,btn_edit:DC,loading:OC,dashboard_title:LC,dashboard_subtitle:RC,btn_new_campaign:$C,stat_total_campaigns:HC,stat_messages_sent:UC,stat_total_contacts:BC,stat_contact_lists:VC,active_count:qC,delivery_rate:YC,this_week:GC,active_lists:XC,chart_message_trends:ZC,last_7_days:QC,chart_campaign_comparison:FC,recent_campaigns:KC,no_campaigns_yet:IC,performance_overview:JC,performance_subtitle:WC,rate_delivery:PC,rate_read:e4,recent_campaigns_title:t4,latest_updates:n4,btn_view_all_campaigns:a4,ai_insights_title:s4,ai_insights_subtitle:r4,btn_analyze:i4,btn_analyze_again:l4,status_analyzing:o4,btn_start_analysis:c4,contacts_title:u4,contacts_subtitle:d4,btn_fetch_whatsapp:f4,btn_import_csv:g4,btn_add_contact:h4,stat_active_lists:m4,stat_new_this_week:p4,label_showing:x4,placeholder_search_contacts:y4,btn_filter_tag:b4,btn_refresh:v4,col_contact:_4,col_phone:N4,col_tags:j4,col_lists:w4,col_actions:S4,label_all_contacts:k4,templates_title:C4,templates_subtitle:z4,btn_create_template:E4,no_templates:A4,modal_edit_template:T4,modal_new_template:M4,label_template_name:D4,label_header_optional:O4,label_body_text:L4,label_footer_optional:R4,label_preview:$4,btn_save_template:H4,settings_title:U4,settings_subtitle:B4,section_appearance:V4,section_credentials:q4,section_credentials_subtitle:Y4,label_phone_id:G4,hint_phone_id:X4,label_access_token:Z4,placeholder_access_token:Q4,label_waba_id:F4,hint_waba_id:K4,btn_save_credentials:I4,label_test_connectivity:J4,placeholder_test_phone:W4,btn_send_test:P4,hint_test_message:e5,hint_test_warning:t5,hint_save_before_test:n5,section_webhook:a5,section_webhook_subtitle:s5,label_callback_url:r5,label_verify_token:i5,label_editable:l5,hint_verify_token:o5,label_setup_instructions:c5,instr_step_1:u5,instr_step_2:d5,instr_step_3:f5,instr_step_4:g5,instr_step_5:h5,success_config_saved:m5,error_config_save:p5,error_no_phone:x5,success_connection:y5,error_connection:b5,campaigns_title:v5,campaigns_subtitle:_5,stat_active_now:N5,stat_recipients:j5,label_progress:w5,no_campaigns_filter:S5,start_campaign_prompt:k5,btn_create_campaign:C5,confirm_send_campaign:z5,confirm_stop_campaign:E5,confirm_delete_campaign:A5,status_draft:T5,status_scheduled:M5,status_in_progress:D5,status_completed:O5,status_stopped:L5,automations_title:R5,automations_subtitle:$5,btn_create_flow:H5,no_automations:U5,no_automations_subtitle:B5,btn_get_started:V5,label_runs:q5,tooltip_active:Y5,tooltip_draft:G5,confirm_delete_flow:X5,error_rename_flow:Z5,placeholder_rename:Q5,flow_builder_components:F5,cat_messages:K5,cat_groups:I5,cat_tags:J5,cat_funnel:W5,cat_others:P5,node_text:e3,node_media:t3,node_buttons:n3,node_list:a3,node_template:s3,node_add_group:r3,node_remove_group:i3,node_add_tag:l3,node_remove_tag:o3,node_add_pipeline:c3,node_remove_pipeline:u3,node_delay:d3,config_trigger:f3,label_trigger_event:g3,label_keywords:h3,hint_comma_separated:m3,btn_save_flow:p3,status_saving:x3,trigger_new_conversation:y3,trigger_keywords:b3,trigger_has_tags:v3,trigger_pipeline_update:_3,trigger_short_response:N3,team_title:j3,team_subtitle:w3,btn_invite_user:S3,placeholder_search_team:k3,btn_columns:C3,col_name:z3,col_email:E3,col_role:A3,col_active:T3,col_assignable:M3,col_last_updated:D3,modal_invite_title:O3,modal_invite_subtitle:L3,btn_send_invitation:R3,role_agent:$3,role_manager:H3,role_admin:U3,confirm_remove_member:B3,error_add_member:V3,tab_verified:q3,tab_unverified:Y3,no_team_members:G3,inbox_title:X3,filter_open:Z3,filter_closed:Q3,loading_conversations:F3,no_conversations:K3,label_unassigned:I3,unknown_contact:J3,no_messages_yet:W3,conversation_loading:P3,conversation_not_found:ez,btn_back:tz,btn_mark_closed:nz,btn_reopen:az,placeholder_type_message:sz,btn_send:rz,label_assignment:iz,label_contact_info:lz,label_name:oz,label_phone:cz,login_title:uz,login_subtitle:dz,register_title:fz,register_subtitle:gz,label_username:hz,label_password:mz,placeholder_username:pz,placeholder_password:xz,placeholder_create_password:yz,btn_login:bz,btn_create_account:vz,text_no_account:_z,text_has_account:Nz,link_create_one:jz,link_sign_in:wz,lists_title:Sz,lists_subtitle:kz,btn_create_list:Cz,header_your_lists:zz,no_lists:Ez,modal_create_list:Az,label_list_name:Tz,label_list_desc:Mz,placeholder_list_name:Dz,btn_add_contacts:Oz,btn_from_list:Lz,modal_add_contacts:Rz,modal_copy_list:$z,text_copy_explanation:Hz,btn_copy_contacts:Uz,msg_list_created:Bz,msg_list_deleted:Vz,media_title:qz,media_subtitle:Yz,btn_upload_file:Gz,status_uploading:Xz,text_drag_drop:Zz,text_file_types:Qz,modal_upload_title:Fz,no_media:Kz,btn_upload_first:Iz,ai_title:Jz,ai_subtitle:Wz,ai_welcome:Pz,placeholder_ask_ai:eE,action_analyze:tE,action_shorten:nE,action_emojis:aE,action_cta:sE,prompt_analyze:rE,prompt_shorten:iE,prompt_emojis:lE,prompt_cta:oE,btn_copy:cE,btn_copied:uE,btn_apply:dE,status_thinking:fE,step_compose:gE,step_recipients:hE,step_review:mE,builder_title:pE,builder_subtitle:xE,section_compose:yE,label_campaign_name:bE,label_use_template:vE,label_message_content:_E,hint_personalization:NE,label_schedule:jE,section_select_recipients:wE,text_select_recipients_subtitle:SE,no_lists_found:kE,link_create_list:CE,label_total_recipients:zE,section_review:EE,label_scheduled_for:AE,btn_continue:TE,modal_success_title:ME,text_success_subtitle:DE,btn_send_now:OE,btn_go_dashboard:LE,msg_campaign_started:RE,error_file_size:$E,notes_title:HE,notes_loading:UE,notes_empty:BE,notes_unknown_user:VE,notes_placeholder:qE,btn_add_note:YE,error_ai:GE,placeholder_campaign_name:XE,tooltip_attach:ZE,status_creating:QE,error_start_campaign:FE,error_upload_failed:KE,label_campaign_name_required:IE,text_characters:JE,text_review_recipients:WE};Nt.use(Wp).use(y1).init({resources:{en:{translation:Zk},fr:{translation:PE}},lng:"fr",fallbackLng:"fr",interpolation:{escapeValue:!1}});const eA="/api";class tA{constructor(){this.baseUrl=eA,this.token=localStorage.getItem("token")}setToken(s){this.token=s,s?localStorage.setItem("token",s):localStorage.removeItem("token")}getToken(){return this.token}async request(s,l={}){const o=`${this.baseUrl}${s}`,c={"Content-Type":"application/json",...l.headers};this.token&&(c.Authorization=`Bearer ${this.token}`);const d={...l,headers:c};l.body&&typeof l.body=="object"&&!(l.body instanceof FormData)&&(d.body=JSON.stringify(l.body)),l.body instanceof FormData&&delete c["Content-Type"];const f=await fetch(o,d);if(f.status===401&&!s.includes("/auth/login"))throw this.setToken(null),window.location.href="/login",new Error("Session expired. Please login again.");const h=await f.text();let p;try{p=h?JSON.parse(h):{}}catch(m){throw console.error("API Error:",m,"Response was not JSON:",h),new Error(`Server Error (${f.status}): Please check browser console for details.`)}if(!f.ok)throw new Error(p.message||p.error||"An error occurred");return p}async get(s,l={}){return this.request(s,{...l,method:"GET"})}async post(s,l,o={}){return this.request(s,{...o,method:"POST",body:l})}async put(s,l,o={}){return this.request(s,{...o,method:"PUT",body:l})}async delete(s,l={}){return this.request(s,{...l,method:"DELETE"})}async login(s,l){const o=await this.request("/auth/login",{method:"POST",body:{username:s,password:l}});return this.setToken(o.token),o}async register(s,l){const o=await this.request("/auth/register",{method:"POST",body:{username:s,password:l}});return this.setToken(o.token),o}async getMe(){return this.request("/auth/me")}logout(){this.setToken(null)}async getContacts(s={}){const l=new URLSearchParams(s).toString();return this.request(`/contacts${l?`?${l}`:""}`)}async getContactStats(){return this.request("/contacts/stats")}async getContactTags(){return this.request("/contacts/tags")}async getContact(s){return this.request(`/contacts/${s}`)}async createContact(s){return this.request("/contacts",{method:"POST",body:s})}async updateContact(s,l){return this.request(`/contacts/${s}`,{method:"PUT",body:l})}async deleteContact(s){return this.request(`/contacts/${s}`,{method:"DELETE"})}async importContacts(s){const l=new FormData;return l.append("file",s),this.request("/contacts/import",{method:"POST",body:l})}async fetchWhatsAppContacts(){return this.request("/contacts/fetch-whatsapp",{method:"POST"})}async uploadFile(s){const l=new FormData;return l.append("file",s),this.request("/upload",{method:"POST",body:l})}async getLists(){return this.request("/lists")}async getList(s){return this.request(`/lists/${s}`)}async createList(s){return this.request("/lists",{method:"POST",body:s})}async updateList(s,l){return this.request(`/lists/${s}`,{method:"PUT",body:l})}async deleteList(s){return this.request(`/lists/${s}`,{method:"DELETE"})}async addContactsToList(s,l){return this.request(`/lists/${s}/contacts`,{method:"POST",body:{contactIds:l}})}async removeContactFromList(s,l){return this.request(`/lists/${s}/contacts/${l}`,{method:"DELETE"})}async getCampaigns(s={}){const l=new URLSearchParams(s).toString();return this.request(`/campaigns${l?`?${l}`:""}`)}async getCampaignStats(){return this.request("/campaigns/stats")}async getCampaign(s){return this.request(`/campaigns/${s}`)}async getCampaignRecipients(s,l={}){const o=new URLSearchParams(l).toString();return this.request(`/campaigns/${s}/recipients${o?`?${o}`:""}`)}async createCampaign(s){return this.request("/campaigns",{method:"POST",body:s})}async updateCampaign(s,l){return this.request(`/campaigns/${s}`,{method:"PUT",body:l})}async deleteCampaign(s){return this.request(`/campaigns/${s}`,{method:"DELETE"})}async sendCampaign(s){return this.request(`/campaigns/${s}/send`,{method:"POST"})}async stopCampaign(s){return this.request(`/campaigns/${s}/stop`,{method:"POST"})}async getTemplates(){return this.request("/templates")}async getTemplate(s){return this.request(`/templates/${s}`)}async createTemplate(s){return this.request("/templates",{method:"POST",body:s})}async updateTemplate(s,l){return this.request(`/templates/${s}`,{method:"PUT",body:l})}async deleteTemplate(s){return this.request(`/templates/${s}`,{method:"DELETE"})}async getMedia(s={}){const l=new URLSearchParams(s).toString();return this.request(`/media${l?`?${l}`:""}`)}async uploadMedia(s){const l=new FormData;return l.append("file",s),this.request("/media/upload",{method:"POST",body:l})}async deleteMedia(s){return this.request(`/media/${s}`,{method:"DELETE"})}async getTeamMembers(){return this.request("/team")}async addTeamMember(s){return this.request("/team",{method:"POST",body:s})}async updateTeamMember(s,l){return this.request(`/team/${s}`,{method:"PUT",body:l})}async deleteTeamMember(s){return this.request(`/team/${s}`,{method:"DELETE"})}async getConversations(s={}){const l=new URLSearchParams(s).toString();return this.request(`/conversations${l?`?${l}`:""}`)}async getConversation(s){return this.request(`/conversations/${s}`)}async sendMessage(s,l){return this.request(`/conversations/${s}/messages`,{method:"POST",body:l})}async assignConversation(s,l){return this.request(`/conversations/${s}/assign`,{method:"PUT",body:{assignedToId:l}})}async updateConversationStatus(s,l){return this.request(`/conversations/${s}/status`,{method:"PUT",body:{status:l}})}async getNotes(s){return this.request(`/notes/contact/${s}`)}async addNote(s){return this.request("/notes",{method:"POST",body:s})}}const ce=new tA,Pp=T.createContext(null),Pd=()=>{const n=T.useContext(Pp);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},nA=({children:n})=>{const[s,l]=T.useState(null),[o,c]=T.useState(!0),[d,f]=T.useState(null);T.useEffect(()=>{(async()=>{if(ce.getToken())try{const _=await ce.getMe();l(_.user)}catch(_){console.error("Auth check failed:",_),ce.logout()}c(!1)})()},[]);const y={user:s,loading:o,error:d,isAuthenticated:!!s,login:async(x,v)=>{f(null);try{const _=await ce.login(x,v);return l(_.user),_}catch(_){throw f(_.message),_}},register:async(x,v)=>{f(null);try{const _=await ce.register(x,v);return l(_.user),_}catch(_){throw f(_.message),_}},logout:()=>{ce.logout(),l(null)}};return r.jsx(Pp.Provider,{value:y,children:n})},ex=T.createContext(null),Lo=()=>{const n=T.useContext(ex);if(!n)throw new Error("useToast must be used within a ToastProvider");return n},aA=({id:n,type:s,message:l,onClose:o})=>{const c={success:r.jsx(Td,{className:"text-blue-500",size:20}),error:r.jsx(Ap,{className:"text-red-500",size:20}),warning:r.jsx(Ca,{className:"text-amber-500",size:20}),info:r.jsx(t_,{className:"text-emerald-500",size:20})},d={success:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",error:"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",warning:"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800",info:"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800"};return r.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-xl border shadow-lg backdrop-blur-sm animate-slide-up ${d[s]}`,style:{minWidth:"300px"},children:[c[s],r.jsx("p",{className:"flex-1 text-sm font-medium text-gray-800 dark:text-gray-200",children:l}),r.jsx("button",{onClick:()=>o(n),className:"p-1 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg transition-colors",children:r.jsx(_t,{size:16,className:"text-gray-400"})})]})},sA=({children:n})=>{const[s,l]=T.useState([]),o=T.useCallback(f=>{l(h=>h.filter(p=>p.id!==f))},[]),c=T.useCallback((f,h,p=4e3)=>{const m=Date.now()+Math.random();l(y=>[...y,{id:m,type:f,message:h}]),setTimeout(()=>{o(m)},p)},[o]),d={success:f=>c("success",f),error:f=>c("error",f),warning:f=>c("warning",f),info:f=>c("info",f)};return r.jsxs(ex.Provider,{value:d,children:[n,r.jsx("div",{className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-2",children:s.map(f=>r.jsx(aA,{id:f.id,type:f.type,message:f.message,onClose:o},f.id))})]})},tx=T.createContext(),nx=()=>T.useContext(tx),rA=({children:n})=>{const[s,l]=T.useState(()=>typeof window<"u"?localStorage.getItem("theme")==="dark"||!localStorage.getItem("theme")&&window.matchMedia("(prefers-color-scheme: dark)").matches:!1);T.useEffect(()=>{s?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[s]);const o=()=>l(!s);return r.jsx(tx.Provider,{value:{isDark:s,toggleTheme:o},children:n})},iA=({children:n})=>{const{isAuthenticated:s,loading:l}=Pd(),o=qp();return l?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background-light dark:bg-background-dark",children:r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 border-4 border-primary/30 border-t-primary rounded-full animate-spin"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading..."})]})}):s?n:r.jsx(A_,{to:"/login",state:{from:o},replace:!0})},lA=()=>{const{isDark:n}=nx(),[s,l]=T.useState(!1),{user:o,logout:c}=Pd(),d=rs(),{t:f}=ut(),h=()=>{c(),d("/login")},p=[{to:"/",icon:Tp,label:f("nav_dashboard"),end:!0},{to:"/inbox",icon:n_,label:f("nav_inbox")},{to:"/team",icon:a_,label:f("nav_team")},{to:"/contacts",icon:mn,label:f("nav_contacts")},{to:"/lists",icon:Kd,label:f("nav_lists")},{to:"/campaigns/new",icon:s_,label:f("nav_new_campaign")},{to:"/campaigns",icon:r_,label:f("nav_history"),end:!0},{to:"/templates",icon:Ci,label:f("nav_templates")},{to:"/automations",icon:bo,label:f("nav_automations")},{to:"/media",icon:pi,label:f("nav_media_library")},{to:"/settings",icon:Md,label:f("nav_settings")}],m=p.filter(x=>!["/team","/settings"].includes(x.to)),y=p.filter(x=>["/team","/settings"].includes(x.to));return r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-background-dark text-gray-900 dark:text-gray-100 transition-colors duration-300",children:[r.jsx("aside",{className:"w-72 bg-[#F3F5FA] dark:bg-surface-dark border-r border-gray-200/50 dark:border-gray-800/80 flex-col hidden md:flex font-sans",children:r.jsxs("div",{className:"p-4 flex flex-col h-full",children:[r.jsx("div",{className:"mb-6 mx-2",children:r.jsx("div",{className:"bg-emerald-100/50 dark:bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 px-4 py-3 rounded-2xl flex items-center justify-center font-bold text-sm tracking-wide shadow-sm backdrop-blur-sm",children:f("organization_header")})}),r.jsxs("div",{className:"bg-white dark:bg-gray-800/50 rounded-[2rem] p-4 shadow-sm flex-1 overflow-y-auto mb-4",children:[r.jsx("div",{className:"mb-4 px-2 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Menu"}),r.jsx("nav",{className:"space-y-1",children:m.map((x,v)=>r.jsxs(so,{to:x.to,end:x.end,className:({isActive:_})=>`flex items-center gap-3 px-4 py-3 rounded-2xl transition-all duration-200 font-medium group ${_?"bg-emerald-50 dark:bg-emerald-500/20 text-emerald-600 dark:text-emerald-300 shadow-sm":"text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-gray-800 dark:hover:text-gray-200"}`,style:{animationDelay:`${v*.05}s`},children:[r.jsx(x.icon,{size:20,className:`flex-shrink-0 transition-colors ${({isActive:_})=>_?"text-emerald-500":"text-gray-400 group-hover:text-gray-600"}`,strokeWidth:1.8}),r.jsx("span",{children:x.label})]},x.to))})]}),r.jsxs("div",{className:"px-2 space-y-1 mb-2",children:[y.map(x=>r.jsxs(so,{to:x.to,className:({isActive:v})=>`flex items-center gap-3 px-4 py-3 rounded-2xl transition-all duration-200 font-medium group ${v?"text-emerald-600 dark:text-emerald-300":"text-gray-500 dark:text-gray-400 hover:bg-emerald-50/50 dark:hover:bg-gray-800/50 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[r.jsx(x.icon,{size:20,className:"flex-shrink-0",strokeWidth:1.8}),r.jsx("span",{children:x.label})]},x.to)),r.jsxs("button",{onClick:h,className:"flex items-center gap-3 w-full px-4 py-3 text-gray-500 dark:text-gray-400 hover:bg-red-50 dark:hover:bg-red-900/10 hover:text-red-600 dark:hover:text-red-400 rounded-2xl transition-all duration-200 font-medium group",children:[r.jsx(l0,{size:20,className:"group-hover:text-red-500 transition-colors",strokeWidth:1.8}),r.jsx("span",{children:f("nav_logout")})]})]}),r.jsx("div",{className:"px-6 py-2",children:r.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-600",children:o?f("logged_in_as",{name:o.username}):""})})]})}),s&&r.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 md:hidden animate-fade-in",onClick:()=>l(!1)}),r.jsx("aside",{className:`fixed inset-y-0 left-0 w-80 bg-[#F3F5FA] dark:bg-surface-dark border-r border-gray-200 dark:border-gray-800 flex flex-col z-50 transform transition-transform duration-300 md:hidden ${s?"translate-x-0":"-translate-x-full"}`,children:r.jsxs("div",{className:"p-4 flex flex-col h-full",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 mx-2",children:[r.jsx("div",{className:"bg-emerald-100/50 dark:bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 px-4 py-2 rounded-xl font-bold text-sm tracking-wide",children:"WHATSMS"}),r.jsx("button",{onClick:()=>l(!1),className:"p-2 rounded-xl hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500",children:r.jsx(_t,{size:20})})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800/50 rounded-[2rem] p-4 shadow-sm flex-1 overflow-y-auto mb-4",children:r.jsx("nav",{className:"space-y-1",children:m.map(x=>r.jsxs(so,{to:x.to,end:x.end,onClick:()=>l(!1),className:({isActive:v})=>`flex items-center gap-3 px-4 py-3 rounded-2xl transition-all duration-200 font-medium ${v?"bg-emerald-50 dark:bg-emerald-500/20 text-emerald-600 dark:text-emerald-300 shadow-sm":"text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[r.jsx(x.icon,{size:20,className:"flex-shrink-0",strokeWidth:1.8}),r.jsx("span",{children:x.label})]},x.to))})}),r.jsxs("div",{className:"px-2 space-y-1 mb-2",children:[y.map(x=>r.jsxs(so,{to:x.to,onClick:()=>l(!1),className:({isActive:v})=>`flex items-center gap-3 px-4 py-3 rounded-2xl transition-all duration-200 font-medium group ${v?"text-emerald-600 dark:text-emerald-300":"text-gray-500 dark:text-gray-400 hover:bg-emerald-50/50 dark:hover:bg-gray-800/50 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[r.jsx(x.icon,{size:20,className:"flex-shrink-0",strokeWidth:1.8}),r.jsx("span",{children:x.label})]},x.to)),r.jsxs("button",{onClick:()=>{h(),l(!1)},className:"flex items-center gap-3 w-full px-4 py-3 text-gray-500 dark:text-gray-400 hover:bg-red-50 dark:hover:bg-red-900/10 hover:text-red-600 rounded-2xl transition-all duration-200 font-medium",children:[r.jsx(l0,{size:20,strokeWidth:1.8}),r.jsx("span",{children:f("nav_logout")})]})]})]})}),r.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden bg-white dark:bg-background-dark relative z-0",children:[r.jsxs("header",{className:"md:hidden bg-white dark:bg-surface-dark border-b border-gray-200 dark:border-gray-800 px-4 py-3.5 flex items-center justify-between shadow-soft",children:[r.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[r.jsx("span",{className:"w-8 h-8 bg-emerald-600 rounded-lg flex items-center justify-center text-white text-xs",children:"WS"}),r.jsx("span",{className:"text-gray-800 dark:text-white",children:"WhatsSMS"})]}),r.jsx("div",{className:"flex gap-1",children:r.jsx("button",{className:"p-2.5 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400 transition-colors",onClick:()=>l(!0),children:r.jsx(i_,{size:22,strokeWidth:1.75})})})]}),r.jsx("div",{className:"flex-1 overflow-auto p-4 md:p-8",children:r.jsx(T_,{})})]})]})},ef={generateMessage:async(n,s="")=>{try{const l=s.trim()?`You are an expert marketing strategist and copywriter known for creating high-converting WhatsApp campaigns.

The user has **existing content** they want you to **modify, improve, or rewrite** based on their instructions.

**Existing Content:**
"""
${s}
"""

**Your Task:**
Follow the user's instructions to modify the existing content. Keep the same general idea unless they ask you to change it completely.

**Guidelines:**
- Keep changes focused on what the user asks
- Maintain the message structure unless told otherwise
- Use *bold* for emphasis, emojis sparingly
- Make it concise and WhatsApp-appropriate

Output ONLY the improved/modified message text. No explanations.`:`You are an expert marketing strategist and copywriter known for creating high-converting WhatsApp campaigns.
Your goal is to write a powerful, effective marketing message based on the user's request.

**Strategy Guidelines:**
- **One Core Message:** Focus on a single clear value proposition.
- **Direct & Persuasive:** Use simple language. No buzzwords. No filler.
- **Structure:**
    1. **Hook:** Grab attention instantly (first line).
    2. **Value:** Explain the benefit clearly.
    3. **CTA:** One simple, actionable step (e.g., "Reply YES", "Click here").
- **Formatting:** Use *bold* for emphasis. Use emojis sparingly to highlight key points.
- **No Em Dashes.**

**Output Instructions:**
Provide **3 Distinct Variations** of the message to give the user choices:
1.  **Direct & Urgent** (Focus on scarcity or time-sensitivity)
2.  **Benefit-Focused** (Focus on the problem/solution)
3.  **Friendly & Conversational** (Softer tone)

Separate the variations clearly so the user can copy the one they like.`;return(await ce.post("/ai/chat",{messages:[{role:"system",content:l},{role:"user",content:n}]})).content}catch(l){throw console.error("AI Generation Error:",l),l}},getAnalyticsInsights:async(n=[])=>{try{return(await ce.post("/ai/analytics",{campaignIds:n})).insights}catch(s){throw console.error("Error fetching AI analytics:",s),s}},analyzeTemplate:async(n,s)=>{try{return await ce.post("/ai/analyze-template",{templateBody:n,templateName:s})}catch(l){throw console.error("Error analyzing template:",l),l}},chatAssistant:async(n,s="",l="template")=>{try{return(await ce.post("/ai/chat-assistant",{messages:n,currentContent:s,contentType:l})).content}catch(o){throw console.error("AI Chat Assistant Error:",o),o}}},oA=()=>{const{t:n}=ut(),[s,l]=T.useState(null),[o,c]=T.useState(null),[d,f]=T.useState([]),[h,p]=T.useState([]),[m,y]=T.useState(!1),[x,v]=T.useState(!1),[_,w]=T.useState("all"),[M,E]=T.useState([]),[A,z]=T.useState(!0),[N,k]=T.useState(null),U=rs(),O=()=>{const C=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];if(!(o&&o.totalMessagesSent>0))return C.map(q=>({name:q,sent:0,delivered:0,read:0}));const j=o.totalMessagesSent||0,D=o.totalDelivered||0,H=o.totalRead||0;return C.map((q,P)=>{const X=(P+1)/28;return{name:q,sent:Math.round(j*X),delivered:Math.round(D*X),read:Math.round(H*X)}})},V=()=>d.slice(0,5).map(C=>({name:C.name.length>10?C.name.substring(0,10)+"...":C.name,delivered:C.statsDelivered||0,read:C.statsRead||0,replied:C.statsReplied||0})),G=async()=>{try{z(!0),k(null);const[C,R,j]=await Promise.all([ce.getContactStats(),ce.getCampaignStats(),ce.getCampaigns({limit:5})]);l(C),c(R),f(j.campaigns||[])}catch(C){k(C.message),console.error("Failed to fetch dashboard data:",C)}finally{z(!1)}};T.useEffect(()=>{G()},[]);const L=async()=>{y(!0);try{const C=_==="select"?M:[],R=await ef.getAnalyticsInsights(C);p(R||[]),v(!1)}catch(C){console.error(C),alert(n("error_analyze_failed")||"Failed to generate insights")}finally{y(!1)}},F=C=>{E(R=>R.includes(C)?R.filter(j=>j!==C):[...R,C])},Y=[{label:n("stat_total_campaigns"),value:o?.totalCampaigns??"-",change:n("active_count",{count:o?.activeCampaigns??0}),trend:o?.activeCampaigns>0?"up":"neutral",icon:l_},{label:n("stat_messages_sent"),value:o?.totalMessagesSent?.toLocaleString()??"-",change:n("delivery_rate",{rate:o?.deliveryRate??0}),trend:"up",icon:To},{label:n("stat_total_contacts"),value:s?.total?.toLocaleString()??"-",change:n("this_week",{count:s?.thisWeek??0}),trend:s?.thisWeek>0?"up":"neutral",icon:mn},{label:n("stat_contact_lists"),value:s?.listsCount??"-",change:n("active_lists"),trend:"neutral",icon:xi}],Z=()=>d.slice(0,4).map(C=>({id:C.id,action:`Campaign "${C.name}" ${C.status.toLowerCase().replace("_"," ")}`,time:new Date(C.updatedAt).toLocaleDateString(),type:C.status==="COMPLETED"?"success":C.status==="IN_PROGRESS"?"info":"pending"})),te=({active:C,payload:R,label:j})=>C&&R&&R.length?r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-xl shadow-lg border border-gray-100 dark:border-gray-800",children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:j}),R.map((D,H)=>r.jsxs("p",{className:"text-xs",style:{color:D.color},children:[D.name,": ",D.value.toLocaleString()]},H))]}):null;return A?r.jsxs("div",{className:"space-y-8 animate-fade-in",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("div",{className:"h-8 w-48 bg-gray-200 dark:bg-gray-800 rounded-lg skeleton"}),r.jsx("div",{className:"h-4 w-64 bg-gray-200 dark:bg-gray-800 rounded-lg mt-2 skeleton"})]})}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[1,2,3,4].map(C=>r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80",children:[r.jsx("div",{className:"h-12 w-12 bg-gray-200 dark:bg-gray-800 rounded-xl skeleton"}),r.jsx("div",{className:"h-4 w-24 bg-gray-200 dark:bg-gray-800 rounded mt-4 skeleton"}),r.jsx("div",{className:"h-8 w-16 bg-gray-200 dark:bg-gray-800 rounded mt-2 skeleton"})]},C))})]}):N?r.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[r.jsx("p",{className:"text-red-500 mb-4",children:N}),r.jsxs("button",{onClick:G,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-xl",children:[r.jsx(Mo,{size:16}),n("btn_refresh")||"Retry"]})]}):r.jsxs("div",{className:"space-y-8 animate-fade-in",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n("dashboard_title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:n("dashboard_subtitle")})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>U("/contacts"),className:"flex items-center gap-2 px-4 py-2.5 bg-white dark:bg-surface-dark border border-gray-200 dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-200 text-sm font-medium shadow-soft card-hover",children:[r.jsx(er,{size:18,className:"icon-gray",strokeWidth:1.75}),r.jsx("span",{children:n("import_contacts")||"Import"})]}),r.jsxs("button",{onClick:()=>U("/campaigns/new"),className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[r.jsx(ka,{size:18,strokeWidth:2}),r.jsx("span",{children:n("btn_new_campaign")})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl p-6 shadow-soft border border-gray-100 dark:border-gray-800/80 relative overflow-hidden animate-slide-up",children:[r.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary/5 dark:bg-primary/10 rounded-full -mr-16 -mt-16 blur-2xl"}),r.jsxs("div",{className:"relative z-10",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center",children:r.jsx(fi,{size:20,className:"text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-semibold",children:n("ai_insights_title")}),r.jsx("p",{className:"text-xs text-gray-400",children:n("ai_insights_subtitle")})]})]}),r.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-2 px-4 py-2 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[r.jsx(fi,{size:14}),h.length>0?n("btn_analyze_again"):n("btn_analyze")]})]}),m?r.jsxs("div",{className:"flex items-center gap-3 py-4 text-gray-600 dark:text-gray-400",children:[r.jsx(sn,{size:24,className:"animate-spin text-primary"}),r.jsx("p",{children:n("status_analyzing")})]}):h.length>0?r.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:h.map((C,R)=>r.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-xl border border-gray-100 dark:border-gray-700/50 hover:border-primary/30 transition-colors",children:r.jsx("p",{className:"text-sm leading-relaxed text-gray-700 dark:text-gray-300",children:C})},R))}):r.jsxs("div",{className:"py-6 text-center bg-gray-50 dark:bg-gray-800/30 rounded-xl border border-gray-100 dark:border-gray-700/50 border-dashed",children:[r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"Get AI-powered recommendations to improve your delivery and read rates."}),r.jsx("button",{onClick:()=>v(!0),className:"text-sm text-primary hover:underline font-medium",children:n("btn_start_analysis")})]})]})]}),x&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-[60] flex items-center justify-center p-4 animate-fade-in backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-surface-dark w-full max-w-lg rounded-xl shadow-2xl p-6 border border-gray-100 dark:border-gray-800",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-bold",children:"Configure Analysis"}),r.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(_t,{size:20})})]}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsx("div",{onClick:()=>w("all"),className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${_==="all"?"border-primary bg-primary/5":"border-gray-100 dark:border-gray-800 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${_==="all"?"border-primary":"border-gray-300"}`,children:_==="all"&&r.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Analyze All Data"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Includes all past campaigns"})]})]})}),r.jsxs("div",{onClick:()=>w("select"),className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${_==="select"?"border-primary bg-primary/5":"border-gray-100 dark:border-gray-800 hover:border-gray-300"}`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${_==="select"?"border-primary":"border-gray-300"}`,children:_==="select"&&r.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Select Specific Campaigns"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Compare specific blasts"})]})]}),_==="select"&&r.jsx("div",{className:"pl-8 space-y-2 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:d.map(C=>r.jsxs("div",{onClick:R=>{R.stopPropagation(),F(C.id)},className:"flex items-center gap-3 p-2 hover:bg-gray-100 dark:hover:bg-gray-800/50 rounded-lg cursor-pointer",children:[M.includes(C.id)?r.jsx(o_,{size:18,className:"text-primary"}):r.jsx(Mp,{size:18,className:"text-gray-400"}),r.jsx("span",{className:"text-sm truncate",children:C.name})]},C.id))})]})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium",children:"Cancel"}),r.jsx("button",{onClick:L,disabled:m||_==="select"&&M.length===0,className:"flex items-center gap-2 px-6 py-2 btn-primary text-white rounded-lg font-medium shadow-glow disabled:opacity-50",children:m?r.jsxs(r.Fragment,{children:[r.jsx(sn,{size:16,className:"animate-spin"}),r.jsx("span",{children:"Analyzing..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(fi,{size:16}),r.jsx("span",{children:"Generate Insights"})]})})]})]})}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:Y.map((C,R)=>r.jsxs("div",{className:`stat-card bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 card-hover animate-slide-up stagger-${R+1}`,style:{opacity:0},children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gray-100 dark:bg-gray-800/80 flex items-center justify-center",children:r.jsx(C.icon,{size:22,className:"icon-gray",strokeWidth:1.75})}),C.trend==="up"&&r.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-2 py-1 rounded-full",children:[r.jsx(o0,{size:12}),r.jsx("span",{children:"Up"})]})]}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium mb-1",children:C.label}),r.jsx("p",{className:"text-3xl font-bold tracking-tight",children:C.value}),r.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:C.change})]},R))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 animate-slide-up stagger-5",style:{opacity:0},children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center",children:r.jsx(c0,{size:20,className:"text-white",strokeWidth:1.75})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:n("chart_message_trends")}),r.jsx("p",{className:"text-xs text-gray-400",children:n("last_7_days")})]})]})}),r.jsx("div",{className:"h-64",children:r.jsx(e0,{width:"100%",height:"100%",children:r.jsxs(Fv,{data:O(),margin:{top:10,right:10,left:-20,bottom:0},children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"colorSent",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),r.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]}),r.jsxs("linearGradient",{id:"colorDelivered",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),r.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]}),r.jsxs("linearGradient",{id:"colorRead",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.3}),r.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]})]}),r.jsx(t0,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),r.jsx(n0,{dataKey:"name",tick:{fontSize:12},stroke:"#9CA3AF"}),r.jsx(a0,{tick:{fontSize:12},stroke:"#9CA3AF"}),r.jsx(s0,{content:r.jsx(te,{})}),r.jsx(gd,{type:"monotone",dataKey:"sent",stroke:"#10b981",strokeWidth:2,fillOpacity:1,fill:"url(#colorSent)",name:"Sent"}),r.jsx(gd,{type:"monotone",dataKey:"delivered",stroke:"#3b82f6",strokeWidth:2,fillOpacity:1,fill:"url(#colorDelivered)",name:"Delivered"}),r.jsx(gd,{type:"monotone",dataKey:"read",stroke:"#8b5cf6",strokeWidth:2,fillOpacity:1,fill:"url(#colorRead)",name:"Read"})]})})}),r.jsxs("div",{className:"flex justify-center gap-6 mt-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),r.jsx("span",{className:"text-xs text-gray-500",children:n("status_sent")})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),r.jsx("span",{className:"text-xs text-gray-500",children:n("status_delivered")})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),r.jsx("span",{className:"text-xs text-gray-500",children:n("status_read")})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 animate-slide-up stagger-6",style:{opacity:0},children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center",children:r.jsx(Dd,{size:20,className:"text-white",strokeWidth:1.75})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:n("chart_campaign_comparison")}),r.jsx("p",{className:"text-xs text-gray-400",children:n("recent_campaigns")})]})]})}),r.jsx("div",{className:"h-64",children:d.length>0?r.jsx(e0,{width:"100%",height:"100%",children:r.jsxs(Kv,{data:V(),margin:{top:10,right:10,left:-20,bottom:0},children:[r.jsx(t0,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),r.jsx(n0,{dataKey:"name",tick:{fontSize:10},stroke:"#9CA3AF"}),r.jsx(a0,{tick:{fontSize:12},stroke:"#9CA3AF"}),r.jsx(s0,{content:r.jsx(te,{})}),r.jsx(hd,{dataKey:"delivered",fill:"#10b981",radius:[4,4,0,0],name:"Delivered"}),r.jsx(hd,{dataKey:"read",fill:"#3b82f6",radius:[4,4,0,0],name:"Read"}),r.jsx(hd,{dataKey:"replied",fill:"#f59e0b",radius:[4,4,0,0],name:"Replied"})]})}):r.jsx("div",{className:"h-full flex items-center justify-center",children:r.jsx("p",{className:"text-gray-400 text-sm",children:n("no_campaigns_yet")})})}),r.jsxs("div",{className:"flex justify-center gap-6 mt-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),r.jsx("span",{className:"text-xs text-gray-500",children:n("status_delivered")})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),r.jsx("span",{className:"text-xs text-gray-500",children:n("status_read")})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),r.jsx("span",{className:"text-xs text-gray-500",children:n("status_replied")})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 animate-slide-up stagger-7",style:{opacity:0},children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-800/80 flex items-center justify-center",children:r.jsx(o0,{size:20,className:"icon-gray",strokeWidth:1.75})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:n("performance_overview")}),r.jsx("p",{className:"text-xs text-gray-400",children:n("performance_subtitle")})]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"text-center p-4 bg-emerald-50 dark:bg-emerald-900/10 rounded-xl border border-emerald-100 dark:border-emerald-900/20",children:[r.jsx("p",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:o?.totalDelivered?.toLocaleString()??0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n("status_delivered")})]}),r.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/10 rounded-xl border border-blue-100 dark:border-blue-900/20",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:o?.totalRead?.toLocaleString()??0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n("status_read")})]}),r.jsxs("div",{className:"text-center p-4 bg-amber-50 dark:bg-amber-900/10 rounded-xl border border-amber-100 dark:border-amber-900/20",children:[r.jsx("p",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:o?.totalReplied?.toLocaleString()??0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n("status_replied")})]}),r.jsxs("div",{className:"text-center p-4 bg-red-50 dark:bg-red-900/10 rounded-xl border border-red-100 dark:border-red-900/20",children:[r.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:o?.totalFailed?.toLocaleString()??0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n("status_failed")})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-gray-500",children:n("rate_delivery")}),r.jsxs("span",{className:"font-semibold text-emerald-600",children:[o?.deliveryRate??0,"%"]})]}),r.jsx("div",{className:"h-3 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-emerald-600 rounded-full transition-all duration-700 ease-out",style:{width:`${o?.deliveryRate??0}%`}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-gray-500",children:n("rate_read")}),r.jsxs("span",{className:"font-semibold text-blue-600",children:[o?.readRate??0,"%"]})]}),r.jsx("div",{className:"h-3 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-700 ease-out",style:{width:`${o?.readRate??0}%`}})})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 animate-slide-up stagger-8",style:{opacity:0},children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-800/80 flex items-center justify-center",children:r.jsx(c0,{size:20,className:"icon-gray",strokeWidth:1.75})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:n("recent_campaigns_title")}),r.jsx("p",{className:"text-xs text-gray-400",children:n("latest_updates")})]})]}),r.jsx("div",{className:"space-y-4",children:Z().length>0?Z().map(C=>r.jsxs("div",{className:"flex items-start gap-3 group",children:[r.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${C.type==="success"?"bg-emerald-500":C.type==="pending"?"bg-amber-500":"bg-primary"}`}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 truncate group-hover:text-gray-900 dark:group-hover:text-white transition-colors",children:C.action}),r.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:C.time})]})]},C.id)):r.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:n("no_campaigns_yet")})}),r.jsxs("button",{onClick:()=>U("/campaigns"),className:"w-full mt-6 py-2.5 text-sm text-primary font-medium hover:bg-emerald-50 dark:hover:bg-emerald-900/10 rounded-lg transition-colors flex items-center justify-center gap-1",children:[n("btn_view_all_campaigns"),r.jsx(c_,{size:14})]})]})]})]})},cA=({onClose:n,onSuccess:s})=>{const{t:l}=ut(),[o,c]=T.useState(!1),[d,f]=T.useState(null),[h,p]=T.useState(!1),[m,y]=T.useState(null),[x,v]=T.useState(null),_=T.useCallback(z=>{z.preventDefault(),z.stopPropagation(),z.type==="dragenter"||z.type==="dragover"?c(!0):z.type==="dragleave"&&c(!1)},[]),w=T.useCallback(z=>{if(z.preventDefault(),z.stopPropagation(),c(!1),z.dataTransfer.files&&z.dataTransfer.files[0]){const N=z.dataTransfer.files[0];N.type==="text/csv"||N.name.endsWith(".csv")?(f(N),y(null)):y("Please upload a valid CSV file.")}},[]),M=z=>{z.preventDefault(),z.target.files&&z.target.files[0]&&(f(z.target.files[0]),y(null))},E=async()=>{if(d){p(!0),y(null);try{const z=await ce.importContacts(d);v(z),s&&s()}catch(z){y(z.message||"Failed to upload file")}finally{p(!1)}}},A=()=>{f(null),v(null),y(null)};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-surface-dark w-full max-w-md rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-800 overflow-hidden animate-slide-up",children:[r.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-800 flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-bold",children:l("import_contacts_title")}),r.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:r.jsx(_t,{size:20,className:"text-gray-500"})})]}),r.jsx("div",{className:"p-6",children:x?r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center mx-auto mb-4 animate-scale-in",children:r.jsx(hn,{size:32,strokeWidth:3})}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:l("import_complete")}),r.jsxs("div",{className:"flex justify-center gap-8 my-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:x.imported}),r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:l("imported_count")})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:x.skipped}),r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:l("skipped_count")})]})]}),x.errors&&x.errors.length>0&&r.jsxs("div",{className:"text-left bg-gray-50 dark:bg-gray-800/50 rounded-lg p-3 mb-6 max-h-32 overflow-y-auto text-xs text-gray-600 dark:text-gray-400",children:[r.jsx("p",{className:"font-medium mb-1",children:l("errors_label")}),r.jsx("ul",{className:"list-disc pl-4 space-y-1",children:x.errors.map((z,N)=>r.jsx("li",{children:z},N))})]}),r.jsxs("div",{className:"flex justify-center gap-3",children:[r.jsx("button",{onClick:A,className:"px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:l("import_more")}),r.jsx("button",{onClick:n,className:"px-6 py-2 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:l("done")})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:`relative border-2 border-dashed rounded-xl p-8 text-center transition-all duration-200 ${o?"border-primary bg-emerald-50 dark:bg-emerald-900/10":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onDragEnter:_,onDragLeave:_,onDragOver:_,onDrop:w,children:[r.jsx("input",{type:"file",accept:".csv",onChange:M,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:h}),d?r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center mb-3",children:r.jsx(dr,{size:24})}),r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:d.name}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[(d.size/1024).toFixed(1)," KB"]})]}):r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-800 text-gray-400 rounded-full flex items-center justify-center mb-3",children:r.jsx(er,{size:24})}),r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:l("drag_drop_csv")}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:l("csv_columns")})]})]}),m&&r.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg flex items-center gap-2",children:[r.jsx(Ca,{size:16}),r.jsx("span",{children:m})]}),r.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[r.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:l("cancel")}),r.jsx("button",{onClick:E,disabled:!d||h,className:`flex items-center gap-2 px-6 py-2 rounded-xl text-sm font-medium text-white transition-all ${!d||h?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed":"btn-primary shadow-glow hover:-translate-y-0.5"}`,children:h?r.jsxs(r.Fragment,{children:[r.jsx(sn,{size:16,className:"animate-spin"}),l("importing")]}):l("import_button")})]})]})})]})})},uA=()=>{const{t:n}=ut(),s=Lo(),[l,o]=T.useState([]),[c,d]=T.useState(null),[f,h]=T.useState([]),[p,m]=T.useState(""),[y,x]=T.useState(!0),[v,_]=T.useState(null),[w,M]=T.useState(""),[E,A]=T.useState({page:1,limit:20,total:0,totalPages:1}),[z,N]=T.useState(!1),[k,U]=T.useState(!1),[O,V]=T.useState(!1),[G,L]=T.useState({name:"",phone:"",interests:"",tags:""}),[F,Y]=T.useState(!1),[Z,te]=T.useState(!1),C=T.useRef(null),R=ar.useCallback(async(X=1,W="",se="")=>{try{x(!0),_(null);const le={page:X,limit:E.limit};W&&(le.search=W),se&&(le.tag=se);const[de,be,me]=await Promise.all([ce.getContacts(le),ce.getContactStats(),ce.getContactTags()]);o(de.contacts||[]),A(de.pagination||{page:1,limit:20,total:0,totalPages:1}),d(be),h(me.tags||[])}catch(le){_(le.message)}finally{x(!1)}},[E.limit]);T.useEffect(()=>{R()},[R]),T.useEffect(()=>(C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{R(1,w,p)},300),()=>clearTimeout(C.current)),[w,p,R]);const j=async X=>{X.preventDefault(),Y(!0);try{const W=G.interests.split(",").map(le=>le.trim()).filter(le=>le),se=G.tags.split(",").map(le=>le.trim()).filter(le=>le);await ce.createContact({name:G.name,phone:G.phone,interests:W,tags:se}),N(!1),L({name:"",phone:"",interests:"",tags:""}),R(E.page,w,p),s.success("Contact added successfully!")}catch(W){s.error(W.message)}finally{Y(!1)}},D=async X=>{if(confirm("Are you sure you want to delete this contact?"))try{await ce.deleteContact(X),R(E.page,w,p),s.success("Contact deleted")}catch(W){s.error(W.message)}},H=X=>{X>=1&&X<=E.totalPages&&R(X,w,p)},q=async()=>{te(!0);try{const X=await ce.fetchWhatsAppContacts();R(1,w,p),X.imported>0?s.success(`Imported ${X.imported} new contacts from WhatsApp!`):s.info(X.message||"No new contacts to import")}catch(X){s.error(X.message||"Failed to fetch WhatsApp contacts")}finally{te(!1)}},P=X=>{m(X),V(!1)};return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n("contacts_title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:n("contacts_subtitle")})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:q,disabled:Z,className:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl text-sm font-medium shadow-glow card-hover disabled:opacity-50",children:[Z?r.jsx(sn,{size:18,className:"animate-spin"}):r.jsx(Dp,{size:18}),r.jsx("span",{children:n(Z?"loading":"btn_fetch_whatsapp")})]}),r.jsxs("button",{onClick:()=>U(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-white dark:bg-surface-dark border border-gray-200 dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-200 text-sm font-medium shadow-soft card-hover",children:[r.jsx(er,{size:18,className:"icon-gray",strokeWidth:1.75}),r.jsx("span",{children:n("btn_import_csv")})]}),r.jsxs("button",{onClick:()=>N(!0),className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[r.jsx(ka,{size:18,strokeWidth:2}),r.jsx("span",{children:n("btn_add_contact")})]})]})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:n("stat_total_contacts"),value:c?.total?.toLocaleString()??"-"},{label:n("stat_active_lists"),value:c?.listsCount??"-"},{label:n("stat_new_this_week"),value:c?.thisWeek??"-"},{label:n("label_showing"),value:`${l.length} of ${E.total}`}].map((X,W)=>r.jsxs("div",{className:"bg-white dark:bg-surface-dark px-4 py-3 rounded-xl border border-gray-100 dark:border-gray-800/80 shadow-soft",children:[r.jsx("p",{className:"text-xs text-gray-400 font-medium",children:X.label}),r.jsx("p",{className:"text-xl font-bold mt-0.5",children:X.value})]},W))}),r.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800/80 flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Id,{className:"absolute left-4 top-1/2 -translate-y-1/2 icon-gray",size:18,strokeWidth:1.75}),r.jsx("input",{type:"text",placeholder:n("placeholder_search_contacts"),value:w,onChange:X=>M(X.target.value),className:"w-full pl-11 pr-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 focus:border-primary outline-none transition-all text-sm text-gray-900 dark:text-white placeholder:text-gray-400"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>V(!O),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl transition-colors text-sm font-medium border ${p?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-600":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:[r.jsx(Do,{size:16,strokeWidth:1.75}),r.jsx("span",{children:p||n("btn_filter_tag")}),r.jsx(zi,{size:14})]}),O&&r.jsxs("div",{className:"absolute top-full left-0 mt-2 w-48 bg-white dark:bg-surface-dark rounded-xl shadow-lg border border-gray-100 dark:border-gray-800 z-50 py-2 max-h-60 overflow-y-auto",children:[r.jsx("button",{onClick:()=>P(""),className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800 ${p?"text-gray-700 dark:text-gray-300":"text-emerald-600 font-medium"}`,children:n("label_all_contacts")}),f.map(X=>r.jsx("button",{onClick:()=>P(X),className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800 ${p===X?"text-emerald-600 font-medium":"text-gray-700 dark:text-gray-300"}`,children:X},X)),f.length===0&&r.jsx("p",{className:"px-4 py-2 text-xs text-gray-400",children:"No tags created yet"})]})]}),r.jsxs("button",{onClick:()=>R(E.page,w,p),className:"flex items-center gap-2 px-4 py-2.5 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-sm font-medium border border-gray-200 dark:border-gray-700",children:[r.jsx(Mo,{size:16,className:"icon-gray",strokeWidth:1.75}),r.jsx("span",{children:n("btn_refresh")})]})]}),v&&r.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800 flex items-center gap-3 text-red-700 dark:text-red-400",children:[r.jsx(Ca,{size:18}),r.jsx("span",{children:v}),r.jsx("button",{onClick:()=>R(),className:"ml-auto text-sm underline",children:"Retry"})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-background-dark text-gray-500 dark:text-gray-400 text-xs uppercase tracking-wider font-semibold",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-semibold",children:n("col_contact")}),r.jsx("th",{className:"px-6 py-4 font-semibold",children:n("col_phone")}),r.jsx("th",{className:"px-6 py-4 font-semibold",children:n("col_tags")}),r.jsx("th",{className:"px-6 py-4 font-semibold",children:n("col_lists")}),r.jsx("th",{className:"px-6 py-4 text-right font-semibold",children:n("col_actions")})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800/80",children:y?[...Array(5)].map((X,W)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"h-10 w-40 bg-gray-200 dark:bg-gray-800 rounded skeleton"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"h-4 w-32 bg-gray-200 dark:bg-gray-800 rounded skeleton"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"h-6 w-20 bg-gray-200 dark:bg-gray-800 rounded skeleton"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"h-6 w-24 bg-gray-200 dark:bg-gray-800 rounded skeleton"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"h-4 w-8 bg-gray-200 dark:bg-gray-800 rounded skeleton ml-auto"})})]},W)):l.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-400",children:w?"No contacts found matching your search":"No contacts yet. Add your first contact!"})}):l.map(X=>r.jsxs("tr",{className:"table-row-hover group",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center text-primary font-semibold text-sm",children:X.name.split(" ").map(W=>W[0]).join("").slice(0,2)}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:X.name}),r.jsxs("p",{className:"text-xs text-gray-400",children:["ID: ",X.id]})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:"text-gray-600 dark:text-gray-300 font-mono text-sm flex items-center gap-2",children:[r.jsx(u_,{size:14,className:"icon-gray",strokeWidth:1.75}),X.phone]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[(X.tags||[]).slice(0,3).map((W,se)=>r.jsx("span",{className:"px-2.5 py-1 text-xs rounded-lg bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 font-medium",children:W},se)),(X.tags||[]).length>3&&r.jsxs("span",{className:"px-2 py-1 text-xs text-gray-400",children:["+",X.tags.length-3]}),(X.tags||[]).length===0&&r.jsx("span",{className:"text-xs text-gray-400",children:"No tags"})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[(X.lists||[]).slice(0,2).map((W,se)=>r.jsx("span",{className:"px-2.5 py-1 text-xs rounded-lg bg-gray-100 dark:bg-gray-800/80 text-gray-600 dark:text-gray-300 font-medium",children:W.name},se)),(X.lists||[]).length>2&&r.jsxs("span",{className:"px-2 py-1 text-xs text-gray-400",children:["+",X.lists.length-2]})]})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsx("button",{onClick:()=>D(X.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:r.jsx(_t,{size:18,strokeWidth:1.75})})})]},X.id))})]})}),E.totalPages>1&&r.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 dark:border-gray-800/80 flex items-center justify-between",children:[r.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",(E.page-1)*E.limit+1,"-",Math.min(E.page*E.limit,E.total)," of ",E.total]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>H(E.page-1),disabled:E.page<=1,className:"px-3 py-1.5 text-sm rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 transition-colors disabled:opacity-50",children:"Previous"}),[...Array(Math.min(5,E.totalPages))].map((X,W)=>{const se=W+1;return r.jsx("button",{onClick:()=>H(se),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${E.page===se?"bg-primary text-white":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500"}`,children:se},se)}),r.jsx("button",{onClick:()=>H(E.page+1),disabled:E.page>=E.totalPages,className:"px-3 py-1.5 text-sm rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 transition-colors disabled:opacity-50",children:"Next"})]})]})]}),z&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl shadow-xl max-w-md w-full p-6 animate-slide-up",style:{opacity:0,animationDelay:"0s"},children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Add Contact"}),r.jsx("button",{onClick:()=>N(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:r.jsx(_t,{size:20})})]}),r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Name *"}),r.jsx("input",{type:"text",value:G.name,onChange:X=>L({...G,name:X.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none text-gray-900 dark:text-white placeholder:text-gray-400",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone *"}),r.jsx("input",{type:"text",value:G.phone,onChange:X=>L({...G,phone:X.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"+1234567890",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Interests (comma-separated)"}),r.jsx("input",{type:"text",value:G.interests,onChange:X=>L({...G,interests:X.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"marketing, sales"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tags (comma-separated)"}),r.jsx("input",{type:"text",value:G.tags,onChange:X=>L({...G,tags:X.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"VIP, Hot Lead"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Use tags to segment your contacts"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>N(!1),className:"flex-1 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl font-medium",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:F,className:"flex-1 py-2.5 btn-primary text-white rounded-xl font-medium disabled:opacity-50",children:F?"Saving...":"Add Contact"})]})]})]})}),k&&r.jsx(cA,{onClose:()=>U(!1),onSuccess:()=>{R(1,"")}})]})},dA=()=>{const{t:n}=ut(),s=Lo(),[l,o]=T.useState([]),[c,d]=T.useState(!0),[f,h]=T.useState(null),[p,m]=T.useState([]),[y,x]=T.useState(!1),[v,_]=T.useState(!1),[w,M]=T.useState(!1),[E,A]=T.useState(!1),[z,N]=T.useState({name:"",description:""}),[k,U]=T.useState([]),[O,V]=T.useState([]),[G,L]=T.useState(""),[F,Y]=T.useState(!1),[Z,te]=T.useState([]),[C,R]=T.useState(""),[j,D]=T.useState(""),[H,q]=T.useState(!1),P=ar.useCallback(async()=>{try{d(!0);const ie=await ce.getLists();o(ie.lists||[])}catch{s.error("Failed to load lists")}finally{d(!1)}},[s]),X=ar.useCallback(async ie=>{try{x(!0);const ge=await ce.getList(ie);m(ge.members||[])}catch{s.error("Failed to load list members")}finally{x(!1)}},[s]),W=async()=>{try{const[ie,ge]=await Promise.all([ce.getContacts({limit:500}),ce.getContactTags()]);U(ie.contacts||[]),V(ge.tags||[])}catch{s.error("Failed to load contacts")}};T.useEffect(()=>{P()},[P]),T.useEffect(()=>{f&&X(f.id)},[f,X]);const se=async ie=>{ie.preventDefault(),q(!0);try{await ce.createList(z),s.success(n("msg_list_created")),_(!1),N({name:"",description:""}),P()}catch(ge){s.error(ge.message)}finally{q(!1)}},le=async ie=>{if(confirm(n("confirm_delete_list")||"Are you sure you want to delete this list?"))try{await ce.deleteList(ie),s.success(n("msg_list_deleted")),f?.id===ie&&(h(null),m([])),P()}catch(ge){s.error(ge.message)}},de=async()=>{if(Z.length===0){s.warning("Select at least one contact");return}q(!0);try{const ie=await ce.addContactsToList(f.id,Z);s.success(`Added ${ie.added} contacts, ${ie.skipped} already in list`),M(!1),te([]),X(f.id),P()}catch(ie){s.error(ie.message)}finally{q(!1)}},be=async()=>{if(!j){s.warning("Select a source list");return}q(!0);try{const ge=(await ce.getList(j)).members.map(rt=>rt.id);if(ge.length===0){s.info("Source list is empty"),q(!1);return}const Oe=await ce.addContactsToList(f.id,ge);s.success(`Added ${Oe.added} contacts from list, ${Oe.skipped} already present`),A(!1),D(""),X(f.id),P()}catch(ie){s.error(ie.message)}finally{q(!1)}},me=async ie=>{try{await ce.removeContactFromList(f.id,ie),s.success("Contact removed from list"),X(f.id),P()}catch(ge){s.error(ge.message)}},oe=()=>{W(),te([]),R(""),L(""),Y(!1),M(!0)},fe=ie=>{te(ge=>ge.includes(ie)?ge.filter(Oe=>Oe!==ie):[...ge,ie])},we=k.filter(ie=>{const ge=ie.name.toLowerCase().includes(C.toLowerCase())||ie.phone.includes(C),Oe=!G||ie.tags&&ie.tags.includes(G);return ge&&Oe}),Ne=we.filter(ie=>!p.some(ge=>ge.id===ie.id)),ye=()=>{const ie=Ne.map(ge=>ge.id);te(ge=>{const Oe=new Set(ge);return ie.forEach(rt=>Oe.add(rt)),Array.from(Oe)})},_e=()=>{te([])},Ce=l.filter(ie=>ie.id!==f?.id);return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n("lists_title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:n("lists_subtitle")})]}),r.jsxs("button",{onClick:()=>_(!0),className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[r.jsx(ka,{size:18,strokeWidth:2}),r.jsx("span",{children:n("btn_create_list")})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-soft border border-gray-100 dark:border-gray-800/80 overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800/80 flex items-center justify-between",children:[r.jsx("h3",{className:"font-semibold",children:n("header_your_lists")}),r.jsx("button",{onClick:P,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:r.jsx(Mo,{size:16,className:"icon-gray"})})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto",children:c?r.jsx("div",{className:"p-4 space-y-3",children:[1,2,3].map(ie=>r.jsx("div",{className:"h-16 bg-gray-100 dark:bg-gray-800 rounded-xl skeleton"},ie))}):l.length===0?r.jsx("p",{className:"p-4 text-center text-gray-400",children:n("no_lists")}):r.jsx("div",{className:"p-2",children:l.map(ie=>r.jsxs("button",{onClick:()=>h(ie),className:`w-full text-left p-3 rounded-xl transition-all mb-1 ${f?.id===ie.id?"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800":"hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center",children:r.jsx(mn,{size:18,className:"text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:ie.name}),r.jsxs("p",{className:"text-xs text-gray-400",children:[ie.memberCount," contacts"]})]})]}),r.jsx("button",{onClick:ge=>{ge.stopPropagation(),le(ie.id)},className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg opacity-0 group-hover:opacity-100 transition-all",children:r.jsx(rn,{size:14})})]}),ie.description&&r.jsx("p",{className:"text-xs text-gray-400 mt-1 pl-13",children:ie.description})]},ie.id))})})]}),r.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-surface-dark rounded-2xl shadow-soft border border-gray-100 dark:border-gray-800/80 overflow-hidden",children:f?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800/80 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:f.name}),r.jsxs("p",{className:"text-xs text-gray-400",children:[f.memberCount," contacts"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-xl transition-colors",children:[r.jsx(mn,{size:16}),n("btn_from_list")]}),r.jsxs("button",{onClick:oe,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium btn-primary text-white rounded-xl",children:[r.jsx(u0,{size:16}),n("btn_add_contacts")]})]})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto",children:y?r.jsx("div",{className:"p-4 space-y-2",children:[1,2,3,4].map(ie=>r.jsx("div",{className:"h-14 bg-gray-100 dark:bg-gray-800 rounded-xl skeleton"},ie))}):p.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-60 text-gray-400",children:[r.jsx(u0,{size:40,strokeWidth:1,className:"mb-3 opacity-50"}),r.jsx("p",{children:"This list is empty"}),r.jsx("p",{className:"text-sm",children:"Add contacts to get started"})]}):r.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-800/80",children:p.map(ie=>r.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center text-primary font-semibold text-sm",children:ie.name.split(" ").map(ge=>ge[0]).join("").slice(0,2)}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:ie.name}),r.jsx("p",{className:"text-xs text-gray-400",children:ie.phone})]})]}),r.jsx("button",{onClick:()=>me(ie.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:r.jsx(_t,{size:16})})]},ie.id))})})]}):r.jsxs("div",{className:"flex flex-col items-center justify-center h-80 text-gray-400",children:[r.jsx(mn,{size:48,strokeWidth:1,className:"mb-4 opacity-50"}),r.jsx("p",{className:"text-lg font-medium",children:n("modal_add_contacts").replace("{{list}}","list")}),r.jsx("p",{className:"text-sm",children:"Choose a list from the sidebar to view its contacts"})]})})]}),v&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-xl max-w-md w-full p-6 animate-slide-up",style:{opacity:0},children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-bold",children:n("modal_create_list")}),r.jsx("button",{onClick:()=>_(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:r.jsx(_t,{size:20})})]}),r.jsxs("form",{onSubmit:se,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-2",children:[n("label_list_name")," *"]}),r.jsx("input",{type:"text",value:z.name,onChange:ie=>N({...z,name:ie.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none",placeholder:n("placeholder_list_name"),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:n("label_list_desc")}),r.jsx("textarea",{value:z.description,onChange:ie=>N({...z,description:ie.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none resize-none",rows:3,placeholder:n("placeholder_list_name").replace("e.g.","")})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>_(!1),className:"flex-1 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl font-medium",children:n("btn_cancel")||"Cancel"}),r.jsx("button",{type:"submit",disabled:H,className:"flex-1 py-2.5 btn-primary text-white rounded-xl font-medium disabled:opacity-50",children:H?"Creating...":n("btn_create_list")})]})]})]})}),w&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-xl max-w-lg w-full p-6 animate-slide-up max-h-[80vh] flex flex-col",style:{opacity:0},children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:n("modal_add_contacts").replace("{{list}}",f?.name)}),r.jsx("button",{onClick:()=>M(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:r.jsx(_t,{size:20})})]}),r.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:[Z.length," selected"]}),r.jsxs("div",{className:"flex gap-2 mb-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Id,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),r.jsx("input",{type:"text",placeholder:n("placeholder_search_contacts"),value:C,onChange:ie=>R(ie.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>Y(!F),className:`flex items-center gap-2 px-3 py-2.5 rounded-xl border transition-colors ${G?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-600":"border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[r.jsx(Do,{size:16}),r.jsx("span",{className:"text-sm",children:G||n("col_tags")||"Tag"}),r.jsx(zi,{size:14})]}),F&&r.jsxs("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white dark:bg-surface-dark rounded-xl shadow-lg border border-gray-100 dark:border-gray-800 z-50 py-2 max-h-48 overflow-y-auto",children:[r.jsx("button",{onClick:()=>{L(""),Y(!1)},className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800 ${G?"":"text-emerald-600 font-medium"}`,children:"All Tags"}),O.map(ie=>r.jsx("button",{onClick:()=>{L(ie),Y(!1)},className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800 ${G===ie?"text-emerald-600 font-medium":""}`,children:ie},ie)),O.length===0&&r.jsx("p",{className:"px-4 py-2 text-xs text-gray-400",children:"No tags"})]})]})]}),r.jsxs("div",{className:"flex gap-2 mb-3",children:[r.jsxs("button",{onClick:ye,disabled:Ne.length===0,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium bg-blue-50 dark:bg-blue-900/20 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(Op,{size:14}),"Add All (",Ne.length,")"]}),Z.length>0&&r.jsxs("button",{onClick:_e,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:[r.jsx(_t,{size:14}),"Clear"]}),r.jsxs("span",{className:"ml-auto text-xs text-gray-400",children:[n("label_showing")," ",we.length," contacts"]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto border border-gray-100 dark:border-gray-800 rounded-xl divide-y divide-gray-100 dark:divide-gray-800/80 max-h-60",children:we.length===0?r.jsx("p",{className:"p-4 text-center text-gray-400",children:"No contacts found"}):we.map(ie=>{const ge=Z.includes(ie.id),Oe=p.some(rt=>rt.id===ie.id);return r.jsxs("button",{onClick:()=>!Oe&&fe(ie.id),disabled:Oe,className:`w-full flex items-center justify-between p-3 transition-colors ${Oe?"opacity-50 cursor-not-allowed":ge?"bg-emerald-50 dark:bg-emerald-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center text-primary text-xs font-semibold",children:ie.name.split(" ").map(rt=>rt[0]).join("").slice(0,2)}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-medium text-sm",children:ie.name}),r.jsx("p",{className:"text-xs text-gray-400",children:ie.phone})]})]}),Oe?r.jsx("span",{className:"text-xs text-gray-400",children:"Already in list"}):ge?r.jsx("div",{className:"w-5 h-5 rounded-full bg-emerald-500 flex items-center justify-center",children:r.jsx(hn,{size:12,className:"text-white"})}):r.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300"})]},ie.id)})}),r.jsxs("div",{className:"flex gap-3 pt-4 mt-4 border-t border-gray-100 dark:border-gray-800",children:[r.jsx("button",{onClick:()=>M(!1),className:"flex-1 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl font-medium",children:n("btn_cancel")||"Cancel"}),r.jsx("button",{onClick:de,disabled:H||Z.length===0,className:"flex-1 py-2.5 btn-primary text-white rounded-xl font-medium disabled:opacity-50",children:H?"Adding...":`${n("btn_add_contacts")} (${Z.length})`})]})]})}),E&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-xl max-w-md w-full p-6 animate-slide-up",style:{opacity:0},children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-bold",children:n("modal_copy_list")}),r.jsx("button",{onClick:()=>A(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:r.jsx(_t,{size:20})})]}),r.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:[n("text_copy_explanation")," ",r.jsx("strong",{children:f?.name})]}),r.jsx("div",{className:"space-y-2 mb-6",children:Ce.length===0?r.jsx("p",{className:"text-center text-gray-400 py-4",children:"No other lists available"}):Ce.map(ie=>r.jsxs("button",{onClick:()=>D(ie.id.toString()),className:`w-full flex items-center justify-between p-3 rounded-xl transition-all ${j===ie.id.toString()?"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800":"border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(mn,{size:18,className:"text-gray-400"}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-medium",children:ie.name}),r.jsxs("p",{className:"text-xs text-gray-400",children:[ie.memberCount," contacts"]})]})]}),j===ie.id.toString()&&r.jsx("div",{className:"w-5 h-5 rounded-full bg-emerald-500 flex items-center justify-center",children:r.jsx(hn,{size:12,className:"text-white"})})]},ie.id))}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>A(!1),className:"flex-1 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl font-medium",children:n("btn_cancel")||"Cancel"}),r.jsx("button",{onClick:be,disabled:H||!j,className:"flex-1 py-2.5 btn-primary text-white rounded-xl font-medium disabled:opacity-50",children:H?"Copying...":n("btn_copy_contacts")})]})]})})]})},fA=()=>{const{t:n}=ut(),[s,l]=T.useState(""),[o,c]=T.useState(""),[d,f]=T.useState(!1),[h,p]=T.useState(""),[m,y]=T.useState(!1),x=rs(),v=qp(),{login:_,register:w,isAuthenticated:M}=Pd();ar.useEffect(()=>{if(M){const A=v.state?.from?.pathname||"/";x(A,{replace:!0})}},[M,x,v]);const E=async A=>{A.preventDefault(),p(""),f(!0);try{m?await w(s,o):await _(s,o);const z=v.state?.from?.pathname||"/";x(z,{replace:!0})}catch(z){p(z.message||"An error occurred")}finally{f(!1)}};return r.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background-light via-white to-emerald-50 dark:from-background-dark dark:via-surface-dark dark:to-background-dark transition-colors duration-300 p-4",children:[r.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[r.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary/5 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-accent/5 rounded-full blur-3xl"})]}),r.jsxs("div",{className:"relative w-full max-w-md animate-slide-up",style:{opacity:0,animationDelay:"0.1s"},children:[r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-8 md:p-10 rounded-3xl shadow-soft border border-gray-100 dark:border-gray-800/80",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-2xl flex items-center justify-center mx-auto mb-5",children:r.jsx(d_,{size:28,className:"icon-gray",strokeWidth:1.5})}),r.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:n(m?"register_title":"login_title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:n(m?"register_subtitle":"login_subtitle")})]}),h&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-center gap-3 text-red-700 dark:text-red-400",children:[r.jsx(Ca,{size:20}),r.jsx("span",{className:"text-sm",children:h})]}),r.jsxs("form",{onSubmit:E,className:"space-y-5",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:n("label_username")}),r.jsxs("div",{className:"relative",children:[r.jsx(f_,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 icon-gray",strokeWidth:1.75}),r.jsx("input",{type:"text",value:s,onChange:A=>l(A.target.value),className:"w-full pl-11 pr-4 py-3.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none transition-all text-base text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:n("placeholder_username"),required:!0,autoComplete:"username"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:n("label_password")}),r.jsxs("div",{className:"relative",children:[r.jsx(g_,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 icon-gray",strokeWidth:1.75}),r.jsx("input",{type:"password",value:o,onChange:A=>c(A.target.value),className:"w-full pl-11 pr-4 py-3.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none transition-all text-base text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:n(m?"placeholder_create_password":"placeholder_password"),required:!0,minLength:m?6:void 0,autoComplete:m?"new-password":"current-password"})]})]}),r.jsx("button",{type:"submit",disabled:d,className:"w-full py-3.5 px-4 btn-primary text-white font-semibold rounded-xl shadow-glow transition-all flex items-center justify-center gap-2 disabled:opacity-70",children:d?r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx("span",{children:n(m?"btn_create_account":"btn_login")}),r.jsx(h_,{size:18,strokeWidth:2})]})})]}),r.jsxs("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mt-8",children:[n(m?"text_has_account":"text_no_account")," ",r.jsx("button",{onClick:()=>{y(!m),p("")},className:"text-primary hover:underline font-medium",children:n(m?"link_sign_in":"link_create_one")})]})]}),r.jsxs("p",{className:"text-center text-xs text-gray-400 mt-6",children:[r.jsx("span",{className:"gradient-text font-semibold",children:"WhatsSMS"}),"  WhatsApp Marketing Platform"]})]})]})},ax=({currentContent:n="",onApplyText:s,contentType:l="template"})=>{const{t:o}=ut(),[c,d]=T.useState([]),[f,h]=T.useState(""),[p,m]=T.useState(!1),[y,x]=T.useState(null),[v,_]=T.useState(!1),w=T.useRef(null),M=T.useRef(null),E=[{label:" "+o("action_analyze"),prompt:o("prompt_analyze")},{label:" "+o("action_shorten"),prompt:o("prompt_shorten")},{label:" "+o("action_emojis"),prompt:o("prompt_emojis")},{label:" "+o("action_cta"),prompt:o("prompt_cta")}],A=O=>O.split(/(\*\*[^*]+\*\*)/g).map((G,L)=>G.startsWith("**")&&G.endsWith("**")?r.jsx("strong",{className:"font-semibold",children:G.slice(2,-2)},L):G);T.useEffect(()=>{w.current?.scrollIntoView({behavior:"smooth"})},[c]),T.useEffect(()=>{v||M.current?.focus()},[v]);const z=async(O=null)=>{const V=O||f.trim();if(!V||p)return;const G={role:"user",content:V};d(L=>[...L,G]),h(""),m(!0);try{const L=[...c,G],F=await ef.chatAssistant(L,n,l);d(Y=>[...Y,{role:"assistant",content:F}])}catch{d(L=>[...L,{role:"assistant",content:o("error_ai"),isError:!0}])}finally{m(!1)}},N=async(O,V)=>{try{await navigator.clipboard.writeText(O),x(V),setTimeout(()=>x(null),2e3)}catch(G){console.error("Failed to copy:",G)}},k=O=>{s&&s(O)},U=O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),z())};return v?r.jsxs("button",{onClick:()=>_(!1),className:"w-full flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl text-sm font-medium hover:opacity-90 transition-opacity",children:[r.jsx(pd,{size:16}),r.jsx("span",{children:o("ai_title")}),r.jsx(m_,{size:16})]}):r.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-surface-dark rounded-xl border border-gray-200 dark:border-gray-800 overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-800 bg-gradient-to-r from-emerald-500/10 to-teal-600/10",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-emerald-500 to-teal-600 flex items-center justify-center",children:r.jsx(fi,{size:16,className:"text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-sm",children:o("ai_title")}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:o("ai_subtitle",{type:l})})]})]}),r.jsx("button",{onClick:()=>_(!0),className:"p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:r.jsx(zi,{size:18})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{minHeight:"200px"},children:c.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-emerald-500/20 to-teal-600/20 flex items-center justify-center mb-3",children:r.jsx(pd,{size:24,className:"text-emerald-500"})}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:o("ai_welcome",{type:l})}),r.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:E.map((O,V)=>r.jsx("button",{onClick:()=>z(O.prompt),disabled:p,className:"px-3 py-1.5 text-xs bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors disabled:opacity-50",children:O.label},V))})]}):r.jsxs(r.Fragment,{children:[c.map((O,V)=>r.jsx("div",{className:`flex ${O.role==="user"?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[85%] rounded-2xl px-4 py-2.5 ${O.role==="user"?"bg-primary text-white rounded-br-md":O.isError?"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded-bl-md":"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-bl-md"}`,children:[r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:O.role==="assistant"?A(O.content):O.content}),O.role==="assistant"&&!O.isError&&r.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("button",{onClick:()=>N(O.content,V),className:"flex items-center gap-1 text-xs text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:y===V?r.jsxs(r.Fragment,{children:[r.jsx(hn,{size:12,className:"text-green-500"}),r.jsx("span",{className:"text-green-500",children:o("btn_copied")})]}):r.jsxs(r.Fragment,{children:[r.jsx(Jd,{size:12}),r.jsx("span",{children:o("btn_copy")})]})}),s&&r.jsxs("button",{onClick:()=>k(O.content),className:"flex items-center gap-1 text-xs text-primary hover:text-primary/80 transition-colors",children:[r.jsx(pd,{size:12}),r.jsx("span",{children:o("btn_apply")})]})]})]})},V)),p&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl rounded-bl-md px-4 py-3",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(sn,{size:14,className:"animate-spin text-emerald-500"}),r.jsx("span",{className:"text-sm text-gray-500",children:o("status_thinking")})]})})}),r.jsx("div",{ref:w})]})}),c.length>0&&r.jsx("div",{className:"px-4 pb-2 flex gap-2 overflow-x-auto",children:E.slice(0,3).map((O,V)=>r.jsx("button",{onClick:()=>z(O.prompt),disabled:p,className:"flex-shrink-0 px-2.5 py-1 text-xs bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors disabled:opacity-50",children:O.label},V))}),r.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-black/20",children:r.jsxs("div",{className:"flex items-end gap-2",children:[r.jsx("textarea",{ref:M,value:f,onChange:O=>h(O.target.value),onKeyDown:U,placeholder:o("placeholder_ask_ai"),rows:1,className:"flex-1 px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl outline-none focus:border-primary resize-none text-sm min-h-[42px] max-h-[120px] text-gray-900 dark:text-white placeholder:text-gray-400",style:{height:"auto"},disabled:p}),r.jsx("button",{onClick:()=>z(),disabled:!f.trim()||p,className:"p-2.5 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-90 transition-opacity",children:r.jsx(To,{size:18})})]})})]})},gA=()=>{const{t:n}=ut(),[s,l]=T.useState(1),[o,c]=T.useState([]),[d,f]=T.useState([]),[h,p]=T.useState(!0),[m,y]=T.useState(!1),[x,v]=T.useState(null),_=rs(),w=Lo(),[M,E]=T.useState(!1),[A,z]=T.useState(null),[N,k]=T.useState({name:"",messageBody:"",selectedLists:[],scheduledAt:"",files:[]}),[U,O]=T.useState(!1);T.useEffect(()=>{V()},[]);const V=async()=>{try{p(!0);const[j,D]=await Promise.all([ce.getLists(),ce.getTemplates()]);c(j.lists||[]),f(D.templates||[])}catch(j){v(j.message)}finally{p(!1)}},G=[{number:1,label:n("step_compose"),icon:dr},{number:2,label:n("step_recipients"),icon:mn},{number:3,label:n("step_review"),icon:hn}],L=j=>{k(D=>({...D,selectedLists:D.selectedLists.includes(j)?D.selectedLists.filter(H=>H!==j):[...D.selectedLists,j]}))},F=j=>{let D=j.content,H=[];try{const q=JSON.parse(j.content);D=q.body||j.content,q.files&&(H=q.files)}catch{console.log("Template is not JSON, using as raw text")}k(q=>({...q,messageBody:D,files:H}))},Y=()=>o.filter(j=>N.selectedLists.includes(j.id)).reduce((j,D)=>j+(D.memberCount||0),0),Z=()=>s===1?N.name&&N.messageBody:s===2?N.selectedLists.length>0:!0,te=async()=>{y(!0),v(null);try{const j=await ce.createCampaign({name:N.name,messageBody:N.messageBody,listIds:N.selectedLists,scheduledAt:N.scheduledAt||null,mediaIds:N.files.map(D=>D.mediaId)});z(j.campaign.id),E(!0)}catch(j){v(j.message),w.error(j.message||"Failed to create campaign")}finally{y(!1)}},C=async j=>{const D=j.target.files[0];if(D){if(D.size>10*1024*1024){v(n("error_file_size"));return}O(!0);try{const H=await ce.uploadFile(D);k(q=>({...q,files:[...q.files,{mediaId:H.mediaId,filename:H.filename||D.name,mimetype:H.mimeType||D.type}]}))}catch{v(n("error_upload_failed"))}finally{O(!1),j.target.value=null}}},R=j=>{k(D=>({...D,files:D.files.filter((H,q)=>q!==j)}))};return h?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(sn,{className:"w-8 h-8 animate-spin text-primary"})}):r.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-fade-in",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n("builder_title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:n("builder_subtitle")})]}),r.jsxs("div",{className:"flex items-center justify-between relative",children:[r.jsx("div",{className:"absolute top-6 left-0 right-0 h-0.5 bg-gray-200 dark:bg-gray-800 mx-16"}),r.jsx("div",{className:"absolute top-6 left-0 h-0.5 bg-primary mx-16 transition-all duration-500",style:{width:`${(s-1)/(G.length-1)*100}%`}}),G.map((j,D)=>r.jsxs("div",{className:"flex flex-col items-center relative z-10 animate-slide-up",style:{animationDelay:`${D*.1}s`,opacity:0},children:[r.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-300 ${s>j.number||s===j.number?"bg-primary text-white shadow-glow":"bg-gray-100 dark:bg-gray-800 text-gray-400"}`,children:s>j.number?r.jsx(hn,{size:20,strokeWidth:2.5}):r.jsx(j.icon,{size:20,strokeWidth:1.75})}),r.jsx("span",{className:`mt-3 text-sm font-medium ${s>=j.number?"text-gray-900 dark:text-white":"text-gray-400"}`,children:j.label})]},j.number))]}),x&&r.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-center gap-3 text-red-700 dark:text-red-400",children:[r.jsx(Ca,{size:20}),r.jsx("span",{children:x}),r.jsx("button",{onClick:()=>v(null),className:"ml-auto",children:r.jsx(_t,{size:18})})]}),r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-8 rounded-2xl shadow-soft border border-gray-100 dark:border-gray-800/80",children:[s===1&&r.jsxs("div",{className:"flex gap-6 animate-fade-in",children:[r.jsxs("div",{className:"flex-1 space-y-6",children:[r.jsx("h2",{className:"text-xl font-semibold",children:n("section_compose")}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:n("label_campaign_name_required")}),r.jsx("input",{type:"text",value:N.name,onChange:j=>k({...N,name:j.target.value}),className:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-colors text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:n("placeholder_campaign_name")})]}),d.length>0&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:n("label_use_template")}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:d.map(j=>r.jsx("button",{onClick:()=>F(j),className:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:j.name},j.id))})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:n("label_message_content")}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:"image/*,application/pdf",onChange:C,disabled:U}),r.jsx("label",{htmlFor:"file-upload",className:`p-2 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer transition-colors ${U?"opacity-50 cursor-not-allowed":""}`,title:n("tooltip_attach"),children:U?r.jsx(sn,{size:16,className:"animate-spin text-gray-500"}):r.jsx(yi,{size:16,className:"text-gray-500 dark:text-gray-400"})})]})]}),r.jsx("div",{className:"text-xs text-gray-400 mb-2",children:n("hint_personalization")}),r.jsx("textarea",{value:N.messageBody,onChange:j=>k({...N,messageBody:j.target.value}),className:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-colors resize-none h-40 text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"Hey {{name}}, we have exciting news for you..."}),r.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[N.messageBody.length," ",n("text_characters")]}),N.files&&N.files.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:N.files.map((j,D)=>r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm text-xs",children:[r.jsx(yi,{size:12,className:"text-gray-400"}),r.jsx("span",{className:"max-w-[150px] truncate text-gray-600 dark:text-gray-300",children:j.filename}),r.jsx("button",{type:"button",onClick:()=>R(D),className:"text-gray-400 hover:text-red-500",children:r.jsx(_t,{size:12})})]},D))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:n("label_schedule")}),r.jsx("input",{type:"datetime-local",value:N.scheduledAt,onChange:j=>k({...N,scheduledAt:j.target.value}),className:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-colors"})]})]}),r.jsx("div",{className:"w-[380px] flex-shrink-0",children:r.jsx(ax,{currentContent:N.messageBody,contentType:"campaign",onApplyText:j=>k(D=>({...D,messageBody:j}))})})]}),s===2&&r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsx("h2",{className:"text-xl font-semibold",children:n("section_select_recipients")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:n("text_select_recipients_subtitle")}),o.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-gray-400 mb-4",children:n("no_lists_found")}),r.jsx("button",{onClick:()=>_("/contacts"),className:"text-primary hover:underline",children:n("link_create_list")})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map((j,D)=>r.jsx("button",{onClick:()=>L(j.id),className:`p-4 rounded-xl border-2 text-left transition-all duration-200 animate-slide-up ${N.selectedLists.includes(j.id)?"border-primary bg-emerald-50 dark:bg-emerald-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,style:{animationDelay:`${D*.05}s`,opacity:0},children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:j.name}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[j.memberCount||0," contacts"]})]}),r.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${N.selectedLists.includes(j.id)?"border-primary bg-primary text-white":"border-gray-300 dark:border-gray-600"}`,children:N.selectedLists.includes(j.id)&&r.jsx(hn,{size:14})})]})},j.id))}),r.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-800",children:r.jsxs("p",{className:"text-lg font-medium",children:[n("label_total_recipients")," ",r.jsx("span",{className:"text-primary",children:Y()})]})})]}),s===3&&r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsx("h2",{className:"text-xl font-semibold",children:n("section_review")}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl",children:[r.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:n("label_campaign_name")}),r.jsx("p",{className:"font-medium",children:N.name})]}),r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl",children:[r.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:n("label_message_content")}),r.jsx("p",{className:"whitespace-pre-wrap",children:N.messageBody})]}),r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl",children:[r.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:n("step_recipients")}),r.jsx("p",{className:"font-medium",children:n("text_review_recipients",{count:Y(),lists:N.selectedLists.length})}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:o.filter(j=>N.selectedLists.includes(j.id)).map(j=>r.jsx("span",{className:"px-2 py-1 text-xs bg-gray-200 dark:bg-gray-800 rounded-lg",children:j.name},j.id))})]}),N.scheduledAt&&r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl",children:[r.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:n("label_scheduled_for")}),r.jsx("p",{className:"font-medium",children:new Date(N.scheduledAt).toLocaleString()})]})]})]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("button",{onClick:()=>s>1?l(s-1):_("/campaigns"),className:"px-6 py-3 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors font-medium",children:n(s===1?"btn_cancel":"btn_back")}),s<3?r.jsxs("button",{onClick:()=>l(s+1),disabled:!Z(),className:"flex items-center gap-2 px-6 py-3 btn-primary text-white rounded-xl font-medium shadow-glow disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx("span",{children:n("btn_continue")}),r.jsx(Lp,{size:18})]}):r.jsx("button",{onClick:te,disabled:m,className:"flex items-center gap-2 px-6 py-3 btn-primary text-white rounded-xl font-medium shadow-glow disabled:opacity-50",children:m?r.jsxs(r.Fragment,{children:[r.jsx(sn,{size:18,className:"animate-spin"}),r.jsx("span",{children:n("status_creating")})]}):r.jsxs(r.Fragment,{children:[r.jsx(hn,{size:18}),r.jsx("span",{children:n("builder_title")})]})})]}),M&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-2xl p-8 max-w-sm w-full text-center border border-gray-100 dark:border-gray-800",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/20 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(hn,{size:32,strokeWidth:3})}),r.jsx("h3",{className:"text-xl font-bold mb-2",children:n("modal_success_title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:n("text_success_subtitle")}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("button",{onClick:async()=>{try{w.success(n("msg_campaign_started")),E(!1),_("/campaigns"),await ce.sendCampaign(A)}catch(j){w.error(n("error_start_campaign")+j.message)}},className:"w-full py-3 btn-primary text-white rounded-xl font-medium shadow-glow flex items-center justify-center gap-2",children:[r.jsx(To,{size:18}),r.jsx("span",{children:n("btn_send_now")})]}),r.jsxs("button",{onClick:()=>_("/campaigns"),className:"w-full py-3 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-medium transition-colors flex items-center justify-center gap-2",children:[r.jsx(Tp,{size:18}),r.jsx("span",{children:n("btn_go_dashboard")})]})]})]})})]})},hA=()=>{const{t:n}=ut(),[s,l]=T.useState([]),[o,c]=T.useState(null),[d,f]=T.useState(!0),[h,p]=T.useState(null),[m,y]=T.useState(""),x=rs(),v=ar.useCallback(async()=>{try{f(!0),p(null);const[z,N]=await Promise.all([ce.getCampaigns({status:m||void 0,limit:50}),ce.getCampaignStats()]);l(z.campaigns||[]),c(N)}catch(z){p(z.message)}finally{f(!1)}},[m]);T.useEffect(()=>{v()},[v]);const _=async z=>{if(confirm(n("confirm_send_campaign")))try{await ce.sendCampaign(z),v()}catch(N){alert(N.message)}},w=async z=>{if(confirm(n("confirm_stop_campaign")))try{await ce.stopCampaign(z),v()}catch(N){alert(N.message)}},M=async z=>{if(confirm(n("confirm_delete_campaign")))try{await ce.deleteCampaign(z),v()}catch(N){alert(N.message)}},E=z=>{switch(z){case"COMPLETED":return{bg:"bg-blue-50 dark:bg-blue-900/20",text:"text-blue-600 dark:text-blue-400",icon:Td,label:n("status_completed")};case"IN_PROGRESS":return{bg:"bg-emerald-50 dark:bg-emerald-900/20",text:"text-emerald-600 dark:text-emerald-400",icon:tr,label:n("status_in_progress")};case"SCHEDULED":return{bg:"bg-amber-50 dark:bg-amber-900/20",text:"text-amber-600 dark:text-amber-400",icon:xi,label:n("status_scheduled")};case"STOPPED":return{bg:"bg-red-50 dark:bg-red-900/20",text:"text-red-600 dark:text-red-400",icon:Ap,label:n("status_stopped")};default:return{bg:"bg-gray-50 dark:bg-gray-800/50",text:"text-gray-500 dark:text-gray-400",icon:xi,label:n("status_draft")}}},A=[{label:n("stat_total_campaigns"),value:o?.totalCampaigns??"-",icon:Dd},{label:n("stat_messages_sent"),value:o?.totalMessagesSent?.toLocaleString()??"-",icon:To},{label:n("rate_delivery"),value:`${o?.deliveryRate??0}%`,icon:Td},{label:n("stat_active_now"),value:o?.activeCampaigns??"-",icon:tr}];return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n("campaigns_title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:n("campaigns_subtitle")})]}),r.jsxs("button",{onClick:()=>x("/campaigns/new"),className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[r.jsx(ka,{size:18,strokeWidth:2}),r.jsx("span",{children:n("btn_new_campaign")})]})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:A.map((z,N)=>r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-4 rounded-xl border border-gray-100 dark:border-gray-800/80 shadow-soft flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:r.jsx(z.icon,{size:18,className:"icon-gray",strokeWidth:1.75})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-400 font-medium",children:z.label}),r.jsx("p",{className:"text-xl font-bold",children:z.value})]})]},N))}),r.jsxs("div",{className:"flex items-center gap-4 overflow-x-auto pb-2",children:[r.jsx("button",{onClick:()=>v(),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:r.jsx(Mo,{size:18,className:"icon-gray"})}),["","DRAFT","IN_PROGRESS","COMPLETED","STOPPED"].map(z=>r.jsx("button",{onClick:()=>y(z),className:`px-4 py-2 text-sm font-medium rounded-lg whitespace-nowrap transition-colors ${m===z?"bg-primary text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:n(z?`status_${z.toLowerCase()}`:"label_all_contacts")},z))]}),h&&r.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-center gap-3 text-red-700 dark:text-red-400",children:[r.jsx(Ca,{size:18}),r.jsx("span",{children:h}),r.jsx("button",{onClick:v,className:"ml-auto text-sm underline",children:n("btn_refresh")})]}),d?r.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:[1,2,3,4].map(z=>r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-800 rounded-xl skeleton"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"h-5 w-32 bg-gray-200 dark:bg-gray-800 rounded skeleton"}),r.jsx("div",{className:"h-4 w-24 bg-gray-200 dark:bg-gray-800 rounded mt-2 skeleton"})]})]}),r.jsx("div",{className:"h-16 bg-gray-200 dark:bg-gray-800 rounded-xl skeleton"})]},z))}):s.length===0?r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-12 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-xl flex items-center justify-center mx-auto mb-4",children:r.jsx(Dd,{size:28,className:"icon-gray"})}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:n("no_campaigns_yet")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:m?n("no_campaigns_filter",{filter:m.toLowerCase().replace("_"," ")}):n("start_campaign_prompt")}),r.jsxs("button",{onClick:()=>x("/campaigns/new"),className:"inline-flex items-center gap-2 px-4 py-2 btn-primary text-white rounded-xl font-medium",children:[r.jsx(ka,{size:18}),n("btn_create_campaign")]})]}):r.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:s.map((z,N)=>{const k=E(z.status),U=k.icon;return r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 card-hover animate-slide-up group",style:{animationDelay:`${N*.05}s`,opacity:0},children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`w-12 h-12 ${k.bg} rounded-xl flex items-center justify-center`,children:r.jsx(U,{size:22,className:k.text,strokeWidth:1.75})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:z.name}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1.5",children:[r.jsx(p_,{size:14,className:"icon-gray"}),new Date(z.createdAt).toLocaleDateString()]})]})]}),r.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${k.bg} ${k.text}`,children:k.label})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[r.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("p",{className:"text-lg font-bold",children:z.recipientCount||0}),r.jsx("p",{className:"text-xs text-gray-400",children:n("stat_recipients")})]}),r.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("p",{className:"text-lg font-bold text-blue-600",children:z.statsDelivered||0}),r.jsx("p",{className:"text-xs text-gray-400",children:n("status_delivered")})]}),r.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("p",{className:"text-lg font-bold text-emerald-600",children:z.statsRead||0}),r.jsx("p",{className:"text-xs text-gray-400",children:n("status_read")})]}),r.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("p",{className:"text-lg font-bold text-red-600",children:z.statsFailed||0}),r.jsx("p",{className:"text-xs text-gray-400",children:n("status_failed")})]})]}),z.status==="IN_PROGRESS"&&r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[r.jsx("span",{children:n("label_progress")}),r.jsxs("span",{children:[z.statsDelivered||0," / ",z.recipientCount||0]})]}),r.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500 animate-pulse",style:{width:`${z.recipientCount?z.statsDelivered/z.recipientCount*100:0}%`}})})]}),r.jsxs("div",{className:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[z.status==="DRAFT"&&r.jsx("button",{onClick:()=>_(z.id),className:"p-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-gray-400 hover:text-blue-600 rounded-lg transition-colors",title:"Send Campaign",children:r.jsx(tr,{size:18})}),z.status==="IN_PROGRESS"&&r.jsx("button",{onClick:()=>w(z.id),className:"p-2 hover:bg-amber-50 dark:hover:bg-amber-900/20 text-gray-400 hover:text-amber-600 rounded-lg transition-colors",title:"Stop Campaign",children:r.jsx(Mp,{size:18})}),z.status!=="IN_PROGRESS"&&r.jsx("button",{onClick:()=>M(z.id),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-400 hover:text-red-600 rounded-lg transition-colors",title:"Delete Campaign",children:r.jsx(rn,{size:18})})]})]},z.id)})})]})},mA=({onSelect:n,isModal:s})=>{const{t:l}=ut(),[o,c]=T.useState([]),[d,f]=T.useState(!0),[h,p]=T.useState(!1),[m,y]=T.useState(!1),x=T.useRef(null),v=async()=>{try{f(!0);const z=await ce.getMedia();c(z.media||[])}catch{}finally{f(!1)}};T.useEffect(()=>{v()},[]);const _=async z=>{const N=z.target.files?.[0];if(N){p(!0);try{const k=await ce.uploadMedia(N);if(y(!1),v(),n){const U=`undefined/uploads/${k.media.path}`;n({...k.media,previewUrl:U})}}catch(k){alert(k.message)}finally{p(!1)}}},w=async(z,N)=>{if(N.stopPropagation(),!!confirm("Are you sure you want to delete this file?"))try{await ce.deleteMedia(z),c(o.filter(k=>k.id!==z))}catch(k){alert(k.message)}},M=z=>{if(!n)return;const N=`undefined/uploads/${z.path}`;n({...z,previewUrl:N})},E=z=>{if(z===0)return"0 B";const N=1024,k=["B","KB","MB","GB"],U=Math.floor(Math.log(z)/Math.log(N));return parseFloat((z/Math.pow(N,U)).toFixed(1))+" "+k[U]},A=z=>z.startsWith("image/")?r.jsx(pi,{size:24,className:"text-purple-500"}):z.startsWith("video/")?r.jsx(x_,{size:24,className:"text-pink-500"}):z.startsWith("audio/")?r.jsx(y_,{size:24,className:"text-emerald-500"}):r.jsx(dr,{size:24,className:"text-gray-500"});return r.jsxs("div",{className:"space-y-6 animate-fade-in h-full flex flex-col",children:[!s&&r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:l("media_title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:l("media_subtitle")})]}),r.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[r.jsx(er,{size:18,strokeWidth:2}),r.jsx("span",{children:l("btn_upload_file")})]})]}),s&&r.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-100 dark:border-gray-800",children:[r.jsx("h2",{className:"text-xl font-bold",children:l("modal_upload_title")||"Select Media"}),r.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg text-sm font-medium transition-colors",children:[r.jsx(er,{size:16,strokeWidth:2}),r.jsx("span",{children:l("btn_upload_file")})]})]}),d?r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(z=>r.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-800 rounded-2xl skeleton"},z))}):o.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white dark:bg-surface-dark rounded-2xl border border-dashed border-gray-200 dark:border-gray-800",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-50 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4",children:r.jsx(pi,{size:32,className:"text-gray-300 dark:text-gray-600"})}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:l("no_media")}),r.jsx("button",{onClick:()=>y(!0),className:"mt-2 text-primary text-sm hover:underline",children:l("btn_upload_first")})]}):r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 overflow-y-auto pr-2 pb-20",children:o.map(z=>r.jsxs("div",{onClick:n?()=>M(z):void 0,className:`group relative bg-white dark:bg-surface-dark rounded-2xl shadow-soft border border-gray-100 dark:border-gray-800/80 overflow-hidden ${n?"cursor-pointer ring-2 ring-transparent hover:ring-primary":"card-hover"}`,children:[r.jsxs("div",{className:"aspect-square bg-gray-50 dark:bg-black/20 flex items-center justify-center relative overflow-hidden",children:[z.mimetype.startsWith("image/")?r.jsx("img",{src:`undefined/uploads/${z.path}`,alt:z.filename,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}):A(z.mimetype),!n&&r.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2 backdrop-blur-[2px]",children:r.jsx("button",{onClick:N=>w(z.id,N),className:"p-2 bg-white/10 hover:bg-white/20 text-white rounded-lg backdrop-blur-sm transition-colors",title:"Delete",children:r.jsx(rn,{size:18})})}),n&&r.jsx("div",{className:"absolute inset-0 bg-primary/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:r.jsx("span",{className:"px-3 py-1 bg-primary text-white text-xs font-bold rounded-full shadow-lg",children:"Select"})})]}),r.jsxs("div",{className:"p-3",children:[r.jsx("p",{className:"text-sm font-medium truncate text-gray-900 dark:text-white",title:z.filename,children:z.filename}),r.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:[E(z.size),"  ",z.mimetype.split("/")[1].toUpperCase()]})]})]},z.id))}),m&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-surface-dark w-full max-w-md rounded-2xl shadow-2xl p-6 animate-slide-up",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-bold",children:l("modal_upload_title")}),r.jsx("button",{onClick:()=>y(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:r.jsx(_t,{size:20})})]}),r.jsxs("div",{className:"border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl p-8 text-center hover:border-primary transition-colors cursor-pointer",onClick:()=>x.current?.click(),children:[r.jsx("input",{ref:x,type:"file",className:"hidden",onChange:_,accept:"image/*,video/*,application/pdf"}),h?r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx(sn,{size:32,className:"text-primary animate-spin mb-3"}),r.jsx("p",{className:"text-sm font-medium",children:l("status_uploading")})]}):r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"w-12 h-12 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-500 rounded-full flex items-center justify-center mb-3",children:r.jsx(er,{size:24})}),r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:l("text_drag_drop")}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:l("text_file_types")})]})]})]})})]})},pA=({header:n,body:s,footer:l,files:o,buttons:c})=>{const d=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),f=h=>h?h.split(/(\{\{\d+\}\})/g).map((m,y)=>m.match(/\{\{\d+\}\}/)?r.jsx("span",{className:"bg-blue-100 text-blue-600 px-1 rounded mx-0.5 font-medium",children:m},y):m):r.jsx("span",{className:"text-gray-400 italic",children:"Type something..."});return r.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-4 rounded-xl overflow-hidden relative",children:[r.jsx("div",{className:"absolute inset-0",style:{backgroundImage:'url("/whatsapp-bg.png")',backgroundSize:"cover",backgroundPosition:"center"}}),r.jsxs("div",{className:"w-full max-w-[320px] relative z-10 flex flex-col gap-2",children:[r.jsxs("div",{className:"bg-white dark:bg-[#202c33] rounded-lg shadow-sm p-1 relative rounded-tr-none self-end message-bubble-tail",children:[r.jsxs("div",{className:"p-2 pb-6 min-w-[120px]",children:[o&&o.length>0&&r.jsx("div",{className:"mb-2 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 flex items-center justify-center border border-gray-100 dark:border-gray-700",children:o[0].mimetype?.startsWith("image/")&&o[0].previewUrl?r.jsx("img",{src:o[0].previewUrl,alt:"Preview",className:"w-full h-auto max-h-48 object-cover"}):r.jsxs("div",{className:"text-center p-4",children:[r.jsx(yi,{className:"mx-auto mb-2 text-gray-400",size:24}),r.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[150px]",children:o[0].filename}),r.jsx("p",{className:"text-[10px] text-gray-400 uppercase mt-0.5",children:o[0].mimetype?.split("/")[1]||"FILE"})]})}),n&&r.jsx("div",{className:"font-bold text-sm text-gray-900 dark:text-gray-100 mb-1 leading-snug",children:n}),r.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-200 whitespace-pre-wrap leading-relaxed",children:f(s)}),l&&r.jsx("div",{className:"text-[11px] text-gray-500 dark:text-gray-400 mt-2 pt-1 border-t border-gray-100 dark:border-gray-700/50",children:l})]}),r.jsxs("div",{className:"absolute right-2 bottom-1 flex items-center gap-1",children:[r.jsx("span",{className:"text-[10px] text-gray-400",children:d}),r.jsx(Op,{size:14,className:"text-[#53bdeb]"})]})]}),c&&c.length>0&&c.map((h,p)=>r.jsx("div",{className:"bg-white dark:bg-[#202c33] rounded-lg shadow-sm p-3 text-center cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:r.jsxs("span",{className:"text-[#00a884] font-medium text-sm block truncate",children:[h.type==="URL"&&" ",h.type==="PHONE_NUMBER"&&" ",h.text||"Button Text"]})},p))]})]})},xA=()=>{const{t:n}=ut(),[s,l]=T.useState([]),[o,c]=T.useState(!0),[d,f]=T.useState(!1),[h,p]=T.useState(null),[m,y]=T.useState({name:"",header:"",body:"",footer:"",buttons:[],files:[]}),[x,v]=T.useState(!1),[_,w]=T.useState(!1),[M,E]=T.useState(null),A=async()=>{try{c(!0);const L=await ce.getTemplates();l(L.templates||[])}catch{console.error(err)}finally{c(!1)}};T.useEffect(()=>{A()},[]);const z=()=>{y({name:"",header:"",body:"",footer:"",buttons:[],files:[]}),p(null),E(null)},N=async()=>{if(!m.body.trim()){alert("Please add body text first.");return}w(!0),E(null);try{const L=await ef.analyzeTemplate(m.body,m.name);E(L)}catch{alert("Failed to analyze template.")}finally{w(!1)}},k=async L=>{const F=L.target.files[0];if(!F)return;if(F.size>10*1024*1024){alert("File size must be less than 10MB");return}const Y=URL.createObjectURL(F);v(!0);try{const Z=await ce.uploadFile(F);y(te=>({...te,files:[...te.files,{mediaId:Z.mediaId,filename:Z.filename||F.name,mimetype:Z.mimeType||F.type,previewUrl:Y}]}))}catch{alert("Failed to upload file")}finally{v(!1),L.target.value=null}},U=L=>{y(F=>({...F,files:F.files.filter((Y,Z)=>Z!==L)}))},O=async()=>{try{const L=JSON.stringify({header:m.header,body:m.body,footer:m.footer,buttons:m.buttons,files:m.files});h?await ce.updateTemplate(h,{name:m.name,content:L}):await ce.createTemplate({name:m.name,content:L}),f(!1),A(),z()}catch{alert(err.message)}},V=L=>{try{const F=JSON.parse(L.content);y({name:L.name,header:F.header||"",body:F.body||L.content,footer:F.footer||"",buttons:F.buttons||[],files:F.files||[]})}catch{y({name:L.name,header:"",body:L.content,footer:"",buttons:[]})}p(L.id),f(!0)},G=async L=>{if(confirm("Start deletion?"))try{await ce.deleteTemplate(L),l(s.filter(F=>F.id!==L))}catch{alert(err.message)}};return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n("templates_title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:n("templates_subtitle")})]}),r.jsxs("button",{onClick:()=>{z(),f(!0)},className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[r.jsx(ka,{size:18,strokeWidth:2}),r.jsx("span",{children:n("btn_create_template")})]})]}),o?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(L=>r.jsx("div",{className:"h-48 bg-gray-100 dark:bg-gray-800 rounded-xl skeleton"},L))}):s.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white dark:bg-surface-dark rounded-xl border border-dashed border-gray-200 dark:border-gray-800",children:[r.jsx("div",{className:"w-16 h-16 bg-blue-50 dark:bg-blue-900/20 rounded-full flex items-center justify-center mb-4",children:r.jsx(Ci,{size:32,className:"text-blue-500"})}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:n("no_templates")})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(L=>{let F;try{F=JSON.parse(L.content)}catch{F={body:L.content}}return r.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 p-5 card-hover",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 text-blue-600 rounded-lg",children:r.jsx(Dp,{size:18})}),r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white truncate",children:L.name})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>V(L),className:"p-2 text-gray-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:r.jsx(Ei,{size:16})}),r.jsx("button",{onClick:()=>G(L.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:r.jsx(rn,{size:16})})]})]}),r.jsx("div",{className:"bg-[#E5DDD5] dark:bg-[#1f2c34] p-3 rounded-lg text-sm relative",children:r.jsxs("div",{className:"bg-white dark:bg-[#202c33] p-2 rounded-lg shadow-sm text-gray-900 dark:text-gray-100",children:[F.header&&r.jsx("p",{className:"font-bold mb-1 opacity-90",children:F.header}),r.jsx("p",{className:"whitespace-pre-wrap",children:F.body}),F.footer&&r.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:F.footer})]})})]},L.id)})}),d&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-surface-dark w-full max-w-[95vw] h-[90vh] rounded-xl shadow-2xl overflow-hidden flex animate-slide-up",children:[r.jsxs("div",{className:"w-[35%] p-6 overflow-y-auto border-r border-gray-200 dark:border-gray-800 scrollbar-hide",children:[r.jsx("h2",{className:"text-xl font-bold mb-6",children:n(h?"modal_edit_template":"modal_new_template")}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1.5",children:n("label_template_name")}),r.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-xl bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-gray-700 outline-none focus:border-primary text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"e.g. welcome_message",value:m.name,onChange:L=>y({...m,name:L.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1.5",children:n("label_header_optional")}),r.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-xl bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-gray-700 outline-none focus:border-primary text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"Company Name / Title",value:m.header,onChange:L=>y({...m,header:L.target.value})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[r.jsx("label",{className:"block text-sm font-medium",children:n("label_body_text")}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"file",id:"tpl-file-upload",className:"hidden",accept:"image/*,application/pdf",onChange:k,disabled:x}),r.jsx("label",{htmlFor:"tpl-file-upload",className:`p-1.5 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer transition-colors ${x?"opacity-50 cursor-not-allowed":""}`,title:"Attach Image or PDF",children:x?r.jsx(sn,{size:16,className:"animate-spin text-gray-500"}):r.jsx(yi,{size:16,className:"text-gray-500 dark:text-gray-400"})})]})]}),r.jsx("textarea",{className:"w-full h-32 px-4 py-3 rounded-xl bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-gray-700 outline-none focus:border-primary resize-none text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"Hello {{1}}, thanks for signing up!",value:m.body,onChange:L=>y({...m,body:L.target.value})}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Use ","{{1}}",", ","{{2}}"," for variables."]}),m.files.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:m.files.map((L,F)=>r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm text-xs",children:[r.jsx(yi,{size:12,className:"text-gray-400"}),r.jsx("span",{className:"max-w-[150px] truncate text-gray-600 dark:text-gray-300",children:L.filename}),r.jsx("button",{type:"button",onClick:()=>U(F),className:"text-gray-400 hover:text-red-500",children:r.jsx(_t,{size:12})})]},F))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1.5",children:n("label_footer_optional")}),r.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-xl bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-gray-700 outline-none focus:border-primary text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"Reply STOP to unsubscribe",value:m.footer,onChange:L=>y({...m,footer:L.target.value})})]})]}),r.jsxs("div",{className:"mt-8 flex gap-3",children:[r.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-2.5 rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800",children:n("btn_cancel")}),r.jsxs("button",{onClick:N,disabled:_||!m.body.trim(),className:"flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-primary text-primary hover:bg-primary/10 disabled:opacity-50",children:[_?r.jsx(sn,{size:16,className:"animate-spin"}):r.jsx(fi,{size:16}),n(_?"status_analyzing":"btn_analyze")]}),r.jsx("button",{onClick:O,className:"flex-1 py-2.5 btn-primary text-white rounded-xl shadow-glow",children:n("btn_save_template")})]})]}),r.jsxs("div",{className:"w-[30%] bg-gray-50/50 dark:bg-black/10 border-r border-gray-200 dark:border-gray-800 p-4 flex flex-col",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-4 px-2",children:n("label_preview")}),r.jsx("div",{className:"flex-1 rounded-2xl overflow-hidden border border-gray-200 dark:border-gray-800 shadow-inner",children:r.jsx(pA,{header:m.header,body:m.body,footer:m.footer,files:m.files,buttons:m.buttons})})]}),r.jsxs("div",{className:"w-[35%] bg-gray-50 dark:bg-black/40 flex flex-col overflow-hidden p-4",children:[M&&r.jsxs("div",{className:`mb-4 p-4 rounded-xl border ${M.verdict==="good"?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800":M.verdict==="bad"?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[M.verdict==="good"?r.jsx(b_,{size:18,className:"text-emerald-600"}):r.jsx(Ca,{size:18,className:M.verdict==="bad"?"text-red-600":"text-amber-600"}),r.jsxs("span",{className:"font-semibold",children:["Score: ",M.score,"/10"]})]}),r.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-2",children:M.summary}),M.suggestions&&M.suggestions.length>0&&r.jsx("ul",{className:"text-sm space-y-1",children:M.suggestions.map((L,F)=>r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-gray-400",children:""}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:L})]},F))})]}),r.jsx(ax,{currentContent:m.body,contentType:"template",onApplyText:L=>{y(F=>({...F,body:L})),E(null)}})]})]})})]})},yA=()=>{const{isDark:n,toggleTheme:s}=nx(),l=Lo(),{t:o,i18n:c}=ut(),[d,f]=T.useState({phoneNumberId:"",accessToken:"",wabaId:"",verifyToken:"whatsms_token"}),[h,p]=T.useState(!0),[m,y]=T.useState(!1),[x,v]=T.useState(!1),[_,w]=T.useState(""),M=`${window.location.origin}/webhooks`;T.useEffect(()=>{E()},[]);const E=async()=>{try{const k=await ce.get("/settings");k&&f({phoneNumberId:k.phoneNumberId||"",accessToken:k.accessToken||"",wabaId:k.wabaId||"",verifyToken:k.verifyToken||"whatsms_token"})}catch(k){console.error("Failed to load settings",k)}finally{p(!1)}},A=k=>{f({...d,[k.target.name]:k.target.value})},z=async()=>{try{await ce.post("/settings",d),await ce.post("/settings",d),l.success(o("success_config_saved")||"Configuration saved successfully!")}catch(k){console.error("Failed to save settings",k),l.error(o("error_config_save")||"Failed to save configuration")}},N=()=>{navigator.clipboard.writeText(M),v(!0),setTimeout(()=>v(!1),2e3)};return h?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:o("settings_title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:o("settings_subtitle")})]}),r.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[r.jsx("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 lg:col-span-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 flex items-center justify-center",children:r.jsx(Md,{size:20})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:o("settings_title")}),r.jsx("p",{className:"text-sm text-gray-400",children:o("section_appearance")})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("select",{value:c.language,onChange:k=>c.changeLanguage(k.target.value),className:"px-3 py-1.5 rounded-lg bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 text-sm outline-none focus:border-primary",children:[r.jsx("option",{value:"en",children:"English"}),r.jsx("option",{value:"fr",children:"Franais"})]}),r.jsxs("button",{onClick:s,className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 ${n?"bg-emerald-600":"bg-gray-200"}`,children:[r.jsx("span",{className:"sr-only",children:"Toggle theme"}),r.jsx("span",{className:`${n?"translate-x-7":"translate-x-1"} inline-block h-6 w-6 transform rounded-full bg-white transition-transform duration-300 flex items-center justify-center`,children:n?r.jsx(v_,{size:14,className:"text-emerald-600"}):r.jsx(__,{size:14,className:"text-orange-400"})})]})]})]})}),r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 flex items-center justify-center",children:r.jsx(Md,{size:20})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:o("section_credentials")}),r.jsx("p",{className:"text-sm text-gray-400",children:o("section_credentials_subtitle")})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:o("label_phone_id")}),r.jsx("input",{type:"text",name:"phoneNumberId",value:d.phoneNumberId,onChange:A,placeholder:"e.g. 10452...",className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-all text-gray-900 dark:text-white placeholder:text-gray-400"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:o("hint_phone_id")})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:o("label_access_token")}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:m?"text":"password",name:"accessToken",value:d.accessToken,onChange:A,placeholder:o("placeholder_access_token"),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-all pr-12 text-gray-900 dark:text-white placeholder:text-gray-400"}),r.jsx("button",{onClick:()=>y(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:m?r.jsx(N_,{size:18}):r.jsx(j_,{size:18})})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-2",children:[o("label_waba_id")," ",r.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),r.jsx("input",{type:"text",name:"wabaId",value:d.wabaId,onChange:A,placeholder:"e.g. 123456789...",className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-all text-gray-900 dark:text-white placeholder:text-gray-400"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:o("hint_waba_id")})]}),r.jsx("div",{className:"pt-4",children:r.jsxs("button",{onClick:z,className:"w-full px-6 py-2.5 bg-primary hover:bg-primary-dark text-white rounded-xl font-medium transition-colors flex items-center justify-center gap-2",children:[r.jsx(Rp,{size:18}),o("btn_save_credentials")]})}),r.jsxs("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-800",children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:o("label_test_connectivity")}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:_,onChange:k=>w(k.target.value),placeholder:"Recipient Phone (e.g. 1555...)",className:"flex-1 px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-all text-gray-900 dark:text-white placeholder:text-gray-400"}),r.jsxs("button",{onClick:async()=>{if(!_){l.error(o("error_no_phone"));return}try{await z();const k=await ce.post("/settings/test",{targetPhone:_});l.success(k.message||o("success_connection"))}catch(k){l.error(k.message||o("error_connection"))}},className:"px-6 py-2.5 bg-gray-100 hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-medium transition-colors flex items-center justify-center gap-2 whitespace-nowrap",title:"Send 'hello_world' template",children:[r.jsx(d0,{size:18}),o("btn_send_test")]})]}),r.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[o("hint_test_message")," ",r.jsx("br",{}),r.jsx("span",{dangerouslySetInnerHTML:{__html:o("hint_test_warning")}})]})]}),r.jsx("p",{className:"text-xs text-center text-gray-400 mt-1",children:o("hint_save_before_test")})]})]}),r.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 h-fit",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-teal-50 dark:bg-teal-900/20 text-teal-600 flex items-center justify-center",children:r.jsx(d0,{size:20})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:o("section_webhook")}),r.jsx("p",{className:"text-sm text-gray-400",children:o("section_webhook_subtitle")})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl border border-gray-100 dark:border-gray-800",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:o("label_callback_url")}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 text-sm font-mono text-gray-600 dark:text-gray-300 break-all",children:M}),r.jsx("button",{onClick:N,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Copy URL",children:x?r.jsx(hn,{size:16,className:"text-blue-500"}):r.jsx(Jd,{size:16,className:"text-gray-400"})})]})]}),r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl border border-gray-100 dark:border-gray-800",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:o("label_verify_token")}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",name:"verifyToken",value:d.verifyToken,onChange:A,placeholder:"whatsms_token",className:"flex-1 w-full px-4 py-2 rounded-xl bg-white dark:bg-surface-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-all text-sm font-mono"}),r.jsx("div",{className:"text-xs px-2 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 rounded",children:o("label_editable")})]}),r.jsx("p",{className:"text-xs text-gray-400 mt-2",children:o("hint_verify_token")})]}),r.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/10 p-4 rounded-xl text-sm text-emerald-800 dark:text-emerald-300",children:[r.jsx("h4",{className:"font-semibold mb-1",children:o("label_setup_instructions")}),r.jsxs("ol",{className:"list-decimal pl-4 space-y-1 opacity-80",children:[r.jsx("li",{children:o("instr_step_1")}),r.jsx("li",{children:o("instr_step_2")}),r.jsx("li",{children:o("instr_step_3")}),r.jsx("li",{children:o("instr_step_4")}),r.jsxs("li",{children:[o("instr_step_5")," ",r.jsx("code",{children:"messages"}),", ",r.jsx("code",{children:"message_status"}),"."]})]})]})]})]})]})]})};function bA(){const{t:n}=ut(),[s,l]=T.useState([]),[o,c]=T.useState(!0),[d,f]=T.useState(null),[h,p]=T.useState(null),[m,y]=T.useState("");T.useEffect(()=>{x()},[]),T.useEffect(()=>{const E=()=>f(null);return document.addEventListener("click",E),()=>document.removeEventListener("click",E)},[]);const x=async()=>{try{const E=await ce.get("/flows");l(E)}catch(E){console.error("Failed to fetch flows",E)}finally{c(!1)}},v=async E=>{if(confirm(n("confirm_delete_flow")))try{await ce.delete(`/flows/${E}`),x()}catch(A){console.error("Failed to delete flow",A)}},_=E=>{p(E.id),y(E.name),f(null)},w=async()=>{if(!m.trim()){p(null);return}const E=s.find(A=>A.id===h);if(E&&E.name!==m)try{await ce.put(`/flows/${E.id}`,{...E,name:m}),l(s.map(A=>A.id===h?{...A,name:m}:A))}catch(A){console.error("Failed to rename flow",A),alert(n("error_rename_flow")),x()}p(null)},M=async E=>{try{await ce.put(`/flows/${E.id}`,{isActive:!E.isActive}),x()}catch(A){console.error("Failed to update status",A)}};return o?r.jsx("div",{className:"p-8 text-center text-gray-400",children:"Loading automations..."}):r.jsxs("div",{className:"p-6 max-w-7xl mx-auto min-h-screen",children:[r.jsxs("div",{className:"flex justify-between items-center mb-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-neutral-100 mb-2",children:n("automations_title")}),r.jsx("p",{className:"text-gray-500 dark:text-neutral-400",children:n("automations_subtitle")})]}),r.jsxs(ho,{to:"/automations/new",className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors shadow-sm",children:[r.jsx(ka,{size:20}),n("btn_create_flow")]})]}),s.length===0?r.jsxs("div",{className:"text-center py-16 bg-white dark:bg-[#0F0F0F] rounded-xl border border-gray-200 dark:border-[#262626] shadow-sm transition-colors",children:[r.jsx(bo,{size:48,className:"mx-auto text-gray-400 dark:text-neutral-600 mb-4"}),r.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-2",children:n("no_automations")}),r.jsx("p",{className:"text-gray-500 dark:text-neutral-400 mb-6",children:n("no_automations_subtitle")}),r.jsxs(ho,{to:"/automations/new",className:"text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300 font-medium",children:[n("btn_get_started")," "]})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(E=>r.jsxs("div",{className:"bg-white dark:bg-[#0F0F0F] rounded-xl border border-gray-200 dark:border-[#262626] p-6 hover:shadow-md transition-all duration-200",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsx("div",{className:`p-2 rounded-lg ${E.isActive?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-500 dark:bg-[#1A1A1A] dark:text-neutral-400"}`,children:r.jsx(bo,{size:24})}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:A=>{A.stopPropagation(),A.preventDefault(),f(d===E.id?null:E.id)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-white p-1 rounded-full hover:bg-gray-100 dark:hover:bg-[#262626] transition-colors",children:[r.jsx("span",{className:"sr-only",children:"Menu"}),r.jsx($p,{size:20})]}),d===E.id&&r.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-[#1A1A1A] rounded-lg shadow-xl py-1 z-50 border border-gray-200 dark:border-[#333] animate-in fade-in zoom-in-95 duration-100",children:[r.jsxs("button",{onClick:A=>{A.stopPropagation(),_(E)},className:"w-full text-left px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#252525] flex items-center gap-2",children:[r.jsx(Ei,{size:16})," ",n("btn_edit")]}),r.jsxs("button",{onClick:A=>{A.stopPropagation(),f(null),v(E.id)},className:"w-full text-left px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[r.jsx(rn,{size:16})," ",n("btn_delete")]})]})]})]}),h===E.id?r.jsxs("div",{className:"mb-4",children:[r.jsx("input",{type:"text",autoFocus:!0,value:m,onChange:A=>y(A.target.value),onBlur:w,onKeyDown:A=>{A.key==="Enter"&&w(),A.key==="Escape"&&p(null)},className:"w-full text-lg font-semibold text-gray-900 dark:text-neutral-100 bg-white dark:bg-[#1A1A1A] border border-indigo-500 rounded px-2 py-1 outline-none shadow-sm"}),r.jsx("p",{className:"text-xs text-indigo-500 mt-1",children:n("placeholder_rename")})]}):r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-neutral-100 mb-2 truncate cursor-pointer hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",onDoubleClick:()=>_(E),title:n("btn_edit"),children:E.name}),r.jsx("p",{className:"text-gray-500 dark:text-neutral-400 text-sm mb-4 line-clamp-2",children:E.description||"No description provided."})]}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100 dark:border-[#262626]",children:[r.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-neutral-400",children:r.jsxs("span",{children:[E._count?.executions||0," ",n("label_runs")]})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>M(E),className:`p-2 rounded-lg transition-colors ${E.isActive?"bg-green-100 text-green-600 hover:bg-green-200 dark:bg-green-900/30 dark:text-green-400 dark:hover:bg-green-900/50":"bg-gray-100 text-gray-500 hover:bg-gray-200 dark:bg-[#1A1A1A] dark:text-neutral-400 dark:hover:bg-[#262626]"}`,title:E.isActive?n("tooltip_active"):n("tooltip_draft"),children:E.isActive?r.jsx(Hp,{size:18}):r.jsx(tr,{size:18})}),r.jsx(ho,{to:`/automations/${E.id}`,className:"p-2 bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100 dark:bg-indigo-900/30 dark:text-indigo-400 dark:hover:bg-indigo-900/50",title:n("btn_edit"),children:r.jsx(w_,{size:18})})]})]})]},E.id))})]})}function st(n){if(typeof n=="string"||typeof n=="number")return""+n;let s="";if(Array.isArray(n))for(let l=0,o;l<n.length;l++)(o=st(n[l]))!==""&&(s+=(s&&" ")+o);else for(let l in n)n[l]&&(s+=(s&&" ")+l);return s}var vA={value:()=>{}};function Ro(){for(var n=0,s=arguments.length,l={},o;n<s;++n){if(!(o=arguments[n]+"")||o in l||/[\s.]/.test(o))throw new Error("illegal type: "+o);l[o]=[]}return new mo(l)}function mo(n){this._=n}function _A(n,s){return n.trim().split(/^|\s+/).map(function(l){var o="",c=l.indexOf(".");if(c>=0&&(o=l.slice(c+1),l=l.slice(0,c)),l&&!s.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:o}})}mo.prototype=Ro.prototype={constructor:mo,on:function(n,s){var l=this._,o=_A(n+"",l),c,d=-1,f=o.length;if(arguments.length<2){for(;++d<f;)if((c=(n=o[d]).type)&&(c=NA(l[c],n.name)))return c;return}if(s!=null&&typeof s!="function")throw new Error("invalid callback: "+s);for(;++d<f;)if(c=(n=o[d]).type)l[c]=$0(l[c],n.name,s);else if(s==null)for(c in l)l[c]=$0(l[c],n.name,null);return this},copy:function(){var n={},s=this._;for(var l in s)n[l]=s[l].slice();return new mo(n)},call:function(n,s){if((c=arguments.length-2)>0)for(var l=new Array(c),o=0,c,d;o<c;++o)l[o]=arguments[o+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(d=this._[n],o=0,c=d.length;o<c;++o)d[o].value.apply(s,l)},apply:function(n,s,l){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var o=this._[n],c=0,d=o.length;c<d;++c)o[c].value.apply(s,l)}};function NA(n,s){for(var l=0,o=n.length,c;l<o;++l)if((c=n[l]).name===s)return c.value}function $0(n,s,l){for(var o=0,c=n.length;o<c;++o)if(n[o].name===s){n[o]=vA,n=n.slice(0,o).concat(n.slice(o+1));break}return l!=null&&n.push({name:s,value:l}),n}var Hd="http://www.w3.org/1999/xhtml";const H0={svg:"http://www.w3.org/2000/svg",xhtml:Hd,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $o(n){var s=n+="",l=s.indexOf(":");return l>=0&&(s=n.slice(0,l))!=="xmlns"&&(n=n.slice(l+1)),H0.hasOwnProperty(s)?{space:H0[s],local:n}:n}function jA(n){return function(){var s=this.ownerDocument,l=this.namespaceURI;return l===Hd&&s.documentElement.namespaceURI===Hd?s.createElement(n):s.createElementNS(l,n)}}function wA(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function sx(n){var s=$o(n);return(s.local?wA:jA)(s)}function SA(){}function tf(n){return n==null?SA:function(){return this.querySelector(n)}}function kA(n){typeof n!="function"&&(n=tf(n));for(var s=this._groups,l=s.length,o=new Array(l),c=0;c<l;++c)for(var d=s[c],f=d.length,h=o[c]=new Array(f),p,m,y=0;y<f;++y)(p=d[y])&&(m=n.call(p,p.__data__,y,d))&&("__data__"in p&&(m.__data__=p.__data__),h[y]=m);return new Bt(o,this._parents)}function CA(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function zA(){return[]}function rx(n){return n==null?zA:function(){return this.querySelectorAll(n)}}function EA(n){return function(){return CA(n.apply(this,arguments))}}function AA(n){typeof n=="function"?n=EA(n):n=rx(n);for(var s=this._groups,l=s.length,o=[],c=[],d=0;d<l;++d)for(var f=s[d],h=f.length,p,m=0;m<h;++m)(p=f[m])&&(o.push(n.call(p,p.__data__,m,f)),c.push(p));return new Bt(o,c)}function ix(n){return function(){return this.matches(n)}}function lx(n){return function(s){return s.matches(n)}}var TA=Array.prototype.find;function MA(n){return function(){return TA.call(this.children,n)}}function DA(){return this.firstElementChild}function OA(n){return this.select(n==null?DA:MA(typeof n=="function"?n:lx(n)))}var LA=Array.prototype.filter;function RA(){return Array.from(this.children)}function $A(n){return function(){return LA.call(this.children,n)}}function HA(n){return this.selectAll(n==null?RA:$A(typeof n=="function"?n:lx(n)))}function UA(n){typeof n!="function"&&(n=ix(n));for(var s=this._groups,l=s.length,o=new Array(l),c=0;c<l;++c)for(var d=s[c],f=d.length,h=o[c]=[],p,m=0;m<f;++m)(p=d[m])&&n.call(p,p.__data__,m,d)&&h.push(p);return new Bt(o,this._parents)}function ox(n){return new Array(n.length)}function BA(){return new Bt(this._enter||this._groups.map(ox),this._parents)}function jo(n,s){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=s}jo.prototype={constructor:jo,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,s){return this._parent.insertBefore(n,s)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function VA(n){return function(){return n}}function qA(n,s,l,o,c,d){for(var f=0,h,p=s.length,m=d.length;f<m;++f)(h=s[f])?(h.__data__=d[f],o[f]=h):l[f]=new jo(n,d[f]);for(;f<p;++f)(h=s[f])&&(c[f]=h)}function YA(n,s,l,o,c,d,f){var h,p,m=new Map,y=s.length,x=d.length,v=new Array(y),_;for(h=0;h<y;++h)(p=s[h])&&(v[h]=_=f.call(p,p.__data__,h,s)+"",m.has(_)?c[h]=p:m.set(_,p));for(h=0;h<x;++h)_=f.call(n,d[h],h,d)+"",(p=m.get(_))?(o[h]=p,p.__data__=d[h],m.delete(_)):l[h]=new jo(n,d[h]);for(h=0;h<y;++h)(p=s[h])&&m.get(v[h])===p&&(c[h]=p)}function GA(n){return n.__data__}function XA(n,s){if(!arguments.length)return Array.from(this,GA);var l=s?YA:qA,o=this._parents,c=this._groups;typeof n!="function"&&(n=VA(n));for(var d=c.length,f=new Array(d),h=new Array(d),p=new Array(d),m=0;m<d;++m){var y=o[m],x=c[m],v=x.length,_=ZA(n.call(y,y&&y.__data__,m,o)),w=_.length,M=h[m]=new Array(w),E=f[m]=new Array(w),A=p[m]=new Array(v);l(y,x,M,E,A,_,s);for(var z=0,N=0,k,U;z<w;++z)if(k=M[z]){for(z>=N&&(N=z+1);!(U=E[N])&&++N<w;);k._next=U||null}}return f=new Bt(f,o),f._enter=h,f._exit=p,f}function ZA(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function QA(){return new Bt(this._exit||this._groups.map(ox),this._parents)}function FA(n,s,l){var o=this.enter(),c=this,d=this.exit();return typeof n=="function"?(o=n(o),o&&(o=o.selection())):o=o.append(n+""),s!=null&&(c=s(c),c&&(c=c.selection())),l==null?d.remove():l(d),o&&c?o.merge(c).order():c}function KA(n){for(var s=n.selection?n.selection():n,l=this._groups,o=s._groups,c=l.length,d=o.length,f=Math.min(c,d),h=new Array(c),p=0;p<f;++p)for(var m=l[p],y=o[p],x=m.length,v=h[p]=new Array(x),_,w=0;w<x;++w)(_=m[w]||y[w])&&(v[w]=_);for(;p<c;++p)h[p]=l[p];return new Bt(h,this._parents)}function IA(){for(var n=this._groups,s=-1,l=n.length;++s<l;)for(var o=n[s],c=o.length-1,d=o[c],f;--c>=0;)(f=o[c])&&(d&&f.compareDocumentPosition(d)^4&&d.parentNode.insertBefore(f,d),d=f);return this}function JA(n){n||(n=WA);function s(x,v){return x&&v?n(x.__data__,v.__data__):!x-!v}for(var l=this._groups,o=l.length,c=new Array(o),d=0;d<o;++d){for(var f=l[d],h=f.length,p=c[d]=new Array(h),m,y=0;y<h;++y)(m=f[y])&&(p[y]=m);p.sort(s)}return new Bt(c,this._parents).order()}function WA(n,s){return n<s?-1:n>s?1:n>=s?0:NaN}function PA(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function eT(){return Array.from(this)}function tT(){for(var n=this._groups,s=0,l=n.length;s<l;++s)for(var o=n[s],c=0,d=o.length;c<d;++c){var f=o[c];if(f)return f}return null}function nT(){let n=0;for(const s of this)++n;return n}function aT(){return!this.node()}function sT(n){for(var s=this._groups,l=0,o=s.length;l<o;++l)for(var c=s[l],d=0,f=c.length,h;d<f;++d)(h=c[d])&&n.call(h,h.__data__,d,c);return this}function rT(n){return function(){this.removeAttribute(n)}}function iT(n){return function(){this.removeAttributeNS(n.space,n.local)}}function lT(n,s){return function(){this.setAttribute(n,s)}}function oT(n,s){return function(){this.setAttributeNS(n.space,n.local,s)}}function cT(n,s){return function(){var l=s.apply(this,arguments);l==null?this.removeAttribute(n):this.setAttribute(n,l)}}function uT(n,s){return function(){var l=s.apply(this,arguments);l==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,l)}}function dT(n,s){var l=$o(n);if(arguments.length<2){var o=this.node();return l.local?o.getAttributeNS(l.space,l.local):o.getAttribute(l)}return this.each((s==null?l.local?iT:rT:typeof s=="function"?l.local?uT:cT:l.local?oT:lT)(l,s))}function cx(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function fT(n){return function(){this.style.removeProperty(n)}}function gT(n,s,l){return function(){this.style.setProperty(n,s,l)}}function hT(n,s,l){return function(){var o=s.apply(this,arguments);o==null?this.style.removeProperty(n):this.style.setProperty(n,o,l)}}function mT(n,s,l){return arguments.length>1?this.each((s==null?fT:typeof s=="function"?hT:gT)(n,s,l??"")):sr(this.node(),n)}function sr(n,s){return n.style.getPropertyValue(s)||cx(n).getComputedStyle(n,null).getPropertyValue(s)}function pT(n){return function(){delete this[n]}}function xT(n,s){return function(){this[n]=s}}function yT(n,s){return function(){var l=s.apply(this,arguments);l==null?delete this[n]:this[n]=l}}function bT(n,s){return arguments.length>1?this.each((s==null?pT:typeof s=="function"?yT:xT)(n,s)):this.node()[n]}function ux(n){return n.trim().split(/^|\s+/)}function nf(n){return n.classList||new dx(n)}function dx(n){this._node=n,this._names=ux(n.getAttribute("class")||"")}dx.prototype={add:function(n){var s=this._names.indexOf(n);s<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var s=this._names.indexOf(n);s>=0&&(this._names.splice(s,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function fx(n,s){for(var l=nf(n),o=-1,c=s.length;++o<c;)l.add(s[o])}function gx(n,s){for(var l=nf(n),o=-1,c=s.length;++o<c;)l.remove(s[o])}function vT(n){return function(){fx(this,n)}}function _T(n){return function(){gx(this,n)}}function NT(n,s){return function(){(s.apply(this,arguments)?fx:gx)(this,n)}}function jT(n,s){var l=ux(n+"");if(arguments.length<2){for(var o=nf(this.node()),c=-1,d=l.length;++c<d;)if(!o.contains(l[c]))return!1;return!0}return this.each((typeof s=="function"?NT:s?vT:_T)(l,s))}function wT(){this.textContent=""}function ST(n){return function(){this.textContent=n}}function kT(n){return function(){var s=n.apply(this,arguments);this.textContent=s??""}}function CT(n){return arguments.length?this.each(n==null?wT:(typeof n=="function"?kT:ST)(n)):this.node().textContent}function zT(){this.innerHTML=""}function ET(n){return function(){this.innerHTML=n}}function AT(n){return function(){var s=n.apply(this,arguments);this.innerHTML=s??""}}function TT(n){return arguments.length?this.each(n==null?zT:(typeof n=="function"?AT:ET)(n)):this.node().innerHTML}function MT(){this.nextSibling&&this.parentNode.appendChild(this)}function DT(){return this.each(MT)}function OT(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function LT(){return this.each(OT)}function RT(n){var s=typeof n=="function"?n:sx(n);return this.select(function(){return this.appendChild(s.apply(this,arguments))})}function $T(){return null}function HT(n,s){var l=typeof n=="function"?n:sx(n),o=s==null?$T:typeof s=="function"?s:tf(s);return this.select(function(){return this.insertBefore(l.apply(this,arguments),o.apply(this,arguments)||null)})}function UT(){var n=this.parentNode;n&&n.removeChild(this)}function BT(){return this.each(UT)}function VT(){var n=this.cloneNode(!1),s=this.parentNode;return s?s.insertBefore(n,this.nextSibling):n}function qT(){var n=this.cloneNode(!0),s=this.parentNode;return s?s.insertBefore(n,this.nextSibling):n}function YT(n){return this.select(n?qT:VT)}function GT(n){return arguments.length?this.property("__data__",n):this.node().__data__}function XT(n){return function(s){n.call(this,s,this.__data__)}}function ZT(n){return n.trim().split(/^|\s+/).map(function(s){var l="",o=s.indexOf(".");return o>=0&&(l=s.slice(o+1),s=s.slice(0,o)),{type:s,name:l}})}function QT(n){return function(){var s=this.__on;if(s){for(var l=0,o=-1,c=s.length,d;l<c;++l)d=s[l],(!n.type||d.type===n.type)&&d.name===n.name?this.removeEventListener(d.type,d.listener,d.options):s[++o]=d;++o?s.length=o:delete this.__on}}}function FT(n,s,l){return function(){var o=this.__on,c,d=XT(s);if(o){for(var f=0,h=o.length;f<h;++f)if((c=o[f]).type===n.type&&c.name===n.name){this.removeEventListener(c.type,c.listener,c.options),this.addEventListener(c.type,c.listener=d,c.options=l),c.value=s;return}}this.addEventListener(n.type,d,l),c={type:n.type,name:n.name,value:s,listener:d,options:l},o?o.push(c):this.__on=[c]}}function KT(n,s,l){var o=ZT(n+""),c,d=o.length,f;if(arguments.length<2){var h=this.node().__on;if(h){for(var p=0,m=h.length,y;p<m;++p)for(c=0,y=h[p];c<d;++c)if((f=o[c]).type===y.type&&f.name===y.name)return y.value}return}for(h=s?FT:QT,c=0;c<d;++c)this.each(h(o[c],s,l));return this}function hx(n,s,l){var o=cx(n),c=o.CustomEvent;typeof c=="function"?c=new c(s,l):(c=o.document.createEvent("Event"),l?(c.initEvent(s,l.bubbles,l.cancelable),c.detail=l.detail):c.initEvent(s,!1,!1)),n.dispatchEvent(c)}function IT(n,s){return function(){return hx(this,n,s)}}function JT(n,s){return function(){return hx(this,n,s.apply(this,arguments))}}function WT(n,s){return this.each((typeof s=="function"?JT:IT)(n,s))}function*PT(){for(var n=this._groups,s=0,l=n.length;s<l;++s)for(var o=n[s],c=0,d=o.length,f;c<d;++c)(f=o[c])&&(yield f)}var mx=[null];function Bt(n,s){this._groups=n,this._parents=s}function Ai(){return new Bt([[document.documentElement]],mx)}function e6(){return this}Bt.prototype=Ai.prototype={constructor:Bt,select:kA,selectAll:AA,selectChild:OA,selectChildren:HA,filter:UA,data:XA,enter:BA,exit:QA,join:FA,merge:KA,selection:e6,order:IA,sort:JA,call:PA,nodes:eT,node:tT,size:nT,empty:aT,each:sT,attr:dT,style:mT,property:bT,classed:jT,text:CT,html:TT,raise:DT,lower:LT,append:RT,insert:HT,remove:BT,clone:YT,datum:GT,on:KT,dispatch:WT,[Symbol.iterator]:PT};function Ut(n){return typeof n=="string"?new Bt([[document.querySelector(n)]],[document.documentElement]):new Bt([[n]],mx)}function t6(n){let s;for(;s=n.sourceEvent;)n=s;return n}function tn(n,s){if(n=t6(n),s===void 0&&(s=n.currentTarget),s){var l=s.ownerSVGElement||s;if(l.createSVGPoint){var o=l.createSVGPoint();return o.x=n.clientX,o.y=n.clientY,o=o.matrixTransform(s.getScreenCTM().inverse()),[o.x,o.y]}if(s.getBoundingClientRect){var c=s.getBoundingClientRect();return[n.clientX-c.left-s.clientLeft,n.clientY-c.top-s.clientTop]}}return[n.pageX,n.pageY]}const n6={passive:!1},vi={capture:!0,passive:!1};function wd(n){n.stopImmediatePropagation()}function nr(n){n.preventDefault(),n.stopImmediatePropagation()}function px(n){var s=n.document.documentElement,l=Ut(n).on("dragstart.drag",nr,vi);"onselectstart"in s?l.on("selectstart.drag",nr,vi):(s.__noselect=s.style.MozUserSelect,s.style.MozUserSelect="none")}function xx(n,s){var l=n.document.documentElement,o=Ut(n).on("dragstart.drag",null);s&&(o.on("click.drag",nr,vi),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in l?o.on("selectstart.drag",null):(l.style.MozUserSelect=l.__noselect,delete l.__noselect)}const io=n=>()=>n;function Ud(n,{sourceEvent:s,subject:l,target:o,identifier:c,active:d,x:f,y:h,dx:p,dy:m,dispatch:y}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:s,enumerable:!0,configurable:!0},subject:{value:l,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:c,enumerable:!0,configurable:!0},active:{value:d,enumerable:!0,configurable:!0},x:{value:f,enumerable:!0,configurable:!0},y:{value:h,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:y}})}Ud.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function a6(n){return!n.ctrlKey&&!n.button}function s6(){return this.parentNode}function r6(n,s){return s??{x:n.x,y:n.y}}function i6(){return navigator.maxTouchPoints||"ontouchstart"in this}function yx(){var n=a6,s=s6,l=r6,o=i6,c={},d=Ro("start","drag","end"),f=0,h,p,m,y,x=0;function v(k){k.on("mousedown.drag",_).filter(o).on("touchstart.drag",E).on("touchmove.drag",A,n6).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(k,U){if(!(y||!n.call(this,k,U))){var O=N(this,s.call(this,k,U),k,U,"mouse");O&&(Ut(k.view).on("mousemove.drag",w,vi).on("mouseup.drag",M,vi),px(k.view),wd(k),m=!1,h=k.clientX,p=k.clientY,O("start",k))}}function w(k){if(nr(k),!m){var U=k.clientX-h,O=k.clientY-p;m=U*U+O*O>x}c.mouse("drag",k)}function M(k){Ut(k.view).on("mousemove.drag mouseup.drag",null),xx(k.view,m),nr(k),c.mouse("end",k)}function E(k,U){if(n.call(this,k,U)){var O=k.changedTouches,V=s.call(this,k,U),G=O.length,L,F;for(L=0;L<G;++L)(F=N(this,V,k,U,O[L].identifier,O[L]))&&(wd(k),F("start",k,O[L]))}}function A(k){var U=k.changedTouches,O=U.length,V,G;for(V=0;V<O;++V)(G=c[U[V].identifier])&&(nr(k),G("drag",k,U[V]))}function z(k){var U=k.changedTouches,O=U.length,V,G;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),V=0;V<O;++V)(G=c[U[V].identifier])&&(wd(k),G("end",k,U[V]))}function N(k,U,O,V,G,L){var F=d.copy(),Y=tn(L||O,U),Z,te,C;if((C=l.call(k,new Ud("beforestart",{sourceEvent:O,target:v,identifier:G,active:f,x:Y[0],y:Y[1],dx:0,dy:0,dispatch:F}),V))!=null)return Z=C.x-Y[0]||0,te=C.y-Y[1]||0,function R(j,D,H){var q=Y,P;switch(j){case"start":c[G]=R,P=f++;break;case"end":delete c[G],--f;case"drag":Y=tn(H||D,U),P=f;break}F.call(j,k,new Ud(j,{sourceEvent:D,subject:C,target:v,identifier:G,active:P,x:Y[0]+Z,y:Y[1]+te,dx:Y[0]-q[0],dy:Y[1]-q[1],dispatch:F}),V)}}return v.filter=function(k){return arguments.length?(n=typeof k=="function"?k:io(!!k),v):n},v.container=function(k){return arguments.length?(s=typeof k=="function"?k:io(k),v):s},v.subject=function(k){return arguments.length?(l=typeof k=="function"?k:io(k),v):l},v.touchable=function(k){return arguments.length?(o=typeof k=="function"?k:io(!!k),v):o},v.on=function(){var k=d.on.apply(d,arguments);return k===d?v:k},v.clickDistance=function(k){return arguments.length?(x=(k=+k)*k,v):Math.sqrt(x)},v}var rr=0,ui=0,oi=0,bx=1e3,wo,di,So=0,ns=0,Ho=0,_i=typeof performance=="object"&&performance.now?performance:Date,vx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function af(){return ns||(vx(l6),ns=_i.now()+Ho)}function l6(){ns=0}function ko(){this._call=this._time=this._next=null}ko.prototype=_x.prototype={constructor:ko,restart:function(n,s,l){if(typeof n!="function")throw new TypeError("callback is not a function");l=(l==null?af():+l)+(s==null?0:+s),!this._next&&di!==this&&(di?di._next=this:wo=this,di=this),this._call=n,this._time=l,Bd()},stop:function(){this._call&&(this._call=null,this._time=1/0,Bd())}};function _x(n,s,l){var o=new ko;return o.restart(n,s,l),o}function o6(){af(),++rr;for(var n=wo,s;n;)(s=ns-n._time)>=0&&n._call.call(void 0,s),n=n._next;--rr}function U0(){ns=(So=_i.now())+Ho,rr=ui=0;try{o6()}finally{rr=0,u6(),ns=0}}function c6(){var n=_i.now(),s=n-So;s>bx&&(Ho-=s,So=n)}function u6(){for(var n,s=wo,l,o=1/0;s;)s._call?(o>s._time&&(o=s._time),n=s,s=s._next):(l=s._next,s._next=null,s=n?n._next=l:wo=l);di=n,Bd(o)}function Bd(n){if(!rr){ui&&(ui=clearTimeout(ui));var s=n-ns;s>24?(n<1/0&&(ui=setTimeout(U0,n-_i.now()-Ho)),oi&&(oi=clearInterval(oi))):(oi||(So=_i.now(),oi=setInterval(c6,bx)),rr=1,vx(U0))}}function B0(n,s,l){var o=new ko;return s=s==null?0:+s,o.restart(c=>{o.stop(),n(c+s)},s,l),o}var d6=Ro("start","end","cancel","interrupt"),f6=[],Nx=0,V0=1,Vd=2,po=3,q0=4,qd=5,xo=6;function Uo(n,s,l,o,c,d){var f=n.__transition;if(!f)n.__transition={};else if(l in f)return;g6(n,l,{name:s,index:o,group:c,on:d6,tween:f6,time:d.time,delay:d.delay,duration:d.duration,ease:d.ease,timer:null,state:Nx})}function sf(n,s){var l=ln(n,s);if(l.state>Nx)throw new Error("too late; already scheduled");return l}function bn(n,s){var l=ln(n,s);if(l.state>po)throw new Error("too late; already running");return l}function ln(n,s){var l=n.__transition;if(!l||!(l=l[s]))throw new Error("transition not found");return l}function g6(n,s,l){var o=n.__transition,c;o[s]=l,l.timer=_x(d,0,l.time);function d(m){l.state=V0,l.timer.restart(f,l.delay,l.time),l.delay<=m&&f(m-l.delay)}function f(m){var y,x,v,_;if(l.state!==V0)return p();for(y in o)if(_=o[y],_.name===l.name){if(_.state===po)return B0(f);_.state===q0?(_.state=xo,_.timer.stop(),_.on.call("interrupt",n,n.__data__,_.index,_.group),delete o[y]):+y<s&&(_.state=xo,_.timer.stop(),_.on.call("cancel",n,n.__data__,_.index,_.group),delete o[y])}if(B0(function(){l.state===po&&(l.state=q0,l.timer.restart(h,l.delay,l.time),h(m))}),l.state=Vd,l.on.call("start",n,n.__data__,l.index,l.group),l.state===Vd){for(l.state=po,c=new Array(v=l.tween.length),y=0,x=-1;y<v;++y)(_=l.tween[y].value.call(n,n.__data__,l.index,l.group))&&(c[++x]=_);c.length=x+1}}function h(m){for(var y=m<l.duration?l.ease.call(null,m/l.duration):(l.timer.restart(p),l.state=qd,1),x=-1,v=c.length;++x<v;)c[x].call(n,y);l.state===qd&&(l.on.call("end",n,n.__data__,l.index,l.group),p())}function p(){l.state=xo,l.timer.stop(),delete o[s];for(var m in o)return;delete n.__transition}}function yo(n,s){var l=n.__transition,o,c,d=!0,f;if(l){s=s==null?null:s+"";for(f in l){if((o=l[f]).name!==s){d=!1;continue}c=o.state>Vd&&o.state<qd,o.state=xo,o.timer.stop(),o.on.call(c?"interrupt":"cancel",n,n.__data__,o.index,o.group),delete l[f]}d&&delete n.__transition}}function h6(n){return this.each(function(){yo(this,n)})}function m6(n,s){var l,o;return function(){var c=bn(this,n),d=c.tween;if(d!==l){o=l=d;for(var f=0,h=o.length;f<h;++f)if(o[f].name===s){o=o.slice(),o.splice(f,1);break}}c.tween=o}}function p6(n,s,l){var o,c;if(typeof l!="function")throw new Error;return function(){var d=bn(this,n),f=d.tween;if(f!==o){c=(o=f).slice();for(var h={name:s,value:l},p=0,m=c.length;p<m;++p)if(c[p].name===s){c[p]=h;break}p===m&&c.push(h)}d.tween=c}}function x6(n,s){var l=this._id;if(n+="",arguments.length<2){for(var o=ln(this.node(),l).tween,c=0,d=o.length,f;c<d;++c)if((f=o[c]).name===n)return f.value;return null}return this.each((s==null?m6:p6)(l,n,s))}function rf(n,s,l){var o=n._id;return n.each(function(){var c=bn(this,o);(c.value||(c.value={}))[s]=l.apply(this,arguments)}),function(c){return ln(c,o).value[s]}}function jx(n,s){var l;return(typeof s=="number"?Iv:s instanceof i0?r0:(l=i0(s))?(s=l,r0):Jv)(n,s)}function y6(n){return function(){this.removeAttribute(n)}}function b6(n){return function(){this.removeAttributeNS(n.space,n.local)}}function v6(n,s,l){var o,c=l+"",d;return function(){var f=this.getAttribute(n);return f===c?null:f===o?d:d=s(o=f,l)}}function _6(n,s,l){var o,c=l+"",d;return function(){var f=this.getAttributeNS(n.space,n.local);return f===c?null:f===o?d:d=s(o=f,l)}}function N6(n,s,l){var o,c,d;return function(){var f,h=l(this),p;return h==null?void this.removeAttribute(n):(f=this.getAttribute(n),p=h+"",f===p?null:f===o&&p===c?d:(c=p,d=s(o=f,h)))}}function j6(n,s,l){var o,c,d;return function(){var f,h=l(this),p;return h==null?void this.removeAttributeNS(n.space,n.local):(f=this.getAttributeNS(n.space,n.local),p=h+"",f===p?null:f===o&&p===c?d:(c=p,d=s(o=f,h)))}}function w6(n,s){var l=$o(n),o=l==="transform"?Wv:jx;return this.attrTween(n,typeof s=="function"?(l.local?j6:N6)(l,o,rf(this,"attr."+n,s)):s==null?(l.local?b6:y6)(l):(l.local?_6:v6)(l,o,s))}function S6(n,s){return function(l){this.setAttribute(n,s.call(this,l))}}function k6(n,s){return function(l){this.setAttributeNS(n.space,n.local,s.call(this,l))}}function C6(n,s){var l,o;function c(){var d=s.apply(this,arguments);return d!==o&&(l=(o=d)&&k6(n,d)),l}return c._value=s,c}function z6(n,s){var l,o;function c(){var d=s.apply(this,arguments);return d!==o&&(l=(o=d)&&S6(n,d)),l}return c._value=s,c}function E6(n,s){var l="attr."+n;if(arguments.length<2)return(l=this.tween(l))&&l._value;if(s==null)return this.tween(l,null);if(typeof s!="function")throw new Error;var o=$o(n);return this.tween(l,(o.local?C6:z6)(o,s))}function A6(n,s){return function(){sf(this,n).delay=+s.apply(this,arguments)}}function T6(n,s){return s=+s,function(){sf(this,n).delay=s}}function M6(n){var s=this._id;return arguments.length?this.each((typeof n=="function"?A6:T6)(s,n)):ln(this.node(),s).delay}function D6(n,s){return function(){bn(this,n).duration=+s.apply(this,arguments)}}function O6(n,s){return s=+s,function(){bn(this,n).duration=s}}function L6(n){var s=this._id;return arguments.length?this.each((typeof n=="function"?D6:O6)(s,n)):ln(this.node(),s).duration}function R6(n,s){if(typeof s!="function")throw new Error;return function(){bn(this,n).ease=s}}function $6(n){var s=this._id;return arguments.length?this.each(R6(s,n)):ln(this.node(),s).ease}function H6(n,s){return function(){var l=s.apply(this,arguments);if(typeof l!="function")throw new Error;bn(this,n).ease=l}}function U6(n){if(typeof n!="function")throw new Error;return this.each(H6(this._id,n))}function B6(n){typeof n!="function"&&(n=ix(n));for(var s=this._groups,l=s.length,o=new Array(l),c=0;c<l;++c)for(var d=s[c],f=d.length,h=o[c]=[],p,m=0;m<f;++m)(p=d[m])&&n.call(p,p.__data__,m,d)&&h.push(p);return new Xn(o,this._parents,this._name,this._id)}function V6(n){if(n._id!==this._id)throw new Error;for(var s=this._groups,l=n._groups,o=s.length,c=l.length,d=Math.min(o,c),f=new Array(o),h=0;h<d;++h)for(var p=s[h],m=l[h],y=p.length,x=f[h]=new Array(y),v,_=0;_<y;++_)(v=p[_]||m[_])&&(x[_]=v);for(;h<o;++h)f[h]=s[h];return new Xn(f,this._parents,this._name,this._id)}function q6(n){return(n+"").trim().split(/^|\s+/).every(function(s){var l=s.indexOf(".");return l>=0&&(s=s.slice(0,l)),!s||s==="start"})}function Y6(n,s,l){var o,c,d=q6(s)?sf:bn;return function(){var f=d(this,n),h=f.on;h!==o&&(c=(o=h).copy()).on(s,l),f.on=c}}function G6(n,s){var l=this._id;return arguments.length<2?ln(this.node(),l).on.on(n):this.each(Y6(l,n,s))}function X6(n){return function(){var s=this.parentNode;for(var l in this.__transition)if(+l!==n)return;s&&s.removeChild(this)}}function Z6(){return this.on("end.remove",X6(this._id))}function Q6(n){var s=this._name,l=this._id;typeof n!="function"&&(n=tf(n));for(var o=this._groups,c=o.length,d=new Array(c),f=0;f<c;++f)for(var h=o[f],p=h.length,m=d[f]=new Array(p),y,x,v=0;v<p;++v)(y=h[v])&&(x=n.call(y,y.__data__,v,h))&&("__data__"in y&&(x.__data__=y.__data__),m[v]=x,Uo(m[v],s,l,v,m,ln(y,l)));return new Xn(d,this._parents,s,l)}function F6(n){var s=this._name,l=this._id;typeof n!="function"&&(n=rx(n));for(var o=this._groups,c=o.length,d=[],f=[],h=0;h<c;++h)for(var p=o[h],m=p.length,y,x=0;x<m;++x)if(y=p[x]){for(var v=n.call(y,y.__data__,x,p),_,w=ln(y,l),M=0,E=v.length;M<E;++M)(_=v[M])&&Uo(_,s,l,M,v,w);d.push(v),f.push(y)}return new Xn(d,f,s,l)}var K6=Ai.prototype.constructor;function I6(){return new K6(this._groups,this._parents)}function J6(n,s){var l,o,c;return function(){var d=sr(this,n),f=(this.style.removeProperty(n),sr(this,n));return d===f?null:d===l&&f===o?c:c=s(l=d,o=f)}}function wx(n){return function(){this.style.removeProperty(n)}}function W6(n,s,l){var o,c=l+"",d;return function(){var f=sr(this,n);return f===c?null:f===o?d:d=s(o=f,l)}}function P6(n,s,l){var o,c,d;return function(){var f=sr(this,n),h=l(this),p=h+"";return h==null&&(p=h=(this.style.removeProperty(n),sr(this,n))),f===p?null:f===o&&p===c?d:(c=p,d=s(o=f,h))}}function e8(n,s){var l,o,c,d="style."+s,f="end."+d,h;return function(){var p=bn(this,n),m=p.on,y=p.value[d]==null?h||(h=wx(s)):void 0;(m!==l||c!==y)&&(o=(l=m).copy()).on(f,c=y),p.on=o}}function t8(n,s,l){var o=(n+="")=="transform"?Pv:jx;return s==null?this.styleTween(n,J6(n,o)).on("end.style."+n,wx(n)):typeof s=="function"?this.styleTween(n,P6(n,o,rf(this,"style."+n,s))).each(e8(this._id,n)):this.styleTween(n,W6(n,o,s),l).on("end.style."+n,null)}function n8(n,s,l){return function(o){this.style.setProperty(n,s.call(this,o),l)}}function a8(n,s,l){var o,c;function d(){var f=s.apply(this,arguments);return f!==c&&(o=(c=f)&&n8(n,f,l)),o}return d._value=s,d}function s8(n,s,l){var o="style."+(n+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(s==null)return this.tween(o,null);if(typeof s!="function")throw new Error;return this.tween(o,a8(n,s,l??""))}function r8(n){return function(){this.textContent=n}}function i8(n){return function(){var s=n(this);this.textContent=s??""}}function l8(n){return this.tween("text",typeof n=="function"?i8(rf(this,"text",n)):r8(n==null?"":n+""))}function o8(n){return function(s){this.textContent=n.call(this,s)}}function c8(n){var s,l;function o(){var c=n.apply(this,arguments);return c!==l&&(s=(l=c)&&o8(c)),s}return o._value=n,o}function u8(n){var s="text";if(arguments.length<1)return(s=this.tween(s))&&s._value;if(n==null)return this.tween(s,null);if(typeof n!="function")throw new Error;return this.tween(s,c8(n))}function d8(){for(var n=this._name,s=this._id,l=Sx(),o=this._groups,c=o.length,d=0;d<c;++d)for(var f=o[d],h=f.length,p,m=0;m<h;++m)if(p=f[m]){var y=ln(p,s);Uo(p,n,l,m,f,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new Xn(o,this._parents,n,l)}function f8(){var n,s,l=this,o=l._id,c=l.size();return new Promise(function(d,f){var h={value:f},p={value:function(){--c===0&&d()}};l.each(function(){var m=bn(this,o),y=m.on;y!==n&&(s=(n=y).copy(),s._.cancel.push(h),s._.interrupt.push(h),s._.end.push(p)),m.on=s}),c===0&&d()})}var g8=0;function Xn(n,s,l,o){this._groups=n,this._parents=s,this._name=l,this._id=o}function Sx(){return++g8}var Yn=Ai.prototype;Xn.prototype={constructor:Xn,select:Q6,selectAll:F6,selectChild:Yn.selectChild,selectChildren:Yn.selectChildren,filter:B6,merge:V6,selection:I6,transition:d8,call:Yn.call,nodes:Yn.nodes,node:Yn.node,size:Yn.size,empty:Yn.empty,each:Yn.each,on:G6,attr:w6,attrTween:E6,style:t8,styleTween:s8,text:l8,textTween:u8,remove:Z6,tween:x6,delay:M6,duration:L6,ease:$6,easeVarying:U6,end:f8,[Symbol.iterator]:Yn[Symbol.iterator]};function h8(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var m8={time:null,delay:0,duration:250,ease:h8};function p8(n,s){for(var l;!(l=n.__transition)||!(l=l[s]);)if(!(n=n.parentNode))throw new Error(`transition ${s} not found`);return l}function x8(n){var s,l;n instanceof Xn?(s=n._id,n=n._name):(s=Sx(),(l=m8).time=af(),n=n==null?null:n+"");for(var o=this._groups,c=o.length,d=0;d<c;++d)for(var f=o[d],h=f.length,p,m=0;m<h;++m)(p=f[m])&&Uo(p,n,s,m,f,l||p8(p,s));return new Xn(o,this._parents,n,s)}Ai.prototype.interrupt=h6;Ai.prototype.transition=x8;const lo=n=>()=>n;function y8(n,{sourceEvent:s,target:l,transform:o,dispatch:c}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:s,enumerable:!0,configurable:!0},target:{value:l,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:c}})}function Gn(n,s,l){this.k=n,this.x=s,this.y=l}Gn.prototype={constructor:Gn,scale:function(n){return n===1?this:new Gn(this.k*n,this.x,this.y)},translate:function(n,s){return n===0&s===0?this:new Gn(this.k,this.x+this.k*n,this.y+this.k*s)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Bo=new Gn(1,0,0);kx.prototype=Gn.prototype;function kx(n){for(;!n.__zoom;)if(!(n=n.parentNode))return Bo;return n.__zoom}function Sd(n){n.stopImmediatePropagation()}function ci(n){n.preventDefault(),n.stopImmediatePropagation()}function b8(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function v8(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function Y0(){return this.__zoom||Bo}function _8(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function N8(){return navigator.maxTouchPoints||"ontouchstart"in this}function j8(n,s,l){var o=n.invertX(s[0][0])-l[0][0],c=n.invertX(s[1][0])-l[1][0],d=n.invertY(s[0][1])-l[0][1],f=n.invertY(s[1][1])-l[1][1];return n.translate(c>o?(o+c)/2:Math.min(0,o)||Math.max(0,c),f>d?(d+f)/2:Math.min(0,d)||Math.max(0,f))}function Cx(){var n=b8,s=v8,l=j8,o=_8,c=N8,d=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],h=250,p=go,m=Ro("start","zoom","end"),y,x,v,_=500,w=150,M=0,E=10;function A(C){C.property("__zoom",Y0).on("wheel.zoom",G,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",F).filter(c).on("touchstart.zoom",Y).on("touchmove.zoom",Z).on("touchend.zoom touchcancel.zoom",te).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}A.transform=function(C,R,j,D){var H=C.selection?C.selection():C;H.property("__zoom",Y0),C!==H?U(C,R,j,D):H.interrupt().each(function(){O(this,arguments).event(D).start().zoom(null,typeof R=="function"?R.apply(this,arguments):R).end()})},A.scaleBy=function(C,R,j,D){A.scaleTo(C,function(){var H=this.__zoom.k,q=typeof R=="function"?R.apply(this,arguments):R;return H*q},j,D)},A.scaleTo=function(C,R,j,D){A.transform(C,function(){var H=s.apply(this,arguments),q=this.__zoom,P=j==null?k(H):typeof j=="function"?j.apply(this,arguments):j,X=q.invert(P),W=typeof R=="function"?R.apply(this,arguments):R;return l(N(z(q,W),P,X),H,f)},j,D)},A.translateBy=function(C,R,j,D){A.transform(C,function(){return l(this.__zoom.translate(typeof R=="function"?R.apply(this,arguments):R,typeof j=="function"?j.apply(this,arguments):j),s.apply(this,arguments),f)},null,D)},A.translateTo=function(C,R,j,D,H){A.transform(C,function(){var q=s.apply(this,arguments),P=this.__zoom,X=D==null?k(q):typeof D=="function"?D.apply(this,arguments):D;return l(Bo.translate(X[0],X[1]).scale(P.k).translate(typeof R=="function"?-R.apply(this,arguments):-R,typeof j=="function"?-j.apply(this,arguments):-j),q,f)},D,H)};function z(C,R){return R=Math.max(d[0],Math.min(d[1],R)),R===C.k?C:new Gn(R,C.x,C.y)}function N(C,R,j){var D=R[0]-j[0]*C.k,H=R[1]-j[1]*C.k;return D===C.x&&H===C.y?C:new Gn(C.k,D,H)}function k(C){return[(+C[0][0]+ +C[1][0])/2,(+C[0][1]+ +C[1][1])/2]}function U(C,R,j,D){C.on("start.zoom",function(){O(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){O(this,arguments).event(D).end()}).tween("zoom",function(){var H=this,q=arguments,P=O(H,q).event(D),X=s.apply(H,q),W=j==null?k(X):typeof j=="function"?j.apply(H,q):j,se=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),le=H.__zoom,de=typeof R=="function"?R.apply(H,q):R,be=p(le.invert(W).concat(se/le.k),de.invert(W).concat(se/de.k));return function(me){if(me===1)me=de;else{var oe=be(me),fe=se/oe[2];me=new Gn(fe,W[0]-oe[0]*fe,W[1]-oe[1]*fe)}P.zoom(null,me)}})}function O(C,R,j){return!j&&C.__zooming||new V(C,R)}function V(C,R){this.that=C,this.args=R,this.active=0,this.sourceEvent=null,this.extent=s.apply(C,R),this.taps=0}V.prototype={event:function(C){return C&&(this.sourceEvent=C),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(C,R){return this.mouse&&C!=="mouse"&&(this.mouse[1]=R.invert(this.mouse[0])),this.touch0&&C!=="touch"&&(this.touch0[1]=R.invert(this.touch0[0])),this.touch1&&C!=="touch"&&(this.touch1[1]=R.invert(this.touch1[0])),this.that.__zoom=R,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(C){var R=Ut(this.that).datum();m.call(C,this.that,new y8(C,{sourceEvent:this.sourceEvent,target:A,transform:this.that.__zoom,dispatch:m}),R)}};function G(C,...R){if(!n.apply(this,arguments))return;var j=O(this,R).event(C),D=this.__zoom,H=Math.max(d[0],Math.min(d[1],D.k*Math.pow(2,o.apply(this,arguments)))),q=tn(C);if(j.wheel)(j.mouse[0][0]!==q[0]||j.mouse[0][1]!==q[1])&&(j.mouse[1]=D.invert(j.mouse[0]=q)),clearTimeout(j.wheel);else{if(D.k===H)return;j.mouse=[q,D.invert(q)],yo(this),j.start()}ci(C),j.wheel=setTimeout(P,w),j.zoom("mouse",l(N(z(D,H),j.mouse[0],j.mouse[1]),j.extent,f));function P(){j.wheel=null,j.end()}}function L(C,...R){if(v||!n.apply(this,arguments))return;var j=C.currentTarget,D=O(this,R,!0).event(C),H=Ut(C.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",se,!0),q=tn(C,j),P=C.clientX,X=C.clientY;px(C.view),Sd(C),D.mouse=[q,this.__zoom.invert(q)],yo(this),D.start();function W(le){if(ci(le),!D.moved){var de=le.clientX-P,be=le.clientY-X;D.moved=de*de+be*be>M}D.event(le).zoom("mouse",l(N(D.that.__zoom,D.mouse[0]=tn(le,j),D.mouse[1]),D.extent,f))}function se(le){H.on("mousemove.zoom mouseup.zoom",null),xx(le.view,D.moved),ci(le),D.event(le).end()}}function F(C,...R){if(n.apply(this,arguments)){var j=this.__zoom,D=tn(C.changedTouches?C.changedTouches[0]:C,this),H=j.invert(D),q=j.k*(C.shiftKey?.5:2),P=l(N(z(j,q),D,H),s.apply(this,R),f);ci(C),h>0?Ut(this).transition().duration(h).call(U,P,D,C):Ut(this).call(A.transform,P,D,C)}}function Y(C,...R){if(n.apply(this,arguments)){var j=C.touches,D=j.length,H=O(this,R,C.changedTouches.length===D).event(C),q,P,X,W;for(Sd(C),P=0;P<D;++P)X=j[P],W=tn(X,this),W=[W,this.__zoom.invert(W),X.identifier],H.touch0?!H.touch1&&H.touch0[2]!==W[2]&&(H.touch1=W,H.taps=0):(H.touch0=W,q=!0,H.taps=1+!!y);y&&(y=clearTimeout(y)),q&&(H.taps<2&&(x=W[0],y=setTimeout(function(){y=null},_)),yo(this),H.start())}}function Z(C,...R){if(this.__zooming){var j=O(this,R).event(C),D=C.changedTouches,H=D.length,q,P,X,W;for(ci(C),q=0;q<H;++q)P=D[q],X=tn(P,this),j.touch0&&j.touch0[2]===P.identifier?j.touch0[0]=X:j.touch1&&j.touch1[2]===P.identifier&&(j.touch1[0]=X);if(P=j.that.__zoom,j.touch1){var se=j.touch0[0],le=j.touch0[1],de=j.touch1[0],be=j.touch1[1],me=(me=de[0]-se[0])*me+(me=de[1]-se[1])*me,oe=(oe=be[0]-le[0])*oe+(oe=be[1]-le[1])*oe;P=z(P,Math.sqrt(me/oe)),X=[(se[0]+de[0])/2,(se[1]+de[1])/2],W=[(le[0]+be[0])/2,(le[1]+be[1])/2]}else if(j.touch0)X=j.touch0[0],W=j.touch0[1];else return;j.zoom("touch",l(N(P,X,W),j.extent,f))}}function te(C,...R){if(this.__zooming){var j=O(this,R).event(C),D=C.changedTouches,H=D.length,q,P;for(Sd(C),v&&clearTimeout(v),v=setTimeout(function(){v=null},_),q=0;q<H;++q)P=D[q],j.touch0&&j.touch0[2]===P.identifier?delete j.touch0:j.touch1&&j.touch1[2]===P.identifier&&delete j.touch1;if(j.touch1&&!j.touch0&&(j.touch0=j.touch1,delete j.touch1),j.touch0)j.touch0[1]=this.__zoom.invert(j.touch0[0]);else if(j.end(),j.taps===2&&(P=tn(P,this),Math.hypot(x[0]-P[0],x[1]-P[1])<E)){var X=Ut(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return A.wheelDelta=function(C){return arguments.length?(o=typeof C=="function"?C:lo(+C),A):o},A.filter=function(C){return arguments.length?(n=typeof C=="function"?C:lo(!!C),A):n},A.touchable=function(C){return arguments.length?(c=typeof C=="function"?C:lo(!!C),A):c},A.extent=function(C){return arguments.length?(s=typeof C=="function"?C:lo([[+C[0][0],+C[0][1]],[+C[1][0],+C[1][1]]]),A):s},A.scaleExtent=function(C){return arguments.length?(d[0]=+C[0],d[1]=+C[1],A):[d[0],d[1]]},A.translateExtent=function(C){return arguments.length?(f[0][0]=+C[0][0],f[1][0]=+C[1][0],f[0][1]=+C[0][1],f[1][1]=+C[1][1],A):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},A.constrain=function(C){return arguments.length?(l=C,A):l},A.duration=function(C){return arguments.length?(h=+C,A):h},A.interpolate=function(C){return arguments.length?(p=C,A):p},A.on=function(){var C=m.on.apply(m,arguments);return C===m?A:C},A.clickDistance=function(C){return arguments.length?(M=(C=+C)*C,A):Math.sqrt(M)},A.tapDistance=function(C){return arguments.length?(E=+C,A):E},A}const yn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:n=>`Node type "${n}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:n=>`The old edge with id=${n} does not exist.`,error009:n=>`Marker type "${n}" doesn't exist.`,error008:(n,{id:s,sourceHandle:l,targetHandle:o})=>`Couldn't create edge for ${n} handle id: "${n==="source"?l:o}", edge id: ${s}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:n=>`Edge type "${n}" not found. Using fallback type "default".`,error012:n=>`Node with id "${n}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(n="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${n}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Ni=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],zx=["Enter"," ","Escape"],Ex={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:n,x:s,y:l})=>`Moved selected node ${n}. New position, x: ${s}, y: ${l}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var ir;(function(n){n.Strict="strict",n.Loose="loose"})(ir||(ir={}));var es;(function(n){n.Free="free",n.Vertical="vertical",n.Horizontal="horizontal"})(es||(es={}));var ji;(function(n){n.Partial="partial",n.Full="full"})(ji||(ji={}));const Ax={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var wa;(function(n){n.Bezier="default",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n.SimpleBezier="simplebezier"})(wa||(wa={}));var Co;(function(n){n.Arrow="arrow",n.ArrowClosed="arrowclosed"})(Co||(Co={}));var pe;(function(n){n.Left="left",n.Top="top",n.Right="right",n.Bottom="bottom"})(pe||(pe={}));const G0={[pe.Left]:pe.Right,[pe.Right]:pe.Left,[pe.Top]:pe.Bottom,[pe.Bottom]:pe.Top};function Tx(n){return n===null?null:n?"valid":"invalid"}const Mx=n=>"id"in n&&"source"in n&&"target"in n,w8=n=>"id"in n&&"position"in n&&!("source"in n)&&!("target"in n),lf=n=>"id"in n&&"internals"in n&&!("source"in n)&&!("target"in n),Ti=(n,s=[0,0])=>{const{width:l,height:o}=Zn(n),c=n.origin??s,d=l*c[0],f=o*c[1];return{x:n.position.x-d,y:n.position.y-f}},S8=(n,s={nodeOrigin:[0,0]})=>{if(n.length===0)return{x:0,y:0,width:0,height:0};const l=n.reduce((o,c)=>{const d=typeof c=="string";let f=!s.nodeLookup&&!d?c:void 0;s.nodeLookup&&(f=d?s.nodeLookup.get(c):lf(c)?c:s.nodeLookup.get(c.id));const h=f?zo(f,s.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Vo(o,h)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return qo(l)},Mi=(n,s={})=>{let l={x:1/0,y:1/0,x2:-1/0,y2:-1/0},o=!1;return n.forEach(c=>{(s.filter===void 0||s.filter(c))&&(l=Vo(l,zo(c)),o=!0)}),o?qo(l):{x:0,y:0,width:0,height:0}},of=(n,s,[l,o,c]=[0,0,1],d=!1,f=!1)=>{const h={...Oi(s,[l,o,c]),width:s.width/c,height:s.height/c},p=[];for(const m of n.values()){const{measured:y,selectable:x=!0,hidden:v=!1}=m;if(f&&!x||v)continue;const _=y.width??m.width??m.initialWidth??null,w=y.height??m.height??m.initialHeight??null,M=wi(h,or(m)),E=(_??0)*(w??0),A=d&&M>0;(!m.internals.handleBounds||A||M>=E||m.dragging)&&p.push(m)}return p},k8=(n,s)=>{const l=new Set;return n.forEach(o=>{l.add(o.id)}),s.filter(o=>l.has(o.source)||l.has(o.target))};function C8(n,s){const l=new Map,o=s?.nodes?new Set(s.nodes.map(c=>c.id)):null;return n.forEach(c=>{c.measured.width&&c.measured.height&&(s?.includeHiddenNodes||!c.hidden)&&(!o||o.has(c.id))&&l.set(c.id,c)}),l}async function z8({nodes:n,width:s,height:l,panZoom:o,minZoom:c,maxZoom:d},f){if(n.size===0)return Promise.resolve(!0);const h=C8(n,f),p=Mi(h),m=cf(p,s,l,f?.minZoom??c,f?.maxZoom??d,f?.padding??.1);return await o.setViewport(m,{duration:f?.duration,ease:f?.ease,interpolate:f?.interpolate}),Promise.resolve(!0)}function Dx({nodeId:n,nextPosition:s,nodeLookup:l,nodeOrigin:o=[0,0],nodeExtent:c,onError:d}){const f=l.get(n),h=f.parentId?l.get(f.parentId):void 0,{x:p,y:m}=h?h.internals.positionAbsolute:{x:0,y:0},y=f.origin??o;let x=f.extent||c;if(f.extent==="parent"&&!f.expandParent)if(!h)d?.("005",yn.error005());else{const _=h.measured.width,w=h.measured.height;_&&w&&(x=[[p,m],[p+_,m+w]])}else h&&cr(f.extent)&&(x=[[f.extent[0][0]+p,f.extent[0][1]+m],[f.extent[1][0]+p,f.extent[1][1]+m]]);const v=cr(x)?as(s,x,f.measured):s;return(f.measured.width===void 0||f.measured.height===void 0)&&d?.("015",yn.error015()),{position:{x:v.x-p+(f.measured.width??0)*y[0],y:v.y-m+(f.measured.height??0)*y[1]},positionAbsolute:v}}async function E8({nodesToRemove:n=[],edgesToRemove:s=[],nodes:l,edges:o,onBeforeDelete:c}){const d=new Set(n.map(v=>v.id)),f=[];for(const v of l){if(v.deletable===!1)continue;const _=d.has(v.id),w=!_&&v.parentId&&f.find(M=>M.id===v.parentId);(_||w)&&f.push(v)}const h=new Set(s.map(v=>v.id)),p=o.filter(v=>v.deletable!==!1),y=k8(f,p);for(const v of p)h.has(v.id)&&!y.find(w=>w.id===v.id)&&y.push(v);if(!c)return{edges:y,nodes:f};const x=await c({nodes:f,edges:y});return typeof x=="boolean"?x?{edges:y,nodes:f}:{edges:[],nodes:[]}:x}const lr=(n,s=0,l=1)=>Math.min(Math.max(n,s),l),as=(n={x:0,y:0},s,l)=>({x:lr(n.x,s[0][0],s[1][0]-(l?.width??0)),y:lr(n.y,s[0][1],s[1][1]-(l?.height??0))});function Ox(n,s,l){const{width:o,height:c}=Zn(l),{x:d,y:f}=l.internals.positionAbsolute;return as(n,[[d,f],[d+o,f+c]],s)}const X0=(n,s,l)=>n<s?lr(Math.abs(n-s),1,s)/s:n>l?-lr(Math.abs(n-l),1,s)/s:0,Lx=(n,s,l=15,o=40)=>{const c=X0(n.x,o,s.width-o)*l,d=X0(n.y,o,s.height-o)*l;return[c,d]},Vo=(n,s)=>({x:Math.min(n.x,s.x),y:Math.min(n.y,s.y),x2:Math.max(n.x2,s.x2),y2:Math.max(n.y2,s.y2)}),Yd=({x:n,y:s,width:l,height:o})=>({x:n,y:s,x2:n+l,y2:s+o}),qo=({x:n,y:s,x2:l,y2:o})=>({x:n,y:s,width:l-n,height:o-s}),or=(n,s=[0,0])=>{const{x:l,y:o}=lf(n)?n.internals.positionAbsolute:Ti(n,s);return{x:l,y:o,width:n.measured?.width??n.width??n.initialWidth??0,height:n.measured?.height??n.height??n.initialHeight??0}},zo=(n,s=[0,0])=>{const{x:l,y:o}=lf(n)?n.internals.positionAbsolute:Ti(n,s);return{x:l,y:o,x2:l+(n.measured?.width??n.width??n.initialWidth??0),y2:o+(n.measured?.height??n.height??n.initialHeight??0)}},Rx=(n,s)=>qo(Vo(Yd(n),Yd(s))),wi=(n,s)=>{const l=Math.max(0,Math.min(n.x+n.width,s.x+s.width)-Math.max(n.x,s.x)),o=Math.max(0,Math.min(n.y+n.height,s.y+s.height)-Math.max(n.y,s.y));return Math.ceil(l*o)},Z0=n=>nn(n.width)&&nn(n.height)&&nn(n.x)&&nn(n.y),nn=n=>!isNaN(n)&&isFinite(n),A8=(n,s)=>{},Di=(n,s=[1,1])=>({x:s[0]*Math.round(n.x/s[0]),y:s[1]*Math.round(n.y/s[1])}),Oi=({x:n,y:s},[l,o,c],d=!1,f=[1,1])=>{const h={x:(n-l)/c,y:(s-o)/c};return d?Di(h,f):h},Eo=({x:n,y:s},[l,o,c])=>({x:n*c+l,y:s*c+o});function Js(n,s){if(typeof n=="number")return Math.floor((s-s/(1+n))*.5);if(typeof n=="string"&&n.endsWith("px")){const l=parseFloat(n);if(!Number.isNaN(l))return Math.floor(l)}if(typeof n=="string"&&n.endsWith("%")){const l=parseFloat(n);if(!Number.isNaN(l))return Math.floor(s*l*.01)}return console.error(`[React Flow] The padding value "${n}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function T8(n,s,l){if(typeof n=="string"||typeof n=="number"){const o=Js(n,l),c=Js(n,s);return{top:o,right:c,bottom:o,left:c,x:c*2,y:o*2}}if(typeof n=="object"){const o=Js(n.top??n.y??0,l),c=Js(n.bottom??n.y??0,l),d=Js(n.left??n.x??0,s),f=Js(n.right??n.x??0,s);return{top:o,right:f,bottom:c,left:d,x:d+f,y:o+c}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function M8(n,s,l,o,c,d){const{x:f,y:h}=Eo(n,[s,l,o]),{x:p,y:m}=Eo({x:n.x+n.width,y:n.y+n.height},[s,l,o]),y=c-p,x=d-m;return{left:Math.floor(f),top:Math.floor(h),right:Math.floor(y),bottom:Math.floor(x)}}const cf=(n,s,l,o,c,d)=>{const f=T8(d,s,l),h=(s-f.x)/n.width,p=(l-f.y)/n.height,m=Math.min(h,p),y=lr(m,o,c),x=n.x+n.width/2,v=n.y+n.height/2,_=s/2-x*y,w=l/2-v*y,M=M8(n,_,w,y,s,l),E={left:Math.min(M.left-f.left,0),top:Math.min(M.top-f.top,0),right:Math.min(M.right-f.right,0),bottom:Math.min(M.bottom-f.bottom,0)};return{x:_-E.left+E.right,y:w-E.top+E.bottom,zoom:y}},Si=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function cr(n){return n!=null&&n!=="parent"}function Zn(n){return{width:n.measured?.width??n.width??n.initialWidth??0,height:n.measured?.height??n.height??n.initialHeight??0}}function $x(n){return(n.measured?.width??n.width??n.initialWidth)!==void 0&&(n.measured?.height??n.height??n.initialHeight)!==void 0}function Hx(n,s={width:0,height:0},l,o,c){const d={...n},f=o.get(l);if(f){const h=f.origin||c;d.x+=f.internals.positionAbsolute.x-(s.width??0)*h[0],d.y+=f.internals.positionAbsolute.y-(s.height??0)*h[1]}return d}function Q0(n,s){if(n.size!==s.size)return!1;for(const l of n)if(!s.has(l))return!1;return!0}function D8(){let n,s;return{promise:new Promise((o,c)=>{n=o,s=c}),resolve:n,reject:s}}function O8(n){return{...Ex,...n||{}}}function mi(n,{snapGrid:s=[0,0],snapToGrid:l=!1,transform:o,containerBounds:c}){const{x:d,y:f}=an(n),h=Oi({x:d-(c?.left??0),y:f-(c?.top??0)},o),{x:p,y:m}=l?Di(h,s):h;return{xSnapped:p,ySnapped:m,...h}}const uf=n=>({width:n.offsetWidth,height:n.offsetHeight}),Ux=n=>n?.getRootNode?.()||window?.document,L8=["INPUT","SELECT","TEXTAREA"];function Bx(n){const s=n.composedPath?.()?.[0]||n.target;return s?.nodeType!==1?!1:L8.includes(s.nodeName)||s.hasAttribute("contenteditable")||!!s.closest(".nokey")}const Vx=n=>"clientX"in n,an=(n,s)=>{const l=Vx(n),o=l?n.clientX:n.touches?.[0].clientX,c=l?n.clientY:n.touches?.[0].clientY;return{x:o-(s?.left??0),y:c-(s?.top??0)}},F0=(n,s,l,o,c)=>{const d=s.querySelectorAll(`.${n}`);return!d||!d.length?null:Array.from(d).map(f=>{const h=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),type:n,nodeId:c,position:f.getAttribute("data-handlepos"),x:(h.left-l.left)/o,y:(h.top-l.top)/o,...uf(f)}})};function qx({sourceX:n,sourceY:s,targetX:l,targetY:o,sourceControlX:c,sourceControlY:d,targetControlX:f,targetControlY:h}){const p=n*.125+c*.375+f*.375+l*.125,m=s*.125+d*.375+h*.375+o*.125,y=Math.abs(p-n),x=Math.abs(m-s);return[p,m,y,x]}function oo(n,s){return n>=0?.5*n:s*25*Math.sqrt(-n)}function K0({pos:n,x1:s,y1:l,x2:o,y2:c,c:d}){switch(n){case pe.Left:return[s-oo(s-o,d),l];case pe.Right:return[s+oo(o-s,d),l];case pe.Top:return[s,l-oo(l-c,d)];case pe.Bottom:return[s,l+oo(c-l,d)]}}function Yx({sourceX:n,sourceY:s,sourcePosition:l=pe.Bottom,targetX:o,targetY:c,targetPosition:d=pe.Top,curvature:f=.25}){const[h,p]=K0({pos:l,x1:n,y1:s,x2:o,y2:c,c:f}),[m,y]=K0({pos:d,x1:o,y1:c,x2:n,y2:s,c:f}),[x,v,_,w]=qx({sourceX:n,sourceY:s,targetX:o,targetY:c,sourceControlX:h,sourceControlY:p,targetControlX:m,targetControlY:y});return[`M${n},${s} C${h},${p} ${m},${y} ${o},${c}`,x,v,_,w]}function Gx({sourceX:n,sourceY:s,targetX:l,targetY:o}){const c=Math.abs(l-n)/2,d=l<n?l+c:l-c,f=Math.abs(o-s)/2,h=o<s?o+f:o-f;return[d,h,c,f]}function R8({sourceNode:n,targetNode:s,selected:l=!1,zIndex:o=0,elevateOnSelect:c=!1,zIndexMode:d="basic"}){if(d==="manual")return o;const f=c&&l?o+1e3:o,h=Math.max(n.parentId||c&&n.selected?n.internals.z:0,s.parentId||c&&s.selected?s.internals.z:0);return f+h}function $8({sourceNode:n,targetNode:s,width:l,height:o,transform:c}){const d=Vo(zo(n),zo(s));d.x===d.x2&&(d.x2+=1),d.y===d.y2&&(d.y2+=1);const f={x:-c[0]/c[2],y:-c[1]/c[2],width:l/c[2],height:o/c[2]};return wi(f,qo(d))>0}const H8=({source:n,sourceHandle:s,target:l,targetHandle:o})=>`xy-edge__${n}${s||""}-${l}${o||""}`,U8=(n,s)=>s.some(l=>l.source===n.source&&l.target===n.target&&(l.sourceHandle===n.sourceHandle||!l.sourceHandle&&!n.sourceHandle)&&(l.targetHandle===n.targetHandle||!l.targetHandle&&!n.targetHandle)),Xx=(n,s,l={})=>{if(!n.source||!n.target)return s;const o=l.getEdgeId||H8;let c;return Mx(n)?c={...n}:c={...n,id:o(n)},U8(c,s)?s:(c.sourceHandle===null&&delete c.sourceHandle,c.targetHandle===null&&delete c.targetHandle,s.concat(c))};function Zx({sourceX:n,sourceY:s,targetX:l,targetY:o}){const[c,d,f,h]=Gx({sourceX:n,sourceY:s,targetX:l,targetY:o});return[`M ${n},${s}L ${l},${o}`,c,d,f,h]}const I0={[pe.Left]:{x:-1,y:0},[pe.Right]:{x:1,y:0},[pe.Top]:{x:0,y:-1},[pe.Bottom]:{x:0,y:1}},B8=({source:n,sourcePosition:s=pe.Bottom,target:l})=>s===pe.Left||s===pe.Right?n.x<l.x?{x:1,y:0}:{x:-1,y:0}:n.y<l.y?{x:0,y:1}:{x:0,y:-1},J0=(n,s)=>Math.sqrt(Math.pow(s.x-n.x,2)+Math.pow(s.y-n.y,2));function V8({source:n,sourcePosition:s=pe.Bottom,target:l,targetPosition:o=pe.Top,center:c,offset:d,stepPosition:f}){const h=I0[s],p=I0[o],m={x:n.x+h.x*d,y:n.y+h.y*d},y={x:l.x+p.x*d,y:l.y+p.y*d},x=B8({source:m,sourcePosition:s,target:y}),v=x.x!==0?"x":"y",_=x[v];let w=[],M,E;const A={x:0,y:0},z={x:0,y:0},[,,N,k]=Gx({sourceX:n.x,sourceY:n.y,targetX:l.x,targetY:l.y});if(h[v]*p[v]===-1){v==="x"?(M=c.x??m.x+(y.x-m.x)*f,E=c.y??(m.y+y.y)/2):(M=c.x??(m.x+y.x)/2,E=c.y??m.y+(y.y-m.y)*f);const O=[{x:M,y:m.y},{x:M,y:y.y}],V=[{x:m.x,y:E},{x:y.x,y:E}];h[v]===_?w=v==="x"?O:V:w=v==="x"?V:O}else{const O=[{x:m.x,y:y.y}],V=[{x:y.x,y:m.y}];if(v==="x"?w=h.x===_?V:O:w=h.y===_?O:V,s===o){const Z=Math.abs(n[v]-l[v]);if(Z<=d){const te=Math.min(d-1,d-Z);h[v]===_?A[v]=(m[v]>n[v]?-1:1)*te:z[v]=(y[v]>l[v]?-1:1)*te}}if(s!==o){const Z=v==="x"?"y":"x",te=h[v]===p[Z],C=m[Z]>y[Z],R=m[Z]<y[Z];(h[v]===1&&(!te&&C||te&&R)||h[v]!==1&&(!te&&R||te&&C))&&(w=v==="x"?O:V)}const G={x:m.x+A.x,y:m.y+A.y},L={x:y.x+z.x,y:y.y+z.y},F=Math.max(Math.abs(G.x-w[0].x),Math.abs(L.x-w[0].x)),Y=Math.max(Math.abs(G.y-w[0].y),Math.abs(L.y-w[0].y));F>=Y?(M=(G.x+L.x)/2,E=w[0].y):(M=w[0].x,E=(G.y+L.y)/2)}return[[n,{x:m.x+A.x,y:m.y+A.y},...w,{x:y.x+z.x,y:y.y+z.y},l],M,E,N,k]}function q8(n,s,l,o){const c=Math.min(J0(n,s)/2,J0(s,l)/2,o),{x:d,y:f}=s;if(n.x===d&&d===l.x||n.y===f&&f===l.y)return`L${d} ${f}`;if(n.y===f){const m=n.x<l.x?-1:1,y=n.y<l.y?1:-1;return`L ${d+c*m},${f}Q ${d},${f} ${d},${f+c*y}`}const h=n.x<l.x?1:-1,p=n.y<l.y?-1:1;return`L ${d},${f+c*p}Q ${d},${f} ${d+c*h},${f}`}function Gd({sourceX:n,sourceY:s,sourcePosition:l=pe.Bottom,targetX:o,targetY:c,targetPosition:d=pe.Top,borderRadius:f=5,centerX:h,centerY:p,offset:m=20,stepPosition:y=.5}){const[x,v,_,w,M]=V8({source:{x:n,y:s},sourcePosition:l,target:{x:o,y:c},targetPosition:d,center:{x:h,y:p},offset:m,stepPosition:y});return[x.reduce((A,z,N)=>{let k="";return N>0&&N<x.length-1?k=q8(x[N-1],z,x[N+1],f):k=`${N===0?"M":"L"}${z.x} ${z.y}`,A+=k,A},""),v,_,w,M]}function W0(n){return n&&!!(n.internals.handleBounds||n.handles?.length)&&!!(n.measured.width||n.width||n.initialWidth)}function Y8(n){const{sourceNode:s,targetNode:l}=n;if(!W0(s)||!W0(l))return null;const o=s.internals.handleBounds||P0(s.handles),c=l.internals.handleBounds||P0(l.handles),d=ep(o?.source??[],n.sourceHandle),f=ep(n.connectionMode===ir.Strict?c?.target??[]:(c?.target??[]).concat(c?.source??[]),n.targetHandle);if(!d||!f)return n.onError?.("008",yn.error008(d?"target":"source",{id:n.id,sourceHandle:n.sourceHandle,targetHandle:n.targetHandle})),null;const h=d?.position||pe.Bottom,p=f?.position||pe.Top,m=ss(s,d,h),y=ss(l,f,p);return{sourceX:m.x,sourceY:m.y,targetX:y.x,targetY:y.y,sourcePosition:h,targetPosition:p}}function P0(n){if(!n)return null;const s=[],l=[];for(const o of n)o.width=o.width??1,o.height=o.height??1,o.type==="source"?s.push(o):o.type==="target"&&l.push(o);return{source:s,target:l}}function ss(n,s,l=pe.Left,o=!1){const c=(s?.x??0)+n.internals.positionAbsolute.x,d=(s?.y??0)+n.internals.positionAbsolute.y,{width:f,height:h}=s??Zn(n);if(o)return{x:c+f/2,y:d+h/2};switch(s?.position??l){case pe.Top:return{x:c+f/2,y:d};case pe.Right:return{x:c+f,y:d+h/2};case pe.Bottom:return{x:c+f/2,y:d+h};case pe.Left:return{x:c,y:d+h/2}}}function ep(n,s){return n&&(s?n.find(l=>l.id===s):n[0])||null}function Xd(n,s){return n?typeof n=="string"?n:`${s?`${s}__`:""}${Object.keys(n).sort().map(o=>`${o}=${n[o]}`).join("&")}`:""}function G8(n,{id:s,defaultColor:l,defaultMarkerStart:o,defaultMarkerEnd:c}){const d=new Set;return n.reduce((f,h)=>([h.markerStart||o,h.markerEnd||c].forEach(p=>{if(p&&typeof p=="object"){const m=Xd(p,s);d.has(m)||(f.push({id:m,color:p.color||l,...p}),d.add(m))}}),f),[]).sort((f,h)=>f.id.localeCompare(h.id))}const Qx=1e3,X8=10,df={nodeOrigin:[0,0],nodeExtent:Ni,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},Z8={...df,checkEquality:!0};function ff(n,s){const l={...n};for(const o in s)s[o]!==void 0&&(l[o]=s[o]);return l}function Q8(n,s,l){const o=ff(df,l);for(const c of n.values())if(c.parentId)hf(c,n,s,o);else{const d=Ti(c,o.nodeOrigin),f=cr(c.extent)?c.extent:o.nodeExtent,h=as(d,f,Zn(c));c.internals.positionAbsolute=h}}function F8(n,s){if(!n.handles)return n.measured?s?.internals.handleBounds:void 0;const l=[],o=[];for(const c of n.handles){const d={id:c.id,width:c.width??1,height:c.height??1,nodeId:n.id,x:c.x,y:c.y,position:c.position,type:c.type};c.type==="source"?l.push(d):c.type==="target"&&o.push(d)}return{source:l,target:o}}function gf(n){return n==="manual"}function Zd(n,s,l,o={}){const c=ff(Z8,o),d={i:0},f=new Map(s),h=c?.elevateNodesOnSelect&&!gf(c.zIndexMode)?Qx:0;let p=n.length>0;s.clear(),l.clear();for(const m of n){let y=f.get(m.id);if(c.checkEquality&&m===y?.internals.userNode)s.set(m.id,y);else{const x=Ti(m,c.nodeOrigin),v=cr(m.extent)?m.extent:c.nodeExtent,_=as(x,v,Zn(m));y={...c.defaults,...m,measured:{width:m.measured?.width,height:m.measured?.height},internals:{positionAbsolute:_,handleBounds:F8(m,y),z:Fx(m,h,c.zIndexMode),userNode:m}},s.set(m.id,y)}(y.measured===void 0||y.measured.width===void 0||y.measured.height===void 0)&&!y.hidden&&(p=!1),m.parentId&&hf(y,s,l,o,d)}return p}function K8(n,s){if(!n.parentId)return;const l=s.get(n.parentId);l?l.set(n.id,n):s.set(n.parentId,new Map([[n.id,n]]))}function hf(n,s,l,o,c){const{elevateNodesOnSelect:d,nodeOrigin:f,nodeExtent:h,zIndexMode:p}=ff(df,o),m=n.parentId,y=s.get(m);if(!y){console.warn(`Parent node ${m} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}K8(n,l),c&&!y.parentId&&y.internals.rootParentIndex===void 0&&p==="auto"&&(y.internals.rootParentIndex=++c.i,y.internals.z=y.internals.z+c.i*X8),c&&y.internals.rootParentIndex!==void 0&&(c.i=y.internals.rootParentIndex);const x=d&&!gf(p)?Qx:0,{x:v,y:_,z:w}=I8(n,y,f,h,x,p),{positionAbsolute:M}=n.internals,E=v!==M.x||_!==M.y;(E||w!==n.internals.z)&&s.set(n.id,{...n,internals:{...n.internals,positionAbsolute:E?{x:v,y:_}:M,z:w}})}function Fx(n,s,l){const o=nn(n.zIndex)?n.zIndex:0;return gf(l)?o:o+(n.selected?s:0)}function I8(n,s,l,o,c,d){const{x:f,y:h}=s.internals.positionAbsolute,p=Zn(n),m=Ti(n,l),y=cr(n.extent)?as(m,n.extent,p):m;let x=as({x:f+y.x,y:h+y.y},o,p);n.extent==="parent"&&(x=Ox(x,p,s));const v=Fx(n,c,d),_=s.internals.z??0;return{x:x.x,y:x.y,z:_>=v?_+1:v}}function mf(n,s,l,o=[0,0]){const c=[],d=new Map;for(const f of n){const h=s.get(f.parentId);if(!h)continue;const p=d.get(f.parentId)?.expandedRect??or(h),m=Rx(p,f.rect);d.set(f.parentId,{expandedRect:m,parent:h})}return d.size>0&&d.forEach(({expandedRect:f,parent:h},p)=>{const m=h.internals.positionAbsolute,y=Zn(h),x=h.origin??o,v=f.x<m.x?Math.round(Math.abs(m.x-f.x)):0,_=f.y<m.y?Math.round(Math.abs(m.y-f.y)):0,w=Math.max(y.width,Math.round(f.width)),M=Math.max(y.height,Math.round(f.height)),E=(w-y.width)*x[0],A=(M-y.height)*x[1];(v>0||_>0||E||A)&&(c.push({id:p,type:"position",position:{x:h.position.x-v+E,y:h.position.y-_+A}}),l.get(p)?.forEach(z=>{n.some(N=>N.id===z.id)||c.push({id:z.id,type:"position",position:{x:z.position.x+v,y:z.position.y+_}})})),(y.width<f.width||y.height<f.height||v||_)&&c.push({id:p,type:"dimensions",setAttributes:!0,dimensions:{width:w+(v?x[0]*v-E:0),height:M+(_?x[1]*_-A:0)}})}),c}function J8(n,s,l,o,c,d,f){const h=o?.querySelector(".xyflow__viewport");let p=!1;if(!h)return{changes:[],updatedInternals:p};const m=[],y=window.getComputedStyle(h),{m22:x}=new window.DOMMatrixReadOnly(y.transform),v=[];for(const _ of n.values()){const w=s.get(_.id);if(!w)continue;if(w.hidden){s.set(w.id,{...w,internals:{...w.internals,handleBounds:void 0}}),p=!0;continue}const M=uf(_.nodeElement),E=w.measured.width!==M.width||w.measured.height!==M.height;if(!!(M.width&&M.height&&(E||!w.internals.handleBounds||_.force))){const z=_.nodeElement.getBoundingClientRect(),N=cr(w.extent)?w.extent:d;let{positionAbsolute:k}=w.internals;w.parentId&&w.extent==="parent"?k=Ox(k,M,s.get(w.parentId)):N&&(k=as(k,N,M));const U={...w,measured:M,internals:{...w.internals,positionAbsolute:k,handleBounds:{source:F0("source",_.nodeElement,z,x,w.id),target:F0("target",_.nodeElement,z,x,w.id)}}};s.set(w.id,U),w.parentId&&hf(U,s,l,{nodeOrigin:c,zIndexMode:f}),p=!0,E&&(m.push({id:w.id,type:"dimensions",dimensions:M}),w.expandParent&&w.parentId&&v.push({id:w.id,parentId:w.parentId,rect:or(U,c)}))}}if(v.length>0){const _=mf(v,s,l,c);m.push(..._)}return{changes:m,updatedInternals:p}}async function W8({delta:n,panZoom:s,transform:l,translateExtent:o,width:c,height:d}){if(!s||!n.x&&!n.y)return Promise.resolve(!1);const f=await s.setViewportConstrained({x:l[0]+n.x,y:l[1]+n.y,zoom:l[2]},[[0,0],[c,d]],o),h=!!f&&(f.x!==l[0]||f.y!==l[1]||f.k!==l[2]);return Promise.resolve(h)}function tp(n,s,l,o,c,d){let f=c;const h=o.get(f)||new Map;o.set(f,h.set(l,s)),f=`${c}-${n}`;const p=o.get(f)||new Map;if(o.set(f,p.set(l,s)),d){f=`${c}-${n}-${d}`;const m=o.get(f)||new Map;o.set(f,m.set(l,s))}}function Kx(n,s,l){n.clear(),s.clear();for(const o of l){const{source:c,target:d,sourceHandle:f=null,targetHandle:h=null}=o,p={edgeId:o.id,source:c,target:d,sourceHandle:f,targetHandle:h},m=`${c}-${f}--${d}-${h}`,y=`${d}-${h}--${c}-${f}`;tp("source",p,y,n,c,f),tp("target",p,m,n,d,h),s.set(o.id,o)}}function Ix(n,s){if(!n.parentId)return!1;const l=s.get(n.parentId);return l?l.selected?!0:Ix(l,s):!1}function np(n,s,l){let o=n;do{if(o?.matches?.(s))return!0;if(o===l)return!1;o=o?.parentElement}while(o);return!1}function P8(n,s,l,o){const c=new Map;for(const[d,f]of n)if((f.selected||f.id===o)&&(!f.parentId||!Ix(f,n))&&(f.draggable||s&&typeof f.draggable>"u")){const h=n.get(d);h&&c.set(d,{id:d,position:h.position||{x:0,y:0},distance:{x:l.x-h.internals.positionAbsolute.x,y:l.y-h.internals.positionAbsolute.y},extent:h.extent,parentId:h.parentId,origin:h.origin,expandParent:h.expandParent,internals:{positionAbsolute:h.internals.positionAbsolute||{x:0,y:0}},measured:{width:h.measured.width??0,height:h.measured.height??0}})}return c}function kd({nodeId:n,dragItems:s,nodeLookup:l,dragging:o=!0}){const c=[];for(const[f,h]of s){const p=l.get(f)?.internals.userNode;p&&c.push({...p,position:h.position,dragging:o})}if(!n)return[c[0],c];const d=l.get(n)?.internals.userNode;return[d?{...d,position:s.get(n)?.position||d.position,dragging:o}:c[0],c]}function eM({dragItems:n,snapGrid:s,x:l,y:o}){const c=n.values().next().value;if(!c)return null;const d={x:l-c.distance.x,y:o-c.distance.y},f=Di(d,s);return{x:f.x-d.x,y:f.y-d.y}}function tM({onNodeMouseDown:n,getStoreItems:s,onDragStart:l,onDrag:o,onDragStop:c}){let d={x:null,y:null},f=0,h=new Map,p=!1,m={x:0,y:0},y=null,x=!1,v=null,_=!1,w=!1,M=null;function E({noDragClassName:z,handleSelector:N,domNode:k,isSelectable:U,nodeId:O,nodeClickDistance:V=0}){v=Ut(k);function G({x:Z,y:te}){const{nodeLookup:C,nodeExtent:R,snapGrid:j,snapToGrid:D,nodeOrigin:H,onNodeDrag:q,onSelectionDrag:P,onError:X,updateNodePositions:W}=s();d={x:Z,y:te};let se=!1;const le=h.size>1,de=le&&R?Yd(Mi(h)):null,be=le&&D?eM({dragItems:h,snapGrid:j,x:Z,y:te}):null;for(const[me,oe]of h){if(!C.has(me))continue;let fe={x:Z-oe.distance.x,y:te-oe.distance.y};D&&(fe=be?{x:Math.round(fe.x+be.x),y:Math.round(fe.y+be.y)}:Di(fe,j));let we=null;if(le&&R&&!oe.extent&&de){const{positionAbsolute:_e}=oe.internals,Ce=_e.x-de.x+R[0][0],ie=_e.x+oe.measured.width-de.x2+R[1][0],ge=_e.y-de.y+R[0][1],Oe=_e.y+oe.measured.height-de.y2+R[1][1];we=[[Ce,ge],[ie,Oe]]}const{position:Ne,positionAbsolute:ye}=Dx({nodeId:me,nextPosition:fe,nodeLookup:C,nodeExtent:we||R,nodeOrigin:H,onError:X});se=se||oe.position.x!==Ne.x||oe.position.y!==Ne.y,oe.position=Ne,oe.internals.positionAbsolute=ye}if(w=w||se,!!se&&(W(h,!0),M&&(o||q||!O&&P))){const[me,oe]=kd({nodeId:O,dragItems:h,nodeLookup:C});o?.(M,h,me,oe),q?.(M,me,oe),O||P?.(M,oe)}}async function L(){if(!y)return;const{transform:Z,panBy:te,autoPanSpeed:C,autoPanOnNodeDrag:R}=s();if(!R){p=!1,cancelAnimationFrame(f);return}const[j,D]=Lx(m,y,C);(j!==0||D!==0)&&(d.x=(d.x??0)-j/Z[2],d.y=(d.y??0)-D/Z[2],await te({x:j,y:D})&&G(d)),f=requestAnimationFrame(L)}function F(Z){const{nodeLookup:te,multiSelectionActive:C,nodesDraggable:R,transform:j,snapGrid:D,snapToGrid:H,selectNodesOnDrag:q,onNodeDragStart:P,onSelectionDragStart:X,unselectNodesAndEdges:W}=s();x=!0,(!q||!U)&&!C&&O&&(te.get(O)?.selected||W()),U&&q&&O&&n?.(O);const se=mi(Z.sourceEvent,{transform:j,snapGrid:D,snapToGrid:H,containerBounds:y});if(d=se,h=P8(te,R,se,O),h.size>0&&(l||P||!O&&X)){const[le,de]=kd({nodeId:O,dragItems:h,nodeLookup:te});l?.(Z.sourceEvent,h,le,de),P?.(Z.sourceEvent,le,de),O||X?.(Z.sourceEvent,de)}}const Y=yx().clickDistance(V).on("start",Z=>{const{domNode:te,nodeDragThreshold:C,transform:R,snapGrid:j,snapToGrid:D}=s();y=te?.getBoundingClientRect()||null,_=!1,w=!1,M=Z.sourceEvent,C===0&&F(Z),d=mi(Z.sourceEvent,{transform:R,snapGrid:j,snapToGrid:D,containerBounds:y}),m=an(Z.sourceEvent,y)}).on("drag",Z=>{const{autoPanOnNodeDrag:te,transform:C,snapGrid:R,snapToGrid:j,nodeDragThreshold:D,nodeLookup:H}=s(),q=mi(Z.sourceEvent,{transform:C,snapGrid:R,snapToGrid:j,containerBounds:y});if(M=Z.sourceEvent,(Z.sourceEvent.type==="touchmove"&&Z.sourceEvent.touches.length>1||O&&!H.has(O))&&(_=!0),!_){if(!p&&te&&x&&(p=!0,L()),!x){const P=an(Z.sourceEvent,y),X=P.x-m.x,W=P.y-m.y;Math.sqrt(X*X+W*W)>D&&F(Z)}(d.x!==q.xSnapped||d.y!==q.ySnapped)&&h&&x&&(m=an(Z.sourceEvent,y),G(q))}}).on("end",Z=>{if(!(!x||_)&&(p=!1,x=!1,cancelAnimationFrame(f),h.size>0)){const{nodeLookup:te,updateNodePositions:C,onNodeDragStop:R,onSelectionDragStop:j}=s();if(w&&(C(h,!1),w=!1),c||R||!O&&j){const[D,H]=kd({nodeId:O,dragItems:h,nodeLookup:te,dragging:!1});c?.(Z.sourceEvent,h,D,H),R?.(Z.sourceEvent,D,H),O||j?.(Z.sourceEvent,H)}}}).filter(Z=>{const te=Z.target;return!Z.button&&(!z||!np(te,`.${z}`,k))&&(!N||np(te,N,k))});v.call(Y)}function A(){v?.on(".drag",null)}return{update:E,destroy:A}}function nM(n,s,l){const o=[],c={x:n.x-l,y:n.y-l,width:l*2,height:l*2};for(const d of s.values())wi(c,or(d))>0&&o.push(d);return o}const aM=250;function sM(n,s,l,o){let c=[],d=1/0;const f=nM(n,l,s+aM);for(const h of f){const p=[...h.internals.handleBounds?.source??[],...h.internals.handleBounds?.target??[]];for(const m of p){if(o.nodeId===m.nodeId&&o.type===m.type&&o.id===m.id)continue;const{x:y,y:x}=ss(h,m,m.position,!0),v=Math.sqrt(Math.pow(y-n.x,2)+Math.pow(x-n.y,2));v>s||(v<d?(c=[{...m,x:y,y:x}],d=v):v===d&&c.push({...m,x:y,y:x}))}}if(!c.length)return null;if(c.length>1){const h=o.type==="source"?"target":"source";return c.find(p=>p.type===h)??c[0]}return c[0]}function Jx(n,s,l,o,c,d=!1){const f=o.get(n);if(!f)return null;const h=c==="strict"?f.internals.handleBounds?.[s]:[...f.internals.handleBounds?.source??[],...f.internals.handleBounds?.target??[]],p=(l?h?.find(m=>m.id===l):h?.[0])??null;return p&&d?{...p,...ss(f,p,p.position,!0)}:p}function Wx(n,s){return n||(s?.classList.contains("target")?"target":s?.classList.contains("source")?"source":null)}function rM(n,s){let l=null;return s?l=!0:n&&!s&&(l=!1),l}const Px=()=>!0;function iM(n,{connectionMode:s,connectionRadius:l,handleId:o,nodeId:c,edgeUpdaterType:d,isTarget:f,domNode:h,nodeLookup:p,lib:m,autoPanOnConnect:y,flowId:x,panBy:v,cancelConnection:_,onConnectStart:w,onConnect:M,onConnectEnd:E,isValidConnection:A=Px,onReconnectEnd:z,updateConnection:N,getTransform:k,getFromHandle:U,autoPanSpeed:O,dragThreshold:V=1,handleDomNode:G}){const L=Ux(n.target);let F=0,Y;const{x:Z,y:te}=an(n),C=Wx(d,G),R=h?.getBoundingClientRect();let j=!1;if(!R||!C)return;const D=Jx(c,C,o,p,s);if(!D)return;let H=an(n,R),q=!1,P=null,X=!1,W=null;function se(){if(!y||!R)return;const[Ne,ye]=Lx(H,R,O);v({x:Ne,y:ye}),F=requestAnimationFrame(se)}const le={...D,nodeId:c,type:C,position:D.position},de=p.get(c);let me={inProgress:!0,isValid:null,from:ss(de,le,pe.Left,!0),fromHandle:le,fromPosition:le.position,fromNode:de,to:H,toHandle:null,toPosition:G0[le.position],toNode:null,pointer:H};function oe(){j=!0,N(me),w?.(n,{nodeId:c,handleId:o,handleType:C})}V===0&&oe();function fe(Ne){if(!j){const{x:Oe,y:rt}=an(Ne),Tt=Oe-Z,It=rt-te;if(!(Tt*Tt+It*It>V*V))return;oe()}if(!U()||!le){we(Ne);return}const ye=k();H=an(Ne,R),Y=sM(Oi(H,ye,!1,[1,1]),l,p,le),q||(se(),q=!0);const _e=ey(Ne,{handle:Y,connectionMode:s,fromNodeId:c,fromHandleId:o,fromType:f?"target":"source",isValidConnection:A,doc:L,lib:m,flowId:x,nodeLookup:p});W=_e.handleDomNode,P=_e.connection,X=rM(!!Y,_e.isValid);const Ce=p.get(c),ie=Ce?ss(Ce,le,pe.Left,!0):me.from,ge={...me,from:ie,isValid:X,to:_e.toHandle&&X?Eo({x:_e.toHandle.x,y:_e.toHandle.y},ye):H,toHandle:_e.toHandle,toPosition:X&&_e.toHandle?_e.toHandle.position:G0[le.position],toNode:_e.toHandle?p.get(_e.toHandle.nodeId):null,pointer:H};N(ge),me=ge}function we(Ne){if(!("touches"in Ne&&Ne.touches.length>0)){if(j){(Y||W)&&P&&X&&M?.(P);const{inProgress:ye,..._e}=me,Ce={..._e,toPosition:me.toHandle?me.toPosition:null};E?.(Ne,Ce),d&&z?.(Ne,Ce)}_(),cancelAnimationFrame(F),q=!1,X=!1,P=null,W=null,L.removeEventListener("mousemove",fe),L.removeEventListener("mouseup",we),L.removeEventListener("touchmove",fe),L.removeEventListener("touchend",we)}}L.addEventListener("mousemove",fe),L.addEventListener("mouseup",we),L.addEventListener("touchmove",fe),L.addEventListener("touchend",we)}function ey(n,{handle:s,connectionMode:l,fromNodeId:o,fromHandleId:c,fromType:d,doc:f,lib:h,flowId:p,isValidConnection:m=Px,nodeLookup:y}){const x=d==="target",v=s?f.querySelector(`.${h}-flow__handle[data-id="${p}-${s?.nodeId}-${s?.id}-${s?.type}"]`):null,{x:_,y:w}=an(n),M=f.elementFromPoint(_,w),E=M?.classList.contains(`${h}-flow__handle`)?M:v,A={handleDomNode:E,isValid:!1,connection:null,toHandle:null};if(E){const z=Wx(void 0,E),N=E.getAttribute("data-nodeid"),k=E.getAttribute("data-handleid"),U=E.classList.contains("connectable"),O=E.classList.contains("connectableend");if(!N||!z)return A;const V={source:x?N:o,sourceHandle:x?k:c,target:x?o:N,targetHandle:x?c:k};A.connection=V;const L=U&&O&&(l===ir.Strict?x&&z==="source"||!x&&z==="target":N!==o||k!==c);A.isValid=L&&m(V),A.toHandle=Jx(N,z,k,y,l,!0)}return A}const Qd={onPointerDown:iM,isValid:ey};function lM({domNode:n,panZoom:s,getTransform:l,getViewScale:o}){const c=Ut(n);function d({translateExtent:h,width:p,height:m,zoomStep:y=1,pannable:x=!0,zoomable:v=!0,inversePan:_=!1}){const w=N=>{if(N.sourceEvent.type!=="wheel"||!s)return;const k=l(),U=N.sourceEvent.ctrlKey&&Si()?10:1,O=-N.sourceEvent.deltaY*(N.sourceEvent.deltaMode===1?.05:N.sourceEvent.deltaMode?1:.002)*y,V=k[2]*Math.pow(2,O*U);s.scaleTo(V)};let M=[0,0];const E=N=>{(N.sourceEvent.type==="mousedown"||N.sourceEvent.type==="touchstart")&&(M=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY])},A=N=>{const k=l();if(N.sourceEvent.type!=="mousemove"&&N.sourceEvent.type!=="touchmove"||!s)return;const U=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY],O=[U[0]-M[0],U[1]-M[1]];M=U;const V=o()*Math.max(k[2],Math.log(k[2]))*(_?-1:1),G={x:k[0]-O[0]*V,y:k[1]-O[1]*V},L=[[0,0],[p,m]];s.setViewportConstrained({x:G.x,y:G.y,zoom:k[2]},L,h)},z=Cx().on("start",E).on("zoom",x?A:null).on("zoom.wheel",v?w:null);c.call(z,{})}function f(){c.on("zoom",null)}return{update:d,destroy:f,pointer:tn}}const Yo=n=>({x:n.x,y:n.y,zoom:n.k}),Cd=({x:n,y:s,zoom:l})=>Bo.translate(n,s).scale(l),Ws=(n,s)=>n.target.closest(`.${s}`),ty=(n,s)=>s===2&&Array.isArray(n)&&n.includes(2),oM=n=>((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2,zd=(n,s=0,l=oM,o=()=>{})=>{const c=typeof s=="number"&&s>0;return c||o(),c?n.transition().duration(s).ease(l).on("end",o):n},ny=n=>{const s=n.ctrlKey&&Si()?10:1;return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*s};function cM({zoomPanValues:n,noWheelClassName:s,d3Selection:l,d3Zoom:o,panOnScrollMode:c,panOnScrollSpeed:d,zoomOnPinch:f,onPanZoomStart:h,onPanZoom:p,onPanZoomEnd:m}){return y=>{if(Ws(y,s))return y.ctrlKey&&y.preventDefault(),!1;y.preventDefault(),y.stopImmediatePropagation();const x=l.property("__zoom").k||1;if(y.ctrlKey&&f){const E=tn(y),A=ny(y),z=x*Math.pow(2,A);o.scaleTo(l,z,E,y);return}const v=y.deltaMode===1?20:1;let _=c===es.Vertical?0:y.deltaX*v,w=c===es.Horizontal?0:y.deltaY*v;!Si()&&y.shiftKey&&c!==es.Vertical&&(_=y.deltaY*v,w=0),o.translateBy(l,-(_/x)*d,-(w/x)*d,{internal:!0});const M=Yo(l.property("__zoom"));clearTimeout(n.panScrollTimeout),n.isPanScrolling?(p?.(y,M),n.panScrollTimeout=setTimeout(()=>{m?.(y,M),n.isPanScrolling=!1},150)):(n.isPanScrolling=!0,h?.(y,M))}}function uM({noWheelClassName:n,preventScrolling:s,d3ZoomHandler:l}){return function(o,c){const d=o.type==="wheel",f=!s&&d&&!o.ctrlKey,h=Ws(o,n);if(o.ctrlKey&&d&&h&&o.preventDefault(),f||h)return null;o.preventDefault(),l.call(this,o,c)}}function dM({zoomPanValues:n,onDraggingChange:s,onPanZoomStart:l}){return o=>{if(o.sourceEvent?.internal)return;const c=Yo(o.transform);n.mouseButton=o.sourceEvent?.button||0,n.isZoomingOrPanning=!0,n.prevViewport=c,o.sourceEvent?.type==="mousedown"&&s(!0),l&&l?.(o.sourceEvent,c)}}function fM({zoomPanValues:n,panOnDrag:s,onPaneContextMenu:l,onTransformChange:o,onPanZoom:c}){return d=>{n.usedRightMouseButton=!!(l&&ty(s,n.mouseButton??0)),d.sourceEvent?.sync||o([d.transform.x,d.transform.y,d.transform.k]),c&&!d.sourceEvent?.internal&&c?.(d.sourceEvent,Yo(d.transform))}}function gM({zoomPanValues:n,panOnDrag:s,panOnScroll:l,onDraggingChange:o,onPanZoomEnd:c,onPaneContextMenu:d}){return f=>{if(!f.sourceEvent?.internal&&(n.isZoomingOrPanning=!1,d&&ty(s,n.mouseButton??0)&&!n.usedRightMouseButton&&f.sourceEvent&&d(f.sourceEvent),n.usedRightMouseButton=!1,o(!1),c)){const h=Yo(f.transform);n.prevViewport=h,clearTimeout(n.timerId),n.timerId=setTimeout(()=>{c?.(f.sourceEvent,h)},l?150:0)}}}function hM({zoomActivationKeyPressed:n,zoomOnScroll:s,zoomOnPinch:l,panOnDrag:o,panOnScroll:c,zoomOnDoubleClick:d,userSelectionActive:f,noWheelClassName:h,noPanClassName:p,lib:m,connectionInProgress:y}){return x=>{const v=n||s,_=l&&x.ctrlKey,w=x.type==="wheel";if(x.button===1&&x.type==="mousedown"&&(Ws(x,`${m}-flow__node`)||Ws(x,`${m}-flow__edge`)))return!0;if(!o&&!v&&!c&&!d&&!l||f||y&&!w||Ws(x,h)&&w||Ws(x,p)&&(!w||c&&w&&!n)||!l&&x.ctrlKey&&w)return!1;if(!l&&x.type==="touchstart"&&x.touches?.length>1)return x.preventDefault(),!1;if(!v&&!c&&!_&&w||!o&&(x.type==="mousedown"||x.type==="touchstart")||Array.isArray(o)&&!o.includes(x.button)&&x.type==="mousedown")return!1;const M=Array.isArray(o)&&o.includes(x.button)||!x.button||x.button<=1;return(!x.ctrlKey||w)&&M}}function mM({domNode:n,minZoom:s,maxZoom:l,translateExtent:o,viewport:c,onPanZoom:d,onPanZoomStart:f,onPanZoomEnd:h,onDraggingChange:p}){const m={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},y=n.getBoundingClientRect(),x=Cx().scaleExtent([s,l]).translateExtent(o),v=Ut(n).call(x);z({x:c.x,y:c.y,zoom:lr(c.zoom,s,l)},[[0,0],[y.width,y.height]],o);const _=v.on("wheel.zoom"),w=v.on("dblclick.zoom");x.wheelDelta(ny);function M(Y,Z){return v?new Promise(te=>{x?.interpolate(Z?.interpolate==="linear"?md:go).transform(zd(v,Z?.duration,Z?.ease,()=>te(!0)),Y)}):Promise.resolve(!1)}function E({noWheelClassName:Y,noPanClassName:Z,onPaneContextMenu:te,userSelectionActive:C,panOnScroll:R,panOnDrag:j,panOnScrollMode:D,panOnScrollSpeed:H,preventScrolling:q,zoomOnPinch:P,zoomOnScroll:X,zoomOnDoubleClick:W,zoomActivationKeyPressed:se,lib:le,onTransformChange:de,connectionInProgress:be,paneClickDistance:me,selectionOnDrag:oe}){C&&!m.isZoomingOrPanning&&A();const fe=R&&!se&&!C;x.clickDistance(oe?1/0:!nn(me)||me<0?0:me);const we=fe?cM({zoomPanValues:m,noWheelClassName:Y,d3Selection:v,d3Zoom:x,panOnScrollMode:D,panOnScrollSpeed:H,zoomOnPinch:P,onPanZoomStart:f,onPanZoom:d,onPanZoomEnd:h}):uM({noWheelClassName:Y,preventScrolling:q,d3ZoomHandler:_});if(v.on("wheel.zoom",we,{passive:!1}),!C){const ye=dM({zoomPanValues:m,onDraggingChange:p,onPanZoomStart:f});x.on("start",ye);const _e=fM({zoomPanValues:m,panOnDrag:j,onPaneContextMenu:!!te,onPanZoom:d,onTransformChange:de});x.on("zoom",_e);const Ce=gM({zoomPanValues:m,panOnDrag:j,panOnScroll:R,onPaneContextMenu:te,onPanZoomEnd:h,onDraggingChange:p});x.on("end",Ce)}const Ne=hM({zoomActivationKeyPressed:se,panOnDrag:j,zoomOnScroll:X,panOnScroll:R,zoomOnDoubleClick:W,zoomOnPinch:P,userSelectionActive:C,noPanClassName:Z,noWheelClassName:Y,lib:le,connectionInProgress:be});x.filter(Ne),W?v.on("dblclick.zoom",w):v.on("dblclick.zoom",null)}function A(){x.on("zoom",null)}async function z(Y,Z,te){const C=Cd(Y),R=x?.constrain()(C,Z,te);return R&&await M(R),new Promise(j=>j(R))}async function N(Y,Z){const te=Cd(Y);return await M(te,Z),new Promise(C=>C(te))}function k(Y){if(v){const Z=Cd(Y),te=v.property("__zoom");(te.k!==Y.zoom||te.x!==Y.x||te.y!==Y.y)&&x?.transform(v,Z,null,{sync:!0})}}function U(){const Y=v?kx(v.node()):{x:0,y:0,k:1};return{x:Y.x,y:Y.y,zoom:Y.k}}function O(Y,Z){return v?new Promise(te=>{x?.interpolate(Z?.interpolate==="linear"?md:go).scaleTo(zd(v,Z?.duration,Z?.ease,()=>te(!0)),Y)}):Promise.resolve(!1)}function V(Y,Z){return v?new Promise(te=>{x?.interpolate(Z?.interpolate==="linear"?md:go).scaleBy(zd(v,Z?.duration,Z?.ease,()=>te(!0)),Y)}):Promise.resolve(!1)}function G(Y){x?.scaleExtent(Y)}function L(Y){x?.translateExtent(Y)}function F(Y){const Z=!nn(Y)||Y<0?0:Y;x?.clickDistance(Z)}return{update:E,destroy:A,setViewport:N,setViewportConstrained:z,getViewport:U,scaleTo:O,scaleBy:V,setScaleExtent:G,setTranslateExtent:L,syncViewport:k,setClickDistance:F}}var ur;(function(n){n.Line="line",n.Handle="handle"})(ur||(ur={}));function pM({width:n,prevWidth:s,height:l,prevHeight:o,affectsX:c,affectsY:d}){const f=n-s,h=l-o,p=[f>0?1:f<0?-1:0,h>0?1:h<0?-1:0];return f&&c&&(p[0]=p[0]*-1),h&&d&&(p[1]=p[1]*-1),p}function ap(n){const s=n.includes("right")||n.includes("left"),l=n.includes("bottom")||n.includes("top"),o=n.includes("left"),c=n.includes("top");return{isHorizontal:s,isVertical:l,affectsX:o,affectsY:c}}function Na(n,s){return Math.max(0,s-n)}function ja(n,s){return Math.max(0,n-s)}function co(n,s,l){return Math.max(0,s-n,n-l)}function sp(n,s){return n?!s:s}function xM(n,s,l,o,c,d,f,h){let{affectsX:p,affectsY:m}=s;const{isHorizontal:y,isVertical:x}=s,v=y&&x,{xSnapped:_,ySnapped:w}=l,{minWidth:M,maxWidth:E,minHeight:A,maxHeight:z}=o,{x:N,y:k,width:U,height:O,aspectRatio:V}=n;let G=Math.floor(y?_-n.pointerX:0),L=Math.floor(x?w-n.pointerY:0);const F=U+(p?-G:G),Y=O+(m?-L:L),Z=-d[0]*U,te=-d[1]*O;let C=co(F,M,E),R=co(Y,A,z);if(f){let H=0,q=0;p&&G<0?H=Na(N+G+Z,f[0][0]):!p&&G>0&&(H=ja(N+F+Z,f[1][0])),m&&L<0?q=Na(k+L+te,f[0][1]):!m&&L>0&&(q=ja(k+Y+te,f[1][1])),C=Math.max(C,H),R=Math.max(R,q)}if(h){let H=0,q=0;p&&G>0?H=ja(N+G,h[0][0]):!p&&G<0&&(H=Na(N+F,h[1][0])),m&&L>0?q=ja(k+L,h[0][1]):!m&&L<0&&(q=Na(k+Y,h[1][1])),C=Math.max(C,H),R=Math.max(R,q)}if(c){if(y){const H=co(F/V,A,z)*V;if(C=Math.max(C,H),f){let q=0;!p&&!m||p&&!m&&v?q=ja(k+te+F/V,f[1][1])*V:q=Na(k+te+(p?G:-G)/V,f[0][1])*V,C=Math.max(C,q)}if(h){let q=0;!p&&!m||p&&!m&&v?q=Na(k+F/V,h[1][1])*V:q=ja(k+(p?G:-G)/V,h[0][1])*V,C=Math.max(C,q)}}if(x){const H=co(Y*V,M,E)/V;if(R=Math.max(R,H),f){let q=0;!p&&!m||m&&!p&&v?q=ja(N+Y*V+Z,f[1][0])/V:q=Na(N+(m?L:-L)*V+Z,f[0][0])/V,R=Math.max(R,q)}if(h){let q=0;!p&&!m||m&&!p&&v?q=Na(N+Y*V,h[1][0])/V:q=ja(N+(m?L:-L)*V,h[0][0])/V,R=Math.max(R,q)}}}L=L+(L<0?R:-R),G=G+(G<0?C:-C),c&&(v?F>Y*V?L=(sp(p,m)?-G:G)/V:G=(sp(p,m)?-L:L)*V:y?(L=G/V,m=p):(G=L*V,p=m));const j=p?N+G:N,D=m?k+L:k;return{width:U+(p?-G:G),height:O+(m?-L:L),x:d[0]*G*(p?-1:1)+j,y:d[1]*L*(m?-1:1)+D}}const ay={width:0,height:0,x:0,y:0},yM={...ay,pointerX:0,pointerY:0,aspectRatio:1};function bM(n){return[[0,0],[n.measured.width,n.measured.height]]}function vM(n,s,l){const o=s.position.x+n.position.x,c=s.position.y+n.position.y,d=n.measured.width??0,f=n.measured.height??0,h=l[0]*d,p=l[1]*f;return[[o-h,c-p],[o+d-h,c+f-p]]}function _M({domNode:n,nodeId:s,getStoreItems:l,onChange:o,onEnd:c}){const d=Ut(n);let f={controlDirection:ap("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function h({controlPosition:m,boundaries:y,keepAspectRatio:x,resizeDirection:v,onResizeStart:_,onResize:w,onResizeEnd:M,shouldResize:E}){let A={...ay},z={...yM};f={boundaries:y,resizeDirection:v,keepAspectRatio:x,controlDirection:ap(m)};let N,k=null,U=[],O,V,G,L=!1;const F=yx().on("start",Y=>{const{nodeLookup:Z,transform:te,snapGrid:C,snapToGrid:R,nodeOrigin:j,paneDomNode:D}=l();if(N=Z.get(s),!N)return;k=D?.getBoundingClientRect()??null;const{xSnapped:H,ySnapped:q}=mi(Y.sourceEvent,{transform:te,snapGrid:C,snapToGrid:R,containerBounds:k});A={width:N.measured.width??0,height:N.measured.height??0,x:N.position.x??0,y:N.position.y??0},z={...A,pointerX:H,pointerY:q,aspectRatio:A.width/A.height},O=void 0,N.parentId&&(N.extent==="parent"||N.expandParent)&&(O=Z.get(N.parentId),V=O&&N.extent==="parent"?bM(O):void 0),U=[],G=void 0;for(const[P,X]of Z)if(X.parentId===s&&(U.push({id:P,position:{...X.position},extent:X.extent}),X.extent==="parent"||X.expandParent)){const W=vM(X,N,X.origin??j);G?G=[[Math.min(W[0][0],G[0][0]),Math.min(W[0][1],G[0][1])],[Math.max(W[1][0],G[1][0]),Math.max(W[1][1],G[1][1])]]:G=W}_?.(Y,{...A})}).on("drag",Y=>{const{transform:Z,snapGrid:te,snapToGrid:C,nodeOrigin:R}=l(),j=mi(Y.sourceEvent,{transform:Z,snapGrid:te,snapToGrid:C,containerBounds:k}),D=[];if(!N)return;const{x:H,y:q,width:P,height:X}=A,W={},se=N.origin??R,{width:le,height:de,x:be,y:me}=xM(z,f.controlDirection,j,f.boundaries,f.keepAspectRatio,se,V,G),oe=le!==P,fe=de!==X,we=be!==H&&oe,Ne=me!==q&&fe;if(!we&&!Ne&&!oe&&!fe)return;if((we||Ne||se[0]===1||se[1]===1)&&(W.x=we?be:A.x,W.y=Ne?me:A.y,A.x=W.x,A.y=W.y,U.length>0)){const ie=be-H,ge=me-q;for(const Oe of U)Oe.position={x:Oe.position.x-ie+se[0]*(le-P),y:Oe.position.y-ge+se[1]*(de-X)},D.push(Oe)}if((oe||fe)&&(W.width=oe&&(!f.resizeDirection||f.resizeDirection==="horizontal")?le:A.width,W.height=fe&&(!f.resizeDirection||f.resizeDirection==="vertical")?de:A.height,A.width=W.width,A.height=W.height),O&&N.expandParent){const ie=se[0]*(W.width??0);W.x&&W.x<ie&&(A.x=ie,z.x=z.x-(W.x-ie));const ge=se[1]*(W.height??0);W.y&&W.y<ge&&(A.y=ge,z.y=z.y-(W.y-ge))}const ye=pM({width:A.width,prevWidth:P,height:A.height,prevHeight:X,affectsX:f.controlDirection.affectsX,affectsY:f.controlDirection.affectsY}),_e={...A,direction:ye};E?.(Y,_e)!==!1&&(L=!0,w?.(Y,_e),o(W,D))}).on("end",Y=>{L&&(M?.(Y,{...A}),c?.({...A}),L=!1)});d.call(F)}function p(){d.on(".drag",null)}return{update:h,destroy:p}}const NM={},rp=n=>{let s;const l=new Set,o=(y,x)=>{const v=typeof y=="function"?y(s):y;if(!Object.is(v,s)){const _=s;s=x??(typeof v!="object"||v===null)?v:Object.assign({},s,v),l.forEach(w=>w(s,_))}},c=()=>s,p={setState:o,getState:c,getInitialState:()=>m,subscribe:y=>(l.add(y),()=>l.delete(y)),destroy:()=>{(NM?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),l.clear()}},m=s=n(o,c,p);return p},jM=n=>n?rp(n):rp,{useDebugValue:wM}=ar,{useSyncExternalStoreWithSelector:SM}=e_,kM=n=>n;function sy(n,s=kM,l){const o=SM(n.subscribe,n.getState,n.getServerState||n.getInitialState,s,l);return wM(o),o}const ip=(n,s)=>{const l=jM(n),o=(c,d=s)=>sy(l,c,d);return Object.assign(o,l),o},CM=(n,s)=>n?ip(n,s):ip;function Qe(n,s){if(Object.is(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;if(n instanceof Map&&s instanceof Map){if(n.size!==s.size)return!1;for(const[o,c]of n)if(!Object.is(c,s.get(o)))return!1;return!0}if(n instanceof Set&&s instanceof Set){if(n.size!==s.size)return!1;for(const o of n)if(!s.has(o))return!1;return!0}const l=Object.keys(n);if(l.length!==Object.keys(s).length)return!1;for(const o of l)if(!Object.prototype.hasOwnProperty.call(s,o)||!Object.is(n[o],s[o]))return!1;return!0}const Go=T.createContext(null),zM=Go.Provider,ry=yn.error001();function De(n,s){const l=T.useContext(Go);if(l===null)throw new Error(ry);return sy(l,n,s)}function Fe(){const n=T.useContext(Go);if(n===null)throw new Error(ry);return T.useMemo(()=>({getState:n.getState,setState:n.setState,subscribe:n.subscribe}),[n])}const lp={display:"none"},EM={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},iy="react-flow__node-desc",ly="react-flow__edge-desc",AM="react-flow__aria-live",TM=n=>n.ariaLiveMessage,MM=n=>n.ariaLabelConfig;function DM({rfId:n}){const s=De(TM);return r.jsx("div",{id:`${AM}-${n}`,"aria-live":"assertive","aria-atomic":"true",style:EM,children:s})}function OM({rfId:n,disableKeyboardA11y:s}){const l=De(MM);return r.jsxs(r.Fragment,{children:[r.jsx("div",{id:`${iy}-${n}`,style:lp,children:s?l["node.a11yDescription.default"]:l["node.a11yDescription.keyboardDisabled"]}),r.jsx("div",{id:`${ly}-${n}`,style:lp,children:l["edge.a11yDescription.default"]}),!s&&r.jsx(DM,{rfId:n})]})}const Xo=T.forwardRef(({position:n="top-left",children:s,className:l,style:o,...c},d)=>{const f=`${n}`.split("-");return r.jsx("div",{className:st(["react-flow__panel",l,...f]),style:o,ref:d,...c,children:s})});Xo.displayName="Panel";function LM({proOptions:n,position:s="bottom-right"}){return n?.hideAttribution?null:r.jsx(Xo,{position:s,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:r.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const RM=n=>{const s=[],l=[];for(const[,o]of n.nodeLookup)o.selected&&s.push(o.internals.userNode);for(const[,o]of n.edgeLookup)o.selected&&l.push(o);return{selectedNodes:s,selectedEdges:l}},uo=n=>n.id;function $M(n,s){return Qe(n.selectedNodes.map(uo),s.selectedNodes.map(uo))&&Qe(n.selectedEdges.map(uo),s.selectedEdges.map(uo))}function HM({onSelectionChange:n}){const s=Fe(),{selectedNodes:l,selectedEdges:o}=De(RM,$M);return T.useEffect(()=>{const c={nodes:l,edges:o};n?.(c),s.getState().onSelectionChangeHandlers.forEach(d=>d(c))},[l,o,n]),null}const UM=n=>!!n.onSelectionChangeHandlers;function BM({onSelectionChange:n}){const s=De(UM);return n||s?r.jsx(HM,{onSelectionChange:n}):null}const oy=[0,0],VM={x:0,y:0,zoom:1},qM=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],op=[...qM,"rfId"],YM=n=>({setNodes:n.setNodes,setEdges:n.setEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges}),cp={translateExtent:Ni,nodeOrigin:oy,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function GM(n){const{setNodes:s,setEdges:l,setMinZoom:o,setMaxZoom:c,setTranslateExtent:d,setNodeExtent:f,reset:h,setDefaultNodesAndEdges:p}=De(YM,Qe),m=Fe();T.useEffect(()=>(p(n.defaultNodes,n.defaultEdges),()=>{y.current=cp,h()}),[]);const y=T.useRef(cp);return T.useEffect(()=>{for(const x of op){const v=n[x],_=y.current[x];v!==_&&(typeof n[x]>"u"||(x==="nodes"?s(v):x==="edges"?l(v):x==="minZoom"?o(v):x==="maxZoom"?c(v):x==="translateExtent"?d(v):x==="nodeExtent"?f(v):x==="ariaLabelConfig"?m.setState({ariaLabelConfig:O8(v)}):x==="fitView"?m.setState({fitViewQueued:v}):x==="fitViewOptions"?m.setState({fitViewOptions:v}):m.setState({[x]:v})))}y.current=n},op.map(x=>n[x])),null}function up(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function XM(n){const[s,l]=T.useState(n==="system"?null:n);return T.useEffect(()=>{if(n!=="system"){l(n);return}const o=up(),c=()=>l(o?.matches?"dark":"light");return c(),o?.addEventListener("change",c),()=>{o?.removeEventListener("change",c)}},[n]),s!==null?s:up()?.matches?"dark":"light"}const dp=typeof document<"u"?document:null;function ki(n=null,s={target:dp,actInsideInputWithModifier:!0}){const[l,o]=T.useState(!1),c=T.useRef(!1),d=T.useRef(new Set([])),[f,h]=T.useMemo(()=>{if(n!==null){const m=(Array.isArray(n)?n:[n]).filter(x=>typeof x=="string").map(x=>x.replace("+",`
`).replace(`

`,`
+`).split(`
`)),y=m.reduce((x,v)=>x.concat(...v),[]);return[m,y]}return[[],[]]},[n]);return T.useEffect(()=>{const p=s?.target??dp,m=s?.actInsideInputWithModifier??!0;if(n!==null){const y=_=>{if(c.current=_.ctrlKey||_.metaKey||_.shiftKey||_.altKey,(!c.current||c.current&&!m)&&Bx(_))return!1;const M=gp(_.code,h);if(d.current.add(_[M]),fp(f,d.current,!1)){const E=_.composedPath?.()?.[0]||_.target,A=E?.nodeName==="BUTTON"||E?.nodeName==="A";s.preventDefault!==!1&&(c.current||!A)&&_.preventDefault(),o(!0)}},x=_=>{const w=gp(_.code,h);fp(f,d.current,!0)?(o(!1),d.current.clear()):d.current.delete(_[w]),_.key==="Meta"&&d.current.clear(),c.current=!1},v=()=>{d.current.clear(),o(!1)};return p?.addEventListener("keydown",y),p?.addEventListener("keyup",x),window.addEventListener("blur",v),window.addEventListener("contextmenu",v),()=>{p?.removeEventListener("keydown",y),p?.removeEventListener("keyup",x),window.removeEventListener("blur",v),window.removeEventListener("contextmenu",v)}}},[n,o]),l}function fp(n,s,l){return n.filter(o=>l||o.length===s.size).some(o=>o.every(c=>s.has(c)))}function gp(n,s){return s.includes(n)?"code":"key"}const ZM=()=>{const n=Fe();return T.useMemo(()=>({zoomIn:s=>{const{panZoom:l}=n.getState();return l?l.scaleBy(1.2,{duration:s?.duration}):Promise.resolve(!1)},zoomOut:s=>{const{panZoom:l}=n.getState();return l?l.scaleBy(1/1.2,{duration:s?.duration}):Promise.resolve(!1)},zoomTo:(s,l)=>{const{panZoom:o}=n.getState();return o?o.scaleTo(s,{duration:l?.duration}):Promise.resolve(!1)},getZoom:()=>n.getState().transform[2],setViewport:async(s,l)=>{const{transform:[o,c,d],panZoom:f}=n.getState();return f?(await f.setViewport({x:s.x??o,y:s.y??c,zoom:s.zoom??d},l),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[s,l,o]=n.getState().transform;return{x:s,y:l,zoom:o}},setCenter:async(s,l,o)=>n.getState().setCenter(s,l,o),fitBounds:async(s,l)=>{const{width:o,height:c,minZoom:d,maxZoom:f,panZoom:h}=n.getState(),p=cf(s,o,c,d,f,l?.padding??.1);return h?(await h.setViewport(p,{duration:l?.duration,ease:l?.ease,interpolate:l?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(s,l={})=>{const{transform:o,snapGrid:c,snapToGrid:d,domNode:f}=n.getState();if(!f)return s;const{x:h,y:p}=f.getBoundingClientRect(),m={x:s.x-h,y:s.y-p},y=l.snapGrid??c,x=l.snapToGrid??d;return Oi(m,o,x,y)},flowToScreenPosition:s=>{const{transform:l,domNode:o}=n.getState();if(!o)return s;const{x:c,y:d}=o.getBoundingClientRect(),f=Eo(s,l);return{x:f.x+c,y:f.y+d}}}),[])};function cy(n,s){const l=[],o=new Map,c=[];for(const d of n)if(d.type==="add"){c.push(d);continue}else if(d.type==="remove"||d.type==="replace")o.set(d.id,[d]);else{const f=o.get(d.id);f?f.push(d):o.set(d.id,[d])}for(const d of s){const f=o.get(d.id);if(!f){l.push(d);continue}if(f[0].type==="remove")continue;if(f[0].type==="replace"){l.push({...f[0].item});continue}const h={...d};for(const p of f)QM(p,h);l.push(h)}return c.length&&c.forEach(d=>{d.index!==void 0?l.splice(d.index,0,{...d.item}):l.push({...d.item})}),l}function QM(n,s){switch(n.type){case"select":{s.selected=n.selected;break}case"position":{typeof n.position<"u"&&(s.position=n.position),typeof n.dragging<"u"&&(s.dragging=n.dragging);break}case"dimensions":{typeof n.dimensions<"u"&&(s.measured={...n.dimensions},n.setAttributes&&((n.setAttributes===!0||n.setAttributes==="width")&&(s.width=n.dimensions.width),(n.setAttributes===!0||n.setAttributes==="height")&&(s.height=n.dimensions.height))),typeof n.resizing=="boolean"&&(s.resizing=n.resizing);break}}}function uy(n,s){return cy(n,s)}function dy(n,s){return cy(n,s)}function Pa(n,s){return{id:n,type:"select",selected:s}}function Ps(n,s=new Set,l=!1){const o=[];for(const[c,d]of n){const f=s.has(c);!(d.selected===void 0&&!f)&&d.selected!==f&&(l&&(d.selected=f),o.push(Pa(d.id,f)))}return o}function hp({items:n=[],lookup:s}){const l=[],o=new Map(n.map(c=>[c.id,c]));for(const[c,d]of n.entries()){const f=s.get(d.id),h=f?.internals?.userNode??f;h!==void 0&&h!==d&&l.push({id:d.id,item:d,type:"replace"}),h===void 0&&l.push({item:d,type:"add",index:c})}for(const[c]of s)o.get(c)===void 0&&l.push({id:c,type:"remove"});return l}function mp(n){return{id:n.id,type:"remove"}}const pp=n=>w8(n),FM=n=>Mx(n);function fy(n){return T.forwardRef(n)}const KM=typeof window<"u"?T.useLayoutEffect:T.useEffect;function xp(n){const[s,l]=T.useState(BigInt(0)),[o]=T.useState(()=>IM(()=>l(c=>c+BigInt(1))));return KM(()=>{const c=o.get();c.length&&(n(c),o.reset())},[s]),o}function IM(n){let s=[];return{get:()=>s,reset:()=>{s=[]},push:l=>{s.push(l),n()}}}const gy=T.createContext(null);function JM({children:n}){const s=Fe(),l=T.useCallback(h=>{const{nodes:p=[],setNodes:m,hasDefaultNodes:y,onNodesChange:x,nodeLookup:v,fitViewQueued:_,onNodesChangeMiddlewareMap:w}=s.getState();let M=p;for(const A of h)M=typeof A=="function"?A(M):A;let E=hp({items:M,lookup:v});for(const A of w.values())E=A(E);y&&m(M),E.length>0?x?.(E):_&&window.requestAnimationFrame(()=>{const{fitViewQueued:A,nodes:z,setNodes:N}=s.getState();A&&N(z)})},[]),o=xp(l),c=T.useCallback(h=>{const{edges:p=[],setEdges:m,hasDefaultEdges:y,onEdgesChange:x,edgeLookup:v}=s.getState();let _=p;for(const w of h)_=typeof w=="function"?w(_):w;y?m(_):x&&x(hp({items:_,lookup:v}))},[]),d=xp(c),f=T.useMemo(()=>({nodeQueue:o,edgeQueue:d}),[]);return r.jsx(gy.Provider,{value:f,children:n})}function WM(){const n=T.useContext(gy);if(!n)throw new Error("useBatchContext must be used within a BatchProvider");return n}const PM=n=>!!n.panZoom;function Zo(){const n=ZM(),s=Fe(),l=WM(),o=De(PM),c=T.useMemo(()=>{const d=x=>s.getState().nodeLookup.get(x),f=x=>{l.nodeQueue.push(x)},h=x=>{l.edgeQueue.push(x)},p=x=>{const{nodeLookup:v,nodeOrigin:_}=s.getState(),w=pp(x)?x:v.get(x.id),M=w.parentId?Hx(w.position,w.measured,w.parentId,v,_):w.position,E={...w,position:M,width:w.measured?.width??w.width,height:w.measured?.height??w.height};return or(E)},m=(x,v,_={replace:!1})=>{f(w=>w.map(M=>{if(M.id===x){const E=typeof v=="function"?v(M):v;return _.replace&&pp(E)?E:{...M,...E}}return M}))},y=(x,v,_={replace:!1})=>{h(w=>w.map(M=>{if(M.id===x){const E=typeof v=="function"?v(M):v;return _.replace&&FM(E)?E:{...M,...E}}return M}))};return{getNodes:()=>s.getState().nodes.map(x=>({...x})),getNode:x=>d(x)?.internals.userNode,getInternalNode:d,getEdges:()=>{const{edges:x=[]}=s.getState();return x.map(v=>({...v}))},getEdge:x=>s.getState().edgeLookup.get(x),setNodes:f,setEdges:h,addNodes:x=>{const v=Array.isArray(x)?x:[x];l.nodeQueue.push(_=>[..._,...v])},addEdges:x=>{const v=Array.isArray(x)?x:[x];l.edgeQueue.push(_=>[..._,...v])},toObject:()=>{const{nodes:x=[],edges:v=[],transform:_}=s.getState(),[w,M,E]=_;return{nodes:x.map(A=>({...A})),edges:v.map(A=>({...A})),viewport:{x:w,y:M,zoom:E}}},deleteElements:async({nodes:x=[],edges:v=[]})=>{const{nodes:_,edges:w,onNodesDelete:M,onEdgesDelete:E,triggerNodeChanges:A,triggerEdgeChanges:z,onDelete:N,onBeforeDelete:k}=s.getState(),{nodes:U,edges:O}=await E8({nodesToRemove:x,edgesToRemove:v,nodes:_,edges:w,onBeforeDelete:k}),V=O.length>0,G=U.length>0;if(V){const L=O.map(mp);E?.(O),z(L)}if(G){const L=U.map(mp);M?.(U),A(L)}return(G||V)&&N?.({nodes:U,edges:O}),{deletedNodes:U,deletedEdges:O}},getIntersectingNodes:(x,v=!0,_)=>{const w=Z0(x),M=w?x:p(x),E=_!==void 0;return M?(_||s.getState().nodes).filter(A=>{const z=s.getState().nodeLookup.get(A.id);if(z&&!w&&(A.id===x.id||!z.internals.positionAbsolute))return!1;const N=or(E?A:z),k=wi(N,M);return v&&k>0||k>=N.width*N.height||k>=M.width*M.height}):[]},isNodeIntersecting:(x,v,_=!0)=>{const M=Z0(x)?x:p(x);if(!M)return!1;const E=wi(M,v);return _&&E>0||E>=v.width*v.height||E>=M.width*M.height},updateNode:m,updateNodeData:(x,v,_={replace:!1})=>{m(x,w=>{const M=typeof v=="function"?v(w):v;return _.replace?{...w,data:M}:{...w,data:{...w.data,...M}}},_)},updateEdge:y,updateEdgeData:(x,v,_={replace:!1})=>{y(x,w=>{const M=typeof v=="function"?v(w):v;return _.replace?{...w,data:M}:{...w,data:{...w.data,...M}}},_)},getNodesBounds:x=>{const{nodeLookup:v,nodeOrigin:_}=s.getState();return S8(x,{nodeLookup:v,nodeOrigin:_})},getHandleConnections:({type:x,id:v,nodeId:_})=>Array.from(s.getState().connectionLookup.get(`${_}-${x}${v?`-${v}`:""}`)?.values()??[]),getNodeConnections:({type:x,handleId:v,nodeId:_})=>Array.from(s.getState().connectionLookup.get(`${_}${x?v?`-${x}-${v}`:`-${x}`:""}`)?.values()??[]),fitView:async x=>{const v=s.getState().fitViewResolver??D8();return s.setState({fitViewQueued:!0,fitViewOptions:x,fitViewResolver:v}),l.nodeQueue.push(_=>[..._]),v.promise}}},[]);return T.useMemo(()=>({...c,...n,viewportInitialized:o}),[o])}const yp=n=>n.selected,eD=typeof window<"u"?window:void 0;function tD({deleteKeyCode:n,multiSelectionKeyCode:s}){const l=Fe(),{deleteElements:o}=Zo(),c=ki(n,{actInsideInputWithModifier:!1}),d=ki(s,{target:eD});T.useEffect(()=>{if(c){const{edges:f,nodes:h}=l.getState();o({nodes:h.filter(yp),edges:f.filter(yp)}),l.setState({nodesSelectionActive:!1})}},[c]),T.useEffect(()=>{l.setState({multiSelectionActive:d})},[d])}function nD(n){const s=Fe();T.useEffect(()=>{const l=()=>{if(!n.current||!(n.current.checkVisibility?.()??!0))return!1;const o=uf(n.current);(o.height===0||o.width===0)&&s.getState().onError?.("004",yn.error004()),s.setState({width:o.width||500,height:o.height||500})};if(n.current){l(),window.addEventListener("resize",l);const o=new ResizeObserver(()=>l());return o.observe(n.current),()=>{window.removeEventListener("resize",l),o&&n.current&&o.unobserve(n.current)}}},[])}const Qo={position:"absolute",width:"100%",height:"100%",top:0,left:0},aD=n=>({userSelectionActive:n.userSelectionActive,lib:n.lib,connectionInProgress:n.connection.inProgress});function sD({onPaneContextMenu:n,zoomOnScroll:s=!0,zoomOnPinch:l=!0,panOnScroll:o=!1,panOnScrollSpeed:c=.5,panOnScrollMode:d=es.Free,zoomOnDoubleClick:f=!0,panOnDrag:h=!0,defaultViewport:p,translateExtent:m,minZoom:y,maxZoom:x,zoomActivationKeyCode:v,preventScrolling:_=!0,children:w,noWheelClassName:M,noPanClassName:E,onViewportChange:A,isControlledViewport:z,paneClickDistance:N,selectionOnDrag:k}){const U=Fe(),O=T.useRef(null),{userSelectionActive:V,lib:G,connectionInProgress:L}=De(aD,Qe),F=ki(v),Y=T.useRef();nD(O);const Z=T.useCallback(te=>{A?.({x:te[0],y:te[1],zoom:te[2]}),z||U.setState({transform:te})},[A,z]);return T.useEffect(()=>{if(O.current){Y.current=mM({domNode:O.current,minZoom:y,maxZoom:x,translateExtent:m,viewport:p,onDraggingChange:j=>U.setState({paneDragging:j}),onPanZoomStart:(j,D)=>{const{onViewportChangeStart:H,onMoveStart:q}=U.getState();q?.(j,D),H?.(D)},onPanZoom:(j,D)=>{const{onViewportChange:H,onMove:q}=U.getState();q?.(j,D),H?.(D)},onPanZoomEnd:(j,D)=>{const{onViewportChangeEnd:H,onMoveEnd:q}=U.getState();q?.(j,D),H?.(D)}});const{x:te,y:C,zoom:R}=Y.current.getViewport();return U.setState({panZoom:Y.current,transform:[te,C,R],domNode:O.current.closest(".react-flow")}),()=>{Y.current?.destroy()}}},[]),T.useEffect(()=>{Y.current?.update({onPaneContextMenu:n,zoomOnScroll:s,zoomOnPinch:l,panOnScroll:o,panOnScrollSpeed:c,panOnScrollMode:d,zoomOnDoubleClick:f,panOnDrag:h,zoomActivationKeyPressed:F,preventScrolling:_,noPanClassName:E,userSelectionActive:V,noWheelClassName:M,lib:G,onTransformChange:Z,connectionInProgress:L,selectionOnDrag:k,paneClickDistance:N})},[n,s,l,o,c,d,f,h,F,_,E,V,M,G,Z,L,k,N]),r.jsx("div",{className:"react-flow__renderer",ref:O,style:Qo,children:w})}const rD=n=>({userSelectionActive:n.userSelectionActive,userSelectionRect:n.userSelectionRect});function iD(){const{userSelectionActive:n,userSelectionRect:s}=De(rD,Qe);return n&&s?r.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:s.width,height:s.height,transform:`translate(${s.x}px, ${s.y}px)`}}):null}const Ed=(n,s)=>l=>{l.target===s.current&&n?.(l)},lD=n=>({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable,connectionInProgress:n.connection.inProgress,dragging:n.paneDragging});function oD({isSelecting:n,selectionKeyPressed:s,selectionMode:l=ji.Full,panOnDrag:o,paneClickDistance:c,selectionOnDrag:d,onSelectionStart:f,onSelectionEnd:h,onPaneClick:p,onPaneContextMenu:m,onPaneScroll:y,onPaneMouseEnter:x,onPaneMouseMove:v,onPaneMouseLeave:_,children:w}){const M=Fe(),{userSelectionActive:E,elementsSelectable:A,dragging:z,connectionInProgress:N}=De(lD,Qe),k=A&&(n||E),U=T.useRef(null),O=T.useRef(),V=T.useRef(new Set),G=T.useRef(new Set),L=T.useRef(!1),F=H=>{if(L.current||N){L.current=!1;return}p?.(H),M.getState().resetSelectedElements(),M.setState({nodesSelectionActive:!1})},Y=H=>{if(Array.isArray(o)&&o?.includes(2)){H.preventDefault();return}m?.(H)},Z=y?H=>y(H):void 0,te=H=>{L.current&&(H.stopPropagation(),L.current=!1)},C=H=>{const{domNode:q}=M.getState();if(O.current=q?.getBoundingClientRect(),!O.current)return;const P=H.target===U.current;if(!P&&!!H.target.closest(".nokey")||!n||!(d&&P||s)||H.button!==0||!H.isPrimary)return;H.target?.setPointerCapture?.(H.pointerId),L.current=!1;const{x:se,y:le}=an(H.nativeEvent,O.current);M.setState({userSelectionRect:{width:0,height:0,startX:se,startY:le,x:se,y:le}}),P||(H.stopPropagation(),H.preventDefault())},R=H=>{const{userSelectionRect:q,transform:P,nodeLookup:X,edgeLookup:W,connectionLookup:se,triggerNodeChanges:le,triggerEdgeChanges:de,defaultEdgeOptions:be,resetSelectedElements:me}=M.getState();if(!O.current||!q)return;const{x:oe,y:fe}=an(H.nativeEvent,O.current),{startX:we,startY:Ne}=q;if(!L.current){const ge=s?0:c;if(Math.hypot(oe-we,fe-Ne)<=ge)return;me(),f?.(H)}L.current=!0;const ye={startX:we,startY:Ne,x:oe<we?oe:we,y:fe<Ne?fe:Ne,width:Math.abs(oe-we),height:Math.abs(fe-Ne)},_e=V.current,Ce=G.current;V.current=new Set(of(X,ye,P,l===ji.Partial,!0).map(ge=>ge.id)),G.current=new Set;const ie=be?.selectable??!0;for(const ge of V.current){const Oe=se.get(ge);if(Oe)for(const{edgeId:rt}of Oe.values()){const Tt=W.get(rt);Tt&&(Tt.selectable??ie)&&G.current.add(rt)}}if(!Q0(_e,V.current)){const ge=Ps(X,V.current,!0);le(ge)}if(!Q0(Ce,G.current)){const ge=Ps(W,G.current);de(ge)}M.setState({userSelectionRect:ye,userSelectionActive:!0,nodesSelectionActive:!1})},j=H=>{H.button===0&&(H.target?.releasePointerCapture?.(H.pointerId),!E&&H.target===U.current&&M.getState().userSelectionRect&&F?.(H),M.setState({userSelectionActive:!1,userSelectionRect:null}),L.current&&(h?.(H),M.setState({nodesSelectionActive:V.current.size>0})))},D=o===!0||Array.isArray(o)&&o.includes(0);return r.jsxs("div",{className:st(["react-flow__pane",{draggable:D,dragging:z,selection:n}]),onClick:k?void 0:Ed(F,U),onContextMenu:Ed(Y,U),onWheel:Ed(Z,U),onPointerEnter:k?void 0:x,onPointerMove:k?R:v,onPointerUp:k?j:void 0,onPointerDownCapture:k?C:void 0,onClickCapture:k?te:void 0,onPointerLeave:_,ref:U,style:Qo,children:[w,r.jsx(iD,{})]})}function Fd({id:n,store:s,unselect:l=!1,nodeRef:o}){const{addSelectedNodes:c,unselectNodesAndEdges:d,multiSelectionActive:f,nodeLookup:h,onError:p}=s.getState(),m=h.get(n);if(!m){p?.("012",yn.error012(n));return}s.setState({nodesSelectionActive:!1}),m.selected?(l||m.selected&&f)&&(d({nodes:[m],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):c([n])}function hy({nodeRef:n,disabled:s=!1,noDragClassName:l,handleSelector:o,nodeId:c,isSelectable:d,nodeClickDistance:f}){const h=Fe(),[p,m]=T.useState(!1),y=T.useRef();return T.useEffect(()=>{y.current=tM({getStoreItems:()=>h.getState(),onNodeMouseDown:x=>{Fd({id:x,store:h,nodeRef:n})},onDragStart:()=>{m(!0)},onDragStop:()=>{m(!1)}})},[]),T.useEffect(()=>{if(s)y.current?.destroy();else if(n.current)return y.current?.update({noDragClassName:l,handleSelector:o,domNode:n.current,isSelectable:d,nodeId:c,nodeClickDistance:f}),()=>{y.current?.destroy()}},[l,o,s,d,n,c]),p}const cD=n=>s=>s.selected&&(s.draggable||n&&typeof s.draggable>"u");function my(){const n=Fe();return T.useCallback(l=>{const{nodeExtent:o,snapToGrid:c,snapGrid:d,nodesDraggable:f,onError:h,updateNodePositions:p,nodeLookup:m,nodeOrigin:y}=n.getState(),x=new Map,v=cD(f),_=c?d[0]:5,w=c?d[1]:5,M=l.direction.x*_*l.factor,E=l.direction.y*w*l.factor;for(const[,A]of m){if(!v(A))continue;let z={x:A.internals.positionAbsolute.x+M,y:A.internals.positionAbsolute.y+E};c&&(z=Di(z,d));const{position:N,positionAbsolute:k}=Dx({nodeId:A.id,nextPosition:z,nodeLookup:m,nodeExtent:o,nodeOrigin:y,onError:h});A.position=N,A.internals.positionAbsolute=k,x.set(A.id,A)}p(x)},[])}const pf=T.createContext(null),uD=pf.Provider;pf.Consumer;const py=()=>T.useContext(pf),dD=n=>({connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName,rfId:n.rfId}),fD=(n,s,l)=>o=>{const{connectionClickStartHandle:c,connectionMode:d,connection:f}=o,{fromHandle:h,toHandle:p,isValid:m}=f,y=p?.nodeId===n&&p?.id===s&&p?.type===l;return{connectingFrom:h?.nodeId===n&&h?.id===s&&h?.type===l,connectingTo:y,clickConnecting:c?.nodeId===n&&c?.id===s&&c?.type===l,isPossibleEndHandle:d===ir.Strict?h?.type!==l:n!==h?.nodeId||s!==h?.id,connectionInProcess:!!h,clickConnectionInProcess:!!c,valid:y&&m}};function gD({type:n="source",position:s=pe.Top,isValidConnection:l,isConnectable:o=!0,isConnectableStart:c=!0,isConnectableEnd:d=!0,id:f,onConnect:h,children:p,className:m,onMouseDown:y,onTouchStart:x,...v},_){const w=f||null,M=n==="target",E=Fe(),A=py(),{connectOnClick:z,noPanClassName:N,rfId:k}=De(dD,Qe),{connectingFrom:U,connectingTo:O,clickConnecting:V,isPossibleEndHandle:G,connectionInProcess:L,clickConnectionInProcess:F,valid:Y}=De(fD(A,w,n),Qe);A||E.getState().onError?.("010",yn.error010());const Z=R=>{const{defaultEdgeOptions:j,onConnect:D,hasDefaultEdges:H}=E.getState(),q={...j,...R};if(H){const{edges:P,setEdges:X}=E.getState();X(Xx(q,P))}D?.(q),h?.(q)},te=R=>{if(!A)return;const j=Vx(R.nativeEvent);if(c&&(j&&R.button===0||!j)){const D=E.getState();Qd.onPointerDown(R.nativeEvent,{handleDomNode:R.currentTarget,autoPanOnConnect:D.autoPanOnConnect,connectionMode:D.connectionMode,connectionRadius:D.connectionRadius,domNode:D.domNode,nodeLookup:D.nodeLookup,lib:D.lib,isTarget:M,handleId:w,nodeId:A,flowId:D.rfId,panBy:D.panBy,cancelConnection:D.cancelConnection,onConnectStart:D.onConnectStart,onConnectEnd:D.onConnectEnd,updateConnection:D.updateConnection,onConnect:Z,isValidConnection:l||D.isValidConnection,getTransform:()=>E.getState().transform,getFromHandle:()=>E.getState().connection.fromHandle,autoPanSpeed:D.autoPanSpeed,dragThreshold:D.connectionDragThreshold})}j?y?.(R):x?.(R)},C=R=>{const{onClickConnectStart:j,onClickConnectEnd:D,connectionClickStartHandle:H,connectionMode:q,isValidConnection:P,lib:X,rfId:W,nodeLookup:se,connection:le}=E.getState();if(!A||!H&&!c)return;if(!H){j?.(R.nativeEvent,{nodeId:A,handleId:w,handleType:n}),E.setState({connectionClickStartHandle:{nodeId:A,type:n,id:w}});return}const de=Ux(R.target),be=l||P,{connection:me,isValid:oe}=Qd.isValid(R.nativeEvent,{handle:{nodeId:A,id:w,type:n},connectionMode:q,fromNodeId:H.nodeId,fromHandleId:H.id||null,fromType:H.type,isValidConnection:be,flowId:W,doc:de,lib:X,nodeLookup:se});oe&&me&&Z(me);const fe=structuredClone(le);delete fe.inProgress,fe.toPosition=fe.toHandle?fe.toHandle.position:null,D?.(R,fe),E.setState({connectionClickStartHandle:null})};return r.jsx("div",{"data-handleid":w,"data-nodeid":A,"data-handlepos":s,"data-id":`${k}-${A}-${w}-${n}`,className:st(["react-flow__handle",`react-flow__handle-${s}`,"nodrag",N,m,{source:!M,target:M,connectable:o,connectablestart:c,connectableend:d,clickconnecting:V,connectingfrom:U,connectingto:O,valid:Y,connectionindicator:o&&(!L||G)&&(L||F?d:c)}]),onMouseDown:te,onTouchStart:te,onClick:z?C:void 0,ref:_,...v,children:p})}const xn=T.memo(fy(gD));function hD({data:n,isConnectable:s,sourcePosition:l=pe.Bottom}){return r.jsxs(r.Fragment,{children:[n?.label,r.jsx(xn,{type:"source",position:l,isConnectable:s})]})}function mD({data:n,isConnectable:s,targetPosition:l=pe.Top,sourcePosition:o=pe.Bottom}){return r.jsxs(r.Fragment,{children:[r.jsx(xn,{type:"target",position:l,isConnectable:s}),n?.label,r.jsx(xn,{type:"source",position:o,isConnectable:s})]})}function pD(){return null}function xD({data:n,isConnectable:s,targetPosition:l=pe.Top}){return r.jsxs(r.Fragment,{children:[r.jsx(xn,{type:"target",position:l,isConnectable:s}),n?.label]})}const Ao={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},bp={input:hD,default:mD,output:xD,group:pD};function yD(n){return n.internals.handleBounds===void 0?{width:n.width??n.initialWidth??n.style?.width,height:n.height??n.initialHeight??n.style?.height}:{width:n.width??n.style?.width,height:n.height??n.style?.height}}const bD=n=>{const{width:s,height:l,x:o,y:c}=Mi(n.nodeLookup,{filter:d=>!!d.selected});return{width:nn(s)?s:null,height:nn(l)?l:null,userSelectionActive:n.userSelectionActive,transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]}) translate(${o}px,${c}px)`}};function vD({onSelectionContextMenu:n,noPanClassName:s,disableKeyboardA11y:l}){const o=Fe(),{width:c,height:d,transformString:f,userSelectionActive:h}=De(bD,Qe),p=my(),m=T.useRef(null);if(T.useEffect(()=>{l||m.current?.focus({preventScroll:!0})},[l]),hy({nodeRef:m}),h||!c||!d)return null;const y=n?v=>{const _=o.getState().nodes.filter(w=>w.selected);n(v,_)}:void 0,x=v=>{Object.prototype.hasOwnProperty.call(Ao,v.key)&&(v.preventDefault(),p({direction:Ao[v.key],factor:v.shiftKey?4:1}))};return r.jsx("div",{className:st(["react-flow__nodesselection","react-flow__container",s]),style:{transform:f},children:r.jsx("div",{ref:m,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:l?void 0:-1,onKeyDown:l?void 0:x,style:{width:c,height:d}})})}const vp=typeof window<"u"?window:void 0,_D=n=>({nodesSelectionActive:n.nodesSelectionActive,userSelectionActive:n.userSelectionActive});function xy({children:n,onPaneClick:s,onPaneMouseEnter:l,onPaneMouseMove:o,onPaneMouseLeave:c,onPaneContextMenu:d,onPaneScroll:f,paneClickDistance:h,deleteKeyCode:p,selectionKeyCode:m,selectionOnDrag:y,selectionMode:x,onSelectionStart:v,onSelectionEnd:_,multiSelectionKeyCode:w,panActivationKeyCode:M,zoomActivationKeyCode:E,elementsSelectable:A,zoomOnScroll:z,zoomOnPinch:N,panOnScroll:k,panOnScrollSpeed:U,panOnScrollMode:O,zoomOnDoubleClick:V,panOnDrag:G,defaultViewport:L,translateExtent:F,minZoom:Y,maxZoom:Z,preventScrolling:te,onSelectionContextMenu:C,noWheelClassName:R,noPanClassName:j,disableKeyboardA11y:D,onViewportChange:H,isControlledViewport:q}){const{nodesSelectionActive:P,userSelectionActive:X}=De(_D,Qe),W=ki(m,{target:vp}),se=ki(M,{target:vp}),le=se||G,de=se||k,be=y&&le!==!0,me=W||X||be;return tD({deleteKeyCode:p,multiSelectionKeyCode:w}),r.jsx(sD,{onPaneContextMenu:d,elementsSelectable:A,zoomOnScroll:z,zoomOnPinch:N,panOnScroll:de,panOnScrollSpeed:U,panOnScrollMode:O,zoomOnDoubleClick:V,panOnDrag:!W&&le,defaultViewport:L,translateExtent:F,minZoom:Y,maxZoom:Z,zoomActivationKeyCode:E,preventScrolling:te,noWheelClassName:R,noPanClassName:j,onViewportChange:H,isControlledViewport:q,paneClickDistance:h,selectionOnDrag:be,children:r.jsxs(oD,{onSelectionStart:v,onSelectionEnd:_,onPaneClick:s,onPaneMouseEnter:l,onPaneMouseMove:o,onPaneMouseLeave:c,onPaneContextMenu:d,onPaneScroll:f,panOnDrag:le,isSelecting:!!me,selectionMode:x,selectionKeyPressed:W,paneClickDistance:h,selectionOnDrag:be,children:[n,P&&r.jsx(vD,{onSelectionContextMenu:C,noPanClassName:j,disableKeyboardA11y:D})]})})}xy.displayName="FlowRenderer";const ND=T.memo(xy),jD=n=>s=>n?of(s.nodeLookup,{x:0,y:0,width:s.width,height:s.height},s.transform,!0).map(l=>l.id):Array.from(s.nodeLookup.keys());function wD(n){return De(T.useCallback(jD(n),[n]),Qe)}const SD=n=>n.updateNodeInternals;function kD(){const n=De(SD),[s]=T.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(l=>{const o=new Map;l.forEach(c=>{const d=c.target.getAttribute("data-id");o.set(d,{id:d,nodeElement:c.target,force:!0})}),n(o)}));return T.useEffect(()=>()=>{s?.disconnect()},[s]),s}function CD({node:n,nodeType:s,hasDimensions:l,resizeObserver:o}){const c=Fe(),d=T.useRef(null),f=T.useRef(null),h=T.useRef(n.sourcePosition),p=T.useRef(n.targetPosition),m=T.useRef(s),y=l&&!!n.internals.handleBounds;return T.useEffect(()=>{d.current&&!n.hidden&&(!y||f.current!==d.current)&&(f.current&&o?.unobserve(f.current),o?.observe(d.current),f.current=d.current)},[y,n.hidden]),T.useEffect(()=>()=>{f.current&&(o?.unobserve(f.current),f.current=null)},[]),T.useEffect(()=>{if(d.current){const x=m.current!==s,v=h.current!==n.sourcePosition,_=p.current!==n.targetPosition;(x||v||_)&&(m.current=s,h.current=n.sourcePosition,p.current=n.targetPosition,c.getState().updateNodeInternals(new Map([[n.id,{id:n.id,nodeElement:d.current,force:!0}]])))}},[n.id,s,n.sourcePosition,n.targetPosition]),d}function zD({id:n,onClick:s,onMouseEnter:l,onMouseMove:o,onMouseLeave:c,onContextMenu:d,onDoubleClick:f,nodesDraggable:h,elementsSelectable:p,nodesConnectable:m,nodesFocusable:y,resizeObserver:x,noDragClassName:v,noPanClassName:_,disableKeyboardA11y:w,rfId:M,nodeTypes:E,nodeClickDistance:A,onError:z}){const{node:N,internals:k,isParent:U}=De(oe=>{const fe=oe.nodeLookup.get(n),we=oe.parentLookup.has(n);return{node:fe,internals:fe.internals,isParent:we}},Qe);let O=N.type||"default",V=E?.[O]||bp[O];V===void 0&&(z?.("003",yn.error003(O)),O="default",V=E?.default||bp.default);const G=!!(N.draggable||h&&typeof N.draggable>"u"),L=!!(N.selectable||p&&typeof N.selectable>"u"),F=!!(N.connectable||m&&typeof N.connectable>"u"),Y=!!(N.focusable||y&&typeof N.focusable>"u"),Z=Fe(),te=$x(N),C=CD({node:N,nodeType:O,hasDimensions:te,resizeObserver:x}),R=hy({nodeRef:C,disabled:N.hidden||!G,noDragClassName:v,handleSelector:N.dragHandle,nodeId:n,isSelectable:L,nodeClickDistance:A}),j=my();if(N.hidden)return null;const D=Zn(N),H=yD(N),q=L||G||s||l||o||c,P=l?oe=>l(oe,{...k.userNode}):void 0,X=o?oe=>o(oe,{...k.userNode}):void 0,W=c?oe=>c(oe,{...k.userNode}):void 0,se=d?oe=>d(oe,{...k.userNode}):void 0,le=f?oe=>f(oe,{...k.userNode}):void 0,de=oe=>{const{selectNodesOnDrag:fe,nodeDragThreshold:we}=Z.getState();L&&(!fe||!G||we>0)&&Fd({id:n,store:Z,nodeRef:C}),s&&s(oe,{...k.userNode})},be=oe=>{if(!(Bx(oe.nativeEvent)||w)){if(zx.includes(oe.key)&&L){const fe=oe.key==="Escape";Fd({id:n,store:Z,unselect:fe,nodeRef:C})}else if(G&&N.selected&&Object.prototype.hasOwnProperty.call(Ao,oe.key)){oe.preventDefault();const{ariaLabelConfig:fe}=Z.getState();Z.setState({ariaLiveMessage:fe["node.a11yDescription.ariaLiveMessage"]({direction:oe.key.replace("Arrow","").toLowerCase(),x:~~k.positionAbsolute.x,y:~~k.positionAbsolute.y})}),j({direction:Ao[oe.key],factor:oe.shiftKey?4:1})}}},me=()=>{if(w||!C.current?.matches(":focus-visible"))return;const{transform:oe,width:fe,height:we,autoPanOnNodeFocus:Ne,setCenter:ye}=Z.getState();if(!Ne)return;of(new Map([[n,N]]),{x:0,y:0,width:fe,height:we},oe,!0).length>0||ye(N.position.x+D.width/2,N.position.y+D.height/2,{zoom:oe[2]})};return r.jsx("div",{className:st(["react-flow__node",`react-flow__node-${O}`,{[_]:G},N.className,{selected:N.selected,selectable:L,parent:U,draggable:G,dragging:R}]),ref:C,style:{zIndex:k.z,transform:`translate(${k.positionAbsolute.x}px,${k.positionAbsolute.y}px)`,pointerEvents:q?"all":"none",visibility:te?"visible":"hidden",...N.style,...H},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:P,onMouseMove:X,onMouseLeave:W,onContextMenu:se,onClick:de,onDoubleClick:le,onKeyDown:Y?be:void 0,tabIndex:Y?0:void 0,onFocus:Y?me:void 0,role:N.ariaRole??(Y?"group":void 0),"aria-roledescription":"node","aria-describedby":w?void 0:`${iy}-${M}`,"aria-label":N.ariaLabel,...N.domAttributes,children:r.jsx(uD,{value:n,children:r.jsx(V,{id:n,data:N.data,type:O,positionAbsoluteX:k.positionAbsolute.x,positionAbsoluteY:k.positionAbsolute.y,selected:N.selected??!1,selectable:L,draggable:G,deletable:N.deletable??!0,isConnectable:F,sourcePosition:N.sourcePosition,targetPosition:N.targetPosition,dragging:R,dragHandle:N.dragHandle,zIndex:k.z,parentId:N.parentId,...D})})})}var ED=T.memo(zD);const AD=n=>({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,onError:n.onError});function yy(n){const{nodesDraggable:s,nodesConnectable:l,nodesFocusable:o,elementsSelectable:c,onError:d}=De(AD,Qe),f=wD(n.onlyRenderVisibleElements),h=kD();return r.jsx("div",{className:"react-flow__nodes",style:Qo,children:f.map(p=>r.jsx(ED,{id:p,nodeTypes:n.nodeTypes,nodeExtent:n.nodeExtent,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,resizeObserver:h,nodesDraggable:s,nodesConnectable:l,nodesFocusable:o,elementsSelectable:c,nodeClickDistance:n.nodeClickDistance,onError:d},p))})}yy.displayName="NodeRenderer";const TD=T.memo(yy);function MD(n){return De(T.useCallback(l=>{if(!n)return l.edges.map(c=>c.id);const o=[];if(l.width&&l.height)for(const c of l.edges){const d=l.nodeLookup.get(c.source),f=l.nodeLookup.get(c.target);d&&f&&$8({sourceNode:d,targetNode:f,width:l.width,height:l.height,transform:l.transform})&&o.push(c.id)}return o},[n]),Qe)}const DD=({color:n="none",strokeWidth:s=1})=>{const l={strokeWidth:s,...n&&{stroke:n}};return r.jsx("polyline",{className:"arrow",style:l,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},OD=({color:n="none",strokeWidth:s=1})=>{const l={strokeWidth:s,...n&&{stroke:n,fill:n}};return r.jsx("polyline",{className:"arrowclosed",style:l,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},_p={[Co.Arrow]:DD,[Co.ArrowClosed]:OD};function LD(n){const s=Fe();return T.useMemo(()=>Object.prototype.hasOwnProperty.call(_p,n)?_p[n]:(s.getState().onError?.("009",yn.error009(n)),null),[n])}const RD=({id:n,type:s,color:l,width:o=12.5,height:c=12.5,markerUnits:d="strokeWidth",strokeWidth:f,orient:h="auto-start-reverse"})=>{const p=LD(s);return p?r.jsx("marker",{className:"react-flow__arrowhead",id:n,markerWidth:`${o}`,markerHeight:`${c}`,viewBox:"-10 -10 20 20",markerUnits:d,orient:h,refX:"0",refY:"0",children:r.jsx(p,{color:l,strokeWidth:f})}):null},by=({defaultColor:n,rfId:s})=>{const l=De(d=>d.edges),o=De(d=>d.defaultEdgeOptions),c=T.useMemo(()=>G8(l,{id:s,defaultColor:n,defaultMarkerStart:o?.markerStart,defaultMarkerEnd:o?.markerEnd}),[l,o,s,n]);return c.length?r.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:r.jsx("defs",{children:c.map(d=>r.jsx(RD,{id:d.id,type:d.type,color:d.color,width:d.width,height:d.height,markerUnits:d.markerUnits,strokeWidth:d.strokeWidth,orient:d.orient},d.id))})}):null};by.displayName="MarkerDefinitions";var $D=T.memo(by);function vy({x:n,y:s,label:l,labelStyle:o,labelShowBg:c=!0,labelBgStyle:d,labelBgPadding:f=[2,4],labelBgBorderRadius:h=2,children:p,className:m,...y}){const[x,v]=T.useState({x:1,y:0,width:0,height:0}),_=st(["react-flow__edge-textwrapper",m]),w=T.useRef(null);return T.useEffect(()=>{if(w.current){const M=w.current.getBBox();v({x:M.x,y:M.y,width:M.width,height:M.height})}},[l]),l?r.jsxs("g",{transform:`translate(${n-x.width/2} ${s-x.height/2})`,className:_,visibility:x.width?"visible":"hidden",...y,children:[c&&r.jsx("rect",{width:x.width+2*f[0],x:-f[0],y:-f[1],height:x.height+2*f[1],className:"react-flow__edge-textbg",style:d,rx:h,ry:h}),r.jsx("text",{className:"react-flow__edge-text",y:x.height/2,dy:"0.3em",ref:w,style:o,children:l}),p]}):null}vy.displayName="EdgeText";const HD=T.memo(vy);function Fo({path:n,labelX:s,labelY:l,label:o,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,interactionWidth:m=20,...y}){return r.jsxs(r.Fragment,{children:[r.jsx("path",{...y,d:n,fill:"none",className:st(["react-flow__edge-path",y.className])}),m?r.jsx("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}):null,o&&nn(s)&&nn(l)?r.jsx(HD,{x:s,y:l,label:o,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p}):null]})}function Np({pos:n,x1:s,y1:l,x2:o,y2:c}){return n===pe.Left||n===pe.Right?[.5*(s+o),l]:[s,.5*(l+c)]}function _y({sourceX:n,sourceY:s,sourcePosition:l=pe.Bottom,targetX:o,targetY:c,targetPosition:d=pe.Top}){const[f,h]=Np({pos:l,x1:n,y1:s,x2:o,y2:c}),[p,m]=Np({pos:d,x1:o,y1:c,x2:n,y2:s}),[y,x,v,_]=qx({sourceX:n,sourceY:s,targetX:o,targetY:c,sourceControlX:f,sourceControlY:h,targetControlX:p,targetControlY:m});return[`M${n},${s} C${f},${h} ${p},${m} ${o},${c}`,y,x,v,_]}function Ny(n){return T.memo(({id:s,sourceX:l,sourceY:o,targetX:c,targetY:d,sourcePosition:f,targetPosition:h,label:p,labelStyle:m,labelShowBg:y,labelBgStyle:x,labelBgPadding:v,labelBgBorderRadius:_,style:w,markerEnd:M,markerStart:E,interactionWidth:A})=>{const[z,N,k]=_y({sourceX:l,sourceY:o,sourcePosition:f,targetX:c,targetY:d,targetPosition:h}),U=n.isInternal?void 0:s;return r.jsx(Fo,{id:U,path:z,labelX:N,labelY:k,label:p,labelStyle:m,labelShowBg:y,labelBgStyle:x,labelBgPadding:v,labelBgBorderRadius:_,style:w,markerEnd:M,markerStart:E,interactionWidth:A})})}const UD=Ny({isInternal:!1}),jy=Ny({isInternal:!0});UD.displayName="SimpleBezierEdge";jy.displayName="SimpleBezierEdgeInternal";function wy(n){return T.memo(({id:s,sourceX:l,sourceY:o,targetX:c,targetY:d,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:x,style:v,sourcePosition:_=pe.Bottom,targetPosition:w=pe.Top,markerEnd:M,markerStart:E,pathOptions:A,interactionWidth:z})=>{const[N,k,U]=Gd({sourceX:l,sourceY:o,sourcePosition:_,targetX:c,targetY:d,targetPosition:w,borderRadius:A?.borderRadius,offset:A?.offset,stepPosition:A?.stepPosition}),O=n.isInternal?void 0:s;return r.jsx(Fo,{id:O,path:N,labelX:k,labelY:U,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:x,style:v,markerEnd:M,markerStart:E,interactionWidth:z})})}const Sy=wy({isInternal:!1}),ky=wy({isInternal:!0});Sy.displayName="SmoothStepEdge";ky.displayName="SmoothStepEdgeInternal";function Cy(n){return T.memo(({id:s,...l})=>{const o=n.isInternal?void 0:s;return r.jsx(Sy,{...l,id:o,pathOptions:T.useMemo(()=>({borderRadius:0,offset:l.pathOptions?.offset}),[l.pathOptions?.offset])})})}const BD=Cy({isInternal:!1}),zy=Cy({isInternal:!0});BD.displayName="StepEdge";zy.displayName="StepEdgeInternal";function Ey(n){return T.memo(({id:s,sourceX:l,sourceY:o,targetX:c,targetY:d,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:x,style:v,markerEnd:_,markerStart:w,interactionWidth:M})=>{const[E,A,z]=Zx({sourceX:l,sourceY:o,targetX:c,targetY:d}),N=n.isInternal?void 0:s;return r.jsx(Fo,{id:N,path:E,labelX:A,labelY:z,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:x,style:v,markerEnd:_,markerStart:w,interactionWidth:M})})}const VD=Ey({isInternal:!1}),Ay=Ey({isInternal:!0});VD.displayName="StraightEdge";Ay.displayName="StraightEdgeInternal";function Ty(n){return T.memo(({id:s,sourceX:l,sourceY:o,targetX:c,targetY:d,sourcePosition:f=pe.Bottom,targetPosition:h=pe.Top,label:p,labelStyle:m,labelShowBg:y,labelBgStyle:x,labelBgPadding:v,labelBgBorderRadius:_,style:w,markerEnd:M,markerStart:E,pathOptions:A,interactionWidth:z})=>{const[N,k,U]=Yx({sourceX:l,sourceY:o,sourcePosition:f,targetX:c,targetY:d,targetPosition:h,curvature:A?.curvature}),O=n.isInternal?void 0:s;return r.jsx(Fo,{id:O,path:N,labelX:k,labelY:U,label:p,labelStyle:m,labelShowBg:y,labelBgStyle:x,labelBgPadding:v,labelBgBorderRadius:_,style:w,markerEnd:M,markerStart:E,interactionWidth:z})})}const qD=Ty({isInternal:!1}),My=Ty({isInternal:!0});qD.displayName="BezierEdge";My.displayName="BezierEdgeInternal";const jp={default:My,straight:Ay,step:zy,smoothstep:ky,simplebezier:jy},wp={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},YD=(n,s,l)=>l===pe.Left?n-s:l===pe.Right?n+s:n,GD=(n,s,l)=>l===pe.Top?n-s:l===pe.Bottom?n+s:n,Sp="react-flow__edgeupdater";function kp({position:n,centerX:s,centerY:l,radius:o=10,onMouseDown:c,onMouseEnter:d,onMouseOut:f,type:h}){return r.jsx("circle",{onMouseDown:c,onMouseEnter:d,onMouseOut:f,className:st([Sp,`${Sp}-${h}`]),cx:YD(s,o,n),cy:GD(l,o,n),r:o,stroke:"transparent",fill:"transparent"})}function XD({isReconnectable:n,reconnectRadius:s,edge:l,sourceX:o,sourceY:c,targetX:d,targetY:f,sourcePosition:h,targetPosition:p,onReconnect:m,onReconnectStart:y,onReconnectEnd:x,setReconnecting:v,setUpdateHover:_}){const w=Fe(),M=(k,U)=>{if(k.button!==0)return;const{autoPanOnConnect:O,domNode:V,isValidConnection:G,connectionMode:L,connectionRadius:F,lib:Y,onConnectStart:Z,onConnectEnd:te,cancelConnection:C,nodeLookup:R,rfId:j,panBy:D,updateConnection:H}=w.getState(),q=U.type==="target",P=(se,le)=>{v(!1),x?.(se,l,U.type,le)},X=se=>m?.(l,se),W=(se,le)=>{v(!0),y?.(k,l,U.type),Z?.(se,le)};Qd.onPointerDown(k.nativeEvent,{autoPanOnConnect:O,connectionMode:L,connectionRadius:F,domNode:V,handleId:U.id,nodeId:U.nodeId,nodeLookup:R,isTarget:q,edgeUpdaterType:U.type,lib:Y,flowId:j,cancelConnection:C,panBy:D,isValidConnection:G,onConnect:X,onConnectStart:W,onConnectEnd:te,onReconnectEnd:P,updateConnection:H,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,dragThreshold:w.getState().connectionDragThreshold,handleDomNode:k.currentTarget})},E=k=>M(k,{nodeId:l.target,id:l.targetHandle??null,type:"target"}),A=k=>M(k,{nodeId:l.source,id:l.sourceHandle??null,type:"source"}),z=()=>_(!0),N=()=>_(!1);return r.jsxs(r.Fragment,{children:[(n===!0||n==="source")&&r.jsx(kp,{position:h,centerX:o,centerY:c,radius:s,onMouseDown:E,onMouseEnter:z,onMouseOut:N,type:"source"}),(n===!0||n==="target")&&r.jsx(kp,{position:p,centerX:d,centerY:f,radius:s,onMouseDown:A,onMouseEnter:z,onMouseOut:N,type:"target"})]})}function ZD({id:n,edgesFocusable:s,edgesReconnectable:l,elementsSelectable:o,onClick:c,onDoubleClick:d,onContextMenu:f,onMouseEnter:h,onMouseMove:p,onMouseLeave:m,reconnectRadius:y,onReconnect:x,onReconnectStart:v,onReconnectEnd:_,rfId:w,edgeTypes:M,noPanClassName:E,onError:A,disableKeyboardA11y:z}){let N=De(ye=>ye.edgeLookup.get(n));const k=De(ye=>ye.defaultEdgeOptions);N=k?{...k,...N}:N;let U=N.type||"default",O=M?.[U]||jp[U];O===void 0&&(A?.("011",yn.error011(U)),U="default",O=M?.default||jp.default);const V=!!(N.focusable||s&&typeof N.focusable>"u"),G=typeof x<"u"&&(N.reconnectable||l&&typeof N.reconnectable>"u"),L=!!(N.selectable||o&&typeof N.selectable>"u"),F=T.useRef(null),[Y,Z]=T.useState(!1),[te,C]=T.useState(!1),R=Fe(),{zIndex:j,sourceX:D,sourceY:H,targetX:q,targetY:P,sourcePosition:X,targetPosition:W}=De(T.useCallback(ye=>{const _e=ye.nodeLookup.get(N.source),Ce=ye.nodeLookup.get(N.target);if(!_e||!Ce)return{zIndex:N.zIndex,...wp};const ie=Y8({id:n,sourceNode:_e,targetNode:Ce,sourceHandle:N.sourceHandle||null,targetHandle:N.targetHandle||null,connectionMode:ye.connectionMode,onError:A});return{zIndex:R8({selected:N.selected,zIndex:N.zIndex,sourceNode:_e,targetNode:Ce,elevateOnSelect:ye.elevateEdgesOnSelect,zIndexMode:ye.zIndexMode}),...ie||wp}},[N.source,N.target,N.sourceHandle,N.targetHandle,N.selected,N.zIndex]),Qe),se=T.useMemo(()=>N.markerStart?`url('#${Xd(N.markerStart,w)}')`:void 0,[N.markerStart,w]),le=T.useMemo(()=>N.markerEnd?`url('#${Xd(N.markerEnd,w)}')`:void 0,[N.markerEnd,w]);if(N.hidden||D===null||H===null||q===null||P===null)return null;const de=ye=>{const{addSelectedEdges:_e,unselectNodesAndEdges:Ce,multiSelectionActive:ie}=R.getState();L&&(R.setState({nodesSelectionActive:!1}),N.selected&&ie?(Ce({nodes:[],edges:[N]}),F.current?.blur()):_e([n])),c&&c(ye,N)},be=d?ye=>{d(ye,{...N})}:void 0,me=f?ye=>{f(ye,{...N})}:void 0,oe=h?ye=>{h(ye,{...N})}:void 0,fe=p?ye=>{p(ye,{...N})}:void 0,we=m?ye=>{m(ye,{...N})}:void 0,Ne=ye=>{if(!z&&zx.includes(ye.key)&&L){const{unselectNodesAndEdges:_e,addSelectedEdges:Ce}=R.getState();ye.key==="Escape"?(F.current?.blur(),_e({edges:[N]})):Ce([n])}};return r.jsx("svg",{style:{zIndex:j},children:r.jsxs("g",{className:st(["react-flow__edge",`react-flow__edge-${U}`,N.className,E,{selected:N.selected,animated:N.animated,inactive:!L&&!c,updating:Y,selectable:L}]),onClick:de,onDoubleClick:be,onContextMenu:me,onMouseEnter:oe,onMouseMove:fe,onMouseLeave:we,onKeyDown:V?Ne:void 0,tabIndex:V?0:void 0,role:N.ariaRole??(V?"group":"img"),"aria-roledescription":"edge","data-id":n,"data-testid":`rf__edge-${n}`,"aria-label":N.ariaLabel===null?void 0:N.ariaLabel||`Edge from ${N.source} to ${N.target}`,"aria-describedby":V?`${ly}-${w}`:void 0,ref:F,...N.domAttributes,children:[!te&&r.jsx(O,{id:n,source:N.source,target:N.target,type:N.type,selected:N.selected,animated:N.animated,selectable:L,deletable:N.deletable??!0,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,sourceX:D,sourceY:H,targetX:q,targetY:P,sourcePosition:X,targetPosition:W,data:N.data,style:N.style,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerStart:se,markerEnd:le,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth}),G&&r.jsx(XD,{edge:N,isReconnectable:G,reconnectRadius:y,onReconnect:x,onReconnectStart:v,onReconnectEnd:_,sourceX:D,sourceY:H,targetX:q,targetY:P,sourcePosition:X,targetPosition:W,setUpdateHover:Z,setReconnecting:C})]})})}var QD=T.memo(ZD);const FD=n=>({edgesFocusable:n.edgesFocusable,edgesReconnectable:n.edgesReconnectable,elementsSelectable:n.elementsSelectable,connectionMode:n.connectionMode,onError:n.onError});function Dy({defaultMarkerColor:n,onlyRenderVisibleElements:s,rfId:l,edgeTypes:o,noPanClassName:c,onReconnect:d,onEdgeContextMenu:f,onEdgeMouseEnter:h,onEdgeMouseMove:p,onEdgeMouseLeave:m,onEdgeClick:y,reconnectRadius:x,onEdgeDoubleClick:v,onReconnectStart:_,onReconnectEnd:w,disableKeyboardA11y:M}){const{edgesFocusable:E,edgesReconnectable:A,elementsSelectable:z,onError:N}=De(FD,Qe),k=MD(s);return r.jsxs("div",{className:"react-flow__edges",children:[r.jsx($D,{defaultColor:n,rfId:l}),k.map(U=>r.jsx(QD,{id:U,edgesFocusable:E,edgesReconnectable:A,elementsSelectable:z,noPanClassName:c,onReconnect:d,onContextMenu:f,onMouseEnter:h,onMouseMove:p,onMouseLeave:m,onClick:y,reconnectRadius:x,onDoubleClick:v,onReconnectStart:_,onReconnectEnd:w,rfId:l,onError:N,edgeTypes:o,disableKeyboardA11y:M},U))]})}Dy.displayName="EdgeRenderer";const KD=T.memo(Dy),ID=n=>`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function JD({children:n}){const s=De(ID);return r.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:s},children:n})}function WD(n){const s=Zo(),l=T.useRef(!1);T.useEffect(()=>{!l.current&&s.viewportInitialized&&n&&(setTimeout(()=>n(s),1),l.current=!0)},[n,s.viewportInitialized])}const PD=n=>n.panZoom?.syncViewport;function eO(n){const s=De(PD),l=Fe();return T.useEffect(()=>{n&&(s?.(n),l.setState({transform:[n.x,n.y,n.zoom]}))},[n,s]),null}function tO(n){return n.connection.inProgress?{...n.connection,to:Oi(n.connection.to,n.transform)}:{...n.connection}}function nO(n){return tO}function aO(n){const s=nO();return De(s,Qe)}const sO=n=>({nodesConnectable:n.nodesConnectable,isValid:n.connection.isValid,inProgress:n.connection.inProgress,width:n.width,height:n.height});function rO({containerStyle:n,style:s,type:l,component:o}){const{nodesConnectable:c,width:d,height:f,isValid:h,inProgress:p}=De(sO,Qe);return!(d&&c&&p)?null:r.jsx("svg",{style:n,width:d,height:f,className:"react-flow__connectionline react-flow__container",children:r.jsx("g",{className:st(["react-flow__connection",Tx(h)]),children:r.jsx(Oy,{style:s,type:l,CustomComponent:o,isValid:h})})})}const Oy=({style:n,type:s=wa.Bezier,CustomComponent:l,isValid:o})=>{const{inProgress:c,from:d,fromNode:f,fromHandle:h,fromPosition:p,to:m,toNode:y,toHandle:x,toPosition:v,pointer:_}=aO();if(!c)return;if(l)return r.jsx(l,{connectionLineType:s,connectionLineStyle:n,fromNode:f,fromHandle:h,fromX:d.x,fromY:d.y,toX:m.x,toY:m.y,fromPosition:p,toPosition:v,connectionStatus:Tx(o),toNode:y,toHandle:x,pointer:_});let w="";const M={sourceX:d.x,sourceY:d.y,sourcePosition:p,targetX:m.x,targetY:m.y,targetPosition:v};switch(s){case wa.Bezier:[w]=Yx(M);break;case wa.SimpleBezier:[w]=_y(M);break;case wa.Step:[w]=Gd({...M,borderRadius:0});break;case wa.SmoothStep:[w]=Gd(M);break;default:[w]=Zx(M)}return r.jsx("path",{d:w,fill:"none",className:"react-flow__connection-path",style:n})};Oy.displayName="ConnectionLine";const iO={};function Cp(n=iO){T.useRef(n),Fe(),T.useEffect(()=>{},[n])}function lO(){Fe(),T.useRef(!1),T.useEffect(()=>{},[])}function Ly({nodeTypes:n,edgeTypes:s,onInit:l,onNodeClick:o,onEdgeClick:c,onNodeDoubleClick:d,onEdgeDoubleClick:f,onNodeMouseEnter:h,onNodeMouseMove:p,onNodeMouseLeave:m,onNodeContextMenu:y,onSelectionContextMenu:x,onSelectionStart:v,onSelectionEnd:_,connectionLineType:w,connectionLineStyle:M,connectionLineComponent:E,connectionLineContainerStyle:A,selectionKeyCode:z,selectionOnDrag:N,selectionMode:k,multiSelectionKeyCode:U,panActivationKeyCode:O,zoomActivationKeyCode:V,deleteKeyCode:G,onlyRenderVisibleElements:L,elementsSelectable:F,defaultViewport:Y,translateExtent:Z,minZoom:te,maxZoom:C,preventScrolling:R,defaultMarkerColor:j,zoomOnScroll:D,zoomOnPinch:H,panOnScroll:q,panOnScrollSpeed:P,panOnScrollMode:X,zoomOnDoubleClick:W,panOnDrag:se,onPaneClick:le,onPaneMouseEnter:de,onPaneMouseMove:be,onPaneMouseLeave:me,onPaneScroll:oe,onPaneContextMenu:fe,paneClickDistance:we,nodeClickDistance:Ne,onEdgeContextMenu:ye,onEdgeMouseEnter:_e,onEdgeMouseMove:Ce,onEdgeMouseLeave:ie,reconnectRadius:ge,onReconnect:Oe,onReconnectStart:rt,onReconnectEnd:Tt,noDragClassName:It,noWheelClassName:vn,noPanClassName:za,disableKeyboardA11y:Ea,nodeExtent:dt,rfId:is,viewport:_n,onViewportChange:Qn}){return Cp(n),Cp(s),lO(),WD(l),eO(_n),r.jsx(ND,{onPaneClick:le,onPaneMouseEnter:de,onPaneMouseMove:be,onPaneMouseLeave:me,onPaneContextMenu:fe,onPaneScroll:oe,paneClickDistance:we,deleteKeyCode:G,selectionKeyCode:z,selectionOnDrag:N,selectionMode:k,onSelectionStart:v,onSelectionEnd:_,multiSelectionKeyCode:U,panActivationKeyCode:O,zoomActivationKeyCode:V,elementsSelectable:F,zoomOnScroll:D,zoomOnPinch:H,zoomOnDoubleClick:W,panOnScroll:q,panOnScrollSpeed:P,panOnScrollMode:X,panOnDrag:se,defaultViewport:Y,translateExtent:Z,minZoom:te,maxZoom:C,onSelectionContextMenu:x,preventScrolling:R,noDragClassName:It,noWheelClassName:vn,noPanClassName:za,disableKeyboardA11y:Ea,onViewportChange:Qn,isControlledViewport:!!_n,children:r.jsxs(JD,{children:[r.jsx(KD,{edgeTypes:s,onEdgeClick:c,onEdgeDoubleClick:f,onReconnect:Oe,onReconnectStart:rt,onReconnectEnd:Tt,onlyRenderVisibleElements:L,onEdgeContextMenu:ye,onEdgeMouseEnter:_e,onEdgeMouseMove:Ce,onEdgeMouseLeave:ie,reconnectRadius:ge,defaultMarkerColor:j,noPanClassName:za,disableKeyboardA11y:Ea,rfId:is}),r.jsx(rO,{style:M,type:w,component:E,containerStyle:A}),r.jsx("div",{className:"react-flow__edgelabel-renderer"}),r.jsx(TD,{nodeTypes:n,onNodeClick:o,onNodeDoubleClick:d,onNodeMouseEnter:h,onNodeMouseMove:p,onNodeMouseLeave:m,onNodeContextMenu:y,nodeClickDistance:Ne,onlyRenderVisibleElements:L,noPanClassName:za,noDragClassName:It,disableKeyboardA11y:Ea,nodeExtent:dt,rfId:is}),r.jsx("div",{className:"react-flow__viewport-portal"})]})})}Ly.displayName="GraphView";const oO=T.memo(Ly),zp=({nodes:n,edges:s,defaultNodes:l,defaultEdges:o,width:c,height:d,fitView:f,fitViewOptions:h,minZoom:p=.5,maxZoom:m=2,nodeOrigin:y,nodeExtent:x,zIndexMode:v="basic"}={})=>{const _=new Map,w=new Map,M=new Map,E=new Map,A=o??s??[],z=l??n??[],N=y??[0,0],k=x??Ni;Kx(M,E,A);const U=Zd(z,_,w,{nodeOrigin:N,nodeExtent:k,zIndexMode:v});let O=[0,0,1];if(f&&c&&d){const V=Mi(_,{filter:Y=>!!((Y.width||Y.initialWidth)&&(Y.height||Y.initialHeight))}),{x:G,y:L,zoom:F}=cf(V,c,d,p,m,h?.padding??.1);O=[G,L,F]}return{rfId:"1",width:c??0,height:d??0,transform:O,nodes:z,nodesInitialized:U,nodeLookup:_,parentLookup:w,edges:A,edgeLookup:E,connectionLookup:M,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:l!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:p,maxZoom:m,translateExtent:Ni,nodeExtent:k,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:ir.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:N,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:f??!1,fitViewOptions:h,fitViewResolver:null,connection:{...Ax},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:A8,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Ex,zIndexMode:v,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},cO=({nodes:n,edges:s,defaultNodes:l,defaultEdges:o,width:c,height:d,fitView:f,fitViewOptions:h,minZoom:p,maxZoom:m,nodeOrigin:y,nodeExtent:x,zIndexMode:v})=>CM((_,w)=>{async function M(){const{nodeLookup:E,panZoom:A,fitViewOptions:z,fitViewResolver:N,width:k,height:U,minZoom:O,maxZoom:V}=w();A&&(await z8({nodes:E,width:k,height:U,panZoom:A,minZoom:O,maxZoom:V},z),N?.resolve(!0),_({fitViewResolver:null}))}return{...zp({nodes:n,edges:s,width:c,height:d,fitView:f,fitViewOptions:h,minZoom:p,maxZoom:m,nodeOrigin:y,nodeExtent:x,defaultNodes:l,defaultEdges:o,zIndexMode:v}),setNodes:E=>{const{nodeLookup:A,parentLookup:z,nodeOrigin:N,elevateNodesOnSelect:k,fitViewQueued:U,zIndexMode:O}=w(),V=Zd(E,A,z,{nodeOrigin:N,nodeExtent:x,elevateNodesOnSelect:k,checkEquality:!0,zIndexMode:O});U&&V?(M(),_({nodes:E,nodesInitialized:V,fitViewQueued:!1,fitViewOptions:void 0})):_({nodes:E,nodesInitialized:V})},setEdges:E=>{const{connectionLookup:A,edgeLookup:z}=w();Kx(A,z,E),_({edges:E})},setDefaultNodesAndEdges:(E,A)=>{if(E){const{setNodes:z}=w();z(E),_({hasDefaultNodes:!0})}if(A){const{setEdges:z}=w();z(A),_({hasDefaultEdges:!0})}},updateNodeInternals:E=>{const{triggerNodeChanges:A,nodeLookup:z,parentLookup:N,domNode:k,nodeOrigin:U,nodeExtent:O,debug:V,fitViewQueued:G,zIndexMode:L}=w(),{changes:F,updatedInternals:Y}=J8(E,z,N,k,U,O,L);Y&&(Q8(z,N,{nodeOrigin:U,nodeExtent:O,zIndexMode:L}),G?(M(),_({fitViewQueued:!1,fitViewOptions:void 0})):_({}),F?.length>0&&(V&&console.log("React Flow: trigger node changes",F),A?.(F)))},updateNodePositions:(E,A=!1)=>{const z=[];let N=[];const{nodeLookup:k,triggerNodeChanges:U,connection:O,updateConnection:V,onNodesChangeMiddlewareMap:G}=w();for(const[L,F]of E){const Y=k.get(L),Z=!!(Y?.expandParent&&Y?.parentId&&F?.position),te={id:L,type:"position",position:Z?{x:Math.max(0,F.position.x),y:Math.max(0,F.position.y)}:F.position,dragging:A};if(Y&&O.inProgress&&O.fromNode.id===Y.id){const C=ss(Y,O.fromHandle,pe.Left,!0);V({...O,from:C})}Z&&Y.parentId&&z.push({id:L,parentId:Y.parentId,rect:{...F.internals.positionAbsolute,width:F.measured.width??0,height:F.measured.height??0}}),N.push(te)}if(z.length>0){const{parentLookup:L,nodeOrigin:F}=w(),Y=mf(z,k,L,F);N.push(...Y)}for(const L of G.values())N=L(N);U(N)},triggerNodeChanges:E=>{const{onNodesChange:A,setNodes:z,nodes:N,hasDefaultNodes:k,debug:U}=w();if(E?.length){if(k){const O=uy(E,N);z(O)}U&&console.log("React Flow: trigger node changes",E),A?.(E)}},triggerEdgeChanges:E=>{const{onEdgesChange:A,setEdges:z,edges:N,hasDefaultEdges:k,debug:U}=w();if(E?.length){if(k){const O=dy(E,N);z(O)}U&&console.log("React Flow: trigger edge changes",E),A?.(E)}},addSelectedNodes:E=>{const{multiSelectionActive:A,edgeLookup:z,nodeLookup:N,triggerNodeChanges:k,triggerEdgeChanges:U}=w();if(A){const O=E.map(V=>Pa(V,!0));k(O);return}k(Ps(N,new Set([...E]),!0)),U(Ps(z))},addSelectedEdges:E=>{const{multiSelectionActive:A,edgeLookup:z,nodeLookup:N,triggerNodeChanges:k,triggerEdgeChanges:U}=w();if(A){const O=E.map(V=>Pa(V,!0));U(O);return}U(Ps(z,new Set([...E]))),k(Ps(N,new Set,!0))},unselectNodesAndEdges:({nodes:E,edges:A}={})=>{const{edges:z,nodes:N,nodeLookup:k,triggerNodeChanges:U,triggerEdgeChanges:O}=w(),V=E||N,G=A||z,L=V.map(Y=>{const Z=k.get(Y.id);return Z&&(Z.selected=!1),Pa(Y.id,!1)}),F=G.map(Y=>Pa(Y.id,!1));U(L),O(F)},setMinZoom:E=>{const{panZoom:A,maxZoom:z}=w();A?.setScaleExtent([E,z]),_({minZoom:E})},setMaxZoom:E=>{const{panZoom:A,minZoom:z}=w();A?.setScaleExtent([z,E]),_({maxZoom:E})},setTranslateExtent:E=>{w().panZoom?.setTranslateExtent(E),_({translateExtent:E})},resetSelectedElements:()=>{const{edges:E,nodes:A,triggerNodeChanges:z,triggerEdgeChanges:N,elementsSelectable:k}=w();if(!k)return;const U=A.reduce((V,G)=>G.selected?[...V,Pa(G.id,!1)]:V,[]),O=E.reduce((V,G)=>G.selected?[...V,Pa(G.id,!1)]:V,[]);z(U),N(O)},setNodeExtent:E=>{const{nodes:A,nodeLookup:z,parentLookup:N,nodeOrigin:k,elevateNodesOnSelect:U,nodeExtent:O,zIndexMode:V}=w();E[0][0]===O[0][0]&&E[0][1]===O[0][1]&&E[1][0]===O[1][0]&&E[1][1]===O[1][1]||(Zd(A,z,N,{nodeOrigin:k,nodeExtent:E,elevateNodesOnSelect:U,checkEquality:!1,zIndexMode:V}),_({nodeExtent:E}))},panBy:E=>{const{transform:A,width:z,height:N,panZoom:k,translateExtent:U}=w();return W8({delta:E,panZoom:k,transform:A,translateExtent:U,width:z,height:N})},setCenter:async(E,A,z)=>{const{width:N,height:k,maxZoom:U,panZoom:O}=w();if(!O)return Promise.resolve(!1);const V=typeof z?.zoom<"u"?z.zoom:U;return await O.setViewport({x:N/2-E*V,y:k/2-A*V,zoom:V},{duration:z?.duration,ease:z?.ease,interpolate:z?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{_({connection:{...Ax}})},updateConnection:E=>{_({connection:E})},reset:()=>_({...zp()})}},Object.is);function uO({initialNodes:n,initialEdges:s,defaultNodes:l,defaultEdges:o,initialWidth:c,initialHeight:d,initialMinZoom:f,initialMaxZoom:h,initialFitViewOptions:p,fitView:m,nodeOrigin:y,nodeExtent:x,zIndexMode:v,children:_}){const[w]=T.useState(()=>cO({nodes:n,edges:s,defaultNodes:l,defaultEdges:o,width:c,height:d,fitView:m,minZoom:f,maxZoom:h,fitViewOptions:p,nodeOrigin:y,nodeExtent:x,zIndexMode:v}));return r.jsx(zM,{value:w,children:r.jsx(JM,{children:_})})}function dO({children:n,nodes:s,edges:l,defaultNodes:o,defaultEdges:c,width:d,height:f,fitView:h,fitViewOptions:p,minZoom:m,maxZoom:y,nodeOrigin:x,nodeExtent:v,zIndexMode:_}){return T.useContext(Go)?r.jsx(r.Fragment,{children:n}):r.jsx(uO,{initialNodes:s,initialEdges:l,defaultNodes:o,defaultEdges:c,initialWidth:d,initialHeight:f,fitView:h,initialFitViewOptions:p,initialMinZoom:m,initialMaxZoom:y,nodeOrigin:x,nodeExtent:v,zIndexMode:_,children:n})}const fO={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function gO({nodes:n,edges:s,defaultNodes:l,defaultEdges:o,className:c,nodeTypes:d,edgeTypes:f,onNodeClick:h,onEdgeClick:p,onInit:m,onMove:y,onMoveStart:x,onMoveEnd:v,onConnect:_,onConnectStart:w,onConnectEnd:M,onClickConnectStart:E,onClickConnectEnd:A,onNodeMouseEnter:z,onNodeMouseMove:N,onNodeMouseLeave:k,onNodeContextMenu:U,onNodeDoubleClick:O,onNodeDragStart:V,onNodeDrag:G,onNodeDragStop:L,onNodesDelete:F,onEdgesDelete:Y,onDelete:Z,onSelectionChange:te,onSelectionDragStart:C,onSelectionDrag:R,onSelectionDragStop:j,onSelectionContextMenu:D,onSelectionStart:H,onSelectionEnd:q,onBeforeDelete:P,connectionMode:X,connectionLineType:W=wa.Bezier,connectionLineStyle:se,connectionLineComponent:le,connectionLineContainerStyle:de,deleteKeyCode:be="Backspace",selectionKeyCode:me="Shift",selectionOnDrag:oe=!1,selectionMode:fe=ji.Full,panActivationKeyCode:we="Space",multiSelectionKeyCode:Ne=Si()?"Meta":"Control",zoomActivationKeyCode:ye=Si()?"Meta":"Control",snapToGrid:_e,snapGrid:Ce,onlyRenderVisibleElements:ie=!1,selectNodesOnDrag:ge,nodesDraggable:Oe,autoPanOnNodeFocus:rt,nodesConnectable:Tt,nodesFocusable:It,nodeOrigin:vn=oy,edgesFocusable:za,edgesReconnectable:Ea,elementsSelectable:dt=!0,defaultViewport:is=VM,minZoom:_n=.5,maxZoom:Qn=2,translateExtent:Aa=Ni,preventScrolling:Io=!0,nodeExtent:ls,defaultMarkerColor:Jo="#b1b1b7",zoomOnScroll:Wo=!0,zoomOnPinch:Ta=!0,panOnScroll:xt=!1,panOnScrollSpeed:on=.5,panOnScrollMode:yt=es.Free,zoomOnDoubleClick:Po=!0,panOnDrag:ec=!0,onPaneClick:tc,onPaneMouseEnter:os,onPaneMouseMove:cs,onPaneMouseLeave:us,onPaneScroll:Nn,onPaneContextMenu:ds,paneClickDistance:Ma=1,nodeClickDistance:nc=0,children:Li,onReconnect:fr,onReconnectStart:Da,onReconnectEnd:ac,onEdgeContextMenu:Ri,onEdgeDoubleClick:$i,onEdgeMouseEnter:Hi,onEdgeMouseMove:gr,onEdgeMouseLeave:hr,reconnectRadius:Ui=10,onNodesChange:Bi,onEdgesChange:cn,noDragClassName:it="nodrag",noWheelClassName:pt="nowheel",noPanClassName:jn="nopan",fitView:fs,fitViewOptions:Vi,connectOnClick:sc,attributionPosition:qi,proOptions:Oa,defaultEdgeOptions:mr,elevateNodesOnSelect:Fn=!0,elevateEdgesOnSelect:Kn=!1,disableKeyboardA11y:In=!1,autoPanOnConnect:Jn,autoPanOnNodeDrag:Pe,autoPanSpeed:Yi,connectionRadius:Gi,isValidConnection:wn,onError:Wn,style:rc,id:pr,nodeDragThreshold:Xi,connectionDragThreshold:ic,viewport:gs,onViewportChange:hs,width:Jt,height:jt,colorMode:Zi="light",debug:lc,onScroll:ms,ariaLabelConfig:Qi,zIndexMode:La="basic",...oc},wt){const Ra=pr||"1",Fi=XM(Zi),xr=T.useCallback(Sn=>{Sn.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),ms?.(Sn)},[ms]);return r.jsx("div",{"data-testid":"rf__wrapper",...oc,onScroll:xr,style:{...rc,...fO},ref:wt,className:st(["react-flow",c,Fi]),id:pr,role:"application",children:r.jsxs(dO,{nodes:n,edges:s,width:Jt,height:jt,fitView:fs,fitViewOptions:Vi,minZoom:_n,maxZoom:Qn,nodeOrigin:vn,nodeExtent:ls,zIndexMode:La,children:[r.jsx(oO,{onInit:m,onNodeClick:h,onEdgeClick:p,onNodeMouseEnter:z,onNodeMouseMove:N,onNodeMouseLeave:k,onNodeContextMenu:U,onNodeDoubleClick:O,nodeTypes:d,edgeTypes:f,connectionLineType:W,connectionLineStyle:se,connectionLineComponent:le,connectionLineContainerStyle:de,selectionKeyCode:me,selectionOnDrag:oe,selectionMode:fe,deleteKeyCode:be,multiSelectionKeyCode:Ne,panActivationKeyCode:we,zoomActivationKeyCode:ye,onlyRenderVisibleElements:ie,defaultViewport:is,translateExtent:Aa,minZoom:_n,maxZoom:Qn,preventScrolling:Io,zoomOnScroll:Wo,zoomOnPinch:Ta,zoomOnDoubleClick:Po,panOnScroll:xt,panOnScrollSpeed:on,panOnScrollMode:yt,panOnDrag:ec,onPaneClick:tc,onPaneMouseEnter:os,onPaneMouseMove:cs,onPaneMouseLeave:us,onPaneScroll:Nn,onPaneContextMenu:ds,paneClickDistance:Ma,nodeClickDistance:nc,onSelectionContextMenu:D,onSelectionStart:H,onSelectionEnd:q,onReconnect:fr,onReconnectStart:Da,onReconnectEnd:ac,onEdgeContextMenu:Ri,onEdgeDoubleClick:$i,onEdgeMouseEnter:Hi,onEdgeMouseMove:gr,onEdgeMouseLeave:hr,reconnectRadius:Ui,defaultMarkerColor:Jo,noDragClassName:it,noWheelClassName:pt,noPanClassName:jn,rfId:Ra,disableKeyboardA11y:In,nodeExtent:ls,viewport:gs,onViewportChange:hs}),r.jsx(GM,{nodes:n,edges:s,defaultNodes:l,defaultEdges:o,onConnect:_,onConnectStart:w,onConnectEnd:M,onClickConnectStart:E,onClickConnectEnd:A,nodesDraggable:Oe,autoPanOnNodeFocus:rt,nodesConnectable:Tt,nodesFocusable:It,edgesFocusable:za,edgesReconnectable:Ea,elementsSelectable:dt,elevateNodesOnSelect:Fn,elevateEdgesOnSelect:Kn,minZoom:_n,maxZoom:Qn,nodeExtent:ls,onNodesChange:Bi,onEdgesChange:cn,snapToGrid:_e,snapGrid:Ce,connectionMode:X,translateExtent:Aa,connectOnClick:sc,defaultEdgeOptions:mr,fitView:fs,fitViewOptions:Vi,onNodesDelete:F,onEdgesDelete:Y,onDelete:Z,onNodeDragStart:V,onNodeDrag:G,onNodeDragStop:L,onSelectionDrag:R,onSelectionDragStart:C,onSelectionDragStop:j,onMove:y,onMoveStart:x,onMoveEnd:v,noPanClassName:jn,nodeOrigin:vn,rfId:Ra,autoPanOnConnect:Jn,autoPanOnNodeDrag:Pe,autoPanSpeed:Yi,onError:Wn,connectionRadius:Gi,isValidConnection:wn,selectNodesOnDrag:ge,nodeDragThreshold:Xi,connectionDragThreshold:ic,onBeforeDelete:P,debug:lc,ariaLabelConfig:Qi,zIndexMode:La}),r.jsx(BM,{onSelectionChange:te}),Li,r.jsx(LM,{proOptions:Oa,position:qi}),r.jsx(OM,{rfId:Ra,disableKeyboardA11y:In})]})})}var hO=fy(gO);function mO(n){const[s,l]=T.useState(n),o=T.useCallback(c=>l(d=>uy(c,d)),[]);return[s,l,o]}function pO(n){const[s,l]=T.useState(n),o=T.useCallback(c=>l(d=>dy(c,d)),[]);return[s,l,o]}function xO({dimensions:n,lineWidth:s,variant:l,className:o}){return r.jsx("path",{strokeWidth:s,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`,className:st(["react-flow__background-pattern",l,o])})}function yO({radius:n,className:s}){return r.jsx("circle",{cx:n,cy:n,r:n,className:st(["react-flow__background-pattern","dots",s])})}var Sa;(function(n){n.Lines="lines",n.Dots="dots",n.Cross="cross"})(Sa||(Sa={}));const bO={[Sa.Dots]:1,[Sa.Lines]:1,[Sa.Cross]:6},vO=n=>({transform:n.transform,patternId:`pattern-${n.rfId}`});function Ry({id:n,variant:s=Sa.Dots,gap:l=20,size:o,lineWidth:c=1,offset:d=0,color:f,bgColor:h,style:p,className:m,patternClassName:y}){const x=T.useRef(null),{transform:v,patternId:_}=De(vO,Qe),w=o||bO[s],M=s===Sa.Dots,E=s===Sa.Cross,A=Array.isArray(l)?l:[l,l],z=[A[0]*v[2]||1,A[1]*v[2]||1],N=w*v[2],k=Array.isArray(d)?d:[d,d],U=E?[N,N]:z,O=[k[0]*v[2]||1+U[0]/2,k[1]*v[2]||1+U[1]/2],V=`${_}${n||""}`;return r.jsxs("svg",{className:st(["react-flow__background",m]),style:{...p,...Qo,"--xy-background-color-props":h,"--xy-background-pattern-color-props":f},ref:x,"data-testid":"rf__background",children:[r.jsx("pattern",{id:V,x:v[0]%z[0],y:v[1]%z[1],width:z[0],height:z[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${O[0]},-${O[1]})`,children:M?r.jsx(yO,{radius:N/2,className:y}):r.jsx(xO,{dimensions:U,lineWidth:c,variant:s,className:y})}),r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${V})`})]})}Ry.displayName="Background";const _O=T.memo(Ry);function NO(){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:r.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function jO(){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:r.jsx("path",{d:"M0 0h32v4.2H0z"})})}function wO(){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:r.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function SO(){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:r.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function kO(){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:r.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function fo({children:n,className:s,...l}){return r.jsx("button",{type:"button",className:st(["react-flow__controls-button",s]),...l,children:n})}const CO=n=>({isInteractive:n.nodesDraggable||n.nodesConnectable||n.elementsSelectable,minZoomReached:n.transform[2]<=n.minZoom,maxZoomReached:n.transform[2]>=n.maxZoom,ariaLabelConfig:n.ariaLabelConfig});function $y({style:n,showZoom:s=!0,showFitView:l=!0,showInteractive:o=!0,fitViewOptions:c,onZoomIn:d,onZoomOut:f,onFitView:h,onInteractiveChange:p,className:m,children:y,position:x="bottom-left",orientation:v="vertical","aria-label":_}){const w=Fe(),{isInteractive:M,minZoomReached:E,maxZoomReached:A,ariaLabelConfig:z}=De(CO,Qe),{zoomIn:N,zoomOut:k,fitView:U}=Zo(),O=()=>{N(),d?.()},V=()=>{k(),f?.()},G=()=>{U(c),h?.()},L=()=>{w.setState({nodesDraggable:!M,nodesConnectable:!M,elementsSelectable:!M}),p?.(!M)},F=v==="horizontal"?"horizontal":"vertical";return r.jsxs(Xo,{className:st(["react-flow__controls",F,m]),position:x,style:n,"data-testid":"rf__controls","aria-label":_??z["controls.ariaLabel"],children:[s&&r.jsxs(r.Fragment,{children:[r.jsx(fo,{onClick:O,className:"react-flow__controls-zoomin",title:z["controls.zoomIn.ariaLabel"],"aria-label":z["controls.zoomIn.ariaLabel"],disabled:A,children:r.jsx(NO,{})}),r.jsx(fo,{onClick:V,className:"react-flow__controls-zoomout",title:z["controls.zoomOut.ariaLabel"],"aria-label":z["controls.zoomOut.ariaLabel"],disabled:E,children:r.jsx(jO,{})})]}),l&&r.jsx(fo,{className:"react-flow__controls-fitview",onClick:G,title:z["controls.fitView.ariaLabel"],"aria-label":z["controls.fitView.ariaLabel"],children:r.jsx(wO,{})}),o&&r.jsx(fo,{className:"react-flow__controls-interactive",onClick:L,title:z["controls.interactive.ariaLabel"],"aria-label":z["controls.interactive.ariaLabel"],children:M?r.jsx(kO,{}):r.jsx(SO,{})}),y]})}$y.displayName="Controls";const zO=T.memo($y);function EO({id:n,x:s,y:l,width:o,height:c,style:d,color:f,strokeColor:h,strokeWidth:p,className:m,borderRadius:y,shapeRendering:x,selected:v,onClick:_}){const{background:w,backgroundColor:M}=d||{},E=f||w||M;return r.jsx("rect",{className:st(["react-flow__minimap-node",{selected:v},m]),x:s,y:l,rx:y,ry:y,width:o,height:c,style:{fill:E,stroke:h,strokeWidth:p},shapeRendering:x,onClick:_?A=>_(A,n):void 0})}const AO=T.memo(EO),TO=n=>n.nodes.map(s=>s.id),Ad=n=>n instanceof Function?n:()=>n;function MO({nodeStrokeColor:n,nodeColor:s,nodeClassName:l="",nodeBorderRadius:o=5,nodeStrokeWidth:c,nodeComponent:d=AO,onClick:f}){const h=De(TO,Qe),p=Ad(s),m=Ad(n),y=Ad(l),x=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return r.jsx(r.Fragment,{children:h.map(v=>r.jsx(OO,{id:v,nodeColorFunc:p,nodeStrokeColorFunc:m,nodeClassNameFunc:y,nodeBorderRadius:o,nodeStrokeWidth:c,NodeComponent:d,onClick:f,shapeRendering:x},v))})}function DO({id:n,nodeColorFunc:s,nodeStrokeColorFunc:l,nodeClassNameFunc:o,nodeBorderRadius:c,nodeStrokeWidth:d,shapeRendering:f,NodeComponent:h,onClick:p}){const{node:m,x:y,y:x,width:v,height:_}=De(w=>{const{internals:M}=w.nodeLookup.get(n),E=M.userNode,{x:A,y:z}=M.positionAbsolute,{width:N,height:k}=Zn(E);return{node:E,x:A,y:z,width:N,height:k}},Qe);return!m||m.hidden||!$x(m)?null:r.jsx(h,{x:y,y:x,width:v,height:_,style:m.style,selected:!!m.selected,className:o(m),color:s(m),borderRadius:c,strokeColor:l(m),strokeWidth:d,shapeRendering:f,onClick:p,id:m.id})}const OO=T.memo(DO);var LO=T.memo(MO);const RO=200,$O=150,HO=n=>!n.hidden,UO=n=>{const s={x:-n.transform[0]/n.transform[2],y:-n.transform[1]/n.transform[2],width:n.width/n.transform[2],height:n.height/n.transform[2]};return{viewBB:s,boundingRect:n.nodeLookup.size>0?Rx(Mi(n.nodeLookup,{filter:HO}),s):s,rfId:n.rfId,panZoom:n.panZoom,translateExtent:n.translateExtent,flowWidth:n.width,flowHeight:n.height,ariaLabelConfig:n.ariaLabelConfig}},BO="react-flow__minimap-desc";function Hy({style:n,className:s,nodeStrokeColor:l,nodeColor:o,nodeClassName:c="",nodeBorderRadius:d=5,nodeStrokeWidth:f,nodeComponent:h,bgColor:p,maskColor:m,maskStrokeColor:y,maskStrokeWidth:x,position:v="bottom-right",onClick:_,onNodeClick:w,pannable:M=!1,zoomable:E=!1,ariaLabel:A,inversePan:z,zoomStep:N=1,offsetScale:k=5}){const U=Fe(),O=T.useRef(null),{boundingRect:V,viewBB:G,rfId:L,panZoom:F,translateExtent:Y,flowWidth:Z,flowHeight:te,ariaLabelConfig:C}=De(UO,Qe),R=n?.width??RO,j=n?.height??$O,D=V.width/R,H=V.height/j,q=Math.max(D,H),P=q*R,X=q*j,W=k*q,se=V.x-(P-V.width)/2-W,le=V.y-(X-V.height)/2-W,de=P+W*2,be=X+W*2,me=`${BO}-${L}`,oe=T.useRef(0),fe=T.useRef();oe.current=q,T.useEffect(()=>{if(O.current&&F)return fe.current=lM({domNode:O.current,panZoom:F,getTransform:()=>U.getState().transform,getViewScale:()=>oe.current}),()=>{fe.current?.destroy()}},[F]),T.useEffect(()=>{fe.current?.update({translateExtent:Y,width:Z,height:te,inversePan:z,pannable:M,zoomStep:N,zoomable:E})},[M,E,z,N,Y,Z,te]);const we=_?_e=>{const[Ce,ie]=fe.current?.pointer(_e)||[0,0];_(_e,{x:Ce,y:ie})}:void 0,Ne=w?T.useCallback((_e,Ce)=>{const ie=U.getState().nodeLookup.get(Ce).internals.userNode;w(_e,ie)},[]):void 0,ye=A??C["minimap.ariaLabel"];return r.jsx(Xo,{position:v,style:{...n,"--xy-minimap-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-background-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-stroke-color-props":typeof y=="string"?y:void 0,"--xy-minimap-mask-stroke-width-props":typeof x=="number"?x*q:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof l=="string"?l:void 0,"--xy-minimap-node-stroke-width-props":typeof f=="number"?f:void 0},className:st(["react-flow__minimap",s]),"data-testid":"rf__minimap",children:r.jsxs("svg",{width:R,height:j,viewBox:`${se} ${le} ${de} ${be}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":me,ref:O,onClick:we,children:[ye&&r.jsx("title",{id:me,children:ye}),r.jsx(LO,{onClick:Ne,nodeColor:o,nodeStrokeColor:l,nodeBorderRadius:d,nodeClassName:c,nodeStrokeWidth:f,nodeComponent:h}),r.jsx("path",{className:"react-flow__minimap-mask",d:`M${se-W},${le-W}h${de+W*2}v${be+W*2}h${-de-W*2}z
        M${G.x},${G.y}h${G.width}v${G.height}h${-G.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Hy.displayName="MiniMap";const VO=T.memo(Hy),qO=n=>s=>n?`${Math.max(1/s.transform[2],1)}`:void 0,YO={[ur.Line]:"right",[ur.Handle]:"bottom-right"};function GO({nodeId:n,position:s,variant:l=ur.Handle,className:o,style:c=void 0,children:d,color:f,minWidth:h=10,minHeight:p=10,maxWidth:m=Number.MAX_VALUE,maxHeight:y=Number.MAX_VALUE,keepAspectRatio:x=!1,resizeDirection:v,autoScale:_=!0,shouldResize:w,onResizeStart:M,onResize:E,onResizeEnd:A}){const z=py(),N=typeof n=="string"?n:z,k=Fe(),U=T.useRef(null),O=l===ur.Handle,V=De(T.useCallback(qO(O&&_),[O,_]),Qe),G=T.useRef(null),L=s??YO[l];T.useEffect(()=>{if(!(!U.current||!N))return G.current||(G.current=_M({domNode:U.current,nodeId:N,getStoreItems:()=>{const{nodeLookup:Y,transform:Z,snapGrid:te,snapToGrid:C,nodeOrigin:R,domNode:j}=k.getState();return{nodeLookup:Y,transform:Z,snapGrid:te,snapToGrid:C,nodeOrigin:R,paneDomNode:j}},onChange:(Y,Z)=>{const{triggerNodeChanges:te,nodeLookup:C,parentLookup:R,nodeOrigin:j}=k.getState(),D=[],H={x:Y.x,y:Y.y},q=C.get(N);if(q&&q.expandParent&&q.parentId){const P=q.origin??j,X=Y.width??q.measured.width??0,W=Y.height??q.measured.height??0,se={id:q.id,parentId:q.parentId,rect:{width:X,height:W,...Hx({x:Y.x??q.position.x,y:Y.y??q.position.y},{width:X,height:W},q.parentId,C,P)}},le=mf([se],C,R,j);D.push(...le),H.x=Y.x?Math.max(P[0]*X,Y.x):void 0,H.y=Y.y?Math.max(P[1]*W,Y.y):void 0}if(H.x!==void 0&&H.y!==void 0){const P={id:N,type:"position",position:{...H}};D.push(P)}if(Y.width!==void 0&&Y.height!==void 0){const X={id:N,type:"dimensions",resizing:!0,setAttributes:v?v==="horizontal"?"width":"height":!0,dimensions:{width:Y.width,height:Y.height}};D.push(X)}for(const P of Z){const X={...P,type:"position"};D.push(X)}te(D)},onEnd:({width:Y,height:Z})=>{const te={id:N,type:"dimensions",resizing:!1,dimensions:{width:Y,height:Z}};k.getState().triggerNodeChanges([te])}})),G.current.update({controlPosition:L,boundaries:{minWidth:h,minHeight:p,maxWidth:m,maxHeight:y},keepAspectRatio:x,resizeDirection:v,onResizeStart:M,onResize:E,onResizeEnd:A,shouldResize:w}),()=>{G.current?.destroy()}},[L,h,p,m,y,x,M,E,A,w]);const F=L.split("-");return r.jsx("div",{className:st(["react-flow__resize-control","nodrag",...F,l,o]),ref:U,style:{...c,scale:V,...f&&{[O?"backgroundColor":"borderColor"]:f}},children:d})}T.memo(GO);function XO({data:n}){const l={NEW_CONVERSATION:"New conversation",KEYWORDS:"Text contains specific keywords",HAS_TAGS:"Contact has specific tags",PIPELINE_UPDATE:"Contact has been affected to a pipeline",SHORT_RESPONSE:"Advanced Short response"}[n.triggerType]||"Select option";return r.jsxs("div",{className:"min-w-[280px] bg-white dark:bg-[#0F0F0F] rounded-lg shadow-md border border-gray-200 dark:border-[#262626] font-sans transition-colors duration-200",children:[r.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-[#262626]",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"bg-indigo-600 rounded p-1",children:r.jsx(tr,{size:14,className:"text-white",fill:"white"})}),r.jsx("span",{className:"text-gray-700 dark:text-neutral-200 font-semibold text-sm",children:"Trigger"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-neutral-400 leading-snug",children:"Define the input parameters to trigger the workflow, to ensure that accurate information is captured in the conversation flow."})]}),r.jsxs("div",{className:"p-4",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-700 dark:text-neutral-300 mb-2",children:"Starting Step"}),r.jsx("div",{className:"relative",children:r.jsxs("div",{className:"w-full bg-gray-50 dark:bg-[#1A1A1A] text-gray-700 dark:text-neutral-200 text-sm px-3 py-2.5 rounded border border-gray-200 dark:border-[#404040] flex items-center justify-between",children:[r.jsx("span",{className:"truncate",children:l}),r.jsx(zi,{size:16,className:"text-gray-400"})]})}),n.triggerType==="KEYWORDS"&&n.keyword&&r.jsxs("div",{className:"mt-2 text-xs text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-1 rounded border border-indigo-100 dark:border-indigo-800",children:['Contains: "',n.keyword,'"']})]}),r.jsx(xn,{type:"source",position:pe.Right,className:"!bg-emerald-400 !w-4 !h-4 !border-4 !border-white dark:!border-[#0F0F0F] !-right-2"})]})}const ZO={text:dr,media:pi,buttons:Vp,list:Kd,template:Ci,addGroup:mn,removeGroup:Wd,addTag:Do,removeTag:Bp,addPipeline:Up,removePipeline:rn,delay:xi},Ep=(n,s,l=!1)=>{const o=n.selectionStart,c=n.selectionEnd,d=n.value,f=d.substring(0,o),h=d.substring(c),p=d.substring(o,c);let m,y;l?(m=f+s+p+s+h,y=o+s.length+p.length+s.length):(m=f+s+h,y=o+s.length),Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value").set.call(n,m),n.dispatchEvent(new Event("input",{bubbles:!0})),n.focus(),n.setSelectionRange(y,y)},QO=({label:n,icon:s,actions:l})=>{const[o,c]=T.useState(!1),[d,f]=T.useState(!1),[h,p]=T.useState(n),m=T.useRef(null),y=T.useRef(null);T.useEffect(()=>{const _=w=>{m.current&&!m.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),T.useEffect(()=>{d&&y.current&&(y.current.focus(),y.current.select())},[d]);const x=()=>{h.trim()?l.onRename(h):p(n),f(!1)},v=_=>{_.key==="Enter"&&x(),_.key==="Escape"&&(p(n),f(!1))};return r.jsxs("div",{className:"flex items-center justify-between mb-3 h-8",children:[r.jsxs("div",{className:"flex items-center gap-2 font-semibold text-gray-800 dark:text-gray-100 flex-1 min-w-0",children:[s&&r.jsx(s,{size:18,className:"text-gray-500 dark:text-gray-400 flex-shrink-0"}),d?r.jsx("input",{ref:y,type:"text",className:"nodrag w-full bg-white dark:bg-[#1A1A1A] border border-indigo-500 rounded px-1 py-0.5 text-sm outline-none text-gray-800 dark:text-gray-100",value:h,onChange:_=>p(_.target.value),onBlur:x,onKeyDown:v,onClick:_=>_.stopPropagation()}):r.jsx("span",{className:"truncate cursor-text",onDoubleClick:()=>f(!0),title:"Double click to rename",children:n})]}),r.jsxs("div",{className:"relative flex-shrink-0 ml-2",ref:m,children:[r.jsx("button",{onClick:_=>{_.stopPropagation(),c(!o)},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:r.jsx($p,{size:16,className:"text-gray-400 dark:text-gray-500"})}),o&&r.jsxs("div",{className:"absolute right-0 top-full mt-1 w-40 bg-white dark:bg-[#1A1A1A] rounded-lg shadow-xl border border-gray-100 dark:border-[#333] z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-100",children:[r.jsxs("button",{onClick:_=>{_.stopPropagation(),p(n),f(!0),c(!1)},className:"w-full text-left px-3 py-2 text-xs text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#252525] flex items-center gap-2 transition-colors",children:[r.jsx(Ei,{size:14})," Rename"]}),r.jsxs("button",{onClick:_=>{_.stopPropagation(),l.onDuplicate(),c(!1)},className:"w-full text-left px-3 py-2 text-xs text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#252525] flex items-center gap-2 transition-colors",children:[r.jsx(Jd,{size:14})," Duplicate"]}),r.jsx("div",{className:"h-px bg-gray-100 dark:bg-[#333] my-1"}),r.jsxs("button",{onClick:_=>{_.stopPropagation(),l.onDelete(),c(!1)},className:"w-full text-left px-3 py-2 text-xs text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 flex items-center gap-2 transition-colors",children:[r.jsx(rn,{size:14})," Delete"]})]})]})]})},Ko=({message:n="Please fill all the required fields"})=>r.jsxs("div",{className:"bg-red-600 text-white px-3 py-2 rounded-lg flex items-center gap-2 text-xs font-medium mb-3 shadow-sm",children:[r.jsx(Ca,{size:14,className:"flex-shrink-0"}),r.jsx("span",{children:n})]}),Uy=({inputRef:n})=>{const s=(o,c=!0)=>n.current&&Ep(n.current,o,c),l=()=>n.current&&Ep(n.current,"{{variable}}",!1);return r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>s("*"),className:"p-1.5 text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 dark:text-indigo-400 rounded hover:bg-indigo-100 dark:hover:bg-indigo-900/40",children:r.jsx(S_,{size:14})}),r.jsx("button",{onClick:()=>s("_"),className:"p-1.5 text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 dark:text-indigo-400 rounded hover:bg-indigo-100 dark:hover:bg-indigo-900/40",children:r.jsx(k_,{size:14})}),r.jsx("button",{onClick:()=>s("~"),className:"p-1.5 text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 dark:text-indigo-400 rounded hover:bg-indigo-100 dark:hover:bg-indigo-900/40",children:r.jsx(C_,{size:14})})]}),r.jsx("div",{className:"flex-1"}),r.jsx("button",{onClick:l,className:"text-xs font-semibold text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/20 px-3 py-1.5 rounded-full hover:bg-indigo-100 dark:hover:bg-indigo-900/40",children:"Add Variable"})]})},ot=({children:n,required:s})=>r.jsxs("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1",children:[s&&r.jsx("span",{className:"text-red-500 mr-1",children:"*"}),n]}),Kt=n=>r.jsx("input",{...n,className:`nodrag w-full border border-gray-200 dark:border-[#333] bg-white dark:bg-[#0A0A0A] dark:text-gray-100 rounded-lg p-2.5 text-sm focus:ring-2 focus:ring-indigo-500 outline-none ${n.className}`}),xf=n=>r.jsx("textarea",{...n,className:`nodrag w-full border border-gray-200 dark:border-[#333] bg-white dark:bg-[#0A0A0A] dark:text-gray-100 rounded-lg p-3 text-sm focus:ring-2 focus:ring-indigo-500 resize-none ${n.className}`}),FO=({data:n,onChange:s})=>{const l=n.content?.length>0,o=T.useRef(null);return r.jsxs("div",{children:[!l&&r.jsx(Ko,{}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 font-medium",children:[r.jsx("span",{className:"text-red-500",children:"*"})," Respond with a simple text message."]}),r.jsx("div",{className:"relative",children:r.jsx(xf,{ref:o,placeholder:"Enter text",minRows:3,value:n.content||"",onChange:c=>s("content",c.target.value)})}),r.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 mb-3",children:["Characters: ",(n.content||"").length,"/1098"]}),r.jsx(Uy,{inputRef:o})]})},KO=({data:n,onChange:s})=>{const[l,o]=T.useState(n.buttonType||"reply"),c=n.body?.length>0&&(l==="reply"?n.buttons?.length>0:n.cta?.url),d=T.useRef(null);T.useEffect(()=>{n.buttons||s("buttons",[])},[]);const f=()=>{(n.buttons||[]).length<3&&s("buttons",[...n.buttons||[],{id:Date.now(),label:""}])},h=(m,y)=>{const x=[...n.buttons||[]];x[m].label=y,s("buttons",x)},p=m=>{const y=[...n.buttons||[]];y.splice(m,1),s("buttons",y)};return r.jsxs("div",{className:"space-y-4",children:[!c&&r.jsx(Ko,{}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Send interactive buttons or a call to action button."}),r.jsxs("div",{children:[r.jsx(ot,{children:"Header (Optional)"}),r.jsxs("select",{className:"nodrag w-full border border-gray-200 dark:border-[#333] bg-white dark:bg-[#0A0A0A] dark:text-gray-100 rounded-lg p-2 text-sm mb-2",value:n.headerType||"None",onChange:m=>s("headerType",m.target.value),children:[r.jsx("option",{value:"None",children:"None"}),r.jsx("option",{value:"Text",children:"Text"}),r.jsx("option",{value:"Image",children:"Image"})]}),n.headerType==="Text"&&r.jsx(Kt,{placeholder:"Enter header text",value:n.headerText||"",onChange:m=>s("headerText",m.target.value)})]}),r.jsxs("div",{children:[r.jsx(ot,{required:!0,children:"Body"}),r.jsx(xf,{ref:d,placeholder:"Enter the main message",value:n.body||"",onChange:m=>s("body",m.target.value)}),r.jsx(Uy,{inputRef:d})]}),r.jsxs("div",{children:[r.jsx(ot,{children:"Footer Text (Optional)"}),r.jsx(Kt,{placeholder:"Enter footer text",value:n.footer||"",onChange:m=>s("footer",m.target.value)})]}),r.jsxs("div",{children:[r.jsx(ot,{children:"Button type:"}),r.jsxs("div",{className:"flex gap-4 mt-2",children:[r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("input",{type:"radio",checked:l==="reply",onChange:()=>{o("reply"),s("buttonType","reply")},className:"text-indigo-600"}),"Reply Buttons"]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("input",{type:"radio",checked:l==="cta",onChange:()=>{o("cta"),s("buttonType","cta")},className:"text-indigo-600"}),"CTA URL Button"]})]})]}),l==="reply"?r.jsxs("div",{className:"bg-gray-50 dark:bg-[#151515] p-3 rounded-lg border border-gray-100 dark:border-[#333]",children:[r.jsx(ot,{required:!0,children:"Reply Buttons (at least 1)"}),(n.buttons||[]).map((m,y)=>r.jsxs("div",{className:"mb-3",children:[r.jsx(ot,{children:`Button ${y+1} Label`}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Kt,{value:m.label,onChange:x=>h(y,x.target.value),placeholder:"Label",maxLength:20}),r.jsx("button",{onClick:()=>p(y),className:"text-red-500 hover:bg-red-50 p-2 rounded",children:r.jsx(rn,{size:16})})]}),r.jsxs("div",{className:"text-xs text-gray-400 text-right",children:[m.label.length,"/20"]})]},y)),(n.buttons?.length||0)<3&&r.jsx("button",{onClick:f,className:"w-full py-2 border border-dashed border-gray-300 dark:border-[#444] rounded text-gray-500 text-sm hover:bg-gray-100 dark:hover:bg-[#222]",children:"+ Add Button"})]}):r.jsxs("div",{className:"bg-gray-50 dark:bg-[#151515] p-3 rounded-lg border border-gray-100 dark:border-[#333]",children:[r.jsxs("div",{className:"mb-3",children:[r.jsx(ot,{required:!0,children:"Display Text"}),r.jsx(Kt,{value:n.cta?.displayText||"",onChange:m=>s("cta",{...n.cta,displayText:m.target.value})})]}),r.jsxs("div",{children:[r.jsx(ot,{required:!0,children:"URL"}),r.jsx(Kt,{value:n.cta?.url||"",onChange:m=>s("cta",{...n.cta,url:m.target.value}),placeholder:"https://"})]})]})]})},IO=({data:n,onChange:s})=>{const l=n.body?.length>0&&n.buttonLabel&&n.sections?.length>0,o=()=>{s("sections",[...n.sections||[],{id:Date.now(),title:"",rows:[{id:Date.now()+1,title:""}]}])},c=(h,p,m)=>{const y=[...n.sections||[]];y[h][p]=m,s("sections",y)},d=h=>{const p=[...n.sections||[]];p[h].rows.push({id:Date.now(),title:"",description:""}),s("sections",p)},f=(h,p,m,y)=>{const x=[...n.sections||[]];x[h].rows[p][m]=y,s("sections",x)};return r.jsxs("div",{className:"space-y-4",children:[!l&&r.jsx(Ko,{}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Send interactive list message."}),r.jsxs("div",{children:[r.jsx(ot,{children:"Header (Optional)"}),r.jsx(Kt,{value:n.headerText||"",onChange:h=>s("headerText",h.target.value)})]}),r.jsxs("div",{children:[r.jsx(ot,{required:!0,children:"Body"}),r.jsx(xf,{value:n.body||"",onChange:h=>s("body",h.target.value)})]}),r.jsxs("div",{children:[r.jsx(ot,{children:"Footer (Optional)"}),r.jsx(Kt,{value:n.footer||"",onChange:h=>s("footer",h.target.value)})]}),r.jsxs("div",{children:[r.jsx(ot,{required:!0,children:"Button Label"}),r.jsx(Kt,{value:n.buttonLabel||"",onChange:h=>s("buttonLabel",h.target.value),placeholder:"View List"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx(ot,{required:!0,children:"Sections"}),r.jsx("button",{onClick:o,className:"text-xs bg-indigo-50 text-indigo-600 px-2 py-1 rounded",children:"Add Section"})]}),(n.sections||[]).map((h,p)=>r.jsxs("div",{className:"border border-gray-200 dark:border-[#333] rounded-lg p-3 mb-3 bg-gray-50 dark:bg-[#151515]",children:[r.jsxs("div",{className:"mb-2",children:[r.jsx(ot,{required:!0,children:"Section Title"}),r.jsx(Kt,{value:h.title,onChange:m=>c(p,"title",m.target.value)})]}),r.jsxs("div",{className:"ml-2 pl-2 border-l-2 border-indigo-100 dark:border-[#333]",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx(ot,{children:"Rows"}),r.jsx("button",{onClick:()=>d(p),className:"text-xs text-indigo-500",children:"+ Row"})]}),h.rows.map((m,y)=>r.jsxs("div",{className:"mb-3 grid grid-cols-2 gap-2",children:[r.jsx("div",{className:"col-span-2",children:r.jsx(Kt,{placeholder:"Row Title",value:m.title,onChange:x=>f(p,y,"title",x.target.value)})}),r.jsx(Kt,{placeholder:"ID",value:m.id,onChange:x=>f(p,y,"id",x.target.value)}),r.jsx(Kt,{placeholder:"Desc",value:m.description,onChange:x=>f(p,y,"description",x.target.value)})]},m.id))]})]},h.id))]})]})},JO=({data:n,onChange:s})=>{const l=[{name:"welcome_msg",id:"1",lang:"en",variables:0},{name:"offer_alert",id:"2",lang:"en",variables:1}];return r.jsxs("div",{children:[r.jsxs("div",{className:"mb-4",children:[r.jsx(ot,{required:!0,children:"Select Template"}),r.jsxs("select",{className:"nodrag w-full border border-gray-200 dark:border-[#333] bg-white dark:bg-[#0A0A0A] dark:text-gray-100 rounded-lg p-2.5 text-sm",value:n.template?.id||"",onChange:o=>{const c=l.find(d=>d.id===o.target.value);s("template",c)},children:[r.jsx("option",{value:"",children:"Select a template..."}),l.map(o=>r.jsx("option",{value:o.id,children:o.name},o.id))]})]}),n.template&&r.jsxs("div",{className:"bg-gray-50 dark:bg-[#151515] rounded-xl p-4 border border-gray-200 dark:border-[#333]",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2 font-semibold text-gray-800 dark:text-gray-100",children:[r.jsx(Ci,{size:18,className:"text-teal-600"}),r.jsx("span",{children:n.template.name})]}),r.jsxs("div",{className:"flex gap-2 text-gray-400",children:[r.jsx(Ei,{size:16,className:"cursor-pointer hover:text-gray-600"}),r.jsx(rn,{size:16,className:"cursor-pointer hover:text-red-500",onClick:()=>s("template",null)})]})]}),r.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[r.jsxs("div",{children:["ID: ",n.template.id]}),r.jsxs("div",{children:["Lang: ",n.template.lang]}),r.jsxs("div",{children:["Variables: ",n.template.variables]})]}),r.jsx("div",{className:"mt-3 flex justify-end",children:r.jsx("span",{className:"bg-gray-200 dark:bg-[#333] text-gray-600 dark:text-gray-300 px-2 py-0.5 rounded text-xs",children:"Inactive"})})]})]})},WO=({data:n,onChange:s,type:l})=>{const o=[{id:"1",name:"VIP Customers"},{id:"2",name:"Leads"}],c=l==="addGroup";return r.jsxs("div",{className:"bg-gray-50 dark:bg-[#151515] rounded-xl p-4 border border-gray-200 dark:border-[#333]",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2 font-semibold text-gray-800 dark:text-gray-100",children:[c?r.jsx(mn,{size:18,className:"text-teal-600"}):r.jsx(Wd,{size:18,className:"text-teal-600"}),r.jsx("span",{children:c?"Add to Group":"Remove from Group"})]}),r.jsxs("div",{className:"flex gap-2 text-gray-400",children:[r.jsx(Ei,{size:16}),r.jsx(rn,{size:16})]})]}),r.jsxs("div",{className:"mb-2",children:[r.jsx(ot,{children:c?"Add to:":"Remove from:"}),r.jsxs("select",{className:"nodrag w-full bg-transparent border-b border-gray-300 dark:border-[#444] py-1 text-sm focus:border-indigo-500 outline-none dark:text-gray-200",value:n.groupId||"",onChange:d=>s("groupId",d.target.value),children:[r.jsx("option",{value:"",children:"No group selected"}),o.map(d=>r.jsx("option",{value:d.id,children:d.name},d.id))]})]}),r.jsxs("div",{className:"flex justify-between items-center mt-4",children:[r.jsx("span",{className:"text-xs text-gray-500",children:"Action"}),r.jsx("span",{className:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 px-3 py-1 rounded-full text-xs font-medium",children:"Active"})]})]})},PO=({data:n,onChange:s})=>{const l=n.mediaType&&n.file;return r.jsxs("div",{children:[!l&&r.jsx(Ko,{}),r.jsx(ot,{required:!0,children:"Media Type"}),r.jsxs("select",{className:"nodrag w-full border border-gray-200 dark:border-[#333] rounded-lg p-2 mb-2 dark:bg-[#0A0A0A] dark:text-white",value:n.mediaType,onChange:o=>s("mediaType",o.target.value),children:[r.jsx("option",{children:"Image"}),r.jsx("option",{children:"Video"})]}),r.jsx(ot,{children:"Upload"}),r.jsx("div",{className:"border border-dashed p-4 rounded text-center dark:border-[#333] text-gray-500",children:r.jsx("input",{type:"file",onChange:o=>s("file",o.target.files[0])})})]})};function eL({id:n,data:s}){const{setNodes:l,deleteElements:o,getNodes:c}=Zo(),d=T.useCallback((m,y)=>{l(x=>x.map(v=>v.id===n?{...v,data:{...v.data,[m]:y}}:v))},[n,l]),f={onDelete:()=>o({nodes:[{id:n}]}),onDuplicate:()=>{const m=c().find(y=>y.id===n);m&&l(y=>y.concat({...m,id:`${m.data.subType}-${Date.now()}`,position:{x:m.position.x+50,y:m.position.y+50},selected:!1}))},onRename:m=>d("label",m)},h=ZO[s.subType]||dr,p=()=>{switch(s.subType){case"text":return r.jsx(FO,{data:s,onChange:d});case"buttons":return r.jsx(KO,{data:s,onChange:d});case"list":return r.jsx(IO,{data:s,onChange:d});case"template":return r.jsx(JO,{data:s,onChange:d});case"addGroup":case"removeGroup":return r.jsx(WO,{data:s,onChange:d,type:s.subType});case"media":return r.jsx(PO,{data:s,onChange:d});default:return r.jsxs("div",{className:"text-gray-500 text-center py-4",children:["Coming Soon: ",s.subType]})}};return r.jsxs("div",{className:"min-w-[320px] max-w-[360px] bg-white dark:bg-[#0F0F0F] rounded-xl shadow-lg border border-gray-200 dark:border-[#262626] font-sans transition-colors duration-200",children:[r.jsx(xn,{type:"target",position:pe.Left,className:"!bg-gray-400 dark:!bg-neutral-600 !w-3 !h-3 !-left-1.5"}),r.jsxs("div",{className:"p-5",children:[["addGroup","removeGroup"].includes(s.subType)?null:r.jsx(QO,{label:s.label,icon:h,actions:f}),p()]}),r.jsx(xn,{type:"source",position:pe.Right,className:"!bg-gray-400 dark:!bg-neutral-600 !w-3 !h-3 !-right-1.5"})]})}function tL({data:n}){return r.jsxs("div",{className:"min-w-[240px] bg-white dark:bg-[#0F0F0F] rounded-lg shadow-sm border border-gray-200 dark:border-[#262626] transition-colors duration-200",children:[r.jsx(xn,{type:"target",position:pe.Top,className:"!bg-gray-400 dark:!bg-neutral-600 !w-3 !h-3"}),r.jsxs("div",{className:"p-3 border-b border-gray-50 dark:border-[#262626] flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-teal-50 dark:bg-teal-900/10 flex items-center justify-center border border-teal-100 dark:border-teal-900/30",children:r.jsx(bo,{size:16,className:"text-teal-600 dark:text-teal-400"})}),r.jsx("span",{className:"text-sm font-semibold text-gray-800 dark:text-neutral-100",children:"Condition"})]}),r.jsxs("div",{className:"p-3",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-neutral-500 mb-2",children:"Check if..."}),r.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-neutral-200 bg-gray-50 dark:bg-[#1A1A1A] p-2 rounded border border-gray-100 dark:border-[#262626]",children:n.condition||'User replies "Yes"'}),r.jsxs("div",{className:"flex justify-between mt-4",children:[r.jsx("div",{className:"text-xs font-semibold text-green-600 dark:text-green-400 uppercase",children:"True"}),r.jsx("div",{className:"text-xs font-semibold text-red-600 dark:text-red-400 uppercase",children:"False"})]})]}),r.jsx(xn,{type:"source",position:pe.Bottom,id:"true",className:"!bg-green-500 !w-3 !h-3 !left-[25%]"}),r.jsx(xn,{type:"source",position:pe.Bottom,id:"false",className:"!bg-red-500 !w-3 !h-3 !left-[75%]"})]})}const nL={trigger:XO,condition:tL,action:eL},aL=[{id:"messages",title:"cat_messages",items:[{id:"text",label:"node_text",icon:dr,subType:"text"},{id:"media",label:"node_media",icon:pi,subType:"media"},{id:"buttons",label:"node_buttons",icon:Vp,subType:"buttons"},{id:"list",label:"node_list",icon:Kd,subType:"list"},{id:"template",label:"node_template",icon:Ci,subType:"template"}]},{id:"groups",title:"cat_groups",items:[{id:"addGroup",label:"node_add_group",icon:mn,subType:"addGroup"},{id:"removeGroup",label:"node_remove_group",icon:Wd,subType:"removeGroup"}]},{id:"tags",title:"cat_tags",items:[{id:"addTag",label:"node_add_tag",icon:Do,subType:"addTag"},{id:"removeTag",label:"node_remove_tag",icon:Bp,subType:"removeTag"}]},{id:"funnel",title:"cat_funnel",items:[{id:"addPipeline",label:"node_add_pipeline",icon:Up,subType:"addPipeline"},{id:"removePipeline",label:"node_remove_pipeline",icon:rn,subType:"removePipeline"}]},{id:"others",title:"cat_others",items:[{id:"delay",label:"node_delay",icon:xi,subType:"delay"}]}],sL=[{value:"NEW_CONVERSATION",label:"trigger_new_conversation"},{value:"KEYWORDS",label:"trigger_keywords"},{value:"HAS_TAGS",label:"trigger_has_tags"},{value:"PIPELINE_UPDATE",label:"trigger_pipeline_update"},{value:"SHORT_RESPONSE",label:"trigger_short_response"}];function rL(){const{t:n}=ut(),{id:s}=Yp(),l=rs(),o=s==="new",c=T.useRef(null),[d,f,h]=mO([]),[p,m,y]=pO([]),[x,v]=T.useState("Untitled Flow"),[_,w]=T.useState("NEW_CONVERSATION"),[M,E]=T.useState({}),[A,z]=T.useState(!1),[N,k]=T.useState(!1),[U,O]=T.useState({messages:!0,groups:!0,tags:!0,funnel:!1,others:!0}),[V,G]=T.useState(null);T.useEffect(()=>{o?f([{id:"trigger-1",type:"trigger",data:{triggerType:"NEW_CONVERSATION"},position:{x:100,y:300},deletable:!1}]):L()},[s]),T.useEffect(()=>{f(C=>C.map(R=>R.type==="trigger"?{...R,data:{...R.data,triggerType:_,...M}}:R))},[_,M,f]);const L=async()=>{try{const C=await ce.get(`/flows/${s}`);v(C.name),w(C.triggerType||"NEW_CONVERSATION"),E(C.triggerData||{}),z(C.isActive),C.content&&C.content.nodes&&(f(C.content.nodes),m(C.content.edges||[]))}catch(C){console.error("Failed to load flow",C)}},F=T.useCallback(C=>{m(R=>Xx({...C,animated:!0,style:{stroke:"#94a3b8",strokeWidth:2}},R))},[m]),Y=async()=>{k(!0);const C={name:x,content:{nodes:d,edges:p},triggerType:_,triggerData:M,isActive:A};try{let R;o?R=await ce.post("/flows",C):R=await ce.put(`/flows/${s}`,C),o&&l(`/automations/${R.id}`,{replace:!0})}catch(R){console.error("Failed to save",R),alert(`Failed to save: ${R.message}`)}finally{k(!1)}},Z=C=>{const R={id:`${C.subType}-${Date.now()}`,type:"action",data:{label:n(C.label),subType:C.subType,description:"Click to configure"},position:{x:500,y:300}};f(j=>j.concat(R))},te=C=>{O(R=>({...R,[C]:!R[C]}))};return r.jsxs("div",{className:"h-screen flex bg-gray-50 dark:bg-[#050505] font-sans text-gray-900 dark:text-neutral-100 transition-colors duration-300",children:[r.jsxs("div",{className:"w-72 bg-white dark:bg-[#0F0F0F] border-r border-gray-200 dark:border-[#262626] flex flex-col shadow-sm z-10 transition-colors duration-300",children:[r.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-[#262626] flex items-center justify-between",children:[r.jsx("button",{onClick:()=>l("/automations"),className:"text-gray-500 hover:text-gray-800 dark:hover:text-neutral-200 transition-colors",children:r.jsx(z_,{size:18})}),r.jsx("span",{className:"font-semibold text-gray-700 dark:text-neutral-200",children:n("flow_builder_components")}),r.jsx("div",{className:"w-5"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:aL.map(C=>r.jsxs("div",{className:"border-b border-gray-100 dark:border-[#262626]",children:[r.jsxs("button",{onClick:()=>te(C.id),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-[#1A1A1A] transition-colors",children:[r.jsx("span",{className:"font-semibold text-sm text-gray-800 dark:text-neutral-200",children:n(C.title)}),U[C.id]?r.jsx(zi,{size:16,className:"text-gray-400"}):r.jsx(Lp,{size:16,className:"text-gray-400"})]}),U[C.id]&&r.jsx("div",{className:"pb-2",children:C.items.map(R=>r.jsxs("div",{onClick:()=>Z(R),className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-[#1A1A1A] cursor-pointer flex items-center gap-3 group transition-colors",children:[r.jsx(R.icon,{size:18,className:"text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-neutral-400 group-hover:text-gray-900 dark:group-hover:text-neutral-200 transition-colors",children:n(R.label)}),r.jsx("div",{className:"flex-1"}),r.jsx("span",{className:"opacity-0 group-hover:opacity-100 text-gray-400",children:r.jsxs("div",{className:"grid grid-cols-2 gap-0.5",children:[r.jsx("div",{className:"w-1 h-1 rounded-full bg-current"}),r.jsx("div",{className:"w-1 h-1 rounded-full bg-current"}),r.jsx("div",{className:"w-1 h-1 rounded-full bg-current"}),r.jsx("div",{className:"w-1 h-1 rounded-full bg-current"})]})})]},R.id))})]},C.id))})]}),r.jsxs("div",{className:"flex-1 flex flex-col relative",children:[r.jsxs("div",{className:"h-16 bg-white dark:bg-[#0F0F0F] border-b border-gray-200 dark:border-[#262626] flex items-center justify-between px-6 shadow-sm z-10 transition-colors duration-300",children:[r.jsx("div",{className:"flex items-center gap-4",children:r.jsx("input",{value:x,onChange:C=>v(C.target.value),className:"text-lg font-bold text-gray-800 dark:text-neutral-100 bg-transparent border-none focus:ring-0 placeholder-gray-400 dark:placeholder-neutral-600",placeholder:"Untitled Flow"})}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:()=>z(!A),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium border transition-colors ${A?"bg-green-50 border-green-200 text-green-700 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400":"bg-gray-50 border-gray-200 text-gray-600 hover:bg-gray-100 dark:bg-[#1A1A1A] dark:border-[#404040] dark:text-neutral-400 dark:hover:bg-[#262626]"}`,children:[A?r.jsx(Hp,{size:16}):r.jsx(tr,{size:16}),n(A?"tooltip_active":"tooltip_draft")]}),r.jsxs("button",{onClick:Y,disabled:N,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2 rounded-lg font-medium text-sm flex items-center gap-2 transition-all shadow-sm hover:shadow active:scale-95",children:[r.jsx(Rp,{size:18}),n(N?"status_saving":"btn_save_flow")]})]})]}),r.jsx("div",{className:"absolute top-20 right-6 z-20 w-80",children:V?.type==="trigger"?r.jsxs("div",{className:"bg-white dark:bg-[#0F0F0F] rounded-xl shadow-xl border border-gray-100 dark:border-[#262626] overflow-hidden animate-in fade-in slide-in-from-right-4 duration-200",children:[r.jsx("div",{className:"bg-gray-50 dark:bg-[#151515] px-4 py-3 border-b border-gray-100 dark:border-[#262626] flex items-center justify-between",children:r.jsx("span",{className:"font-semibold text-gray-700 dark:text-neutral-200 text-sm",children:n("config_trigger")})}),r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-500 dark:text-neutral-400 mb-1",children:n("label_trigger_event")}),r.jsx("select",{value:_,onChange:C=>w(C.target.value),className:"w-full text-sm border-gray-200 dark:border-[#404040] dark:bg-[#1A1A1A] dark:text-neutral-200 rounded-lg focus:ring-indigo-500 focus:border-indigo-500",children:sL.map(C=>r.jsx("option",{value:C.value,children:n(C.label)},C.value))})]}),_==="KEYWORDS"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-500 dark:text-neutral-400 mb-1",children:n("label_keywords")}),r.jsx("input",{type:"text",placeholder:"e.g. hello, pricing",className:"w-full text-sm border-gray-200 dark:border-[#404040] dark:bg-[#1A1A1A] dark:text-neutral-200 rounded-lg focus:ring-indigo-500 focus:border-indigo-500",value:M.keyword||"",onChange:C=>E({...M,keyword:C.target.value})}),r.jsx("p",{className:"text-xs text-gray-400 dark:text-neutral-500 mt-1",children:n("hint_comma_separated")})]})]})]}):null}),r.jsxs("div",{className:"flex-1 bg-slate-50 dark:bg-[#050505] relative transition-colors duration-300",ref:c,children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.4] dark:opacity-[0.1]",style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"}}),r.jsxs(hO,{nodes:d,edges:p,onNodesChange:h,onEdgesChange:y,onConnect:F,onNodeClick:(C,R)=>G(R),onPaneClick:()=>G(null),nodeTypes:nL,fitView:!0,attributionPosition:"bottom-right",className:"dark:invert-0",children:[r.jsx(_O,{color:"#cbd5e1",gap:20,size:1,className:"dark:opacity-10"}),r.jsx(zO,{className:"!bg-white dark:!bg-[#0F0F0F] !border-gray-200 dark:!border-[#262626] !shadow-sm [&>button]:!text-gray-600 dark:[&>button]:!text-neutral-400 hover:[&>button]:!bg-gray-50 dark:hover:[&>button]:!bg-[#1A1A1A]"}),r.jsx(VO,{className:"!bg-white dark:!bg-[#0F0F0F] !border-gray-200 dark:!border-[#262626] !shadow-sm",nodeColor:"#e2e8f0",maskColor:"rgba(248, 250, 252, 0.7)"})]})]})]})]})}const iL=()=>{const{t:n}=ut(),[s,l]=T.useState([]),[o,c]=T.useState(!0),[d,f]=T.useState("OPEN"),[h,p]=T.useState([]);T.useEffect(()=>{m(),y()},[d]);const m=async()=>{try{c(!0);const x=await ce.getConversations({status:d});l(x)}catch(x){console.error("Failed to fetch conversations:",x)}finally{c(!1)}},y=async()=>{try{const x=await ce.getTeamMembers();p(x)}catch(x){console.error("Failed to fetch team members:",x)}};return r.jsxs("div",{className:"inbox-page p-6 h-full flex flex-col bg-gray-50 dark:bg-black transition-colors duration-300",children:[r.jsxs("header",{className:"mb-6 flex justify-between items-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:n("inbox_title")}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>f("OPEN"),className:`px-3 py-1 rounded text-sm transition-colors ${d==="OPEN"?"bg-blue-600 dark:bg-green-600 text-white":"bg-gray-200 dark:bg-zinc-800 text-gray-700 dark:text-zinc-300"}`,children:n("filter_open")}),r.jsx("button",{onClick:()=>f("CLOSED"),className:`px-3 py-1 rounded text-sm transition-colors ${d==="CLOSED"?"bg-blue-600 dark:bg-green-600 text-white":"bg-gray-200 dark:bg-zinc-800 text-gray-700 dark:text-zinc-300"}`,children:n("filter_closed")})]})]}),r.jsx("div",{className:"bg-white dark:bg-[#09090b] rounded-lg shadow overflow-hidden flex-1 border border-gray-100 dark:border-zinc-800",children:r.jsx("div",{className:"grid grid-cols-1 divide-y divide-gray-100 dark:divide-zinc-800",children:o?r.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:n("loading_conversations")}):s.length===0?r.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:n("no_conversations")}):s.map(x=>r.jsx(ho,{to:`/inbox/${x.id}`,className:"block hover:bg-gray-50 dark:hover:bg-zinc-900/50 transition-colors p-4",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-green-900/20 flex items-center justify-center text-blue-600 dark:text-green-500 font-semibold",children:x.contact?.name?.[0]||"?"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900 dark:text-zinc-100",children:x.contact?.name||n("unknown_contact")}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 truncate max-w-md",children:x.lastMessage||n("no_messages_yet")})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-xs text-gray-400 dark:text-zinc-500",children:x.updatedAt?new Date(x.updatedAt).toLocaleString():""}),x.assignedTo?r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 mt-1",children:x.assignedTo.name}):r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 dark:bg-zinc-800 text-gray-800 dark:text-zinc-300 mt-1",children:n("label_unassigned")})]})]})},x.id))})})]})},lL=({contactId:n})=>{const{t:s}=ut(),[l,o]=T.useState([]),[c,d]=T.useState(""),[f,h]=T.useState(!0);T.useEffect(()=>{n&&p()},[n]);const p=async()=>{try{h(!0);const y=await ce.getNotes(n);o(y)}catch(y){console.error("Failed to fetch notes:",y)}finally{h(!1)}},m=async y=>{if(y.preventDefault(),!!c.trim())try{await ce.addNote({contactId:parseInt(n),content:c}),d(""),p()}catch(x){console.error("Failed to add note:",x)}};return r.jsxs("div",{className:"internal-notes bg-gray-50 dark:bg-zinc-900/30 p-4 rounded-lg border border-gray-200 dark:border-zinc-800",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-zinc-300 mb-3",children:s("notes_title")}),r.jsx("div",{className:"notes-list space-y-3 mb-4 max-h-60 overflow-y-auto",children:f?r.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400",children:s("notes_loading")}):l.length===0?r.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 italic",children:s("notes_empty")}):l.map(y=>r.jsxs("div",{className:"note-item bg-white dark:bg-zinc-900 p-2 rounded border border-gray-100 dark:border-zinc-800 shadow-sm",children:[r.jsx("p",{className:"text-xs text-gray-800 dark:text-zinc-200 whitespace-pre-wrap",children:y.content}),r.jsxs("div",{className:"flex justify-between items-center mt-1",children:[r.jsx("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400",children:y.author?y.author.name:s("notes_unknown_user")}),r.jsx("span",{className:"text-[10px] text-gray-400 dark:text-zinc-500",children:new Date(y.createdAt).toLocaleString()})]})]},y.id))}),r.jsxs("form",{onSubmit:m,className:"note-form",children:[r.jsx("textarea",{value:c,onChange:y=>d(y.target.value),placeholder:s("notes_placeholder"),className:"w-full text-xs p-2 border border-gray-300 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white rounded mb-2 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:focus:ring-green-500 dark:placeholder-zinc-500",rows:"2"}),r.jsx("button",{type:"submit",disabled:!c.trim(),className:"w-full bg-gray-600 dark:bg-zinc-700 hover:bg-gray-700 dark:hover:bg-zinc-600 text-white text-xs py-1 px-2 rounded disabled:opacity-50 transition-colors",children:s("btn_add_note")})]})]})},oL=()=>{const{t:n}=ut(),{id:s}=Yp(),l=rs(),[o,c]=T.useState(null),[d,f]=T.useState([]),[h,p]=T.useState(""),[m,y]=T.useState(!0),[x,v]=T.useState([]),_=T.useRef(null);T.useEffect(()=>{s&&(M(),E())},[s]),T.useEffect(()=>{w()},[d]);const w=()=>{_.current?.scrollIntoView({behavior:"smooth"})},M=async()=>{try{y(!0);const k=await ce.getConversation(s);c(k),f(k.messages||[])}catch(k){console.error("Failed to fetch conversation:",k)}finally{y(!1)}},E=async()=>{try{const k=await ce.getTeamMembers();v(k)}catch(k){console.error("Failed to fetch team members:",k)}},A=async k=>{if(k.preventDefault(),!!h.trim())try{const U=await ce.sendMessage(s,{content:h});f([...d,U]),p("")}catch(U){console.error("Failed to send message:",U)}},z=async k=>{const U=k.target.value;try{const O=await ce.assignConversation(s,U);c(V=>({...V,assignedTo:O.assignedTo,assignedToId:O.assignedToId}))}catch(O){console.error("Failed to assign agent:",O)}},N=async k=>{try{const U=await ce.updateConversationStatus(s,k);c(O=>({...O,status:U.status}))}catch(U){console.error("Failed to update status:",U)}};return m?r.jsx("div",{className:"p-6 text-center",children:n("conversation_loading")}):o?r.jsxs("div",{className:"conversation-page h-[calc(100vh-64px)] flex flex-col md:flex-row bg-white dark:bg-gray-900",children:[r.jsxs("div",{className:"flex-1 flex flex-col border-r border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-white dark:bg-gray-800",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:()=>l("/inbox"),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 mr-2 md:hidden",children:[" ",n("btn_back")]}),r.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400 font-semibold text-lg",children:o.contact?.name?.[0]||"C"}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-bold text-gray-800 dark:text-white",children:o.contact?.name}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:o.contact?.phone})]})]}),r.jsx("div",{className:"flex items-center gap-2",children:o.status==="OPEN"?r.jsx("button",{onClick:()=>N("CLOSED"),className:"text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 px-3 py-1 rounded",children:n("btn_mark_closed")}):r.jsx("button",{onClick:()=>N("OPEN"),className:"text-xs bg-green-50 dark:bg-green-900/10 hover:bg-green-100 dark:hover:bg-green-900/20 text-green-700 dark:text-green-400 px-3 py-1 rounded",children:n("btn_reopen")})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50 dark:bg-gray-900 space-y-4",children:[d.map(k=>{const U=k.direction==="OUTBOUND";return r.jsx("div",{className:`flex ${U?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${U?"bg-blue-600 text-white rounded-br-none":"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-800 dark:text-gray-100 rounded-bl-none"} shadow-sm`,children:[r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:k.content}),r.jsxs("div",{className:`text-[10px] mt-1 ${U?"text-blue-100":"text-gray-400 dark:text-gray-500"}`,children:[new Date(k.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),U&&k.sender&&`  ${k.sender.name}`]})]})},k.id)}),r.jsx("div",{ref:_})]}),r.jsx("div",{className:"p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("form",{onSubmit:A,className:"flex gap-2",children:[r.jsx("input",{type:"text",value:h,onChange:k=>p(k.target.value),placeholder:n("placeholder_type_message"),className:"flex-1 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:placeholder-gray-400"}),r.jsx("button",{type:"submit",disabled:!h.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-colors",children:n("btn_send")})]})})]}),r.jsxs("div",{className:"w-full md:w-80 bg-white dark:bg-gray-800 p-4 overflow-y-auto border-l border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:n("label_assignment")}),r.jsxs("select",{value:o.assignedToId||"",onChange:z,className:"w-full p-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:n("label_unassigned")}),x.map(k=>r.jsx("option",{value:k.id,children:k.name},k.id))]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:n("label_contact_info")}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded border border-gray-100 dark:border-gray-600",children:[r.jsxs("p",{className:"text-sm text-gray-800 dark:text-gray-200 mb-1",children:[r.jsx("span",{className:"font-semibold",children:n("label_name")})," ",o.contact?.name]}),r.jsxs("p",{className:"text-sm text-gray-800 dark:text-gray-200 mb-1",children:[r.jsx("span",{className:"font-semibold",children:n("label_phone")})," ",o.contact?.phone]}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:o.contact?.tags?.map((k,U)=>r.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 px-2 py-0.5 rounded-full",children:k},U))})]})]}),r.jsx(lL,{contactId:o.contactId})]})]}):r.jsx("div",{className:"p-6 text-center",children:n("conversation_not_found")})},cL=()=>{const{t:n}=ut(),[s,l]=T.useState([]),[o,c]=T.useState(!0),[d,f]=T.useState("Verified"),[h,p]=T.useState(!1),[m,y]=T.useState({name:"",email:"",role:"AGENT",avatar:""});T.useEffect(()=>{x()},[]);const x=async()=>{try{c(!0);const M=await ce.getTeamMembers();l(M)}catch(M){console.error("Failed to fetch team members:",M)}finally{c(!1)}},v=M=>{const{name:E,value:A}=M.target;y(z=>({...z,[E]:A}))},_=async M=>{M.preventDefault();try{await ce.addTeamMember(m),x(),p(!1),y({name:"",email:"",role:"AGENT",avatar:""})}catch(E){console.error("Failed to add team member:",E),alert(n("error_add_member"))}},w=async M=>{if(window.confirm(n("confirm_remove_member")))try{await ce.deleteTeamMember(M),x()}catch(E){console.error("Failed to delete member:",E)}};return r.jsxs("div",{className:"team-page p-6 bg-gray-50 dark:bg-black min-h-full transition-colors duration-300",children:[r.jsxs("div",{className:"flex gap-8 border-b border-gray-200 dark:border-zinc-800 mb-8",children:[r.jsxs("button",{className:`pb-3 text-sm font-medium transition-colors relative ${d==="Verified"?"text-blue-600 dark:text-green-500":"text-gray-500 dark:text-zinc-500 hover:text-gray-700 dark:hover:text-zinc-300"}`,onClick:()=>f("Verified"),children:[n("tab_verified"),d==="Verified"&&r.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 dark:bg-green-500 rounded-t-full"})]}),r.jsxs("button",{className:`pb-3 text-sm font-medium transition-colors relative ${d==="Unverified"?"text-blue-600 dark:text-green-500":"text-gray-500 dark:text-zinc-500 hover:text-gray-700 dark:hover:text-zinc-300"}`,onClick:()=>f("Unverified"),children:[n("tab_unverified"),d==="Unverified"&&r.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 dark:bg-green-500 rounded-t-full"})]})]}),r.jsxs("div",{className:"flex justify-between items-start mb-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:n("team_title")}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:n("team_subtitle")})]}),r.jsxs("button",{onClick:()=>p(!0),className:"bg-blue-600 hover:bg-blue-700 dark:bg-green-600 dark:hover:bg-green-700 text-white px-4 py-2 rounded-full text-sm font-medium flex items-center gap-2 transition-colors shadow-sm",children:[n("btn_invite_user")," ",r.jsx(ka,{size:16})]})]}),r.jsxs("div",{className:"bg-white dark:bg-[#09090b] p-4 rounded-xl shadow-sm mb-6 flex justify-between items-center border border-gray-100 dark:border-zinc-800",children:[r.jsxs("div",{className:"relative w-64",children:[r.jsx(Id,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500",size:18}),r.jsx("input",{type:"text",placeholder:n("placeholder_search_team"),className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-zinc-900/50 border-none rounded-lg text-sm focus:ring-2 focus:ring-blue-100 dark:focus:ring-green-900 focus:bg-white dark:focus:bg-zinc-900 transition-all outline-none text-gray-700 dark:text-zinc-200 placeholder-gray-400 dark:placeholder-zinc-600"})]}),r.jsxs("button",{className:"flex items-center gap-2 text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-200 border border-gray-200 dark:border-zinc-800 hover:border-gray-300 dark:hover:border-zinc-700 rounded-lg px-3 py-2 text-sm transition-all bg-white dark:bg-[#09090b]",children:[r.jsx(E_,{size:16}),n("btn_columns")]})]}),r.jsx("div",{className:"bg-white dark:bg-[#09090b] rounded-xl shadow-sm overflow-hidden border border-gray-100 dark:border-zinc-800",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-50/50 dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800",children:[r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:n("col_name")}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:n("col_email")}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:n("col_role")}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:n("col_active")}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:n("col_assignable")}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:n("col_last_updated")}),r.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-900 dark:text-zinc-200",children:n("col_actions")})]})}),r.jsx("tbody",{className:"divide-y divide-gray-50 dark:divide-zinc-800",children:o?r.jsx("tr",{children:r.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500 dark:text-zinc-500 text-sm",children:n("loading")})}):s.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500 dark:text-zinc-500 text-sm",children:n("no_team_members")})}):s.map(M=>r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-zinc-900/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"flex items-center",children:r.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-zinc-200",children:M.name})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-zinc-400",children:M.email}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"text-sm text-gray-900 dark:text-zinc-300 capitalize",children:M.role.toLowerCase()})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsx("div",{className:"w-8 h-4 bg-green-200 dark:bg-green-900/40 rounded-full relative cursor-pointer",children:r.jsx("div",{className:"absolute right-0.5 top-0.5 w-3 h-3 bg-white rounded-full shadow-sm"})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsx("input",{type:"checkbox",className:"rounded text-blue-600 dark:text-green-600 focus:ring-blue-500 dark:focus:ring-green-500 border-gray-300 dark:border-zinc-700 dark:bg-zinc-900",defaultChecked:!0})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-zinc-500",children:[new Date(M.updatedAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})," ",new Date(M.updatedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:r.jsx("button",{onClick:()=>w(M.id),className:"text-gray-400 dark:text-zinc-600 hover:text-red-600 dark:hover:text-red-500 transition-colors",children:n("btn_delete")})})]},M.id))})]})}),h&&r.jsx("div",{className:"fixed inset-0 bg-black/20 dark:bg-black/70 backdrop-blur-sm overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:r.jsxs("div",{className:"relative p-6 border dark:border-zinc-800 w-96 shadow-2xl rounded-xl bg-white dark:bg-[#09090b] animate-fade-in up",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:n("modal_invite_title")}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 mb-4",children:n("modal_invite_subtitle")}),r.jsxs("form",{onSubmit:_,children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 dark:text-zinc-300 text-xs font-semibold mb-1.5 uppercase tracking-wide",children:n("col_name")}),r.jsx("input",{type:"text",name:"name",value:m.name,onChange:v,className:"w-full px-3 py-2 border border-gray-200 dark:border-zinc-800 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-green-500/20 focus:border-blue-500 dark:focus:border-green-500 transition-all placeholder-gray-300 dark:placeholder-zinc-600 dark:bg-zinc-900 dark:text-white",placeholder:"Jane Doe",required:!0})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 dark:text-zinc-300 text-xs font-semibold mb-1.5 uppercase tracking-wide",children:n("col_email")}),r.jsx("input",{type:"email",name:"email",value:m.email,onChange:v,className:"w-full px-3 py-2 border border-gray-200 dark:border-zinc-800 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-green-500/20 focus:border-blue-500 dark:focus:border-green-500 transition-all placeholder-gray-300 dark:placeholder-zinc-600 dark:bg-zinc-900 dark:text-white",placeholder:"jane@example.com",required:!0})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-gray-700 dark:text-zinc-300 text-xs font-semibold mb-1.5 uppercase tracking-wide",children:n("col_role")}),r.jsxs("select",{name:"role",value:m.role,onChange:v,className:"w-full px-3 py-2 border border-gray-200 dark:border-zinc-800 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-green-500/20 focus:border-blue-500 dark:focus:border-green-500 transition-all bg-white dark:bg-zinc-900 dark:text-white",children:[r.jsx("option",{value:"AGENT",children:n("role_agent")}),r.jsx("option",{value:"MANAGER",children:n("role_manager")}),r.jsx("option",{value:"ADMIN",children:n("role_admin")})]})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 bg-gray-100 dark:bg-zinc-900 text-gray-700 dark:text-zinc-300 text-sm font-medium rounded-lg hover:bg-gray-200 dark:hover:bg-zinc-800 transition-colors",children:n("btn_cancel")}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 dark:bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 dark:hover:bg-green-700 shadow-sm shadow-blue-200 dark:shadow-none transition-colors",children:n("btn_send_invitation")})]})]})]})})]})};function uL(){return r.jsx(sA,{children:r.jsx(rA,{children:r.jsx(nA,{children:r.jsx(M_,{children:r.jsxs(D_,{children:[r.jsx(vt,{path:"/login",element:r.jsx(fA,{})}),r.jsxs(vt,{path:"/",element:r.jsx(iA,{children:r.jsx(lA,{})}),children:[r.jsx(vt,{index:!0,element:r.jsx(oA,{})}),r.jsx(vt,{path:"contacts",element:r.jsx(uA,{})}),r.jsx(vt,{path:"lists",element:r.jsx(dA,{})}),r.jsx(vt,{path:"campaigns",element:r.jsx(hA,{})}),r.jsx(vt,{path:"campaigns/new",element:r.jsx(gA,{})}),r.jsx(vt,{path:"templates",element:r.jsx(xA,{})}),r.jsx(vt,{path:"media",element:r.jsx(mA,{})}),r.jsx(vt,{path:"settings",element:r.jsx(yA,{})}),r.jsx(vt,{path:"automations",element:r.jsx(bA,{})}),r.jsx(vt,{path:"automations/:id",element:r.jsx(rL,{})}),r.jsx(vt,{path:"inbox",element:r.jsx(iL,{})}),r.jsx(vt,{path:"inbox/:id",element:r.jsx(oL,{})}),r.jsx(vt,{path:"team",element:r.jsx(cL,{})})]})]})})})})})}B_.createRoot(document.getElementById("root")).render(r.jsx(T.StrictMode,{children:r.jsx(uL,{})}));
