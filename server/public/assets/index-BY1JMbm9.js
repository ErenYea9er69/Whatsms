import{a as Gv,b as Xv,r as A,c as Zv,R as Wm,A as Qv,C as Pm,X as e0,Y as t0,T as n0,d as fd,B as Fv,e as gd,f as ai,i as Kv,g as a0,h as Iv,j as s0,k as Jv,l as Wv,m as fo,n as hd,u as Pv}from"./recharts-CLtLozKo.js";import{X as At,I as e_,C as Ca,a as Ep,b as Ad,L as zp,c as t_,U as n_,d as hn,e as Fd,M as a_,H as s_,f as kr,G as yo,g as mr,S as Td,h as i0,i as i_,j as r_,k as Ao,l as pr,R as To,m as ei,P as ka,T as r0,A as l0,n as Md,o as l_,F as di,p as Gn,q as gn,r as Ap,s as Kd,t as Mo,u as Cr,v as o_,w as sn,x as o0,y as Tp,z as c_,B as u_,D as d_,E as f_,W as md,J as g_,K as Mp,N as Id,O as xr,Q as Dp,V as ti,Y as h_,Z as m_,_ as p_,$ as x_,a0 as Er,a1 as y_,a2 as b_,a3 as v_,a4 as __,a5 as N_,a6 as Op,a7 as c0,a8 as Lp,a9 as Rp,aa as w_,ab as $p,ac as Hp,ad as Jd,ae as Up,af as j_,ag as S_,ah as k_,ai as C_,aj as E_}from"./icons-C4Q21nuZ.js";import{u as Bp,N as z_,a as is,b as ao,O as A_,L as go,c as Vp,B as T_,R as M_,d as vt}from"./router-BJ1N55rV.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function l(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(c){if(c.ep)return;c.ep=!0;const d=l(c);fetch(c.href,d)}})();var pd={exports:{}},ir={};var u0;function D_(){if(u0)return ir;u0=1;var n=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function l(o,c,d){var f=null;if(d!==void 0&&(f=""+d),c.key!==void 0&&(f=""+c.key),"key"in c){d={};for(var h in c)h!=="key"&&(d[h]=c[h])}else d=c;return c=d.ref,{$$typeof:n,type:o,key:f,ref:c!==void 0?c:null,props:d}}return ir.Fragment=s,ir.jsx=l,ir.jsxs=l,ir}var d0;function O_(){return d0||(d0=1,pd.exports=D_()),pd.exports}var i=O_(),xd={exports:{}},rr={},yd={exports:{}},bd={};var f0;function L_(){return f0||(f0=1,(function(n){function s(j,D){var H=j.length;j.push(D);e:for(;0<H;){var Y=H-1>>>1,ee=j[Y];if(0<c(ee,D))j[Y]=D,j[H]=ee,H=Y;else break e}}function l(j){return j.length===0?null:j[0]}function o(j){if(j.length===0)return null;var D=j[0],H=j.pop();if(H!==D){j[0]=H;e:for(var Y=0,ee=j.length,Q=ee>>>1;Y<Q;){var W=2*(Y+1)-1,se=j[W],le=W+1,de=j[le];if(0>c(se,H))le<ee&&0>c(de,se)?(j[Y]=de,j[le]=H,Y=le):(j[Y]=se,j[W]=H,Y=W);else if(le<ee&&0>c(de,H))j[Y]=de,j[le]=H,Y=le;else break e}}return D}function c(j,D){var H=j.sortIndex-D.sortIndex;return H!==0?H:j.id-D.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;n.unstable_now=function(){return d.now()}}else{var f=Date,h=f.now();n.unstable_now=function(){return f.now()-h}}var p=[],m=[],y=1,x=null,v=3,N=!1,S=!1,T=!1,E=!1,z=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function C(j){for(var D=l(m);D!==null;){if(D.callback===null)o(m);else if(D.startTime<=j)o(m),D.sortIndex=D.expirationTime,s(p,D);else break;D=l(m)}}function $(j){if(T=!1,C(j),!S)if(l(p)!==null)S=!0,O||(O=!0,Z());else{var D=l(m);D!==null&&U($,D.startTime-j)}}var O=!1,V=-1,G=5,L=-1;function F(){return E?!0:!(n.unstable_now()-L<G)}function q(){if(E=!1,O){var j=n.unstable_now();L=j;var D=!0;try{e:{S=!1,T&&(T=!1,w(V),V=-1),N=!0;var H=v;try{t:{for(C(j),x=l(p);x!==null&&!(x.expirationTime>j&&F());){var Y=x.callback;if(typeof Y=="function"){x.callback=null,v=x.priorityLevel;var ee=Y(x.expirationTime<=j);if(j=n.unstable_now(),typeof ee=="function"){x.callback=ee,C(j),D=!0;break t}x===l(p)&&o(p),C(j)}else o(p);x=l(p)}if(x!==null)D=!0;else{var Q=l(m);Q!==null&&U($,Q.startTime-j),D=!1}}break e}finally{x=null,v=H,N=!1}D=void 0}}finally{D?Z():O=!1}}}var Z;if(typeof _=="function")Z=function(){_(q)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,M=te.port2;te.port1.onmessage=q,Z=function(){M.postMessage(null)}}else Z=function(){z(q,0)};function U(j,D){V=z(function(){j(n.unstable_now())},D)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(j){switch(v){case 1:case 2:case 3:var D=3;break;default:D=v}var H=v;v=D;try{return j()}finally{v=H}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(j,D){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var H=v;v=j;try{return D()}finally{v=H}},n.unstable_scheduleCallback=function(j,D,H){var Y=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Y+H:Y):H=Y,j){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=H+ee,j={id:y++,callback:D,priorityLevel:j,startTime:H,expirationTime:ee,sortIndex:-1},H>Y?(j.sortIndex=H,s(m,j),l(p)===null&&j===l(m)&&(T?(w(V),V=-1):T=!0,U($,H-Y))):(j.sortIndex=ee,s(p,j),S||N||(S=!0,O||(O=!0,Z()))),j},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(j){var D=v;return function(){var H=v;v=D;try{return j.apply(this,arguments)}finally{v=H}}}})(bd)),bd}var g0;function R_(){return g0||(g0=1,yd.exports=L_()),yd.exports}var h0;function $_(){if(h0)return rr;h0=1;var n=R_(),s=Gv(),l=Xv();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(d(e)!==e)throw Error(o(188))}function m(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(o(188));return t!==e?null:e}for(var a=e,r=t;;){var u=a.return;if(u===null)break;var g=u.alternate;if(g===null){if(r=u.return,r!==null){a=r;continue}break}if(u.child===g.child){for(g=u.child;g;){if(g===a)return p(u),e;if(g===r)return p(u),t;g=g.sibling}throw Error(o(188))}if(a.return!==r.return)a=u,r=g;else{for(var b=!1,k=u.child;k;){if(k===a){b=!0,a=u,r=g;break}if(k===r){b=!0,r=u,a=g;break}k=k.sibling}if(!b){for(k=g.child;k;){if(k===a){b=!0,a=g,r=u;break}if(k===r){b=!0,r=g,a=u;break}k=k.sibling}if(!b)throw Error(o(189))}}if(a.alternate!==r)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,v=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),_=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function Z(e){return e===null||typeof e!="object"?null:(e=q&&e[q]||e["@@iterator"],typeof e=="function"?e:null)}var te=Symbol.for("react.client.reference");function M(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===te?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case z:return"Profiler";case E:return"StrictMode";case $:return"Suspense";case O:return"SuspenseList";case L:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case _:return e.displayName||"Context";case w:return(e._context.displayName||"Context")+".Consumer";case C:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case V:return t=e.displayName||null,t!==null?t:M(e.type)||"Memo";case G:t=e._payload,e=e._init;try{return M(e(t))}catch{}}return null}var U=Array.isArray,j=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},Y=[],ee=-1;function Q(e){return{current:e}}function W(e){0>ee||(e.current=Y[ee],Y[ee]=null,ee--)}function se(e,t){ee++,Y[ee]=e.current,e.current=t}var le=Q(null),de=Q(null),be=Q(null),me=Q(null);function oe(e,t){switch(se(be,t),se(de,e),se(le,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?_m(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=_m(t),e=Nm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}W(le),se(le,e)}function fe(){W(le),W(de),W(be)}function je(e){e.memoizedState!==null&&se(me,e);var t=le.current,a=Nm(t,e.type);t!==a&&(se(de,e),se(le,a))}function Ne(e){de.current===e&&(W(le),W(de)),me.current===e&&(W(me),tr._currentValue=H)}var ye,_e;function Ce(e){if(ye===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);ye=t&&t[1]||"",_e=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ye+e+_e}var re=!1;function ge(e,t){if(!e||re)return"";re=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(P){var J=P}Reflect.construct(e,[],ie)}else{try{ie.call()}catch(P){J=P}e.call(ie.prototype)}}else{try{throw Error()}catch(P){J=P}(ie=e())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(P){if(P&&J&&typeof P.stack=="string")return[P.stack,J.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=r.DetermineComponentFrameRoot(),b=g[0],k=g[1];if(b&&k){var R=b.split(`
`),I=k.split(`
`);for(u=r=0;r<R.length&&!R[r].includes("DetermineComponentFrameRoot");)r++;for(;u<I.length&&!I[u].includes("DetermineComponentFrameRoot");)u++;if(r===R.length||u===I.length)for(r=R.length-1,u=I.length-1;1<=r&&0<=u&&R[r]!==I[u];)u--;for(;1<=r&&0<=u;r--,u--)if(R[r]!==I[u]){if(r!==1||u!==1)do if(r--,u--,0>u||R[r]!==I[u]){var ne=`
`+R[r].replace(" at new "," at ");return e.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",e.displayName)),ne}while(1<=r&&0<=u);break}}}finally{re=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ce(a):""}function Oe(e,t){switch(e.tag){case 26:case 27:case 5:return Ce(e.type);case 16:return Ce("Lazy");case 13:return e.child!==t&&t!==null?Ce("Suspense Fallback"):Ce("Suspense");case 19:return Ce("SuspenseList");case 0:case 15:return ge(e.type,!1);case 11:return ge(e.type.render,!1);case 1:return ge(e.type,!0);case 31:return Ce("Activity");default:return""}}function it(e){try{var t="",a=null;do t+=Oe(e,a),a=e,e=e.return;while(e);return t}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var Tt=Object.prototype.hasOwnProperty,It=n.unstable_scheduleCallback,bn=n.unstable_cancelCallback,Ea=n.unstable_shouldYield,za=n.unstable_requestPaint,dt=n.unstable_now,rs=n.unstable_getCurrentPriorityLevel,vn=n.unstable_ImmediatePriority,Qn=n.unstable_UserBlockingPriority,Aa=n.unstable_NormalPriority,Ko=n.unstable_LowPriority,ls=n.unstable_IdlePriority,Io=n.log,Jo=n.unstable_setDisableYieldValue,Ta=null,xt=null;function ln(e){if(typeof Io=="function"&&Jo(e),xt&&typeof xt.setStrictMode=="function")try{xt.setStrictMode(Ta,e)}catch{}}var yt=Math.clz32?Math.clz32:ec,Wo=Math.log,Po=Math.LN2;function ec(e){return e>>>=0,e===0?32:31-(Wo(e)/Po|0)|0}var os=256,cs=262144,us=4194304;function _n(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ds(e,t,a){var r=e.pendingLanes;if(r===0)return 0;var u=0,g=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var k=r&134217727;return k!==0?(r=k&~g,r!==0?u=_n(r):(b&=k,b!==0?u=_n(b):a||(a=k&~e,a!==0&&(u=_n(a))))):(k=r&~g,k!==0?u=_n(k):b!==0?u=_n(b):a||(a=r&~e,a!==0&&(u=_n(a)))),u===0?0:t!==0&&t!==u&&(t&g)===0&&(g=u&-u,a=t&-t,g>=a||g===32&&(a&4194048)!==0)?t:u}function Ma(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function tc(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Or(){var e=us;return us<<=1,(us&62914560)===0&&(us=4194304),e}function fi(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Da(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function nc(e,t,a,r,u,g){var b=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var k=e.entanglements,R=e.expirationTimes,I=e.hiddenUpdates;for(a=b&~a;0<a;){var ne=31-yt(a),ie=1<<ne;k[ne]=0,R[ne]=-1;var J=I[ne];if(J!==null)for(I[ne]=null,ne=0;ne<J.length;ne++){var P=J[ne];P!==null&&(P.lane&=-536870913)}a&=~ie}r!==0&&Lr(e,r,0),g!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=g&~(b&~t))}function Lr(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-yt(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|a&261930}function Rr(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var r=31-yt(a),u=1<<r;u&t|e[r]&t&&(e[r]|=t),a&=~u}}function $r(e,t){var a=t&-t;return a=(a&42)!==0?1:gi(a),(a&(e.suspendedLanes|t))!==0?0:a}function gi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function hi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Hr(){var e=D.p;return e!==0?e:(e=window.event,e===void 0?32:Xm(e.type))}function Ur(e,t){var a=D.p;try{return D.p=e,t()}finally{D.p=a}}var on=Math.random().toString(36).slice(2),rt="__reactFiber$"+on,pt="__reactProps$"+on,Nn="__reactContainer$"+on,fs="__reactEvents$"+on,Br="__reactListeners$"+on,ac="__reactHandles$"+on,Vr="__reactResources$"+on,Oa="__reactMarker$"+on;function mi(e){delete e[rt],delete e[pt],delete e[fs],delete e[Br],delete e[ac]}function Fn(e){var t=e[rt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Nn]||a[rt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=zm(e);e!==null;){if(a=e[rt])return a;e=zm(e)}return t}e=a,a=e.parentNode}return null}function Kn(e){if(e=e[rt]||e[Nn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function In(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function Jn(e){var t=e[Vr];return t||(t=e[Vr]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Pe(e){e[Oa]=!0}var qr=new Set,Yr={};function wn(e,t){Wn(e,t),Wn(e+"Capture",t)}function Wn(e,t){for(Yr[e]=t,e=0;e<t.length;e++)qr.add(t[e])}var sc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pi={},Gr={};function ic(e){return Tt.call(Gr,e)?!0:Tt.call(pi,e)?!1:sc.test(e)?Gr[e]=!0:(pi[e]=!0,!1)}function gs(e,t,a){if(ic(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function hs(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Jt(e,t,a,r){if(r===null)e.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+r)}}function Nt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xr(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rc(e,t,a){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var u=r.get,g=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(b){a=""+b,g.call(this,b)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ms(e){if(!e._valueTracker){var t=Xr(e)?"checked":"value";e._valueTracker=rc(e,t,""+e[t])}}function Zr(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),r="";return e&&(r=Xr(e)?e.checked?"true":"false":e.value),e=r,e!==a?(t.setValue(e),!0):!1}function La(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var lc=/[\n"\\]/g;function wt(e){return e.replace(lc,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ra(e,t,a,r,u,g,b,k){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),t!=null?b==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Nt(t)):e.value!==""+Nt(t)&&(e.value=""+Nt(t)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),t!=null?xi(e,b,Nt(t)):a!=null?xi(e,b,Nt(a)):r!=null&&e.removeAttribute("value"),u==null&&g!=null&&(e.defaultChecked=!!g),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?e.name=""+Nt(k):e.removeAttribute("name")}function Qr(e,t,a,r,u,g,b,k){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),t!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||t!=null)){ms(e);return}a=a!=null?""+Nt(a):"",t=t!=null?""+Nt(t):a,k||t===e.value||(e.value=t),e.defaultValue=t}r=r??u,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=k?e.checked:!!r,e.defaultChecked=!!r,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),ms(e)}function xi(e,t,a){t==="number"&&La(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function jn(e,t,a,r){if(e=e.options,t){t={};for(var u=0;u<a.length;u++)t["$"+a[u]]=!0;for(a=0;a<e.length;a++)u=t.hasOwnProperty("$"+e[a].value),e[a].selected!==u&&(e[a].selected=u),u&&r&&(e[a].defaultSelected=!0)}else{for(a=""+Nt(a),t=null,u=0;u<e.length;u++){if(e[u].value===a){e[u].selected=!0,r&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function pf(e,t,a){if(t!=null&&(t=""+Nt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Nt(a):""}function xf(e,t,a,r){if(t==null){if(r!=null){if(a!=null)throw Error(o(92));if(U(r)){if(1<r.length)throw Error(o(93));r=r[0]}a=r}a==null&&(a=""),t=a}a=Nt(t),e.defaultValue=a,r=e.textContent,r===a&&r!==""&&r!==null&&(e.value=r),ms(e)}function ps(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Uy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yf(e,t,a){var r=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,a):typeof a!="number"||a===0||Uy.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function bf(e,t,a){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,a!=null){for(var r in a)!a.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var u in t)r=t[u],t.hasOwnProperty(u)&&a[u]!==r&&yf(e,u,r)}else for(var g in t)t.hasOwnProperty(g)&&yf(e,g,t[g])}function oc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var By=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fr(e){return Vy.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Sn(){}var cc=null;function uc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xs=null,ys=null;function vf(e){var t=Kn(e);if(t&&(e=t.stateNode)){var a=e[pt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ra(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+wt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var r=a[t];if(r!==e&&r.form===e.form){var u=r[pt]||null;if(!u)throw Error(o(90));Ra(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<a.length;t++)r=a[t],r.form===e.form&&Zr(r)}break e;case"textarea":pf(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&jn(e,!!a.multiple,t,!1)}}}var dc=!1;function _f(e,t,a){if(dc)return e(t,a);dc=!0;try{var r=e(t);return r}finally{if(dc=!1,(xs!==null||ys!==null)&&(Ll(),xs&&(t=xs,e=ys,ys=xs=null,vf(t),e)))for(t=0;t<e.length;t++)vf(e[t])}}function yi(e,t){var a=e.stateNode;if(a===null)return null;var r=a[pt]||null;if(r===null)return null;a=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(o(231,t,typeof a));return a}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fc=!1;if(kn)try{var bi={};Object.defineProperty(bi,"passive",{get:function(){fc=!0}}),window.addEventListener("test",bi,bi),window.removeEventListener("test",bi,bi)}catch{fc=!1}var Pn=null,gc=null,Kr=null;function Nf(){if(Kr)return Kr;var e,t=gc,a=t.length,r,u="value"in Pn?Pn.value:Pn.textContent,g=u.length;for(e=0;e<a&&t[e]===u[e];e++);var b=a-e;for(r=1;r<=b&&t[a-r]===u[g-r];r++);return Kr=u.slice(e,1<r?1-r:void 0)}function Ir(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Jr(){return!0}function wf(){return!1}function jt(e){function t(a,r,u,g,b){this._reactName=a,this._targetInst=u,this.type=r,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var k in e)e.hasOwnProperty(k)&&(a=e[k],this[k]=a?a(g):g[k]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Jr:wf,this.isPropagationStopped=wf,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Jr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Jr)},persist:function(){},isPersistent:Jr}),t}var $a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wr=jt($a),vi=x({},$a,{view:0,detail:0}),qy=jt(vi),hc,mc,_i,Pr=x({},vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_i&&(_i&&e.type==="mousemove"?(hc=e.screenX-_i.screenX,mc=e.screenY-_i.screenY):mc=hc=0,_i=e),hc)},movementY:function(e){return"movementY"in e?e.movementY:mc}}),jf=jt(Pr),Yy=x({},Pr,{dataTransfer:0}),Gy=jt(Yy),Xy=x({},vi,{relatedTarget:0}),pc=jt(Xy),Zy=x({},$a,{animationName:0,elapsedTime:0,pseudoElement:0}),Qy=jt(Zy),Fy=x({},$a,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ky=jt(Fy),Iy=x({},$a,{data:0}),Sf=jt(Iy),Jy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Py={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Py[e])?!!t[e]:!1}function xc(){return eb}var tb=x({},vi,{key:function(e){if(e.key){var t=Jy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ir(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xc,charCode:function(e){return e.type==="keypress"?Ir(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ir(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),nb=jt(tb),ab=x({},Pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kf=jt(ab),sb=x({},vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xc}),ib=jt(sb),rb=x({},$a,{propertyName:0,elapsedTime:0,pseudoElement:0}),lb=jt(rb),ob=x({},Pr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cb=jt(ob),ub=x({},$a,{newState:0,oldState:0}),db=jt(ub),fb=[9,13,27,32],yc=kn&&"CompositionEvent"in window,Ni=null;kn&&"documentMode"in document&&(Ni=document.documentMode);var gb=kn&&"TextEvent"in window&&!Ni,Cf=kn&&(!yc||Ni&&8<Ni&&11>=Ni),Ef=" ",zf=!1;function Af(e,t){switch(e){case"keyup":return fb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bs=!1;function hb(e,t){switch(e){case"compositionend":return Tf(t);case"keypress":return t.which!==32?null:(zf=!0,Ef);case"textInput":return e=t.data,e===Ef&&zf?null:e;default:return null}}function mb(e,t){if(bs)return e==="compositionend"||!yc&&Af(e,t)?(e=Nf(),Kr=gc=Pn=null,bs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cf&&t.locale!=="ko"?null:t.data;default:return null}}var pb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!pb[e.type]:t==="textarea"}function Df(e,t,a,r){xs?ys?ys.push(r):ys=[r]:xs=r,t=ql(t,"onChange"),0<t.length&&(a=new Wr("onChange","change",null,a,r),e.push({event:a,listeners:t}))}var wi=null,ji=null;function xb(e){mm(e,0)}function el(e){var t=In(e);if(Zr(t))return e}function Of(e,t){if(e==="change")return t}var Lf=!1;if(kn){var bc;if(kn){var vc="oninput"in document;if(!vc){var Rf=document.createElement("div");Rf.setAttribute("oninput","return;"),vc=typeof Rf.oninput=="function"}bc=vc}else bc=!1;Lf=bc&&(!document.documentMode||9<document.documentMode)}function $f(){wi&&(wi.detachEvent("onpropertychange",Hf),ji=wi=null)}function Hf(e){if(e.propertyName==="value"&&el(ji)){var t=[];Df(t,ji,e,uc(e)),_f(xb,t)}}function yb(e,t,a){e==="focusin"?($f(),wi=t,ji=a,wi.attachEvent("onpropertychange",Hf)):e==="focusout"&&$f()}function bb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return el(ji)}function vb(e,t){if(e==="click")return el(t)}function _b(e,t){if(e==="input"||e==="change")return el(t)}function Nb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mt=typeof Object.is=="function"?Object.is:Nb;function Si(e,t){if(Mt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(r=0;r<a.length;r++){var u=a[r];if(!Tt.call(t,u)||!Mt(e[u],t[u]))return!1}return!0}function Uf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bf(e,t){var a=Uf(e);e=0;for(var r;a;){if(a.nodeType===3){if(r=e+a.textContent.length,e<=t&&r>=t)return{node:a,offset:t-e};e=r}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Uf(a)}}function Vf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Vf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=La(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=La(e.document)}return t}function _c(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var wb=kn&&"documentMode"in document&&11>=document.documentMode,vs=null,Nc=null,ki=null,wc=!1;function Yf(e,t,a){var r=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;wc||vs==null||vs!==La(r)||(r=vs,"selectionStart"in r&&_c(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ki&&Si(ki,r)||(ki=r,r=ql(Nc,"onSelect"),0<r.length&&(t=new Wr("onSelect","select",null,t,a),e.push({event:t,listeners:r}),t.target=vs)))}function Ha(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var _s={animationend:Ha("Animation","AnimationEnd"),animationiteration:Ha("Animation","AnimationIteration"),animationstart:Ha("Animation","AnimationStart"),transitionrun:Ha("Transition","TransitionRun"),transitionstart:Ha("Transition","TransitionStart"),transitioncancel:Ha("Transition","TransitionCancel"),transitionend:Ha("Transition","TransitionEnd")},jc={},Gf={};kn&&(Gf=document.createElement("div").style,"AnimationEvent"in window||(delete _s.animationend.animation,delete _s.animationiteration.animation,delete _s.animationstart.animation),"TransitionEvent"in window||delete _s.transitionend.transition);function Ua(e){if(jc[e])return jc[e];if(!_s[e])return e;var t=_s[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Gf)return jc[e]=t[a];return e}var Xf=Ua("animationend"),Zf=Ua("animationiteration"),Qf=Ua("animationstart"),jb=Ua("transitionrun"),Sb=Ua("transitionstart"),kb=Ua("transitioncancel"),Ff=Ua("transitionend"),Kf=new Map,Sc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sc.push("scrollEnd");function Wt(e,t){Kf.set(e,t),wn(t,[e])}var tl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Vt=[],Ns=0,kc=0;function nl(){for(var e=Ns,t=kc=Ns=0;t<e;){var a=Vt[t];Vt[t++]=null;var r=Vt[t];Vt[t++]=null;var u=Vt[t];Vt[t++]=null;var g=Vt[t];if(Vt[t++]=null,r!==null&&u!==null){var b=r.pending;b===null?u.next=u:(u.next=b.next,b.next=u),r.pending=u}g!==0&&If(a,u,g)}}function al(e,t,a,r){Vt[Ns++]=e,Vt[Ns++]=t,Vt[Ns++]=a,Vt[Ns++]=r,kc|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function Cc(e,t,a,r){return al(e,t,a,r),sl(e)}function Ba(e,t){return al(e,null,null,t),sl(e)}function If(e,t,a){e.lanes|=a;var r=e.alternate;r!==null&&(r.lanes|=a);for(var u=!1,g=e.return;g!==null;)g.childLanes|=a,r=g.alternate,r!==null&&(r.childLanes|=a),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(u=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,u&&t!==null&&(u=31-yt(a),e=g.hiddenUpdates,r=e[u],r===null?e[u]=[t]:r.push(t),t.lane=a|536870912),g):null}function sl(e){if(50<Fi)throw Fi=0,Ru=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ws={};function Cb(e,t,a,r){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(e,t,a,r){return new Cb(e,t,a,r)}function Ec(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Cn(e,t){var a=e.alternate;return a===null?(a=Dt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Jf(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function il(e,t,a,r,u,g){var b=0;if(r=e,typeof e=="function")Ec(e)&&(b=1);else if(typeof e=="string")b=Mv(e,a,le.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case L:return e=Dt(31,a,t,u),e.elementType=L,e.lanes=g,e;case T:return Va(a.children,u,g,t);case E:b=8,u|=24;break;case z:return e=Dt(12,a,t,u|2),e.elementType=z,e.lanes=g,e;case $:return e=Dt(13,a,t,u),e.elementType=$,e.lanes=g,e;case O:return e=Dt(19,a,t,u),e.elementType=O,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _:b=10;break e;case w:b=9;break e;case C:b=11;break e;case V:b=14;break e;case G:b=16,r=null;break e}b=29,a=Error(o(130,e===null?"null":typeof e,"")),r=null}return t=Dt(b,a,t,u),t.elementType=e,t.type=r,t.lanes=g,t}function Va(e,t,a,r){return e=Dt(7,e,r,t),e.lanes=a,e}function zc(e,t,a){return e=Dt(6,e,null,t),e.lanes=a,e}function Wf(e){var t=Dt(18,null,null,0);return t.stateNode=e,t}function Ac(e,t,a){return t=Dt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Pf=new WeakMap;function qt(e,t){if(typeof e=="object"&&e!==null){var a=Pf.get(e);return a!==void 0?a:(t={value:e,source:t,stack:it(t)},Pf.set(e,t),t)}return{value:e,source:t,stack:it(t)}}var js=[],Ss=0,rl=null,Ci=0,Yt=[],Gt=0,ea=null,cn=1,un="";function En(e,t){js[Ss++]=Ci,js[Ss++]=rl,rl=e,Ci=t}function eg(e,t,a){Yt[Gt++]=cn,Yt[Gt++]=un,Yt[Gt++]=ea,ea=e;var r=cn;e=un;var u=32-yt(r)-1;r&=~(1<<u),a+=1;var g=32-yt(t)+u;if(30<g){var b=u-u%5;g=(r&(1<<b)-1).toString(32),r>>=b,u-=b,cn=1<<32-yt(t)+u|a<<u|r,un=g+e}else cn=1<<g|a<<u|r,un=e}function Tc(e){e.return!==null&&(En(e,1),eg(e,1,0))}function Mc(e){for(;e===rl;)rl=js[--Ss],js[Ss]=null,Ci=js[--Ss],js[Ss]=null;for(;e===ea;)ea=Yt[--Gt],Yt[Gt]=null,un=Yt[--Gt],Yt[Gt]=null,cn=Yt[--Gt],Yt[Gt]=null}function tg(e,t){Yt[Gt++]=cn,Yt[Gt++]=un,Yt[Gt++]=ea,cn=t.id,un=t.overflow,ea=e}var ft=null,Ge=null,Me=!1,ta=null,Xt=!1,Dc=Error(o(519));function na(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ei(qt(t,e)),Dc}function ng(e){var t=e.stateNode,a=e.type,r=e.memoizedProps;switch(t[rt]=e,t[pt]=r,a){case"dialog":ze("cancel",t),ze("close",t);break;case"iframe":case"object":case"embed":ze("load",t);break;case"video":case"audio":for(a=0;a<Ii.length;a++)ze(Ii[a],t);break;case"source":ze("error",t);break;case"img":case"image":case"link":ze("error",t),ze("load",t);break;case"details":ze("toggle",t);break;case"input":ze("invalid",t),Qr(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":ze("invalid",t);break;case"textarea":ze("invalid",t),xf(t,r.value,r.defaultValue,r.children)}a=r.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||r.suppressHydrationWarning===!0||bm(t.textContent,a)?(r.popover!=null&&(ze("beforetoggle",t),ze("toggle",t)),r.onScroll!=null&&ze("scroll",t),r.onScrollEnd!=null&&ze("scrollend",t),r.onClick!=null&&(t.onclick=Sn),t=!0):t=!1,t||na(e,!0)}function ag(e){for(ft=e.return;ft;)switch(ft.tag){case 5:case 31:case 13:Xt=!1;return;case 27:case 3:Xt=!0;return;default:ft=ft.return}}function ks(e){if(e!==ft)return!1;if(!Me)return ag(e),Me=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Ju(e.type,e.memoizedProps)),a=!a),a&&Ge&&na(e),ag(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Ge=Em(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Ge=Em(e)}else t===27?(t=Ge,pa(e.type)?(e=nd,nd=null,Ge=e):Ge=t):Ge=ft?Qt(e.stateNode.nextSibling):null;return!0}function qa(){Ge=ft=null,Me=!1}function Oc(){var e=ta;return e!==null&&(Et===null?Et=e:Et.push.apply(Et,e),ta=null),e}function Ei(e){ta===null?ta=[e]:ta.push(e)}var Lc=Q(null),Ya=null,zn=null;function aa(e,t,a){se(Lc,t._currentValue),t._currentValue=a}function An(e){e._currentValue=Lc.current,W(Lc)}function Rc(e,t,a){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===a)break;e=e.return}}function $c(e,t,a,r){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var g=u.dependencies;if(g!==null){var b=u.child;g=g.firstContext;e:for(;g!==null;){var k=g;g=u;for(var R=0;R<t.length;R++)if(k.context===t[R]){g.lanes|=a,k=g.alternate,k!==null&&(k.lanes|=a),Rc(g.return,a,e),r||(b=null);break e}g=k.next}}else if(u.tag===18){if(b=u.return,b===null)throw Error(o(341));b.lanes|=a,g=b.alternate,g!==null&&(g.lanes|=a),Rc(b,a,e),b=null}else b=u.child;if(b!==null)b.return=u;else for(b=u;b!==null;){if(b===e){b=null;break}if(u=b.sibling,u!==null){u.return=b.return,b=u;break}b=b.return}u=b}}function Cs(e,t,a,r){e=null;for(var u=t,g=!1;u!==null;){if(!g){if((u.flags&524288)!==0)g=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var b=u.alternate;if(b===null)throw Error(o(387));if(b=b.memoizedProps,b!==null){var k=u.type;Mt(u.pendingProps.value,b.value)||(e!==null?e.push(k):e=[k])}}else if(u===me.current){if(b=u.alternate,b===null)throw Error(o(387));b.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(tr):e=[tr])}u=u.return}e!==null&&$c(t,e,a,r),t.flags|=262144}function ll(e){for(e=e.firstContext;e!==null;){if(!Mt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ga(e){Ya=e,zn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function gt(e){return sg(Ya,e)}function ol(e,t){return Ya===null&&Ga(e),sg(e,t)}function sg(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},zn===null){if(e===null)throw Error(o(308));zn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else zn=zn.next=t;return a}var Eb=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},zb=n.unstable_scheduleCallback,Ab=n.unstable_NormalPriority,et={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hc(){return{controller:new Eb,data:new Map,refCount:0}}function zi(e){e.refCount--,e.refCount===0&&zb(Ab,function(){e.controller.abort()})}var Ai=null,Uc=0,Es=0,zs=null;function Tb(e,t){if(Ai===null){var a=Ai=[];Uc=0,Es=qu(),zs={status:"pending",value:void 0,then:function(r){a.push(r)}}}return Uc++,t.then(ig,ig),t}function ig(){if(--Uc===0&&Ai!==null){zs!==null&&(zs.status="fulfilled");var e=Ai;Ai=null,Es=0,zs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Mb(e,t){var a=[],r={status:"pending",value:null,reason:null,then:function(u){a.push(u)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var u=0;u<a.length;u++)(0,a[u])(t)},function(u){for(r.status="rejected",r.reason=u,u=0;u<a.length;u++)(0,a[u])(void 0)}),r}var rg=j.S;j.S=function(e,t){Yh=dt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Tb(e,t),rg!==null&&rg(e,t)};var Xa=Q(null);function Bc(){var e=Xa.current;return e!==null?e:Ye.pooledCache}function cl(e,t){t===null?se(Xa,Xa.current):se(Xa,t.pool)}function lg(){var e=Bc();return e===null?null:{parent:et._currentValue,pool:e}}var As=Error(o(460)),Vc=Error(o(474)),ul=Error(o(542)),dl={then:function(){}};function og(e){return e=e.status,e==="fulfilled"||e==="rejected"}function cg(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Sn,Sn),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,dg(e),e;default:if(typeof t.status=="string")t.then(Sn,Sn);else{if(e=Ye,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=r}},function(r){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,dg(e),e}throw Qa=t,As}}function Za(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Qa=a,As):a}}var Qa=null;function ug(){if(Qa===null)throw Error(o(459));var e=Qa;return Qa=null,e}function dg(e){if(e===As||e===ul)throw Error(o(483))}var Ts=null,Ti=0;function fl(e){var t=Ti;return Ti+=1,Ts===null&&(Ts=[]),cg(Ts,e,t)}function Mi(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function gl(e,t){throw t.$$typeof===v?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function fg(e){function t(X,B){if(e){var K=X.deletions;K===null?(X.deletions=[B],X.flags|=16):K.push(B)}}function a(X,B){if(!e)return null;for(;B!==null;)t(X,B),B=B.sibling;return null}function r(X){for(var B=new Map;X!==null;)X.key!==null?B.set(X.key,X):B.set(X.index,X),X=X.sibling;return B}function u(X,B){return X=Cn(X,B),X.index=0,X.sibling=null,X}function g(X,B,K){return X.index=K,e?(K=X.alternate,K!==null?(K=K.index,K<B?(X.flags|=67108866,B):K):(X.flags|=67108866,B)):(X.flags|=1048576,B)}function b(X){return e&&X.alternate===null&&(X.flags|=67108866),X}function k(X,B,K,ae){return B===null||B.tag!==6?(B=zc(K,X.mode,ae),B.return=X,B):(B=u(B,K),B.return=X,B)}function R(X,B,K,ae){var xe=K.type;return xe===T?ne(X,B,K.props.children,ae,K.key):B!==null&&(B.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===G&&Za(xe)===B.type)?(B=u(B,K.props),Mi(B,K),B.return=X,B):(B=il(K.type,K.key,K.props,null,X.mode,ae),Mi(B,K),B.return=X,B)}function I(X,B,K,ae){return B===null||B.tag!==4||B.stateNode.containerInfo!==K.containerInfo||B.stateNode.implementation!==K.implementation?(B=Ac(K,X.mode,ae),B.return=X,B):(B=u(B,K.children||[]),B.return=X,B)}function ne(X,B,K,ae,xe){return B===null||B.tag!==7?(B=Va(K,X.mode,ae,xe),B.return=X,B):(B=u(B,K),B.return=X,B)}function ie(X,B,K){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=zc(""+B,X.mode,K),B.return=X,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case N:return K=il(B.type,B.key,B.props,null,X.mode,K),Mi(K,B),K.return=X,K;case S:return B=Ac(B,X.mode,K),B.return=X,B;case G:return B=Za(B),ie(X,B,K)}if(U(B)||Z(B))return B=Va(B,X.mode,K,null),B.return=X,B;if(typeof B.then=="function")return ie(X,fl(B),K);if(B.$$typeof===_)return ie(X,ol(X,B),K);gl(X,B)}return null}function J(X,B,K,ae){var xe=B!==null?B.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return xe!==null?null:k(X,B,""+K,ae);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case N:return K.key===xe?R(X,B,K,ae):null;case S:return K.key===xe?I(X,B,K,ae):null;case G:return K=Za(K),J(X,B,K,ae)}if(U(K)||Z(K))return xe!==null?null:ne(X,B,K,ae,null);if(typeof K.then=="function")return J(X,B,fl(K),ae);if(K.$$typeof===_)return J(X,B,ol(X,K),ae);gl(X,K)}return null}function P(X,B,K,ae,xe){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return X=X.get(K)||null,k(B,X,""+ae,xe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case N:return X=X.get(ae.key===null?K:ae.key)||null,R(B,X,ae,xe);case S:return X=X.get(ae.key===null?K:ae.key)||null,I(B,X,ae,xe);case G:return ae=Za(ae),P(X,B,K,ae,xe)}if(U(ae)||Z(ae))return X=X.get(K)||null,ne(B,X,ae,xe,null);if(typeof ae.then=="function")return P(X,B,K,fl(ae),xe);if(ae.$$typeof===_)return P(X,B,K,ol(B,ae),xe);gl(B,ae)}return null}function ue(X,B,K,ae){for(var xe=null,Le=null,he=B,ke=B=0,Te=null;he!==null&&ke<K.length;ke++){he.index>ke?(Te=he,he=null):Te=he.sibling;var Re=J(X,he,K[ke],ae);if(Re===null){he===null&&(he=Te);break}e&&he&&Re.alternate===null&&t(X,he),B=g(Re,B,ke),Le===null?xe=Re:Le.sibling=Re,Le=Re,he=Te}if(ke===K.length)return a(X,he),Me&&En(X,ke),xe;if(he===null){for(;ke<K.length;ke++)he=ie(X,K[ke],ae),he!==null&&(B=g(he,B,ke),Le===null?xe=he:Le.sibling=he,Le=he);return Me&&En(X,ke),xe}for(he=r(he);ke<K.length;ke++)Te=P(he,X,ke,K[ke],ae),Te!==null&&(e&&Te.alternate!==null&&he.delete(Te.key===null?ke:Te.key),B=g(Te,B,ke),Le===null?xe=Te:Le.sibling=Te,Le=Te);return e&&he.forEach(function(_a){return t(X,_a)}),Me&&En(X,ke),xe}function ve(X,B,K,ae){if(K==null)throw Error(o(151));for(var xe=null,Le=null,he=B,ke=B=0,Te=null,Re=K.next();he!==null&&!Re.done;ke++,Re=K.next()){he.index>ke?(Te=he,he=null):Te=he.sibling;var _a=J(X,he,Re.value,ae);if(_a===null){he===null&&(he=Te);break}e&&he&&_a.alternate===null&&t(X,he),B=g(_a,B,ke),Le===null?xe=_a:Le.sibling=_a,Le=_a,he=Te}if(Re.done)return a(X,he),Me&&En(X,ke),xe;if(he===null){for(;!Re.done;ke++,Re=K.next())Re=ie(X,Re.value,ae),Re!==null&&(B=g(Re,B,ke),Le===null?xe=Re:Le.sibling=Re,Le=Re);return Me&&En(X,ke),xe}for(he=r(he);!Re.done;ke++,Re=K.next())Re=P(he,X,ke,Re.value,ae),Re!==null&&(e&&Re.alternate!==null&&he.delete(Re.key===null?ke:Re.key),B=g(Re,B,ke),Le===null?xe=Re:Le.sibling=Re,Le=Re);return e&&he.forEach(function(Yv){return t(X,Yv)}),Me&&En(X,ke),xe}function qe(X,B,K,ae){if(typeof K=="object"&&K!==null&&K.type===T&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case N:e:{for(var xe=K.key;B!==null;){if(B.key===xe){if(xe=K.type,xe===T){if(B.tag===7){a(X,B.sibling),ae=u(B,K.props.children),ae.return=X,X=ae;break e}}else if(B.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===G&&Za(xe)===B.type){a(X,B.sibling),ae=u(B,K.props),Mi(ae,K),ae.return=X,X=ae;break e}a(X,B);break}else t(X,B);B=B.sibling}K.type===T?(ae=Va(K.props.children,X.mode,ae,K.key),ae.return=X,X=ae):(ae=il(K.type,K.key,K.props,null,X.mode,ae),Mi(ae,K),ae.return=X,X=ae)}return b(X);case S:e:{for(xe=K.key;B!==null;){if(B.key===xe)if(B.tag===4&&B.stateNode.containerInfo===K.containerInfo&&B.stateNode.implementation===K.implementation){a(X,B.sibling),ae=u(B,K.children||[]),ae.return=X,X=ae;break e}else{a(X,B);break}else t(X,B);B=B.sibling}ae=Ac(K,X.mode,ae),ae.return=X,X=ae}return b(X);case G:return K=Za(K),qe(X,B,K,ae)}if(U(K))return ue(X,B,K,ae);if(Z(K)){if(xe=Z(K),typeof xe!="function")throw Error(o(150));return K=xe.call(K),ve(X,B,K,ae)}if(typeof K.then=="function")return qe(X,B,fl(K),ae);if(K.$$typeof===_)return qe(X,B,ol(X,K),ae);gl(X,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,B!==null&&B.tag===6?(a(X,B.sibling),ae=u(B,K),ae.return=X,X=ae):(a(X,B),ae=zc(K,X.mode,ae),ae.return=X,X=ae),b(X)):a(X,B)}return function(X,B,K,ae){try{Ti=0;var xe=qe(X,B,K,ae);return Ts=null,xe}catch(he){if(he===As||he===ul)throw he;var Le=Dt(29,he,null,X.mode);return Le.lanes=ae,Le.return=X,Le}}}var Fa=fg(!0),gg=fg(!1),sa=!1;function qc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ia(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ra(e,t,a){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,($e&2)!==0){var u=r.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),r.pending=t,t=sl(e),If(e,null,a),t}return al(e,r,t,a),sl(e)}function Di(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,a|=r,t.lanes=a,Rr(e,a)}}function Gc(e,t){var a=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,a===r)){var u=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?u=g=b:g=g.next=b,a=a.next}while(a!==null);g===null?u=g=t:g=g.next=t}else u=g=t;a={baseState:r.baseState,firstBaseUpdate:u,lastBaseUpdate:g,shared:r.shared,callbacks:r.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Xc=!1;function Oi(){if(Xc){var e=zs;if(e!==null)throw e}}function Li(e,t,a,r){Xc=!1;var u=e.updateQueue;sa=!1;var g=u.firstBaseUpdate,b=u.lastBaseUpdate,k=u.shared.pending;if(k!==null){u.shared.pending=null;var R=k,I=R.next;R.next=null,b===null?g=I:b.next=I,b=R;var ne=e.alternate;ne!==null&&(ne=ne.updateQueue,k=ne.lastBaseUpdate,k!==b&&(k===null?ne.firstBaseUpdate=I:k.next=I,ne.lastBaseUpdate=R))}if(g!==null){var ie=u.baseState;b=0,ne=I=R=null,k=g;do{var J=k.lane&-536870913,P=J!==k.lane;if(P?(Ae&J)===J:(r&J)===J){J!==0&&J===Es&&(Xc=!0),ne!==null&&(ne=ne.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var ue=e,ve=k;J=t;var qe=a;switch(ve.tag){case 1:if(ue=ve.payload,typeof ue=="function"){ie=ue.call(qe,ie,J);break e}ie=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=ve.payload,J=typeof ue=="function"?ue.call(qe,ie,J):ue,J==null)break e;ie=x({},ie,J);break e;case 2:sa=!0}}J=k.callback,J!==null&&(e.flags|=64,P&&(e.flags|=8192),P=u.callbacks,P===null?u.callbacks=[J]:P.push(J))}else P={lane:J,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ne===null?(I=ne=P,R=ie):ne=ne.next=P,b|=J;if(k=k.next,k===null){if(k=u.shared.pending,k===null)break;P=k,k=P.next,P.next=null,u.lastBaseUpdate=P,u.shared.pending=null}}while(!0);ne===null&&(R=ie),u.baseState=R,u.firstBaseUpdate=I,u.lastBaseUpdate=ne,g===null&&(u.shared.lanes=0),da|=b,e.lanes=b,e.memoizedState=ie}}function hg(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function mg(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)hg(a[e],t)}var Ms=Q(null),hl=Q(0);function pg(e,t){e=Un,se(hl,e),se(Ms,t),Un=e|t.baseLanes}function Zc(){se(hl,Un),se(Ms,Ms.current)}function Qc(){Un=hl.current,W(Ms),W(hl)}var Ot=Q(null),Zt=null;function la(e){var t=e.alternate;se(Je,Je.current&1),se(Ot,e),Zt===null&&(t===null||Ms.current!==null||t.memoizedState!==null)&&(Zt=e)}function Fc(e){se(Je,Je.current),se(Ot,e),Zt===null&&(Zt=e)}function xg(e){e.tag===22?(se(Je,Je.current),se(Ot,e),Zt===null&&(Zt=e)):oa()}function oa(){se(Je,Je.current),se(Ot,Ot.current)}function Lt(e){W(Ot),Zt===e&&(Zt=null),W(Je)}var Je=Q(0);function ml(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ed(a)||td(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Tn=0,Se=null,Be=null,tt=null,pl=!1,Ds=!1,Ka=!1,xl=0,Ri=0,Os=null,Db=0;function Ke(){throw Error(o(321))}function Kc(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Mt(e[a],t[a]))return!1;return!0}function Ic(e,t,a,r,u,g){return Tn=g,Se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,j.H=e===null||e.memoizedState===null?eh:du,Ka=!1,g=a(r,u),Ka=!1,Ds&&(g=bg(t,a,r,u)),yg(e),g}function yg(e){j.H=Ui;var t=Be!==null&&Be.next!==null;if(Tn=0,tt=Be=Se=null,pl=!1,Ri=0,Os=null,t)throw Error(o(300));e===null||nt||(e=e.dependencies,e!==null&&ll(e)&&(nt=!0))}function bg(e,t,a,r){Se=e;var u=0;do{if(Ds&&(Os=null),Ri=0,Ds=!1,25<=u)throw Error(o(301));if(u+=1,tt=Be=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}j.H=th,g=t(a,r)}while(Ds);return g}function Ob(){var e=j.H,t=e.useState()[0];return t=typeof t.then=="function"?$i(t):t,e=e.useState()[0],(Be!==null?Be.memoizedState:null)!==e&&(Se.flags|=1024),t}function Jc(){var e=xl!==0;return xl=0,e}function Wc(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Pc(e){if(pl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}pl=!1}Tn=0,tt=Be=Se=null,Ds=!1,Ri=xl=0,Os=null}function bt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Se.memoizedState=tt=e:tt=tt.next=e,tt}function We(){if(Be===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=tt===null?Se.memoizedState:tt.next;if(t!==null)tt=t,Be=e;else{if(e===null)throw Se.alternate===null?Error(o(467)):Error(o(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},tt===null?Se.memoizedState=tt=e:tt=tt.next=e}return tt}function yl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $i(e){var t=Ri;return Ri+=1,Os===null&&(Os=[]),e=cg(Os,e,t),t=Se,(tt===null?t.memoizedState:tt.next)===null&&(t=t.alternate,j.H=t===null||t.memoizedState===null?eh:du),e}function bl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return $i(e);if(e.$$typeof===_)return gt(e)}throw Error(o(438,String(e)))}function eu(e){var t=null,a=Se.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var r=Se.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=yl(),Se.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),r=0;r<e;r++)a[r]=F;return t.index++,a}function Mn(e,t){return typeof t=="function"?t(e):t}function vl(e){var t=We();return tu(t,Be,e)}function tu(e,t,a){var r=e.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=a;var u=e.baseQueue,g=r.pending;if(g!==null){if(u!==null){var b=u.next;u.next=g.next,g.next=b}t.baseQueue=u=g,r.pending=null}if(g=e.baseState,u===null)e.memoizedState=g;else{t=u.next;var k=b=null,R=null,I=t,ne=!1;do{var ie=I.lane&-536870913;if(ie!==I.lane?(Ae&ie)===ie:(Tn&ie)===ie){var J=I.revertLane;if(J===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),ie===Es&&(ne=!0);else if((Tn&J)===J){I=I.next,J===Es&&(ne=!0);continue}else ie={lane:0,revertLane:I.revertLane,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},R===null?(k=R=ie,b=g):R=R.next=ie,Se.lanes|=J,da|=J;ie=I.action,Ka&&a(g,ie),g=I.hasEagerState?I.eagerState:a(g,ie)}else J={lane:ie,revertLane:I.revertLane,gesture:I.gesture,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},R===null?(k=R=J,b=g):R=R.next=J,Se.lanes|=ie,da|=ie;I=I.next}while(I!==null&&I!==t);if(R===null?b=g:R.next=k,!Mt(g,e.memoizedState)&&(nt=!0,ne&&(a=zs,a!==null)))throw a;e.memoizedState=g,e.baseState=b,e.baseQueue=R,r.lastRenderedState=g}return u===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function nu(e){var t=We(),a=t.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=e;var r=a.dispatch,u=a.pending,g=t.memoizedState;if(u!==null){a.pending=null;var b=u=u.next;do g=e(g,b.action),b=b.next;while(b!==u);Mt(g,t.memoizedState)||(nt=!0),t.memoizedState=g,t.baseQueue===null&&(t.baseState=g),a.lastRenderedState=g}return[g,r]}function vg(e,t,a){var r=Se,u=We(),g=Me;if(g){if(a===void 0)throw Error(o(407));a=a()}else a=t();var b=!Mt((Be||u).memoizedState,a);if(b&&(u.memoizedState=a,nt=!0),u=u.queue,iu(wg.bind(null,r,u,e),[e]),u.getSnapshot!==t||b||tt!==null&&tt.memoizedState.tag&1){if(r.flags|=2048,Ls(9,{destroy:void 0},Ng.bind(null,r,u,a,t),null),Ye===null)throw Error(o(349));g||(Tn&127)!==0||_g(r,t,a)}return a}function _g(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Se.updateQueue,t===null?(t=yl(),Se.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Ng(e,t,a,r){t.value=a,t.getSnapshot=r,jg(t)&&Sg(e)}function wg(e,t,a){return a(function(){jg(t)&&Sg(e)})}function jg(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Mt(e,a)}catch{return!0}}function Sg(e){var t=Ba(e,2);t!==null&&zt(t,e,2)}function au(e){var t=bt();if(typeof e=="function"){var a=e;if(e=a(),Ka){ln(!0);try{a()}finally{ln(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:e},t}function kg(e,t,a,r){return e.baseState=a,tu(e,Be,typeof r=="function"?r:Mn)}function Lb(e,t,a,r,u){if(wl(e))throw Error(o(485));if(e=t.action,e!==null){var g={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};j.T!==null?a(!0):g.isTransition=!1,r(g),a=t.pending,a===null?(g.next=t.pending=g,Cg(t,g)):(g.next=a.next,t.pending=a.next=g)}}function Cg(e,t){var a=t.action,r=t.payload,u=e.state;if(t.isTransition){var g=j.T,b={};j.T=b;try{var k=a(u,r),R=j.S;R!==null&&R(b,k),Eg(e,t,k)}catch(I){su(e,t,I)}finally{g!==null&&b.types!==null&&(g.types=b.types),j.T=g}}else try{g=a(u,r),Eg(e,t,g)}catch(I){su(e,t,I)}}function Eg(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(r){zg(e,t,r)},function(r){return su(e,t,r)}):zg(e,t,a)}function zg(e,t,a){t.status="fulfilled",t.value=a,Ag(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Cg(e,a)))}function su(e,t,a){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=a,Ag(t),t=t.next;while(t!==r)}e.action=null}function Ag(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Tg(e,t){return t}function Mg(e,t){if(Me){var a=Ye.formState;if(a!==null){e:{var r=Se;if(Me){if(Ge){t:{for(var u=Ge,g=Xt;u.nodeType!==8;){if(!g){u=null;break t}if(u=Qt(u.nextSibling),u===null){u=null;break t}}g=u.data,u=g==="F!"||g==="F"?u:null}if(u){Ge=Qt(u.nextSibling),r=u.data==="F!";break e}}na(r)}r=!1}r&&(t=a[0])}}return a=bt(),a.memoizedState=a.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tg,lastRenderedState:t},a.queue=r,a=Jg.bind(null,Se,r),r.dispatch=a,r=au(!1),g=uu.bind(null,Se,!1,r.queue),r=bt(),u={state:t,dispatch:null,action:e,pending:null},r.queue=u,a=Lb.bind(null,Se,u,g,a),u.dispatch=a,r.memoizedState=e,[t,a,!1]}function Dg(e){var t=We();return Og(t,Be,e)}function Og(e,t,a){if(t=tu(e,t,Tg)[0],e=vl(Mn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=$i(t)}catch(b){throw b===As?ul:b}else r=t;t=We();var u=t.queue,g=u.dispatch;return a!==t.memoizedState&&(Se.flags|=2048,Ls(9,{destroy:void 0},Rb.bind(null,u,a),null)),[r,g,e]}function Rb(e,t){e.action=t}function Lg(e){var t=We(),a=Be;if(a!==null)return Og(t,a,e);We(),t=t.memoizedState,a=We();var r=a.queue.dispatch;return a.memoizedState=e,[t,r,!1]}function Ls(e,t,a,r){return e={tag:e,create:a,deps:r,inst:t,next:null},t=Se.updateQueue,t===null&&(t=yl(),Se.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(r=a.next,a.next=e,e.next=r,t.lastEffect=e),e}function Rg(){return We().memoizedState}function _l(e,t,a,r){var u=bt();Se.flags|=e,u.memoizedState=Ls(1|t,{destroy:void 0},a,r===void 0?null:r)}function Nl(e,t,a,r){var u=We();r=r===void 0?null:r;var g=u.memoizedState.inst;Be!==null&&r!==null&&Kc(r,Be.memoizedState.deps)?u.memoizedState=Ls(t,g,a,r):(Se.flags|=e,u.memoizedState=Ls(1|t,g,a,r))}function $g(e,t){_l(8390656,8,e,t)}function iu(e,t){Nl(2048,8,e,t)}function $b(e){Se.flags|=4;var t=Se.updateQueue;if(t===null)t=yl(),Se.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Hg(e){var t=We().memoizedState;return $b({ref:t,nextImpl:e}),function(){if(($e&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Ug(e,t){return Nl(4,2,e,t)}function Bg(e,t){return Nl(4,4,e,t)}function Vg(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qg(e,t,a){a=a!=null?a.concat([e]):null,Nl(4,4,Vg.bind(null,t,e),a)}function ru(){}function Yg(e,t){var a=We();t=t===void 0?null:t;var r=a.memoizedState;return t!==null&&Kc(t,r[1])?r[0]:(a.memoizedState=[e,t],e)}function Gg(e,t){var a=We();t=t===void 0?null:t;var r=a.memoizedState;if(t!==null&&Kc(t,r[1]))return r[0];if(r=e(),Ka){ln(!0);try{e()}finally{ln(!1)}}return a.memoizedState=[r,t],r}function lu(e,t,a){return a===void 0||(Tn&1073741824)!==0&&(Ae&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Xh(),Se.lanes|=e,da|=e,a)}function Xg(e,t,a,r){return Mt(a,t)?a:Ms.current!==null?(e=lu(e,a,r),Mt(e,t)||(nt=!0),e):(Tn&42)===0||(Tn&1073741824)!==0&&(Ae&261930)===0?(nt=!0,e.memoizedState=a):(e=Xh(),Se.lanes|=e,da|=e,t)}function Zg(e,t,a,r,u){var g=D.p;D.p=g!==0&&8>g?g:8;var b=j.T,k={};j.T=k,uu(e,!1,t,a);try{var R=u(),I=j.S;if(I!==null&&I(k,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var ne=Mb(R,r);Hi(e,t,ne,Ht(e))}else Hi(e,t,r,Ht(e))}catch(ie){Hi(e,t,{then:function(){},status:"rejected",reason:ie},Ht())}finally{D.p=g,b!==null&&k.types!==null&&(b.types=k.types),j.T=b}}function Hb(){}function ou(e,t,a,r){if(e.tag!==5)throw Error(o(476));var u=Qg(e).queue;Zg(e,u,t,H,a===null?Hb:function(){return Fg(e),a(r)})}function Qg(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:H},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Fg(e){var t=Qg(e);t.next===null&&(t=e.alternate.memoizedState),Hi(e,t.next.queue,{},Ht())}function cu(){return gt(tr)}function Kg(){return We().memoizedState}function Ig(){return We().memoizedState}function Ub(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Ht();e=ia(a);var r=ra(t,e,a);r!==null&&(zt(r,t,a),Di(r,t,a)),t={cache:Hc()},e.payload=t;return}t=t.return}}function Bb(e,t,a){var r=Ht();a={lane:r,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},wl(e)?Wg(t,a):(a=Cc(e,t,a,r),a!==null&&(zt(a,e,r),Pg(a,t,r)))}function Jg(e,t,a){var r=Ht();Hi(e,t,a,r)}function Hi(e,t,a,r){var u={lane:r,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(wl(e))Wg(t,u);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=t.lastRenderedReducer,g!==null))try{var b=t.lastRenderedState,k=g(b,a);if(u.hasEagerState=!0,u.eagerState=k,Mt(k,b))return al(e,t,u,0),Ye===null&&nl(),!1}catch{}if(a=Cc(e,t,u,r),a!==null)return zt(a,e,r),Pg(a,t,r),!0}return!1}function uu(e,t,a,r){if(r={lane:2,revertLane:qu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},wl(e)){if(t)throw Error(o(479))}else t=Cc(e,a,r,2),t!==null&&zt(t,e,2)}function wl(e){var t=e.alternate;return e===Se||t!==null&&t===Se}function Wg(e,t){Ds=pl=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Pg(e,t,a){if((a&4194048)!==0){var r=t.lanes;r&=e.pendingLanes,a|=r,t.lanes=a,Rr(e,a)}}var Ui={readContext:gt,use:bl,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useLayoutEffect:Ke,useInsertionEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useSyncExternalStore:Ke,useId:Ke,useHostTransitionStatus:Ke,useFormState:Ke,useActionState:Ke,useOptimistic:Ke,useMemoCache:Ke,useCacheRefresh:Ke};Ui.useEffectEvent=Ke;var eh={readContext:gt,use:bl,useCallback:function(e,t){return bt().memoizedState=[e,t===void 0?null:t],e},useContext:gt,useEffect:$g,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,_l(4194308,4,Vg.bind(null,t,e),a)},useLayoutEffect:function(e,t){return _l(4194308,4,e,t)},useInsertionEffect:function(e,t){_l(4,2,e,t)},useMemo:function(e,t){var a=bt();t=t===void 0?null:t;var r=e();if(Ka){ln(!0);try{e()}finally{ln(!1)}}return a.memoizedState=[r,t],r},useReducer:function(e,t,a){var r=bt();if(a!==void 0){var u=a(t);if(Ka){ln(!0);try{a(t)}finally{ln(!1)}}}else u=t;return r.memoizedState=r.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},r.queue=e,e=e.dispatch=Bb.bind(null,Se,e),[r.memoizedState,e]},useRef:function(e){var t=bt();return e={current:e},t.memoizedState=e},useState:function(e){e=au(e);var t=e.queue,a=Jg.bind(null,Se,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:ru,useDeferredValue:function(e,t){var a=bt();return lu(a,e,t)},useTransition:function(){var e=au(!1);return e=Zg.bind(null,Se,e.queue,!0,!1),bt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var r=Se,u=bt();if(Me){if(a===void 0)throw Error(o(407));a=a()}else{if(a=t(),Ye===null)throw Error(o(349));(Ae&127)!==0||_g(r,t,a)}u.memoizedState=a;var g={value:a,getSnapshot:t};return u.queue=g,$g(wg.bind(null,r,g,e),[e]),r.flags|=2048,Ls(9,{destroy:void 0},Ng.bind(null,r,g,a,t),null),a},useId:function(){var e=bt(),t=Ye.identifierPrefix;if(Me){var a=un,r=cn;a=(r&~(1<<32-yt(r)-1)).toString(32)+a,t="_"+t+"R_"+a,a=xl++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Db++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:cu,useFormState:Mg,useActionState:Mg,useOptimistic:function(e){var t=bt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=uu.bind(null,Se,!0,a),a.dispatch=t,[e,t]},useMemoCache:eu,useCacheRefresh:function(){return bt().memoizedState=Ub.bind(null,Se)},useEffectEvent:function(e){var t=bt(),a={impl:e};return t.memoizedState=a,function(){if(($e&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},du={readContext:gt,use:bl,useCallback:Yg,useContext:gt,useEffect:iu,useImperativeHandle:qg,useInsertionEffect:Ug,useLayoutEffect:Bg,useMemo:Gg,useReducer:vl,useRef:Rg,useState:function(){return vl(Mn)},useDebugValue:ru,useDeferredValue:function(e,t){var a=We();return Xg(a,Be.memoizedState,e,t)},useTransition:function(){var e=vl(Mn)[0],t=We().memoizedState;return[typeof e=="boolean"?e:$i(e),t]},useSyncExternalStore:vg,useId:Kg,useHostTransitionStatus:cu,useFormState:Dg,useActionState:Dg,useOptimistic:function(e,t){var a=We();return kg(a,Be,e,t)},useMemoCache:eu,useCacheRefresh:Ig};du.useEffectEvent=Hg;var th={readContext:gt,use:bl,useCallback:Yg,useContext:gt,useEffect:iu,useImperativeHandle:qg,useInsertionEffect:Ug,useLayoutEffect:Bg,useMemo:Gg,useReducer:nu,useRef:Rg,useState:function(){return nu(Mn)},useDebugValue:ru,useDeferredValue:function(e,t){var a=We();return Be===null?lu(a,e,t):Xg(a,Be.memoizedState,e,t)},useTransition:function(){var e=nu(Mn)[0],t=We().memoizedState;return[typeof e=="boolean"?e:$i(e),t]},useSyncExternalStore:vg,useId:Kg,useHostTransitionStatus:cu,useFormState:Lg,useActionState:Lg,useOptimistic:function(e,t){var a=We();return Be!==null?kg(a,Be,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:eu,useCacheRefresh:Ig};th.useEffectEvent=Hg;function fu(e,t,a,r){t=e.memoizedState,a=a(r,t),a=a==null?t:x({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var gu={enqueueSetState:function(e,t,a){e=e._reactInternals;var r=Ht(),u=ia(r);u.payload=t,a!=null&&(u.callback=a),t=ra(e,u,r),t!==null&&(zt(t,e,r),Di(t,e,r))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var r=Ht(),u=ia(r);u.tag=1,u.payload=t,a!=null&&(u.callback=a),t=ra(e,u,r),t!==null&&(zt(t,e,r),Di(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Ht(),r=ia(a);r.tag=2,t!=null&&(r.callback=t),t=ra(e,r,a),t!==null&&(zt(t,e,a),Di(t,e,a))}};function nh(e,t,a,r,u,g,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,g,b):t.prototype&&t.prototype.isPureReactComponent?!Si(a,r)||!Si(u,g):!0}function ah(e,t,a,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,r),t.state!==e&&gu.enqueueReplaceState(t,t.state,null)}function Ia(e,t){var a=t;if("ref"in t){a={};for(var r in t)r!=="ref"&&(a[r]=t[r])}if(e=e.defaultProps){a===t&&(a=x({},a));for(var u in e)a[u]===void 0&&(a[u]=e[u])}return a}function sh(e){tl(e)}function ih(e){console.error(e)}function rh(e){tl(e)}function jl(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function lh(e,t,a){try{var r=e.onCaughtError;r(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function hu(e,t,a){return a=ia(a),a.tag=3,a.payload={element:null},a.callback=function(){jl(e,t)},a}function oh(e){return e=ia(e),e.tag=3,e}function ch(e,t,a,r){var u=a.type.getDerivedStateFromError;if(typeof u=="function"){var g=r.value;e.payload=function(){return u(g)},e.callback=function(){lh(t,a,r)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){lh(t,a,r),typeof u!="function"&&(fa===null?fa=new Set([this]):fa.add(this));var k=r.stack;this.componentDidCatch(r.value,{componentStack:k!==null?k:""})})}function Vb(e,t,a,r,u){if(a.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=a.alternate,t!==null&&Cs(t,a,u,!0),a=Ot.current,a!==null){switch(a.tag){case 31:case 13:return Zt===null?Rl():a.alternate===null&&Ie===0&&(Ie=3),a.flags&=-257,a.flags|=65536,a.lanes=u,r===dl?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([r]):t.add(r),Uu(e,r,u)),!1;case 22:return a.flags|=65536,r===dl?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([r]):a.add(r)),Uu(e,r,u)),!1}throw Error(o(435,a.tag))}return Uu(e,r,u),Rl(),!1}if(Me)return t=Ot.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,r!==Dc&&(e=Error(o(422),{cause:r}),Ei(qt(e,a)))):(r!==Dc&&(t=Error(o(423),{cause:r}),Ei(qt(t,a))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,r=qt(r,a),u=hu(e.stateNode,r,u),Gc(e,u),Ie!==4&&(Ie=2)),!1;var g=Error(o(520),{cause:r});if(g=qt(g,a),Qi===null?Qi=[g]:Qi.push(g),Ie!==4&&(Ie=2),t===null)return!0;r=qt(r,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=u&-u,a.lanes|=e,e=hu(a.stateNode,r,e),Gc(a,e),!1;case 1:if(t=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(fa===null||!fa.has(g))))return a.flags|=65536,u&=-u,a.lanes|=u,u=oh(u),ch(u,e,a,r),Gc(a,u),!1}a=a.return}while(a!==null);return!1}var mu=Error(o(461)),nt=!1;function ht(e,t,a,r){t.child=e===null?gg(t,null,a,r):Fa(t,e.child,a,r)}function uh(e,t,a,r,u){a=a.render;var g=t.ref;if("ref"in r){var b={};for(var k in r)k!=="ref"&&(b[k]=r[k])}else b=r;return Ga(t),r=Ic(e,t,a,b,g,u),k=Jc(),e!==null&&!nt?(Wc(e,t,u),Dn(e,t,u)):(Me&&k&&Tc(t),t.flags|=1,ht(e,t,r,u),t.child)}function dh(e,t,a,r,u){if(e===null){var g=a.type;return typeof g=="function"&&!Ec(g)&&g.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=g,fh(e,t,g,r,u)):(e=il(a.type,null,r,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(g=e.child,!wu(e,u)){var b=g.memoizedProps;if(a=a.compare,a=a!==null?a:Si,a(b,r)&&e.ref===t.ref)return Dn(e,t,u)}return t.flags|=1,e=Cn(g,r),e.ref=t.ref,e.return=t,t.child=e}function fh(e,t,a,r,u){if(e!==null){var g=e.memoizedProps;if(Si(g,r)&&e.ref===t.ref)if(nt=!1,t.pendingProps=r=g,wu(e,u))(e.flags&131072)!==0&&(nt=!0);else return t.lanes=e.lanes,Dn(e,t,u)}return pu(e,t,a,r,u)}function gh(e,t,a,r){var u=r.children,g=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((t.flags&128)!==0){if(g=g!==null?g.baseLanes|a:a,e!==null){for(r=t.child=e.child,u=0;r!==null;)u=u|r.lanes|r.childLanes,r=r.sibling;r=u&~g}else r=0,t.child=null;return hh(e,t,g,a,r)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&cl(t,g!==null?g.cachePool:null),g!==null?pg(t,g):Zc(),xg(t);else return r=t.lanes=536870912,hh(e,t,g!==null?g.baseLanes|a:a,a,r)}else g!==null?(cl(t,g.cachePool),pg(t,g),oa(),t.memoizedState=null):(e!==null&&cl(t,null),Zc(),oa());return ht(e,t,u,a),t.child}function Bi(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function hh(e,t,a,r,u){var g=Bc();return g=g===null?null:{parent:et._currentValue,pool:g},t.memoizedState={baseLanes:a,cachePool:g},e!==null&&cl(t,null),Zc(),xg(t),e!==null&&Cs(e,t,r,!0),t.childLanes=u,null}function Sl(e,t){return t=Cl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function mh(e,t,a){return Fa(t,e.child,null,a),e=Sl(t,t.pendingProps),e.flags|=2,Lt(t),t.memoizedState=null,e}function qb(e,t,a){var r=t.pendingProps,u=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Me){if(r.mode==="hidden")return e=Sl(t,r),t.lanes=536870912,Bi(null,e);if(Fc(t),(e=Ge)?(e=Cm(e,Xt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ea!==null?{id:cn,overflow:un}:null,retryLane:536870912,hydrationErrors:null},a=Wf(e),a.return=t,t.child=a,ft=t,Ge=null)):e=null,e===null)throw na(t);return t.lanes=536870912,null}return Sl(t,r)}var g=e.memoizedState;if(g!==null){var b=g.dehydrated;if(Fc(t),u)if(t.flags&256)t.flags&=-257,t=mh(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(nt||Cs(e,t,a,!1),u=(a&e.childLanes)!==0,nt||u){if(r=Ye,r!==null&&(b=$r(r,a),b!==0&&b!==g.retryLane))throw g.retryLane=b,Ba(e,b),zt(r,e,b),mu;Rl(),t=mh(e,t,a)}else e=g.treeContext,Ge=Qt(b.nextSibling),ft=t,Me=!0,ta=null,Xt=!1,e!==null&&tg(t,e),t=Sl(t,r),t.flags|=4096;return t}return e=Cn(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function kl(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function pu(e,t,a,r,u){return Ga(t),a=Ic(e,t,a,r,void 0,u),r=Jc(),e!==null&&!nt?(Wc(e,t,u),Dn(e,t,u)):(Me&&r&&Tc(t),t.flags|=1,ht(e,t,a,u),t.child)}function ph(e,t,a,r,u,g){return Ga(t),t.updateQueue=null,a=bg(t,r,a,u),yg(e),r=Jc(),e!==null&&!nt?(Wc(e,t,g),Dn(e,t,g)):(Me&&r&&Tc(t),t.flags|=1,ht(e,t,a,g),t.child)}function xh(e,t,a,r,u){if(Ga(t),t.stateNode===null){var g=ws,b=a.contextType;typeof b=="object"&&b!==null&&(g=gt(b)),g=new a(r,g),t.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=gu,t.stateNode=g,g._reactInternals=t,g=t.stateNode,g.props=r,g.state=t.memoizedState,g.refs={},qc(t),b=a.contextType,g.context=typeof b=="object"&&b!==null?gt(b):ws,g.state=t.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(fu(t,a,b,r),g.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&gu.enqueueReplaceState(g,g.state,null),Li(t,r,g,u),Oi(),g.state=t.memoizedState),typeof g.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){g=t.stateNode;var k=t.memoizedProps,R=Ia(a,k);g.props=R;var I=g.context,ne=a.contextType;b=ws,typeof ne=="object"&&ne!==null&&(b=gt(ne));var ie=a.getDerivedStateFromProps;ne=typeof ie=="function"||typeof g.getSnapshotBeforeUpdate=="function",k=t.pendingProps!==k,ne||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(k||I!==b)&&ah(t,g,r,b),sa=!1;var J=t.memoizedState;g.state=J,Li(t,r,g,u),Oi(),I=t.memoizedState,k||J!==I||sa?(typeof ie=="function"&&(fu(t,a,ie,r),I=t.memoizedState),(R=sa||nh(t,a,R,r,J,I,b))?(ne||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=I),g.props=r,g.state=I,g.context=b,r=R):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{g=t.stateNode,Yc(e,t),b=t.memoizedProps,ne=Ia(a,b),g.props=ne,ie=t.pendingProps,J=g.context,I=a.contextType,R=ws,typeof I=="object"&&I!==null&&(R=gt(I)),k=a.getDerivedStateFromProps,(I=typeof k=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==ie||J!==R)&&ah(t,g,r,R),sa=!1,J=t.memoizedState,g.state=J,Li(t,r,g,u),Oi();var P=t.memoizedState;b!==ie||J!==P||sa||e!==null&&e.dependencies!==null&&ll(e.dependencies)?(typeof k=="function"&&(fu(t,a,k,r),P=t.memoizedState),(ne=sa||nh(t,a,ne,r,J,P,R)||e!==null&&e.dependencies!==null&&ll(e.dependencies))?(I||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(r,P,R),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(r,P,R)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&J===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&J===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=P),g.props=r,g.state=P,g.context=R,r=ne):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&J===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&J===e.memoizedState||(t.flags|=1024),r=!1)}return g=r,kl(e,t),r=(t.flags&128)!==0,g||r?(g=t.stateNode,a=r&&typeof a.getDerivedStateFromError!="function"?null:g.render(),t.flags|=1,e!==null&&r?(t.child=Fa(t,e.child,null,u),t.child=Fa(t,null,a,u)):ht(e,t,a,u),t.memoizedState=g.state,e=t.child):e=Dn(e,t,u),e}function yh(e,t,a,r){return qa(),t.flags|=256,ht(e,t,a,r),t.child}var xu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yu(e){return{baseLanes:e,cachePool:lg()}}function bu(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=$t),e}function bh(e,t,a){var r=t.pendingProps,u=!1,g=(t.flags&128)!==0,b;if((b=g)||(b=e!==null&&e.memoizedState===null?!1:(Je.current&2)!==0),b&&(u=!0,t.flags&=-129),b=(t.flags&32)!==0,t.flags&=-33,e===null){if(Me){if(u?la(t):oa(),(e=Ge)?(e=Cm(e,Xt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ea!==null?{id:cn,overflow:un}:null,retryLane:536870912,hydrationErrors:null},a=Wf(e),a.return=t,t.child=a,ft=t,Ge=null)):e=null,e===null)throw na(t);return td(e)?t.lanes=32:t.lanes=536870912,null}var k=r.children;return r=r.fallback,u?(oa(),u=t.mode,k=Cl({mode:"hidden",children:k},u),r=Va(r,u,a,null),k.return=t,r.return=t,k.sibling=r,t.child=k,r=t.child,r.memoizedState=yu(a),r.childLanes=bu(e,b,a),t.memoizedState=xu,Bi(null,r)):(la(t),vu(t,k))}var R=e.memoizedState;if(R!==null&&(k=R.dehydrated,k!==null)){if(g)t.flags&256?(la(t),t.flags&=-257,t=_u(e,t,a)):t.memoizedState!==null?(oa(),t.child=e.child,t.flags|=128,t=null):(oa(),k=r.fallback,u=t.mode,r=Cl({mode:"visible",children:r.children},u),k=Va(k,u,a,null),k.flags|=2,r.return=t,k.return=t,r.sibling=k,t.child=r,Fa(t,e.child,null,a),r=t.child,r.memoizedState=yu(a),r.childLanes=bu(e,b,a),t.memoizedState=xu,t=Bi(null,r));else if(la(t),td(k)){if(b=k.nextSibling&&k.nextSibling.dataset,b)var I=b.dgst;b=I,r=Error(o(419)),r.stack="",r.digest=b,Ei({value:r,source:null,stack:null}),t=_u(e,t,a)}else if(nt||Cs(e,t,a,!1),b=(a&e.childLanes)!==0,nt||b){if(b=Ye,b!==null&&(r=$r(b,a),r!==0&&r!==R.retryLane))throw R.retryLane=r,Ba(e,r),zt(b,e,r),mu;ed(k)||Rl(),t=_u(e,t,a)}else ed(k)?(t.flags|=192,t.child=e.child,t=null):(e=R.treeContext,Ge=Qt(k.nextSibling),ft=t,Me=!0,ta=null,Xt=!1,e!==null&&tg(t,e),t=vu(t,r.children),t.flags|=4096);return t}return u?(oa(),k=r.fallback,u=t.mode,R=e.child,I=R.sibling,r=Cn(R,{mode:"hidden",children:r.children}),r.subtreeFlags=R.subtreeFlags&65011712,I!==null?k=Cn(I,k):(k=Va(k,u,a,null),k.flags|=2),k.return=t,r.return=t,r.sibling=k,t.child=r,Bi(null,r),r=t.child,k=e.child.memoizedState,k===null?k=yu(a):(u=k.cachePool,u!==null?(R=et._currentValue,u=u.parent!==R?{parent:R,pool:R}:u):u=lg(),k={baseLanes:k.baseLanes|a,cachePool:u}),r.memoizedState=k,r.childLanes=bu(e,b,a),t.memoizedState=xu,Bi(e.child,r)):(la(t),a=e.child,e=a.sibling,a=Cn(a,{mode:"visible",children:r.children}),a.return=t,a.sibling=null,e!==null&&(b=t.deletions,b===null?(t.deletions=[e],t.flags|=16):b.push(e)),t.child=a,t.memoizedState=null,a)}function vu(e,t){return t=Cl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Cl(e,t){return e=Dt(22,e,null,t),e.lanes=0,e}function _u(e,t,a){return Fa(t,e.child,null,a),e=vu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vh(e,t,a){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Rc(e.return,t,a)}function Nu(e,t,a,r,u,g){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:a,tailMode:u,treeForkCount:g}:(b.isBackwards=t,b.rendering=null,b.renderingStartTime=0,b.last=r,b.tail=a,b.tailMode=u,b.treeForkCount=g)}function _h(e,t,a){var r=t.pendingProps,u=r.revealOrder,g=r.tail;r=r.children;var b=Je.current,k=(b&2)!==0;if(k?(b=b&1|2,t.flags|=128):b&=1,se(Je,b),ht(e,t,r,a),r=Me?Ci:0,!k&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vh(e,a,t);else if(e.tag===19)vh(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(a=t.child,u=null;a!==null;)e=a.alternate,e!==null&&ml(e)===null&&(u=a),a=a.sibling;a=u,a===null?(u=t.child,t.child=null):(u=a.sibling,a.sibling=null),Nu(t,!1,u,a,g,r);break;case"backwards":case"unstable_legacy-backwards":for(a=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&ml(e)===null){t.child=u;break}e=u.sibling,u.sibling=a,a=u,u=e}Nu(t,!0,a,null,g,r);break;case"together":Nu(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Dn(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),da|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Cs(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,a=Cn(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Cn(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function wu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ll(e)))}function Yb(e,t,a){switch(t.tag){case 3:oe(t,t.stateNode.containerInfo),aa(t,et,e.memoizedState.cache),qa();break;case 27:case 5:je(t);break;case 4:oe(t,t.stateNode.containerInfo);break;case 10:aa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Fc(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(la(t),t.flags|=128,null):(a&t.child.childLanes)!==0?bh(e,t,a):(la(t),e=Dn(e,t,a),e!==null?e.sibling:null);la(t);break;case 19:var u=(e.flags&128)!==0;if(r=(a&t.childLanes)!==0,r||(Cs(e,t,a,!1),r=(a&t.childLanes)!==0),u){if(r)return _h(e,t,a);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),se(Je,Je.current),r)break;return null;case 22:return t.lanes=0,gh(e,t,a,t.pendingProps);case 24:aa(t,et,e.memoizedState.cache)}return Dn(e,t,a)}function Nh(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)nt=!0;else{if(!wu(e,a)&&(t.flags&128)===0)return nt=!1,Yb(e,t,a);nt=(e.flags&131072)!==0}else nt=!1,Me&&(t.flags&1048576)!==0&&eg(t,Ci,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=Za(t.elementType),t.type=e,typeof e=="function")Ec(e)?(r=Ia(e,r),t.tag=1,t=xh(null,t,e,r,a)):(t.tag=0,t=pu(null,t,e,r,a));else{if(e!=null){var u=e.$$typeof;if(u===C){t.tag=11,t=uh(null,t,e,r,a);break e}else if(u===V){t.tag=14,t=dh(null,t,e,r,a);break e}}throw t=M(e)||e,Error(o(306,t,""))}}return t;case 0:return pu(e,t,t.type,t.pendingProps,a);case 1:return r=t.type,u=Ia(r,t.pendingProps),xh(e,t,r,u,a);case 3:e:{if(oe(t,t.stateNode.containerInfo),e===null)throw Error(o(387));r=t.pendingProps;var g=t.memoizedState;u=g.element,Yc(e,t),Li(t,r,null,a);var b=t.memoizedState;if(r=b.cache,aa(t,et,r),r!==g.cache&&$c(t,[et],a,!0),Oi(),r=b.element,g.isDehydrated)if(g={element:r,isDehydrated:!1,cache:b.cache},t.updateQueue.baseState=g,t.memoizedState=g,t.flags&256){t=yh(e,t,r,a);break e}else if(r!==u){u=qt(Error(o(424)),t),Ei(u),t=yh(e,t,r,a);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ge=Qt(e.firstChild),ft=t,Me=!0,ta=null,Xt=!0,a=gg(t,null,r,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(qa(),r===u){t=Dn(e,t,a);break e}ht(e,t,r,a)}t=t.child}return t;case 26:return kl(e,t),e===null?(a=Dm(t.type,null,t.pendingProps,null))?t.memoizedState=a:Me||(a=t.type,e=t.pendingProps,r=Yl(be.current).createElement(a),r[rt]=t,r[pt]=e,mt(r,a,e),Pe(r),t.stateNode=r):t.memoizedState=Dm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return je(t),e===null&&Me&&(r=t.stateNode=Am(t.type,t.pendingProps,be.current),ft=t,Xt=!0,u=Ge,pa(t.type)?(nd=u,Ge=Qt(r.firstChild)):Ge=u),ht(e,t,t.pendingProps.children,a),kl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Me&&((u=r=Ge)&&(r=bv(r,t.type,t.pendingProps,Xt),r!==null?(t.stateNode=r,ft=t,Ge=Qt(r.firstChild),Xt=!1,u=!0):u=!1),u||na(t)),je(t),u=t.type,g=t.pendingProps,b=e!==null?e.memoizedProps:null,r=g.children,Ju(u,g)?r=null:b!==null&&Ju(u,b)&&(t.flags|=32),t.memoizedState!==null&&(u=Ic(e,t,Ob,null,null,a),tr._currentValue=u),kl(e,t),ht(e,t,r,a),t.child;case 6:return e===null&&Me&&((e=a=Ge)&&(a=vv(a,t.pendingProps,Xt),a!==null?(t.stateNode=a,ft=t,Ge=null,e=!0):e=!1),e||na(t)),null;case 13:return bh(e,t,a);case 4:return oe(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Fa(t,null,r,a):ht(e,t,r,a),t.child;case 11:return uh(e,t,t.type,t.pendingProps,a);case 7:return ht(e,t,t.pendingProps,a),t.child;case 8:return ht(e,t,t.pendingProps.children,a),t.child;case 12:return ht(e,t,t.pendingProps.children,a),t.child;case 10:return r=t.pendingProps,aa(t,t.type,r.value),ht(e,t,r.children,a),t.child;case 9:return u=t.type._context,r=t.pendingProps.children,Ga(t),u=gt(u),r=r(u),t.flags|=1,ht(e,t,r,a),t.child;case 14:return dh(e,t,t.type,t.pendingProps,a);case 15:return fh(e,t,t.type,t.pendingProps,a);case 19:return _h(e,t,a);case 31:return qb(e,t,a);case 22:return gh(e,t,a,t.pendingProps);case 24:return Ga(t),r=gt(et),e===null?(u=Bc(),u===null&&(u=Ye,g=Hc(),u.pooledCache=g,g.refCount++,g!==null&&(u.pooledCacheLanes|=a),u=g),t.memoizedState={parent:r,cache:u},qc(t),aa(t,et,u)):((e.lanes&a)!==0&&(Yc(e,t),Li(t,null,null,a),Oi()),u=e.memoizedState,g=t.memoizedState,u.parent!==r?(u={parent:r,cache:r},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),aa(t,et,r)):(r=g.cache,aa(t,et,r),r!==u.cache&&$c(t,[et],a,!0))),ht(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function On(e){e.flags|=4}function ju(e,t,a,r,u){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(Kh())e.flags|=8192;else throw Qa=dl,Vc}else e.flags&=-16777217}function wh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Hm(t))if(Kh())e.flags|=8192;else throw Qa=dl,Vc}function El(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Or():536870912,e.lanes|=t,Us|=t)}function Vi(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,r=0;if(t)for(var u=e.child;u!==null;)a|=u.lanes|u.childLanes,r|=u.subtreeFlags&65011712,r|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)a|=u.lanes|u.childLanes,r|=u.subtreeFlags,r|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=r,e.childLanes=a,t}function Gb(e,t,a){var r=t.pendingProps;switch(Mc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return Xe(t),null;case 3:return a=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),An(et),fe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ks(t)?On(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Oc())),Xe(t),null;case 26:var u=t.type,g=t.memoizedState;return e===null?(On(t),g!==null?(Xe(t),wh(t,g)):(Xe(t),ju(t,u,null,r,a))):g?g!==e.memoizedState?(On(t),Xe(t),wh(t,g)):(Xe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==r&&On(t),Xe(t),ju(t,u,e,r,a)),null;case 27:if(Ne(t),a=be.current,u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&On(t);else{if(!r){if(t.stateNode===null)throw Error(o(166));return Xe(t),null}e=le.current,ks(t)?ng(t):(e=Am(u,r,a),t.stateNode=e,On(t))}return Xe(t),null;case 5:if(Ne(t),u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&On(t);else{if(!r){if(t.stateNode===null)throw Error(o(166));return Xe(t),null}if(g=le.current,ks(t))ng(t);else{var b=Yl(be.current);switch(g){case 1:g=b.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:g=b.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":g=b.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":g=b.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":g=b.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof r.is=="string"?b.createElement("select",{is:r.is}):b.createElement("select"),r.multiple?g.multiple=!0:r.size&&(g.size=r.size);break;default:g=typeof r.is=="string"?b.createElement(u,{is:r.is}):b.createElement(u)}}g[rt]=t,g[pt]=r;e:for(b=t.child;b!==null;){if(b.tag===5||b.tag===6)g.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===t)break e;for(;b.sibling===null;){if(b.return===null||b.return===t)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}t.stateNode=g;e:switch(mt(g,u,r),u){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&On(t)}}return Xe(t),ju(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&On(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(o(166));if(e=be.current,ks(t)){if(e=t.stateNode,a=t.memoizedProps,r=null,u=ft,u!==null)switch(u.tag){case 27:case 5:r=u.memoizedProps}e[rt]=t,e=!!(e.nodeValue===a||r!==null&&r.suppressHydrationWarning===!0||bm(e.nodeValue,a)),e||na(t,!0)}else e=Yl(e).createTextNode(r),e[rt]=t,t.stateNode=e}return Xe(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(r=ks(t),a!==null){if(e===null){if(!r)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[rt]=t}else qa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Xe(t),e=!1}else a=Oc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(Lt(t),t):(Lt(t),null);if((t.flags&128)!==0)throw Error(o(558))}return Xe(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=ks(t),r!==null&&r.dehydrated!==null){if(e===null){if(!u)throw Error(o(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));u[rt]=t}else qa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Xe(t),u=!1}else u=Oc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return t.flags&256?(Lt(t),t):(Lt(t),null)}return Lt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=r!==null,e=e!==null&&e.memoizedState!==null,a&&(r=t.child,u=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(u=r.alternate.memoizedState.cachePool.pool),g=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(g=r.memoizedState.cachePool.pool),g!==u&&(r.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),El(t,t.updateQueue),Xe(t),null);case 4:return fe(),e===null&&Zu(t.stateNode.containerInfo),Xe(t),null;case 10:return An(t.type),Xe(t),null;case 19:if(W(Je),r=t.memoizedState,r===null)return Xe(t),null;if(u=(t.flags&128)!==0,g=r.rendering,g===null)if(u)Vi(r,!1);else{if(Ie!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=ml(e),g!==null){for(t.flags|=128,Vi(r,!1),e=g.updateQueue,t.updateQueue=e,El(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Jf(a,e),a=a.sibling;return se(Je,Je.current&1|2),Me&&En(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&dt()>Dl&&(t.flags|=128,u=!0,Vi(r,!1),t.lanes=4194304)}else{if(!u)if(e=ml(g),e!==null){if(t.flags|=128,u=!0,e=e.updateQueue,t.updateQueue=e,El(t,e),Vi(r,!0),r.tail===null&&r.tailMode==="hidden"&&!g.alternate&&!Me)return Xe(t),null}else 2*dt()-r.renderingStartTime>Dl&&a!==536870912&&(t.flags|=128,u=!0,Vi(r,!1),t.lanes=4194304);r.isBackwards?(g.sibling=t.child,t.child=g):(e=r.last,e!==null?e.sibling=g:t.child=g,r.last=g)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=dt(),e.sibling=null,a=Je.current,se(Je,u?a&1|2:a&1),Me&&En(t,r.treeForkCount),e):(Xe(t),null);case 22:case 23:return Lt(t),Qc(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?(a&536870912)!==0&&(t.flags&128)===0&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),a=t.updateQueue,a!==null&&El(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==a&&(t.flags|=2048),e!==null&&W(Xa),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),An(et),Xe(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function Xb(e,t){switch(Mc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return An(et),fe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ne(t),null;case 31:if(t.memoizedState!==null){if(Lt(t),t.alternate===null)throw Error(o(340));qa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Lt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));qa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return W(Je),null;case 4:return fe(),null;case 10:return An(t.type),null;case 22:case 23:return Lt(t),Qc(),e!==null&&W(Xa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return An(et),null;case 25:return null;default:return null}}function jh(e,t){switch(Mc(t),t.tag){case 3:An(et),fe();break;case 26:case 27:case 5:Ne(t);break;case 4:fe();break;case 31:t.memoizedState!==null&&Lt(t);break;case 13:Lt(t);break;case 19:W(Je);break;case 10:An(t.type);break;case 22:case 23:Lt(t),Qc(),e!==null&&W(Xa);break;case 24:An(et)}}function qi(e,t){try{var a=t.updateQueue,r=a!==null?a.lastEffect:null;if(r!==null){var u=r.next;a=u;do{if((a.tag&e)===e){r=void 0;var g=a.create,b=a.inst;r=g(),b.destroy=r}a=a.next}while(a!==u)}}catch(k){Ue(t,t.return,k)}}function ca(e,t,a){try{var r=t.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var g=u.next;r=g;do{if((r.tag&e)===e){var b=r.inst,k=b.destroy;if(k!==void 0){b.destroy=void 0,u=t;var R=a,I=k;try{I()}catch(ne){Ue(u,R,ne)}}}r=r.next}while(r!==g)}}catch(ne){Ue(t,t.return,ne)}}function Sh(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{mg(t,a)}catch(r){Ue(e,e.return,r)}}}function kh(e,t,a){a.props=Ia(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(r){Ue(e,t,r)}}function Yi(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof a=="function"?e.refCleanup=a(r):a.current=r}}catch(u){Ue(e,t,u)}}function dn(e,t){var a=e.ref,r=e.refCleanup;if(a!==null)if(typeof r=="function")try{r()}catch(u){Ue(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(u){Ue(e,t,u)}else a.current=null}function Ch(e){var t=e.type,a=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&r.focus();break e;case"img":a.src?r.src=a.src:a.srcSet&&(r.srcset=a.srcSet)}}catch(u){Ue(e,e.return,u)}}function Su(e,t,a){try{var r=e.stateNode;gv(r,e.type,a,t),r[pt]=t}catch(u){Ue(e,e.return,u)}}function Eh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&pa(e.type)||e.tag===4}function ku(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Eh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&pa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Cu(e,t,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Sn));else if(r!==4&&(r===27&&pa(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Cu(e,t,a),e=e.sibling;e!==null;)Cu(e,t,a),e=e.sibling}function zl(e,t,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(r!==4&&(r===27&&pa(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(zl(e,t,a),e=e.sibling;e!==null;)zl(e,t,a),e=e.sibling}function zh(e){var t=e.stateNode,a=e.memoizedProps;try{for(var r=e.type,u=t.attributes;u.length;)t.removeAttributeNode(u[0]);mt(t,r,a),t[rt]=e,t[pt]=a}catch(g){Ue(e,e.return,g)}}var Ln=!1,at=!1,Eu=!1,Ah=typeof WeakSet=="function"?WeakSet:Set,ct=null;function Zb(e,t){if(e=e.containerInfo,Ku=Il,e=qf(e),_c(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var r=a.getSelection&&a.getSelection();if(r&&r.rangeCount!==0){a=r.anchorNode;var u=r.anchorOffset,g=r.focusNode;r=r.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var b=0,k=-1,R=-1,I=0,ne=0,ie=e,J=null;t:for(;;){for(var P;ie!==a||u!==0&&ie.nodeType!==3||(k=b+u),ie!==g||r!==0&&ie.nodeType!==3||(R=b+r),ie.nodeType===3&&(b+=ie.nodeValue.length),(P=ie.firstChild)!==null;)J=ie,ie=P;for(;;){if(ie===e)break t;if(J===a&&++I===u&&(k=b),J===g&&++ne===r&&(R=b),(P=ie.nextSibling)!==null)break;ie=J,J=ie.parentNode}ie=P}a=k===-1||R===-1?null:{start:k,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Iu={focusedElem:e,selectionRange:a},Il=!1,ct=t;ct!==null;)if(t=ct,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ct=e;else for(;ct!==null;){switch(t=ct,g=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)u=e[a],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,a=t,u=g.memoizedProps,g=g.memoizedState,r=a.stateNode;try{var ue=Ia(a.type,u);e=r.getSnapshotBeforeUpdate(ue,g),r.__reactInternalSnapshotBeforeUpdate=e}catch(ve){Ue(a,a.return,ve)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Pu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Pu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,ct=e;break}ct=t.return}}function Th(e,t,a){var r=a.flags;switch(a.tag){case 0:case 11:case 15:$n(e,a),r&4&&qi(5,a);break;case 1:if($n(e,a),r&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(b){Ue(a,a.return,b)}else{var u=Ia(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(b){Ue(a,a.return,b)}}r&64&&Sh(a),r&512&&Yi(a,a.return);break;case 3:if($n(e,a),r&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{mg(e,t)}catch(b){Ue(a,a.return,b)}}break;case 27:t===null&&r&4&&zh(a);case 26:case 5:$n(e,a),t===null&&r&4&&Ch(a),r&512&&Yi(a,a.return);break;case 12:$n(e,a);break;case 31:$n(e,a),r&4&&Oh(e,a);break;case 13:$n(e,a),r&4&&Lh(e,a),r&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=tv.bind(null,a),_v(e,a))));break;case 22:if(r=a.memoizedState!==null||Ln,!r){t=t!==null&&t.memoizedState!==null||at,u=Ln;var g=at;Ln=r,(at=t)&&!g?Hn(e,a,(a.subtreeFlags&8772)!==0):$n(e,a),Ln=u,at=g}break;case 30:break;default:$n(e,a)}}function Mh(e){var t=e.alternate;t!==null&&(e.alternate=null,Mh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&mi(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ze=null,St=!1;function Rn(e,t,a){for(a=a.child;a!==null;)Dh(e,t,a),a=a.sibling}function Dh(e,t,a){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(Ta,a)}catch{}switch(a.tag){case 26:at||dn(a,t),Rn(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:at||dn(a,t);var r=Ze,u=St;pa(a.type)&&(Ze=a.stateNode,St=!1),Rn(e,t,a),Wi(a.stateNode),Ze=r,St=u;break;case 5:at||dn(a,t);case 6:if(r=Ze,u=St,Ze=null,Rn(e,t,a),Ze=r,St=u,Ze!==null)if(St)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(a.stateNode)}catch(g){Ue(a,t,g)}else try{Ze.removeChild(a.stateNode)}catch(g){Ue(a,t,g)}break;case 18:Ze!==null&&(St?(e=Ze,Sm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Qs(e)):Sm(Ze,a.stateNode));break;case 4:r=Ze,u=St,Ze=a.stateNode.containerInfo,St=!0,Rn(e,t,a),Ze=r,St=u;break;case 0:case 11:case 14:case 15:ca(2,a,t),at||ca(4,a,t),Rn(e,t,a);break;case 1:at||(dn(a,t),r=a.stateNode,typeof r.componentWillUnmount=="function"&&kh(a,t,r)),Rn(e,t,a);break;case 21:Rn(e,t,a);break;case 22:at=(r=at)||a.memoizedState!==null,Rn(e,t,a),at=r;break;default:Rn(e,t,a)}}function Oh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Qs(e)}catch(a){Ue(t,t.return,a)}}}function Lh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Qs(e)}catch(a){Ue(t,t.return,a)}}function Qb(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Ah),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Ah),t;default:throw Error(o(435,e.tag))}}function Al(e,t){var a=Qb(e);t.forEach(function(r){if(!a.has(r)){a.add(r);var u=nv.bind(null,e,r);r.then(u,u)}})}function kt(e,t){var a=t.deletions;if(a!==null)for(var r=0;r<a.length;r++){var u=a[r],g=e,b=t,k=b;e:for(;k!==null;){switch(k.tag){case 27:if(pa(k.type)){Ze=k.stateNode,St=!1;break e}break;case 5:Ze=k.stateNode,St=!1;break e;case 3:case 4:Ze=k.stateNode.containerInfo,St=!0;break e}k=k.return}if(Ze===null)throw Error(o(160));Dh(g,b,u),Ze=null,St=!1,g=u.alternate,g!==null&&(g.return=null),u.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Rh(t,e),t=t.sibling}var Pt=null;function Rh(e,t){var a=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:kt(t,e),Ct(e),r&4&&(ca(3,e,e.return),qi(3,e),ca(5,e,e.return));break;case 1:kt(t,e),Ct(e),r&512&&(at||a===null||dn(a,a.return)),r&64&&Ln&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?r:a.concat(r))));break;case 26:var u=Pt;if(kt(t,e),Ct(e),r&512&&(at||a===null||dn(a,a.return)),r&4){var g=a!==null?a.memoizedState:null;if(r=e.memoizedState,a===null)if(r===null)if(e.stateNode===null){e:{r=e.type,a=e.memoizedProps,u=u.ownerDocument||u;t:switch(r){case"title":g=u.getElementsByTagName("title")[0],(!g||g[Oa]||g[rt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=u.createElement(r),u.head.insertBefore(g,u.querySelector("head > title"))),mt(g,r,a),g[rt]=e,Pe(g),r=g;break e;case"link":var b=Rm("link","href",u).get(r+(a.href||""));if(b){for(var k=0;k<b.length;k++)if(g=b[k],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(k,1);break t}}g=u.createElement(r),mt(g,r,a),u.head.appendChild(g);break;case"meta":if(b=Rm("meta","content",u).get(r+(a.content||""))){for(k=0;k<b.length;k++)if(g=b[k],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(k,1);break t}}g=u.createElement(r),mt(g,r,a),u.head.appendChild(g);break;default:throw Error(o(468,r))}g[rt]=e,Pe(g),r=g}e.stateNode=r}else $m(u,e.type,e.stateNode);else e.stateNode=Lm(u,r,e.memoizedProps);else g!==r?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,r===null?$m(u,e.type,e.stateNode):Lm(u,r,e.memoizedProps)):r===null&&e.stateNode!==null&&Su(e,e.memoizedProps,a.memoizedProps)}break;case 27:kt(t,e),Ct(e),r&512&&(at||a===null||dn(a,a.return)),a!==null&&r&4&&Su(e,e.memoizedProps,a.memoizedProps);break;case 5:if(kt(t,e),Ct(e),r&512&&(at||a===null||dn(a,a.return)),e.flags&32){u=e.stateNode;try{ps(u,"")}catch(ue){Ue(e,e.return,ue)}}r&4&&e.stateNode!=null&&(u=e.memoizedProps,Su(e,u,a!==null?a.memoizedProps:u)),r&1024&&(Eu=!0);break;case 6:if(kt(t,e),Ct(e),r&4){if(e.stateNode===null)throw Error(o(162));r=e.memoizedProps,a=e.stateNode;try{a.nodeValue=r}catch(ue){Ue(e,e.return,ue)}}break;case 3:if(Zl=null,u=Pt,Pt=Gl(t.containerInfo),kt(t,e),Pt=u,Ct(e),r&4&&a!==null&&a.memoizedState.isDehydrated)try{Qs(t.containerInfo)}catch(ue){Ue(e,e.return,ue)}Eu&&(Eu=!1,$h(e));break;case 4:r=Pt,Pt=Gl(e.stateNode.containerInfo),kt(t,e),Ct(e),Pt=r;break;case 12:kt(t,e),Ct(e);break;case 31:kt(t,e),Ct(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Al(e,r)));break;case 13:kt(t,e),Ct(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ml=dt()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Al(e,r)));break;case 22:u=e.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,I=Ln,ne=at;if(Ln=I||u,at=ne||R,kt(t,e),at=ne,Ln=I,Ct(e),r&8192)e:for(t=e.stateNode,t._visibility=u?t._visibility&-2:t._visibility|1,u&&(a===null||R||Ln||at||Ja(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){R=a=t;try{if(g=R.stateNode,u)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{k=R.stateNode;var ie=R.memoizedProps.style,J=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;k.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ue){Ue(R,R.return,ue)}}}else if(t.tag===6){if(a===null){R=t;try{R.stateNode.nodeValue=u?"":R.memoizedProps}catch(ue){Ue(R,R.return,ue)}}}else if(t.tag===18){if(a===null){R=t;try{var P=R.stateNode;u?km(P,!0):km(R.stateNode,!1)}catch(ue){Ue(R,R.return,ue)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(a=r.retryQueue,a!==null&&(r.retryQueue=null,Al(e,a))));break;case 19:kt(t,e),Ct(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Al(e,r)));break;case 30:break;case 21:break;default:kt(t,e),Ct(e)}}function Ct(e){var t=e.flags;if(t&2){try{for(var a,r=e.return;r!==null;){if(Eh(r)){a=r;break}r=r.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var u=a.stateNode,g=ku(e);zl(e,g,u);break;case 5:var b=a.stateNode;a.flags&32&&(ps(b,""),a.flags&=-33);var k=ku(e);zl(e,k,b);break;case 3:case 4:var R=a.stateNode.containerInfo,I=ku(e);Cu(e,I,R);break;default:throw Error(o(161))}}catch(ne){Ue(e,e.return,ne)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $h(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;$h(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function $n(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Th(e,t.alternate,t),t=t.sibling}function Ja(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ca(4,t,t.return),Ja(t);break;case 1:dn(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&kh(t,t.return,a),Ja(t);break;case 27:Wi(t.stateNode);case 26:case 5:dn(t,t.return),Ja(t);break;case 22:t.memoizedState===null&&Ja(t);break;case 30:Ja(t);break;default:Ja(t)}e=e.sibling}}function Hn(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,u=e,g=t,b=g.flags;switch(g.tag){case 0:case 11:case 15:Hn(u,g,a),qi(4,g);break;case 1:if(Hn(u,g,a),r=g,u=r.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(I){Ue(r,r.return,I)}if(r=g,u=r.updateQueue,u!==null){var k=r.stateNode;try{var R=u.shared.hiddenCallbacks;if(R!==null)for(u.shared.hiddenCallbacks=null,u=0;u<R.length;u++)hg(R[u],k)}catch(I){Ue(r,r.return,I)}}a&&b&64&&Sh(g),Yi(g,g.return);break;case 27:zh(g);case 26:case 5:Hn(u,g,a),a&&r===null&&b&4&&Ch(g),Yi(g,g.return);break;case 12:Hn(u,g,a);break;case 31:Hn(u,g,a),a&&b&4&&Oh(u,g);break;case 13:Hn(u,g,a),a&&b&4&&Lh(u,g);break;case 22:g.memoizedState===null&&Hn(u,g,a),Yi(g,g.return);break;case 30:break;default:Hn(u,g,a)}t=t.sibling}}function zu(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&zi(a))}function Au(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&zi(e))}function en(e,t,a,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Hh(e,t,a,r),t=t.sibling}function Hh(e,t,a,r){var u=t.flags;switch(t.tag){case 0:case 11:case 15:en(e,t,a,r),u&2048&&qi(9,t);break;case 1:en(e,t,a,r);break;case 3:en(e,t,a,r),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&zi(e)));break;case 12:if(u&2048){en(e,t,a,r),e=t.stateNode;try{var g=t.memoizedProps,b=g.id,k=g.onPostCommit;typeof k=="function"&&k(b,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){Ue(t,t.return,R)}}else en(e,t,a,r);break;case 31:en(e,t,a,r);break;case 13:en(e,t,a,r);break;case 23:break;case 22:g=t.stateNode,b=t.alternate,t.memoizedState!==null?g._visibility&2?en(e,t,a,r):Gi(e,t):g._visibility&2?en(e,t,a,r):(g._visibility|=2,Rs(e,t,a,r,(t.subtreeFlags&10256)!==0||!1)),u&2048&&zu(b,t);break;case 24:en(e,t,a,r),u&2048&&Au(t.alternate,t);break;default:en(e,t,a,r)}}function Rs(e,t,a,r,u){for(u=u&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var g=e,b=t,k=a,R=r,I=b.flags;switch(b.tag){case 0:case 11:case 15:Rs(g,b,k,R,u),qi(8,b);break;case 23:break;case 22:var ne=b.stateNode;b.memoizedState!==null?ne._visibility&2?Rs(g,b,k,R,u):Gi(g,b):(ne._visibility|=2,Rs(g,b,k,R,u)),u&&I&2048&&zu(b.alternate,b);break;case 24:Rs(g,b,k,R,u),u&&I&2048&&Au(b.alternate,b);break;default:Rs(g,b,k,R,u)}t=t.sibling}}function Gi(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,r=t,u=r.flags;switch(r.tag){case 22:Gi(a,r),u&2048&&zu(r.alternate,r);break;case 24:Gi(a,r),u&2048&&Au(r.alternate,r);break;default:Gi(a,r)}t=t.sibling}}var Xi=8192;function $s(e,t,a){if(e.subtreeFlags&Xi)for(e=e.child;e!==null;)Uh(e,t,a),e=e.sibling}function Uh(e,t,a){switch(e.tag){case 26:$s(e,t,a),e.flags&Xi&&e.memoizedState!==null&&Dv(a,Pt,e.memoizedState,e.memoizedProps);break;case 5:$s(e,t,a);break;case 3:case 4:var r=Pt;Pt=Gl(e.stateNode.containerInfo),$s(e,t,a),Pt=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Xi,Xi=16777216,$s(e,t,a),Xi=r):$s(e,t,a));break;default:$s(e,t,a)}}function Bh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Zi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var r=t[a];ct=r,qh(r,e)}Bh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Vh(e),e=e.sibling}function Vh(e){switch(e.tag){case 0:case 11:case 15:Zi(e),e.flags&2048&&ca(9,e,e.return);break;case 3:Zi(e);break;case 12:Zi(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Tl(e)):Zi(e);break;default:Zi(e)}}function Tl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var r=t[a];ct=r,qh(r,e)}Bh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ca(8,t,t.return),Tl(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Tl(t));break;default:Tl(t)}e=e.sibling}}function qh(e,t){for(;ct!==null;){var a=ct;switch(a.tag){case 0:case 11:case 15:ca(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var r=a.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:zi(a.memoizedState.cache)}if(r=a.child,r!==null)r.return=a,ct=r;else e:for(a=e;ct!==null;){r=ct;var u=r.sibling,g=r.return;if(Mh(r),r===a){ct=null;break e}if(u!==null){u.return=g,ct=u;break e}ct=g}}}var Fb={getCacheForType:function(e){var t=gt(et),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return gt(et).controller.signal}},Kb=typeof WeakMap=="function"?WeakMap:Map,$e=0,Ye=null,Ee=null,Ae=0,He=0,Rt=null,ua=!1,Hs=!1,Tu=!1,Un=0,Ie=0,da=0,Wa=0,Mu=0,$t=0,Us=0,Qi=null,Et=null,Du=!1,Ml=0,Yh=0,Dl=1/0,Ol=null,fa=null,lt=0,ga=null,Bs=null,Bn=0,Ou=0,Lu=null,Gh=null,Fi=0,Ru=null;function Ht(){return($e&2)!==0&&Ae!==0?Ae&-Ae:j.T!==null?qu():Hr()}function Xh(){if($t===0)if((Ae&536870912)===0||Me){var e=cs;cs<<=1,(cs&3932160)===0&&(cs=262144),$t=e}else $t=536870912;return e=Ot.current,e!==null&&(e.flags|=32),$t}function zt(e,t,a){(e===Ye&&(He===2||He===9)||e.cancelPendingCommit!==null)&&(Vs(e,0),ha(e,Ae,$t,!1)),Da(e,a),(($e&2)===0||e!==Ye)&&(e===Ye&&(($e&2)===0&&(Wa|=a),Ie===4&&ha(e,Ae,$t,!1)),fn(e))}function Zh(e,t,a){if(($e&6)!==0)throw Error(o(327));var r=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Ma(e,t),u=r?Wb(e,t):Hu(e,t,!0),g=r;do{if(u===0){Hs&&!r&&ha(e,t,0,!1);break}else{if(a=e.current.alternate,g&&!Ib(a)){u=Hu(e,t,!1),g=!1;continue}if(u===2){if(g=t,e.errorRecoveryDisabledLanes&g)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){t=b;e:{var k=e;u=Qi;var R=k.current.memoizedState.isDehydrated;if(R&&(Vs(k,b).flags|=256),b=Hu(k,b,!1),b!==2){if(Tu&&!R){k.errorRecoveryDisabledLanes|=g,Wa|=g,u=4;break e}g=Et,Et=u,g!==null&&(Et===null?Et=g:Et.push.apply(Et,g))}u=b}if(g=!1,u!==2)continue}}if(u===1){Vs(e,0),ha(e,t,0,!0);break}e:{switch(r=e,g=u,g){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:ha(r,t,$t,!ua);break e;case 2:Et=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(u=Ml+300-dt(),10<u)){if(ha(r,t,$t,!ua),ds(r,0,!0)!==0)break e;Bn=t,r.timeoutHandle=wm(Qh.bind(null,r,a,Et,Ol,Du,t,$t,Wa,Us,ua,g,"Throttled",-0,0),u);break e}Qh(r,a,Et,Ol,Du,t,$t,Wa,Us,ua,g,null,-0,0)}}break}while(!0);fn(e)}function Qh(e,t,a,r,u,g,b,k,R,I,ne,ie,J,P){if(e.timeoutHandle=-1,ie=t.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Sn},Uh(t,g,ie);var ue=(g&62914560)===g?Ml-dt():(g&4194048)===g?Yh-dt():0;if(ue=Ov(ie,ue),ue!==null){Bn=g,e.cancelPendingCommit=ue(tm.bind(null,e,t,g,a,r,u,b,k,R,ne,ie,null,J,P)),ha(e,g,b,!I);return}}tm(e,t,g,a,r,u,b,k,R)}function Ib(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var r=0;r<a.length;r++){var u=a[r],g=u.getSnapshot;u=u.value;try{if(!Mt(g(),u))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ha(e,t,a,r){t&=~Mu,t&=~Wa,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var u=t;0<u;){var g=31-yt(u),b=1<<g;r[g]=-1,u&=~b}a!==0&&Lr(e,a,t)}function Ll(){return($e&6)===0?(Ki(0),!1):!0}function $u(){if(Ee!==null){if(He===0)var e=Ee.return;else e=Ee,zn=Ya=null,Pc(e),Ts=null,Ti=0,e=Ee;for(;e!==null;)jh(e.alternate,e),e=e.return;Ee=null}}function Vs(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,pv(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Bn=0,$u(),Ye=e,Ee=a=Cn(e.current,null),Ae=t,He=0,Rt=null,ua=!1,Hs=Ma(e,t),Tu=!1,Us=$t=Mu=Wa=da=Ie=0,Et=Qi=null,Du=!1,(t&8)!==0&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var u=31-yt(r),g=1<<u;t|=e[u],r&=~g}return Un=t,nl(),a}function Fh(e,t){Se=null,j.H=Ui,t===As||t===ul?(t=ug(),He=3):t===Vc?(t=ug(),He=4):He=t===mu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Rt=t,Ee===null&&(Ie=1,jl(e,qt(t,e.current)))}function Kh(){var e=Ot.current;return e===null?!0:(Ae&4194048)===Ae?Zt===null:(Ae&62914560)===Ae||(Ae&536870912)!==0?e===Zt:!1}function Ih(){var e=j.H;return j.H=Ui,e===null?Ui:e}function Jh(){var e=j.A;return j.A=Fb,e}function Rl(){Ie=4,ua||(Ae&4194048)!==Ae&&Ot.current!==null||(Hs=!0),(da&134217727)===0&&(Wa&134217727)===0||Ye===null||ha(Ye,Ae,$t,!1)}function Hu(e,t,a){var r=$e;$e|=2;var u=Ih(),g=Jh();(Ye!==e||Ae!==t)&&(Ol=null,Vs(e,t)),t=!1;var b=Ie;e:do try{if(He!==0&&Ee!==null){var k=Ee,R=Rt;switch(He){case 8:$u(),b=6;break e;case 3:case 2:case 9:case 6:Ot.current===null&&(t=!0);var I=He;if(He=0,Rt=null,qs(e,k,R,I),a&&Hs){b=0;break e}break;default:I=He,He=0,Rt=null,qs(e,k,R,I)}}Jb(),b=Ie;break}catch(ne){Fh(e,ne)}while(!0);return t&&e.shellSuspendCounter++,zn=Ya=null,$e=r,j.H=u,j.A=g,Ee===null&&(Ye=null,Ae=0,nl()),b}function Jb(){for(;Ee!==null;)Wh(Ee)}function Wb(e,t){var a=$e;$e|=2;var r=Ih(),u=Jh();Ye!==e||Ae!==t?(Ol=null,Dl=dt()+500,Vs(e,t)):Hs=Ma(e,t);e:do try{if(He!==0&&Ee!==null){t=Ee;var g=Rt;t:switch(He){case 1:He=0,Rt=null,qs(e,t,g,1);break;case 2:case 9:if(og(g)){He=0,Rt=null,Ph(t);break}t=function(){He!==2&&He!==9||Ye!==e||(He=7),fn(e)},g.then(t,t);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:og(g)?(He=0,Rt=null,Ph(t)):(He=0,Rt=null,qs(e,t,g,7));break;case 5:var b=null;switch(Ee.tag){case 26:b=Ee.memoizedState;case 5:case 27:var k=Ee;if(b?Hm(b):k.stateNode.complete){He=0,Rt=null;var R=k.sibling;if(R!==null)Ee=R;else{var I=k.return;I!==null?(Ee=I,$l(I)):Ee=null}break t}}He=0,Rt=null,qs(e,t,g,5);break;case 6:He=0,Rt=null,qs(e,t,g,6);break;case 8:$u(),Ie=6;break e;default:throw Error(o(462))}}Pb();break}catch(ne){Fh(e,ne)}while(!0);return zn=Ya=null,j.H=r,j.A=u,$e=a,Ee!==null?0:(Ye=null,Ae=0,nl(),Ie)}function Pb(){for(;Ee!==null&&!Ea();)Wh(Ee)}function Wh(e){var t=Nh(e.alternate,e,Un);e.memoizedProps=e.pendingProps,t===null?$l(e):Ee=t}function Ph(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=ph(a,t,t.pendingProps,t.type,void 0,Ae);break;case 11:t=ph(a,t,t.pendingProps,t.type.render,t.ref,Ae);break;case 5:Pc(t);default:jh(a,t),t=Ee=Jf(t,Un),t=Nh(a,t,Un)}e.memoizedProps=e.pendingProps,t===null?$l(e):Ee=t}function qs(e,t,a,r){zn=Ya=null,Pc(t),Ts=null,Ti=0;var u=t.return;try{if(Vb(e,u,t,a,Ae)){Ie=1,jl(e,qt(a,e.current)),Ee=null;return}}catch(g){if(u!==null)throw Ee=u,g;Ie=1,jl(e,qt(a,e.current)),Ee=null;return}t.flags&32768?(Me||r===1?e=!0:Hs||(Ae&536870912)!==0?e=!1:(ua=e=!0,(r===2||r===9||r===3||r===6)&&(r=Ot.current,r!==null&&r.tag===13&&(r.flags|=16384))),em(t,e)):$l(t)}function $l(e){var t=e;do{if((t.flags&32768)!==0){em(t,ua);return}e=t.return;var a=Gb(t.alternate,t,Un);if(a!==null){Ee=a;return}if(t=t.sibling,t!==null){Ee=t;return}Ee=t=e}while(t!==null);Ie===0&&(Ie=5)}function em(e,t){do{var a=Xb(e.alternate,e);if(a!==null){a.flags&=32767,Ee=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Ee=e;return}Ee=e=a}while(e!==null);Ie=6,Ee=null}function tm(e,t,a,r,u,g,b,k,R){e.cancelPendingCommit=null;do Hl();while(lt!==0);if(($e&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(g=t.lanes|t.childLanes,g|=kc,nc(e,a,g,b,k,R),e===Ye&&(Ee=Ye=null,Ae=0),Bs=t,ga=e,Bn=a,Ou=g,Lu=u,Gh=r,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,av(Aa,function(){return rm(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||r){r=j.T,j.T=null,u=D.p,D.p=2,b=$e,$e|=4;try{Zb(e,t,a)}finally{$e=b,D.p=u,j.T=r}}lt=1,nm(),am(),sm()}}function nm(){if(lt===1){lt=0;var e=ga,t=Bs,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=j.T,j.T=null;var r=D.p;D.p=2;var u=$e;$e|=4;try{Rh(t,e);var g=Iu,b=qf(e.containerInfo),k=g.focusedElem,R=g.selectionRange;if(b!==k&&k&&k.ownerDocument&&Vf(k.ownerDocument.documentElement,k)){if(R!==null&&_c(k)){var I=R.start,ne=R.end;if(ne===void 0&&(ne=I),"selectionStart"in k)k.selectionStart=I,k.selectionEnd=Math.min(ne,k.value.length);else{var ie=k.ownerDocument||document,J=ie&&ie.defaultView||window;if(J.getSelection){var P=J.getSelection(),ue=k.textContent.length,ve=Math.min(R.start,ue),qe=R.end===void 0?ve:Math.min(R.end,ue);!P.extend&&ve>qe&&(b=qe,qe=ve,ve=b);var X=Bf(k,ve),B=Bf(k,qe);if(X&&B&&(P.rangeCount!==1||P.anchorNode!==X.node||P.anchorOffset!==X.offset||P.focusNode!==B.node||P.focusOffset!==B.offset)){var K=ie.createRange();K.setStart(X.node,X.offset),P.removeAllRanges(),ve>qe?(P.addRange(K),P.extend(B.node,B.offset)):(K.setEnd(B.node,B.offset),P.addRange(K))}}}}for(ie=[],P=k;P=P.parentNode;)P.nodeType===1&&ie.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<ie.length;k++){var ae=ie[k];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Il=!!Ku,Iu=Ku=null}finally{$e=u,D.p=r,j.T=a}}e.current=t,lt=2}}function am(){if(lt===2){lt=0;var e=ga,t=Bs,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=j.T,j.T=null;var r=D.p;D.p=2;var u=$e;$e|=4;try{Th(e,t.alternate,t)}finally{$e=u,D.p=r,j.T=a}}lt=3}}function sm(){if(lt===4||lt===3){lt=0,za();var e=ga,t=Bs,a=Bn,r=Gh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?lt=5:(lt=0,Bs=ga=null,im(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(fa=null),hi(a),t=t.stateNode,xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(Ta,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=j.T,u=D.p,D.p=2,j.T=null;try{for(var g=e.onRecoverableError,b=0;b<r.length;b++){var k=r[b];g(k.value,{componentStack:k.stack})}}finally{j.T=t,D.p=u}}(Bn&3)!==0&&Hl(),fn(e),u=e.pendingLanes,(a&261930)!==0&&(u&42)!==0?e===Ru?Fi++:(Fi=0,Ru=e):Fi=0,Ki(0)}}function im(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,zi(t)))}function Hl(){return nm(),am(),sm(),rm()}function rm(){if(lt!==5)return!1;var e=ga,t=Ou;Ou=0;var a=hi(Bn),r=j.T,u=D.p;try{D.p=32>a?32:a,j.T=null,a=Lu,Lu=null;var g=ga,b=Bn;if(lt=0,Bs=ga=null,Bn=0,($e&6)!==0)throw Error(o(331));var k=$e;if($e|=4,Vh(g.current),Hh(g,g.current,b,a),$e=k,Ki(0,!1),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(Ta,g)}catch{}return!0}finally{D.p=u,j.T=r,im(e,t)}}function lm(e,t,a){t=qt(a,t),t=hu(e.stateNode,t,2),e=ra(e,t,2),e!==null&&(Da(e,2),fn(e))}function Ue(e,t,a){if(e.tag===3)lm(e,e,a);else for(;t!==null;){if(t.tag===3){lm(t,e,a);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fa===null||!fa.has(r))){e=qt(a,e),a=oh(2),r=ra(t,a,2),r!==null&&(ch(a,r,t,e),Da(r,2),fn(r));break}}t=t.return}}function Uu(e,t,a){var r=e.pingCache;if(r===null){r=e.pingCache=new Kb;var u=new Set;r.set(t,u)}else u=r.get(t),u===void 0&&(u=new Set,r.set(t,u));u.has(a)||(Tu=!0,u.add(a),e=ev.bind(null,e,t,a),t.then(e,e))}function ev(e,t,a){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ye===e&&(Ae&a)===a&&(Ie===4||Ie===3&&(Ae&62914560)===Ae&&300>dt()-Ml?($e&2)===0&&Vs(e,0):Mu|=a,Us===Ae&&(Us=0)),fn(e)}function om(e,t){t===0&&(t=Or()),e=Ba(e,t),e!==null&&(Da(e,t),fn(e))}function tv(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),om(e,a)}function nv(e,t){var a=0;switch(e.tag){case 31:case 13:var r=e.stateNode,u=e.memoizedState;u!==null&&(a=u.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}r!==null&&r.delete(t),om(e,a)}function av(e,t){return It(e,t)}var Ul=null,Ys=null,Bu=!1,Bl=!1,Vu=!1,ma=0;function fn(e){e!==Ys&&e.next===null&&(Ys===null?Ul=Ys=e:Ys=Ys.next=e),Bl=!0,Bu||(Bu=!0,iv())}function Ki(e,t){if(!Vu&&Bl){Vu=!0;do for(var a=!1,r=Ul;r!==null;){if(e!==0){var u=r.pendingLanes;if(u===0)var g=0;else{var b=r.suspendedLanes,k=r.pingedLanes;g=(1<<31-yt(42|e)+1)-1,g&=u&~(b&~k),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,fm(r,g))}else g=Ae,g=ds(r,r===Ye?g:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(g&3)===0||Ma(r,g)||(a=!0,fm(r,g));r=r.next}while(a);Vu=!1}}function sv(){cm()}function cm(){Bl=Bu=!1;var e=0;ma!==0&&mv()&&(e=ma);for(var t=dt(),a=null,r=Ul;r!==null;){var u=r.next,g=um(r,t);g===0?(r.next=null,a===null?Ul=u:a.next=u,u===null&&(Ys=a)):(a=r,(e!==0||(g&3)!==0)&&(Bl=!0)),r=u}lt!==0&&lt!==5||Ki(e),ma!==0&&(ma=0)}function um(e,t){for(var a=e.suspendedLanes,r=e.pingedLanes,u=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var b=31-yt(g),k=1<<b,R=u[b];R===-1?((k&a)===0||(k&r)!==0)&&(u[b]=tc(k,t)):R<=t&&(e.expiredLanes|=k),g&=~k}if(t=Ye,a=Ae,a=ds(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,a===0||e===t&&(He===2||He===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&bn(r),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Ma(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(r!==null&&bn(r),hi(a)){case 2:case 8:a=Qn;break;case 32:a=Aa;break;case 268435456:a=ls;break;default:a=Aa}return r=dm.bind(null,e),a=It(a,r),e.callbackPriority=t,e.callbackNode=a,t}return r!==null&&r!==null&&bn(r),e.callbackPriority=2,e.callbackNode=null,2}function dm(e,t){if(lt!==0&&lt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Hl()&&e.callbackNode!==a)return null;var r=Ae;return r=ds(e,e===Ye?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(Zh(e,r,t),um(e,dt()),e.callbackNode!=null&&e.callbackNode===a?dm.bind(null,e):null)}function fm(e,t){if(Hl())return null;Zh(e,t,!0)}function iv(){xv(function(){($e&6)!==0?It(vn,sv):cm()})}function qu(){if(ma===0){var e=Es;e===0&&(e=os,os<<=1,(os&261888)===0&&(os=256)),ma=e}return ma}function gm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Fr(""+e)}function hm(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function rv(e,t,a,r,u){if(t==="submit"&&a&&a.stateNode===u){var g=gm((u[pt]||null).action),b=r.submitter;b&&(t=(t=b[pt]||null)?gm(t.formAction):b.getAttribute("formAction"),t!==null&&(g=t,b=null));var k=new Wr("action","action",null,r,u);e.push({event:k,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(ma!==0){var R=b?hm(u,b):new FormData(u);ou(a,{pending:!0,data:R,method:u.method,action:g},null,R)}}else typeof g=="function"&&(k.preventDefault(),R=b?hm(u,b):new FormData(u),ou(a,{pending:!0,data:R,method:u.method,action:g},g,R))},currentTarget:u}]})}}for(var Yu=0;Yu<Sc.length;Yu++){var Gu=Sc[Yu],lv=Gu.toLowerCase(),ov=Gu[0].toUpperCase()+Gu.slice(1);Wt(lv,"on"+ov)}Wt(Xf,"onAnimationEnd"),Wt(Zf,"onAnimationIteration"),Wt(Qf,"onAnimationStart"),Wt("dblclick","onDoubleClick"),Wt("focusin","onFocus"),Wt("focusout","onBlur"),Wt(jb,"onTransitionRun"),Wt(Sb,"onTransitionStart"),Wt(kb,"onTransitionCancel"),Wt(Ff,"onTransitionEnd"),Wn("onMouseEnter",["mouseout","mouseover"]),Wn("onMouseLeave",["mouseout","mouseover"]),Wn("onPointerEnter",["pointerout","pointerover"]),Wn("onPointerLeave",["pointerout","pointerover"]),wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wn("onBeforeInput",["compositionend","keypress","textInput","paste"]),wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ii));function mm(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var r=e[a],u=r.event;r=r.listeners;e:{var g=void 0;if(t)for(var b=r.length-1;0<=b;b--){var k=r[b],R=k.instance,I=k.currentTarget;if(k=k.listener,R!==g&&u.isPropagationStopped())break e;g=k,u.currentTarget=I;try{g(u)}catch(ne){tl(ne)}u.currentTarget=null,g=R}else for(b=0;b<r.length;b++){if(k=r[b],R=k.instance,I=k.currentTarget,k=k.listener,R!==g&&u.isPropagationStopped())break e;g=k,u.currentTarget=I;try{g(u)}catch(ne){tl(ne)}u.currentTarget=null,g=R}}}}function ze(e,t){var a=t[fs];a===void 0&&(a=t[fs]=new Set);var r=e+"__bubble";a.has(r)||(pm(t,e,2,!1),a.add(r))}function Xu(e,t,a){var r=0;t&&(r|=4),pm(a,e,r,t)}var Vl="_reactListening"+Math.random().toString(36).slice(2);function Zu(e){if(!e[Vl]){e[Vl]=!0,qr.forEach(function(a){a!=="selectionchange"&&(cv.has(a)||Xu(a,!1,e),Xu(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Vl]||(t[Vl]=!0,Xu("selectionchange",!1,t))}}function pm(e,t,a,r){switch(Xm(t)){case 2:var u=$v;break;case 8:u=Hv;break;default:u=ld}a=u.bind(null,t,a,e),u=void 0,!fc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),r?u!==void 0?e.addEventListener(t,a,{capture:!0,passive:u}):e.addEventListener(t,a,!0):u!==void 0?e.addEventListener(t,a,{passive:u}):e.addEventListener(t,a,!1)}function Qu(e,t,a,r,u){var g=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var b=r.tag;if(b===3||b===4){var k=r.stateNode.containerInfo;if(k===u)break;if(b===4)for(b=r.return;b!==null;){var R=b.tag;if((R===3||R===4)&&b.stateNode.containerInfo===u)return;b=b.return}for(;k!==null;){if(b=Fn(k),b===null)return;if(R=b.tag,R===5||R===6||R===26||R===27){r=g=b;continue e}k=k.parentNode}}r=r.return}_f(function(){var I=g,ne=uc(a),ie=[];e:{var J=Kf.get(e);if(J!==void 0){var P=Wr,ue=e;switch(e){case"keypress":if(Ir(a)===0)break e;case"keydown":case"keyup":P=nb;break;case"focusin":ue="focus",P=pc;break;case"focusout":ue="blur",P=pc;break;case"beforeblur":case"afterblur":P=pc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=jf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=Gy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=ib;break;case Xf:case Zf:case Qf:P=Qy;break;case Ff:P=lb;break;case"scroll":case"scrollend":P=qy;break;case"wheel":P=cb;break;case"copy":case"cut":case"paste":P=Ky;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=kf;break;case"toggle":case"beforetoggle":P=db}var ve=(t&4)!==0,qe=!ve&&(e==="scroll"||e==="scrollend"),X=ve?J!==null?J+"Capture":null:J;ve=[];for(var B=I,K;B!==null;){var ae=B;if(K=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||K===null||X===null||(ae=yi(B,X),ae!=null&&ve.push(Ji(B,ae,K))),qe)break;B=B.return}0<ve.length&&(J=new P(J,ue,null,a,ne),ie.push({event:J,listeners:ve}))}}if((t&7)===0){e:{if(J=e==="mouseover"||e==="pointerover",P=e==="mouseout"||e==="pointerout",J&&a!==cc&&(ue=a.relatedTarget||a.fromElement)&&(Fn(ue)||ue[Nn]))break e;if((P||J)&&(J=ne.window===ne?ne:(J=ne.ownerDocument)?J.defaultView||J.parentWindow:window,P?(ue=a.relatedTarget||a.toElement,P=I,ue=ue?Fn(ue):null,ue!==null&&(qe=d(ue),ve=ue.tag,ue!==qe||ve!==5&&ve!==27&&ve!==6)&&(ue=null)):(P=null,ue=I),P!==ue)){if(ve=jf,ae="onMouseLeave",X="onMouseEnter",B="mouse",(e==="pointerout"||e==="pointerover")&&(ve=kf,ae="onPointerLeave",X="onPointerEnter",B="pointer"),qe=P==null?J:In(P),K=ue==null?J:In(ue),J=new ve(ae,B+"leave",P,a,ne),J.target=qe,J.relatedTarget=K,ae=null,Fn(ne)===I&&(ve=new ve(X,B+"enter",ue,a,ne),ve.target=K,ve.relatedTarget=qe,ae=ve),qe=ae,P&&ue)t:{for(ve=uv,X=P,B=ue,K=0,ae=X;ae;ae=ve(ae))K++;ae=0;for(var xe=B;xe;xe=ve(xe))ae++;for(;0<K-ae;)X=ve(X),K--;for(;0<ae-K;)B=ve(B),ae--;for(;K--;){if(X===B||B!==null&&X===B.alternate){ve=X;break t}X=ve(X),B=ve(B)}ve=null}else ve=null;P!==null&&xm(ie,J,P,ve,!1),ue!==null&&qe!==null&&xm(ie,qe,ue,ve,!0)}}e:{if(J=I?In(I):window,P=J.nodeName&&J.nodeName.toLowerCase(),P==="select"||P==="input"&&J.type==="file")var Le=Of;else if(Mf(J))if(Lf)Le=_b;else{Le=bb;var he=yb}else P=J.nodeName,!P||P.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?I&&oc(I.elementType)&&(Le=Of):Le=vb;if(Le&&(Le=Le(e,I))){Df(ie,Le,a,ne);break e}he&&he(e,J,I),e==="focusout"&&I&&J.type==="number"&&I.memoizedProps.value!=null&&xi(J,"number",J.value)}switch(he=I?In(I):window,e){case"focusin":(Mf(he)||he.contentEditable==="true")&&(vs=he,Nc=I,ki=null);break;case"focusout":ki=Nc=vs=null;break;case"mousedown":wc=!0;break;case"contextmenu":case"mouseup":case"dragend":wc=!1,Yf(ie,a,ne);break;case"selectionchange":if(wb)break;case"keydown":case"keyup":Yf(ie,a,ne)}var ke;if(yc)e:{switch(e){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else bs?Af(e,a)&&(Te="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(Cf&&a.locale!=="ko"&&(bs||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&bs&&(ke=Nf()):(Pn=ne,gc="value"in Pn?Pn.value:Pn.textContent,bs=!0)),he=ql(I,Te),0<he.length&&(Te=new Sf(Te,e,null,a,ne),ie.push({event:Te,listeners:he}),ke?Te.data=ke:(ke=Tf(a),ke!==null&&(Te.data=ke)))),(ke=gb?hb(e,a):mb(e,a))&&(Te=ql(I,"onBeforeInput"),0<Te.length&&(he=new Sf("onBeforeInput","beforeinput",null,a,ne),ie.push({event:he,listeners:Te}),he.data=ke)),rv(ie,e,I,a,ne)}mm(ie,t)})}function Ji(e,t,a){return{instance:e,listener:t,currentTarget:a}}function ql(e,t){for(var a=t+"Capture",r=[];e!==null;){var u=e,g=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||g===null||(u=yi(e,a),u!=null&&r.unshift(Ji(e,u,g)),u=yi(e,t),u!=null&&r.push(Ji(e,u,g))),e.tag===3)return r;e=e.return}return[]}function uv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function xm(e,t,a,r,u){for(var g=t._reactName,b=[];a!==null&&a!==r;){var k=a,R=k.alternate,I=k.stateNode;if(k=k.tag,R!==null&&R===r)break;k!==5&&k!==26&&k!==27||I===null||(R=I,u?(I=yi(a,g),I!=null&&b.unshift(Ji(a,I,R))):u||(I=yi(a,g),I!=null&&b.push(Ji(a,I,R)))),a=a.return}b.length!==0&&e.push({event:t,listeners:b})}var dv=/\r\n?/g,fv=/\u0000|\uFFFD/g;function ym(e){return(typeof e=="string"?e:""+e).replace(dv,`
`).replace(fv,"")}function bm(e,t){return t=ym(t),ym(e)===t}function Ve(e,t,a,r,u,g){switch(a){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||ps(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&ps(e,""+r);break;case"className":hs(e,"class",r);break;case"tabIndex":hs(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":hs(e,a,r);break;case"style":bf(e,r,g);break;case"data":if(t!=="object"){hs(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(a);break}r=Fr(""+r),e.setAttribute(a,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(t!=="input"&&Ve(e,t,"name",u.name,u,null),Ve(e,t,"formEncType",u.formEncType,u,null),Ve(e,t,"formMethod",u.formMethod,u,null),Ve(e,t,"formTarget",u.formTarget,u,null)):(Ve(e,t,"encType",u.encType,u,null),Ve(e,t,"method",u.method,u,null),Ve(e,t,"target",u.target,u,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(a);break}r=Fr(""+r),e.setAttribute(a,r);break;case"onClick":r!=null&&(e.onclick=Sn);break;case"onScroll":r!=null&&ze("scroll",e);break;case"onScrollEnd":r!=null&&ze("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(o(61));if(a=r.__html,a!=null){if(u.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}a=Fr(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,""+r):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":r===!0?e.setAttribute(a,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,r):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(a,r):e.removeAttribute(a);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(a):e.setAttribute(a,r);break;case"popover":ze("beforetoggle",e),ze("toggle",e),gs(e,"popover",r);break;case"xlinkActuate":Jt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Jt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Jt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Jt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Jt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Jt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Jt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Jt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Jt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":gs(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=By.get(a)||a,gs(e,a,r))}}function Fu(e,t,a,r,u,g){switch(a){case"style":bf(e,r,g);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(o(61));if(a=r.__html,a!=null){if(u.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"children":typeof r=="string"?ps(e,r):(typeof r=="number"||typeof r=="bigint")&&ps(e,""+r);break;case"onScroll":r!=null&&ze("scroll",e);break;case"onScrollEnd":r!=null&&ze("scrollend",e);break;case"onClick":r!=null&&(e.onclick=Sn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(u=a.endsWith("Capture"),t=a.slice(2,u?a.length-7:void 0),g=e[pt]||null,g=g!=null?g[a]:null,typeof g=="function"&&e.removeEventListener(t,g,u),typeof r=="function")){typeof g!="function"&&g!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,r,u);break e}a in e?e[a]=r:r===!0?e.setAttribute(a,""):gs(e,a,r)}}}function mt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",e),ze("load",e);var r=!1,u=!1,g;for(g in a)if(a.hasOwnProperty(g)){var b=a[g];if(b!=null)switch(g){case"src":r=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ve(e,t,g,b,a,null)}}u&&Ve(e,t,"srcSet",a.srcSet,a,null),r&&Ve(e,t,"src",a.src,a,null);return;case"input":ze("invalid",e);var k=g=b=u=null,R=null,I=null;for(r in a)if(a.hasOwnProperty(r)){var ne=a[r];if(ne!=null)switch(r){case"name":u=ne;break;case"type":b=ne;break;case"checked":R=ne;break;case"defaultChecked":I=ne;break;case"value":g=ne;break;case"defaultValue":k=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(o(137,t));break;default:Ve(e,t,r,ne,a,null)}}Qr(e,g,k,R,I,b,u,!1);return;case"select":ze("invalid",e),r=b=g=null;for(u in a)if(a.hasOwnProperty(u)&&(k=a[u],k!=null))switch(u){case"value":g=k;break;case"defaultValue":b=k;break;case"multiple":r=k;default:Ve(e,t,u,k,a,null)}t=g,a=b,e.multiple=!!r,t!=null?jn(e,!!r,t,!1):a!=null&&jn(e,!!r,a,!0);return;case"textarea":ze("invalid",e),g=u=r=null;for(b in a)if(a.hasOwnProperty(b)&&(k=a[b],k!=null))switch(b){case"value":r=k;break;case"defaultValue":u=k;break;case"children":g=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(o(91));break;default:Ve(e,t,b,k,a,null)}xf(e,r,u,g);return;case"option":for(R in a)a.hasOwnProperty(R)&&(r=a[R],r!=null)&&(R==="selected"?e.selected=r&&typeof r!="function"&&typeof r!="symbol":Ve(e,t,R,r,a,null));return;case"dialog":ze("beforetoggle",e),ze("toggle",e),ze("cancel",e),ze("close",e);break;case"iframe":case"object":ze("load",e);break;case"video":case"audio":for(r=0;r<Ii.length;r++)ze(Ii[r],e);break;case"image":ze("error",e),ze("load",e);break;case"details":ze("toggle",e);break;case"embed":case"source":case"link":ze("error",e),ze("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(I in a)if(a.hasOwnProperty(I)&&(r=a[I],r!=null))switch(I){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ve(e,t,I,r,a,null)}return;default:if(oc(t)){for(ne in a)a.hasOwnProperty(ne)&&(r=a[ne],r!==void 0&&Fu(e,t,ne,r,a,void 0));return}}for(k in a)a.hasOwnProperty(k)&&(r=a[k],r!=null&&Ve(e,t,k,r,a,null))}function gv(e,t,a,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,g=null,b=null,k=null,R=null,I=null,ne=null;for(P in a){var ie=a[P];if(a.hasOwnProperty(P)&&ie!=null)switch(P){case"checked":break;case"value":break;case"defaultValue":R=ie;default:r.hasOwnProperty(P)||Ve(e,t,P,null,r,ie)}}for(var J in r){var P=r[J];if(ie=a[J],r.hasOwnProperty(J)&&(P!=null||ie!=null))switch(J){case"type":g=P;break;case"name":u=P;break;case"checked":I=P;break;case"defaultChecked":ne=P;break;case"value":b=P;break;case"defaultValue":k=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(o(137,t));break;default:P!==ie&&Ve(e,t,J,P,r,ie)}}Ra(e,b,k,R,I,ne,g,u);return;case"select":P=b=k=J=null;for(g in a)if(R=a[g],a.hasOwnProperty(g)&&R!=null)switch(g){case"value":break;case"multiple":P=R;default:r.hasOwnProperty(g)||Ve(e,t,g,null,r,R)}for(u in r)if(g=r[u],R=a[u],r.hasOwnProperty(u)&&(g!=null||R!=null))switch(u){case"value":J=g;break;case"defaultValue":k=g;break;case"multiple":b=g;default:g!==R&&Ve(e,t,u,g,r,R)}t=k,a=b,r=P,J!=null?jn(e,!!a,J,!1):!!r!=!!a&&(t!=null?jn(e,!!a,t,!0):jn(e,!!a,a?[]:"",!1));return;case"textarea":P=J=null;for(k in a)if(u=a[k],a.hasOwnProperty(k)&&u!=null&&!r.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:Ve(e,t,k,null,r,u)}for(b in r)if(u=r[b],g=a[b],r.hasOwnProperty(b)&&(u!=null||g!=null))switch(b){case"value":J=u;break;case"defaultValue":P=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(o(91));break;default:u!==g&&Ve(e,t,b,u,r,g)}pf(e,J,P);return;case"option":for(var ue in a)J=a[ue],a.hasOwnProperty(ue)&&J!=null&&!r.hasOwnProperty(ue)&&(ue==="selected"?e.selected=!1:Ve(e,t,ue,null,r,J));for(R in r)J=r[R],P=a[R],r.hasOwnProperty(R)&&J!==P&&(J!=null||P!=null)&&(R==="selected"?e.selected=J&&typeof J!="function"&&typeof J!="symbol":Ve(e,t,R,J,r,P));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)J=a[ve],a.hasOwnProperty(ve)&&J!=null&&!r.hasOwnProperty(ve)&&Ve(e,t,ve,null,r,J);for(I in r)if(J=r[I],P=a[I],r.hasOwnProperty(I)&&J!==P&&(J!=null||P!=null))switch(I){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(o(137,t));break;default:Ve(e,t,I,J,r,P)}return;default:if(oc(t)){for(var qe in a)J=a[qe],a.hasOwnProperty(qe)&&J!==void 0&&!r.hasOwnProperty(qe)&&Fu(e,t,qe,void 0,r,J);for(ne in r)J=r[ne],P=a[ne],!r.hasOwnProperty(ne)||J===P||J===void 0&&P===void 0||Fu(e,t,ne,J,r,P);return}}for(var X in a)J=a[X],a.hasOwnProperty(X)&&J!=null&&!r.hasOwnProperty(X)&&Ve(e,t,X,null,r,J);for(ie in r)J=r[ie],P=a[ie],!r.hasOwnProperty(ie)||J===P||J==null&&P==null||Ve(e,t,ie,J,r,P)}function vm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function hv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),r=0;r<a.length;r++){var u=a[r],g=u.transferSize,b=u.initiatorType,k=u.duration;if(g&&k&&vm(b)){for(b=0,k=u.responseEnd,r+=1;r<a.length;r++){var R=a[r],I=R.startTime;if(I>k)break;var ne=R.transferSize,ie=R.initiatorType;ne&&vm(ie)&&(R=R.responseEnd,b+=ne*(R<k?1:(k-I)/(R-I)))}if(--r,t+=8*(g+b)/(u.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ku=null,Iu=null;function Yl(e){return e.nodeType===9?e:e.ownerDocument}function _m(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ju(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Wu=null;function mv(){var e=window.event;return e&&e.type==="popstate"?e===Wu?!1:(Wu=e,!0):(Wu=null,!1)}var wm=typeof setTimeout=="function"?setTimeout:void 0,pv=typeof clearTimeout=="function"?clearTimeout:void 0,jm=typeof Promise=="function"?Promise:void 0,xv=typeof queueMicrotask=="function"?queueMicrotask:typeof jm<"u"?function(e){return jm.resolve(null).then(e).catch(yv)}:wm;function yv(e){setTimeout(function(){throw e})}function pa(e){return e==="head"}function Sm(e,t){var a=t,r=0;do{var u=a.nextSibling;if(e.removeChild(a),u&&u.nodeType===8)if(a=u.data,a==="/$"||a==="/&"){if(r===0){e.removeChild(u),Qs(t);return}r--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")r++;else if(a==="html")Wi(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Wi(a);for(var g=a.firstChild;g;){var b=g.nextSibling,k=g.nodeName;g[Oa]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&g.rel.toLowerCase()==="stylesheet"||a.removeChild(g),g=b}}else a==="body"&&Wi(e.ownerDocument.body);a=u}while(a);Qs(t)}function km(e,t){var a=e;e=0;do{var r=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),r&&r.nodeType===8)if(a=r.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=r}while(a)}function Pu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Pu(a),mi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function bv(e,t,a,r){for(;e.nodeType===1;){var u=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[Oa])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var g=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=Qt(e.nextSibling),e===null)break}return null}function vv(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Qt(e.nextSibling),e===null))return null;return e}function Cm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Qt(e.nextSibling),e===null))return null;return e}function ed(e){return e.data==="$?"||e.data==="$~"}function td(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function _v(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var r=function(){t(),a.removeEventListener("DOMContentLoaded",r)};a.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function Qt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var nd=null;function Em(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Qt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function zm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Am(e,t,a){switch(t=Yl(a),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Wi(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);mi(e)}var Ft=new Map,Tm=new Set;function Gl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Vn=D.d;D.d={f:Nv,r:wv,D:jv,C:Sv,L:kv,m:Cv,X:zv,S:Ev,M:Av};function Nv(){var e=Vn.f(),t=Ll();return e||t}function wv(e){var t=Kn(e);t!==null&&t.tag===5&&t.type==="form"?Fg(t):Vn.r(e)}var Gs=typeof document>"u"?null:document;function Mm(e,t,a){var r=Gs;if(r&&typeof t=="string"&&t){var u=wt(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof a=="string"&&(u+='[crossorigin="'+a+'"]'),Tm.has(u)||(Tm.add(u),e={rel:e,crossOrigin:a,href:t},r.querySelector(u)===null&&(t=r.createElement("link"),mt(t,"link",e),Pe(t),r.head.appendChild(t)))}}function jv(e){Vn.D(e),Mm("dns-prefetch",e,null)}function Sv(e,t){Vn.C(e,t),Mm("preconnect",e,t)}function kv(e,t,a){Vn.L(e,t,a);var r=Gs;if(r&&e&&t){var u='link[rel="preload"][as="'+wt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(u+='[imagesrcset="'+wt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(u+='[imagesizes="'+wt(a.imageSizes)+'"]')):u+='[href="'+wt(e)+'"]';var g=u;switch(t){case"style":g=Xs(e);break;case"script":g=Zs(e)}Ft.has(g)||(e=x({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Ft.set(g,e),r.querySelector(u)!==null||t==="style"&&r.querySelector(Pi(g))||t==="script"&&r.querySelector(er(g))||(t=r.createElement("link"),mt(t,"link",e),Pe(t),r.head.appendChild(t)))}}function Cv(e,t){Vn.m(e,t);var a=Gs;if(a&&e){var r=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+wt(r)+'"][href="'+wt(e)+'"]',g=u;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Zs(e)}if(!Ft.has(g)&&(e=x({rel:"modulepreload",href:e},t),Ft.set(g,e),a.querySelector(u)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(er(g)))return}r=a.createElement("link"),mt(r,"link",e),Pe(r),a.head.appendChild(r)}}}function Ev(e,t,a){Vn.S(e,t,a);var r=Gs;if(r&&e){var u=Jn(r).hoistableStyles,g=Xs(e);t=t||"default";var b=u.get(g);if(!b){var k={loading:0,preload:null};if(b=r.querySelector(Pi(g)))k.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Ft.get(g))&&ad(e,a);var R=b=r.createElement("link");Pe(R),mt(R,"link",e),R._p=new Promise(function(I,ne){R.onload=I,R.onerror=ne}),R.addEventListener("load",function(){k.loading|=1}),R.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Xl(b,t,r)}b={type:"stylesheet",instance:b,count:1,state:k},u.set(g,b)}}}function zv(e,t){Vn.X(e,t);var a=Gs;if(a&&e){var r=Jn(a).hoistableScripts,u=Zs(e),g=r.get(u);g||(g=a.querySelector(er(u)),g||(e=x({src:e,async:!0},t),(t=Ft.get(u))&&sd(e,t),g=a.createElement("script"),Pe(g),mt(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},r.set(u,g))}}function Av(e,t){Vn.M(e,t);var a=Gs;if(a&&e){var r=Jn(a).hoistableScripts,u=Zs(e),g=r.get(u);g||(g=a.querySelector(er(u)),g||(e=x({src:e,async:!0,type:"module"},t),(t=Ft.get(u))&&sd(e,t),g=a.createElement("script"),Pe(g),mt(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},r.set(u,g))}}function Dm(e,t,a,r){var u=(u=be.current)?Gl(u):null;if(!u)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Xs(a.href),a=Jn(u).hoistableStyles,r=a.get(t),r||(r={type:"style",instance:null,count:0,state:null},a.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Xs(a.href);var g=Jn(u).hoistableStyles,b=g.get(e);if(b||(u=u.ownerDocument||u,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,b),(g=u.querySelector(Pi(e)))&&!g._p&&(b.instance=g,b.state.loading=5),Ft.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ft.set(e,a),g||Tv(u,e,a,b.state))),t&&r===null)throw Error(o(528,""));return b}if(t&&r!==null)throw Error(o(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Zs(a),a=Jn(u).hoistableScripts,r=a.get(t),r||(r={type:"script",instance:null,count:0,state:null},a.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Xs(e){return'href="'+wt(e)+'"'}function Pi(e){return'link[rel="stylesheet"]['+e+"]"}function Om(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function Tv(e,t,a,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),mt(t,"link",a),Pe(t),e.head.appendChild(t))}function Zs(e){return'[src="'+wt(e)+'"]'}function er(e){return"script[async]"+e}function Lm(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+wt(a.href)+'"]');if(r)return t.instance=r,Pe(r),r;var u=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),Pe(r),mt(r,"style",u),Xl(r,a.precedence,e),t.instance=r;case"stylesheet":u=Xs(a.href);var g=e.querySelector(Pi(u));if(g)return t.state.loading|=4,t.instance=g,Pe(g),g;r=Om(a),(u=Ft.get(u))&&ad(r,u),g=(e.ownerDocument||e).createElement("link"),Pe(g);var b=g;return b._p=new Promise(function(k,R){b.onload=k,b.onerror=R}),mt(g,"link",r),t.state.loading|=4,Xl(g,a.precedence,e),t.instance=g;case"script":return g=Zs(a.src),(u=e.querySelector(er(g)))?(t.instance=u,Pe(u),u):(r=a,(u=Ft.get(g))&&(r=x({},a),sd(r,u)),e=e.ownerDocument||e,u=e.createElement("script"),Pe(u),mt(u,"link",r),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(r=t.instance,t.state.loading|=4,Xl(r,a.precedence,e));return t.instance}function Xl(e,t,a){for(var r=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=r.length?r[r.length-1]:null,g=u,b=0;b<r.length;b++){var k=r[b];if(k.dataset.precedence===t)g=k;else if(g!==u)break}g?g.parentNode.insertBefore(e,g.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function ad(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function sd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Zl=null;function Rm(e,t,a){if(Zl===null){var r=new Map,u=Zl=new Map;u.set(a,r)}else u=Zl,r=u.get(a),r||(r=new Map,u.set(a,r));if(r.has(e))return r;for(r.set(e,null),a=a.getElementsByTagName(e),u=0;u<a.length;u++){var g=a[u];if(!(g[Oa]||g[rt]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(t)||"";b=e+b;var k=r.get(b);k?k.push(g):r.set(b,[g])}}return r}function $m(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Mv(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Hm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Dv(e,t,a,r){if(a.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var u=Xs(r.href),g=t.querySelector(Pi(u));if(g){t=g._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ql.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=g,Pe(g);return}g=t.ownerDocument||t,r=Om(r),(u=Ft.get(u))&&ad(r,u),g=g.createElement("link"),Pe(g);var b=g;b._p=new Promise(function(k,R){b.onload=k,b.onerror=R}),mt(g,"link",r),a.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Ql.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var id=0;function Ov(e,t){return e.stylesheets&&e.count===0&&Kl(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var r=setTimeout(function(){if(e.stylesheets&&Kl(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+t);0<e.imgBytes&&id===0&&(id=62500*hv());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Kl(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>id?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(u)}}:null}function Ql(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Fl=null;function Kl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Fl=new Map,t.forEach(Lv,e),Fl=null,Ql.call(e))}function Lv(e,t){if(!(t.state.loading&4)){var a=Fl.get(e);if(a)var r=a.get(null);else{a=new Map,Fl.set(e,a);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<u.length;g++){var b=u[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),r=b)}r&&a.set(null,r)}u=t.instance,b=u.getAttribute("data-precedence"),g=a.get(b)||r,g===r&&a.set(null,u),a.set(b,u),this.count++,r=Ql.bind(this),u.addEventListener("load",r),u.addEventListener("error",r),g?g.parentNode.insertBefore(u,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var tr={$$typeof:_,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function Rv(e,t,a,r,u,g,b,k,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fi(0),this.hiddenUpdates=fi(null),this.identifierPrefix=r,this.onUncaughtError=u,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function Um(e,t,a,r,u,g,b,k,R,I,ne,ie){return e=new Rv(e,t,a,b,R,I,ne,ie,k),t=1,g===!0&&(t|=24),g=Dt(3,null,null,t),e.current=g,g.stateNode=e,t=Hc(),t.refCount++,e.pooledCache=t,t.refCount++,g.memoizedState={element:r,isDehydrated:a,cache:t},qc(g),e}function Bm(e){return e?(e=ws,e):ws}function Vm(e,t,a,r,u,g){u=Bm(u),r.context===null?r.context=u:r.pendingContext=u,r=ia(t),r.payload={element:a},g=g===void 0?null:g,g!==null&&(r.callback=g),a=ra(e,r,t),a!==null&&(zt(a,e,t),Di(a,e,t))}function qm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function rd(e,t){qm(e,t),(e=e.alternate)&&qm(e,t)}function Ym(e){if(e.tag===13||e.tag===31){var t=Ba(e,67108864);t!==null&&zt(t,e,67108864),rd(e,67108864)}}function Gm(e){if(e.tag===13||e.tag===31){var t=Ht();t=gi(t);var a=Ba(e,t);a!==null&&zt(a,e,t),rd(e,t)}}var Il=!0;function $v(e,t,a,r){var u=j.T;j.T=null;var g=D.p;try{D.p=2,ld(e,t,a,r)}finally{D.p=g,j.T=u}}function Hv(e,t,a,r){var u=j.T;j.T=null;var g=D.p;try{D.p=8,ld(e,t,a,r)}finally{D.p=g,j.T=u}}function ld(e,t,a,r){if(Il){var u=od(r);if(u===null)Qu(e,t,r,Jl,a),Zm(e,r);else if(Bv(u,e,t,a,r))r.stopPropagation();else if(Zm(e,r),t&4&&-1<Uv.indexOf(e)){for(;u!==null;){var g=Kn(u);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=_n(g.pendingLanes);if(b!==0){var k=g;for(k.pendingLanes|=2,k.entangledLanes|=2;b;){var R=1<<31-yt(b);k.entanglements[1]|=R,b&=~R}fn(g),($e&6)===0&&(Dl=dt()+500,Ki(0))}}break;case 31:case 13:k=Ba(g,2),k!==null&&zt(k,g,2),Ll(),rd(g,2)}if(g=od(r),g===null&&Qu(e,t,r,Jl,a),g===u)break;u=g}u!==null&&r.stopPropagation()}else Qu(e,t,r,null,a)}}function od(e){return e=uc(e),cd(e)}var Jl=null;function cd(e){if(Jl=null,e=Fn(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=h(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Jl=e,null}function Xm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rs()){case vn:return 2;case Qn:return 8;case Aa:case Ko:return 32;case ls:return 268435456;default:return 32}default:return 32}}var ud=!1,xa=null,ya=null,ba=null,nr=new Map,ar=new Map,va=[],Uv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Zm(e,t){switch(e){case"focusin":case"focusout":xa=null;break;case"dragenter":case"dragleave":ya=null;break;case"mouseover":case"mouseout":ba=null;break;case"pointerover":case"pointerout":nr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ar.delete(t.pointerId)}}function sr(e,t,a,r,u,g){return e===null||e.nativeEvent!==g?(e={blockedOn:t,domEventName:a,eventSystemFlags:r,nativeEvent:g,targetContainers:[u]},t!==null&&(t=Kn(t),t!==null&&Ym(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function Bv(e,t,a,r,u){switch(t){case"focusin":return xa=sr(xa,e,t,a,r,u),!0;case"dragenter":return ya=sr(ya,e,t,a,r,u),!0;case"mouseover":return ba=sr(ba,e,t,a,r,u),!0;case"pointerover":var g=u.pointerId;return nr.set(g,sr(nr.get(g)||null,e,t,a,r,u)),!0;case"gotpointercapture":return g=u.pointerId,ar.set(g,sr(ar.get(g)||null,e,t,a,r,u)),!0}return!1}function Qm(e){var t=Fn(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,Ur(e.priority,function(){Gm(a)});return}}else if(t===31){if(t=h(a),t!==null){e.blockedOn=t,Ur(e.priority,function(){Gm(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=od(e.nativeEvent);if(a===null){a=e.nativeEvent;var r=new a.constructor(a.type,a);cc=r,a.target.dispatchEvent(r),cc=null}else return t=Kn(a),t!==null&&Ym(t),e.blockedOn=a,!1;t.shift()}return!0}function Fm(e,t,a){Wl(e)&&a.delete(t)}function Vv(){ud=!1,xa!==null&&Wl(xa)&&(xa=null),ya!==null&&Wl(ya)&&(ya=null),ba!==null&&Wl(ba)&&(ba=null),nr.forEach(Fm),ar.forEach(Fm)}function Pl(e,t){e.blockedOn===t&&(e.blockedOn=null,ud||(ud=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Vv)))}var eo=null;function Km(e){eo!==e&&(eo=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){eo===e&&(eo=null);for(var t=0;t<e.length;t+=3){var a=e[t],r=e[t+1],u=e[t+2];if(typeof r!="function"){if(cd(r||a)===null)continue;break}var g=Kn(a);g!==null&&(e.splice(t,3),t-=3,ou(g,{pending:!0,data:u,method:a.method,action:r},r,u))}}))}function Qs(e){function t(R){return Pl(R,e)}xa!==null&&Pl(xa,e),ya!==null&&Pl(ya,e),ba!==null&&Pl(ba,e),nr.forEach(t),ar.forEach(t);for(var a=0;a<va.length;a++){var r=va[a];r.blockedOn===e&&(r.blockedOn=null)}for(;0<va.length&&(a=va[0],a.blockedOn===null);)Qm(a),a.blockedOn===null&&va.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(r=0;r<a.length;r+=3){var u=a[r],g=a[r+1],b=u[pt]||null;if(typeof g=="function")b||Km(a);else if(b){var k=null;if(g&&g.hasAttribute("formAction")){if(u=g,b=g[pt]||null)k=b.formAction;else if(cd(u)!==null)continue}else k=b.action;typeof k=="function"?a[r+1]=k:(a.splice(r,3),r-=3),Km(a)}}}function Im(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(b){return u=b})},focusReset:"manual",scroll:"manual"})}function t(){u!==null&&(u(),u=null),r||setTimeout(a,20)}function a(){if(!r&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),u!==null&&(u(),u=null)}}}function dd(e){this._internalRoot=e}to.prototype.render=dd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var a=t.current,r=Ht();Vm(a,r,e,t,null,null)},to.prototype.unmount=dd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vm(e.current,2,null,e,null,null),Ll(),t[Nn]=null}};function to(e){this._internalRoot=e}to.prototype.unstable_scheduleHydration=function(e){if(e){var t=Hr();e={blockedOn:null,target:e,priority:t};for(var a=0;a<va.length&&t!==0&&t<va[a].priority;a++);va.splice(a,0,e),a===0&&Qm(e)}};var Jm=s.version;if(Jm!=="19.2.3")throw Error(o(527,Jm,"19.2.3"));D.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=m(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var qv={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var no=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!no.isDisabled&&no.supportsFiber)try{Ta=no.inject(qv),xt=no}catch{}}return rr.createRoot=function(e,t){if(!c(e))throw Error(o(299));var a=!1,r="",u=sh,g=ih,b=rh;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(g=t.onCaughtError),t.onRecoverableError!==void 0&&(b=t.onRecoverableError)),t=Um(e,1,!1,null,null,a,r,null,u,g,b,Im),e[Nn]=t.current,Zu(e),new dd(t)},rr.hydrateRoot=function(e,t,a){if(!c(e))throw Error(o(299));var r=!1,u="",g=sh,b=ih,k=rh,R=null;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(k=a.onRecoverableError),a.formState!==void 0&&(R=a.formState)),t=Um(e,1,!0,t,a??null,r,u,R,g,b,k,Im),t.context=Bm(null),a=t.current,r=Ht(),r=gi(r),u=ia(r),u.callback=null,ra(a,u,r),a=r,t.current.lanes=a,Da(t,a),fn(t),e[Nn]=t.current,Zu(e),new to(t)},rr.version="19.2.3",rr}var m0;function H_(){if(m0)return xd.exports;m0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(s){console.error(s)}}return n(),xd.exports=$_(),xd.exports}var U_=H_();const we=n=>typeof n=="string",lr=()=>{let n,s;const l=new Promise((o,c)=>{n=o,s=c});return l.resolve=n,l.reject=s,l},p0=n=>n==null?"":""+n,B_=(n,s,l)=>{n.forEach(o=>{s[o]&&(l[o]=s[o])})},V_=/###/g,x0=n=>n&&n.indexOf("###")>-1?n.replace(V_,"."):n,y0=n=>!n||we(n),fr=(n,s,l)=>{const o=we(s)?s.split("."):s;let c=0;for(;c<o.length-1;){if(y0(n))return{};const d=x0(o[c]);!n[d]&&l&&(n[d]=new l),Object.prototype.hasOwnProperty.call(n,d)?n=n[d]:n={},++c}return y0(n)?{}:{obj:n,k:x0(o[c])}},b0=(n,s,l)=>{const{obj:o,k:c}=fr(n,s,Object);if(o!==void 0||s.length===1){o[c]=l;return}let d=s[s.length-1],f=s.slice(0,s.length-1),h=fr(n,f,Object);for(;h.obj===void 0&&f.length;)d=`${f[f.length-1]}.${d}`,f=f.slice(0,f.length-1),h=fr(n,f,Object),h?.obj&&typeof h.obj[`${h.k}.${d}`]<"u"&&(h.obj=void 0);h.obj[`${h.k}.${d}`]=l},q_=(n,s,l,o)=>{const{obj:c,k:d}=fr(n,s,Object);c[d]=c[d]||[],c[d].push(l)},bo=(n,s)=>{const{obj:l,k:o}=fr(n,s);if(l&&Object.prototype.hasOwnProperty.call(l,o))return l[o]},Y_=(n,s,l)=>{const o=bo(n,l);return o!==void 0?o:bo(s,l)},qp=(n,s,l)=>{for(const o in s)o!=="__proto__"&&o!=="constructor"&&(o in n?we(n[o])||n[o]instanceof String||we(s[o])||s[o]instanceof String?l&&(n[o]=s[o]):qp(n[o],s[o],l):n[o]=s[o]);return n},Fs=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var G_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const X_=n=>we(n)?n.replace(/[&<>"'\/]/g,s=>G_[s]):n;class Z_{constructor(s){this.capacity=s,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(s){const l=this.regExpMap.get(s);if(l!==void 0)return l;const o=new RegExp(s);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(s,o),this.regExpQueue.push(s),o}}const Q_=[" ",",","?","!",";"],F_=new Z_(20),K_=(n,s,l)=>{s=s||"",l=l||"";const o=Q_.filter(f=>s.indexOf(f)<0&&l.indexOf(f)<0);if(o.length===0)return!0;const c=F_.getRegExp(`(${o.map(f=>f==="?"?"\\?":f).join("|")})`);let d=!c.test(n);if(!d){const f=n.indexOf(l);f>0&&!c.test(n.substring(0,f))&&(d=!0)}return d},Dd=(n,s,l=".")=>{if(!n)return;if(n[s])return Object.prototype.hasOwnProperty.call(n,s)?n[s]:void 0;const o=s.split(l);let c=n;for(let d=0;d<o.length;){if(!c||typeof c!="object")return;let f,h="";for(let p=d;p<o.length;++p)if(p!==d&&(h+=l),h+=o[p],f=c[h],f!==void 0){if(["string","number","boolean"].indexOf(typeof f)>-1&&p<o.length-1)continue;d+=p-d+1;break}c=f}return c},yr=n=>n?.replace("_","-"),I_={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,s){console?.[n]?.apply?.(console,s)}};class vo{constructor(s,l={}){this.init(s,l)}init(s,l={}){this.prefix=l.prefix||"i18next:",this.logger=s||I_,this.options=l,this.debug=l.debug}log(...s){return this.forward(s,"log","",!0)}warn(...s){return this.forward(s,"warn","",!0)}error(...s){return this.forward(s,"error","")}deprecate(...s){return this.forward(s,"warn","WARNING DEPRECATED: ",!0)}forward(s,l,o,c){return c&&!this.debug?null:(we(s[0])&&(s[0]=`${o}${this.prefix} ${s[0]}`),this.logger[l](s))}create(s){return new vo(this.logger,{prefix:`${this.prefix}:${s}:`,...this.options})}clone(s){return s=s||this.options,s.prefix=s.prefix||this.prefix,new vo(this.logger,s)}}var mn=new vo;class Do{constructor(){this.observers={}}on(s,l){return s.split(" ").forEach(o=>{this.observers[o]||(this.observers[o]=new Map);const c=this.observers[o].get(l)||0;this.observers[o].set(l,c+1)}),this}off(s,l){if(this.observers[s]){if(!l){delete this.observers[s];return}this.observers[s].delete(l)}}emit(s,...l){this.observers[s]&&Array.from(this.observers[s].entries()).forEach(([c,d])=>{for(let f=0;f<d;f++)c(...l)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([c,d])=>{for(let f=0;f<d;f++)c.apply(c,[s,...l])})}}class v0 extends Do{constructor(s,l={ns:["translation"],defaultNS:"translation"}){super(),this.data=s||{},this.options=l,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(s){this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}removeNamespaces(s){const l=this.options.ns.indexOf(s);l>-1&&this.options.ns.splice(l,1)}getResource(s,l,o,c={}){const d=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator,f=c.ignoreJSONStructure!==void 0?c.ignoreJSONStructure:this.options.ignoreJSONStructure;let h;s.indexOf(".")>-1?h=s.split("."):(h=[s,l],o&&(Array.isArray(o)?h.push(...o):we(o)&&d?h.push(...o.split(d)):h.push(o)));const p=bo(this.data,h);return!p&&!l&&!o&&s.indexOf(".")>-1&&(s=h[0],l=h[1],o=h.slice(2).join(".")),p||!f||!we(o)?p:Dd(this.data?.[s]?.[l],o,d)}addResource(s,l,o,c,d={silent:!1}){const f=d.keySeparator!==void 0?d.keySeparator:this.options.keySeparator;let h=[s,l];o&&(h=h.concat(f?o.split(f):o)),s.indexOf(".")>-1&&(h=s.split("."),c=l,l=h[1]),this.addNamespaces(l),b0(this.data,h,c),d.silent||this.emit("added",s,l,o,c)}addResources(s,l,o,c={silent:!1}){for(const d in o)(we(o[d])||Array.isArray(o[d]))&&this.addResource(s,l,d,o[d],{silent:!0});c.silent||this.emit("added",s,l,o)}addResourceBundle(s,l,o,c,d,f={silent:!1,skipCopy:!1}){let h=[s,l];s.indexOf(".")>-1&&(h=s.split("."),c=o,o=l,l=h[1]),this.addNamespaces(l);let p=bo(this.data,h)||{};f.skipCopy||(o=JSON.parse(JSON.stringify(o))),c?qp(p,o,d):p={...p,...o},b0(this.data,h,p),f.silent||this.emit("added",s,l,o)}removeResourceBundle(s,l){this.hasResourceBundle(s,l)&&delete this.data[s][l],this.removeNamespaces(l),this.emit("removed",s,l)}hasResourceBundle(s,l){return this.getResource(s,l)!==void 0}getResourceBundle(s,l){return l||(l=this.options.defaultNS),this.getResource(s,l)}getDataByLanguage(s){return this.data[s]}hasLanguageSomeTranslations(s){const l=this.getDataByLanguage(s);return!!(l&&Object.keys(l)||[]).find(c=>l[c]&&Object.keys(l[c]).length>0)}toJSON(){return this.data}}var Yp={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,s,l,o,c){return n.forEach(d=>{s=this.processors[d]?.process(s,l,o,c)??s}),s}};const Gp=Symbol("i18next/PATH_KEY");function J_(){const n=[],s=Object.create(null);let l;return s.get=(o,c)=>(l?.revoke?.(),c===Gp?n:(n.push(c),l=Proxy.revocable(o,s),l.proxy)),Proxy.revocable(Object.create(null),s).proxy}function Od(n,s){const{[Gp]:l}=n(J_());return l.join(s?.keySeparator??".")}const _0={},vd=n=>!we(n)&&typeof n!="boolean"&&typeof n!="number";class _o extends Do{constructor(s,l={}){super(),B_(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],s,this),this.options=l,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=mn.create("translator")}changeLanguage(s){s&&(this.language=s)}exists(s,l={interpolation:{}}){const o={...l};if(s==null)return!1;const c=this.resolve(s,o);if(c?.res===void 0)return!1;const d=vd(c.res);return!(o.returnObjects===!1&&d)}extractFromKey(s,l){let o=l.nsSeparator!==void 0?l.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");const c=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator;let d=l.ns||this.options.defaultNS||[];const f=o&&s.indexOf(o)>-1,h=!this.options.userDefinedKeySeparator&&!l.keySeparator&&!this.options.userDefinedNsSeparator&&!l.nsSeparator&&!K_(s,o,c);if(f&&!h){const p=s.match(this.interpolator.nestingRegexp);if(p&&p.length>0)return{key:s,namespaces:we(d)?[d]:d};const m=s.split(o);(o!==c||o===c&&this.options.ns.indexOf(m[0])>-1)&&(d=m.shift()),s=m.join(c)}return{key:s,namespaces:we(d)?[d]:d}}translate(s,l,o){let c=typeof l=="object"?{...l}:l;if(typeof c!="object"&&this.options.overloadTranslationOptionHandler&&(c=this.options.overloadTranslationOptionHandler(arguments)),typeof c=="object"&&(c={...c}),c||(c={}),s==null)return"";typeof s=="function"&&(s=Od(s,{...this.options,...c})),Array.isArray(s)||(s=[String(s)]);const d=c.returnDetails!==void 0?c.returnDetails:this.options.returnDetails,f=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator,{key:h,namespaces:p}=this.extractFromKey(s[s.length-1],c),m=p[p.length-1];let y=c.nsSeparator!==void 0?c.nsSeparator:this.options.nsSeparator;y===void 0&&(y=":");const x=c.lng||this.language,v=c.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(x?.toLowerCase()==="cimode")return v?d?{res:`${m}${y}${h}`,usedKey:h,exactUsedKey:h,usedLng:x,usedNS:m,usedParams:this.getUsedParamsDetails(c)}:`${m}${y}${h}`:d?{res:h,usedKey:h,exactUsedKey:h,usedLng:x,usedNS:m,usedParams:this.getUsedParamsDetails(c)}:h;const N=this.resolve(s,c);let S=N?.res;const T=N?.usedKey||h,E=N?.exactUsedKey||h,z=["[object Number]","[object Function]","[object RegExp]"],w=c.joinArrays!==void 0?c.joinArrays:this.options.joinArrays,_=!this.i18nFormat||this.i18nFormat.handleAsObject,C=c.count!==void 0&&!we(c.count),$=_o.hasDefaultValue(c),O=C?this.pluralResolver.getSuffix(x,c.count,c):"",V=c.ordinal&&C?this.pluralResolver.getSuffix(x,c.count,{ordinal:!1}):"",G=C&&!c.ordinal&&c.count===0,L=G&&c[`defaultValue${this.options.pluralSeparator}zero`]||c[`defaultValue${O}`]||c[`defaultValue${V}`]||c.defaultValue;let F=S;_&&!S&&$&&(F=L);const q=vd(F),Z=Object.prototype.toString.apply(F);if(_&&F&&q&&z.indexOf(Z)<0&&!(we(w)&&Array.isArray(F))){if(!c.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const te=this.options.returnedObjectHandler?this.options.returnedObjectHandler(T,F,{...c,ns:p}):`key '${h} (${this.language})' returned an object instead of string.`;return d?(N.res=te,N.usedParams=this.getUsedParamsDetails(c),N):te}if(f){const te=Array.isArray(F),M=te?[]:{},U=te?E:T;for(const j in F)if(Object.prototype.hasOwnProperty.call(F,j)){const D=`${U}${f}${j}`;$&&!S?M[j]=this.translate(D,{...c,defaultValue:vd(L)?L[j]:void 0,joinArrays:!1,ns:p}):M[j]=this.translate(D,{...c,joinArrays:!1,ns:p}),M[j]===D&&(M[j]=F[j])}S=M}}else if(_&&we(w)&&Array.isArray(S))S=S.join(w),S&&(S=this.extendTranslation(S,s,c,o));else{let te=!1,M=!1;!this.isValidLookup(S)&&$&&(te=!0,S=L),this.isValidLookup(S)||(M=!0,S=h);const j=(c.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&M?void 0:S,D=$&&L!==S&&this.options.updateMissing;if(M||te||D){if(this.logger.log(D?"updateKey":"missingKey",x,m,h,D?L:S),f){const Q=this.resolve(h,{...c,keySeparator:!1});Q&&Q.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let H=[];const Y=this.languageUtils.getFallbackCodes(this.options.fallbackLng,c.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Y&&Y[0])for(let Q=0;Q<Y.length;Q++)H.push(Y[Q]);else this.options.saveMissingTo==="all"?H=this.languageUtils.toResolveHierarchy(c.lng||this.language):H.push(c.lng||this.language);const ee=(Q,W,se)=>{const le=$&&se!==S?se:j;this.options.missingKeyHandler?this.options.missingKeyHandler(Q,m,W,le,D,c):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(Q,m,W,le,D,c),this.emit("missingKey",Q,m,W,S)};this.options.saveMissing&&(this.options.saveMissingPlurals&&C?H.forEach(Q=>{const W=this.pluralResolver.getSuffixes(Q,c);G&&c[`defaultValue${this.options.pluralSeparator}zero`]&&W.indexOf(`${this.options.pluralSeparator}zero`)<0&&W.push(`${this.options.pluralSeparator}zero`),W.forEach(se=>{ee([Q],h+se,c[`defaultValue${se}`]||L)})}):ee(H,h,L))}S=this.extendTranslation(S,s,c,N,o),M&&S===h&&this.options.appendNamespaceToMissingKey&&(S=`${m}${y}${h}`),(M||te)&&this.options.parseMissingKeyHandler&&(S=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${m}${y}${h}`:h,te?S:void 0,c))}return d?(N.res=S,N.usedParams=this.getUsedParamsDetails(c),N):S}extendTranslation(s,l,o,c,d){if(this.i18nFormat?.parse)s=this.i18nFormat.parse(s,{...this.options.interpolation.defaultVariables,...o},o.lng||this.language||c.usedLng,c.usedNS,c.usedKey,{resolved:c});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init({...o,interpolation:{...this.options.interpolation,...o.interpolation}});const p=we(s)&&(o?.interpolation?.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let m;if(p){const x=s.match(this.interpolator.nestingRegexp);m=x&&x.length}let y=o.replace&&!we(o.replace)?o.replace:o;if(this.options.interpolation.defaultVariables&&(y={...this.options.interpolation.defaultVariables,...y}),s=this.interpolator.interpolate(s,y,o.lng||this.language||c.usedLng,o),p){const x=s.match(this.interpolator.nestingRegexp),v=x&&x.length;m<v&&(o.nest=!1)}!o.lng&&c&&c.res&&(o.lng=this.language||c.usedLng),o.nest!==!1&&(s=this.interpolator.nest(s,(...x)=>d?.[0]===x[0]&&!o.context?(this.logger.warn(`It seems you are nesting recursively key: ${x[0]} in key: ${l[0]}`),null):this.translate(...x,l),o)),o.interpolation&&this.interpolator.reset()}const f=o.postProcess||this.options.postProcess,h=we(f)?[f]:f;return s!=null&&h?.length&&o.applyPostProcessor!==!1&&(s=Yp.handle(h,s,l,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...c,usedParams:this.getUsedParamsDetails(o)},...o}:o,this)),s}resolve(s,l={}){let o,c,d,f,h;return we(s)&&(s=[s]),s.forEach(p=>{if(this.isValidLookup(o))return;const m=this.extractFromKey(p,l),y=m.key;c=y;let x=m.namespaces;this.options.fallbackNS&&(x=x.concat(this.options.fallbackNS));const v=l.count!==void 0&&!we(l.count),N=v&&!l.ordinal&&l.count===0,S=l.context!==void 0&&(we(l.context)||typeof l.context=="number")&&l.context!=="",T=l.lngs?l.lngs:this.languageUtils.toResolveHierarchy(l.lng||this.language,l.fallbackLng);x.forEach(E=>{this.isValidLookup(o)||(h=E,!_0[`${T[0]}-${E}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(h)&&(_0[`${T[0]}-${E}`]=!0,this.logger.warn(`key "${c}" for languages "${T.join(", ")}" won't get resolved as namespace "${h}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),T.forEach(z=>{if(this.isValidLookup(o))return;f=z;const w=[y];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(w,y,z,E,l);else{let C;v&&(C=this.pluralResolver.getSuffix(z,l.count,l));const $=`${this.options.pluralSeparator}zero`,O=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(l.ordinal&&C.indexOf(O)===0&&w.push(y+C.replace(O,this.options.pluralSeparator)),w.push(y+C),N&&w.push(y+$)),S){const V=`${y}${this.options.contextSeparator||"_"}${l.context}`;w.push(V),v&&(l.ordinal&&C.indexOf(O)===0&&w.push(V+C.replace(O,this.options.pluralSeparator)),w.push(V+C),N&&w.push(V+$))}}let _;for(;_=w.pop();)this.isValidLookup(o)||(d=_,o=this.getResource(z,E,_,l))}))})}),{res:o,usedKey:c,exactUsedKey:d,usedLng:f,usedNS:h}}isValidLookup(s){return s!==void 0&&!(!this.options.returnNull&&s===null)&&!(!this.options.returnEmptyString&&s==="")}getResource(s,l,o,c={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(s,l,o,c):this.resourceStore.getResource(s,l,o,c)}getUsedParamsDetails(s={}){const l=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],o=s.replace&&!we(s.replace);let c=o?s.replace:s;if(o&&typeof s.count<"u"&&(c.count=s.count),this.options.interpolation.defaultVariables&&(c={...this.options.interpolation.defaultVariables,...c}),!o){c={...c};for(const d of l)delete c[d]}return c}static hasDefaultValue(s){const l="defaultValue";for(const o in s)if(Object.prototype.hasOwnProperty.call(s,o)&&l===o.substring(0,l.length)&&s[o]!==void 0)return!0;return!1}}class N0{constructor(s){this.options=s,this.supportedLngs=this.options.supportedLngs||!1,this.logger=mn.create("languageUtils")}getScriptPartFromCode(s){if(s=yr(s),!s||s.indexOf("-")<0)return null;const l=s.split("-");return l.length===2||(l.pop(),l[l.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(l.join("-"))}getLanguagePartFromCode(s){if(s=yr(s),!s||s.indexOf("-")<0)return s;const l=s.split("-");return this.formatLanguageCode(l[0])}formatLanguageCode(s){if(we(s)&&s.indexOf("-")>-1){let l;try{l=Intl.getCanonicalLocales(s)[0]}catch{}return l&&this.options.lowerCaseLng&&(l=l.toLowerCase()),l||(this.options.lowerCaseLng?s.toLowerCase():s)}return this.options.cleanCode||this.options.lowerCaseLng?s.toLowerCase():s}isSupportedCode(s){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(s=this.getLanguagePartFromCode(s)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(s)>-1}getBestMatchFromCodes(s){if(!s)return null;let l;return s.forEach(o=>{if(l)return;const c=this.formatLanguageCode(o);(!this.options.supportedLngs||this.isSupportedCode(c))&&(l=c)}),!l&&this.options.supportedLngs&&s.forEach(o=>{if(l)return;const c=this.getScriptPartFromCode(o);if(this.isSupportedCode(c))return l=c;const d=this.getLanguagePartFromCode(o);if(this.isSupportedCode(d))return l=d;l=this.options.supportedLngs.find(f=>{if(f===d)return f;if(!(f.indexOf("-")<0&&d.indexOf("-")<0)&&(f.indexOf("-")>0&&d.indexOf("-")<0&&f.substring(0,f.indexOf("-"))===d||f.indexOf(d)===0&&d.length>1))return f})}),l||(l=this.getFallbackCodes(this.options.fallbackLng)[0]),l}getFallbackCodes(s,l){if(!s)return[];if(typeof s=="function"&&(s=s(l)),we(s)&&(s=[s]),Array.isArray(s))return s;if(!l)return s.default||[];let o=s[l];return o||(o=s[this.getScriptPartFromCode(l)]),o||(o=s[this.formatLanguageCode(l)]),o||(o=s[this.getLanguagePartFromCode(l)]),o||(o=s.default),o||[]}toResolveHierarchy(s,l){const o=this.getFallbackCodes((l===!1?[]:l)||this.options.fallbackLng||[],s),c=[],d=f=>{f&&(this.isSupportedCode(f)?c.push(f):this.logger.warn(`rejecting language code not found in supportedLngs: ${f}`))};return we(s)&&(s.indexOf("-")>-1||s.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&d(this.formatLanguageCode(s)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&d(this.getScriptPartFromCode(s)),this.options.load!=="currentOnly"&&d(this.getLanguagePartFromCode(s))):we(s)&&d(this.formatLanguageCode(s)),o.forEach(f=>{c.indexOf(f)<0&&d(this.formatLanguageCode(f))}),c}}const w0={zero:0,one:1,two:2,few:3,many:4,other:5},j0={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class W_{constructor(s,l={}){this.languageUtils=s,this.options=l,this.logger=mn.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(s,l={}){const o=yr(s==="dev"?"en":s),c=l.ordinal?"ordinal":"cardinal",d=JSON.stringify({cleanedCode:o,type:c});if(d in this.pluralRulesCache)return this.pluralRulesCache[d];let f;try{f=new Intl.PluralRules(o,{type:c})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),j0;if(!s.match(/-|_/))return j0;const p=this.languageUtils.getLanguagePartFromCode(s);f=this.getRule(p,l)}return this.pluralRulesCache[d]=f,f}needsPlural(s,l={}){let o=this.getRule(s,l);return o||(o=this.getRule("dev",l)),o?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(s,l,o={}){return this.getSuffixes(s,o).map(c=>`${l}${c}`)}getSuffixes(s,l={}){let o=this.getRule(s,l);return o||(o=this.getRule("dev",l)),o?o.resolvedOptions().pluralCategories.sort((c,d)=>w0[c]-w0[d]).map(c=>`${this.options.prepend}${l.ordinal?`ordinal${this.options.prepend}`:""}${c}`):[]}getSuffix(s,l,o={}){const c=this.getRule(s,o);return c?`${this.options.prepend}${o.ordinal?`ordinal${this.options.prepend}`:""}${c.select(l)}`:(this.logger.warn(`no plural rule found for: ${s}`),this.getSuffix("dev",l,o))}}const S0=(n,s,l,o=".",c=!0)=>{let d=Y_(n,s,l);return!d&&c&&we(l)&&(d=Dd(n,l,o),d===void 0&&(d=Dd(s,l,o))),d},_d=n=>n.replace(/\$/g,"$$$$");class k0{constructor(s={}){this.logger=mn.create("interpolator"),this.options=s,this.format=s?.interpolation?.format||(l=>l),this.init(s)}init(s={}){s.interpolation||(s.interpolation={escapeValue:!0});const{escape:l,escapeValue:o,useRawValueToEscape:c,prefix:d,prefixEscaped:f,suffix:h,suffixEscaped:p,formatSeparator:m,unescapeSuffix:y,unescapePrefix:x,nestingPrefix:v,nestingPrefixEscaped:N,nestingSuffix:S,nestingSuffixEscaped:T,nestingOptionsSeparator:E,maxReplaces:z,alwaysFormat:w}=s.interpolation;this.escape=l!==void 0?l:X_,this.escapeValue=o!==void 0?o:!0,this.useRawValueToEscape=c!==void 0?c:!1,this.prefix=d?Fs(d):f||"{{",this.suffix=h?Fs(h):p||"}}",this.formatSeparator=m||",",this.unescapePrefix=y?"":x||"-",this.unescapeSuffix=this.unescapePrefix?"":y||"",this.nestingPrefix=v?Fs(v):N||Fs("$t("),this.nestingSuffix=S?Fs(S):T||Fs(")"),this.nestingOptionsSeparator=E||",",this.maxReplaces=z||1e3,this.alwaysFormat=w!==void 0?w:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const s=(l,o)=>l?.source===o?(l.lastIndex=0,l):new RegExp(o,"g");this.regexp=s(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=s(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=s(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(s,l,o,c){let d,f,h;const p=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},m=N=>{if(N.indexOf(this.formatSeparator)<0){const z=S0(l,p,N,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(z,void 0,o,{...c,...l,interpolationkey:N}):z}const S=N.split(this.formatSeparator),T=S.shift().trim(),E=S.join(this.formatSeparator).trim();return this.format(S0(l,p,T,this.options.keySeparator,this.options.ignoreJSONStructure),E,o,{...c,...l,interpolationkey:T})};this.resetRegExp();const y=c?.missingInterpolationHandler||this.options.missingInterpolationHandler,x=c?.interpolation?.skipOnVariables!==void 0?c.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:N=>_d(N)},{regex:this.regexp,safeValue:N=>this.escapeValue?_d(this.escape(N)):_d(N)}].forEach(N=>{for(h=0;d=N.regex.exec(s);){const S=d[1].trim();if(f=m(S),f===void 0)if(typeof y=="function"){const E=y(s,d,c);f=we(E)?E:""}else if(c&&Object.prototype.hasOwnProperty.call(c,S))f="";else if(x){f=d[0];continue}else this.logger.warn(`missed to pass in variable ${S} for interpolating ${s}`),f="";else!we(f)&&!this.useRawValueToEscape&&(f=p0(f));const T=N.safeValue(f);if(s=s.replace(d[0],T),x?(N.regex.lastIndex+=f.length,N.regex.lastIndex-=d[0].length):N.regex.lastIndex=0,h++,h>=this.maxReplaces)break}}),s}nest(s,l,o={}){let c,d,f;const h=(p,m)=>{const y=this.nestingOptionsSeparator;if(p.indexOf(y)<0)return p;const x=p.split(new RegExp(`${y}[ ]*{`));let v=`{${x[1]}`;p=x[0],v=this.interpolate(v,f);const N=v.match(/'/g),S=v.match(/"/g);((N?.length??0)%2===0&&!S||S.length%2!==0)&&(v=v.replace(/'/g,'"'));try{f=JSON.parse(v),m&&(f={...m,...f})}catch(T){return this.logger.warn(`failed parsing options string in nesting for key ${p}`,T),`${p}${y}${v}`}return f.defaultValue&&f.defaultValue.indexOf(this.prefix)>-1&&delete f.defaultValue,p};for(;c=this.nestingRegexp.exec(s);){let p=[];f={...o},f=f.replace&&!we(f.replace)?f.replace:f,f.applyPostProcessor=!1,delete f.defaultValue;const m=/{.*}/.test(c[1])?c[1].lastIndexOf("}")+1:c[1].indexOf(this.formatSeparator);if(m!==-1&&(p=c[1].slice(m).split(this.formatSeparator).map(y=>y.trim()).filter(Boolean),c[1]=c[1].slice(0,m)),d=l(h.call(this,c[1].trim(),f),f),d&&c[0]===s&&!we(d))return d;we(d)||(d=p0(d)),d||(this.logger.warn(`missed to resolve ${c[1]} for nesting ${s}`),d=""),p.length&&(d=p.reduce((y,x)=>this.format(y,x,o.lng,{...o,interpolationkey:c[1].trim()}),d.trim())),s=s.replace(c[0],d),this.regexp.lastIndex=0}return s}}const P_=n=>{let s=n.toLowerCase().trim();const l={};if(n.indexOf("(")>-1){const o=n.split("(");s=o[0].toLowerCase().trim();const c=o[1].substring(0,o[1].length-1);s==="currency"&&c.indexOf(":")<0?l.currency||(l.currency=c.trim()):s==="relativetime"&&c.indexOf(":")<0?l.range||(l.range=c.trim()):c.split(";").forEach(f=>{if(f){const[h,...p]=f.split(":"),m=p.join(":").trim().replace(/^'+|'+$/g,""),y=h.trim();l[y]||(l[y]=m),m==="false"&&(l[y]=!1),m==="true"&&(l[y]=!0),isNaN(m)||(l[y]=parseInt(m,10))}})}return{formatName:s,formatOptions:l}},C0=n=>{const s={};return(l,o,c)=>{let d=c;c&&c.interpolationkey&&c.formatParams&&c.formatParams[c.interpolationkey]&&c[c.interpolationkey]&&(d={...d,[c.interpolationkey]:void 0});const f=o+JSON.stringify(d);let h=s[f];return h||(h=n(yr(o),c),s[f]=h),h(l)}},e1=n=>(s,l,o)=>n(yr(l),o)(s);class t1{constructor(s={}){this.logger=mn.create("formatter"),this.options=s,this.init(s)}init(s,l={interpolation:{}}){this.formatSeparator=l.interpolation.formatSeparator||",";const o=l.cacheInBuiltFormats?C0:e1;this.formats={number:o((c,d)=>{const f=new Intl.NumberFormat(c,{...d});return h=>f.format(h)}),currency:o((c,d)=>{const f=new Intl.NumberFormat(c,{...d,style:"currency"});return h=>f.format(h)}),datetime:o((c,d)=>{const f=new Intl.DateTimeFormat(c,{...d});return h=>f.format(h)}),relativetime:o((c,d)=>{const f=new Intl.RelativeTimeFormat(c,{...d});return h=>f.format(h,d.range||"day")}),list:o((c,d)=>{const f=new Intl.ListFormat(c,{...d});return h=>f.format(h)})}}add(s,l){this.formats[s.toLowerCase().trim()]=l}addCached(s,l){this.formats[s.toLowerCase().trim()]=C0(l)}format(s,l,o,c={}){const d=l.split(this.formatSeparator);if(d.length>1&&d[0].indexOf("(")>1&&d[0].indexOf(")")<0&&d.find(h=>h.indexOf(")")>-1)){const h=d.findIndex(p=>p.indexOf(")")>-1);d[0]=[d[0],...d.splice(1,h)].join(this.formatSeparator)}return d.reduce((h,p)=>{const{formatName:m,formatOptions:y}=P_(p);if(this.formats[m]){let x=h;try{const v=c?.formatParams?.[c.interpolationkey]||{},N=v.locale||v.lng||c.locale||c.lng||o;x=this.formats[m](h,N,{...y,...c,...v})}catch(v){this.logger.warn(v)}return x}else this.logger.warn(`there was no format function for ${m}`);return h},s)}}const n1=(n,s)=>{n.pending[s]!==void 0&&(delete n.pending[s],n.pendingCount--)};class a1 extends Do{constructor(s,l,o,c={}){super(),this.backend=s,this.store=l,this.services=o,this.languageUtils=o.languageUtils,this.options=c,this.logger=mn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=c.maxParallelReads||10,this.readingCalls=0,this.maxRetries=c.maxRetries>=0?c.maxRetries:5,this.retryTimeout=c.retryTimeout>=1?c.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(o,c.backend,c)}queueLoad(s,l,o,c){const d={},f={},h={},p={};return s.forEach(m=>{let y=!0;l.forEach(x=>{const v=`${m}|${x}`;!o.reload&&this.store.hasResourceBundle(m,x)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?f[v]===void 0&&(f[v]=!0):(this.state[v]=1,y=!1,f[v]===void 0&&(f[v]=!0),d[v]===void 0&&(d[v]=!0),p[x]===void 0&&(p[x]=!0)))}),y||(h[m]=!0)}),(Object.keys(d).length||Object.keys(f).length)&&this.queue.push({pending:f,pendingCount:Object.keys(f).length,loaded:{},errors:[],callback:c}),{toLoad:Object.keys(d),pending:Object.keys(f),toLoadLanguages:Object.keys(h),toLoadNamespaces:Object.keys(p)}}loaded(s,l,o){const c=s.split("|"),d=c[0],f=c[1];l&&this.emit("failedLoading",d,f,l),!l&&o&&this.store.addResourceBundle(d,f,o,void 0,void 0,{skipCopy:!0}),this.state[s]=l?-1:2,l&&o&&(this.state[s]=0);const h={};this.queue.forEach(p=>{q_(p.loaded,[d],f),n1(p,s),l&&p.errors.push(l),p.pendingCount===0&&!p.done&&(Object.keys(p.loaded).forEach(m=>{h[m]||(h[m]={});const y=p.loaded[m];y.length&&y.forEach(x=>{h[m][x]===void 0&&(h[m][x]=!0)})}),p.done=!0,p.errors.length?p.callback(p.errors):p.callback())}),this.emit("loaded",h),this.queue=this.queue.filter(p=>!p.done)}read(s,l,o,c=0,d=this.retryTimeout,f){if(!s.length)return f(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:s,ns:l,fcName:o,tried:c,wait:d,callback:f});return}this.readingCalls++;const h=(m,y)=>{if(this.readingCalls--,this.waitingReads.length>0){const x=this.waitingReads.shift();this.read(x.lng,x.ns,x.fcName,x.tried,x.wait,x.callback)}if(m&&y&&c<this.maxRetries){setTimeout(()=>{this.read.call(this,s,l,o,c+1,d*2,f)},d);return}f(m,y)},p=this.backend[o].bind(this.backend);if(p.length===2){try{const m=p(s,l);m&&typeof m.then=="function"?m.then(y=>h(null,y)).catch(h):h(null,m)}catch(m){h(m)}return}return p(s,l,h)}prepareLoading(s,l,o={},c){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),c&&c();we(s)&&(s=this.languageUtils.toResolveHierarchy(s)),we(l)&&(l=[l]);const d=this.queueLoad(s,l,o,c);if(!d.toLoad.length)return d.pending.length||c(),null;d.toLoad.forEach(f=>{this.loadOne(f)})}load(s,l,o){this.prepareLoading(s,l,{},o)}reload(s,l,o){this.prepareLoading(s,l,{reload:!0},o)}loadOne(s,l=""){const o=s.split("|"),c=o[0],d=o[1];this.read(c,d,"read",void 0,void 0,(f,h)=>{f&&this.logger.warn(`${l}loading namespace ${d} for language ${c} failed`,f),!f&&h&&this.logger.log(`${l}loaded namespace ${d} for language ${c}`,h),this.loaded(s,f,h)})}saveMissing(s,l,o,c,d,f={},h=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(l)){this.logger.warn(`did not save key "${o}" as the namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(o==null||o==="")){if(this.backend?.create){const p={...f,isUpdate:d},m=this.backend.create.bind(this.backend);if(m.length<6)try{let y;m.length===5?y=m(s,l,o,c,p):y=m(s,l,o,c),y&&typeof y.then=="function"?y.then(x=>h(null,x)).catch(h):h(null,y)}catch(y){h(y)}else m(s,l,o,c,h,p)}!s||!s[0]||this.store.addResource(s[0],l,o,c)}}}const Nd=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let s={};if(typeof n[1]=="object"&&(s=n[1]),we(n[1])&&(s.defaultValue=n[1]),we(n[2])&&(s.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const l=n[3]||n[2];Object.keys(l).forEach(o=>{s[o]=l[o]})}return s},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),E0=n=>(we(n.ns)&&(n.ns=[n.ns]),we(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),we(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),so=()=>{},s1=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(l=>{typeof n[l]=="function"&&(n[l]=n[l].bind(n))})},i1=n=>!!(n?.modules?.backend?.name?.indexOf("Locize")>0||n?.modules?.backend?.constructor?.name?.indexOf("Locize")>0||n?.options?.backend?.backends&&n.options.backend.backends.some(s=>s?.name?.indexOf("Locize")>0||s?.constructor?.name?.indexOf("Locize")>0));class gr extends Do{constructor(s={},l){if(super(),this.options=E0(s),this.services={},this.logger=mn,this.modules={external:[]},s1(this),l&&!this.isInitialized&&!s.isClone){if(!this.options.initAsync)return this.init(s,l),this;setTimeout(()=>{this.init(s,l)},0)}}init(s={},l){this.isInitializing=!0,typeof s=="function"&&(l=s,s={}),s.defaultNS==null&&s.ns&&(we(s.ns)?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));const o=Nd();this.options={...o,...this.options,...E0(s)},this.options.interpolation={...o.interpolation,...this.options.interpolation},s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=o.overloadTranslationOptionHandler),this.options.showSupportNotice!==!1&&!i1(this)&&typeof console<"u"&&typeof console.info<"u"&&console.info(" i18next is maintained with support from locize.com  consider powering your project with managed localization (AI, CDN, integrations): https://locize.com ");const c=m=>m?typeof m=="function"?new m:m:null;if(!this.options.isClone){this.modules.logger?mn.init(c(this.modules.logger),this.options):mn.init(null,this.options);let m;this.modules.formatter?m=this.modules.formatter:m=t1;const y=new N0(this.options);this.store=new v0(this.options.resources,this.options);const x=this.services;x.logger=mn,x.resourceStore=this.store,x.languageUtils=y,x.pluralResolver=new W_(y,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==o.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),m&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(x.formatter=c(m),x.formatter.init&&x.formatter.init(x,this.options),this.options.interpolation.format=x.formatter.format.bind(x.formatter)),x.interpolator=new k0(this.options),x.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},x.backendConnector=new a1(c(this.modules.backend),x.resourceStore,x,this.options),x.backendConnector.on("*",(N,...S)=>{this.emit(N,...S)}),this.modules.languageDetector&&(x.languageDetector=c(this.modules.languageDetector),x.languageDetector.init&&x.languageDetector.init(x,this.options.detection,this.options)),this.modules.i18nFormat&&(x.i18nFormat=c(this.modules.i18nFormat),x.i18nFormat.init&&x.i18nFormat.init(this)),this.translator=new _o(this.services,this.options),this.translator.on("*",(N,...S)=>{this.emit(N,...S)}),this.modules.external.forEach(N=>{N.init&&N.init(this)})}if(this.format=this.options.interpolation.format,l||(l=so),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const m=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);m.length>0&&m[0]!=="dev"&&(this.options.lng=m[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(m=>{this[m]=(...y)=>this.store[m](...y)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(m=>{this[m]=(...y)=>(this.store[m](...y),this)});const h=lr(),p=()=>{const m=(y,x)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),h.resolve(x),l(y,x)};if(this.languages&&!this.isInitialized)return m(null,this.t.bind(this));this.changeLanguage(this.options.lng,m)};return this.options.resources||!this.options.initAsync?p():setTimeout(p,0),h}loadResources(s,l=so){let o=l;const c=we(s)?s:this.language;if(typeof s=="function"&&(o=s),!this.options.resources||this.options.partialBundledLanguages){if(c?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return o();const d=[],f=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(m=>{m!=="cimode"&&d.indexOf(m)<0&&d.push(m)})};c?f(c):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(p=>f(p)),this.options.preload?.forEach?.(h=>f(h)),this.services.backendConnector.load(d,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),o(h)})}else o(null)}reloadResources(s,l,o){const c=lr();return typeof s=="function"&&(o=s,s=void 0),typeof l=="function"&&(o=l,l=void 0),s||(s=this.languages),l||(l=this.options.ns),o||(o=so),this.services.backendConnector.reload(s,l,d=>{c.resolve(),o(d)}),c}use(s){if(!s)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!s.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return s.type==="backend"&&(this.modules.backend=s),(s.type==="logger"||s.log&&s.warn&&s.error)&&(this.modules.logger=s),s.type==="languageDetector"&&(this.modules.languageDetector=s),s.type==="i18nFormat"&&(this.modules.i18nFormat=s),s.type==="postProcessor"&&Yp.addPostProcessor(s),s.type==="formatter"&&(this.modules.formatter=s),s.type==="3rdParty"&&this.modules.external.push(s),this}setResolvedLanguage(s){if(!(!s||!this.languages)&&!(["cimode","dev"].indexOf(s)>-1)){for(let l=0;l<this.languages.length;l++){const o=this.languages[l];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}!this.resolvedLanguage&&this.languages.indexOf(s)<0&&this.store.hasLanguageSomeTranslations(s)&&(this.resolvedLanguage=s,this.languages.unshift(s))}}changeLanguage(s,l){this.isLanguageChangingTo=s;const o=lr();this.emit("languageChanging",s);const c=h=>{this.language=h,this.languages=this.services.languageUtils.toResolveHierarchy(h),this.resolvedLanguage=void 0,this.setResolvedLanguage(h)},d=(h,p)=>{p?this.isLanguageChangingTo===s&&(c(p),this.translator.changeLanguage(p),this.isLanguageChangingTo=void 0,this.emit("languageChanged",p),this.logger.log("languageChanged",p)):this.isLanguageChangingTo=void 0,o.resolve((...m)=>this.t(...m)),l&&l(h,(...m)=>this.t(...m))},f=h=>{!s&&!h&&this.services.languageDetector&&(h=[]);const p=we(h)?h:h&&h[0],m=this.store.hasLanguageSomeTranslations(p)?p:this.services.languageUtils.getBestMatchFromCodes(we(h)?[h]:h);m&&(this.language||c(m),this.translator.language||this.translator.changeLanguage(m),this.services.languageDetector?.cacheUserLanguage?.(m)),this.loadResources(m,y=>{d(y,m)})};return!s&&this.services.languageDetector&&!this.services.languageDetector.async?f(this.services.languageDetector.detect()):!s&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(f):this.services.languageDetector.detect(f):f(s),o}getFixedT(s,l,o){const c=(d,f,...h)=>{let p;typeof f!="object"?p=this.options.overloadTranslationOptionHandler([d,f].concat(h)):p={...f},p.lng=p.lng||c.lng,p.lngs=p.lngs||c.lngs,p.ns=p.ns||c.ns,p.keyPrefix!==""&&(p.keyPrefix=p.keyPrefix||o||c.keyPrefix);const m=this.options.keySeparator||".";let y;return p.keyPrefix&&Array.isArray(d)?y=d.map(x=>(typeof x=="function"&&(x=Od(x,{...this.options,...f})),`${p.keyPrefix}${m}${x}`)):(typeof d=="function"&&(d=Od(d,{...this.options,...f})),y=p.keyPrefix?`${p.keyPrefix}${m}${d}`:d),this.t(y,p)};return we(s)?c.lng=s:c.lngs=s,c.ns=l,c.keyPrefix=o,c}t(...s){return this.translator?.translate(...s)}exists(...s){return this.translator?.exists(...s)}setDefaultNamespace(s){this.options.defaultNS=s}hasLoadedNamespace(s,l={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const o=l.lng||this.resolvedLanguage||this.languages[0],c=this.options?this.options.fallbackLng:!1,d=this.languages[this.languages.length-1];if(o.toLowerCase()==="cimode")return!0;const f=(h,p)=>{const m=this.services.backendConnector.state[`${h}|${p}`];return m===-1||m===0||m===2};if(l.precheck){const h=l.precheck(this,f);if(h!==void 0)return h}return!!(this.hasResourceBundle(o,s)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||f(o,s)&&(!c||f(d,s)))}loadNamespaces(s,l){const o=lr();return this.options.ns?(we(s)&&(s=[s]),s.forEach(c=>{this.options.ns.indexOf(c)<0&&this.options.ns.push(c)}),this.loadResources(c=>{o.resolve(),l&&l(c)}),o):(l&&l(),Promise.resolve())}loadLanguages(s,l){const o=lr();we(s)&&(s=[s]);const c=this.options.preload||[],d=s.filter(f=>c.indexOf(f)<0&&this.services.languageUtils.isSupportedCode(f));return d.length?(this.options.preload=c.concat(d),this.loadResources(f=>{o.resolve(),l&&l(f)}),o):(l&&l(),Promise.resolve())}dir(s){if(s||(s=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!s)return"rtl";try{const c=new Intl.Locale(s);if(c&&c.getTextInfo){const d=c.getTextInfo();if(d&&d.direction)return d.direction}}catch{}const l=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],o=this.services?.languageUtils||new N0(Nd());return s.toLowerCase().indexOf("-latn")>1?"ltr":l.indexOf(o.getLanguagePartFromCode(s))>-1||s.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(s={},l){const o=new gr(s,l);return o.createInstance=gr.createInstance,o}cloneInstance(s={},l=so){const o=s.forkResourceStore;o&&delete s.forkResourceStore;const c={...this.options,...s,isClone:!0},d=new gr(c);if((s.debug!==void 0||s.prefix!==void 0)&&(d.logger=d.logger.clone(s)),["store","services","language"].forEach(h=>{d[h]=this[h]}),d.services={...this.services},d.services.utils={hasLoadedNamespace:d.hasLoadedNamespace.bind(d)},o){const h=Object.keys(this.store.data).reduce((p,m)=>(p[m]={...this.store.data[m]},p[m]=Object.keys(p[m]).reduce((y,x)=>(y[x]={...p[m][x]},y),p[m]),p),{});d.store=new v0(h,c),d.services.resourceStore=d.store}if(s.interpolation){const p={...Nd().interpolation,...this.options.interpolation,...s.interpolation},m={...c,interpolation:p};d.services.interpolator=new k0(m)}return d.translator=new _o(d.services,c),d.translator.on("*",(h,...p)=>{d.emit(h,...p)}),d.init(c,l),d.translator.options=c,d.translator.backendConnector.services.utils={hasLoadedNamespace:d.hasLoadedNamespace.bind(d)},d}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const _t=gr.createInstance();_t.createInstance;_t.dir;_t.init;_t.loadResources;_t.reloadResources;_t.use;_t.changeLanguage;_t.getFixedT;_t.t;_t.exists;_t.setDefaultNamespace;_t.hasLoadedNamespace;_t.loadNamespaces;_t.loadLanguages;const r1=(n,s,l,o)=>{const c=[l,{code:s,...o||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(c,"warn","react-i18next::",!0);ts(c[0])&&(c[0]=`react-i18next:: ${c[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...c):console?.warn&&console.warn(...c)},z0={},Xp=(n,s,l,o)=>{ts(l)&&z0[l]||(ts(l)&&(z0[l]=new Date),r1(n,s,l,o))},Zp=(n,s)=>()=>{if(n.isInitialized)s();else{const l=()=>{setTimeout(()=>{n.off("initialized",l)},0),s()};n.on("initialized",l)}},Ld=(n,s,l)=>{n.loadNamespaces(s,Zp(n,l))},A0=(n,s,l,o)=>{if(ts(l)&&(l=[l]),n.options.preload&&n.options.preload.indexOf(s)>-1)return Ld(n,l,o);l.forEach(c=>{n.options.ns.indexOf(c)<0&&n.options.ns.push(c)}),n.loadLanguages(s,Zp(n,o))},l1=(n,s,l={})=>!s.languages||!s.languages.length?(Xp(s,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:s.languages}),!0):s.hasLoadedNamespace(n,{lng:l.lng,precheck:(o,c)=>{if(l.bindI18n&&l.bindI18n.indexOf("languageChanging")>-1&&o.services.backendConnector.backend&&o.isLanguageChangingTo&&!c(o.isLanguageChangingTo,n))return!1}}),ts=n=>typeof n=="string",o1=n=>typeof n=="object"&&n!==null,c1=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,u1={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},d1=n=>u1[n],f1=n=>n.replace(c1,d1);let Rd={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:f1,transDefaultProps:void 0};const g1=(n={})=>{Rd={...Rd,...n}},h1=()=>Rd;let Qp;const m1=n=>{Qp=n},p1=()=>Qp,x1={type:"3rdParty",init(n){g1(n.options.react),m1(n)}},y1=A.createContext();class b1{constructor(){this.usedNamespaces={}}addUsedNamespaces(s){s.forEach(l=>{this.usedNamespaces[l]||(this.usedNamespaces[l]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var v1=Zv();const _1=(n,s)=>ts(s)?s:o1(s)&&ts(s.defaultValue)?s.defaultValue:Array.isArray(n)?n[n.length-1]:n,N1={t:_1,ready:!1},w1=()=>()=>{},ut=(n,s={})=>{const{i18n:l}=s,{i18n:o,defaultNS:c}=A.useContext(y1)||{},d=l||o||p1();d&&!d.reportNamespaces&&(d.reportNamespaces=new b1),d||Xp(d,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const f=A.useMemo(()=>({...h1(),...d?.options?.react,...s}),[d,s]),{useSuspense:h,keyPrefix:p}=f,m=c||d?.options?.defaultNS,y=ts(m)?[m]:m||["translation"],x=A.useMemo(()=>y,y);d?.reportNamespaces?.addUsedNamespaces?.(x);const v=A.useRef(0),N=A.useCallback(L=>{if(!d)return w1;const{bindI18n:F,bindI18nStore:q}=f,Z=()=>{v.current+=1,L()};return F&&d.on(F,Z),q&&d.store.on(q,Z),()=>{F&&F.split(" ").forEach(te=>d.off(te,Z)),q&&q.split(" ").forEach(te=>d.store.off(te,Z))}},[d,f]),S=A.useRef(),T=A.useCallback(()=>{if(!d)return N1;const L=!!(d.isInitialized||d.initializedStoreOnce)&&x.every(U=>l1(U,d,f)),F=s.lng||d.language,q=v.current,Z=S.current;if(Z&&Z.ready===L&&Z.lng===F&&Z.keyPrefix===p&&Z.revision===q)return Z;const M={t:d.getFixedT(F,f.nsMode==="fallback"?x:x[0],p),ready:L,lng:F,keyPrefix:p,revision:q};return S.current=M,M},[d,x,p,f,s.lng]),[E,z]=A.useState(0),{t:w,ready:_}=v1.useSyncExternalStore(N,T,T);A.useEffect(()=>{if(d&&!_&&!h){const L=()=>z(F=>F+1);s.lng?A0(d,s.lng,x,L):Ld(d,x,L)}},[d,s.lng,x,_,h,E]);const C=d||{},$=A.useRef(null),O=A.useRef(),V=L=>{const F=Object.getOwnPropertyDescriptors(L);F.__original&&delete F.__original;const q=Object.create(Object.getPrototypeOf(L),F);if(!Object.prototype.hasOwnProperty.call(q,"__original"))try{Object.defineProperty(q,"__original",{value:L,writable:!1,enumerable:!1,configurable:!1})}catch{}return q},G=A.useMemo(()=>{const L=C,F=L?.language;let q=L;L&&($.current&&$.current.__original===L?O.current!==F?(q=V(L),$.current=q,O.current=F):q=$.current:(q=V(L),$.current=q,O.current=F));const Z=[w,q,_];return Z.t=w,Z.i18n=q,Z.ready=_,Z},[w,C,_,C.resolvedLanguage,C.language,C.languages]);if(d&&h&&!_)throw new Promise(L=>{const F=()=>L();s.lng?A0(d,s.lng,x,F):Ld(d,x,F)});return G},{slice:j1,forEach:S1}=[];function k1(n){return S1.call(j1.call(arguments,1),s=>{if(s)for(const l in s)n[l]===void 0&&(n[l]=s[l])}),n}function C1(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(l=>l.test(n))}const T0=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,E1=function(n,s){const o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},c=encodeURIComponent(s);let d=`${n}=${c}`;if(o.maxAge>0){const f=o.maxAge-0;if(Number.isNaN(f))throw new Error("maxAge should be a Number");d+=`; Max-Age=${Math.floor(f)}`}if(o.domain){if(!T0.test(o.domain))throw new TypeError("option domain is invalid");d+=`; Domain=${o.domain}`}if(o.path){if(!T0.test(o.path))throw new TypeError("option path is invalid");d+=`; Path=${o.path}`}if(o.expires){if(typeof o.expires.toUTCString!="function")throw new TypeError("option expires is invalid");d+=`; Expires=${o.expires.toUTCString()}`}if(o.httpOnly&&(d+="; HttpOnly"),o.secure&&(d+="; Secure"),o.sameSite)switch(typeof o.sameSite=="string"?o.sameSite.toLowerCase():o.sameSite){case!0:d+="; SameSite=Strict";break;case"lax":d+="; SameSite=Lax";break;case"strict":d+="; SameSite=Strict";break;case"none":d+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o.partitioned&&(d+="; Partitioned"),d},M0={create(n,s,l,o){let c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};l&&(c.expires=new Date,c.expires.setTime(c.expires.getTime()+l*60*1e3)),o&&(c.domain=o),document.cookie=E1(n,s,c)},read(n){const s=`${n}=`,l=document.cookie.split(";");for(let o=0;o<l.length;o++){let c=l[o];for(;c.charAt(0)===" ";)c=c.substring(1,c.length);if(c.indexOf(s)===0)return c.substring(s.length,c.length)}return null},remove(n,s){this.create(n,"",-1,s)}};var z1={name:"cookie",lookup(n){let{lookupCookie:s}=n;if(s&&typeof document<"u")return M0.read(s)||void 0},cacheUserLanguage(n,s){let{lookupCookie:l,cookieMinutes:o,cookieDomain:c,cookieOptions:d}=s;l&&typeof document<"u"&&M0.create(l,n,o,c,d)}},A1={name:"querystring",lookup(n){let{lookupQuerystring:s}=n,l;if(typeof window<"u"){let{search:o}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(o=window.location.hash.substring(window.location.hash.indexOf("?")));const d=o.substring(1).split("&");for(let f=0;f<d.length;f++){const h=d[f].indexOf("=");h>0&&d[f].substring(0,h)===s&&(l=d[f].substring(h+1))}}return l}},T1={name:"hash",lookup(n){let{lookupHash:s,lookupFromHashIndex:l}=n,o;if(typeof window<"u"){const{hash:c}=window.location;if(c&&c.length>2){const d=c.substring(1);if(s){const f=d.split("&");for(let h=0;h<f.length;h++){const p=f[h].indexOf("=");p>0&&f[h].substring(0,p)===s&&(o=f[h].substring(p+1))}}if(o)return o;if(!o&&l>-1){const f=c.match(/\/([a-zA-Z-]*)/g);return Array.isArray(f)?f[typeof l=="number"?l:0]?.replace("/",""):void 0}}}return o}};let Ks=null;const D0=()=>{if(Ks!==null)return Ks;try{if(Ks=typeof window<"u"&&window.localStorage!==null,!Ks)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{Ks=!1}return Ks};var M1={name:"localStorage",lookup(n){let{lookupLocalStorage:s}=n;if(s&&D0())return window.localStorage.getItem(s)||void 0},cacheUserLanguage(n,s){let{lookupLocalStorage:l}=s;l&&D0()&&window.localStorage.setItem(l,n)}};let Is=null;const O0=()=>{if(Is!==null)return Is;try{if(Is=typeof window<"u"&&window.sessionStorage!==null,!Is)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{Is=!1}return Is};var D1={name:"sessionStorage",lookup(n){let{lookupSessionStorage:s}=n;if(s&&O0())return window.sessionStorage.getItem(s)||void 0},cacheUserLanguage(n,s){let{lookupSessionStorage:l}=s;l&&O0()&&window.sessionStorage.setItem(l,n)}},O1={name:"navigator",lookup(n){const s=[];if(typeof navigator<"u"){const{languages:l,userLanguage:o,language:c}=navigator;if(l)for(let d=0;d<l.length;d++)s.push(l[d]);o&&s.push(o),c&&s.push(c)}return s.length>0?s:void 0}},L1={name:"htmlTag",lookup(n){let{htmlTag:s}=n,l;const o=s||(typeof document<"u"?document.documentElement:null);return o&&typeof o.getAttribute=="function"&&(l=o.getAttribute("lang")),l}},R1={name:"path",lookup(n){let{lookupFromPathIndex:s}=n;if(typeof window>"u")return;const l=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(l)?l[typeof s=="number"?s:0]?.replace("/",""):void 0}},$1={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:s}=n;const l=typeof s=="number"?s+1:1,o=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(o)return o[l]}};let Fp=!1;try{document.cookie,Fp=!0}catch{}const Kp=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Fp||Kp.splice(1,1);const H1=()=>({order:Kp,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class Ip{constructor(s){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(s,l)}init(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=s,this.options=k1(l,this.options||{},H1()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=c=>c.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=o,this.addDetector(z1),this.addDetector(A1),this.addDetector(M1),this.addDetector(D1),this.addDetector(O1),this.addDetector(L1),this.addDetector(R1),this.addDetector($1),this.addDetector(T1)}addDetector(s){return this.detectors[s.name]=s,this}detect(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,l=[];return s.forEach(o=>{if(this.detectors[o]){let c=this.detectors[o].lookup(this.options);c&&typeof c=="string"&&(c=[c]),c&&(l=l.concat(c))}}),l=l.filter(o=>o!=null&&!C1(o)).map(o=>this.options.convertDetectedLanguage(o)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?l:l.length>0?l[0]:null}cacheUserLanguage(s){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;l&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(s)>-1||l.forEach(o=>{this.detectors[o]&&this.detectors[o].cacheUserLanguage(s,this.options)}))}}Ip.type="languageDetector";const U1="Welcome",B1="Settings",V1="Language",q1="Select Language",Y1="Import Contacts",G1="Dashboard",X1="Dashboard",Z1="Inbox",Q1="Team",F1="Contacts",K1="Lists",I1="New Campaign",J1="History",W1="Templates",P1="Automations",eN="Media Library",tN="Settings",nN="Logout",aN="WHATSMS ORGANIZATION",sN="Logged in as {{name}}",iN="Import Contacts",rN="Click or drag CSV here",lN="Columns: name, phone, interests",oN="Cancel",cN="Importing...",uN="Import Contacts",dN="Import Complete",fN="Imported",gN="Skipped",hN="Errors:",mN="Import More",pN="Done",xN="Sent",yN="Delivered",bN="Read",vN="Replied",_N="Failed",NN="Cancel",wN="Save",jN="Delete",SN="Edit",kN="Loading...",CN="Dashboard",EN="Welcome back! Here's an overview of your campaigns.",zN="New Campaign",AN="Total Campaigns",TN="Messages Sent",MN="Total Contacts",DN="Contact Lists",ON="{{count}} active",LN="{{rate}}% delivery rate",RN="+{{count}} this week",$N="Active lists",HN="Message Trends",UN="Last 7 days",BN="Campaign Comparison",VN="Recent campaigns",qN="No campaigns yet",YN="Performance Overview",GN="Message delivery metrics",XN="Delivery Rate",ZN="Read Rate",QN="Recent Campaigns",FN="Latest updates",KN="View All Campaigns",IN="AI Performance Insights",JN="AI-powered analysis",WN="Analyze",PN="Analyze Again",ew="Analyzing...",tw="Start Analysis ",nw="Contacts",aw="Manage your audience and contact lists",sw="Fetch WhatsApp",iw="Import CSV",rw="Add Contact",lw="Active Lists",ow="New This Week",cw="Showing",uw="Search contacts...",dw="Filter by Tag",fw="Refresh",gw="Contact",hw="Phone",mw="Tags",pw="Lists",xw="Actions",yw="All Contacts",bw="Message Templates",vw="Design structured WhatsApp messages",_w="Create Template",Nw="No templates yet",ww="Edit Template",jw="New Template",Sw="Template Name",kw="Header (Optional)",Cw="Body Text",Ew="Footer (Optional)",zw="Preview",Aw="Save Template",Tw="Settings",Mw="Configure your WhatsApp Business API connection",Dw="Customize the look and feel",Ow="API Credentials",Lw="Enter your Meta Developer keys",Rw="Phone Number ID",$w="Found in WhatsApp API Setup",Hw="Access Token",Uw="Permanent or Temporary Access Token",Bw="WABA ID",Vw="WhatsApp Business Account ID (for reference)",qw="Save Credentials",Yw="Test Connectivity",Gw="Recipient Phone (e.g. 1555...)",Xw="Send Test",Zw="Sends a standard 'hello_world' template.",Qw="Note: If using a Meta Test Number, you can only send to Verified Numbers.",Fw="Note: Credentials must be saved before testing.",Kw="Webhook Setup",Iw="Connect to Meta for incoming messages",Jw="Callback URL",Ww="Verify Token",Pw="Editable",ej="Must match the Verify Token in Meta Dashboard",tj="Setup Instructions:",nj="Go to your App Dashboard in Meta Developers.",aj="Select WhatsApp > Configuration.",sj="Click Edit under Webhook.",ij="Paste the Callback URL and Verify Token above.",rj="Enable events:",lj="Configuration saved successfully!",oj="Failed to save configuration",cj="Please enter a phone number to test",uj="Connection Verified!",dj="Test Connection Failed",fj="Campaigns",gj="View and manage your marketing campaigns",hj="Active Now",mj="Recipients",pj="Progress",xj="No {{filter}} campaigns found",yj="Create your first campaign to get started",bj="Create Campaign",vj="Start sending this campaign now?",_j="Stop this campaign?",Nj="Delete this campaign?",wj="Draft",jj="Scheduled",Sj="In Progress",kj="Completed",Cj="Stopped",Ej="Automations",zj="Build automated message flows and chatbots",Aj="Create Flow",Tj="No automations yet",Mj="Create your first automated workflow to engage customers 24/7.",Dj="Get Started",Oj="runs",Lj="Active",Rj="Draft",$j="Are you sure? This will stop any active executions.",Hj="Failed to rename flow",Uj="Press Enter to save",Bj="Components",Vj="Messages",qj="Group Actions",Yj="Tag",Gj="Funnel",Xj="Others",Zj="Simple text",Qj="Media files",Fj="Interactive buttons",Kj="Interactive list",Ij="Template",Jj="Add to group",Wj="Remove from Group",Pj="Add Tags",e2="Remove Tags",t2="Add/Edit to Pipeline",n2="Remove from Pipeline",a2="Delay",s2="Configure Trigger",i2="Trigger Event",r2="Keywords",l2="Comma separated",o2="Save Flow",c2="Saving...",u2="New conversation",d2="Text contains specific keywords",f2="Contact has specific tags",g2="Contact has been affected to a pipeline",h2="Advanced Short response",m2="Team",p2="Add, edit, and delete accounts in your team",x2="Invite User",y2="Search Team",b2="Columns",v2="Name",_2="Email",N2="Role",w2="Active/Inactive",j2="Assignable",S2="Last updated",k2="Invite Team Member",C2="Send an invitation to join your team.",E2="Send Invitation",z2="Agent",A2="Manager",T2="Admin",M2="Are you sure you want to remove this team member?",D2="Failed to add team member",O2="Verified",L2="Unverified",R2="No team members found.",$2="Team Inbox",H2="Open",U2="Closed",B2="Loading conversations...",V2="No conversations found.",q2="Unassigned",Y2="Unknown Contact",G2="No messages yet",X2="Loading conversation...",Z2="Conversation not found",Q2="Back",F2="Mark Closed",K2="Reopen",I2="Type a message...",J2="Send",W2="Assignment",P2="Contact Info",eS="Name:",tS="Phone:",nS="Welcome Back",aS="Sign in to manage your campaigns",sS="Create Account",iS="Sign up to start managing campaigns",rS="Username",lS="Password",oS="Enter your username",cS="Enter your password",uS="Create a password (min 6 chars)",dS="Sign In",fS="Create Account",gS="Don't have an account?",hS="Already have an account?",mS="Create one",pS="Sign In",xS="Contact Lists",yS="Organize your contacts into targeted lists",bS="Create List",vS="Your Lists",_S="No lists yet. Create your first list!",NS="Create New List",wS="List Name",jS="Description",SS="e.g. VIP Customers",kS="Add Contacts",CS="From List",ES="Add Contacts to {{list}}",zS="Copy From Another List",AS="All contacts from the selected list will be copied to",TS="Copy Contacts",MS="List created successfully!",DS="List deleted",OS="Media Library",LS="Manage images, videos, and documents for your campaigns",RS="Upload File",$S="Uploading...",HS="Click to upload",US="Images, Videos, PDF (Max 16MB)",BS="Upload Media",VS="No media files yet",qS="Upload your first file",YS="AI Assistant",GS="Ask me anything about your {{type}}",XS="Hi! I can help you write, edit, or analyze your {{type}}.",ZS="Ask me anything...",QS="Analyze my text",FS="Make it shorter",KS="Add emojis",IS="Improve CTA",JS="Analyze my current text and give feedback",WS="Make my current text shorter and more concise",PS="Add relevant emojis to my current text",ek="Improve the call-to-action in my text",tk="Copy",nk="Copied!",ak="Apply",sk="Thinking...",ik="Compose",rk="Recipients",lk="Review",ok="Create Campaign",ck="Compose and send messages to your contacts",uk="Compose Message",dk="Campaign Name",fk="Use Template",gk="Message Content",hk="Use {{name}} or {{phone}} for personalization",mk="Schedule (Optional)",pk="Select Recipients",xk="Choose which contact lists will receive this campaign",yk="No contact lists found",bk="Create a list first",vk="Total Recipients:",_k="Review Campaign",Nk="Scheduled For",wk="Continue",jk="Campaign Created!",Sk="Your campaign has been successfully saved as a draft. What would you like to do next?",kk="Send Now",Ck="Go to Dashboard",Ek="Campaign started! Sending messages...",zk="File size must be less than 10MB",Ak="Internal Notes",Tk="Loading notes...",Mk="No notes yet.",Dk="Unknown User",Ok="Add an internal note...",Lk="Add Note",Rk="Sorry, I encountered an error. Please try again.",$k="e.g., January Newsletter",Hk="Attach Image or PDF",Uk="Creating...",Bk="Failed to start campaign: ",Vk="Failed to upload file",qk="Campaign Name *",Yk="characters",Gk="{{count}} contacts from {{lists}} lists",Xk={welcome:U1,settings:B1,language:V1,select_language:q1,import_contacts:Y1,dashboard:G1,nav_dashboard:X1,nav_inbox:Z1,nav_team:Q1,nav_contacts:F1,nav_lists:K1,nav_new_campaign:I1,nav_history:J1,nav_templates:W1,nav_automations:P1,nav_media_library:eN,nav_settings:tN,nav_logout:nN,organization_header:aN,logged_in_as:sN,import_contacts_title:iN,drag_drop_csv:rN,csv_columns:lN,cancel:oN,importing:cN,import_button:uN,import_complete:dN,imported_count:fN,skipped_count:gN,errors_label:hN,import_more:mN,done:pN,status_sent:xN,status_delivered:yN,status_read:bN,status_replied:vN,status_failed:_N,btn_cancel:NN,btn_save:wN,btn_delete:jN,btn_edit:SN,loading:kN,dashboard_title:CN,dashboard_subtitle:EN,btn_new_campaign:zN,stat_total_campaigns:AN,stat_messages_sent:TN,stat_total_contacts:MN,stat_contact_lists:DN,active_count:ON,delivery_rate:LN,this_week:RN,active_lists:$N,chart_message_trends:HN,last_7_days:UN,chart_campaign_comparison:BN,recent_campaigns:VN,no_campaigns_yet:qN,performance_overview:YN,performance_subtitle:GN,rate_delivery:XN,rate_read:ZN,recent_campaigns_title:QN,latest_updates:FN,btn_view_all_campaigns:KN,ai_insights_title:IN,ai_insights_subtitle:JN,btn_analyze:WN,btn_analyze_again:PN,status_analyzing:ew,btn_start_analysis:tw,contacts_title:nw,contacts_subtitle:aw,btn_fetch_whatsapp:sw,btn_import_csv:iw,btn_add_contact:rw,stat_active_lists:lw,stat_new_this_week:ow,label_showing:cw,placeholder_search_contacts:uw,btn_filter_tag:dw,btn_refresh:fw,col_contact:gw,col_phone:hw,col_tags:mw,col_lists:pw,col_actions:xw,label_all_contacts:yw,templates_title:bw,templates_subtitle:vw,btn_create_template:_w,no_templates:Nw,modal_edit_template:ww,modal_new_template:jw,label_template_name:Sw,label_header_optional:kw,label_body_text:Cw,label_footer_optional:Ew,label_preview:zw,btn_save_template:Aw,settings_title:Tw,settings_subtitle:Mw,section_appearance:Dw,section_credentials:Ow,section_credentials_subtitle:Lw,label_phone_id:Rw,hint_phone_id:$w,label_access_token:Hw,placeholder_access_token:Uw,label_waba_id:Bw,hint_waba_id:Vw,btn_save_credentials:qw,label_test_connectivity:Yw,placeholder_test_phone:Gw,btn_send_test:Xw,hint_test_message:Zw,hint_test_warning:Qw,hint_save_before_test:Fw,section_webhook:Kw,section_webhook_subtitle:Iw,label_callback_url:Jw,label_verify_token:Ww,label_editable:Pw,hint_verify_token:ej,label_setup_instructions:tj,instr_step_1:nj,instr_step_2:aj,instr_step_3:sj,instr_step_4:ij,instr_step_5:rj,success_config_saved:lj,error_config_save:oj,error_no_phone:cj,success_connection:uj,error_connection:dj,campaigns_title:fj,campaigns_subtitle:gj,stat_active_now:hj,stat_recipients:mj,label_progress:pj,no_campaigns_filter:xj,start_campaign_prompt:yj,btn_create_campaign:bj,confirm_send_campaign:vj,confirm_stop_campaign:_j,confirm_delete_campaign:Nj,status_draft:wj,status_scheduled:jj,status_in_progress:Sj,status_completed:kj,status_stopped:Cj,automations_title:Ej,automations_subtitle:zj,btn_create_flow:Aj,no_automations:Tj,no_automations_subtitle:Mj,btn_get_started:Dj,label_runs:Oj,tooltip_active:Lj,tooltip_draft:Rj,confirm_delete_flow:$j,error_rename_flow:Hj,placeholder_rename:Uj,flow_builder_components:Bj,cat_messages:Vj,cat_groups:qj,cat_tags:Yj,cat_funnel:Gj,cat_others:Xj,node_text:Zj,node_media:Qj,node_buttons:Fj,node_list:Kj,node_template:Ij,node_add_group:Jj,node_remove_group:Wj,node_add_tag:Pj,node_remove_tag:e2,node_add_pipeline:t2,node_remove_pipeline:n2,node_delay:a2,config_trigger:s2,label_trigger_event:i2,label_keywords:r2,hint_comma_separated:l2,btn_save_flow:o2,status_saving:c2,trigger_new_conversation:u2,trigger_keywords:d2,trigger_has_tags:f2,trigger_pipeline_update:g2,trigger_short_response:h2,team_title:m2,team_subtitle:p2,btn_invite_user:x2,placeholder_search_team:y2,btn_columns:b2,col_name:v2,col_email:_2,col_role:N2,col_active:w2,col_assignable:j2,col_last_updated:S2,modal_invite_title:k2,modal_invite_subtitle:C2,btn_send_invitation:E2,role_agent:z2,role_manager:A2,role_admin:T2,confirm_remove_member:M2,error_add_member:D2,tab_verified:O2,tab_unverified:L2,no_team_members:R2,inbox_title:$2,filter_open:H2,filter_closed:U2,loading_conversations:B2,no_conversations:V2,label_unassigned:q2,unknown_contact:Y2,no_messages_yet:G2,conversation_loading:X2,conversation_not_found:Z2,btn_back:Q2,btn_mark_closed:F2,btn_reopen:K2,placeholder_type_message:I2,btn_send:J2,label_assignment:W2,label_contact_info:P2,label_name:eS,label_phone:tS,login_title:nS,login_subtitle:aS,register_title:sS,register_subtitle:iS,label_username:rS,label_password:lS,placeholder_username:oS,placeholder_password:cS,placeholder_create_password:uS,btn_login:dS,btn_create_account:fS,text_no_account:gS,text_has_account:hS,link_create_one:mS,link_sign_in:pS,lists_title:xS,lists_subtitle:yS,btn_create_list:bS,header_your_lists:vS,no_lists:_S,modal_create_list:NS,label_list_name:wS,label_list_desc:jS,placeholder_list_name:SS,btn_add_contacts:kS,btn_from_list:CS,modal_add_contacts:ES,modal_copy_list:zS,text_copy_explanation:AS,btn_copy_contacts:TS,msg_list_created:MS,msg_list_deleted:DS,media_title:OS,media_subtitle:LS,btn_upload_file:RS,status_uploading:$S,text_drag_drop:HS,text_file_types:US,modal_upload_title:BS,no_media:VS,btn_upload_first:qS,ai_title:YS,ai_subtitle:GS,ai_welcome:XS,placeholder_ask_ai:ZS,action_analyze:QS,action_shorten:FS,action_emojis:KS,action_cta:IS,prompt_analyze:JS,prompt_shorten:WS,prompt_emojis:PS,prompt_cta:ek,btn_copy:tk,btn_copied:nk,btn_apply:ak,status_thinking:sk,step_compose:ik,step_recipients:rk,step_review:lk,builder_title:ok,builder_subtitle:ck,section_compose:uk,label_campaign_name:dk,label_use_template:fk,label_message_content:gk,hint_personalization:hk,label_schedule:mk,section_select_recipients:pk,text_select_recipients_subtitle:xk,no_lists_found:yk,link_create_list:bk,label_total_recipients:vk,section_review:_k,label_scheduled_for:Nk,btn_continue:wk,modal_success_title:jk,text_success_subtitle:Sk,btn_send_now:kk,btn_go_dashboard:Ck,msg_campaign_started:Ek,error_file_size:zk,notes_title:Ak,notes_loading:Tk,notes_empty:Mk,notes_unknown_user:Dk,notes_placeholder:Ok,btn_add_note:Lk,error_ai:Rk,placeholder_campaign_name:$k,tooltip_attach:Hk,status_creating:Uk,error_start_campaign:Bk,error_upload_failed:Vk,label_campaign_name_required:qk,text_characters:Yk,text_review_recipients:Gk},Zk="Bienvenue",Qk="Paramtres",Fk="Langue",Kk="Changer la langue",Ik="Importer des contacts",Jk="Tableau de bord",Wk="Tableau de bord",Pk="Bote de rception",eC="quipe",tC="Contacts",nC="Listes",aC="Nouvelle Campagne",sC="Historique",iC="Modles",rC="Automations",lC="Mdiathque",oC="Paramtres",cC="Dconnexion",uC="ORGANISATION WHATSMS",dC="Connect en tant que {{name}}",fC="Importer des contacts",gC="Cliquez ou glissez un CSV ici",hC="Colonnes : nom, tlphone, intrts",mC="Annuler",pC="Importation...",xC="Importer",yC="Importation termine",bC="Import",vC="Ignor",_C="Erreurs :",NC="Importer plus",wC="Termin",jC="Envoy",SC="Livr",kC="Lu",CC="Rpondu",EC="chou",zC="Annuler",AC="Enregistrer",TC="Supprimer",MC="Modifier",DC="Chargement...",OC="Tableau de bord",LC="Bon retour ! Voici un aperu de vos campagnes.",RC="Nouvelle Campagne",$C="Total des campagnes",HC="Messages envoys",UC="Total des contacts",BC="Listes de contacts",VC="{{count}} actives",qC="Taux de livraison {{rate}}%",YC="+{{count}} cette semaine",GC="Listes actives",XC="Tendances des messages",ZC="7 derniers jours",QC="Comparaison des campagnes",FC="Campagnes rcentes",KC="Aucune campagne pour le moment",IC="Aperu des performances",JC="Mtriques de livraison des messages",WC="Taux de livraison",PC="Taux de lecture",e4="Campagnes rcentes",t4="Dernires mises  jour",n4="Voir toutes les campagnes",a4="Analyses IA",s4="Analyse par IA",i4="Analyser",r4="Analyser  nouveau",l4="Analyse en cours...",o4="Lancer l'analyse ",c4="Contacts",u4="Grez votre audience et vos listes de contacts",d4="Rcuprer WhatsApp",f4="Importer CSV",g4="Ajouter un contact",h4="Listes actives",m4="Nouveaux cette semaine",p4="Affichage",x4="Rechercher des contacts...",y4="Filtrer par tiquette",b4="Actualiser",v4="Contact",_4="Tlphone",N4="tiquettes",w4="Listes",j4="Actions",S4="Tous les contacts",k4="Modles de messages",C4="Concevez des messages WhatsApp structurs",E4="Crer un modle",z4="Aucun modle pour le moment",A4="Modifier le modle",T4="Nouveau modle",M4="Nom du modle",D4="En-tte (Optionnel)",O4="Corps du texte",L4="Pied de page (Optionnel)",R4="Aperu",$4="Enregistrer le modle",H4="Paramtres",U4="Configurez votre connexion API WhatsApp Business",B4="Personnaliser l'apparence",V4="Identifiants API",q4="Entrez vos cls Meta Developer",Y4="ID du numro de tlphone",G4="Trouv dans la configuration API WhatsApp",X4="Jeton d'accs",Z4="Jeton d'accs permanent ou temporaire",Q4="ID WABA",F4="ID du compte WhatsApp Business (pour rfrence)",K4="Enregistrer les identifiants",I4="Tester la connectivit",J4="Tlphone du destinataire (ex: 1555...)",W4="Envoyer le test",P4="Envoie un modle standard 'hello_world'.",e5="Note : Si vous utilisez un numro de test Meta, vous ne pouvez envoyer qu'aux numros vrifis.",t5="Note : Les identifiants doivent tre enregistrs avant le test.",n5="Configuration Webhook",a5="Connecter  Meta pour les messages entrants",s5="URL de rappel",i5="Jeton de vrification",r5="Modifiable",l5="Doit correspondre au jeton de vrification dans le tableau de bord Meta",o5="Instructions de configuration :",c5="Allez dans votre tableau de bord d'application Meta Developers.",u5="Slectionnez WhatsApp > Configuration.",d5="Cliquez sur Modifier sous Webhook.",f5="Collez l'URL de rappel et le jeton de vrification ci-dessus.",g5="Activez les vnements :",h5="Configuration enregistre avec succs !",m5="chec de l'enregistrement de la configuration",p5="Veuillez entrer un numro de tlphone pour tester",x5="Connexion vrifie !",y5="chec du test de connexion",b5="Campagnes",v5="Voir et grer vos campagnes marketing",_5="Actives maintenant",N5="Destinataires",w5="Progression",j5="Aucune campagne {{filter}} trouve",S5="Crez votre premire campagne pour commencer",k5="Crer une campagne",C5="Commencer l'envoi de cette campagne maintenant ?",E5="Arrter cette campagne ?",z5="Supprimer cette campagne ?",A5="Brouillon",T5="Planifie",M5="En cours",D5="Termine",O5="Arrte",L5="Automatisations",R5="Crez des flux de messages automatiss et des chatbots",$5="Crer un flux",H5="Aucune automatisation pour le moment",U5="Crez votre premier flux de travail automatis pour engager les clients 24h/24 et 7j/7.",B5="Commencer",V5="excutions",q5="Actif",Y5="Brouillon",G5="tes-vous sr ? Cela arrtera toutes les excutions actives.",X5="chec du renommage du flux",Z5="Appuyez sur Entre pour enregistrer",Q5="Composants",F5="Messages",K5="Actions de groupe",I5="tiquette",J5="Entonnoir",W5="Autres",P5="Texte simple",e3="Fichiers multimdias",t3="Boutons interactifs",n3="Liste interactive",a3="Modle",s3="Ajouter au groupe",i3="Retirer du groupe",r3="Ajouter des tiquettes",l3="Retirer des tiquettes",o3="Ajouter/Modifier au pipeline",c3="Retirer du pipeline",u3="Dlai",d3="Configurer le dclencheur",f3="vnement dclencheur",g3="Mots-cls",h3="Spars par des virgules",m3="Enregistrer le flux",p3="Enregistrement...",x3="Nouvelle conversation",y3="Le texte contient des mots-cls spcifiques",b3="Le contact a des tiquettes spcifiques",v3="Le contact a t affect  un pipeline",_3="Rponse courte avance",N3="quipe",w3="Ajoutez, modifiez et supprimez des comptes dans votre quipe",j3="Inviter un utilisateur",S3="Rechercher une quipe",k3="Colonnes",C3="Nom",E3="E-mail",z3="Rle",A3="Actif/Inactif",T3="Assignable",M3="Dernire mise  jour",D3="Inviter un membre de l'quipe",O3="Envoyer une invitation  rejoindre votre quipe.",L3="Envoyer l'invitation",R3="Agent",$3="Manager",H3="Admin",U3="tes-vous sr de vouloir supprimer ce membre de l'quipe ?",B3="chec de l'ajout du membre de l'quipe",V3="Vrifi",q3="Non vrifi",Y3="Aucun membre de l'quipe trouv.",G3="Bote de rception d'quipe",X3="Ouvert",Z3="Ferm",Q3="Chargement des conversations...",F3="Aucune conversation trouve.",K3="Non assign",I3="Contact inconnu",J3="Aucun message pour le moment",W3="Chargement de la conversation...",P3="Conversation introuvable",eE="Retour",tE="Marquer comme ferm",nE="Rouvrir",aE="Tapez un message...",sE="Envoyer",iE="Affectation",rE="Informations de contact",lE="Nom :",oE="Tlphone :",cE="Bon retour",uE="Connectez-vous pour grer vos campagnes",dE="Crer un compte",fE="Inscrivez-vous pour commencer  grer vos campagnes",gE="Nom d'utilisateur",hE="Mot de passe",mE="Entrez votre nom d'utilisateur",pE="Entrez votre mot de passe",xE="Crez un mot de passe (min 6 car.)",yE="Se connecter",bE="Crer un compte",vE="Vous n'avez pas de compte ?",_E="Vous avez dj un compte ?",NE="Crer un compte",wE="Se connecter",jE="Listes de contacts",SE="Organisez vos contacts en listes cibles",kE="Crer une liste",CE="Vos listes",EE="Aucune liste. Crez votre premire liste !",zE="Crer une nouvelle liste",AE="Nom de la liste",TE="Description",ME="ex. Clients VIP",DE="Ajouter des contacts",OE="Depuis une liste",LE="Ajouter des contacts  {{list}}",RE="Copier depuis une autre liste",$E="Tous les contacts de la liste slectionne seront copis vers",HE="Copier les contacts",UE="Liste cre avec succs !",BE="Liste supprime",VE="Mdiathque",qE="Grez les images, vidos et documents de vos campagnes",YE="Tlcharger un fichier",GE="Tlchargement...",XE="Cliquez pour tlcharger",ZE="Images, Vidos, PDF (Max 16 Mo)",QE="Tlcharger un mdia",FE="Aucun fichier mdia",KE="Tlchargez votre premier fichier",IE="Assistant IA",JE="Posez-moi des questions sur votre {{type}}",WE="Bonjour ! Je peux vous aider  rdiger, modifier ou analyser votre {{type}}.",PE="Demandez-moi n'importe quoi...",ez="Analyser mon texte",tz="Raccourcir",nz="Ajouter des mojis",az="Amliorer le CTA",sz="Analyse mon texte actuel et donne-moi un retour",iz="Rends mon texte plus court et concis",rz="Ajoute des mojis pertinents",lz="Amliore l'appel  l'action",oz="Copier",cz="Copi !",uz="Appliquer",dz="Rflexion...",fz="Rdiger",gz="Destinataires",hz="Vrifier",mz="Crer une campagne",pz="Rdigez et envoyez des messages  vos contacts",xz="Rdiger le message",yz="Nom de la campagne",bz="Utiliser un modle",vz="Contenu du message",_z="Utilisez {{name}} ou {{phone}} pour la personnalisation",Nz="Planifier (Optionnel)",wz="Slectionner les destinataires",jz="Choisissez les listes de contacts qui recevront cette campagne",Sz="Aucune liste de contacts trouve",kz="Crez d'abord une liste",Cz="Total des destinataires :",Ez="Vrifier la campagne",zz="Planifi pour",Az="Continuer",Tz="Campagne cre !",Mz="Votre campagne a t enregistre comme brouillon. Que souhaitez-vous faire ?",Dz="Envoyer maintenant",Oz="Aller au tableau de bord",Lz="Campagne lance ! Envoi des messages...",Rz="La taille du fichier doit tre infrieure  10 Mo",$z="Notes internes",Hz="Chargement des notes...",Uz="Pas encore de notes.",Bz="Utilisateur inconnu",Vz="Ajouter une note interne...",qz="Ajouter une note",Yz="Dsol, j'ai rencontr une erreur. Veuillez ressayer.",Gz="ex : Newsletter de janvier",Xz="Joindre une image ou un PDF",Zz="Cration...",Qz="chec du lancement de la campagne : ",Fz="chec du tlchargement du fichier",Kz="Nom de la campagne *",Iz="caractres",Jz="{{count}} contacts de {{lists}} listes",Wz={welcome:Zk,settings:Qk,language:Fk,select_language:Kk,import_contacts:Ik,dashboard:Jk,nav_dashboard:Wk,nav_inbox:Pk,nav_team:eC,nav_contacts:tC,nav_lists:nC,nav_new_campaign:aC,nav_history:sC,nav_templates:iC,nav_automations:rC,nav_media_library:lC,nav_settings:oC,nav_logout:cC,organization_header:uC,logged_in_as:dC,import_contacts_title:fC,drag_drop_csv:gC,csv_columns:hC,cancel:mC,importing:pC,import_button:xC,import_complete:yC,imported_count:bC,skipped_count:vC,errors_label:_C,import_more:NC,done:wC,status_sent:jC,status_delivered:SC,status_read:kC,status_replied:CC,status_failed:EC,btn_cancel:zC,btn_save:AC,btn_delete:TC,btn_edit:MC,loading:DC,dashboard_title:OC,dashboard_subtitle:LC,btn_new_campaign:RC,stat_total_campaigns:$C,stat_messages_sent:HC,stat_total_contacts:UC,stat_contact_lists:BC,active_count:VC,delivery_rate:qC,this_week:YC,active_lists:GC,chart_message_trends:XC,last_7_days:ZC,chart_campaign_comparison:QC,recent_campaigns:FC,no_campaigns_yet:KC,performance_overview:IC,performance_subtitle:JC,rate_delivery:WC,rate_read:PC,recent_campaigns_title:e4,latest_updates:t4,btn_view_all_campaigns:n4,ai_insights_title:a4,ai_insights_subtitle:s4,btn_analyze:i4,btn_analyze_again:r4,status_analyzing:l4,btn_start_analysis:o4,contacts_title:c4,contacts_subtitle:u4,btn_fetch_whatsapp:d4,btn_import_csv:f4,btn_add_contact:g4,stat_active_lists:h4,stat_new_this_week:m4,label_showing:p4,placeholder_search_contacts:x4,btn_filter_tag:y4,btn_refresh:b4,col_contact:v4,col_phone:_4,col_tags:N4,col_lists:w4,col_actions:j4,label_all_contacts:S4,templates_title:k4,templates_subtitle:C4,btn_create_template:E4,no_templates:z4,modal_edit_template:A4,modal_new_template:T4,label_template_name:M4,label_header_optional:D4,label_body_text:O4,label_footer_optional:L4,label_preview:R4,btn_save_template:$4,settings_title:H4,settings_subtitle:U4,section_appearance:B4,section_credentials:V4,section_credentials_subtitle:q4,label_phone_id:Y4,hint_phone_id:G4,label_access_token:X4,placeholder_access_token:Z4,label_waba_id:Q4,hint_waba_id:F4,btn_save_credentials:K4,label_test_connectivity:I4,placeholder_test_phone:J4,btn_send_test:W4,hint_test_message:P4,hint_test_warning:e5,hint_save_before_test:t5,section_webhook:n5,section_webhook_subtitle:a5,label_callback_url:s5,label_verify_token:i5,label_editable:r5,hint_verify_token:l5,label_setup_instructions:o5,instr_step_1:c5,instr_step_2:u5,instr_step_3:d5,instr_step_4:f5,instr_step_5:g5,success_config_saved:h5,error_config_save:m5,error_no_phone:p5,success_connection:x5,error_connection:y5,campaigns_title:b5,campaigns_subtitle:v5,stat_active_now:_5,stat_recipients:N5,label_progress:w5,no_campaigns_filter:j5,start_campaign_prompt:S5,btn_create_campaign:k5,confirm_send_campaign:C5,confirm_stop_campaign:E5,confirm_delete_campaign:z5,status_draft:A5,status_scheduled:T5,status_in_progress:M5,status_completed:D5,status_stopped:O5,automations_title:L5,automations_subtitle:R5,btn_create_flow:$5,no_automations:H5,no_automations_subtitle:U5,btn_get_started:B5,label_runs:V5,tooltip_active:q5,tooltip_draft:Y5,confirm_delete_flow:G5,error_rename_flow:X5,placeholder_rename:Z5,flow_builder_components:Q5,cat_messages:F5,cat_groups:K5,cat_tags:I5,cat_funnel:J5,cat_others:W5,node_text:P5,node_media:e3,node_buttons:t3,node_list:n3,node_template:a3,node_add_group:s3,node_remove_group:i3,node_add_tag:r3,node_remove_tag:l3,node_add_pipeline:o3,node_remove_pipeline:c3,node_delay:u3,config_trigger:d3,label_trigger_event:f3,label_keywords:g3,hint_comma_separated:h3,btn_save_flow:m3,status_saving:p3,trigger_new_conversation:x3,trigger_keywords:y3,trigger_has_tags:b3,trigger_pipeline_update:v3,trigger_short_response:_3,team_title:N3,team_subtitle:w3,btn_invite_user:j3,placeholder_search_team:S3,btn_columns:k3,col_name:C3,col_email:E3,col_role:z3,col_active:A3,col_assignable:T3,col_last_updated:M3,modal_invite_title:D3,modal_invite_subtitle:O3,btn_send_invitation:L3,role_agent:R3,role_manager:$3,role_admin:H3,confirm_remove_member:U3,error_add_member:B3,tab_verified:V3,tab_unverified:q3,no_team_members:Y3,inbox_title:G3,filter_open:X3,filter_closed:Z3,loading_conversations:Q3,no_conversations:F3,label_unassigned:K3,unknown_contact:I3,no_messages_yet:J3,conversation_loading:W3,conversation_not_found:P3,btn_back:eE,btn_mark_closed:tE,btn_reopen:nE,placeholder_type_message:aE,btn_send:sE,label_assignment:iE,label_contact_info:rE,label_name:lE,label_phone:oE,login_title:cE,login_subtitle:uE,register_title:dE,register_subtitle:fE,label_username:gE,label_password:hE,placeholder_username:mE,placeholder_password:pE,placeholder_create_password:xE,btn_login:yE,btn_create_account:bE,text_no_account:vE,text_has_account:_E,link_create_one:NE,link_sign_in:wE,lists_title:jE,lists_subtitle:SE,btn_create_list:kE,header_your_lists:CE,no_lists:EE,modal_create_list:zE,label_list_name:AE,label_list_desc:TE,placeholder_list_name:ME,btn_add_contacts:DE,btn_from_list:OE,modal_add_contacts:LE,modal_copy_list:RE,text_copy_explanation:$E,btn_copy_contacts:HE,msg_list_created:UE,msg_list_deleted:BE,media_title:VE,media_subtitle:qE,btn_upload_file:YE,status_uploading:GE,text_drag_drop:XE,text_file_types:ZE,modal_upload_title:QE,no_media:FE,btn_upload_first:KE,ai_title:IE,ai_subtitle:JE,ai_welcome:WE,placeholder_ask_ai:PE,action_analyze:ez,action_shorten:tz,action_emojis:nz,action_cta:az,prompt_analyze:sz,prompt_shorten:iz,prompt_emojis:rz,prompt_cta:lz,btn_copy:oz,btn_copied:cz,btn_apply:uz,status_thinking:dz,step_compose:fz,step_recipients:gz,step_review:hz,builder_title:mz,builder_subtitle:pz,section_compose:xz,label_campaign_name:yz,label_use_template:bz,label_message_content:vz,hint_personalization:_z,label_schedule:Nz,section_select_recipients:wz,text_select_recipients_subtitle:jz,no_lists_found:Sz,link_create_list:kz,label_total_recipients:Cz,section_review:Ez,label_scheduled_for:zz,btn_continue:Az,modal_success_title:Tz,text_success_subtitle:Mz,btn_send_now:Dz,btn_go_dashboard:Oz,msg_campaign_started:Lz,error_file_size:Rz,notes_title:$z,notes_loading:Hz,notes_empty:Uz,notes_unknown_user:Bz,notes_placeholder:Vz,btn_add_note:qz,error_ai:Yz,placeholder_campaign_name:Gz,tooltip_attach:Xz,status_creating:Zz,error_start_campaign:Qz,error_upload_failed:Fz,label_campaign_name_required:Kz,text_characters:Iz,text_review_recipients:Jz};_t.use(Ip).use(x1).init({resources:{en:{translation:Xk},fr:{translation:Wz}},lng:"fr",fallbackLng:"fr",interpolation:{escapeValue:!1}});const Pz="/api";class eA{constructor(){this.baseUrl=Pz,this.token=localStorage.getItem("token")}setToken(s){this.token=s,s?localStorage.setItem("token",s):localStorage.removeItem("token")}getToken(){return this.token}async request(s,l={}){const o=`${this.baseUrl}${s}`,c={"Content-Type":"application/json",...l.headers};this.token&&(c.Authorization=`Bearer ${this.token}`);const d={...l,headers:c};l.body&&typeof l.body=="object"&&!(l.body instanceof FormData)&&(d.body=JSON.stringify(l.body)),l.body instanceof FormData&&delete c["Content-Type"];const f=await fetch(o,d);if(f.status===401&&!s.includes("/auth/login"))throw this.setToken(null),window.location.href="/login",new Error("Session expired. Please login again.");const h=await f.text();let p;try{p=h?JSON.parse(h):{}}catch(m){throw console.error("API Error:",m,"Response was not JSON:",h),new Error(`Server Error (${f.status}): Please check browser console for details.`)}if(!f.ok)throw new Error(p.message||p.error||"An error occurred");return p}async get(s,l={}){return this.request(s,{...l,method:"GET"})}async post(s,l,o={}){return this.request(s,{...o,method:"POST",body:l})}async put(s,l,o={}){return this.request(s,{...o,method:"PUT",body:l})}async delete(s,l={}){return this.request(s,{...l,method:"DELETE"})}async login(s,l){const o=await this.request("/auth/login",{method:"POST",body:{username:s,password:l}});return this.setToken(o.token),o}async register(s,l){const o=await this.request("/auth/register",{method:"POST",body:{username:s,password:l}});return this.setToken(o.token),o}async getMe(){return this.request("/auth/me")}logout(){this.setToken(null)}async getContacts(s={}){const l=new URLSearchParams(s).toString();return this.request(`/contacts${l?`?${l}`:""}`)}async getContactStats(){return this.request("/contacts/stats")}async getContactTags(){return this.request("/contacts/tags")}async getContact(s){return this.request(`/contacts/${s}`)}async createContact(s){return this.request("/contacts",{method:"POST",body:s})}async updateContact(s,l){return this.request(`/contacts/${s}`,{method:"PUT",body:l})}async deleteContact(s){return this.request(`/contacts/${s}`,{method:"DELETE"})}async importContacts(s){const l=new FormData;return l.append("file",s),this.request("/contacts/import",{method:"POST",body:l})}async fetchWhatsAppContacts(){return this.request("/contacts/fetch-whatsapp",{method:"POST"})}async uploadFile(s){const l=new FormData;return l.append("file",s),this.request("/upload",{method:"POST",body:l})}async getLists(){return this.request("/lists")}async getList(s){return this.request(`/lists/${s}`)}async createList(s){return this.request("/lists",{method:"POST",body:s})}async updateList(s,l){return this.request(`/lists/${s}`,{method:"PUT",body:l})}async deleteList(s){return this.request(`/lists/${s}`,{method:"DELETE"})}async addContactsToList(s,l){return this.request(`/lists/${s}/contacts`,{method:"POST",body:{contactIds:l}})}async removeContactFromList(s,l){return this.request(`/lists/${s}/contacts/${l}`,{method:"DELETE"})}async getCampaigns(s={}){const l=new URLSearchParams(s).toString();return this.request(`/campaigns${l?`?${l}`:""}`)}async getCampaignStats(){return this.request("/campaigns/stats")}async getCampaign(s){return this.request(`/campaigns/${s}`)}async getCampaignRecipients(s,l={}){const o=new URLSearchParams(l).toString();return this.request(`/campaigns/${s}/recipients${o?`?${o}`:""}`)}async createCampaign(s){return this.request("/campaigns",{method:"POST",body:s})}async updateCampaign(s,l){return this.request(`/campaigns/${s}`,{method:"PUT",body:l})}async deleteCampaign(s){return this.request(`/campaigns/${s}`,{method:"DELETE"})}async sendCampaign(s){return this.request(`/campaigns/${s}/send`,{method:"POST"})}async stopCampaign(s){return this.request(`/campaigns/${s}/stop`,{method:"POST"})}async getTemplates(){return this.request("/templates")}async getTemplate(s){return this.request(`/templates/${s}`)}async createTemplate(s){return this.request("/templates",{method:"POST",body:s})}async updateTemplate(s,l){return this.request(`/templates/${s}`,{method:"PUT",body:l})}async deleteTemplate(s){return this.request(`/templates/${s}`,{method:"DELETE"})}async getMedia(s={}){const l=new URLSearchParams(s).toString();return this.request(`/media${l?`?${l}`:""}`)}async uploadMedia(s){const l=new FormData;return l.append("file",s),this.request("/media/upload",{method:"POST",body:l})}async deleteMedia(s){return this.request(`/media/${s}`,{method:"DELETE"})}async getTeamMembers(){return this.request("/team")}async addTeamMember(s){return this.request("/team",{method:"POST",body:s})}async updateTeamMember(s,l){return this.request(`/team/${s}`,{method:"PUT",body:l})}async deleteTeamMember(s){return this.request(`/team/${s}`,{method:"DELETE"})}async getConversations(s={}){const l=new URLSearchParams(s).toString();return this.request(`/conversations${l?`?${l}`:""}`)}async getConversation(s){return this.request(`/conversations/${s}`)}async sendMessage(s,l){return this.request(`/conversations/${s}/messages`,{method:"POST",body:l})}async assignConversation(s,l){return this.request(`/conversations/${s}/assign`,{method:"PUT",body:{assignedToId:l}})}async updateConversationStatus(s,l){return this.request(`/conversations/${s}/status`,{method:"PUT",body:{status:l}})}async getNotes(s){return this.request(`/notes/contact/${s}`)}async addNote(s){return this.request("/notes",{method:"POST",body:s})}}const ce=new eA,Jp=A.createContext(null),Wd=()=>{const n=A.useContext(Jp);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},tA=({children:n})=>{const[s,l]=A.useState(null),[o,c]=A.useState(!0),[d,f]=A.useState(null);A.useEffect(()=>{(async()=>{if(ce.getToken())try{const N=await ce.getMe();l(N.user)}catch(N){console.error("Auth check failed:",N),ce.logout()}c(!1)})()},[]);const y={user:s,loading:o,error:d,isAuthenticated:!!s,login:async(x,v)=>{f(null);try{const N=await ce.login(x,v);return l(N.user),N}catch(N){throw f(N.message),N}},register:async(x,v)=>{f(null);try{const N=await ce.register(x,v);return l(N.user),N}catch(N){throw f(N.message),N}},logout:()=>{ce.logout(),l(null)}};return i.jsx(Jp.Provider,{value:y,children:n})},Wp=A.createContext(null),Oo=()=>{const n=A.useContext(Wp);if(!n)throw new Error("useToast must be used within a ToastProvider");return n},nA=({id:n,type:s,message:l,onClose:o})=>{const c={success:i.jsx(Ad,{className:"text-blue-500",size:20}),error:i.jsx(Ep,{className:"text-red-500",size:20}),warning:i.jsx(Ca,{className:"text-amber-500",size:20}),info:i.jsx(e_,{className:"text-emerald-500",size:20})},d={success:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",error:"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",warning:"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800",info:"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800"};return i.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-xl border shadow-lg backdrop-blur-sm animate-slide-up ${d[s]}`,style:{minWidth:"300px"},children:[c[s],i.jsx("p",{className:"flex-1 text-sm font-medium text-gray-800 dark:text-gray-200",children:l}),i.jsx("button",{onClick:()=>o(n),className:"p-1 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg transition-colors",children:i.jsx(At,{size:16,className:"text-gray-400"})})]})},aA=({children:n})=>{const[s,l]=A.useState([]),o=A.useCallback(f=>{l(h=>h.filter(p=>p.id!==f))},[]),c=A.useCallback((f,h,p=4e3)=>{const m=Date.now()+Math.random();l(y=>[...y,{id:m,type:f,message:h}]),setTimeout(()=>{o(m)},p)},[o]),d={success:f=>c("success",f),error:f=>c("error",f),warning:f=>c("warning",f),info:f=>c("info",f)};return i.jsxs(Wp.Provider,{value:d,children:[n,i.jsx("div",{className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-2",children:s.map(f=>i.jsx(nA,{id:f.id,type:f.type,message:f.message,onClose:o},f.id))})]})},Pp=A.createContext(),ex=()=>A.useContext(Pp),sA=({children:n})=>{const[s,l]=A.useState(()=>typeof window<"u"?localStorage.getItem("theme")==="dark"||!localStorage.getItem("theme")&&window.matchMedia("(prefers-color-scheme: dark)").matches:!1);A.useEffect(()=>{s?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[s]);const o=()=>l(!s);return i.jsx(Pp.Provider,{value:{isDark:s,toggleTheme:o},children:n})},iA=({children:n})=>{const{isAuthenticated:s,loading:l}=Wd(),o=Bp();return l?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background-light dark:bg-background-dark",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 border-4 border-primary/30 border-t-primary rounded-full animate-spin"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading..."})]})}):s?n:i.jsx(z_,{to:"/login",state:{from:o},replace:!0})},rA=()=>{const{isDark:n}=ex(),[s,l]=A.useState(!1),{user:o,logout:c}=Wd(),d=is(),{t:f}=ut(),h=()=>{c(),d("/login")},p=[{to:"/",icon:zp,label:f("nav_dashboard"),end:!0},{to:"/inbox",icon:t_,label:f("nav_inbox")},{to:"/team",icon:n_,label:f("nav_team")},{to:"/contacts",icon:hn,label:f("nav_contacts")},{to:"/lists",icon:Fd,label:f("nav_lists")},{to:"/campaigns/new",icon:a_,label:f("nav_new_campaign")},{to:"/campaigns",icon:s_,label:f("nav_history"),end:!0},{to:"/templates",icon:kr,label:f("nav_templates")},{to:"/automations",icon:yo,label:f("nav_automations")},{to:"/media",icon:mr,label:f("nav_media_library")},{to:"/settings",icon:Td,label:f("nav_settings")}],m=p.filter(x=>!["/team","/settings"].includes(x.to)),y=p.filter(x=>["/team","/settings"].includes(x.to));return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-background-dark text-gray-900 dark:text-gray-100 transition-colors duration-300",children:[i.jsx("aside",{className:"w-72 bg-[#F3F5FA] dark:bg-surface-dark border-r border-gray-200/50 dark:border-gray-800/80 flex-col hidden md:flex font-sans",children:i.jsxs("div",{className:"p-4 flex flex-col h-full",children:[i.jsx("div",{className:"mb-6 mx-2",children:i.jsx("div",{className:"bg-emerald-100/50 dark:bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 px-4 py-3 rounded-2xl flex items-center justify-center font-bold text-sm tracking-wide shadow-sm backdrop-blur-sm",children:f("organization_header")})}),i.jsxs("div",{className:"bg-white dark:bg-gray-800/50 rounded-[2rem] p-4 shadow-sm flex-1 overflow-y-auto mb-4",children:[i.jsx("div",{className:"mb-4 px-2 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Menu"}),i.jsx("nav",{className:"space-y-1",children:m.map((x,v)=>i.jsxs(ao,{to:x.to,end:x.end,className:({isActive:N})=>`flex items-center gap-3 px-4 py-3 rounded-2xl transition-all duration-200 font-medium group ${N?"bg-emerald-50 dark:bg-emerald-500/20 text-emerald-600 dark:text-emerald-300 shadow-sm":"text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-gray-800 dark:hover:text-gray-200"}`,style:{animationDelay:`${v*.05}s`},children:[i.jsx(x.icon,{size:20,className:`flex-shrink-0 transition-colors ${({isActive:N})=>N?"text-emerald-500":"text-gray-400 group-hover:text-gray-600"}`,strokeWidth:1.8}),i.jsx("span",{children:x.label})]},x.to))})]}),i.jsxs("div",{className:"px-2 space-y-1 mb-2",children:[y.map(x=>i.jsxs(ao,{to:x.to,className:({isActive:v})=>`flex items-center gap-3 px-4 py-3 rounded-2xl transition-all duration-200 font-medium group ${v?"text-emerald-600 dark:text-emerald-300":"text-gray-500 dark:text-gray-400 hover:bg-emerald-50/50 dark:hover:bg-gray-800/50 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[i.jsx(x.icon,{size:20,className:"flex-shrink-0",strokeWidth:1.8}),i.jsx("span",{children:x.label})]},x.to)),i.jsxs("button",{onClick:h,className:"flex items-center gap-3 w-full px-4 py-3 text-gray-500 dark:text-gray-400 hover:bg-red-50 dark:hover:bg-red-900/10 hover:text-red-600 dark:hover:text-red-400 rounded-2xl transition-all duration-200 font-medium group",children:[i.jsx(i0,{size:20,className:"group-hover:text-red-500 transition-colors",strokeWidth:1.8}),i.jsx("span",{children:f("nav_logout")})]})]}),i.jsx("div",{className:"px-6 py-2",children:i.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-600",children:o?f("logged_in_as",{name:o.username}):""})})]})}),s&&i.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 md:hidden animate-fade-in",onClick:()=>l(!1)}),i.jsx("aside",{className:`fixed inset-y-0 left-0 w-80 bg-[#F3F5FA] dark:bg-surface-dark border-r border-gray-200 dark:border-gray-800 flex flex-col z-50 transform transition-transform duration-300 md:hidden ${s?"translate-x-0":"-translate-x-full"}`,children:i.jsxs("div",{className:"p-4 flex flex-col h-full",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6 mx-2",children:[i.jsx("div",{className:"bg-emerald-100/50 dark:bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 px-4 py-2 rounded-xl font-bold text-sm tracking-wide",children:"WHATSMS"}),i.jsx("button",{onClick:()=>l(!1),className:"p-2 rounded-xl hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500",children:i.jsx(At,{size:20})})]}),i.jsx("div",{className:"bg-white dark:bg-gray-800/50 rounded-[2rem] p-4 shadow-sm flex-1 overflow-y-auto mb-4",children:i.jsx("nav",{className:"space-y-1",children:m.map(x=>i.jsxs(ao,{to:x.to,end:x.end,onClick:()=>l(!1),className:({isActive:v})=>`flex items-center gap-3 px-4 py-3 rounded-2xl transition-all duration-200 font-medium ${v?"bg-emerald-50 dark:bg-emerald-500/20 text-emerald-600 dark:text-emerald-300 shadow-sm":"text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[i.jsx(x.icon,{size:20,className:"flex-shrink-0",strokeWidth:1.8}),i.jsx("span",{children:x.label})]},x.to))})}),i.jsxs("div",{className:"px-2 space-y-1 mb-2",children:[y.map(x=>i.jsxs(ao,{to:x.to,onClick:()=>l(!1),className:({isActive:v})=>`flex items-center gap-3 px-4 py-3 rounded-2xl transition-all duration-200 font-medium group ${v?"text-emerald-600 dark:text-emerald-300":"text-gray-500 dark:text-gray-400 hover:bg-emerald-50/50 dark:hover:bg-gray-800/50 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[i.jsx(x.icon,{size:20,className:"flex-shrink-0",strokeWidth:1.8}),i.jsx("span",{children:x.label})]},x.to)),i.jsxs("button",{onClick:()=>{h(),l(!1)},className:"flex items-center gap-3 w-full px-4 py-3 text-gray-500 dark:text-gray-400 hover:bg-red-50 dark:hover:bg-red-900/10 hover:text-red-600 rounded-2xl transition-all duration-200 font-medium",children:[i.jsx(i0,{size:20,strokeWidth:1.8}),i.jsx("span",{children:f("nav_logout")})]})]})]})}),i.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden bg-white dark:bg-background-dark relative z-0",children:[i.jsxs("header",{className:"md:hidden bg-white dark:bg-surface-dark border-b border-gray-200 dark:border-gray-800 px-4 py-3.5 flex items-center justify-between shadow-soft",children:[i.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[i.jsx("span",{className:"w-8 h-8 bg-emerald-600 rounded-lg flex items-center justify-center text-white text-xs",children:"WS"}),i.jsx("span",{className:"text-gray-800 dark:text-white",children:"WhatsSMS"})]}),i.jsx("div",{className:"flex gap-1",children:i.jsx("button",{className:"p-2.5 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400 transition-colors",onClick:()=>l(!0),children:i.jsx(i_,{size:22,strokeWidth:1.75})})})]}),i.jsx("div",{className:"flex-1 overflow-auto p-4 md:p-8",children:i.jsx(A_,{})})]})]})},lA=()=>{const{t:n}=ut(),[s,l]=A.useState(null),[o,c]=A.useState(null),[d,f]=A.useState([]),[h,p]=A.useState(!0),[m,y]=A.useState(null),x=is(),v=()=>{const w=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];if(!(o&&o.totalMessagesSent>0))return w.map(V=>({name:V,sent:0,delivered:0,read:0}));const C=o.totalMessagesSent||0,$=o.totalDelivered||0,O=o.totalRead||0;return w.map((V,G)=>{const L=(G+1)/28;return{name:V,sent:Math.round(C*L),delivered:Math.round($*L),read:Math.round(O*L)}})},N=()=>d.slice(0,5).map(w=>({name:w.name.length>10?w.name.substring(0,10)+"...":w.name,delivered:w.statsDelivered||0,read:w.statsRead||0,replied:w.statsReplied||0})),S=async()=>{try{p(!0),y(null);const[w,_,C]=await Promise.all([ce.getContactStats(),ce.getCampaignStats(),ce.getCampaigns({limit:5})]);l(w),c(_),f(C.campaigns||[])}catch(w){y(w.message),console.error("Failed to fetch dashboard data:",w)}finally{p(!1)}};A.useEffect(()=>{S()},[]);const T=[{label:n("stat_total_campaigns"),value:o?.totalCampaigns??"-",change:n("active_count",{count:o?.activeCampaigns??0}),trend:o?.activeCampaigns>0?"up":"neutral",icon:r_},{label:n("stat_messages_sent"),value:o?.totalMessagesSent?.toLocaleString()??"-",change:n("delivery_rate",{rate:o?.deliveryRate??0}),trend:"up",icon:Ao},{label:n("stat_total_contacts"),value:s?.total?.toLocaleString()??"-",change:n("this_week",{count:s?.thisWeek??0}),trend:s?.thisWeek>0?"up":"neutral",icon:hn},{label:n("stat_contact_lists"),value:s?.listsCount??"-",change:n("active_lists"),trend:"neutral",icon:pr}],E=()=>d.slice(0,4).map(w=>({id:w.id,action:`Campaign "${w.name}" ${w.status.toLowerCase().replace("_"," ")}`,time:new Date(w.updatedAt).toLocaleDateString(),type:w.status==="COMPLETED"?"success":w.status==="IN_PROGRESS"?"info":"pending"})),z=({active:w,payload:_,label:C})=>w&&_&&_.length?i.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-xl shadow-lg border border-gray-100 dark:border-gray-800",children:[i.jsx("p",{className:"text-sm font-medium mb-2",children:C}),_.map(($,O)=>i.jsxs("p",{className:"text-xs",style:{color:$.color},children:[$.name,": ",$.value.toLocaleString()]},O))]}):null;return h?i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("div",{className:"h-8 w-48 bg-gray-200 dark:bg-gray-800 rounded-lg skeleton"}),i.jsx("div",{className:"h-4 w-64 bg-gray-200 dark:bg-gray-800 rounded-lg mt-2 skeleton"})]})}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[1,2,3,4].map(w=>i.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80",children:[i.jsx("div",{className:"h-12 w-12 bg-gray-200 dark:bg-gray-800 rounded-xl skeleton"}),i.jsx("div",{className:"h-4 w-24 bg-gray-200 dark:bg-gray-800 rounded mt-4 skeleton"}),i.jsx("div",{className:"h-8 w-16 bg-gray-200 dark:bg-gray-800 rounded mt-2 skeleton"})]},w))})]}):m?i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[i.jsx("p",{className:"text-red-500 mb-4",children:m}),i.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-xl",children:[i.jsx(To,{size:16}),n("btn_refresh")||"Retry"]})]}):i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n("dashboard_title")}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:n("dashboard_subtitle")})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:()=>x("/contacts"),className:"flex items-center gap-2 px-4 py-2.5 bg-white dark:bg-surface-dark border border-gray-200 dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-200 text-sm font-medium shadow-soft card-hover",children:[i.jsx(ei,{size:18,className:"icon-gray",strokeWidth:1.75}),i.jsx("span",{children:n("import_contacts")||"Import"})]}),i.jsxs("button",{onClick:()=>x("/campaigns/new"),className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[i.jsx(ka,{size:18,strokeWidth:2}),i.jsx("span",{children:n("btn_new_campaign")})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:T.map((w,_)=>i.jsxs("div",{className:`stat-card bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 card-hover animate-slide-up stagger-${_+1}`,style:{opacity:0},children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl bg-gray-100 dark:bg-gray-800/80 flex items-center justify-center",children:i.jsx(w.icon,{size:22,className:"icon-gray",strokeWidth:1.75})}),w.trend==="up"&&i.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-2 py-1 rounded-full",children:[i.jsx(r0,{size:12}),i.jsx("span",{children:"Up"})]})]}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium mb-1",children:w.label}),i.jsx("p",{className:"text-3xl font-bold tracking-tight",children:w.value}),i.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:w.change})]},_))}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 animate-slide-up stagger-5",style:{opacity:0},children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center",children:i.jsx(l0,{size:20,className:"text-white",strokeWidth:1.75})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:n("chart_message_trends")}),i.jsx("p",{className:"text-xs text-gray-400",children:n("last_7_days")})]})]})}),i.jsx("div",{className:"h-64",children:i.jsx(Wm,{width:"100%",height:"100%",children:i.jsxs(Qv,{data:v(),margin:{top:10,right:10,left:-20,bottom:0},children:[i.jsxs("defs",{children:[i.jsxs("linearGradient",{id:"colorSent",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),i.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]}),i.jsxs("linearGradient",{id:"colorDelivered",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),i.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]}),i.jsxs("linearGradient",{id:"colorRead",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.3}),i.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]})]}),i.jsx(Pm,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),i.jsx(e0,{dataKey:"name",tick:{fontSize:12},stroke:"#9CA3AF"}),i.jsx(t0,{tick:{fontSize:12},stroke:"#9CA3AF"}),i.jsx(n0,{content:i.jsx(z,{})}),i.jsx(fd,{type:"monotone",dataKey:"sent",stroke:"#10b981",strokeWidth:2,fillOpacity:1,fill:"url(#colorSent)",name:"Sent"}),i.jsx(fd,{type:"monotone",dataKey:"delivered",stroke:"#3b82f6",strokeWidth:2,fillOpacity:1,fill:"url(#colorDelivered)",name:"Delivered"}),i.jsx(fd,{type:"monotone",dataKey:"read",stroke:"#8b5cf6",strokeWidth:2,fillOpacity:1,fill:"url(#colorRead)",name:"Read"})]})})}),i.jsxs("div",{className:"flex justify-center gap-6 mt-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),i.jsx("span",{className:"text-xs text-gray-500",children:n("status_sent")})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),i.jsx("span",{className:"text-xs text-gray-500",children:n("status_delivered")})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),i.jsx("span",{className:"text-xs text-gray-500",children:n("status_read")})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 animate-slide-up stagger-6",style:{opacity:0},children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center",children:i.jsx(Md,{size:20,className:"text-white",strokeWidth:1.75})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:n("chart_campaign_comparison")}),i.jsx("p",{className:"text-xs text-gray-400",children:n("recent_campaigns")})]})]})}),i.jsx("div",{className:"h-64",children:d.length>0?i.jsx(Wm,{width:"100%",height:"100%",children:i.jsxs(Fv,{data:N(),margin:{top:10,right:10,left:-20,bottom:0},children:[i.jsx(Pm,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),i.jsx(e0,{dataKey:"name",tick:{fontSize:10},stroke:"#9CA3AF"}),i.jsx(t0,{tick:{fontSize:12},stroke:"#9CA3AF"}),i.jsx(n0,{content:i.jsx(z,{})}),i.jsx(gd,{dataKey:"delivered",fill:"#10b981",radius:[4,4,0,0],name:"Delivered"}),i.jsx(gd,{dataKey:"read",fill:"#3b82f6",radius:[4,4,0,0],name:"Read"}),i.jsx(gd,{dataKey:"replied",fill:"#f59e0b",radius:[4,4,0,0],name:"Replied"})]})}):i.jsx("div",{className:"h-full flex items-center justify-center",children:i.jsx("p",{className:"text-gray-400 text-sm",children:n("no_campaigns_yet")})})}),i.jsxs("div",{className:"flex justify-center gap-6 mt-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),i.jsx("span",{className:"text-xs text-gray-500",children:n("status_delivered")})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),i.jsx("span",{className:"text-xs text-gray-500",children:n("status_read")})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),i.jsx("span",{className:"text-xs text-gray-500",children:n("status_replied")})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 animate-slide-up stagger-7",style:{opacity:0},children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-800/80 flex items-center justify-center",children:i.jsx(r0,{size:20,className:"icon-gray",strokeWidth:1.75})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:n("performance_overview")}),i.jsx("p",{className:"text-xs text-gray-400",children:n("performance_subtitle")})]})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"text-center p-4 bg-emerald-50 dark:bg-emerald-900/10 rounded-xl border border-emerald-100 dark:border-emerald-900/20",children:[i.jsx("p",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:o?.totalDelivered?.toLocaleString()??0}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n("status_delivered")})]}),i.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/10 rounded-xl border border-blue-100 dark:border-blue-900/20",children:[i.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:o?.totalRead?.toLocaleString()??0}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n("status_read")})]}),i.jsxs("div",{className:"text-center p-4 bg-amber-50 dark:bg-amber-900/10 rounded-xl border border-amber-100 dark:border-amber-900/20",children:[i.jsx("p",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:o?.totalReplied?.toLocaleString()??0}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n("status_replied")})]}),i.jsxs("div",{className:"text-center p-4 bg-red-50 dark:bg-red-900/10 rounded-xl border border-red-100 dark:border-red-900/20",children:[i.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:o?.totalFailed?.toLocaleString()??0}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n("status_failed")})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[i.jsx("span",{className:"text-gray-500",children:n("rate_delivery")}),i.jsxs("span",{className:"font-semibold text-emerald-600",children:[o?.deliveryRate??0,"%"]})]}),i.jsx("div",{className:"h-3 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-emerald-600 rounded-full transition-all duration-700 ease-out",style:{width:`${o?.deliveryRate??0}%`}})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[i.jsx("span",{className:"text-gray-500",children:n("rate_read")}),i.jsxs("span",{className:"font-semibold text-blue-600",children:[o?.readRate??0,"%"]})]}),i.jsx("div",{className:"h-3 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-700 ease-out",style:{width:`${o?.readRate??0}%`}})})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 animate-slide-up stagger-8",style:{opacity:0},children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-800/80 flex items-center justify-center",children:i.jsx(l0,{size:20,className:"icon-gray",strokeWidth:1.75})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:n("recent_campaigns_title")}),i.jsx("p",{className:"text-xs text-gray-400",children:n("latest_updates")})]})]}),i.jsx("div",{className:"space-y-4",children:E().length>0?E().map(w=>i.jsxs("div",{className:"flex items-start gap-3 group",children:[i.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${w.type==="success"?"bg-emerald-500":w.type==="pending"?"bg-amber-500":"bg-primary"}`}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 truncate group-hover:text-gray-900 dark:group-hover:text-white transition-colors",children:w.action}),i.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:w.time})]})]},w.id)):i.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:n("no_campaigns_yet")})}),i.jsxs("button",{onClick:()=>x("/campaigns"),className:"w-full mt-6 py-2.5 text-sm text-primary font-medium hover:bg-emerald-50 dark:hover:bg-emerald-900/10 rounded-lg transition-colors flex items-center justify-center gap-1",children:[n("btn_view_all_campaigns"),i.jsx(l_,{size:14})]})]})]})]})},oA=({onClose:n,onSuccess:s})=>{const{t:l}=ut(),[o,c]=A.useState(!1),[d,f]=A.useState(null),[h,p]=A.useState(!1),[m,y]=A.useState(null),[x,v]=A.useState(null),N=A.useCallback(w=>{w.preventDefault(),w.stopPropagation(),w.type==="dragenter"||w.type==="dragover"?c(!0):w.type==="dragleave"&&c(!1)},[]),S=A.useCallback(w=>{if(w.preventDefault(),w.stopPropagation(),c(!1),w.dataTransfer.files&&w.dataTransfer.files[0]){const _=w.dataTransfer.files[0];_.type==="text/csv"||_.name.endsWith(".csv")?(f(_),y(null)):y("Please upload a valid CSV file.")}},[]),T=w=>{w.preventDefault(),w.target.files&&w.target.files[0]&&(f(w.target.files[0]),y(null))},E=async()=>{if(d){p(!0),y(null);try{const w=await ce.importContacts(d);v(w),s&&s()}catch(w){y(w.message||"Failed to upload file")}finally{p(!1)}}},z=()=>{f(null),v(null),y(null)};return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-white dark:bg-surface-dark w-full max-w-md rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-800 overflow-hidden animate-slide-up",children:[i.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-800 flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-bold",children:l("import_contacts_title")}),i.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:i.jsx(At,{size:20,className:"text-gray-500"})})]}),i.jsx("div",{className:"p-6",children:x?i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center mx-auto mb-4 animate-scale-in",children:i.jsx(gn,{size:32,strokeWidth:3})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:l("import_complete")}),i.jsxs("div",{className:"flex justify-center gap-8 my-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:x.imported}),i.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:l("imported_count")})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:x.skipped}),i.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:l("skipped_count")})]})]}),x.errors&&x.errors.length>0&&i.jsxs("div",{className:"text-left bg-gray-50 dark:bg-gray-800/50 rounded-lg p-3 mb-6 max-h-32 overflow-y-auto text-xs text-gray-600 dark:text-gray-400",children:[i.jsx("p",{className:"font-medium mb-1",children:l("errors_label")}),i.jsx("ul",{className:"list-disc pl-4 space-y-1",children:x.errors.map((w,_)=>i.jsx("li",{children:w},_))})]}),i.jsxs("div",{className:"flex justify-center gap-3",children:[i.jsx("button",{onClick:z,className:"px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:l("import_more")}),i.jsx("button",{onClick:n,className:"px-6 py-2 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:l("done")})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:`relative border-2 border-dashed rounded-xl p-8 text-center transition-all duration-200 ${o?"border-primary bg-emerald-50 dark:bg-emerald-900/10":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onDragEnter:N,onDragLeave:N,onDragOver:N,onDrop:S,children:[i.jsx("input",{type:"file",accept:".csv",onChange:T,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:h}),d?i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center mb-3",children:i.jsx(di,{size:24})}),i.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:d.name}),i.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[(d.size/1024).toFixed(1)," KB"]})]}):i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-800 text-gray-400 rounded-full flex items-center justify-center mb-3",children:i.jsx(ei,{size:24})}),i.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:l("drag_drop_csv")}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:l("csv_columns")})]})]}),m&&i.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg flex items-center gap-2",children:[i.jsx(Ca,{size:16}),i.jsx("span",{children:m})]}),i.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[i.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:l("cancel")}),i.jsx("button",{onClick:E,disabled:!d||h,className:`flex items-center gap-2 px-6 py-2 rounded-xl text-sm font-medium text-white transition-all ${!d||h?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed":"btn-primary shadow-glow hover:-translate-y-0.5"}`,children:h?i.jsxs(i.Fragment,{children:[i.jsx(Gn,{size:16,className:"animate-spin"}),l("importing")]}):l("import_button")})]})]})})]})})},cA=()=>{const{t:n}=ut(),s=Oo(),[l,o]=A.useState([]),[c,d]=A.useState(null),[f,h]=A.useState([]),[p,m]=A.useState(""),[y,x]=A.useState(!0),[v,N]=A.useState(null),[S,T]=A.useState(""),[E,z]=A.useState({page:1,limit:20,total:0,totalPages:1}),[w,_]=A.useState(!1),[C,$]=A.useState(!1),[O,V]=A.useState(!1),[G,L]=A.useState({name:"",phone:"",interests:"",tags:""}),[F,q]=A.useState(!1),[Z,te]=A.useState(!1),M=A.useRef(null),U=ai.useCallback(async(Q=1,W="",se="")=>{try{x(!0),N(null);const le={page:Q,limit:E.limit};W&&(le.search=W),se&&(le.tag=se);const[de,be,me]=await Promise.all([ce.getContacts(le),ce.getContactStats(),ce.getContactTags()]);o(de.contacts||[]),z(de.pagination||{page:1,limit:20,total:0,totalPages:1}),d(be),h(me.tags||[])}catch(le){N(le.message)}finally{x(!1)}},[E.limit]);A.useEffect(()=>{U()},[U]),A.useEffect(()=>(M.current&&clearTimeout(M.current),M.current=setTimeout(()=>{U(1,S,p)},300),()=>clearTimeout(M.current)),[S,p,U]);const j=async Q=>{Q.preventDefault(),q(!0);try{const W=G.interests.split(",").map(le=>le.trim()).filter(le=>le),se=G.tags.split(",").map(le=>le.trim()).filter(le=>le);await ce.createContact({name:G.name,phone:G.phone,interests:W,tags:se}),_(!1),L({name:"",phone:"",interests:"",tags:""}),U(E.page,S,p),s.success("Contact added successfully!")}catch(W){s.error(W.message)}finally{q(!1)}},D=async Q=>{if(confirm("Are you sure you want to delete this contact?"))try{await ce.deleteContact(Q),U(E.page,S,p),s.success("Contact deleted")}catch(W){s.error(W.message)}},H=Q=>{Q>=1&&Q<=E.totalPages&&U(Q,S,p)},Y=async()=>{te(!0);try{const Q=await ce.fetchWhatsAppContacts();U(1,S,p),Q.imported>0?s.success(`Imported ${Q.imported} new contacts from WhatsApp!`):s.info(Q.message||"No new contacts to import")}catch(Q){s.error(Q.message||"Failed to fetch WhatsApp contacts")}finally{te(!1)}},ee=Q=>{m(Q),V(!1)};return i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n("contacts_title")}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:n("contacts_subtitle")})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:Y,disabled:Z,className:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl text-sm font-medium shadow-glow card-hover disabled:opacity-50",children:[Z?i.jsx(Gn,{size:18,className:"animate-spin"}):i.jsx(Ap,{size:18}),i.jsx("span",{children:n(Z?"loading":"btn_fetch_whatsapp")})]}),i.jsxs("button",{onClick:()=>$(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-white dark:bg-surface-dark border border-gray-200 dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-200 text-sm font-medium shadow-soft card-hover",children:[i.jsx(ei,{size:18,className:"icon-gray",strokeWidth:1.75}),i.jsx("span",{children:n("btn_import_csv")})]}),i.jsxs("button",{onClick:()=>_(!0),className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[i.jsx(ka,{size:18,strokeWidth:2}),i.jsx("span",{children:n("btn_add_contact")})]})]})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:n("stat_total_contacts"),value:c?.total?.toLocaleString()??"-"},{label:n("stat_active_lists"),value:c?.listsCount??"-"},{label:n("stat_new_this_week"),value:c?.thisWeek??"-"},{label:n("label_showing"),value:`${l.length} of ${E.total}`}].map((Q,W)=>i.jsxs("div",{className:"bg-white dark:bg-surface-dark px-4 py-3 rounded-xl border border-gray-100 dark:border-gray-800/80 shadow-soft",children:[i.jsx("p",{className:"text-xs text-gray-400 font-medium",children:Q.label}),i.jsx("p",{className:"text-xl font-bold mt-0.5",children:Q.value})]},W))}),i.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 overflow-hidden",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800/80 flex flex-col md:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Kd,{className:"absolute left-4 top-1/2 -translate-y-1/2 icon-gray",size:18,strokeWidth:1.75}),i.jsx("input",{type:"text",placeholder:n("placeholder_search_contacts"),value:S,onChange:Q=>T(Q.target.value),className:"w-full pl-11 pr-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 focus:border-primary outline-none transition-all text-sm text-gray-900 dark:text-white placeholder:text-gray-400"})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>V(!O),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl transition-colors text-sm font-medium border ${p?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-600":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:[i.jsx(Mo,{size:16,strokeWidth:1.75}),i.jsx("span",{children:p||n("btn_filter_tag")}),i.jsx(Cr,{size:14})]}),O&&i.jsxs("div",{className:"absolute top-full left-0 mt-2 w-48 bg-white dark:bg-surface-dark rounded-xl shadow-lg border border-gray-100 dark:border-gray-800 z-50 py-2 max-h-60 overflow-y-auto",children:[i.jsx("button",{onClick:()=>ee(""),className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800 ${p?"text-gray-700 dark:text-gray-300":"text-emerald-600 font-medium"}`,children:n("label_all_contacts")}),f.map(Q=>i.jsx("button",{onClick:()=>ee(Q),className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800 ${p===Q?"text-emerald-600 font-medium":"text-gray-700 dark:text-gray-300"}`,children:Q},Q)),f.length===0&&i.jsx("p",{className:"px-4 py-2 text-xs text-gray-400",children:"No tags created yet"})]})]}),i.jsxs("button",{onClick:()=>U(E.page,S,p),className:"flex items-center gap-2 px-4 py-2.5 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-sm font-medium border border-gray-200 dark:border-gray-700",children:[i.jsx(To,{size:16,className:"icon-gray",strokeWidth:1.75}),i.jsx("span",{children:n("btn_refresh")})]})]}),v&&i.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800 flex items-center gap-3 text-red-700 dark:text-red-400",children:[i.jsx(Ca,{size:18}),i.jsx("span",{children:v}),i.jsx("button",{onClick:()=>U(),className:"ml-auto text-sm underline",children:"Retry"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-background-dark text-gray-500 dark:text-gray-400 text-xs uppercase tracking-wider font-semibold",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-4 font-semibold",children:n("col_contact")}),i.jsx("th",{className:"px-6 py-4 font-semibold",children:n("col_phone")}),i.jsx("th",{className:"px-6 py-4 font-semibold",children:n("col_tags")}),i.jsx("th",{className:"px-6 py-4 font-semibold",children:n("col_lists")}),i.jsx("th",{className:"px-6 py-4 text-right font-semibold",children:n("col_actions")})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800/80",children:y?[...Array(5)].map((Q,W)=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"h-10 w-40 bg-gray-200 dark:bg-gray-800 rounded skeleton"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"h-4 w-32 bg-gray-200 dark:bg-gray-800 rounded skeleton"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"h-6 w-20 bg-gray-200 dark:bg-gray-800 rounded skeleton"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"h-6 w-24 bg-gray-200 dark:bg-gray-800 rounded skeleton"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"h-4 w-8 bg-gray-200 dark:bg-gray-800 rounded skeleton ml-auto"})})]},W)):l.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-400",children:S?"No contacts found matching your search":"No contacts yet. Add your first contact!"})}):l.map(Q=>i.jsxs("tr",{className:"table-row-hover group",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center text-primary font-semibold text-sm",children:Q.name.split(" ").map(W=>W[0]).join("").slice(0,2)}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:Q.name}),i.jsxs("p",{className:"text-xs text-gray-400",children:["ID: ",Q.id]})]})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("span",{className:"text-gray-600 dark:text-gray-300 font-mono text-sm flex items-center gap-2",children:[i.jsx(o_,{size:14,className:"icon-gray",strokeWidth:1.75}),Q.phone]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[(Q.tags||[]).slice(0,3).map((W,se)=>i.jsx("span",{className:"px-2.5 py-1 text-xs rounded-lg bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 font-medium",children:W},se)),(Q.tags||[]).length>3&&i.jsxs("span",{className:"px-2 py-1 text-xs text-gray-400",children:["+",Q.tags.length-3]}),(Q.tags||[]).length===0&&i.jsx("span",{className:"text-xs text-gray-400",children:"No tags"})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[(Q.lists||[]).slice(0,2).map((W,se)=>i.jsx("span",{className:"px-2.5 py-1 text-xs rounded-lg bg-gray-100 dark:bg-gray-800/80 text-gray-600 dark:text-gray-300 font-medium",children:W.name},se)),(Q.lists||[]).length>2&&i.jsxs("span",{className:"px-2 py-1 text-xs text-gray-400",children:["+",Q.lists.length-2]})]})}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsx("button",{onClick:()=>D(Q.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:i.jsx(At,{size:18,strokeWidth:1.75})})})]},Q.id))})]})}),E.totalPages>1&&i.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 dark:border-gray-800/80 flex items-center justify-between",children:[i.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",(E.page-1)*E.limit+1,"-",Math.min(E.page*E.limit,E.total)," of ",E.total]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:()=>H(E.page-1),disabled:E.page<=1,className:"px-3 py-1.5 text-sm rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 transition-colors disabled:opacity-50",children:"Previous"}),[...Array(Math.min(5,E.totalPages))].map((Q,W)=>{const se=W+1;return i.jsx("button",{onClick:()=>H(se),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${E.page===se?"bg-primary text-white":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500"}`,children:se},se)}),i.jsx("button",{onClick:()=>H(E.page+1),disabled:E.page>=E.totalPages,className:"px-3 py-1.5 text-sm rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 transition-colors disabled:opacity-50",children:"Next"})]})]})]}),w&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl shadow-xl max-w-md w-full p-6 animate-slide-up",style:{opacity:0,animationDelay:"0s"},children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold",children:"Add Contact"}),i.jsx("button",{onClick:()=>_(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:i.jsx(At,{size:20})})]}),i.jsxs("form",{onSubmit:j,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Name *"}),i.jsx("input",{type:"text",value:G.name,onChange:Q=>L({...G,name:Q.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none text-gray-900 dark:text-white placeholder:text-gray-400",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone *"}),i.jsx("input",{type:"text",value:G.phone,onChange:Q=>L({...G,phone:Q.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"+1234567890",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Interests (comma-separated)"}),i.jsx("input",{type:"text",value:G.interests,onChange:Q=>L({...G,interests:Q.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"marketing, sales"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tags (comma-separated)"}),i.jsx("input",{type:"text",value:G.tags,onChange:Q=>L({...G,tags:Q.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"VIP, Hot Lead"}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Use tags to segment your contacts"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>_(!1),className:"flex-1 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl font-medium",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:F,className:"flex-1 py-2.5 btn-primary text-white rounded-xl font-medium disabled:opacity-50",children:F?"Saving...":"Add Contact"})]})]})]})}),C&&i.jsx(oA,{onClose:()=>$(!1),onSuccess:()=>{U(1,"")}})]})},uA=()=>{const{t:n}=ut(),s=Oo(),[l,o]=A.useState([]),[c,d]=A.useState(!0),[f,h]=A.useState(null),[p,m]=A.useState([]),[y,x]=A.useState(!1),[v,N]=A.useState(!1),[S,T]=A.useState(!1),[E,z]=A.useState(!1),[w,_]=A.useState({name:"",description:""}),[C,$]=A.useState([]),[O,V]=A.useState([]),[G,L]=A.useState(""),[F,q]=A.useState(!1),[Z,te]=A.useState([]),[M,U]=A.useState(""),[j,D]=A.useState(""),[H,Y]=A.useState(!1),ee=ai.useCallback(async()=>{try{d(!0);const re=await ce.getLists();o(re.lists||[])}catch{s.error("Failed to load lists")}finally{d(!1)}},[s]),Q=ai.useCallback(async re=>{try{x(!0);const ge=await ce.getList(re);m(ge.members||[])}catch{s.error("Failed to load list members")}finally{x(!1)}},[s]),W=async()=>{try{const[re,ge]=await Promise.all([ce.getContacts({limit:500}),ce.getContactTags()]);$(re.contacts||[]),V(ge.tags||[])}catch{s.error("Failed to load contacts")}};A.useEffect(()=>{ee()},[ee]),A.useEffect(()=>{f&&Q(f.id)},[f,Q]);const se=async re=>{re.preventDefault(),Y(!0);try{await ce.createList(w),s.success(n("msg_list_created")),N(!1),_({name:"",description:""}),ee()}catch(ge){s.error(ge.message)}finally{Y(!1)}},le=async re=>{if(confirm(n("confirm_delete_list")||"Are you sure you want to delete this list?"))try{await ce.deleteList(re),s.success(n("msg_list_deleted")),f?.id===re&&(h(null),m([])),ee()}catch(ge){s.error(ge.message)}},de=async()=>{if(Z.length===0){s.warning("Select at least one contact");return}Y(!0);try{const re=await ce.addContactsToList(f.id,Z);s.success(`Added ${re.added} contacts, ${re.skipped} already in list`),T(!1),te([]),Q(f.id),ee()}catch(re){s.error(re.message)}finally{Y(!1)}},be=async()=>{if(!j){s.warning("Select a source list");return}Y(!0);try{const ge=(await ce.getList(j)).members.map(it=>it.id);if(ge.length===0){s.info("Source list is empty"),Y(!1);return}const Oe=await ce.addContactsToList(f.id,ge);s.success(`Added ${Oe.added} contacts from list, ${Oe.skipped} already present`),z(!1),D(""),Q(f.id),ee()}catch(re){s.error(re.message)}finally{Y(!1)}},me=async re=>{try{await ce.removeContactFromList(f.id,re),s.success("Contact removed from list"),Q(f.id),ee()}catch(ge){s.error(ge.message)}},oe=()=>{W(),te([]),U(""),L(""),q(!1),T(!0)},fe=re=>{te(ge=>ge.includes(re)?ge.filter(Oe=>Oe!==re):[...ge,re])},je=C.filter(re=>{const ge=re.name.toLowerCase().includes(M.toLowerCase())||re.phone.includes(M),Oe=!G||re.tags&&re.tags.includes(G);return ge&&Oe}),Ne=je.filter(re=>!p.some(ge=>ge.id===re.id)),ye=()=>{const re=Ne.map(ge=>ge.id);te(ge=>{const Oe=new Set(ge);return re.forEach(it=>Oe.add(it)),Array.from(Oe)})},_e=()=>{te([])},Ce=l.filter(re=>re.id!==f?.id);return i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n("lists_title")}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:n("lists_subtitle")})]}),i.jsxs("button",{onClick:()=>N(!0),className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[i.jsx(ka,{size:18,strokeWidth:2}),i.jsx("span",{children:n("btn_create_list")})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-soft border border-gray-100 dark:border-gray-800/80 overflow-hidden",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800/80 flex items-center justify-between",children:[i.jsx("h3",{className:"font-semibold",children:n("header_your_lists")}),i.jsx("button",{onClick:ee,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:i.jsx(To,{size:16,className:"icon-gray"})})]}),i.jsx("div",{className:"max-h-96 overflow-y-auto",children:c?i.jsx("div",{className:"p-4 space-y-3",children:[1,2,3].map(re=>i.jsx("div",{className:"h-16 bg-gray-100 dark:bg-gray-800 rounded-xl skeleton"},re))}):l.length===0?i.jsx("p",{className:"p-4 text-center text-gray-400",children:n("no_lists")}):i.jsx("div",{className:"p-2",children:l.map(re=>i.jsxs("button",{onClick:()=>h(re),className:`w-full text-left p-3 rounded-xl transition-all mb-1 ${f?.id===re.id?"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800":"hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center",children:i.jsx(hn,{size:18,className:"text-primary"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:re.name}),i.jsxs("p",{className:"text-xs text-gray-400",children:[re.memberCount," contacts"]})]})]}),i.jsx("button",{onClick:ge=>{ge.stopPropagation(),le(re.id)},className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg opacity-0 group-hover:opacity-100 transition-all",children:i.jsx(sn,{size:14})})]}),re.description&&i.jsx("p",{className:"text-xs text-gray-400 mt-1 pl-13",children:re.description})]},re.id))})})]}),i.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-surface-dark rounded-2xl shadow-soft border border-gray-100 dark:border-gray-800/80 overflow-hidden",children:f?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800/80 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg",children:f.name}),i.jsxs("p",{className:"text-xs text-gray-400",children:[f.memberCount," contacts"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>z(!0),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-xl transition-colors",children:[i.jsx(hn,{size:16}),n("btn_from_list")]}),i.jsxs("button",{onClick:oe,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium btn-primary text-white rounded-xl",children:[i.jsx(o0,{size:16}),n("btn_add_contacts")]})]})]}),i.jsx("div",{className:"max-h-96 overflow-y-auto",children:y?i.jsx("div",{className:"p-4 space-y-2",children:[1,2,3,4].map(re=>i.jsx("div",{className:"h-14 bg-gray-100 dark:bg-gray-800 rounded-xl skeleton"},re))}):p.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-60 text-gray-400",children:[i.jsx(o0,{size:40,strokeWidth:1,className:"mb-3 opacity-50"}),i.jsx("p",{children:"This list is empty"}),i.jsx("p",{className:"text-sm",children:"Add contacts to get started"})]}):i.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-800/80",children:p.map(re=>i.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center text-primary font-semibold text-sm",children:re.name.split(" ").map(ge=>ge[0]).join("").slice(0,2)}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:re.name}),i.jsx("p",{className:"text-xs text-gray-400",children:re.phone})]})]}),i.jsx("button",{onClick:()=>me(re.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:i.jsx(At,{size:16})})]},re.id))})})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-80 text-gray-400",children:[i.jsx(hn,{size:48,strokeWidth:1,className:"mb-4 opacity-50"}),i.jsx("p",{className:"text-lg font-medium",children:n("modal_add_contacts").replace("{{list}}","list")}),i.jsx("p",{className:"text-sm",children:"Choose a list from the sidebar to view its contacts"})]})})]}),v&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-xl max-w-md w-full p-6 animate-slide-up",style:{opacity:0},children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold",children:n("modal_create_list")}),i.jsx("button",{onClick:()=>N(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:i.jsx(At,{size:20})})]}),i.jsxs("form",{onSubmit:se,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium mb-2",children:[n("label_list_name")," *"]}),i.jsx("input",{type:"text",value:w.name,onChange:re=>_({...w,name:re.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none",placeholder:n("placeholder_list_name"),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:n("label_list_desc")}),i.jsx("textarea",{value:w.description,onChange:re=>_({...w,description:re.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none resize-none",rows:3,placeholder:n("placeholder_list_name").replace("e.g.","")})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>N(!1),className:"flex-1 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl font-medium",children:n("btn_cancel")||"Cancel"}),i.jsx("button",{type:"submit",disabled:H,className:"flex-1 py-2.5 btn-primary text-white rounded-xl font-medium disabled:opacity-50",children:H?"Creating...":n("btn_create_list")})]})]})]})}),S&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-xl max-w-lg w-full p-6 animate-slide-up max-h-[80vh] flex flex-col",style:{opacity:0},children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold",children:n("modal_add_contacts").replace("{{list}}",f?.name)}),i.jsx("button",{onClick:()=>T(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:i.jsx(At,{size:20})})]}),i.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:[Z.length," selected"]}),i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Kd,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),i.jsx("input",{type:"text",placeholder:n("placeholder_search_contacts"),value:M,onChange:re=>U(re.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none"})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>q(!F),className:`flex items-center gap-2 px-3 py-2.5 rounded-xl border transition-colors ${G?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-600":"border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[i.jsx(Mo,{size:16}),i.jsx("span",{className:"text-sm",children:G||n("col_tags")||"Tag"}),i.jsx(Cr,{size:14})]}),F&&i.jsxs("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white dark:bg-surface-dark rounded-xl shadow-lg border border-gray-100 dark:border-gray-800 z-50 py-2 max-h-48 overflow-y-auto",children:[i.jsx("button",{onClick:()=>{L(""),q(!1)},className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800 ${G?"":"text-emerald-600 font-medium"}`,children:"All Tags"}),O.map(re=>i.jsx("button",{onClick:()=>{L(re),q(!1)},className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800 ${G===re?"text-emerald-600 font-medium":""}`,children:re},re)),O.length===0&&i.jsx("p",{className:"px-4 py-2 text-xs text-gray-400",children:"No tags"})]})]})]}),i.jsxs("div",{className:"flex gap-2 mb-3",children:[i.jsxs("button",{onClick:ye,disabled:Ne.length===0,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium bg-blue-50 dark:bg-blue-900/20 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Tp,{size:14}),"Add All (",Ne.length,")"]}),Z.length>0&&i.jsxs("button",{onClick:_e,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:[i.jsx(At,{size:14}),"Clear"]}),i.jsxs("span",{className:"ml-auto text-xs text-gray-400",children:[n("label_showing")," ",je.length," contacts"]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto border border-gray-100 dark:border-gray-800 rounded-xl divide-y divide-gray-100 dark:divide-gray-800/80 max-h-60",children:je.length===0?i.jsx("p",{className:"p-4 text-center text-gray-400",children:"No contacts found"}):je.map(re=>{const ge=Z.includes(re.id),Oe=p.some(it=>it.id===re.id);return i.jsxs("button",{onClick:()=>!Oe&&fe(re.id),disabled:Oe,className:`w-full flex items-center justify-between p-3 transition-colors ${Oe?"opacity-50 cursor-not-allowed":ge?"bg-emerald-50 dark:bg-emerald-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center text-primary text-xs font-semibold",children:re.name.split(" ").map(it=>it[0]).join("").slice(0,2)}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"font-medium text-sm",children:re.name}),i.jsx("p",{className:"text-xs text-gray-400",children:re.phone})]})]}),Oe?i.jsx("span",{className:"text-xs text-gray-400",children:"Already in list"}):ge?i.jsx("div",{className:"w-5 h-5 rounded-full bg-emerald-500 flex items-center justify-center",children:i.jsx(gn,{size:12,className:"text-white"})}):i.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300"})]},re.id)})}),i.jsxs("div",{className:"flex gap-3 pt-4 mt-4 border-t border-gray-100 dark:border-gray-800",children:[i.jsx("button",{onClick:()=>T(!1),className:"flex-1 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl font-medium",children:n("btn_cancel")||"Cancel"}),i.jsx("button",{onClick:de,disabled:H||Z.length===0,className:"flex-1 py-2.5 btn-primary text-white rounded-xl font-medium disabled:opacity-50",children:H?"Adding...":`${n("btn_add_contacts")} (${Z.length})`})]})]})}),E&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-xl max-w-md w-full p-6 animate-slide-up",style:{opacity:0},children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold",children:n("modal_copy_list")}),i.jsx("button",{onClick:()=>z(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:i.jsx(At,{size:20})})]}),i.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:[n("text_copy_explanation")," ",i.jsx("strong",{children:f?.name})]}),i.jsx("div",{className:"space-y-2 mb-6",children:Ce.length===0?i.jsx("p",{className:"text-center text-gray-400 py-4",children:"No other lists available"}):Ce.map(re=>i.jsxs("button",{onClick:()=>D(re.id.toString()),className:`w-full flex items-center justify-between p-3 rounded-xl transition-all ${j===re.id.toString()?"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800":"border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(hn,{size:18,className:"text-gray-400"}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"font-medium",children:re.name}),i.jsxs("p",{className:"text-xs text-gray-400",children:[re.memberCount," contacts"]})]})]}),j===re.id.toString()&&i.jsx("div",{className:"w-5 h-5 rounded-full bg-emerald-500 flex items-center justify-center",children:i.jsx(gn,{size:12,className:"text-white"})})]},re.id))}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>z(!1),className:"flex-1 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl font-medium",children:n("btn_cancel")||"Cancel"}),i.jsx("button",{onClick:be,disabled:H||!j,className:"flex-1 py-2.5 btn-primary text-white rounded-xl font-medium disabled:opacity-50",children:H?"Copying...":n("btn_copy_contacts")})]})]})})]})},dA=()=>{const{t:n}=ut(),[s,l]=A.useState(""),[o,c]=A.useState(""),[d,f]=A.useState(!1),[h,p]=A.useState(""),[m,y]=A.useState(!1),x=is(),v=Bp(),{login:N,register:S,isAuthenticated:T}=Wd();ai.useEffect(()=>{if(T){const z=v.state?.from?.pathname||"/";x(z,{replace:!0})}},[T,x,v]);const E=async z=>{z.preventDefault(),p(""),f(!0);try{m?await S(s,o):await N(s,o);const w=v.state?.from?.pathname||"/";x(w,{replace:!0})}catch(w){p(w.message||"An error occurred")}finally{f(!1)}};return i.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background-light via-white to-emerald-50 dark:from-background-dark dark:via-surface-dark dark:to-background-dark transition-colors duration-300 p-4",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary/5 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-accent/5 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative w-full max-w-md animate-slide-up",style:{opacity:0,animationDelay:"0.1s"},children:[i.jsxs("div",{className:"bg-white dark:bg-surface-dark p-8 md:p-10 rounded-3xl shadow-soft border border-gray-100 dark:border-gray-800/80",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(c_,{size:28,className:"icon-gray",strokeWidth:1.5})}),i.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:n(m?"register_title":"login_title")}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:n(m?"register_subtitle":"login_subtitle")})]}),h&&i.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-center gap-3 text-red-700 dark:text-red-400",children:[i.jsx(Ca,{size:20}),i.jsx("span",{className:"text-sm",children:h})]}),i.jsxs("form",{onSubmit:E,className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:n("label_username")}),i.jsxs("div",{className:"relative",children:[i.jsx(u_,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 icon-gray",strokeWidth:1.75}),i.jsx("input",{type:"text",value:s,onChange:z=>l(z.target.value),className:"w-full pl-11 pr-4 py-3.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none transition-all text-base text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:n("placeholder_username"),required:!0,autoComplete:"username"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:n("label_password")}),i.jsxs("div",{className:"relative",children:[i.jsx(d_,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 icon-gray",strokeWidth:1.75}),i.jsx("input",{type:"password",value:o,onChange:z=>c(z.target.value),className:"w-full pl-11 pr-4 py-3.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none transition-all text-base text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:n(m?"placeholder_create_password":"placeholder_password"),required:!0,minLength:m?6:void 0,autoComplete:m?"new-password":"current-password"})]})]}),i.jsx("button",{type:"submit",disabled:d,className:"w-full py-3.5 px-4 btn-primary text-white font-semibold rounded-xl shadow-glow transition-all flex items-center justify-center gap-2 disabled:opacity-70",children:d?i.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx("span",{children:n(m?"btn_create_account":"btn_login")}),i.jsx(f_,{size:18,strokeWidth:2})]})})]}),i.jsxs("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mt-8",children:[n(m?"text_has_account":"text_no_account")," ",i.jsx("button",{onClick:()=>{y(!m),p("")},className:"text-primary hover:underline font-medium",children:n(m?"link_sign_in":"link_create_one")})]})]}),i.jsxs("p",{className:"text-center text-xs text-gray-400 mt-6",children:[i.jsx("span",{className:"gradient-text font-semibold",children:"WhatsSMS"}),"  WhatsApp Marketing Platform"]})]})]})},tx={generateMessage:async(n,s="")=>{try{const l=s.trim()?`You are an expert marketing strategist and copywriter known for creating high-converting WhatsApp campaigns.

The user has **existing content** they want you to **modify, improve, or rewrite** based on their instructions.

**Existing Content:**
"""
${s}
"""

**Your Task:**
Follow the user's instructions to modify the existing content. Keep the same general idea unless they ask you to change it completely.

**Guidelines:**
- Keep changes focused on what the user asks
- Maintain the message structure unless told otherwise
- Use *bold* for emphasis, emojis sparingly
- Make it concise and WhatsApp-appropriate

Output ONLY the improved/modified message text. No explanations.`:`You are an expert marketing strategist and copywriter known for creating high-converting WhatsApp campaigns.
Your goal is to write a powerful, effective marketing message based on the user's request.

**Strategy Guidelines:**
- **One Core Message:** Focus on a single clear value proposition.
- **Direct & Persuasive:** Use simple language. No buzzwords. No filler.
- **Structure:**
    1. **Hook:** Grab attention instantly (first line).
    2. **Value:** Explain the benefit clearly.
    3. **CTA:** One simple, actionable step (e.g., "Reply YES", "Click here").
- **Formatting:** Use *bold* for emphasis. Use emojis sparingly to highlight key points.
- **No Em Dashes.**

**Output Instructions:**
Provide **3 Distinct Variations** of the message to give the user choices:
1.  **Direct & Urgent** (Focus on scarcity or time-sensitivity)
2.  **Benefit-Focused** (Focus on the problem/solution)
3.  **Friendly & Conversational** (Softer tone)

Separate the variations clearly so the user can copy the one they like.`;return(await ce.post("/ai/chat",{messages:[{role:"system",content:l},{role:"user",content:n}]})).content}catch(l){throw console.error("AI Generation Error:",l),l}},analyzeTemplate:async(n,s)=>{try{return await ce.post("/ai/analyze-template",{templateBody:n,templateName:s})}catch(l){throw console.error("Error analyzing template:",l),l}},chatAssistant:async(n,s="",l="template")=>{try{return(await ce.post("/ai/chat-assistant",{messages:n,currentContent:s,contentType:l})).content}catch(o){throw console.error("AI Chat Assistant Error:",o),o}}},nx=({currentContent:n="",onApplyText:s,contentType:l="template"})=>{const{t:o}=ut(),[c,d]=A.useState([]),[f,h]=A.useState(""),[p,m]=A.useState(!1),[y,x]=A.useState(null),[v,N]=A.useState(!1),S=A.useRef(null),T=A.useRef(null),E=[{label:" "+o("action_analyze"),prompt:o("prompt_analyze")},{label:" "+o("action_shorten"),prompt:o("prompt_shorten")},{label:" "+o("action_emojis"),prompt:o("prompt_emojis")},{label:" "+o("action_cta"),prompt:o("prompt_cta")}],z=O=>O.split(/(\*\*[^*]+\*\*)/g).map((G,L)=>G.startsWith("**")&&G.endsWith("**")?i.jsx("strong",{className:"font-semibold",children:G.slice(2,-2)},L):G);A.useEffect(()=>{S.current?.scrollIntoView({behavior:"smooth"})},[c]),A.useEffect(()=>{v||T.current?.focus()},[v]);const w=async(O=null)=>{const V=O||f.trim();if(!V||p)return;const G={role:"user",content:V};d(L=>[...L,G]),h(""),m(!0);try{const L=[...c,G],F=await tx.chatAssistant(L,n,l);d(q=>[...q,{role:"assistant",content:F}])}catch{d(L=>[...L,{role:"assistant",content:o("error_ai"),isError:!0}])}finally{m(!1)}},_=async(O,V)=>{try{await navigator.clipboard.writeText(O),x(V),setTimeout(()=>x(null),2e3)}catch(G){console.error("Failed to copy:",G)}},C=O=>{s&&s(O)},$=O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),w())};return v?i.jsxs("button",{onClick:()=>N(!1),className:"w-full flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl text-sm font-medium hover:opacity-90 transition-opacity",children:[i.jsx(md,{size:16}),i.jsx("span",{children:o("ai_title")}),i.jsx(g_,{size:16})]}):i.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-surface-dark rounded-xl border border-gray-200 dark:border-gray-800 overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-800 bg-gradient-to-r from-emerald-500/10 to-teal-600/10",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-emerald-500 to-teal-600 flex items-center justify-center",children:i.jsx(Mp,{size:16,className:"text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sm",children:o("ai_title")}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:o("ai_subtitle",{type:l})})]})]}),i.jsx("button",{onClick:()=>N(!0),className:"p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:i.jsx(Cr,{size:18})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{minHeight:"200px"},children:c.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-emerald-500/20 to-teal-600/20 flex items-center justify-center mb-3",children:i.jsx(md,{size:24,className:"text-emerald-500"})}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:o("ai_welcome",{type:l})}),i.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:E.map((O,V)=>i.jsx("button",{onClick:()=>w(O.prompt),disabled:p,className:"px-3 py-1.5 text-xs bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors disabled:opacity-50",children:O.label},V))})]}):i.jsxs(i.Fragment,{children:[c.map((O,V)=>i.jsx("div",{className:`flex ${O.role==="user"?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[85%] rounded-2xl px-4 py-2.5 ${O.role==="user"?"bg-primary text-white rounded-br-md":O.isError?"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded-bl-md":"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-bl-md"}`,children:[i.jsx("p",{className:"text-sm whitespace-pre-wrap",children:O.role==="assistant"?z(O.content):O.content}),O.role==="assistant"&&!O.isError&&i.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:[i.jsx("button",{onClick:()=>_(O.content,V),className:"flex items-center gap-1 text-xs text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:y===V?i.jsxs(i.Fragment,{children:[i.jsx(gn,{size:12,className:"text-green-500"}),i.jsx("span",{className:"text-green-500",children:o("btn_copied")})]}):i.jsxs(i.Fragment,{children:[i.jsx(Id,{size:12}),i.jsx("span",{children:o("btn_copy")})]})}),s&&i.jsxs("button",{onClick:()=>C(O.content),className:"flex items-center gap-1 text-xs text-primary hover:text-primary/80 transition-colors",children:[i.jsx(md,{size:12}),i.jsx("span",{children:o("btn_apply")})]})]})]})},V)),p&&i.jsx("div",{className:"flex justify-start",children:i.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl rounded-bl-md px-4 py-3",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Gn,{size:14,className:"animate-spin text-emerald-500"}),i.jsx("span",{className:"text-sm text-gray-500",children:o("status_thinking")})]})})}),i.jsx("div",{ref:S})]})}),c.length>0&&i.jsx("div",{className:"px-4 pb-2 flex gap-2 overflow-x-auto",children:E.slice(0,3).map((O,V)=>i.jsx("button",{onClick:()=>w(O.prompt),disabled:p,className:"flex-shrink-0 px-2.5 py-1 text-xs bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors disabled:opacity-50",children:O.label},V))}),i.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-black/20",children:i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsx("textarea",{ref:T,value:f,onChange:O=>h(O.target.value),onKeyDown:$,placeholder:o("placeholder_ask_ai"),rows:1,className:"flex-1 px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl outline-none focus:border-primary resize-none text-sm min-h-[42px] max-h-[120px] text-gray-900 dark:text-white placeholder:text-gray-400",style:{height:"auto"},disabled:p}),i.jsx("button",{onClick:()=>w(),disabled:!f.trim()||p,className:"p-2.5 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-90 transition-opacity",children:i.jsx(Ao,{size:18})})]})})]})},fA=()=>{const{t:n}=ut(),[s,l]=A.useState(1),[o,c]=A.useState([]),[d,f]=A.useState([]),[h,p]=A.useState(!0),[m,y]=A.useState(!1),[x,v]=A.useState(null),N=is(),S=Oo(),[T,E]=A.useState(!1),[z,w]=A.useState(null),[_,C]=A.useState({name:"",messageBody:"",selectedLists:[],scheduledAt:"",files:[]}),[$,O]=A.useState(!1);A.useEffect(()=>{V()},[]);const V=async()=>{try{p(!0);const[j,D]=await Promise.all([ce.getLists(),ce.getTemplates()]);c(j.lists||[]),f(D.templates||[])}catch(j){v(j.message)}finally{p(!1)}},G=[{number:1,label:n("step_compose"),icon:di},{number:2,label:n("step_recipients"),icon:hn},{number:3,label:n("step_review"),icon:gn}],L=j=>{C(D=>({...D,selectedLists:D.selectedLists.includes(j)?D.selectedLists.filter(H=>H!==j):[...D.selectedLists,j]}))},F=j=>{let D=j.content,H=[];try{const Y=JSON.parse(j.content);D=Y.body||j.content,Y.files&&(H=Y.files)}catch{console.log("Template is not JSON, using as raw text")}C(Y=>({...Y,messageBody:D,files:H}))},q=()=>o.filter(j=>_.selectedLists.includes(j.id)).reduce((j,D)=>j+(D.memberCount||0),0),Z=()=>s===1?_.name&&_.messageBody:s===2?_.selectedLists.length>0:!0,te=async()=>{y(!0),v(null);try{const j=await ce.createCampaign({name:_.name,messageBody:_.messageBody,listIds:_.selectedLists,scheduledAt:_.scheduledAt||null,mediaIds:_.files.map(D=>D.mediaId)});w(j.campaign.id),E(!0)}catch(j){v(j.message),S.error(j.message||"Failed to create campaign")}finally{y(!1)}},M=async j=>{const D=j.target.files[0];if(D){if(D.size>10*1024*1024){v(n("error_file_size"));return}O(!0);try{const H=await ce.uploadFile(D);C(Y=>({...Y,files:[...Y.files,{mediaId:H.mediaId,filename:H.filename||D.name,mimetype:H.mimeType||D.type}]}))}catch{v(n("error_upload_failed"))}finally{O(!1),j.target.value=null}}},U=j=>{C(D=>({...D,files:D.files.filter((H,Y)=>Y!==j)}))};return h?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(Gn,{className:"w-8 h-8 animate-spin text-primary"})}):i.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-fade-in",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n("builder_title")}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:n("builder_subtitle")})]}),i.jsxs("div",{className:"flex items-center justify-between relative",children:[i.jsx("div",{className:"absolute top-6 left-0 right-0 h-0.5 bg-gray-200 dark:bg-gray-800 mx-16"}),i.jsx("div",{className:"absolute top-6 left-0 h-0.5 bg-primary mx-16 transition-all duration-500",style:{width:`${(s-1)/(G.length-1)*100}%`}}),G.map((j,D)=>i.jsxs("div",{className:"flex flex-col items-center relative z-10 animate-slide-up",style:{animationDelay:`${D*.1}s`,opacity:0},children:[i.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-300 ${s>j.number||s===j.number?"bg-primary text-white shadow-glow":"bg-gray-100 dark:bg-gray-800 text-gray-400"}`,children:s>j.number?i.jsx(gn,{size:20,strokeWidth:2.5}):i.jsx(j.icon,{size:20,strokeWidth:1.75})}),i.jsx("span",{className:`mt-3 text-sm font-medium ${s>=j.number?"text-gray-900 dark:text-white":"text-gray-400"}`,children:j.label})]},j.number))]}),x&&i.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-center gap-3 text-red-700 dark:text-red-400",children:[i.jsx(Ca,{size:20}),i.jsx("span",{children:x}),i.jsx("button",{onClick:()=>v(null),className:"ml-auto",children:i.jsx(At,{size:18})})]}),i.jsxs("div",{className:"bg-white dark:bg-surface-dark p-8 rounded-2xl shadow-soft border border-gray-100 dark:border-gray-800/80",children:[s===1&&i.jsxs("div",{className:"flex gap-6 animate-fade-in",children:[i.jsxs("div",{className:"flex-1 space-y-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:n("section_compose")}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:n("label_campaign_name_required")}),i.jsx("input",{type:"text",value:_.name,onChange:j=>C({..._,name:j.target.value}),className:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-colors text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:n("placeholder_campaign_name")})]}),d.length>0&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:n("label_use_template")}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:d.map(j=>i.jsx("button",{onClick:()=>F(j),className:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:j.name},j.id))})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:n("label_message_content")}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:"image/*,application/pdf",onChange:M,disabled:$}),i.jsx("label",{htmlFor:"file-upload",className:`p-2 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer transition-colors ${$?"opacity-50 cursor-not-allowed":""}`,title:n("tooltip_attach"),children:$?i.jsx(Gn,{size:16,className:"animate-spin text-gray-500"}):i.jsx(xr,{size:16,className:"text-gray-500 dark:text-gray-400"})})]})]}),i.jsx("div",{className:"text-xs text-gray-400 mb-2",children:n("hint_personalization")}),i.jsx("textarea",{value:_.messageBody,onChange:j=>C({..._,messageBody:j.target.value}),className:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-colors resize-none h-40 text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"Hey {{name}}, we have exciting news for you..."}),i.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[_.messageBody.length," ",n("text_characters")]}),_.files&&_.files.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:_.files.map((j,D)=>i.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm text-xs",children:[i.jsx(xr,{size:12,className:"text-gray-400"}),i.jsx("span",{className:"max-w-[150px] truncate text-gray-600 dark:text-gray-300",children:j.filename}),i.jsx("button",{type:"button",onClick:()=>U(D),className:"text-gray-400 hover:text-red-500",children:i.jsx(At,{size:12})})]},D))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:n("label_schedule")}),i.jsx("input",{type:"datetime-local",value:_.scheduledAt,onChange:j=>C({..._,scheduledAt:j.target.value}),className:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-colors"})]})]}),i.jsx("div",{className:"w-[380px] flex-shrink-0",children:i.jsx(nx,{currentContent:_.messageBody,contentType:"campaign",onApplyText:j=>C(D=>({...D,messageBody:j}))})})]}),s===2&&i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsx("h2",{className:"text-xl font-semibold",children:n("section_select_recipients")}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:n("text_select_recipients_subtitle")}),o.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("p",{className:"text-gray-400 mb-4",children:n("no_lists_found")}),i.jsx("button",{onClick:()=>N("/contacts"),className:"text-primary hover:underline",children:n("link_create_list")})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map((j,D)=>i.jsx("button",{onClick:()=>L(j.id),className:`p-4 rounded-xl border-2 text-left transition-all duration-200 animate-slide-up ${_.selectedLists.includes(j.id)?"border-primary bg-emerald-50 dark:bg-emerald-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,style:{animationDelay:`${D*.05}s`,opacity:0},children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:j.name}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[j.memberCount||0," contacts"]})]}),i.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${_.selectedLists.includes(j.id)?"border-primary bg-primary text-white":"border-gray-300 dark:border-gray-600"}`,children:_.selectedLists.includes(j.id)&&i.jsx(gn,{size:14})})]})},j.id))}),i.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-800",children:i.jsxs("p",{className:"text-lg font-medium",children:[n("label_total_recipients")," ",i.jsx("span",{className:"text-primary",children:q()})]})})]}),s===3&&i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsx("h2",{className:"text-xl font-semibold",children:n("section_review")}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl",children:[i.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:n("label_campaign_name")}),i.jsx("p",{className:"font-medium",children:_.name})]}),i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl",children:[i.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:n("label_message_content")}),i.jsx("p",{className:"whitespace-pre-wrap",children:_.messageBody})]}),i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl",children:[i.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:n("step_recipients")}),i.jsx("p",{className:"font-medium",children:n("text_review_recipients",{count:q(),lists:_.selectedLists.length})}),i.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:o.filter(j=>_.selectedLists.includes(j.id)).map(j=>i.jsx("span",{className:"px-2 py-1 text-xs bg-gray-200 dark:bg-gray-800 rounded-lg",children:j.name},j.id))})]}),_.scheduledAt&&i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl",children:[i.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:n("label_scheduled_for")}),i.jsx("p",{className:"font-medium",children:new Date(_.scheduledAt).toLocaleString()})]})]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("button",{onClick:()=>s>1?l(s-1):N("/campaigns"),className:"px-6 py-3 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors font-medium",children:n(s===1?"btn_cancel":"btn_back")}),s<3?i.jsxs("button",{onClick:()=>l(s+1),disabled:!Z(),className:"flex items-center gap-2 px-6 py-3 btn-primary text-white rounded-xl font-medium shadow-glow disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx("span",{children:n("btn_continue")}),i.jsx(Dp,{size:18})]}):i.jsx("button",{onClick:te,disabled:m,className:"flex items-center gap-2 px-6 py-3 btn-primary text-white rounded-xl font-medium shadow-glow disabled:opacity-50",children:m?i.jsxs(i.Fragment,{children:[i.jsx(Gn,{size:18,className:"animate-spin"}),i.jsx("span",{children:n("status_creating")})]}):i.jsxs(i.Fragment,{children:[i.jsx(gn,{size:18}),i.jsx("span",{children:n("builder_title")})]})})]}),T&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-2xl p-8 max-w-sm w-full text-center border border-gray-100 dark:border-gray-800",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/20 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(gn,{size:32,strokeWidth:3})}),i.jsx("h3",{className:"text-xl font-bold mb-2",children:n("modal_success_title")}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:n("text_success_subtitle")}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:async()=>{try{S.success(n("msg_campaign_started")),E(!1),N("/campaigns"),await ce.sendCampaign(z)}catch(j){S.error(n("error_start_campaign")+j.message)}},className:"w-full py-3 btn-primary text-white rounded-xl font-medium shadow-glow flex items-center justify-center gap-2",children:[i.jsx(Ao,{size:18}),i.jsx("span",{children:n("btn_send_now")})]}),i.jsxs("button",{onClick:()=>N("/campaigns"),className:"w-full py-3 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-medium transition-colors flex items-center justify-center gap-2",children:[i.jsx(zp,{size:18}),i.jsx("span",{children:n("btn_go_dashboard")})]})]})]})})]})},gA=()=>{const{t:n}=ut(),[s,l]=A.useState([]),[o,c]=A.useState(null),[d,f]=A.useState(!0),[h,p]=A.useState(null),[m,y]=A.useState(""),x=is(),v=ai.useCallback(async()=>{try{f(!0),p(null);const[w,_]=await Promise.all([ce.getCampaigns({status:m||void 0,limit:50}),ce.getCampaignStats()]);l(w.campaigns||[]),c(_)}catch(w){p(w.message)}finally{f(!1)}},[m]);A.useEffect(()=>{v()},[v]);const N=async w=>{if(confirm(n("confirm_send_campaign")))try{await ce.sendCampaign(w),v()}catch(_){alert(_.message)}},S=async w=>{if(confirm(n("confirm_stop_campaign")))try{await ce.stopCampaign(w),v()}catch(_){alert(_.message)}},T=async w=>{if(confirm(n("confirm_delete_campaign")))try{await ce.deleteCampaign(w),v()}catch(_){alert(_.message)}},E=w=>{switch(w){case"COMPLETED":return{bg:"bg-blue-50 dark:bg-blue-900/20",text:"text-blue-600 dark:text-blue-400",icon:Ad,label:n("status_completed")};case"IN_PROGRESS":return{bg:"bg-emerald-50 dark:bg-emerald-900/20",text:"text-emerald-600 dark:text-emerald-400",icon:ti,label:n("status_in_progress")};case"SCHEDULED":return{bg:"bg-amber-50 dark:bg-amber-900/20",text:"text-amber-600 dark:text-amber-400",icon:pr,label:n("status_scheduled")};case"STOPPED":return{bg:"bg-red-50 dark:bg-red-900/20",text:"text-red-600 dark:text-red-400",icon:Ep,label:n("status_stopped")};default:return{bg:"bg-gray-50 dark:bg-gray-800/50",text:"text-gray-500 dark:text-gray-400",icon:pr,label:n("status_draft")}}},z=[{label:n("stat_total_campaigns"),value:o?.totalCampaigns??"-",icon:Md},{label:n("stat_messages_sent"),value:o?.totalMessagesSent?.toLocaleString()??"-",icon:Ao},{label:n("rate_delivery"),value:`${o?.deliveryRate??0}%`,icon:Ad},{label:n("stat_active_now"),value:o?.activeCampaigns??"-",icon:ti}];return i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n("campaigns_title")}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:n("campaigns_subtitle")})]}),i.jsxs("button",{onClick:()=>x("/campaigns/new"),className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[i.jsx(ka,{size:18,strokeWidth:2}),i.jsx("span",{children:n("btn_new_campaign")})]})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:z.map((w,_)=>i.jsxs("div",{className:"bg-white dark:bg-surface-dark p-4 rounded-xl border border-gray-100 dark:border-gray-800/80 shadow-soft flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:i.jsx(w.icon,{size:18,className:"icon-gray",strokeWidth:1.75})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 font-medium",children:w.label}),i.jsx("p",{className:"text-xl font-bold",children:w.value})]})]},_))}),i.jsxs("div",{className:"flex items-center gap-4 overflow-x-auto pb-2",children:[i.jsx("button",{onClick:()=>v(),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:i.jsx(To,{size:18,className:"icon-gray"})}),["","DRAFT","IN_PROGRESS","COMPLETED","STOPPED"].map(w=>i.jsx("button",{onClick:()=>y(w),className:`px-4 py-2 text-sm font-medium rounded-lg whitespace-nowrap transition-colors ${m===w?"bg-primary text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:n(w?`status_${w.toLowerCase()}`:"label_all_contacts")},w))]}),h&&i.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-center gap-3 text-red-700 dark:text-red-400",children:[i.jsx(Ca,{size:18}),i.jsx("span",{children:h}),i.jsx("button",{onClick:v,className:"ml-auto text-sm underline",children:n("btn_refresh")})]}),d?i.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:[1,2,3,4].map(w=>i.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-800 rounded-xl skeleton"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"h-5 w-32 bg-gray-200 dark:bg-gray-800 rounded skeleton"}),i.jsx("div",{className:"h-4 w-24 bg-gray-200 dark:bg-gray-800 rounded mt-2 skeleton"})]})]}),i.jsx("div",{className:"h-16 bg-gray-200 dark:bg-gray-800 rounded-xl skeleton"})]},w))}):s.length===0?i.jsxs("div",{className:"bg-white dark:bg-surface-dark p-12 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-xl flex items-center justify-center mx-auto mb-4",children:i.jsx(Md,{size:28,className:"icon-gray"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:n("no_campaigns_yet")}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:m?n("no_campaigns_filter",{filter:m.toLowerCase().replace("_"," ")}):n("start_campaign_prompt")}),i.jsxs("button",{onClick:()=>x("/campaigns/new"),className:"inline-flex items-center gap-2 px-4 py-2 btn-primary text-white rounded-xl font-medium",children:[i.jsx(ka,{size:18}),n("btn_create_campaign")]})]}):i.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:s.map((w,_)=>{const C=E(w.status),$=C.icon;return i.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 card-hover animate-slide-up group",style:{animationDelay:`${_*.05}s`,opacity:0},children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-12 h-12 ${C.bg} rounded-xl flex items-center justify-center`,children:i.jsx($,{size:22,className:C.text,strokeWidth:1.75})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg",children:w.name}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1.5",children:[i.jsx(h_,{size:14,className:"icon-gray"}),new Date(w.createdAt).toLocaleDateString()]})]})]}),i.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${C.bg} ${C.text}`,children:C.label})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[i.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[i.jsx("p",{className:"text-lg font-bold",children:w.recipientCount||0}),i.jsx("p",{className:"text-xs text-gray-400",children:n("stat_recipients")})]}),i.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[i.jsx("p",{className:"text-lg font-bold text-blue-600",children:w.statsDelivered||0}),i.jsx("p",{className:"text-xs text-gray-400",children:n("status_delivered")})]}),i.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[i.jsx("p",{className:"text-lg font-bold text-emerald-600",children:w.statsRead||0}),i.jsx("p",{className:"text-xs text-gray-400",children:n("status_read")})]}),i.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[i.jsx("p",{className:"text-lg font-bold text-red-600",children:w.statsFailed||0}),i.jsx("p",{className:"text-xs text-gray-400",children:n("status_failed")})]})]}),w.status==="IN_PROGRESS"&&i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[i.jsx("span",{children:n("label_progress")}),i.jsxs("span",{children:[w.statsDelivered||0," / ",w.recipientCount||0]})]}),i.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500 animate-pulse",style:{width:`${w.recipientCount?w.statsDelivered/w.recipientCount*100:0}%`}})})]}),i.jsxs("div",{className:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[w.status==="DRAFT"&&i.jsx("button",{onClick:()=>N(w.id),className:"p-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-gray-400 hover:text-blue-600 rounded-lg transition-colors",title:"Send Campaign",children:i.jsx(ti,{size:18})}),w.status==="IN_PROGRESS"&&i.jsx("button",{onClick:()=>S(w.id),className:"p-2 hover:bg-amber-50 dark:hover:bg-amber-900/20 text-gray-400 hover:text-amber-600 rounded-lg transition-colors",title:"Stop Campaign",children:i.jsx(m_,{size:18})}),w.status!=="IN_PROGRESS"&&i.jsx("button",{onClick:()=>T(w.id),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-400 hover:text-red-600 rounded-lg transition-colors",title:"Delete Campaign",children:i.jsx(sn,{size:18})})]})]},w.id)})})]})},hA=({onSelect:n,isModal:s})=>{const{t:l}=ut(),[o,c]=A.useState([]),[d,f]=A.useState(!0),[h,p]=A.useState(!1),[m,y]=A.useState(!1),x=A.useRef(null),v=async()=>{try{f(!0);const w=await ce.getMedia();c(w.media||[])}catch{}finally{f(!1)}};A.useEffect(()=>{v()},[]);const N=async w=>{const _=w.target.files?.[0];if(_){p(!0);try{const C=await ce.uploadMedia(_);if(y(!1),v(),n){const $=`undefined/uploads/${C.media.path}`;n({...C.media,previewUrl:$})}}catch(C){alert(C.message)}finally{p(!1)}}},S=async(w,_)=>{if(_.stopPropagation(),!!confirm("Are you sure you want to delete this file?"))try{await ce.deleteMedia(w),c(o.filter(C=>C.id!==w))}catch(C){alert(C.message)}},T=w=>{if(!n)return;const _=`undefined/uploads/${w.path}`;n({...w,previewUrl:_})},E=w=>{if(w===0)return"0 B";const _=1024,C=["B","KB","MB","GB"],$=Math.floor(Math.log(w)/Math.log(_));return parseFloat((w/Math.pow(_,$)).toFixed(1))+" "+C[$]},z=w=>w.startsWith("image/")?i.jsx(mr,{size:24,className:"text-purple-500"}):w.startsWith("video/")?i.jsx(p_,{size:24,className:"text-pink-500"}):w.startsWith("audio/")?i.jsx(x_,{size:24,className:"text-emerald-500"}):i.jsx(di,{size:24,className:"text-gray-500"});return i.jsxs("div",{className:"space-y-6 animate-fade-in h-full flex flex-col",children:[!s&&i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:l("media_title")}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:l("media_subtitle")})]}),i.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[i.jsx(ei,{size:18,strokeWidth:2}),i.jsx("span",{children:l("btn_upload_file")})]})]}),s&&i.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-100 dark:border-gray-800",children:[i.jsx("h2",{className:"text-xl font-bold",children:l("modal_upload_title")||"Select Media"}),i.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg text-sm font-medium transition-colors",children:[i.jsx(ei,{size:16,strokeWidth:2}),i.jsx("span",{children:l("btn_upload_file")})]})]}),d?i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(w=>i.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-800 rounded-2xl skeleton"},w))}):o.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white dark:bg-surface-dark rounded-2xl border border-dashed border-gray-200 dark:border-gray-800",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-50 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4",children:i.jsx(mr,{size:32,className:"text-gray-300 dark:text-gray-600"})}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:l("no_media")}),i.jsx("button",{onClick:()=>y(!0),className:"mt-2 text-primary text-sm hover:underline",children:l("btn_upload_first")})]}):i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 overflow-y-auto pr-2 pb-20",children:o.map(w=>i.jsxs("div",{onClick:n?()=>T(w):void 0,className:`group relative bg-white dark:bg-surface-dark rounded-2xl shadow-soft border border-gray-100 dark:border-gray-800/80 overflow-hidden ${n?"cursor-pointer ring-2 ring-transparent hover:ring-primary":"card-hover"}`,children:[i.jsxs("div",{className:"aspect-square bg-gray-50 dark:bg-black/20 flex items-center justify-center relative overflow-hidden",children:[w.mimetype.startsWith("image/")?i.jsx("img",{src:`undefined/uploads/${w.path}`,alt:w.filename,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}):z(w.mimetype),!n&&i.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2 backdrop-blur-[2px]",children:i.jsx("button",{onClick:_=>S(w.id,_),className:"p-2 bg-white/10 hover:bg-white/20 text-white rounded-lg backdrop-blur-sm transition-colors",title:"Delete",children:i.jsx(sn,{size:18})})}),n&&i.jsx("div",{className:"absolute inset-0 bg-primary/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:i.jsx("span",{className:"px-3 py-1 bg-primary text-white text-xs font-bold rounded-full shadow-lg",children:"Select"})})]}),i.jsxs("div",{className:"p-3",children:[i.jsx("p",{className:"text-sm font-medium truncate text-gray-900 dark:text-white",title:w.filename,children:w.filename}),i.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:[E(w.size),"  ",w.mimetype.split("/")[1].toUpperCase()]})]})]},w.id))}),m&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-white dark:bg-surface-dark w-full max-w-md rounded-2xl shadow-2xl p-6 animate-slide-up",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold",children:l("modal_upload_title")}),i.jsx("button",{onClick:()=>y(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:i.jsx(At,{size:20})})]}),i.jsxs("div",{className:"border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl p-8 text-center hover:border-primary transition-colors cursor-pointer",onClick:()=>x.current?.click(),children:[i.jsx("input",{ref:x,type:"file",className:"hidden",onChange:N,accept:"image/*,video/*,application/pdf"}),h?i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(Gn,{size:32,className:"text-primary animate-spin mb-3"}),i.jsx("p",{className:"text-sm font-medium",children:l("status_uploading")})]}):i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:"w-12 h-12 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-500 rounded-full flex items-center justify-center mb-3",children:i.jsx(ei,{size:24})}),i.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:l("text_drag_drop")}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:l("text_file_types")})]})]})]})})]})},mA=({header:n,body:s,footer:l,files:o,buttons:c})=>{const d=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),f=h=>h?h.split(/(\{\{\d+\}\})/g).map((m,y)=>m.match(/\{\{\d+\}\}/)?i.jsx("span",{className:"bg-blue-100 text-blue-600 px-1 rounded mx-0.5 font-medium",children:m},y):m):i.jsx("span",{className:"text-gray-400 italic",children:"Type something..."});return i.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-4 rounded-xl overflow-hidden relative",children:[i.jsx("div",{className:"absolute inset-0",style:{backgroundImage:'url("/whatsapp-bg.png")',backgroundSize:"cover",backgroundPosition:"center"}}),i.jsxs("div",{className:"w-full max-w-[320px] relative z-10 flex flex-col gap-2",children:[i.jsxs("div",{className:"bg-white dark:bg-[#202c33] rounded-lg shadow-sm p-1 relative rounded-tr-none self-end message-bubble-tail",children:[i.jsxs("div",{className:"p-2 pb-6 min-w-[120px]",children:[o&&o.length>0&&i.jsx("div",{className:"mb-2 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 flex items-center justify-center border border-gray-100 dark:border-gray-700",children:o[0].mimetype?.startsWith("image/")&&o[0].previewUrl?i.jsx("img",{src:o[0].previewUrl,alt:"Preview",className:"w-full h-auto max-h-48 object-cover"}):i.jsxs("div",{className:"text-center p-4",children:[i.jsx(xr,{className:"mx-auto mb-2 text-gray-400",size:24}),i.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[150px]",children:o[0].filename}),i.jsx("p",{className:"text-[10px] text-gray-400 uppercase mt-0.5",children:o[0].mimetype?.split("/")[1]||"FILE"})]})}),n&&i.jsx("div",{className:"font-bold text-sm text-gray-900 dark:text-gray-100 mb-1 leading-snug",children:n}),i.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-200 whitespace-pre-wrap leading-relaxed",children:f(s)}),l&&i.jsx("div",{className:"text-[11px] text-gray-500 dark:text-gray-400 mt-2 pt-1 border-t border-gray-100 dark:border-gray-700/50",children:l})]}),i.jsxs("div",{className:"absolute right-2 bottom-1 flex items-center gap-1",children:[i.jsx("span",{className:"text-[10px] text-gray-400",children:d}),i.jsx(Tp,{size:14,className:"text-[#53bdeb]"})]})]}),c&&c.length>0&&c.map((h,p)=>i.jsx("div",{className:"bg-white dark:bg-[#202c33] rounded-lg shadow-sm p-3 text-center cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:i.jsxs("span",{className:"text-[#00a884] font-medium text-sm block truncate",children:[h.type==="URL"&&" ",h.type==="PHONE_NUMBER"&&" ",h.text||"Button Text"]})},p))]})]})},pA=()=>{const{t:n}=ut(),[s,l]=A.useState([]),[o,c]=A.useState(!0),[d,f]=A.useState(!1),[h,p]=A.useState(null),[m,y]=A.useState({name:"",header:"",body:"",footer:"",buttons:[],files:[]}),[x,v]=A.useState(!1),[N,S]=A.useState(!1),[T,E]=A.useState(null),z=async()=>{try{c(!0);const L=await ce.getTemplates();l(L.templates||[])}catch{console.error(err)}finally{c(!1)}};A.useEffect(()=>{z()},[]);const w=()=>{y({name:"",header:"",body:"",footer:"",buttons:[],files:[]}),p(null),E(null)},_=async()=>{if(!m.body.trim()){alert("Please add body text first.");return}S(!0),E(null);try{const L=await tx.analyzeTemplate(m.body,m.name);E(L)}catch{alert("Failed to analyze template.")}finally{S(!1)}},C=async L=>{const F=L.target.files[0];if(!F)return;if(F.size>10*1024*1024){alert("File size must be less than 10MB");return}const q=URL.createObjectURL(F);v(!0);try{const Z=await ce.uploadFile(F);y(te=>({...te,files:[...te.files,{mediaId:Z.mediaId,filename:Z.filename||F.name,mimetype:Z.mimeType||F.type,previewUrl:q}]}))}catch{alert("Failed to upload file")}finally{v(!1),L.target.value=null}},$=L=>{y(F=>({...F,files:F.files.filter((q,Z)=>Z!==L)}))},O=async()=>{try{const L=JSON.stringify({header:m.header,body:m.body,footer:m.footer,buttons:m.buttons,files:m.files});h?await ce.updateTemplate(h,{name:m.name,content:L}):await ce.createTemplate({name:m.name,content:L}),f(!1),z(),w()}catch{alert(err.message)}},V=L=>{try{const F=JSON.parse(L.content);y({name:L.name,header:F.header||"",body:F.body||L.content,footer:F.footer||"",buttons:F.buttons||[],files:F.files||[]})}catch{y({name:L.name,header:"",body:L.content,footer:"",buttons:[]})}p(L.id),f(!0)},G=async L=>{if(confirm("Start deletion?"))try{await ce.deleteTemplate(L),l(s.filter(F=>F.id!==L))}catch{alert(err.message)}};return i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n("templates_title")}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:n("templates_subtitle")})]}),i.jsxs("button",{onClick:()=>{w(),f(!0)},className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[i.jsx(ka,{size:18,strokeWidth:2}),i.jsx("span",{children:n("btn_create_template")})]})]}),o?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(L=>i.jsx("div",{className:"h-48 bg-gray-100 dark:bg-gray-800 rounded-xl skeleton"},L))}):s.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white dark:bg-surface-dark rounded-xl border border-dashed border-gray-200 dark:border-gray-800",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-50 dark:bg-blue-900/20 rounded-full flex items-center justify-center mb-4",children:i.jsx(kr,{size:32,className:"text-blue-500"})}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:n("no_templates")})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(L=>{let F;try{F=JSON.parse(L.content)}catch{F={body:L.content}}return i.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 p-5 card-hover",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 text-blue-600 rounded-lg",children:i.jsx(Ap,{size:18})}),i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white truncate",children:L.name})]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:()=>V(L),className:"p-2 text-gray-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:i.jsx(Er,{size:16})}),i.jsx("button",{onClick:()=>G(L.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:i.jsx(sn,{size:16})})]})]}),i.jsx("div",{className:"bg-[#E5DDD5] dark:bg-[#1f2c34] p-3 rounded-lg text-sm relative",children:i.jsxs("div",{className:"bg-white dark:bg-[#202c33] p-2 rounded-lg shadow-sm text-gray-900 dark:text-gray-100",children:[F.header&&i.jsx("p",{className:"font-bold mb-1 opacity-90",children:F.header}),i.jsx("p",{className:"whitespace-pre-wrap",children:F.body}),F.footer&&i.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:F.footer})]})})]},L.id)})}),d&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-white dark:bg-surface-dark w-full max-w-[95vw] h-[90vh] rounded-xl shadow-2xl overflow-hidden flex animate-slide-up",children:[i.jsxs("div",{className:"w-[35%] p-6 overflow-y-auto border-r border-gray-200 dark:border-gray-800 scrollbar-hide",children:[i.jsx("h2",{className:"text-xl font-bold mb-6",children:n(h?"modal_edit_template":"modal_new_template")}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1.5",children:n("label_template_name")}),i.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-xl bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-gray-700 outline-none focus:border-primary text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"e.g. welcome_message",value:m.name,onChange:L=>y({...m,name:L.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1.5",children:n("label_header_optional")}),i.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-xl bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-gray-700 outline-none focus:border-primary text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"Company Name / Title",value:m.header,onChange:L=>y({...m,header:L.target.value})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[i.jsx("label",{className:"block text-sm font-medium",children:n("label_body_text")}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"file",id:"tpl-file-upload",className:"hidden",accept:"image/*,application/pdf",onChange:C,disabled:x}),i.jsx("label",{htmlFor:"tpl-file-upload",className:`p-1.5 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer transition-colors ${x?"opacity-50 cursor-not-allowed":""}`,title:"Attach Image or PDF",children:x?i.jsx(Gn,{size:16,className:"animate-spin text-gray-500"}):i.jsx(xr,{size:16,className:"text-gray-500 dark:text-gray-400"})})]})]}),i.jsx("textarea",{className:"w-full h-32 px-4 py-3 rounded-xl bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-gray-700 outline-none focus:border-primary resize-none text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"Hello {{1}}, thanks for signing up!",value:m.body,onChange:L=>y({...m,body:L.target.value})}),i.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Use ","{{1}}",", ","{{2}}"," for variables."]}),m.files.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:m.files.map((L,F)=>i.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm text-xs",children:[i.jsx(xr,{size:12,className:"text-gray-400"}),i.jsx("span",{className:"max-w-[150px] truncate text-gray-600 dark:text-gray-300",children:L.filename}),i.jsx("button",{type:"button",onClick:()=>$(F),className:"text-gray-400 hover:text-red-500",children:i.jsx(At,{size:12})})]},F))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1.5",children:n("label_footer_optional")}),i.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-xl bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-gray-700 outline-none focus:border-primary text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"Reply STOP to unsubscribe",value:m.footer,onChange:L=>y({...m,footer:L.target.value})})]})]}),i.jsxs("div",{className:"mt-8 flex gap-3",children:[i.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-2.5 rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800",children:n("btn_cancel")}),i.jsxs("button",{onClick:_,disabled:N||!m.body.trim(),className:"flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-primary text-primary hover:bg-primary/10 disabled:opacity-50",children:[N?i.jsx(Gn,{size:16,className:"animate-spin"}):i.jsx(Mp,{size:16}),n(N?"status_analyzing":"btn_analyze")]}),i.jsx("button",{onClick:O,className:"flex-1 py-2.5 btn-primary text-white rounded-xl shadow-glow",children:n("btn_save_template")})]})]}),i.jsxs("div",{className:"w-[30%] bg-gray-50/50 dark:bg-black/10 border-r border-gray-200 dark:border-gray-800 p-4 flex flex-col",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-4 px-2",children:n("label_preview")}),i.jsx("div",{className:"flex-1 rounded-2xl overflow-hidden border border-gray-200 dark:border-gray-800 shadow-inner",children:i.jsx(mA,{header:m.header,body:m.body,footer:m.footer,files:m.files,buttons:m.buttons})})]}),i.jsxs("div",{className:"w-[35%] bg-gray-50 dark:bg-black/40 flex flex-col overflow-hidden p-4",children:[T&&i.jsxs("div",{className:`mb-4 p-4 rounded-xl border ${T.verdict==="good"?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800":T.verdict==="bad"?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[T.verdict==="good"?i.jsx(y_,{size:18,className:"text-emerald-600"}):i.jsx(Ca,{size:18,className:T.verdict==="bad"?"text-red-600":"text-amber-600"}),i.jsxs("span",{className:"font-semibold",children:["Score: ",T.score,"/10"]})]}),i.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-2",children:T.summary}),T.suggestions&&T.suggestions.length>0&&i.jsx("ul",{className:"text-sm space-y-1",children:T.suggestions.map((L,F)=>i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-gray-400",children:""}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:L})]},F))})]}),i.jsx(nx,{currentContent:m.body,contentType:"template",onApplyText:L=>{y(F=>({...F,body:L})),E(null)}})]})]})})]})},xA=()=>{const{isDark:n,toggleTheme:s}=ex(),l=Oo(),{t:o,i18n:c}=ut(),[d,f]=A.useState({phoneNumberId:"",accessToken:"",wabaId:"",verifyToken:"whatsms_token"}),[h,p]=A.useState(!0),[m,y]=A.useState(!1),[x,v]=A.useState(!1),[N,S]=A.useState(""),T=`${window.location.origin}/webhooks`;A.useEffect(()=>{E()},[]);const E=async()=>{try{const C=await ce.get("/settings");C&&f({phoneNumberId:C.phoneNumberId||"",accessToken:C.accessToken||"",wabaId:C.wabaId||"",verifyToken:C.verifyToken||"whatsms_token"})}catch(C){console.error("Failed to load settings",C)}finally{p(!1)}},z=C=>{f({...d,[C.target.name]:C.target.value})},w=async()=>{try{await ce.post("/settings",d),await ce.post("/settings",d),l.success(o("success_config_saved")||"Configuration saved successfully!")}catch(C){console.error("Failed to save settings",C),l.error(o("error_config_save")||"Failed to save configuration")}},_=()=>{navigator.clipboard.writeText(T),v(!0),setTimeout(()=>v(!1),2e3)};return h?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:o("settings_title")}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:o("settings_subtitle")})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[i.jsx("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 lg:col-span-2",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 flex items-center justify-center",children:i.jsx(Td,{size:20})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg",children:o("settings_title")}),i.jsx("p",{className:"text-sm text-gray-400",children:o("section_appearance")})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("select",{value:c.language,onChange:C=>c.changeLanguage(C.target.value),className:"px-3 py-1.5 rounded-lg bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 text-sm outline-none focus:border-primary",children:[i.jsx("option",{value:"en",children:"English"}),i.jsx("option",{value:"fr",children:"Franais"})]}),i.jsxs("button",{onClick:s,className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 ${n?"bg-emerald-600":"bg-gray-200"}`,children:[i.jsx("span",{className:"sr-only",children:"Toggle theme"}),i.jsx("span",{className:`${n?"translate-x-7":"translate-x-1"} inline-block h-6 w-6 transform rounded-full bg-white transition-transform duration-300 flex items-center justify-center`,children:n?i.jsx(b_,{size:14,className:"text-emerald-600"}):i.jsx(v_,{size:14,className:"text-orange-400"})})]})]})]})}),i.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 flex items-center justify-center",children:i.jsx(Td,{size:20})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg",children:o("section_credentials")}),i.jsx("p",{className:"text-sm text-gray-400",children:o("section_credentials_subtitle")})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:o("label_phone_id")}),i.jsx("input",{type:"text",name:"phoneNumberId",value:d.phoneNumberId,onChange:z,placeholder:"e.g. 10452...",className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-all text-gray-900 dark:text-white placeholder:text-gray-400"}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:o("hint_phone_id")})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:o("label_access_token")}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:m?"text":"password",name:"accessToken",value:d.accessToken,onChange:z,placeholder:o("placeholder_access_token"),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-all pr-12 text-gray-900 dark:text-white placeholder:text-gray-400"}),i.jsx("button",{onClick:()=>y(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:m?i.jsx(__,{size:18}):i.jsx(N_,{size:18})})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium mb-2",children:[o("label_waba_id")," ",i.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),i.jsx("input",{type:"text",name:"wabaId",value:d.wabaId,onChange:z,placeholder:"e.g. 123456789...",className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-all text-gray-900 dark:text-white placeholder:text-gray-400"}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:o("hint_waba_id")})]}),i.jsx("div",{className:"pt-4",children:i.jsxs("button",{onClick:w,className:"w-full px-6 py-2.5 bg-primary hover:bg-primary-dark text-white rounded-xl font-medium transition-colors flex items-center justify-center gap-2",children:[i.jsx(Op,{size:18}),o("btn_save_credentials")]})}),i.jsxs("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-800",children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:o("label_test_connectivity")}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:N,onChange:C=>S(C.target.value),placeholder:"Recipient Phone (e.g. 1555...)",className:"flex-1 px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-all text-gray-900 dark:text-white placeholder:text-gray-400"}),i.jsxs("button",{onClick:async()=>{if(!N){l.error(o("error_no_phone"));return}try{await w();const C=await ce.post("/settings/test",{targetPhone:N});l.success(C.message||o("success_connection"))}catch(C){l.error(C.message||o("error_connection"))}},className:"px-6 py-2.5 bg-gray-100 hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-medium transition-colors flex items-center justify-center gap-2 whitespace-nowrap",title:"Send 'hello_world' template",children:[i.jsx(c0,{size:18}),o("btn_send_test")]})]}),i.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[o("hint_test_message")," ",i.jsx("br",{}),i.jsx("span",{dangerouslySetInnerHTML:{__html:o("hint_test_warning")}})]})]}),i.jsx("p",{className:"text-xs text-center text-gray-400 mt-1",children:o("hint_save_before_test")})]})]}),i.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 h-fit",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-teal-50 dark:bg-teal-900/20 text-teal-600 flex items-center justify-center",children:i.jsx(c0,{size:20})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg",children:o("section_webhook")}),i.jsx("p",{className:"text-sm text-gray-400",children:o("section_webhook_subtitle")})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl border border-gray-100 dark:border-gray-800",children:[i.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:o("label_callback_url")}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("code",{className:"flex-1 text-sm font-mono text-gray-600 dark:text-gray-300 break-all",children:T}),i.jsx("button",{onClick:_,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Copy URL",children:x?i.jsx(gn,{size:16,className:"text-blue-500"}):i.jsx(Id,{size:16,className:"text-gray-400"})})]})]}),i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl border border-gray-100 dark:border-gray-800",children:[i.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:o("label_verify_token")}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",name:"verifyToken",value:d.verifyToken,onChange:z,placeholder:"whatsms_token",className:"flex-1 w-full px-4 py-2 rounded-xl bg-white dark:bg-surface-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-all text-sm font-mono"}),i.jsx("div",{className:"text-xs px-2 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 rounded",children:o("label_editable")})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-2",children:o("hint_verify_token")})]}),i.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/10 p-4 rounded-xl text-sm text-emerald-800 dark:text-emerald-300",children:[i.jsx("h4",{className:"font-semibold mb-1",children:o("label_setup_instructions")}),i.jsxs("ol",{className:"list-decimal pl-4 space-y-1 opacity-80",children:[i.jsx("li",{children:o("instr_step_1")}),i.jsx("li",{children:o("instr_step_2")}),i.jsx("li",{children:o("instr_step_3")}),i.jsx("li",{children:o("instr_step_4")}),i.jsxs("li",{children:[o("instr_step_5")," ",i.jsx("code",{children:"messages"}),", ",i.jsx("code",{children:"message_status"}),"."]})]})]})]})]})]})]})};function yA(){const{t:n}=ut(),[s,l]=A.useState([]),[o,c]=A.useState(!0),[d,f]=A.useState(null),[h,p]=A.useState(null),[m,y]=A.useState("");A.useEffect(()=>{x()},[]),A.useEffect(()=>{const E=()=>f(null);return document.addEventListener("click",E),()=>document.removeEventListener("click",E)},[]);const x=async()=>{try{const E=await ce.get("/flows");l(E)}catch(E){console.error("Failed to fetch flows",E)}finally{c(!1)}},v=async E=>{if(confirm(n("confirm_delete_flow")))try{await ce.delete(`/flows/${E}`),x()}catch(z){console.error("Failed to delete flow",z)}},N=E=>{p(E.id),y(E.name),f(null)},S=async()=>{if(!m.trim()){p(null);return}const E=s.find(z=>z.id===h);if(E&&E.name!==m)try{await ce.put(`/flows/${E.id}`,{...E,name:m}),l(s.map(z=>z.id===h?{...z,name:m}:z))}catch(z){console.error("Failed to rename flow",z),alert(n("error_rename_flow")),x()}p(null)},T=async E=>{try{await ce.put(`/flows/${E.id}`,{isActive:!E.isActive}),x()}catch(z){console.error("Failed to update status",z)}};return o?i.jsx("div",{className:"p-8 text-center text-gray-400",children:"Loading automations..."}):i.jsxs("div",{className:"p-6 max-w-7xl mx-auto min-h-screen",children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-neutral-100 mb-2",children:n("automations_title")}),i.jsx("p",{className:"text-gray-500 dark:text-neutral-400",children:n("automations_subtitle")})]}),i.jsxs(go,{to:"/automations/new",className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors shadow-sm",children:[i.jsx(ka,{size:20}),n("btn_create_flow")]})]}),s.length===0?i.jsxs("div",{className:"text-center py-16 bg-white dark:bg-[#0F0F0F] rounded-xl border border-gray-200 dark:border-[#262626] shadow-sm transition-colors",children:[i.jsx(yo,{size:48,className:"mx-auto text-gray-400 dark:text-neutral-600 mb-4"}),i.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-2",children:n("no_automations")}),i.jsx("p",{className:"text-gray-500 dark:text-neutral-400 mb-6",children:n("no_automations_subtitle")}),i.jsxs(go,{to:"/automations/new",className:"text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300 font-medium",children:[n("btn_get_started")," "]})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(E=>i.jsxs("div",{className:"bg-white dark:bg-[#0F0F0F] rounded-xl border border-gray-200 dark:border-[#262626] p-6 hover:shadow-md transition-all duration-200",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("div",{className:`p-2 rounded-lg ${E.isActive?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-500 dark:bg-[#1A1A1A] dark:text-neutral-400"}`,children:i.jsx(yo,{size:24})}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:z=>{z.stopPropagation(),z.preventDefault(),f(d===E.id?null:E.id)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-white p-1 rounded-full hover:bg-gray-100 dark:hover:bg-[#262626] transition-colors",children:[i.jsx("span",{className:"sr-only",children:"Menu"}),i.jsx(Lp,{size:20})]}),d===E.id&&i.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-[#1A1A1A] rounded-lg shadow-xl py-1 z-50 border border-gray-200 dark:border-[#333] animate-in fade-in zoom-in-95 duration-100",children:[i.jsxs("button",{onClick:z=>{z.stopPropagation(),N(E)},className:"w-full text-left px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#252525] flex items-center gap-2",children:[i.jsx(Er,{size:16})," ",n("btn_edit")]}),i.jsxs("button",{onClick:z=>{z.stopPropagation(),f(null),v(E.id)},className:"w-full text-left px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[i.jsx(sn,{size:16})," ",n("btn_delete")]})]})]})]}),h===E.id?i.jsxs("div",{className:"mb-4",children:[i.jsx("input",{type:"text",autoFocus:!0,value:m,onChange:z=>y(z.target.value),onBlur:S,onKeyDown:z=>{z.key==="Enter"&&S(),z.key==="Escape"&&p(null)},className:"w-full text-lg font-semibold text-gray-900 dark:text-neutral-100 bg-white dark:bg-[#1A1A1A] border border-indigo-500 rounded px-2 py-1 outline-none shadow-sm"}),i.jsx("p",{className:"text-xs text-indigo-500 mt-1",children:n("placeholder_rename")})]}):i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-neutral-100 mb-2 truncate cursor-pointer hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",onDoubleClick:()=>N(E),title:n("btn_edit"),children:E.name}),i.jsx("p",{className:"text-gray-500 dark:text-neutral-400 text-sm mb-4 line-clamp-2",children:E.description||"No description provided."})]}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100 dark:border-[#262626]",children:[i.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-neutral-400",children:i.jsxs("span",{children:[E._count?.executions||0," ",n("label_runs")]})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>T(E),className:`p-2 rounded-lg transition-colors ${E.isActive?"bg-green-100 text-green-600 hover:bg-green-200 dark:bg-green-900/30 dark:text-green-400 dark:hover:bg-green-900/50":"bg-gray-100 text-gray-500 hover:bg-gray-200 dark:bg-[#1A1A1A] dark:text-neutral-400 dark:hover:bg-[#262626]"}`,title:E.isActive?n("tooltip_active"):n("tooltip_draft"),children:E.isActive?i.jsx(Rp,{size:18}):i.jsx(ti,{size:18})}),i.jsx(go,{to:`/automations/${E.id}`,className:"p-2 bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100 dark:bg-indigo-900/30 dark:text-indigo-400 dark:hover:bg-indigo-900/50",title:n("btn_edit"),children:i.jsx(w_,{size:18})})]})]})]},E.id))})]})}function st(n){if(typeof n=="string"||typeof n=="number")return""+n;let s="";if(Array.isArray(n))for(let l=0,o;l<n.length;l++)(o=st(n[l]))!==""&&(s+=(s&&" ")+o);else for(let l in n)n[l]&&(s+=(s&&" ")+l);return s}var bA={value:()=>{}};function Lo(){for(var n=0,s=arguments.length,l={},o;n<s;++n){if(!(o=arguments[n]+"")||o in l||/[\s.]/.test(o))throw new Error("illegal type: "+o);l[o]=[]}return new ho(l)}function ho(n){this._=n}function vA(n,s){return n.trim().split(/^|\s+/).map(function(l){var o="",c=l.indexOf(".");if(c>=0&&(o=l.slice(c+1),l=l.slice(0,c)),l&&!s.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:o}})}ho.prototype=Lo.prototype={constructor:ho,on:function(n,s){var l=this._,o=vA(n+"",l),c,d=-1,f=o.length;if(arguments.length<2){for(;++d<f;)if((c=(n=o[d]).type)&&(c=_A(l[c],n.name)))return c;return}if(s!=null&&typeof s!="function")throw new Error("invalid callback: "+s);for(;++d<f;)if(c=(n=o[d]).type)l[c]=L0(l[c],n.name,s);else if(s==null)for(c in l)l[c]=L0(l[c],n.name,null);return this},copy:function(){var n={},s=this._;for(var l in s)n[l]=s[l].slice();return new ho(n)},call:function(n,s){if((c=arguments.length-2)>0)for(var l=new Array(c),o=0,c,d;o<c;++o)l[o]=arguments[o+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(d=this._[n],o=0,c=d.length;o<c;++o)d[o].value.apply(s,l)},apply:function(n,s,l){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var o=this._[n],c=0,d=o.length;c<d;++c)o[c].value.apply(s,l)}};function _A(n,s){for(var l=0,o=n.length,c;l<o;++l)if((c=n[l]).name===s)return c.value}function L0(n,s,l){for(var o=0,c=n.length;o<c;++o)if(n[o].name===s){n[o]=bA,n=n.slice(0,o).concat(n.slice(o+1));break}return l!=null&&n.push({name:s,value:l}),n}var $d="http://www.w3.org/1999/xhtml";const R0={svg:"http://www.w3.org/2000/svg",xhtml:$d,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ro(n){var s=n+="",l=s.indexOf(":");return l>=0&&(s=n.slice(0,l))!=="xmlns"&&(n=n.slice(l+1)),R0.hasOwnProperty(s)?{space:R0[s],local:n}:n}function NA(n){return function(){var s=this.ownerDocument,l=this.namespaceURI;return l===$d&&s.documentElement.namespaceURI===$d?s.createElement(n):s.createElementNS(l,n)}}function wA(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function ax(n){var s=Ro(n);return(s.local?wA:NA)(s)}function jA(){}function Pd(n){return n==null?jA:function(){return this.querySelector(n)}}function SA(n){typeof n!="function"&&(n=Pd(n));for(var s=this._groups,l=s.length,o=new Array(l),c=0;c<l;++c)for(var d=s[c],f=d.length,h=o[c]=new Array(f),p,m,y=0;y<f;++y)(p=d[y])&&(m=n.call(p,p.__data__,y,d))&&("__data__"in p&&(m.__data__=p.__data__),h[y]=m);return new Bt(o,this._parents)}function kA(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function CA(){return[]}function sx(n){return n==null?CA:function(){return this.querySelectorAll(n)}}function EA(n){return function(){return kA(n.apply(this,arguments))}}function zA(n){typeof n=="function"?n=EA(n):n=sx(n);for(var s=this._groups,l=s.length,o=[],c=[],d=0;d<l;++d)for(var f=s[d],h=f.length,p,m=0;m<h;++m)(p=f[m])&&(o.push(n.call(p,p.__data__,m,f)),c.push(p));return new Bt(o,c)}function ix(n){return function(){return this.matches(n)}}function rx(n){return function(s){return s.matches(n)}}var AA=Array.prototype.find;function TA(n){return function(){return AA.call(this.children,n)}}function MA(){return this.firstElementChild}function DA(n){return this.select(n==null?MA:TA(typeof n=="function"?n:rx(n)))}var OA=Array.prototype.filter;function LA(){return Array.from(this.children)}function RA(n){return function(){return OA.call(this.children,n)}}function $A(n){return this.selectAll(n==null?LA:RA(typeof n=="function"?n:rx(n)))}function HA(n){typeof n!="function"&&(n=ix(n));for(var s=this._groups,l=s.length,o=new Array(l),c=0;c<l;++c)for(var d=s[c],f=d.length,h=o[c]=[],p,m=0;m<f;++m)(p=d[m])&&n.call(p,p.__data__,m,d)&&h.push(p);return new Bt(o,this._parents)}function lx(n){return new Array(n.length)}function UA(){return new Bt(this._enter||this._groups.map(lx),this._parents)}function No(n,s){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=s}No.prototype={constructor:No,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,s){return this._parent.insertBefore(n,s)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function BA(n){return function(){return n}}function VA(n,s,l,o,c,d){for(var f=0,h,p=s.length,m=d.length;f<m;++f)(h=s[f])?(h.__data__=d[f],o[f]=h):l[f]=new No(n,d[f]);for(;f<p;++f)(h=s[f])&&(c[f]=h)}function qA(n,s,l,o,c,d,f){var h,p,m=new Map,y=s.length,x=d.length,v=new Array(y),N;for(h=0;h<y;++h)(p=s[h])&&(v[h]=N=f.call(p,p.__data__,h,s)+"",m.has(N)?c[h]=p:m.set(N,p));for(h=0;h<x;++h)N=f.call(n,d[h],h,d)+"",(p=m.get(N))?(o[h]=p,p.__data__=d[h],m.delete(N)):l[h]=new No(n,d[h]);for(h=0;h<y;++h)(p=s[h])&&m.get(v[h])===p&&(c[h]=p)}function YA(n){return n.__data__}function GA(n,s){if(!arguments.length)return Array.from(this,YA);var l=s?qA:VA,o=this._parents,c=this._groups;typeof n!="function"&&(n=BA(n));for(var d=c.length,f=new Array(d),h=new Array(d),p=new Array(d),m=0;m<d;++m){var y=o[m],x=c[m],v=x.length,N=XA(n.call(y,y&&y.__data__,m,o)),S=N.length,T=h[m]=new Array(S),E=f[m]=new Array(S),z=p[m]=new Array(v);l(y,x,T,E,z,N,s);for(var w=0,_=0,C,$;w<S;++w)if(C=T[w]){for(w>=_&&(_=w+1);!($=E[_])&&++_<S;);C._next=$||null}}return f=new Bt(f,o),f._enter=h,f._exit=p,f}function XA(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function ZA(){return new Bt(this._exit||this._groups.map(lx),this._parents)}function QA(n,s,l){var o=this.enter(),c=this,d=this.exit();return typeof n=="function"?(o=n(o),o&&(o=o.selection())):o=o.append(n+""),s!=null&&(c=s(c),c&&(c=c.selection())),l==null?d.remove():l(d),o&&c?o.merge(c).order():c}function FA(n){for(var s=n.selection?n.selection():n,l=this._groups,o=s._groups,c=l.length,d=o.length,f=Math.min(c,d),h=new Array(c),p=0;p<f;++p)for(var m=l[p],y=o[p],x=m.length,v=h[p]=new Array(x),N,S=0;S<x;++S)(N=m[S]||y[S])&&(v[S]=N);for(;p<c;++p)h[p]=l[p];return new Bt(h,this._parents)}function KA(){for(var n=this._groups,s=-1,l=n.length;++s<l;)for(var o=n[s],c=o.length-1,d=o[c],f;--c>=0;)(f=o[c])&&(d&&f.compareDocumentPosition(d)^4&&d.parentNode.insertBefore(f,d),d=f);return this}function IA(n){n||(n=JA);function s(x,v){return x&&v?n(x.__data__,v.__data__):!x-!v}for(var l=this._groups,o=l.length,c=new Array(o),d=0;d<o;++d){for(var f=l[d],h=f.length,p=c[d]=new Array(h),m,y=0;y<h;++y)(m=f[y])&&(p[y]=m);p.sort(s)}return new Bt(c,this._parents).order()}function JA(n,s){return n<s?-1:n>s?1:n>=s?0:NaN}function WA(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function PA(){return Array.from(this)}function eT(){for(var n=this._groups,s=0,l=n.length;s<l;++s)for(var o=n[s],c=0,d=o.length;c<d;++c){var f=o[c];if(f)return f}return null}function tT(){let n=0;for(const s of this)++n;return n}function nT(){return!this.node()}function aT(n){for(var s=this._groups,l=0,o=s.length;l<o;++l)for(var c=s[l],d=0,f=c.length,h;d<f;++d)(h=c[d])&&n.call(h,h.__data__,d,c);return this}function sT(n){return function(){this.removeAttribute(n)}}function iT(n){return function(){this.removeAttributeNS(n.space,n.local)}}function rT(n,s){return function(){this.setAttribute(n,s)}}function lT(n,s){return function(){this.setAttributeNS(n.space,n.local,s)}}function oT(n,s){return function(){var l=s.apply(this,arguments);l==null?this.removeAttribute(n):this.setAttribute(n,l)}}function cT(n,s){return function(){var l=s.apply(this,arguments);l==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,l)}}function uT(n,s){var l=Ro(n);if(arguments.length<2){var o=this.node();return l.local?o.getAttributeNS(l.space,l.local):o.getAttribute(l)}return this.each((s==null?l.local?iT:sT:typeof s=="function"?l.local?cT:oT:l.local?lT:rT)(l,s))}function ox(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function dT(n){return function(){this.style.removeProperty(n)}}function fT(n,s,l){return function(){this.style.setProperty(n,s,l)}}function gT(n,s,l){return function(){var o=s.apply(this,arguments);o==null?this.style.removeProperty(n):this.style.setProperty(n,o,l)}}function hT(n,s,l){return arguments.length>1?this.each((s==null?dT:typeof s=="function"?gT:fT)(n,s,l??"")):si(this.node(),n)}function si(n,s){return n.style.getPropertyValue(s)||ox(n).getComputedStyle(n,null).getPropertyValue(s)}function mT(n){return function(){delete this[n]}}function pT(n,s){return function(){this[n]=s}}function xT(n,s){return function(){var l=s.apply(this,arguments);l==null?delete this[n]:this[n]=l}}function yT(n,s){return arguments.length>1?this.each((s==null?mT:typeof s=="function"?xT:pT)(n,s)):this.node()[n]}function cx(n){return n.trim().split(/^|\s+/)}function ef(n){return n.classList||new ux(n)}function ux(n){this._node=n,this._names=cx(n.getAttribute("class")||"")}ux.prototype={add:function(n){var s=this._names.indexOf(n);s<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var s=this._names.indexOf(n);s>=0&&(this._names.splice(s,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function dx(n,s){for(var l=ef(n),o=-1,c=s.length;++o<c;)l.add(s[o])}function fx(n,s){for(var l=ef(n),o=-1,c=s.length;++o<c;)l.remove(s[o])}function bT(n){return function(){dx(this,n)}}function vT(n){return function(){fx(this,n)}}function _T(n,s){return function(){(s.apply(this,arguments)?dx:fx)(this,n)}}function NT(n,s){var l=cx(n+"");if(arguments.length<2){for(var o=ef(this.node()),c=-1,d=l.length;++c<d;)if(!o.contains(l[c]))return!1;return!0}return this.each((typeof s=="function"?_T:s?bT:vT)(l,s))}function wT(){this.textContent=""}function jT(n){return function(){this.textContent=n}}function ST(n){return function(){var s=n.apply(this,arguments);this.textContent=s??""}}function kT(n){return arguments.length?this.each(n==null?wT:(typeof n=="function"?ST:jT)(n)):this.node().textContent}function CT(){this.innerHTML=""}function ET(n){return function(){this.innerHTML=n}}function zT(n){return function(){var s=n.apply(this,arguments);this.innerHTML=s??""}}function AT(n){return arguments.length?this.each(n==null?CT:(typeof n=="function"?zT:ET)(n)):this.node().innerHTML}function TT(){this.nextSibling&&this.parentNode.appendChild(this)}function MT(){return this.each(TT)}function DT(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function OT(){return this.each(DT)}function LT(n){var s=typeof n=="function"?n:ax(n);return this.select(function(){return this.appendChild(s.apply(this,arguments))})}function RT(){return null}function $T(n,s){var l=typeof n=="function"?n:ax(n),o=s==null?RT:typeof s=="function"?s:Pd(s);return this.select(function(){return this.insertBefore(l.apply(this,arguments),o.apply(this,arguments)||null)})}function HT(){var n=this.parentNode;n&&n.removeChild(this)}function UT(){return this.each(HT)}function BT(){var n=this.cloneNode(!1),s=this.parentNode;return s?s.insertBefore(n,this.nextSibling):n}function VT(){var n=this.cloneNode(!0),s=this.parentNode;return s?s.insertBefore(n,this.nextSibling):n}function qT(n){return this.select(n?VT:BT)}function YT(n){return arguments.length?this.property("__data__",n):this.node().__data__}function GT(n){return function(s){n.call(this,s,this.__data__)}}function XT(n){return n.trim().split(/^|\s+/).map(function(s){var l="",o=s.indexOf(".");return o>=0&&(l=s.slice(o+1),s=s.slice(0,o)),{type:s,name:l}})}function ZT(n){return function(){var s=this.__on;if(s){for(var l=0,o=-1,c=s.length,d;l<c;++l)d=s[l],(!n.type||d.type===n.type)&&d.name===n.name?this.removeEventListener(d.type,d.listener,d.options):s[++o]=d;++o?s.length=o:delete this.__on}}}function QT(n,s,l){return function(){var o=this.__on,c,d=GT(s);if(o){for(var f=0,h=o.length;f<h;++f)if((c=o[f]).type===n.type&&c.name===n.name){this.removeEventListener(c.type,c.listener,c.options),this.addEventListener(c.type,c.listener=d,c.options=l),c.value=s;return}}this.addEventListener(n.type,d,l),c={type:n.type,name:n.name,value:s,listener:d,options:l},o?o.push(c):this.__on=[c]}}function FT(n,s,l){var o=XT(n+""),c,d=o.length,f;if(arguments.length<2){var h=this.node().__on;if(h){for(var p=0,m=h.length,y;p<m;++p)for(c=0,y=h[p];c<d;++c)if((f=o[c]).type===y.type&&f.name===y.name)return y.value}return}for(h=s?QT:ZT,c=0;c<d;++c)this.each(h(o[c],s,l));return this}function gx(n,s,l){var o=ox(n),c=o.CustomEvent;typeof c=="function"?c=new c(s,l):(c=o.document.createEvent("Event"),l?(c.initEvent(s,l.bubbles,l.cancelable),c.detail=l.detail):c.initEvent(s,!1,!1)),n.dispatchEvent(c)}function KT(n,s){return function(){return gx(this,n,s)}}function IT(n,s){return function(){return gx(this,n,s.apply(this,arguments))}}function JT(n,s){return this.each((typeof s=="function"?IT:KT)(n,s))}function*WT(){for(var n=this._groups,s=0,l=n.length;s<l;++s)for(var o=n[s],c=0,d=o.length,f;c<d;++c)(f=o[c])&&(yield f)}var hx=[null];function Bt(n,s){this._groups=n,this._parents=s}function zr(){return new Bt([[document.documentElement]],hx)}function PT(){return this}Bt.prototype=zr.prototype={constructor:Bt,select:SA,selectAll:zA,selectChild:DA,selectChildren:$A,filter:HA,data:GA,enter:UA,exit:ZA,join:QA,merge:FA,selection:PT,order:KA,sort:IA,call:WA,nodes:PA,node:eT,size:tT,empty:nT,each:aT,attr:uT,style:hT,property:yT,classed:NT,text:kT,html:AT,raise:MT,lower:OT,append:LT,insert:$T,remove:UT,clone:qT,datum:YT,on:FT,dispatch:JT,[Symbol.iterator]:WT};function Ut(n){return typeof n=="string"?new Bt([[document.querySelector(n)]],[document.documentElement]):new Bt([[n]],hx)}function e6(n){let s;for(;s=n.sourceEvent;)n=s;return n}function tn(n,s){if(n=e6(n),s===void 0&&(s=n.currentTarget),s){var l=s.ownerSVGElement||s;if(l.createSVGPoint){var o=l.createSVGPoint();return o.x=n.clientX,o.y=n.clientY,o=o.matrixTransform(s.getScreenCTM().inverse()),[o.x,o.y]}if(s.getBoundingClientRect){var c=s.getBoundingClientRect();return[n.clientX-c.left-s.clientLeft,n.clientY-c.top-s.clientTop]}}return[n.pageX,n.pageY]}const t6={passive:!1},br={capture:!0,passive:!1};function wd(n){n.stopImmediatePropagation()}function ni(n){n.preventDefault(),n.stopImmediatePropagation()}function mx(n){var s=n.document.documentElement,l=Ut(n).on("dragstart.drag",ni,br);"onselectstart"in s?l.on("selectstart.drag",ni,br):(s.__noselect=s.style.MozUserSelect,s.style.MozUserSelect="none")}function px(n,s){var l=n.document.documentElement,o=Ut(n).on("dragstart.drag",null);s&&(o.on("click.drag",ni,br),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in l?o.on("selectstart.drag",null):(l.style.MozUserSelect=l.__noselect,delete l.__noselect)}const io=n=>()=>n;function Hd(n,{sourceEvent:s,subject:l,target:o,identifier:c,active:d,x:f,y:h,dx:p,dy:m,dispatch:y}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:s,enumerable:!0,configurable:!0},subject:{value:l,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:c,enumerable:!0,configurable:!0},active:{value:d,enumerable:!0,configurable:!0},x:{value:f,enumerable:!0,configurable:!0},y:{value:h,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:y}})}Hd.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function n6(n){return!n.ctrlKey&&!n.button}function a6(){return this.parentNode}function s6(n,s){return s??{x:n.x,y:n.y}}function i6(){return navigator.maxTouchPoints||"ontouchstart"in this}function xx(){var n=n6,s=a6,l=s6,o=i6,c={},d=Lo("start","drag","end"),f=0,h,p,m,y,x=0;function v(C){C.on("mousedown.drag",N).filter(o).on("touchstart.drag",E).on("touchmove.drag",z,t6).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function N(C,$){if(!(y||!n.call(this,C,$))){var O=_(this,s.call(this,C,$),C,$,"mouse");O&&(Ut(C.view).on("mousemove.drag",S,br).on("mouseup.drag",T,br),mx(C.view),wd(C),m=!1,h=C.clientX,p=C.clientY,O("start",C))}}function S(C){if(ni(C),!m){var $=C.clientX-h,O=C.clientY-p;m=$*$+O*O>x}c.mouse("drag",C)}function T(C){Ut(C.view).on("mousemove.drag mouseup.drag",null),px(C.view,m),ni(C),c.mouse("end",C)}function E(C,$){if(n.call(this,C,$)){var O=C.changedTouches,V=s.call(this,C,$),G=O.length,L,F;for(L=0;L<G;++L)(F=_(this,V,C,$,O[L].identifier,O[L]))&&(wd(C),F("start",C,O[L]))}}function z(C){var $=C.changedTouches,O=$.length,V,G;for(V=0;V<O;++V)(G=c[$[V].identifier])&&(ni(C),G("drag",C,$[V]))}function w(C){var $=C.changedTouches,O=$.length,V,G;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),V=0;V<O;++V)(G=c[$[V].identifier])&&(wd(C),G("end",C,$[V]))}function _(C,$,O,V,G,L){var F=d.copy(),q=tn(L||O,$),Z,te,M;if((M=l.call(C,new Hd("beforestart",{sourceEvent:O,target:v,identifier:G,active:f,x:q[0],y:q[1],dx:0,dy:0,dispatch:F}),V))!=null)return Z=M.x-q[0]||0,te=M.y-q[1]||0,function U(j,D,H){var Y=q,ee;switch(j){case"start":c[G]=U,ee=f++;break;case"end":delete c[G],--f;case"drag":q=tn(H||D,$),ee=f;break}F.call(j,C,new Hd(j,{sourceEvent:D,subject:M,target:v,identifier:G,active:ee,x:q[0]+Z,y:q[1]+te,dx:q[0]-Y[0],dy:q[1]-Y[1],dispatch:F}),V)}}return v.filter=function(C){return arguments.length?(n=typeof C=="function"?C:io(!!C),v):n},v.container=function(C){return arguments.length?(s=typeof C=="function"?C:io(C),v):s},v.subject=function(C){return arguments.length?(l=typeof C=="function"?C:io(C),v):l},v.touchable=function(C){return arguments.length?(o=typeof C=="function"?C:io(!!C),v):o},v.on=function(){var C=d.on.apply(d,arguments);return C===d?v:C},v.clickDistance=function(C){return arguments.length?(x=(C=+C)*C,v):Math.sqrt(x)},v}var ii=0,ur=0,or=0,yx=1e3,wo,dr,jo=0,ns=0,$o=0,vr=typeof performance=="object"&&performance.now?performance:Date,bx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function tf(){return ns||(bx(r6),ns=vr.now()+$o)}function r6(){ns=0}function So(){this._call=this._time=this._next=null}So.prototype=vx.prototype={constructor:So,restart:function(n,s,l){if(typeof n!="function")throw new TypeError("callback is not a function");l=(l==null?tf():+l)+(s==null?0:+s),!this._next&&dr!==this&&(dr?dr._next=this:wo=this,dr=this),this._call=n,this._time=l,Ud()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ud())}};function vx(n,s,l){var o=new So;return o.restart(n,s,l),o}function l6(){tf(),++ii;for(var n=wo,s;n;)(s=ns-n._time)>=0&&n._call.call(void 0,s),n=n._next;--ii}function $0(){ns=(jo=vr.now())+$o,ii=ur=0;try{l6()}finally{ii=0,c6(),ns=0}}function o6(){var n=vr.now(),s=n-jo;s>yx&&($o-=s,jo=n)}function c6(){for(var n,s=wo,l,o=1/0;s;)s._call?(o>s._time&&(o=s._time),n=s,s=s._next):(l=s._next,s._next=null,s=n?n._next=l:wo=l);dr=n,Ud(o)}function Ud(n){if(!ii){ur&&(ur=clearTimeout(ur));var s=n-ns;s>24?(n<1/0&&(ur=setTimeout($0,n-vr.now()-$o)),or&&(or=clearInterval(or))):(or||(jo=vr.now(),or=setInterval(o6,yx)),ii=1,bx($0))}}function H0(n,s,l){var o=new So;return s=s==null?0:+s,o.restart(c=>{o.stop(),n(c+s)},s,l),o}var u6=Lo("start","end","cancel","interrupt"),d6=[],_x=0,U0=1,Bd=2,mo=3,B0=4,Vd=5,po=6;function Ho(n,s,l,o,c,d){var f=n.__transition;if(!f)n.__transition={};else if(l in f)return;f6(n,l,{name:s,index:o,group:c,on:u6,tween:d6,time:d.time,delay:d.delay,duration:d.duration,ease:d.ease,timer:null,state:_x})}function nf(n,s){var l=rn(n,s);if(l.state>_x)throw new Error("too late; already scheduled");return l}function yn(n,s){var l=rn(n,s);if(l.state>mo)throw new Error("too late; already running");return l}function rn(n,s){var l=n.__transition;if(!l||!(l=l[s]))throw new Error("transition not found");return l}function f6(n,s,l){var o=n.__transition,c;o[s]=l,l.timer=vx(d,0,l.time);function d(m){l.state=U0,l.timer.restart(f,l.delay,l.time),l.delay<=m&&f(m-l.delay)}function f(m){var y,x,v,N;if(l.state!==U0)return p();for(y in o)if(N=o[y],N.name===l.name){if(N.state===mo)return H0(f);N.state===B0?(N.state=po,N.timer.stop(),N.on.call("interrupt",n,n.__data__,N.index,N.group),delete o[y]):+y<s&&(N.state=po,N.timer.stop(),N.on.call("cancel",n,n.__data__,N.index,N.group),delete o[y])}if(H0(function(){l.state===mo&&(l.state=B0,l.timer.restart(h,l.delay,l.time),h(m))}),l.state=Bd,l.on.call("start",n,n.__data__,l.index,l.group),l.state===Bd){for(l.state=mo,c=new Array(v=l.tween.length),y=0,x=-1;y<v;++y)(N=l.tween[y].value.call(n,n.__data__,l.index,l.group))&&(c[++x]=N);c.length=x+1}}function h(m){for(var y=m<l.duration?l.ease.call(null,m/l.duration):(l.timer.restart(p),l.state=Vd,1),x=-1,v=c.length;++x<v;)c[x].call(n,y);l.state===Vd&&(l.on.call("end",n,n.__data__,l.index,l.group),p())}function p(){l.state=po,l.timer.stop(),delete o[s];for(var m in o)return;delete n.__transition}}function xo(n,s){var l=n.__transition,o,c,d=!0,f;if(l){s=s==null?null:s+"";for(f in l){if((o=l[f]).name!==s){d=!1;continue}c=o.state>Bd&&o.state<Vd,o.state=po,o.timer.stop(),o.on.call(c?"interrupt":"cancel",n,n.__data__,o.index,o.group),delete l[f]}d&&delete n.__transition}}function g6(n){return this.each(function(){xo(this,n)})}function h6(n,s){var l,o;return function(){var c=yn(this,n),d=c.tween;if(d!==l){o=l=d;for(var f=0,h=o.length;f<h;++f)if(o[f].name===s){o=o.slice(),o.splice(f,1);break}}c.tween=o}}function m6(n,s,l){var o,c;if(typeof l!="function")throw new Error;return function(){var d=yn(this,n),f=d.tween;if(f!==o){c=(o=f).slice();for(var h={name:s,value:l},p=0,m=c.length;p<m;++p)if(c[p].name===s){c[p]=h;break}p===m&&c.push(h)}d.tween=c}}function p6(n,s){var l=this._id;if(n+="",arguments.length<2){for(var o=rn(this.node(),l).tween,c=0,d=o.length,f;c<d;++c)if((f=o[c]).name===n)return f.value;return null}return this.each((s==null?h6:m6)(l,n,s))}function af(n,s,l){var o=n._id;return n.each(function(){var c=yn(this,o);(c.value||(c.value={}))[s]=l.apply(this,arguments)}),function(c){return rn(c,o).value[s]}}function Nx(n,s){var l;return(typeof s=="number"?Kv:s instanceof s0?a0:(l=s0(s))?(s=l,a0):Iv)(n,s)}function x6(n){return function(){this.removeAttribute(n)}}function y6(n){return function(){this.removeAttributeNS(n.space,n.local)}}function b6(n,s,l){var o,c=l+"",d;return function(){var f=this.getAttribute(n);return f===c?null:f===o?d:d=s(o=f,l)}}function v6(n,s,l){var o,c=l+"",d;return function(){var f=this.getAttributeNS(n.space,n.local);return f===c?null:f===o?d:d=s(o=f,l)}}function _6(n,s,l){var o,c,d;return function(){var f,h=l(this),p;return h==null?void this.removeAttribute(n):(f=this.getAttribute(n),p=h+"",f===p?null:f===o&&p===c?d:(c=p,d=s(o=f,h)))}}function N6(n,s,l){var o,c,d;return function(){var f,h=l(this),p;return h==null?void this.removeAttributeNS(n.space,n.local):(f=this.getAttributeNS(n.space,n.local),p=h+"",f===p?null:f===o&&p===c?d:(c=p,d=s(o=f,h)))}}function w6(n,s){var l=Ro(n),o=l==="transform"?Jv:Nx;return this.attrTween(n,typeof s=="function"?(l.local?N6:_6)(l,o,af(this,"attr."+n,s)):s==null?(l.local?y6:x6)(l):(l.local?v6:b6)(l,o,s))}function j6(n,s){return function(l){this.setAttribute(n,s.call(this,l))}}function S6(n,s){return function(l){this.setAttributeNS(n.space,n.local,s.call(this,l))}}function k6(n,s){var l,o;function c(){var d=s.apply(this,arguments);return d!==o&&(l=(o=d)&&S6(n,d)),l}return c._value=s,c}function C6(n,s){var l,o;function c(){var d=s.apply(this,arguments);return d!==o&&(l=(o=d)&&j6(n,d)),l}return c._value=s,c}function E6(n,s){var l="attr."+n;if(arguments.length<2)return(l=this.tween(l))&&l._value;if(s==null)return this.tween(l,null);if(typeof s!="function")throw new Error;var o=Ro(n);return this.tween(l,(o.local?k6:C6)(o,s))}function z6(n,s){return function(){nf(this,n).delay=+s.apply(this,arguments)}}function A6(n,s){return s=+s,function(){nf(this,n).delay=s}}function T6(n){var s=this._id;return arguments.length?this.each((typeof n=="function"?z6:A6)(s,n)):rn(this.node(),s).delay}function M6(n,s){return function(){yn(this,n).duration=+s.apply(this,arguments)}}function D6(n,s){return s=+s,function(){yn(this,n).duration=s}}function O6(n){var s=this._id;return arguments.length?this.each((typeof n=="function"?M6:D6)(s,n)):rn(this.node(),s).duration}function L6(n,s){if(typeof s!="function")throw new Error;return function(){yn(this,n).ease=s}}function R6(n){var s=this._id;return arguments.length?this.each(L6(s,n)):rn(this.node(),s).ease}function $6(n,s){return function(){var l=s.apply(this,arguments);if(typeof l!="function")throw new Error;yn(this,n).ease=l}}function H6(n){if(typeof n!="function")throw new Error;return this.each($6(this._id,n))}function U6(n){typeof n!="function"&&(n=ix(n));for(var s=this._groups,l=s.length,o=new Array(l),c=0;c<l;++c)for(var d=s[c],f=d.length,h=o[c]=[],p,m=0;m<f;++m)(p=d[m])&&n.call(p,p.__data__,m,d)&&h.push(p);return new Xn(o,this._parents,this._name,this._id)}function B6(n){if(n._id!==this._id)throw new Error;for(var s=this._groups,l=n._groups,o=s.length,c=l.length,d=Math.min(o,c),f=new Array(o),h=0;h<d;++h)for(var p=s[h],m=l[h],y=p.length,x=f[h]=new Array(y),v,N=0;N<y;++N)(v=p[N]||m[N])&&(x[N]=v);for(;h<o;++h)f[h]=s[h];return new Xn(f,this._parents,this._name,this._id)}function V6(n){return(n+"").trim().split(/^|\s+/).every(function(s){var l=s.indexOf(".");return l>=0&&(s=s.slice(0,l)),!s||s==="start"})}function q6(n,s,l){var o,c,d=V6(s)?nf:yn;return function(){var f=d(this,n),h=f.on;h!==o&&(c=(o=h).copy()).on(s,l),f.on=c}}function Y6(n,s){var l=this._id;return arguments.length<2?rn(this.node(),l).on.on(n):this.each(q6(l,n,s))}function G6(n){return function(){var s=this.parentNode;for(var l in this.__transition)if(+l!==n)return;s&&s.removeChild(this)}}function X6(){return this.on("end.remove",G6(this._id))}function Z6(n){var s=this._name,l=this._id;typeof n!="function"&&(n=Pd(n));for(var o=this._groups,c=o.length,d=new Array(c),f=0;f<c;++f)for(var h=o[f],p=h.length,m=d[f]=new Array(p),y,x,v=0;v<p;++v)(y=h[v])&&(x=n.call(y,y.__data__,v,h))&&("__data__"in y&&(x.__data__=y.__data__),m[v]=x,Ho(m[v],s,l,v,m,rn(y,l)));return new Xn(d,this._parents,s,l)}function Q6(n){var s=this._name,l=this._id;typeof n!="function"&&(n=sx(n));for(var o=this._groups,c=o.length,d=[],f=[],h=0;h<c;++h)for(var p=o[h],m=p.length,y,x=0;x<m;++x)if(y=p[x]){for(var v=n.call(y,y.__data__,x,p),N,S=rn(y,l),T=0,E=v.length;T<E;++T)(N=v[T])&&Ho(N,s,l,T,v,S);d.push(v),f.push(y)}return new Xn(d,f,s,l)}var F6=zr.prototype.constructor;function K6(){return new F6(this._groups,this._parents)}function I6(n,s){var l,o,c;return function(){var d=si(this,n),f=(this.style.removeProperty(n),si(this,n));return d===f?null:d===l&&f===o?c:c=s(l=d,o=f)}}function wx(n){return function(){this.style.removeProperty(n)}}function J6(n,s,l){var o,c=l+"",d;return function(){var f=si(this,n);return f===c?null:f===o?d:d=s(o=f,l)}}function W6(n,s,l){var o,c,d;return function(){var f=si(this,n),h=l(this),p=h+"";return h==null&&(p=h=(this.style.removeProperty(n),si(this,n))),f===p?null:f===o&&p===c?d:(c=p,d=s(o=f,h))}}function P6(n,s){var l,o,c,d="style."+s,f="end."+d,h;return function(){var p=yn(this,n),m=p.on,y=p.value[d]==null?h||(h=wx(s)):void 0;(m!==l||c!==y)&&(o=(l=m).copy()).on(f,c=y),p.on=o}}function e8(n,s,l){var o=(n+="")=="transform"?Wv:Nx;return s==null?this.styleTween(n,I6(n,o)).on("end.style."+n,wx(n)):typeof s=="function"?this.styleTween(n,W6(n,o,af(this,"style."+n,s))).each(P6(this._id,n)):this.styleTween(n,J6(n,o,s),l).on("end.style."+n,null)}function t8(n,s,l){return function(o){this.style.setProperty(n,s.call(this,o),l)}}function n8(n,s,l){var o,c;function d(){var f=s.apply(this,arguments);return f!==c&&(o=(c=f)&&t8(n,f,l)),o}return d._value=s,d}function a8(n,s,l){var o="style."+(n+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(s==null)return this.tween(o,null);if(typeof s!="function")throw new Error;return this.tween(o,n8(n,s,l??""))}function s8(n){return function(){this.textContent=n}}function i8(n){return function(){var s=n(this);this.textContent=s??""}}function r8(n){return this.tween("text",typeof n=="function"?i8(af(this,"text",n)):s8(n==null?"":n+""))}function l8(n){return function(s){this.textContent=n.call(this,s)}}function o8(n){var s,l;function o(){var c=n.apply(this,arguments);return c!==l&&(s=(l=c)&&l8(c)),s}return o._value=n,o}function c8(n){var s="text";if(arguments.length<1)return(s=this.tween(s))&&s._value;if(n==null)return this.tween(s,null);if(typeof n!="function")throw new Error;return this.tween(s,o8(n))}function u8(){for(var n=this._name,s=this._id,l=jx(),o=this._groups,c=o.length,d=0;d<c;++d)for(var f=o[d],h=f.length,p,m=0;m<h;++m)if(p=f[m]){var y=rn(p,s);Ho(p,n,l,m,f,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new Xn(o,this._parents,n,l)}function d8(){var n,s,l=this,o=l._id,c=l.size();return new Promise(function(d,f){var h={value:f},p={value:function(){--c===0&&d()}};l.each(function(){var m=yn(this,o),y=m.on;y!==n&&(s=(n=y).copy(),s._.cancel.push(h),s._.interrupt.push(h),s._.end.push(p)),m.on=s}),c===0&&d()})}var f8=0;function Xn(n,s,l,o){this._groups=n,this._parents=s,this._name=l,this._id=o}function jx(){return++f8}var qn=zr.prototype;Xn.prototype={constructor:Xn,select:Z6,selectAll:Q6,selectChild:qn.selectChild,selectChildren:qn.selectChildren,filter:U6,merge:B6,selection:K6,transition:u8,call:qn.call,nodes:qn.nodes,node:qn.node,size:qn.size,empty:qn.empty,each:qn.each,on:Y6,attr:w6,attrTween:E6,style:e8,styleTween:a8,text:r8,textTween:c8,remove:X6,tween:p6,delay:T6,duration:O6,ease:R6,easeVarying:H6,end:d8,[Symbol.iterator]:qn[Symbol.iterator]};function g8(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var h8={time:null,delay:0,duration:250,ease:g8};function m8(n,s){for(var l;!(l=n.__transition)||!(l=l[s]);)if(!(n=n.parentNode))throw new Error(`transition ${s} not found`);return l}function p8(n){var s,l;n instanceof Xn?(s=n._id,n=n._name):(s=jx(),(l=h8).time=tf(),n=n==null?null:n+"");for(var o=this._groups,c=o.length,d=0;d<c;++d)for(var f=o[d],h=f.length,p,m=0;m<h;++m)(p=f[m])&&Ho(p,n,s,m,f,l||m8(p,s));return new Xn(o,this._parents,n,s)}zr.prototype.interrupt=g6;zr.prototype.transition=p8;const ro=n=>()=>n;function x8(n,{sourceEvent:s,target:l,transform:o,dispatch:c}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:s,enumerable:!0,configurable:!0},target:{value:l,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:c}})}function Yn(n,s,l){this.k=n,this.x=s,this.y=l}Yn.prototype={constructor:Yn,scale:function(n){return n===1?this:new Yn(this.k*n,this.x,this.y)},translate:function(n,s){return n===0&s===0?this:new Yn(this.k,this.x+this.k*n,this.y+this.k*s)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Uo=new Yn(1,0,0);Sx.prototype=Yn.prototype;function Sx(n){for(;!n.__zoom;)if(!(n=n.parentNode))return Uo;return n.__zoom}function jd(n){n.stopImmediatePropagation()}function cr(n){n.preventDefault(),n.stopImmediatePropagation()}function y8(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function b8(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function V0(){return this.__zoom||Uo}function v8(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function _8(){return navigator.maxTouchPoints||"ontouchstart"in this}function N8(n,s,l){var o=n.invertX(s[0][0])-l[0][0],c=n.invertX(s[1][0])-l[1][0],d=n.invertY(s[0][1])-l[0][1],f=n.invertY(s[1][1])-l[1][1];return n.translate(c>o?(o+c)/2:Math.min(0,o)||Math.max(0,c),f>d?(d+f)/2:Math.min(0,d)||Math.max(0,f))}function kx(){var n=y8,s=b8,l=N8,o=v8,c=_8,d=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],h=250,p=fo,m=Lo("start","zoom","end"),y,x,v,N=500,S=150,T=0,E=10;function z(M){M.property("__zoom",V0).on("wheel.zoom",G,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",F).filter(c).on("touchstart.zoom",q).on("touchmove.zoom",Z).on("touchend.zoom touchcancel.zoom",te).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}z.transform=function(M,U,j,D){var H=M.selection?M.selection():M;H.property("__zoom",V0),M!==H?$(M,U,j,D):H.interrupt().each(function(){O(this,arguments).event(D).start().zoom(null,typeof U=="function"?U.apply(this,arguments):U).end()})},z.scaleBy=function(M,U,j,D){z.scaleTo(M,function(){var H=this.__zoom.k,Y=typeof U=="function"?U.apply(this,arguments):U;return H*Y},j,D)},z.scaleTo=function(M,U,j,D){z.transform(M,function(){var H=s.apply(this,arguments),Y=this.__zoom,ee=j==null?C(H):typeof j=="function"?j.apply(this,arguments):j,Q=Y.invert(ee),W=typeof U=="function"?U.apply(this,arguments):U;return l(_(w(Y,W),ee,Q),H,f)},j,D)},z.translateBy=function(M,U,j,D){z.transform(M,function(){return l(this.__zoom.translate(typeof U=="function"?U.apply(this,arguments):U,typeof j=="function"?j.apply(this,arguments):j),s.apply(this,arguments),f)},null,D)},z.translateTo=function(M,U,j,D,H){z.transform(M,function(){var Y=s.apply(this,arguments),ee=this.__zoom,Q=D==null?C(Y):typeof D=="function"?D.apply(this,arguments):D;return l(Uo.translate(Q[0],Q[1]).scale(ee.k).translate(typeof U=="function"?-U.apply(this,arguments):-U,typeof j=="function"?-j.apply(this,arguments):-j),Y,f)},D,H)};function w(M,U){return U=Math.max(d[0],Math.min(d[1],U)),U===M.k?M:new Yn(U,M.x,M.y)}function _(M,U,j){var D=U[0]-j[0]*M.k,H=U[1]-j[1]*M.k;return D===M.x&&H===M.y?M:new Yn(M.k,D,H)}function C(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function $(M,U,j,D){M.on("start.zoom",function(){O(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){O(this,arguments).event(D).end()}).tween("zoom",function(){var H=this,Y=arguments,ee=O(H,Y).event(D),Q=s.apply(H,Y),W=j==null?C(Q):typeof j=="function"?j.apply(H,Y):j,se=Math.max(Q[1][0]-Q[0][0],Q[1][1]-Q[0][1]),le=H.__zoom,de=typeof U=="function"?U.apply(H,Y):U,be=p(le.invert(W).concat(se/le.k),de.invert(W).concat(se/de.k));return function(me){if(me===1)me=de;else{var oe=be(me),fe=se/oe[2];me=new Yn(fe,W[0]-oe[0]*fe,W[1]-oe[1]*fe)}ee.zoom(null,me)}})}function O(M,U,j){return!j&&M.__zooming||new V(M,U)}function V(M,U){this.that=M,this.args=U,this.active=0,this.sourceEvent=null,this.extent=s.apply(M,U),this.taps=0}V.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,U){return this.mouse&&M!=="mouse"&&(this.mouse[1]=U.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=U.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=U.invert(this.touch1[0])),this.that.__zoom=U,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var U=Ut(this.that).datum();m.call(M,this.that,new x8(M,{sourceEvent:this.sourceEvent,target:z,transform:this.that.__zoom,dispatch:m}),U)}};function G(M,...U){if(!n.apply(this,arguments))return;var j=O(this,U).event(M),D=this.__zoom,H=Math.max(d[0],Math.min(d[1],D.k*Math.pow(2,o.apply(this,arguments)))),Y=tn(M);if(j.wheel)(j.mouse[0][0]!==Y[0]||j.mouse[0][1]!==Y[1])&&(j.mouse[1]=D.invert(j.mouse[0]=Y)),clearTimeout(j.wheel);else{if(D.k===H)return;j.mouse=[Y,D.invert(Y)],xo(this),j.start()}cr(M),j.wheel=setTimeout(ee,S),j.zoom("mouse",l(_(w(D,H),j.mouse[0],j.mouse[1]),j.extent,f));function ee(){j.wheel=null,j.end()}}function L(M,...U){if(v||!n.apply(this,arguments))return;var j=M.currentTarget,D=O(this,U,!0).event(M),H=Ut(M.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",se,!0),Y=tn(M,j),ee=M.clientX,Q=M.clientY;mx(M.view),jd(M),D.mouse=[Y,this.__zoom.invert(Y)],xo(this),D.start();function W(le){if(cr(le),!D.moved){var de=le.clientX-ee,be=le.clientY-Q;D.moved=de*de+be*be>T}D.event(le).zoom("mouse",l(_(D.that.__zoom,D.mouse[0]=tn(le,j),D.mouse[1]),D.extent,f))}function se(le){H.on("mousemove.zoom mouseup.zoom",null),px(le.view,D.moved),cr(le),D.event(le).end()}}function F(M,...U){if(n.apply(this,arguments)){var j=this.__zoom,D=tn(M.changedTouches?M.changedTouches[0]:M,this),H=j.invert(D),Y=j.k*(M.shiftKey?.5:2),ee=l(_(w(j,Y),D,H),s.apply(this,U),f);cr(M),h>0?Ut(this).transition().duration(h).call($,ee,D,M):Ut(this).call(z.transform,ee,D,M)}}function q(M,...U){if(n.apply(this,arguments)){var j=M.touches,D=j.length,H=O(this,U,M.changedTouches.length===D).event(M),Y,ee,Q,W;for(jd(M),ee=0;ee<D;++ee)Q=j[ee],W=tn(Q,this),W=[W,this.__zoom.invert(W),Q.identifier],H.touch0?!H.touch1&&H.touch0[2]!==W[2]&&(H.touch1=W,H.taps=0):(H.touch0=W,Y=!0,H.taps=1+!!y);y&&(y=clearTimeout(y)),Y&&(H.taps<2&&(x=W[0],y=setTimeout(function(){y=null},N)),xo(this),H.start())}}function Z(M,...U){if(this.__zooming){var j=O(this,U).event(M),D=M.changedTouches,H=D.length,Y,ee,Q,W;for(cr(M),Y=0;Y<H;++Y)ee=D[Y],Q=tn(ee,this),j.touch0&&j.touch0[2]===ee.identifier?j.touch0[0]=Q:j.touch1&&j.touch1[2]===ee.identifier&&(j.touch1[0]=Q);if(ee=j.that.__zoom,j.touch1){var se=j.touch0[0],le=j.touch0[1],de=j.touch1[0],be=j.touch1[1],me=(me=de[0]-se[0])*me+(me=de[1]-se[1])*me,oe=(oe=be[0]-le[0])*oe+(oe=be[1]-le[1])*oe;ee=w(ee,Math.sqrt(me/oe)),Q=[(se[0]+de[0])/2,(se[1]+de[1])/2],W=[(le[0]+be[0])/2,(le[1]+be[1])/2]}else if(j.touch0)Q=j.touch0[0],W=j.touch0[1];else return;j.zoom("touch",l(_(ee,Q,W),j.extent,f))}}function te(M,...U){if(this.__zooming){var j=O(this,U).event(M),D=M.changedTouches,H=D.length,Y,ee;for(jd(M),v&&clearTimeout(v),v=setTimeout(function(){v=null},N),Y=0;Y<H;++Y)ee=D[Y],j.touch0&&j.touch0[2]===ee.identifier?delete j.touch0:j.touch1&&j.touch1[2]===ee.identifier&&delete j.touch1;if(j.touch1&&!j.touch0&&(j.touch0=j.touch1,delete j.touch1),j.touch0)j.touch0[1]=this.__zoom.invert(j.touch0[0]);else if(j.end(),j.taps===2&&(ee=tn(ee,this),Math.hypot(x[0]-ee[0],x[1]-ee[1])<E)){var Q=Ut(this).on("dblclick.zoom");Q&&Q.apply(this,arguments)}}}return z.wheelDelta=function(M){return arguments.length?(o=typeof M=="function"?M:ro(+M),z):o},z.filter=function(M){return arguments.length?(n=typeof M=="function"?M:ro(!!M),z):n},z.touchable=function(M){return arguments.length?(c=typeof M=="function"?M:ro(!!M),z):c},z.extent=function(M){return arguments.length?(s=typeof M=="function"?M:ro([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),z):s},z.scaleExtent=function(M){return arguments.length?(d[0]=+M[0],d[1]=+M[1],z):[d[0],d[1]]},z.translateExtent=function(M){return arguments.length?(f[0][0]=+M[0][0],f[1][0]=+M[1][0],f[0][1]=+M[0][1],f[1][1]=+M[1][1],z):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},z.constrain=function(M){return arguments.length?(l=M,z):l},z.duration=function(M){return arguments.length?(h=+M,z):h},z.interpolate=function(M){return arguments.length?(p=M,z):p},z.on=function(){var M=m.on.apply(m,arguments);return M===m?z:M},z.clickDistance=function(M){return arguments.length?(T=(M=+M)*M,z):Math.sqrt(T)},z.tapDistance=function(M){return arguments.length?(E=+M,z):E},z}const xn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:n=>`Node type "${n}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:n=>`The old edge with id=${n} does not exist.`,error009:n=>`Marker type "${n}" doesn't exist.`,error008:(n,{id:s,sourceHandle:l,targetHandle:o})=>`Couldn't create edge for ${n} handle id: "${n==="source"?l:o}", edge id: ${s}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:n=>`Edge type "${n}" not found. Using fallback type "default".`,error012:n=>`Node with id "${n}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(n="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${n}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},_r=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Cx=["Enter"," ","Escape"],Ex={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:n,x:s,y:l})=>`Moved selected node ${n}. New position, x: ${s}, y: ${l}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var ri;(function(n){n.Strict="strict",n.Loose="loose"})(ri||(ri={}));var es;(function(n){n.Free="free",n.Vertical="vertical",n.Horizontal="horizontal"})(es||(es={}));var Nr;(function(n){n.Partial="partial",n.Full="full"})(Nr||(Nr={}));const zx={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var ja;(function(n){n.Bezier="default",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n.SimpleBezier="simplebezier"})(ja||(ja={}));var ko;(function(n){n.Arrow="arrow",n.ArrowClosed="arrowclosed"})(ko||(ko={}));var pe;(function(n){n.Left="left",n.Top="top",n.Right="right",n.Bottom="bottom"})(pe||(pe={}));const q0={[pe.Left]:pe.Right,[pe.Right]:pe.Left,[pe.Top]:pe.Bottom,[pe.Bottom]:pe.Top};function Ax(n){return n===null?null:n?"valid":"invalid"}const Tx=n=>"id"in n&&"source"in n&&"target"in n,w8=n=>"id"in n&&"position"in n&&!("source"in n)&&!("target"in n),sf=n=>"id"in n&&"internals"in n&&!("source"in n)&&!("target"in n),Ar=(n,s=[0,0])=>{const{width:l,height:o}=Zn(n),c=n.origin??s,d=l*c[0],f=o*c[1];return{x:n.position.x-d,y:n.position.y-f}},j8=(n,s={nodeOrigin:[0,0]})=>{if(n.length===0)return{x:0,y:0,width:0,height:0};const l=n.reduce((o,c)=>{const d=typeof c=="string";let f=!s.nodeLookup&&!d?c:void 0;s.nodeLookup&&(f=d?s.nodeLookup.get(c):sf(c)?c:s.nodeLookup.get(c.id));const h=f?Co(f,s.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Bo(o,h)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Vo(l)},Tr=(n,s={})=>{let l={x:1/0,y:1/0,x2:-1/0,y2:-1/0},o=!1;return n.forEach(c=>{(s.filter===void 0||s.filter(c))&&(l=Bo(l,Co(c)),o=!0)}),o?Vo(l):{x:0,y:0,width:0,height:0}},rf=(n,s,[l,o,c]=[0,0,1],d=!1,f=!1)=>{const h={...Dr(s,[l,o,c]),width:s.width/c,height:s.height/c},p=[];for(const m of n.values()){const{measured:y,selectable:x=!0,hidden:v=!1}=m;if(f&&!x||v)continue;const N=y.width??m.width??m.initialWidth??null,S=y.height??m.height??m.initialHeight??null,T=wr(h,oi(m)),E=(N??0)*(S??0),z=d&&T>0;(!m.internals.handleBounds||z||T>=E||m.dragging)&&p.push(m)}return p},S8=(n,s)=>{const l=new Set;return n.forEach(o=>{l.add(o.id)}),s.filter(o=>l.has(o.source)||l.has(o.target))};function k8(n,s){const l=new Map,o=s?.nodes?new Set(s.nodes.map(c=>c.id)):null;return n.forEach(c=>{c.measured.width&&c.measured.height&&(s?.includeHiddenNodes||!c.hidden)&&(!o||o.has(c.id))&&l.set(c.id,c)}),l}async function C8({nodes:n,width:s,height:l,panZoom:o,minZoom:c,maxZoom:d},f){if(n.size===0)return Promise.resolve(!0);const h=k8(n,f),p=Tr(h),m=lf(p,s,l,f?.minZoom??c,f?.maxZoom??d,f?.padding??.1);return await o.setViewport(m,{duration:f?.duration,ease:f?.ease,interpolate:f?.interpolate}),Promise.resolve(!0)}function Mx({nodeId:n,nextPosition:s,nodeLookup:l,nodeOrigin:o=[0,0],nodeExtent:c,onError:d}){const f=l.get(n),h=f.parentId?l.get(f.parentId):void 0,{x:p,y:m}=h?h.internals.positionAbsolute:{x:0,y:0},y=f.origin??o;let x=f.extent||c;if(f.extent==="parent"&&!f.expandParent)if(!h)d?.("005",xn.error005());else{const N=h.measured.width,S=h.measured.height;N&&S&&(x=[[p,m],[p+N,m+S]])}else h&&ci(f.extent)&&(x=[[f.extent[0][0]+p,f.extent[0][1]+m],[f.extent[1][0]+p,f.extent[1][1]+m]]);const v=ci(x)?as(s,x,f.measured):s;return(f.measured.width===void 0||f.measured.height===void 0)&&d?.("015",xn.error015()),{position:{x:v.x-p+(f.measured.width??0)*y[0],y:v.y-m+(f.measured.height??0)*y[1]},positionAbsolute:v}}async function E8({nodesToRemove:n=[],edgesToRemove:s=[],nodes:l,edges:o,onBeforeDelete:c}){const d=new Set(n.map(v=>v.id)),f=[];for(const v of l){if(v.deletable===!1)continue;const N=d.has(v.id),S=!N&&v.parentId&&f.find(T=>T.id===v.parentId);(N||S)&&f.push(v)}const h=new Set(s.map(v=>v.id)),p=o.filter(v=>v.deletable!==!1),y=S8(f,p);for(const v of p)h.has(v.id)&&!y.find(S=>S.id===v.id)&&y.push(v);if(!c)return{edges:y,nodes:f};const x=await c({nodes:f,edges:y});return typeof x=="boolean"?x?{edges:y,nodes:f}:{edges:[],nodes:[]}:x}const li=(n,s=0,l=1)=>Math.min(Math.max(n,s),l),as=(n={x:0,y:0},s,l)=>({x:li(n.x,s[0][0],s[1][0]-(l?.width??0)),y:li(n.y,s[0][1],s[1][1]-(l?.height??0))});function Dx(n,s,l){const{width:o,height:c}=Zn(l),{x:d,y:f}=l.internals.positionAbsolute;return as(n,[[d,f],[d+o,f+c]],s)}const Y0=(n,s,l)=>n<s?li(Math.abs(n-s),1,s)/s:n>l?-li(Math.abs(n-l),1,s)/s:0,Ox=(n,s,l=15,o=40)=>{const c=Y0(n.x,o,s.width-o)*l,d=Y0(n.y,o,s.height-o)*l;return[c,d]},Bo=(n,s)=>({x:Math.min(n.x,s.x),y:Math.min(n.y,s.y),x2:Math.max(n.x2,s.x2),y2:Math.max(n.y2,s.y2)}),qd=({x:n,y:s,width:l,height:o})=>({x:n,y:s,x2:n+l,y2:s+o}),Vo=({x:n,y:s,x2:l,y2:o})=>({x:n,y:s,width:l-n,height:o-s}),oi=(n,s=[0,0])=>{const{x:l,y:o}=sf(n)?n.internals.positionAbsolute:Ar(n,s);return{x:l,y:o,width:n.measured?.width??n.width??n.initialWidth??0,height:n.measured?.height??n.height??n.initialHeight??0}},Co=(n,s=[0,0])=>{const{x:l,y:o}=sf(n)?n.internals.positionAbsolute:Ar(n,s);return{x:l,y:o,x2:l+(n.measured?.width??n.width??n.initialWidth??0),y2:o+(n.measured?.height??n.height??n.initialHeight??0)}},Lx=(n,s)=>Vo(Bo(qd(n),qd(s))),wr=(n,s)=>{const l=Math.max(0,Math.min(n.x+n.width,s.x+s.width)-Math.max(n.x,s.x)),o=Math.max(0,Math.min(n.y+n.height,s.y+s.height)-Math.max(n.y,s.y));return Math.ceil(l*o)},G0=n=>nn(n.width)&&nn(n.height)&&nn(n.x)&&nn(n.y),nn=n=>!isNaN(n)&&isFinite(n),z8=(n,s)=>{},Mr=(n,s=[1,1])=>({x:s[0]*Math.round(n.x/s[0]),y:s[1]*Math.round(n.y/s[1])}),Dr=({x:n,y:s},[l,o,c],d=!1,f=[1,1])=>{const h={x:(n-l)/c,y:(s-o)/c};return d?Mr(h,f):h},Eo=({x:n,y:s},[l,o,c])=>({x:n*c+l,y:s*c+o});function Js(n,s){if(typeof n=="number")return Math.floor((s-s/(1+n))*.5);if(typeof n=="string"&&n.endsWith("px")){const l=parseFloat(n);if(!Number.isNaN(l))return Math.floor(l)}if(typeof n=="string"&&n.endsWith("%")){const l=parseFloat(n);if(!Number.isNaN(l))return Math.floor(s*l*.01)}return console.error(`[React Flow] The padding value "${n}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function A8(n,s,l){if(typeof n=="string"||typeof n=="number"){const o=Js(n,l),c=Js(n,s);return{top:o,right:c,bottom:o,left:c,x:c*2,y:o*2}}if(typeof n=="object"){const o=Js(n.top??n.y??0,l),c=Js(n.bottom??n.y??0,l),d=Js(n.left??n.x??0,s),f=Js(n.right??n.x??0,s);return{top:o,right:f,bottom:c,left:d,x:d+f,y:o+c}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function T8(n,s,l,o,c,d){const{x:f,y:h}=Eo(n,[s,l,o]),{x:p,y:m}=Eo({x:n.x+n.width,y:n.y+n.height},[s,l,o]),y=c-p,x=d-m;return{left:Math.floor(f),top:Math.floor(h),right:Math.floor(y),bottom:Math.floor(x)}}const lf=(n,s,l,o,c,d)=>{const f=A8(d,s,l),h=(s-f.x)/n.width,p=(l-f.y)/n.height,m=Math.min(h,p),y=li(m,o,c),x=n.x+n.width/2,v=n.y+n.height/2,N=s/2-x*y,S=l/2-v*y,T=T8(n,N,S,y,s,l),E={left:Math.min(T.left-f.left,0),top:Math.min(T.top-f.top,0),right:Math.min(T.right-f.right,0),bottom:Math.min(T.bottom-f.bottom,0)};return{x:N-E.left+E.right,y:S-E.top+E.bottom,zoom:y}},jr=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function ci(n){return n!=null&&n!=="parent"}function Zn(n){return{width:n.measured?.width??n.width??n.initialWidth??0,height:n.measured?.height??n.height??n.initialHeight??0}}function Rx(n){return(n.measured?.width??n.width??n.initialWidth)!==void 0&&(n.measured?.height??n.height??n.initialHeight)!==void 0}function $x(n,s={width:0,height:0},l,o,c){const d={...n},f=o.get(l);if(f){const h=f.origin||c;d.x+=f.internals.positionAbsolute.x-(s.width??0)*h[0],d.y+=f.internals.positionAbsolute.y-(s.height??0)*h[1]}return d}function X0(n,s){if(n.size!==s.size)return!1;for(const l of n)if(!s.has(l))return!1;return!0}function M8(){let n,s;return{promise:new Promise((o,c)=>{n=o,s=c}),resolve:n,reject:s}}function D8(n){return{...Ex,...n||{}}}function hr(n,{snapGrid:s=[0,0],snapToGrid:l=!1,transform:o,containerBounds:c}){const{x:d,y:f}=an(n),h=Dr({x:d-(c?.left??0),y:f-(c?.top??0)},o),{x:p,y:m}=l?Mr(h,s):h;return{xSnapped:p,ySnapped:m,...h}}const of=n=>({width:n.offsetWidth,height:n.offsetHeight}),Hx=n=>n?.getRootNode?.()||window?.document,O8=["INPUT","SELECT","TEXTAREA"];function Ux(n){const s=n.composedPath?.()?.[0]||n.target;return s?.nodeType!==1?!1:O8.includes(s.nodeName)||s.hasAttribute("contenteditable")||!!s.closest(".nokey")}const Bx=n=>"clientX"in n,an=(n,s)=>{const l=Bx(n),o=l?n.clientX:n.touches?.[0].clientX,c=l?n.clientY:n.touches?.[0].clientY;return{x:o-(s?.left??0),y:c-(s?.top??0)}},Z0=(n,s,l,o,c)=>{const d=s.querySelectorAll(`.${n}`);return!d||!d.length?null:Array.from(d).map(f=>{const h=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),type:n,nodeId:c,position:f.getAttribute("data-handlepos"),x:(h.left-l.left)/o,y:(h.top-l.top)/o,...of(f)}})};function Vx({sourceX:n,sourceY:s,targetX:l,targetY:o,sourceControlX:c,sourceControlY:d,targetControlX:f,targetControlY:h}){const p=n*.125+c*.375+f*.375+l*.125,m=s*.125+d*.375+h*.375+o*.125,y=Math.abs(p-n),x=Math.abs(m-s);return[p,m,y,x]}function lo(n,s){return n>=0?.5*n:s*25*Math.sqrt(-n)}function Q0({pos:n,x1:s,y1:l,x2:o,y2:c,c:d}){switch(n){case pe.Left:return[s-lo(s-o,d),l];case pe.Right:return[s+lo(o-s,d),l];case pe.Top:return[s,l-lo(l-c,d)];case pe.Bottom:return[s,l+lo(c-l,d)]}}function qx({sourceX:n,sourceY:s,sourcePosition:l=pe.Bottom,targetX:o,targetY:c,targetPosition:d=pe.Top,curvature:f=.25}){const[h,p]=Q0({pos:l,x1:n,y1:s,x2:o,y2:c,c:f}),[m,y]=Q0({pos:d,x1:o,y1:c,x2:n,y2:s,c:f}),[x,v,N,S]=Vx({sourceX:n,sourceY:s,targetX:o,targetY:c,sourceControlX:h,sourceControlY:p,targetControlX:m,targetControlY:y});return[`M${n},${s} C${h},${p} ${m},${y} ${o},${c}`,x,v,N,S]}function Yx({sourceX:n,sourceY:s,targetX:l,targetY:o}){const c=Math.abs(l-n)/2,d=l<n?l+c:l-c,f=Math.abs(o-s)/2,h=o<s?o+f:o-f;return[d,h,c,f]}function L8({sourceNode:n,targetNode:s,selected:l=!1,zIndex:o=0,elevateOnSelect:c=!1,zIndexMode:d="basic"}){if(d==="manual")return o;const f=c&&l?o+1e3:o,h=Math.max(n.parentId||c&&n.selected?n.internals.z:0,s.parentId||c&&s.selected?s.internals.z:0);return f+h}function R8({sourceNode:n,targetNode:s,width:l,height:o,transform:c}){const d=Bo(Co(n),Co(s));d.x===d.x2&&(d.x2+=1),d.y===d.y2&&(d.y2+=1);const f={x:-c[0]/c[2],y:-c[1]/c[2],width:l/c[2],height:o/c[2]};return wr(f,Vo(d))>0}const $8=({source:n,sourceHandle:s,target:l,targetHandle:o})=>`xy-edge__${n}${s||""}-${l}${o||""}`,H8=(n,s)=>s.some(l=>l.source===n.source&&l.target===n.target&&(l.sourceHandle===n.sourceHandle||!l.sourceHandle&&!n.sourceHandle)&&(l.targetHandle===n.targetHandle||!l.targetHandle&&!n.targetHandle)),Gx=(n,s,l={})=>{if(!n.source||!n.target)return s;const o=l.getEdgeId||$8;let c;return Tx(n)?c={...n}:c={...n,id:o(n)},H8(c,s)?s:(c.sourceHandle===null&&delete c.sourceHandle,c.targetHandle===null&&delete c.targetHandle,s.concat(c))};function Xx({sourceX:n,sourceY:s,targetX:l,targetY:o}){const[c,d,f,h]=Yx({sourceX:n,sourceY:s,targetX:l,targetY:o});return[`M ${n},${s}L ${l},${o}`,c,d,f,h]}const F0={[pe.Left]:{x:-1,y:0},[pe.Right]:{x:1,y:0},[pe.Top]:{x:0,y:-1},[pe.Bottom]:{x:0,y:1}},U8=({source:n,sourcePosition:s=pe.Bottom,target:l})=>s===pe.Left||s===pe.Right?n.x<l.x?{x:1,y:0}:{x:-1,y:0}:n.y<l.y?{x:0,y:1}:{x:0,y:-1},K0=(n,s)=>Math.sqrt(Math.pow(s.x-n.x,2)+Math.pow(s.y-n.y,2));function B8({source:n,sourcePosition:s=pe.Bottom,target:l,targetPosition:o=pe.Top,center:c,offset:d,stepPosition:f}){const h=F0[s],p=F0[o],m={x:n.x+h.x*d,y:n.y+h.y*d},y={x:l.x+p.x*d,y:l.y+p.y*d},x=U8({source:m,sourcePosition:s,target:y}),v=x.x!==0?"x":"y",N=x[v];let S=[],T,E;const z={x:0,y:0},w={x:0,y:0},[,,_,C]=Yx({sourceX:n.x,sourceY:n.y,targetX:l.x,targetY:l.y});if(h[v]*p[v]===-1){v==="x"?(T=c.x??m.x+(y.x-m.x)*f,E=c.y??(m.y+y.y)/2):(T=c.x??(m.x+y.x)/2,E=c.y??m.y+(y.y-m.y)*f);const O=[{x:T,y:m.y},{x:T,y:y.y}],V=[{x:m.x,y:E},{x:y.x,y:E}];h[v]===N?S=v==="x"?O:V:S=v==="x"?V:O}else{const O=[{x:m.x,y:y.y}],V=[{x:y.x,y:m.y}];if(v==="x"?S=h.x===N?V:O:S=h.y===N?O:V,s===o){const Z=Math.abs(n[v]-l[v]);if(Z<=d){const te=Math.min(d-1,d-Z);h[v]===N?z[v]=(m[v]>n[v]?-1:1)*te:w[v]=(y[v]>l[v]?-1:1)*te}}if(s!==o){const Z=v==="x"?"y":"x",te=h[v]===p[Z],M=m[Z]>y[Z],U=m[Z]<y[Z];(h[v]===1&&(!te&&M||te&&U)||h[v]!==1&&(!te&&U||te&&M))&&(S=v==="x"?O:V)}const G={x:m.x+z.x,y:m.y+z.y},L={x:y.x+w.x,y:y.y+w.y},F=Math.max(Math.abs(G.x-S[0].x),Math.abs(L.x-S[0].x)),q=Math.max(Math.abs(G.y-S[0].y),Math.abs(L.y-S[0].y));F>=q?(T=(G.x+L.x)/2,E=S[0].y):(T=S[0].x,E=(G.y+L.y)/2)}return[[n,{x:m.x+z.x,y:m.y+z.y},...S,{x:y.x+w.x,y:y.y+w.y},l],T,E,_,C]}function V8(n,s,l,o){const c=Math.min(K0(n,s)/2,K0(s,l)/2,o),{x:d,y:f}=s;if(n.x===d&&d===l.x||n.y===f&&f===l.y)return`L${d} ${f}`;if(n.y===f){const m=n.x<l.x?-1:1,y=n.y<l.y?1:-1;return`L ${d+c*m},${f}Q ${d},${f} ${d},${f+c*y}`}const h=n.x<l.x?1:-1,p=n.y<l.y?-1:1;return`L ${d},${f+c*p}Q ${d},${f} ${d+c*h},${f}`}function Yd({sourceX:n,sourceY:s,sourcePosition:l=pe.Bottom,targetX:o,targetY:c,targetPosition:d=pe.Top,borderRadius:f=5,centerX:h,centerY:p,offset:m=20,stepPosition:y=.5}){const[x,v,N,S,T]=B8({source:{x:n,y:s},sourcePosition:l,target:{x:o,y:c},targetPosition:d,center:{x:h,y:p},offset:m,stepPosition:y});return[x.reduce((z,w,_)=>{let C="";return _>0&&_<x.length-1?C=V8(x[_-1],w,x[_+1],f):C=`${_===0?"M":"L"}${w.x} ${w.y}`,z+=C,z},""),v,N,S,T]}function I0(n){return n&&!!(n.internals.handleBounds||n.handles?.length)&&!!(n.measured.width||n.width||n.initialWidth)}function q8(n){const{sourceNode:s,targetNode:l}=n;if(!I0(s)||!I0(l))return null;const o=s.internals.handleBounds||J0(s.handles),c=l.internals.handleBounds||J0(l.handles),d=W0(o?.source??[],n.sourceHandle),f=W0(n.connectionMode===ri.Strict?c?.target??[]:(c?.target??[]).concat(c?.source??[]),n.targetHandle);if(!d||!f)return n.onError?.("008",xn.error008(d?"target":"source",{id:n.id,sourceHandle:n.sourceHandle,targetHandle:n.targetHandle})),null;const h=d?.position||pe.Bottom,p=f?.position||pe.Top,m=ss(s,d,h),y=ss(l,f,p);return{sourceX:m.x,sourceY:m.y,targetX:y.x,targetY:y.y,sourcePosition:h,targetPosition:p}}function J0(n){if(!n)return null;const s=[],l=[];for(const o of n)o.width=o.width??1,o.height=o.height??1,o.type==="source"?s.push(o):o.type==="target"&&l.push(o);return{source:s,target:l}}function ss(n,s,l=pe.Left,o=!1){const c=(s?.x??0)+n.internals.positionAbsolute.x,d=(s?.y??0)+n.internals.positionAbsolute.y,{width:f,height:h}=s??Zn(n);if(o)return{x:c+f/2,y:d+h/2};switch(s?.position??l){case pe.Top:return{x:c+f/2,y:d};case pe.Right:return{x:c+f,y:d+h/2};case pe.Bottom:return{x:c+f/2,y:d+h};case pe.Left:return{x:c,y:d+h/2}}}function W0(n,s){return n&&(s?n.find(l=>l.id===s):n[0])||null}function Gd(n,s){return n?typeof n=="string"?n:`${s?`${s}__`:""}${Object.keys(n).sort().map(o=>`${o}=${n[o]}`).join("&")}`:""}function Y8(n,{id:s,defaultColor:l,defaultMarkerStart:o,defaultMarkerEnd:c}){const d=new Set;return n.reduce((f,h)=>([h.markerStart||o,h.markerEnd||c].forEach(p=>{if(p&&typeof p=="object"){const m=Gd(p,s);d.has(m)||(f.push({id:m,color:p.color||l,...p}),d.add(m))}}),f),[]).sort((f,h)=>f.id.localeCompare(h.id))}const Zx=1e3,G8=10,cf={nodeOrigin:[0,0],nodeExtent:_r,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},X8={...cf,checkEquality:!0};function uf(n,s){const l={...n};for(const o in s)s[o]!==void 0&&(l[o]=s[o]);return l}function Z8(n,s,l){const o=uf(cf,l);for(const c of n.values())if(c.parentId)ff(c,n,s,o);else{const d=Ar(c,o.nodeOrigin),f=ci(c.extent)?c.extent:o.nodeExtent,h=as(d,f,Zn(c));c.internals.positionAbsolute=h}}function Q8(n,s){if(!n.handles)return n.measured?s?.internals.handleBounds:void 0;const l=[],o=[];for(const c of n.handles){const d={id:c.id,width:c.width??1,height:c.height??1,nodeId:n.id,x:c.x,y:c.y,position:c.position,type:c.type};c.type==="source"?l.push(d):c.type==="target"&&o.push(d)}return{source:l,target:o}}function df(n){return n==="manual"}function Xd(n,s,l,o={}){const c=uf(X8,o),d={i:0},f=new Map(s),h=c?.elevateNodesOnSelect&&!df(c.zIndexMode)?Zx:0;let p=n.length>0;s.clear(),l.clear();for(const m of n){let y=f.get(m.id);if(c.checkEquality&&m===y?.internals.userNode)s.set(m.id,y);else{const x=Ar(m,c.nodeOrigin),v=ci(m.extent)?m.extent:c.nodeExtent,N=as(x,v,Zn(m));y={...c.defaults,...m,measured:{width:m.measured?.width,height:m.measured?.height},internals:{positionAbsolute:N,handleBounds:Q8(m,y),z:Qx(m,h,c.zIndexMode),userNode:m}},s.set(m.id,y)}(y.measured===void 0||y.measured.width===void 0||y.measured.height===void 0)&&!y.hidden&&(p=!1),m.parentId&&ff(y,s,l,o,d)}return p}function F8(n,s){if(!n.parentId)return;const l=s.get(n.parentId);l?l.set(n.id,n):s.set(n.parentId,new Map([[n.id,n]]))}function ff(n,s,l,o,c){const{elevateNodesOnSelect:d,nodeOrigin:f,nodeExtent:h,zIndexMode:p}=uf(cf,o),m=n.parentId,y=s.get(m);if(!y){console.warn(`Parent node ${m} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}F8(n,l),c&&!y.parentId&&y.internals.rootParentIndex===void 0&&p==="auto"&&(y.internals.rootParentIndex=++c.i,y.internals.z=y.internals.z+c.i*G8),c&&y.internals.rootParentIndex!==void 0&&(c.i=y.internals.rootParentIndex);const x=d&&!df(p)?Zx:0,{x:v,y:N,z:S}=K8(n,y,f,h,x,p),{positionAbsolute:T}=n.internals,E=v!==T.x||N!==T.y;(E||S!==n.internals.z)&&s.set(n.id,{...n,internals:{...n.internals,positionAbsolute:E?{x:v,y:N}:T,z:S}})}function Qx(n,s,l){const o=nn(n.zIndex)?n.zIndex:0;return df(l)?o:o+(n.selected?s:0)}function K8(n,s,l,o,c,d){const{x:f,y:h}=s.internals.positionAbsolute,p=Zn(n),m=Ar(n,l),y=ci(n.extent)?as(m,n.extent,p):m;let x=as({x:f+y.x,y:h+y.y},o,p);n.extent==="parent"&&(x=Dx(x,p,s));const v=Qx(n,c,d),N=s.internals.z??0;return{x:x.x,y:x.y,z:N>=v?N+1:v}}function gf(n,s,l,o=[0,0]){const c=[],d=new Map;for(const f of n){const h=s.get(f.parentId);if(!h)continue;const p=d.get(f.parentId)?.expandedRect??oi(h),m=Lx(p,f.rect);d.set(f.parentId,{expandedRect:m,parent:h})}return d.size>0&&d.forEach(({expandedRect:f,parent:h},p)=>{const m=h.internals.positionAbsolute,y=Zn(h),x=h.origin??o,v=f.x<m.x?Math.round(Math.abs(m.x-f.x)):0,N=f.y<m.y?Math.round(Math.abs(m.y-f.y)):0,S=Math.max(y.width,Math.round(f.width)),T=Math.max(y.height,Math.round(f.height)),E=(S-y.width)*x[0],z=(T-y.height)*x[1];(v>0||N>0||E||z)&&(c.push({id:p,type:"position",position:{x:h.position.x-v+E,y:h.position.y-N+z}}),l.get(p)?.forEach(w=>{n.some(_=>_.id===w.id)||c.push({id:w.id,type:"position",position:{x:w.position.x+v,y:w.position.y+N}})})),(y.width<f.width||y.height<f.height||v||N)&&c.push({id:p,type:"dimensions",setAttributes:!0,dimensions:{width:S+(v?x[0]*v-E:0),height:T+(N?x[1]*N-z:0)}})}),c}function I8(n,s,l,o,c,d,f){const h=o?.querySelector(".xyflow__viewport");let p=!1;if(!h)return{changes:[],updatedInternals:p};const m=[],y=window.getComputedStyle(h),{m22:x}=new window.DOMMatrixReadOnly(y.transform),v=[];for(const N of n.values()){const S=s.get(N.id);if(!S)continue;if(S.hidden){s.set(S.id,{...S,internals:{...S.internals,handleBounds:void 0}}),p=!0;continue}const T=of(N.nodeElement),E=S.measured.width!==T.width||S.measured.height!==T.height;if(!!(T.width&&T.height&&(E||!S.internals.handleBounds||N.force))){const w=N.nodeElement.getBoundingClientRect(),_=ci(S.extent)?S.extent:d;let{positionAbsolute:C}=S.internals;S.parentId&&S.extent==="parent"?C=Dx(C,T,s.get(S.parentId)):_&&(C=as(C,_,T));const $={...S,measured:T,internals:{...S.internals,positionAbsolute:C,handleBounds:{source:Z0("source",N.nodeElement,w,x,S.id),target:Z0("target",N.nodeElement,w,x,S.id)}}};s.set(S.id,$),S.parentId&&ff($,s,l,{nodeOrigin:c,zIndexMode:f}),p=!0,E&&(m.push({id:S.id,type:"dimensions",dimensions:T}),S.expandParent&&S.parentId&&v.push({id:S.id,parentId:S.parentId,rect:oi($,c)}))}}if(v.length>0){const N=gf(v,s,l,c);m.push(...N)}return{changes:m,updatedInternals:p}}async function J8({delta:n,panZoom:s,transform:l,translateExtent:o,width:c,height:d}){if(!s||!n.x&&!n.y)return Promise.resolve(!1);const f=await s.setViewportConstrained({x:l[0]+n.x,y:l[1]+n.y,zoom:l[2]},[[0,0],[c,d]],o),h=!!f&&(f.x!==l[0]||f.y!==l[1]||f.k!==l[2]);return Promise.resolve(h)}function P0(n,s,l,o,c,d){let f=c;const h=o.get(f)||new Map;o.set(f,h.set(l,s)),f=`${c}-${n}`;const p=o.get(f)||new Map;if(o.set(f,p.set(l,s)),d){f=`${c}-${n}-${d}`;const m=o.get(f)||new Map;o.set(f,m.set(l,s))}}function Fx(n,s,l){n.clear(),s.clear();for(const o of l){const{source:c,target:d,sourceHandle:f=null,targetHandle:h=null}=o,p={edgeId:o.id,source:c,target:d,sourceHandle:f,targetHandle:h},m=`${c}-${f}--${d}-${h}`,y=`${d}-${h}--${c}-${f}`;P0("source",p,y,n,c,f),P0("target",p,m,n,d,h),s.set(o.id,o)}}function Kx(n,s){if(!n.parentId)return!1;const l=s.get(n.parentId);return l?l.selected?!0:Kx(l,s):!1}function ep(n,s,l){let o=n;do{if(o?.matches?.(s))return!0;if(o===l)return!1;o=o?.parentElement}while(o);return!1}function W8(n,s,l,o){const c=new Map;for(const[d,f]of n)if((f.selected||f.id===o)&&(!f.parentId||!Kx(f,n))&&(f.draggable||s&&typeof f.draggable>"u")){const h=n.get(d);h&&c.set(d,{id:d,position:h.position||{x:0,y:0},distance:{x:l.x-h.internals.positionAbsolute.x,y:l.y-h.internals.positionAbsolute.y},extent:h.extent,parentId:h.parentId,origin:h.origin,expandParent:h.expandParent,internals:{positionAbsolute:h.internals.positionAbsolute||{x:0,y:0}},measured:{width:h.measured.width??0,height:h.measured.height??0}})}return c}function Sd({nodeId:n,dragItems:s,nodeLookup:l,dragging:o=!0}){const c=[];for(const[f,h]of s){const p=l.get(f)?.internals.userNode;p&&c.push({...p,position:h.position,dragging:o})}if(!n)return[c[0],c];const d=l.get(n)?.internals.userNode;return[d?{...d,position:s.get(n)?.position||d.position,dragging:o}:c[0],c]}function P8({dragItems:n,snapGrid:s,x:l,y:o}){const c=n.values().next().value;if(!c)return null;const d={x:l-c.distance.x,y:o-c.distance.y},f=Mr(d,s);return{x:f.x-d.x,y:f.y-d.y}}function eM({onNodeMouseDown:n,getStoreItems:s,onDragStart:l,onDrag:o,onDragStop:c}){let d={x:null,y:null},f=0,h=new Map,p=!1,m={x:0,y:0},y=null,x=!1,v=null,N=!1,S=!1,T=null;function E({noDragClassName:w,handleSelector:_,domNode:C,isSelectable:$,nodeId:O,nodeClickDistance:V=0}){v=Ut(C);function G({x:Z,y:te}){const{nodeLookup:M,nodeExtent:U,snapGrid:j,snapToGrid:D,nodeOrigin:H,onNodeDrag:Y,onSelectionDrag:ee,onError:Q,updateNodePositions:W}=s();d={x:Z,y:te};let se=!1;const le=h.size>1,de=le&&U?qd(Tr(h)):null,be=le&&D?P8({dragItems:h,snapGrid:j,x:Z,y:te}):null;for(const[me,oe]of h){if(!M.has(me))continue;let fe={x:Z-oe.distance.x,y:te-oe.distance.y};D&&(fe=be?{x:Math.round(fe.x+be.x),y:Math.round(fe.y+be.y)}:Mr(fe,j));let je=null;if(le&&U&&!oe.extent&&de){const{positionAbsolute:_e}=oe.internals,Ce=_e.x-de.x+U[0][0],re=_e.x+oe.measured.width-de.x2+U[1][0],ge=_e.y-de.y+U[0][1],Oe=_e.y+oe.measured.height-de.y2+U[1][1];je=[[Ce,ge],[re,Oe]]}const{position:Ne,positionAbsolute:ye}=Mx({nodeId:me,nextPosition:fe,nodeLookup:M,nodeExtent:je||U,nodeOrigin:H,onError:Q});se=se||oe.position.x!==Ne.x||oe.position.y!==Ne.y,oe.position=Ne,oe.internals.positionAbsolute=ye}if(S=S||se,!!se&&(W(h,!0),T&&(o||Y||!O&&ee))){const[me,oe]=Sd({nodeId:O,dragItems:h,nodeLookup:M});o?.(T,h,me,oe),Y?.(T,me,oe),O||ee?.(T,oe)}}async function L(){if(!y)return;const{transform:Z,panBy:te,autoPanSpeed:M,autoPanOnNodeDrag:U}=s();if(!U){p=!1,cancelAnimationFrame(f);return}const[j,D]=Ox(m,y,M);(j!==0||D!==0)&&(d.x=(d.x??0)-j/Z[2],d.y=(d.y??0)-D/Z[2],await te({x:j,y:D})&&G(d)),f=requestAnimationFrame(L)}function F(Z){const{nodeLookup:te,multiSelectionActive:M,nodesDraggable:U,transform:j,snapGrid:D,snapToGrid:H,selectNodesOnDrag:Y,onNodeDragStart:ee,onSelectionDragStart:Q,unselectNodesAndEdges:W}=s();x=!0,(!Y||!$)&&!M&&O&&(te.get(O)?.selected||W()),$&&Y&&O&&n?.(O);const se=hr(Z.sourceEvent,{transform:j,snapGrid:D,snapToGrid:H,containerBounds:y});if(d=se,h=W8(te,U,se,O),h.size>0&&(l||ee||!O&&Q)){const[le,de]=Sd({nodeId:O,dragItems:h,nodeLookup:te});l?.(Z.sourceEvent,h,le,de),ee?.(Z.sourceEvent,le,de),O||Q?.(Z.sourceEvent,de)}}const q=xx().clickDistance(V).on("start",Z=>{const{domNode:te,nodeDragThreshold:M,transform:U,snapGrid:j,snapToGrid:D}=s();y=te?.getBoundingClientRect()||null,N=!1,S=!1,T=Z.sourceEvent,M===0&&F(Z),d=hr(Z.sourceEvent,{transform:U,snapGrid:j,snapToGrid:D,containerBounds:y}),m=an(Z.sourceEvent,y)}).on("drag",Z=>{const{autoPanOnNodeDrag:te,transform:M,snapGrid:U,snapToGrid:j,nodeDragThreshold:D,nodeLookup:H}=s(),Y=hr(Z.sourceEvent,{transform:M,snapGrid:U,snapToGrid:j,containerBounds:y});if(T=Z.sourceEvent,(Z.sourceEvent.type==="touchmove"&&Z.sourceEvent.touches.length>1||O&&!H.has(O))&&(N=!0),!N){if(!p&&te&&x&&(p=!0,L()),!x){const ee=an(Z.sourceEvent,y),Q=ee.x-m.x,W=ee.y-m.y;Math.sqrt(Q*Q+W*W)>D&&F(Z)}(d.x!==Y.xSnapped||d.y!==Y.ySnapped)&&h&&x&&(m=an(Z.sourceEvent,y),G(Y))}}).on("end",Z=>{if(!(!x||N)&&(p=!1,x=!1,cancelAnimationFrame(f),h.size>0)){const{nodeLookup:te,updateNodePositions:M,onNodeDragStop:U,onSelectionDragStop:j}=s();if(S&&(M(h,!1),S=!1),c||U||!O&&j){const[D,H]=Sd({nodeId:O,dragItems:h,nodeLookup:te,dragging:!1});c?.(Z.sourceEvent,h,D,H),U?.(Z.sourceEvent,D,H),O||j?.(Z.sourceEvent,H)}}}).filter(Z=>{const te=Z.target;return!Z.button&&(!w||!ep(te,`.${w}`,C))&&(!_||ep(te,_,C))});v.call(q)}function z(){v?.on(".drag",null)}return{update:E,destroy:z}}function tM(n,s,l){const o=[],c={x:n.x-l,y:n.y-l,width:l*2,height:l*2};for(const d of s.values())wr(c,oi(d))>0&&o.push(d);return o}const nM=250;function aM(n,s,l,o){let c=[],d=1/0;const f=tM(n,l,s+nM);for(const h of f){const p=[...h.internals.handleBounds?.source??[],...h.internals.handleBounds?.target??[]];for(const m of p){if(o.nodeId===m.nodeId&&o.type===m.type&&o.id===m.id)continue;const{x:y,y:x}=ss(h,m,m.position,!0),v=Math.sqrt(Math.pow(y-n.x,2)+Math.pow(x-n.y,2));v>s||(v<d?(c=[{...m,x:y,y:x}],d=v):v===d&&c.push({...m,x:y,y:x}))}}if(!c.length)return null;if(c.length>1){const h=o.type==="source"?"target":"source";return c.find(p=>p.type===h)??c[0]}return c[0]}function Ix(n,s,l,o,c,d=!1){const f=o.get(n);if(!f)return null;const h=c==="strict"?f.internals.handleBounds?.[s]:[...f.internals.handleBounds?.source??[],...f.internals.handleBounds?.target??[]],p=(l?h?.find(m=>m.id===l):h?.[0])??null;return p&&d?{...p,...ss(f,p,p.position,!0)}:p}function Jx(n,s){return n||(s?.classList.contains("target")?"target":s?.classList.contains("source")?"source":null)}function sM(n,s){let l=null;return s?l=!0:n&&!s&&(l=!1),l}const Wx=()=>!0;function iM(n,{connectionMode:s,connectionRadius:l,handleId:o,nodeId:c,edgeUpdaterType:d,isTarget:f,domNode:h,nodeLookup:p,lib:m,autoPanOnConnect:y,flowId:x,panBy:v,cancelConnection:N,onConnectStart:S,onConnect:T,onConnectEnd:E,isValidConnection:z=Wx,onReconnectEnd:w,updateConnection:_,getTransform:C,getFromHandle:$,autoPanSpeed:O,dragThreshold:V=1,handleDomNode:G}){const L=Hx(n.target);let F=0,q;const{x:Z,y:te}=an(n),M=Jx(d,G),U=h?.getBoundingClientRect();let j=!1;if(!U||!M)return;const D=Ix(c,M,o,p,s);if(!D)return;let H=an(n,U),Y=!1,ee=null,Q=!1,W=null;function se(){if(!y||!U)return;const[Ne,ye]=Ox(H,U,O);v({x:Ne,y:ye}),F=requestAnimationFrame(se)}const le={...D,nodeId:c,type:M,position:D.position},de=p.get(c);let me={inProgress:!0,isValid:null,from:ss(de,le,pe.Left,!0),fromHandle:le,fromPosition:le.position,fromNode:de,to:H,toHandle:null,toPosition:q0[le.position],toNode:null,pointer:H};function oe(){j=!0,_(me),S?.(n,{nodeId:c,handleId:o,handleType:M})}V===0&&oe();function fe(Ne){if(!j){const{x:Oe,y:it}=an(Ne),Tt=Oe-Z,It=it-te;if(!(Tt*Tt+It*It>V*V))return;oe()}if(!$()||!le){je(Ne);return}const ye=C();H=an(Ne,U),q=aM(Dr(H,ye,!1,[1,1]),l,p,le),Y||(se(),Y=!0);const _e=Px(Ne,{handle:q,connectionMode:s,fromNodeId:c,fromHandleId:o,fromType:f?"target":"source",isValidConnection:z,doc:L,lib:m,flowId:x,nodeLookup:p});W=_e.handleDomNode,ee=_e.connection,Q=sM(!!q,_e.isValid);const Ce=p.get(c),re=Ce?ss(Ce,le,pe.Left,!0):me.from,ge={...me,from:re,isValid:Q,to:_e.toHandle&&Q?Eo({x:_e.toHandle.x,y:_e.toHandle.y},ye):H,toHandle:_e.toHandle,toPosition:Q&&_e.toHandle?_e.toHandle.position:q0[le.position],toNode:_e.toHandle?p.get(_e.toHandle.nodeId):null,pointer:H};_(ge),me=ge}function je(Ne){if(!("touches"in Ne&&Ne.touches.length>0)){if(j){(q||W)&&ee&&Q&&T?.(ee);const{inProgress:ye,..._e}=me,Ce={..._e,toPosition:me.toHandle?me.toPosition:null};E?.(Ne,Ce),d&&w?.(Ne,Ce)}N(),cancelAnimationFrame(F),Y=!1,Q=!1,ee=null,W=null,L.removeEventListener("mousemove",fe),L.removeEventListener("mouseup",je),L.removeEventListener("touchmove",fe),L.removeEventListener("touchend",je)}}L.addEventListener("mousemove",fe),L.addEventListener("mouseup",je),L.addEventListener("touchmove",fe),L.addEventListener("touchend",je)}function Px(n,{handle:s,connectionMode:l,fromNodeId:o,fromHandleId:c,fromType:d,doc:f,lib:h,flowId:p,isValidConnection:m=Wx,nodeLookup:y}){const x=d==="target",v=s?f.querySelector(`.${h}-flow__handle[data-id="${p}-${s?.nodeId}-${s?.id}-${s?.type}"]`):null,{x:N,y:S}=an(n),T=f.elementFromPoint(N,S),E=T?.classList.contains(`${h}-flow__handle`)?T:v,z={handleDomNode:E,isValid:!1,connection:null,toHandle:null};if(E){const w=Jx(void 0,E),_=E.getAttribute("data-nodeid"),C=E.getAttribute("data-handleid"),$=E.classList.contains("connectable"),O=E.classList.contains("connectableend");if(!_||!w)return z;const V={source:x?_:o,sourceHandle:x?C:c,target:x?o:_,targetHandle:x?c:C};z.connection=V;const L=$&&O&&(l===ri.Strict?x&&w==="source"||!x&&w==="target":_!==o||C!==c);z.isValid=L&&m(V),z.toHandle=Ix(_,w,C,y,l,!0)}return z}const Zd={onPointerDown:iM,isValid:Px};function rM({domNode:n,panZoom:s,getTransform:l,getViewScale:o}){const c=Ut(n);function d({translateExtent:h,width:p,height:m,zoomStep:y=1,pannable:x=!0,zoomable:v=!0,inversePan:N=!1}){const S=_=>{if(_.sourceEvent.type!=="wheel"||!s)return;const C=l(),$=_.sourceEvent.ctrlKey&&jr()?10:1,O=-_.sourceEvent.deltaY*(_.sourceEvent.deltaMode===1?.05:_.sourceEvent.deltaMode?1:.002)*y,V=C[2]*Math.pow(2,O*$);s.scaleTo(V)};let T=[0,0];const E=_=>{(_.sourceEvent.type==="mousedown"||_.sourceEvent.type==="touchstart")&&(T=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY])},z=_=>{const C=l();if(_.sourceEvent.type!=="mousemove"&&_.sourceEvent.type!=="touchmove"||!s)return;const $=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY],O=[$[0]-T[0],$[1]-T[1]];T=$;const V=o()*Math.max(C[2],Math.log(C[2]))*(N?-1:1),G={x:C[0]-O[0]*V,y:C[1]-O[1]*V},L=[[0,0],[p,m]];s.setViewportConstrained({x:G.x,y:G.y,zoom:C[2]},L,h)},w=kx().on("start",E).on("zoom",x?z:null).on("zoom.wheel",v?S:null);c.call(w,{})}function f(){c.on("zoom",null)}return{update:d,destroy:f,pointer:tn}}const qo=n=>({x:n.x,y:n.y,zoom:n.k}),kd=({x:n,y:s,zoom:l})=>Uo.translate(n,s).scale(l),Ws=(n,s)=>n.target.closest(`.${s}`),ey=(n,s)=>s===2&&Array.isArray(n)&&n.includes(2),lM=n=>((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2,Cd=(n,s=0,l=lM,o=()=>{})=>{const c=typeof s=="number"&&s>0;return c||o(),c?n.transition().duration(s).ease(l).on("end",o):n},ty=n=>{const s=n.ctrlKey&&jr()?10:1;return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*s};function oM({zoomPanValues:n,noWheelClassName:s,d3Selection:l,d3Zoom:o,panOnScrollMode:c,panOnScrollSpeed:d,zoomOnPinch:f,onPanZoomStart:h,onPanZoom:p,onPanZoomEnd:m}){return y=>{if(Ws(y,s))return y.ctrlKey&&y.preventDefault(),!1;y.preventDefault(),y.stopImmediatePropagation();const x=l.property("__zoom").k||1;if(y.ctrlKey&&f){const E=tn(y),z=ty(y),w=x*Math.pow(2,z);o.scaleTo(l,w,E,y);return}const v=y.deltaMode===1?20:1;let N=c===es.Vertical?0:y.deltaX*v,S=c===es.Horizontal?0:y.deltaY*v;!jr()&&y.shiftKey&&c!==es.Vertical&&(N=y.deltaY*v,S=0),o.translateBy(l,-(N/x)*d,-(S/x)*d,{internal:!0});const T=qo(l.property("__zoom"));clearTimeout(n.panScrollTimeout),n.isPanScrolling?(p?.(y,T),n.panScrollTimeout=setTimeout(()=>{m?.(y,T),n.isPanScrolling=!1},150)):(n.isPanScrolling=!0,h?.(y,T))}}function cM({noWheelClassName:n,preventScrolling:s,d3ZoomHandler:l}){return function(o,c){const d=o.type==="wheel",f=!s&&d&&!o.ctrlKey,h=Ws(o,n);if(o.ctrlKey&&d&&h&&o.preventDefault(),f||h)return null;o.preventDefault(),l.call(this,o,c)}}function uM({zoomPanValues:n,onDraggingChange:s,onPanZoomStart:l}){return o=>{if(o.sourceEvent?.internal)return;const c=qo(o.transform);n.mouseButton=o.sourceEvent?.button||0,n.isZoomingOrPanning=!0,n.prevViewport=c,o.sourceEvent?.type==="mousedown"&&s(!0),l&&l?.(o.sourceEvent,c)}}function dM({zoomPanValues:n,panOnDrag:s,onPaneContextMenu:l,onTransformChange:o,onPanZoom:c}){return d=>{n.usedRightMouseButton=!!(l&&ey(s,n.mouseButton??0)),d.sourceEvent?.sync||o([d.transform.x,d.transform.y,d.transform.k]),c&&!d.sourceEvent?.internal&&c?.(d.sourceEvent,qo(d.transform))}}function fM({zoomPanValues:n,panOnDrag:s,panOnScroll:l,onDraggingChange:o,onPanZoomEnd:c,onPaneContextMenu:d}){return f=>{if(!f.sourceEvent?.internal&&(n.isZoomingOrPanning=!1,d&&ey(s,n.mouseButton??0)&&!n.usedRightMouseButton&&f.sourceEvent&&d(f.sourceEvent),n.usedRightMouseButton=!1,o(!1),c)){const h=qo(f.transform);n.prevViewport=h,clearTimeout(n.timerId),n.timerId=setTimeout(()=>{c?.(f.sourceEvent,h)},l?150:0)}}}function gM({zoomActivationKeyPressed:n,zoomOnScroll:s,zoomOnPinch:l,panOnDrag:o,panOnScroll:c,zoomOnDoubleClick:d,userSelectionActive:f,noWheelClassName:h,noPanClassName:p,lib:m,connectionInProgress:y}){return x=>{const v=n||s,N=l&&x.ctrlKey,S=x.type==="wheel";if(x.button===1&&x.type==="mousedown"&&(Ws(x,`${m}-flow__node`)||Ws(x,`${m}-flow__edge`)))return!0;if(!o&&!v&&!c&&!d&&!l||f||y&&!S||Ws(x,h)&&S||Ws(x,p)&&(!S||c&&S&&!n)||!l&&x.ctrlKey&&S)return!1;if(!l&&x.type==="touchstart"&&x.touches?.length>1)return x.preventDefault(),!1;if(!v&&!c&&!N&&S||!o&&(x.type==="mousedown"||x.type==="touchstart")||Array.isArray(o)&&!o.includes(x.button)&&x.type==="mousedown")return!1;const T=Array.isArray(o)&&o.includes(x.button)||!x.button||x.button<=1;return(!x.ctrlKey||S)&&T}}function hM({domNode:n,minZoom:s,maxZoom:l,translateExtent:o,viewport:c,onPanZoom:d,onPanZoomStart:f,onPanZoomEnd:h,onDraggingChange:p}){const m={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},y=n.getBoundingClientRect(),x=kx().scaleExtent([s,l]).translateExtent(o),v=Ut(n).call(x);w({x:c.x,y:c.y,zoom:li(c.zoom,s,l)},[[0,0],[y.width,y.height]],o);const N=v.on("wheel.zoom"),S=v.on("dblclick.zoom");x.wheelDelta(ty);function T(q,Z){return v?new Promise(te=>{x?.interpolate(Z?.interpolate==="linear"?hd:fo).transform(Cd(v,Z?.duration,Z?.ease,()=>te(!0)),q)}):Promise.resolve(!1)}function E({noWheelClassName:q,noPanClassName:Z,onPaneContextMenu:te,userSelectionActive:M,panOnScroll:U,panOnDrag:j,panOnScrollMode:D,panOnScrollSpeed:H,preventScrolling:Y,zoomOnPinch:ee,zoomOnScroll:Q,zoomOnDoubleClick:W,zoomActivationKeyPressed:se,lib:le,onTransformChange:de,connectionInProgress:be,paneClickDistance:me,selectionOnDrag:oe}){M&&!m.isZoomingOrPanning&&z();const fe=U&&!se&&!M;x.clickDistance(oe?1/0:!nn(me)||me<0?0:me);const je=fe?oM({zoomPanValues:m,noWheelClassName:q,d3Selection:v,d3Zoom:x,panOnScrollMode:D,panOnScrollSpeed:H,zoomOnPinch:ee,onPanZoomStart:f,onPanZoom:d,onPanZoomEnd:h}):cM({noWheelClassName:q,preventScrolling:Y,d3ZoomHandler:N});if(v.on("wheel.zoom",je,{passive:!1}),!M){const ye=uM({zoomPanValues:m,onDraggingChange:p,onPanZoomStart:f});x.on("start",ye);const _e=dM({zoomPanValues:m,panOnDrag:j,onPaneContextMenu:!!te,onPanZoom:d,onTransformChange:de});x.on("zoom",_e);const Ce=fM({zoomPanValues:m,panOnDrag:j,panOnScroll:U,onPaneContextMenu:te,onPanZoomEnd:h,onDraggingChange:p});x.on("end",Ce)}const Ne=gM({zoomActivationKeyPressed:se,panOnDrag:j,zoomOnScroll:Q,panOnScroll:U,zoomOnDoubleClick:W,zoomOnPinch:ee,userSelectionActive:M,noPanClassName:Z,noWheelClassName:q,lib:le,connectionInProgress:be});x.filter(Ne),W?v.on("dblclick.zoom",S):v.on("dblclick.zoom",null)}function z(){x.on("zoom",null)}async function w(q,Z,te){const M=kd(q),U=x?.constrain()(M,Z,te);return U&&await T(U),new Promise(j=>j(U))}async function _(q,Z){const te=kd(q);return await T(te,Z),new Promise(M=>M(te))}function C(q){if(v){const Z=kd(q),te=v.property("__zoom");(te.k!==q.zoom||te.x!==q.x||te.y!==q.y)&&x?.transform(v,Z,null,{sync:!0})}}function $(){const q=v?Sx(v.node()):{x:0,y:0,k:1};return{x:q.x,y:q.y,zoom:q.k}}function O(q,Z){return v?new Promise(te=>{x?.interpolate(Z?.interpolate==="linear"?hd:fo).scaleTo(Cd(v,Z?.duration,Z?.ease,()=>te(!0)),q)}):Promise.resolve(!1)}function V(q,Z){return v?new Promise(te=>{x?.interpolate(Z?.interpolate==="linear"?hd:fo).scaleBy(Cd(v,Z?.duration,Z?.ease,()=>te(!0)),q)}):Promise.resolve(!1)}function G(q){x?.scaleExtent(q)}function L(q){x?.translateExtent(q)}function F(q){const Z=!nn(q)||q<0?0:q;x?.clickDistance(Z)}return{update:E,destroy:z,setViewport:_,setViewportConstrained:w,getViewport:$,scaleTo:O,scaleBy:V,setScaleExtent:G,setTranslateExtent:L,syncViewport:C,setClickDistance:F}}var ui;(function(n){n.Line="line",n.Handle="handle"})(ui||(ui={}));function mM({width:n,prevWidth:s,height:l,prevHeight:o,affectsX:c,affectsY:d}){const f=n-s,h=l-o,p=[f>0?1:f<0?-1:0,h>0?1:h<0?-1:0];return f&&c&&(p[0]=p[0]*-1),h&&d&&(p[1]=p[1]*-1),p}function tp(n){const s=n.includes("right")||n.includes("left"),l=n.includes("bottom")||n.includes("top"),o=n.includes("left"),c=n.includes("top");return{isHorizontal:s,isVertical:l,affectsX:o,affectsY:c}}function Na(n,s){return Math.max(0,s-n)}function wa(n,s){return Math.max(0,n-s)}function oo(n,s,l){return Math.max(0,s-n,n-l)}function np(n,s){return n?!s:s}function pM(n,s,l,o,c,d,f,h){let{affectsX:p,affectsY:m}=s;const{isHorizontal:y,isVertical:x}=s,v=y&&x,{xSnapped:N,ySnapped:S}=l,{minWidth:T,maxWidth:E,minHeight:z,maxHeight:w}=o,{x:_,y:C,width:$,height:O,aspectRatio:V}=n;let G=Math.floor(y?N-n.pointerX:0),L=Math.floor(x?S-n.pointerY:0);const F=$+(p?-G:G),q=O+(m?-L:L),Z=-d[0]*$,te=-d[1]*O;let M=oo(F,T,E),U=oo(q,z,w);if(f){let H=0,Y=0;p&&G<0?H=Na(_+G+Z,f[0][0]):!p&&G>0&&(H=wa(_+F+Z,f[1][0])),m&&L<0?Y=Na(C+L+te,f[0][1]):!m&&L>0&&(Y=wa(C+q+te,f[1][1])),M=Math.max(M,H),U=Math.max(U,Y)}if(h){let H=0,Y=0;p&&G>0?H=wa(_+G,h[0][0]):!p&&G<0&&(H=Na(_+F,h[1][0])),m&&L>0?Y=wa(C+L,h[0][1]):!m&&L<0&&(Y=Na(C+q,h[1][1])),M=Math.max(M,H),U=Math.max(U,Y)}if(c){if(y){const H=oo(F/V,z,w)*V;if(M=Math.max(M,H),f){let Y=0;!p&&!m||p&&!m&&v?Y=wa(C+te+F/V,f[1][1])*V:Y=Na(C+te+(p?G:-G)/V,f[0][1])*V,M=Math.max(M,Y)}if(h){let Y=0;!p&&!m||p&&!m&&v?Y=Na(C+F/V,h[1][1])*V:Y=wa(C+(p?G:-G)/V,h[0][1])*V,M=Math.max(M,Y)}}if(x){const H=oo(q*V,T,E)/V;if(U=Math.max(U,H),f){let Y=0;!p&&!m||m&&!p&&v?Y=wa(_+q*V+Z,f[1][0])/V:Y=Na(_+(m?L:-L)*V+Z,f[0][0])/V,U=Math.max(U,Y)}if(h){let Y=0;!p&&!m||m&&!p&&v?Y=Na(_+q*V,h[1][0])/V:Y=wa(_+(m?L:-L)*V,h[0][0])/V,U=Math.max(U,Y)}}}L=L+(L<0?U:-U),G=G+(G<0?M:-M),c&&(v?F>q*V?L=(np(p,m)?-G:G)/V:G=(np(p,m)?-L:L)*V:y?(L=G/V,m=p):(G=L*V,p=m));const j=p?_+G:_,D=m?C+L:C;return{width:$+(p?-G:G),height:O+(m?-L:L),x:d[0]*G*(p?-1:1)+j,y:d[1]*L*(m?-1:1)+D}}const ny={width:0,height:0,x:0,y:0},xM={...ny,pointerX:0,pointerY:0,aspectRatio:1};function yM(n){return[[0,0],[n.measured.width,n.measured.height]]}function bM(n,s,l){const o=s.position.x+n.position.x,c=s.position.y+n.position.y,d=n.measured.width??0,f=n.measured.height??0,h=l[0]*d,p=l[1]*f;return[[o-h,c-p],[o+d-h,c+f-p]]}function vM({domNode:n,nodeId:s,getStoreItems:l,onChange:o,onEnd:c}){const d=Ut(n);let f={controlDirection:tp("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function h({controlPosition:m,boundaries:y,keepAspectRatio:x,resizeDirection:v,onResizeStart:N,onResize:S,onResizeEnd:T,shouldResize:E}){let z={...ny},w={...xM};f={boundaries:y,resizeDirection:v,keepAspectRatio:x,controlDirection:tp(m)};let _,C=null,$=[],O,V,G,L=!1;const F=xx().on("start",q=>{const{nodeLookup:Z,transform:te,snapGrid:M,snapToGrid:U,nodeOrigin:j,paneDomNode:D}=l();if(_=Z.get(s),!_)return;C=D?.getBoundingClientRect()??null;const{xSnapped:H,ySnapped:Y}=hr(q.sourceEvent,{transform:te,snapGrid:M,snapToGrid:U,containerBounds:C});z={width:_.measured.width??0,height:_.measured.height??0,x:_.position.x??0,y:_.position.y??0},w={...z,pointerX:H,pointerY:Y,aspectRatio:z.width/z.height},O=void 0,_.parentId&&(_.extent==="parent"||_.expandParent)&&(O=Z.get(_.parentId),V=O&&_.extent==="parent"?yM(O):void 0),$=[],G=void 0;for(const[ee,Q]of Z)if(Q.parentId===s&&($.push({id:ee,position:{...Q.position},extent:Q.extent}),Q.extent==="parent"||Q.expandParent)){const W=bM(Q,_,Q.origin??j);G?G=[[Math.min(W[0][0],G[0][0]),Math.min(W[0][1],G[0][1])],[Math.max(W[1][0],G[1][0]),Math.max(W[1][1],G[1][1])]]:G=W}N?.(q,{...z})}).on("drag",q=>{const{transform:Z,snapGrid:te,snapToGrid:M,nodeOrigin:U}=l(),j=hr(q.sourceEvent,{transform:Z,snapGrid:te,snapToGrid:M,containerBounds:C}),D=[];if(!_)return;const{x:H,y:Y,width:ee,height:Q}=z,W={},se=_.origin??U,{width:le,height:de,x:be,y:me}=pM(w,f.controlDirection,j,f.boundaries,f.keepAspectRatio,se,V,G),oe=le!==ee,fe=de!==Q,je=be!==H&&oe,Ne=me!==Y&&fe;if(!je&&!Ne&&!oe&&!fe)return;if((je||Ne||se[0]===1||se[1]===1)&&(W.x=je?be:z.x,W.y=Ne?me:z.y,z.x=W.x,z.y=W.y,$.length>0)){const re=be-H,ge=me-Y;for(const Oe of $)Oe.position={x:Oe.position.x-re+se[0]*(le-ee),y:Oe.position.y-ge+se[1]*(de-Q)},D.push(Oe)}if((oe||fe)&&(W.width=oe&&(!f.resizeDirection||f.resizeDirection==="horizontal")?le:z.width,W.height=fe&&(!f.resizeDirection||f.resizeDirection==="vertical")?de:z.height,z.width=W.width,z.height=W.height),O&&_.expandParent){const re=se[0]*(W.width??0);W.x&&W.x<re&&(z.x=re,w.x=w.x-(W.x-re));const ge=se[1]*(W.height??0);W.y&&W.y<ge&&(z.y=ge,w.y=w.y-(W.y-ge))}const ye=mM({width:z.width,prevWidth:ee,height:z.height,prevHeight:Q,affectsX:f.controlDirection.affectsX,affectsY:f.controlDirection.affectsY}),_e={...z,direction:ye};E?.(q,_e)!==!1&&(L=!0,S?.(q,_e),o(W,D))}).on("end",q=>{L&&(T?.(q,{...z}),c?.({...z}),L=!1)});d.call(F)}function p(){d.on(".drag",null)}return{update:h,destroy:p}}const _M={},ap=n=>{let s;const l=new Set,o=(y,x)=>{const v=typeof y=="function"?y(s):y;if(!Object.is(v,s)){const N=s;s=x??(typeof v!="object"||v===null)?v:Object.assign({},s,v),l.forEach(S=>S(s,N))}},c=()=>s,p={setState:o,getState:c,getInitialState:()=>m,subscribe:y=>(l.add(y),()=>l.delete(y)),destroy:()=>{(_M?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),l.clear()}},m=s=n(o,c,p);return p},NM=n=>n?ap(n):ap,{useDebugValue:wM}=ai,{useSyncExternalStoreWithSelector:jM}=Pv,SM=n=>n;function ay(n,s=SM,l){const o=jM(n.subscribe,n.getState,n.getServerState||n.getInitialState,s,l);return wM(o),o}const sp=(n,s)=>{const l=NM(n),o=(c,d=s)=>ay(l,c,d);return Object.assign(o,l),o},kM=(n,s)=>n?sp(n,s):sp;function Qe(n,s){if(Object.is(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;if(n instanceof Map&&s instanceof Map){if(n.size!==s.size)return!1;for(const[o,c]of n)if(!Object.is(c,s.get(o)))return!1;return!0}if(n instanceof Set&&s instanceof Set){if(n.size!==s.size)return!1;for(const o of n)if(!s.has(o))return!1;return!0}const l=Object.keys(n);if(l.length!==Object.keys(s).length)return!1;for(const o of l)if(!Object.prototype.hasOwnProperty.call(s,o)||!Object.is(n[o],s[o]))return!1;return!0}const Yo=A.createContext(null),CM=Yo.Provider,sy=xn.error001();function De(n,s){const l=A.useContext(Yo);if(l===null)throw new Error(sy);return ay(l,n,s)}function Fe(){const n=A.useContext(Yo);if(n===null)throw new Error(sy);return A.useMemo(()=>({getState:n.getState,setState:n.setState,subscribe:n.subscribe}),[n])}const ip={display:"none"},EM={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},iy="react-flow__node-desc",ry="react-flow__edge-desc",zM="react-flow__aria-live",AM=n=>n.ariaLiveMessage,TM=n=>n.ariaLabelConfig;function MM({rfId:n}){const s=De(AM);return i.jsx("div",{id:`${zM}-${n}`,"aria-live":"assertive","aria-atomic":"true",style:EM,children:s})}function DM({rfId:n,disableKeyboardA11y:s}){const l=De(TM);return i.jsxs(i.Fragment,{children:[i.jsx("div",{id:`${iy}-${n}`,style:ip,children:s?l["node.a11yDescription.default"]:l["node.a11yDescription.keyboardDisabled"]}),i.jsx("div",{id:`${ry}-${n}`,style:ip,children:l["edge.a11yDescription.default"]}),!s&&i.jsx(MM,{rfId:n})]})}const Go=A.forwardRef(({position:n="top-left",children:s,className:l,style:o,...c},d)=>{const f=`${n}`.split("-");return i.jsx("div",{className:st(["react-flow__panel",l,...f]),style:o,ref:d,...c,children:s})});Go.displayName="Panel";function OM({proOptions:n,position:s="bottom-right"}){return n?.hideAttribution?null:i.jsx(Go,{position:s,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:i.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const LM=n=>{const s=[],l=[];for(const[,o]of n.nodeLookup)o.selected&&s.push(o.internals.userNode);for(const[,o]of n.edgeLookup)o.selected&&l.push(o);return{selectedNodes:s,selectedEdges:l}},co=n=>n.id;function RM(n,s){return Qe(n.selectedNodes.map(co),s.selectedNodes.map(co))&&Qe(n.selectedEdges.map(co),s.selectedEdges.map(co))}function $M({onSelectionChange:n}){const s=Fe(),{selectedNodes:l,selectedEdges:o}=De(LM,RM);return A.useEffect(()=>{const c={nodes:l,edges:o};n?.(c),s.getState().onSelectionChangeHandlers.forEach(d=>d(c))},[l,o,n]),null}const HM=n=>!!n.onSelectionChangeHandlers;function UM({onSelectionChange:n}){const s=De(HM);return n||s?i.jsx($M,{onSelectionChange:n}):null}const ly=[0,0],BM={x:0,y:0,zoom:1},VM=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],rp=[...VM,"rfId"],qM=n=>({setNodes:n.setNodes,setEdges:n.setEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges}),lp={translateExtent:_r,nodeOrigin:ly,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function YM(n){const{setNodes:s,setEdges:l,setMinZoom:o,setMaxZoom:c,setTranslateExtent:d,setNodeExtent:f,reset:h,setDefaultNodesAndEdges:p}=De(qM,Qe),m=Fe();A.useEffect(()=>(p(n.defaultNodes,n.defaultEdges),()=>{y.current=lp,h()}),[]);const y=A.useRef(lp);return A.useEffect(()=>{for(const x of rp){const v=n[x],N=y.current[x];v!==N&&(typeof n[x]>"u"||(x==="nodes"?s(v):x==="edges"?l(v):x==="minZoom"?o(v):x==="maxZoom"?c(v):x==="translateExtent"?d(v):x==="nodeExtent"?f(v):x==="ariaLabelConfig"?m.setState({ariaLabelConfig:D8(v)}):x==="fitView"?m.setState({fitViewQueued:v}):x==="fitViewOptions"?m.setState({fitViewOptions:v}):m.setState({[x]:v})))}y.current=n},rp.map(x=>n[x])),null}function op(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function GM(n){const[s,l]=A.useState(n==="system"?null:n);return A.useEffect(()=>{if(n!=="system"){l(n);return}const o=op(),c=()=>l(o?.matches?"dark":"light");return c(),o?.addEventListener("change",c),()=>{o?.removeEventListener("change",c)}},[n]),s!==null?s:op()?.matches?"dark":"light"}const cp=typeof document<"u"?document:null;function Sr(n=null,s={target:cp,actInsideInputWithModifier:!0}){const[l,o]=A.useState(!1),c=A.useRef(!1),d=A.useRef(new Set([])),[f,h]=A.useMemo(()=>{if(n!==null){const m=(Array.isArray(n)?n:[n]).filter(x=>typeof x=="string").map(x=>x.replace("+",`
`).replace(`

`,`
+`).split(`
`)),y=m.reduce((x,v)=>x.concat(...v),[]);return[m,y]}return[[],[]]},[n]);return A.useEffect(()=>{const p=s?.target??cp,m=s?.actInsideInputWithModifier??!0;if(n!==null){const y=N=>{if(c.current=N.ctrlKey||N.metaKey||N.shiftKey||N.altKey,(!c.current||c.current&&!m)&&Ux(N))return!1;const T=dp(N.code,h);if(d.current.add(N[T]),up(f,d.current,!1)){const E=N.composedPath?.()?.[0]||N.target,z=E?.nodeName==="BUTTON"||E?.nodeName==="A";s.preventDefault!==!1&&(c.current||!z)&&N.preventDefault(),o(!0)}},x=N=>{const S=dp(N.code,h);up(f,d.current,!0)?(o(!1),d.current.clear()):d.current.delete(N[S]),N.key==="Meta"&&d.current.clear(),c.current=!1},v=()=>{d.current.clear(),o(!1)};return p?.addEventListener("keydown",y),p?.addEventListener("keyup",x),window.addEventListener("blur",v),window.addEventListener("contextmenu",v),()=>{p?.removeEventListener("keydown",y),p?.removeEventListener("keyup",x),window.removeEventListener("blur",v),window.removeEventListener("contextmenu",v)}}},[n,o]),l}function up(n,s,l){return n.filter(o=>l||o.length===s.size).some(o=>o.every(c=>s.has(c)))}function dp(n,s){return s.includes(n)?"code":"key"}const XM=()=>{const n=Fe();return A.useMemo(()=>({zoomIn:s=>{const{panZoom:l}=n.getState();return l?l.scaleBy(1.2,{duration:s?.duration}):Promise.resolve(!1)},zoomOut:s=>{const{panZoom:l}=n.getState();return l?l.scaleBy(1/1.2,{duration:s?.duration}):Promise.resolve(!1)},zoomTo:(s,l)=>{const{panZoom:o}=n.getState();return o?o.scaleTo(s,{duration:l?.duration}):Promise.resolve(!1)},getZoom:()=>n.getState().transform[2],setViewport:async(s,l)=>{const{transform:[o,c,d],panZoom:f}=n.getState();return f?(await f.setViewport({x:s.x??o,y:s.y??c,zoom:s.zoom??d},l),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[s,l,o]=n.getState().transform;return{x:s,y:l,zoom:o}},setCenter:async(s,l,o)=>n.getState().setCenter(s,l,o),fitBounds:async(s,l)=>{const{width:o,height:c,minZoom:d,maxZoom:f,panZoom:h}=n.getState(),p=lf(s,o,c,d,f,l?.padding??.1);return h?(await h.setViewport(p,{duration:l?.duration,ease:l?.ease,interpolate:l?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(s,l={})=>{const{transform:o,snapGrid:c,snapToGrid:d,domNode:f}=n.getState();if(!f)return s;const{x:h,y:p}=f.getBoundingClientRect(),m={x:s.x-h,y:s.y-p},y=l.snapGrid??c,x=l.snapToGrid??d;return Dr(m,o,x,y)},flowToScreenPosition:s=>{const{transform:l,domNode:o}=n.getState();if(!o)return s;const{x:c,y:d}=o.getBoundingClientRect(),f=Eo(s,l);return{x:f.x+c,y:f.y+d}}}),[])};function oy(n,s){const l=[],o=new Map,c=[];for(const d of n)if(d.type==="add"){c.push(d);continue}else if(d.type==="remove"||d.type==="replace")o.set(d.id,[d]);else{const f=o.get(d.id);f?f.push(d):o.set(d.id,[d])}for(const d of s){const f=o.get(d.id);if(!f){l.push(d);continue}if(f[0].type==="remove")continue;if(f[0].type==="replace"){l.push({...f[0].item});continue}const h={...d};for(const p of f)ZM(p,h);l.push(h)}return c.length&&c.forEach(d=>{d.index!==void 0?l.splice(d.index,0,{...d.item}):l.push({...d.item})}),l}function ZM(n,s){switch(n.type){case"select":{s.selected=n.selected;break}case"position":{typeof n.position<"u"&&(s.position=n.position),typeof n.dragging<"u"&&(s.dragging=n.dragging);break}case"dimensions":{typeof n.dimensions<"u"&&(s.measured={...n.dimensions},n.setAttributes&&((n.setAttributes===!0||n.setAttributes==="width")&&(s.width=n.dimensions.width),(n.setAttributes===!0||n.setAttributes==="height")&&(s.height=n.dimensions.height))),typeof n.resizing=="boolean"&&(s.resizing=n.resizing);break}}}function cy(n,s){return oy(n,s)}function uy(n,s){return oy(n,s)}function Pa(n,s){return{id:n,type:"select",selected:s}}function Ps(n,s=new Set,l=!1){const o=[];for(const[c,d]of n){const f=s.has(c);!(d.selected===void 0&&!f)&&d.selected!==f&&(l&&(d.selected=f),o.push(Pa(d.id,f)))}return o}function fp({items:n=[],lookup:s}){const l=[],o=new Map(n.map(c=>[c.id,c]));for(const[c,d]of n.entries()){const f=s.get(d.id),h=f?.internals?.userNode??f;h!==void 0&&h!==d&&l.push({id:d.id,item:d,type:"replace"}),h===void 0&&l.push({item:d,type:"add",index:c})}for(const[c]of s)o.get(c)===void 0&&l.push({id:c,type:"remove"});return l}function gp(n){return{id:n.id,type:"remove"}}const hp=n=>w8(n),QM=n=>Tx(n);function dy(n){return A.forwardRef(n)}const FM=typeof window<"u"?A.useLayoutEffect:A.useEffect;function mp(n){const[s,l]=A.useState(BigInt(0)),[o]=A.useState(()=>KM(()=>l(c=>c+BigInt(1))));return FM(()=>{const c=o.get();c.length&&(n(c),o.reset())},[s]),o}function KM(n){let s=[];return{get:()=>s,reset:()=>{s=[]},push:l=>{s.push(l),n()}}}const fy=A.createContext(null);function IM({children:n}){const s=Fe(),l=A.useCallback(h=>{const{nodes:p=[],setNodes:m,hasDefaultNodes:y,onNodesChange:x,nodeLookup:v,fitViewQueued:N,onNodesChangeMiddlewareMap:S}=s.getState();let T=p;for(const z of h)T=typeof z=="function"?z(T):z;let E=fp({items:T,lookup:v});for(const z of S.values())E=z(E);y&&m(T),E.length>0?x?.(E):N&&window.requestAnimationFrame(()=>{const{fitViewQueued:z,nodes:w,setNodes:_}=s.getState();z&&_(w)})},[]),o=mp(l),c=A.useCallback(h=>{const{edges:p=[],setEdges:m,hasDefaultEdges:y,onEdgesChange:x,edgeLookup:v}=s.getState();let N=p;for(const S of h)N=typeof S=="function"?S(N):S;y?m(N):x&&x(fp({items:N,lookup:v}))},[]),d=mp(c),f=A.useMemo(()=>({nodeQueue:o,edgeQueue:d}),[]);return i.jsx(fy.Provider,{value:f,children:n})}function JM(){const n=A.useContext(fy);if(!n)throw new Error("useBatchContext must be used within a BatchProvider");return n}const WM=n=>!!n.panZoom;function Xo(){const n=XM(),s=Fe(),l=JM(),o=De(WM),c=A.useMemo(()=>{const d=x=>s.getState().nodeLookup.get(x),f=x=>{l.nodeQueue.push(x)},h=x=>{l.edgeQueue.push(x)},p=x=>{const{nodeLookup:v,nodeOrigin:N}=s.getState(),S=hp(x)?x:v.get(x.id),T=S.parentId?$x(S.position,S.measured,S.parentId,v,N):S.position,E={...S,position:T,width:S.measured?.width??S.width,height:S.measured?.height??S.height};return oi(E)},m=(x,v,N={replace:!1})=>{f(S=>S.map(T=>{if(T.id===x){const E=typeof v=="function"?v(T):v;return N.replace&&hp(E)?E:{...T,...E}}return T}))},y=(x,v,N={replace:!1})=>{h(S=>S.map(T=>{if(T.id===x){const E=typeof v=="function"?v(T):v;return N.replace&&QM(E)?E:{...T,...E}}return T}))};return{getNodes:()=>s.getState().nodes.map(x=>({...x})),getNode:x=>d(x)?.internals.userNode,getInternalNode:d,getEdges:()=>{const{edges:x=[]}=s.getState();return x.map(v=>({...v}))},getEdge:x=>s.getState().edgeLookup.get(x),setNodes:f,setEdges:h,addNodes:x=>{const v=Array.isArray(x)?x:[x];l.nodeQueue.push(N=>[...N,...v])},addEdges:x=>{const v=Array.isArray(x)?x:[x];l.edgeQueue.push(N=>[...N,...v])},toObject:()=>{const{nodes:x=[],edges:v=[],transform:N}=s.getState(),[S,T,E]=N;return{nodes:x.map(z=>({...z})),edges:v.map(z=>({...z})),viewport:{x:S,y:T,zoom:E}}},deleteElements:async({nodes:x=[],edges:v=[]})=>{const{nodes:N,edges:S,onNodesDelete:T,onEdgesDelete:E,triggerNodeChanges:z,triggerEdgeChanges:w,onDelete:_,onBeforeDelete:C}=s.getState(),{nodes:$,edges:O}=await E8({nodesToRemove:x,edgesToRemove:v,nodes:N,edges:S,onBeforeDelete:C}),V=O.length>0,G=$.length>0;if(V){const L=O.map(gp);E?.(O),w(L)}if(G){const L=$.map(gp);T?.($),z(L)}return(G||V)&&_?.({nodes:$,edges:O}),{deletedNodes:$,deletedEdges:O}},getIntersectingNodes:(x,v=!0,N)=>{const S=G0(x),T=S?x:p(x),E=N!==void 0;return T?(N||s.getState().nodes).filter(z=>{const w=s.getState().nodeLookup.get(z.id);if(w&&!S&&(z.id===x.id||!w.internals.positionAbsolute))return!1;const _=oi(E?z:w),C=wr(_,T);return v&&C>0||C>=_.width*_.height||C>=T.width*T.height}):[]},isNodeIntersecting:(x,v,N=!0)=>{const T=G0(x)?x:p(x);if(!T)return!1;const E=wr(T,v);return N&&E>0||E>=v.width*v.height||E>=T.width*T.height},updateNode:m,updateNodeData:(x,v,N={replace:!1})=>{m(x,S=>{const T=typeof v=="function"?v(S):v;return N.replace?{...S,data:T}:{...S,data:{...S.data,...T}}},N)},updateEdge:y,updateEdgeData:(x,v,N={replace:!1})=>{y(x,S=>{const T=typeof v=="function"?v(S):v;return N.replace?{...S,data:T}:{...S,data:{...S.data,...T}}},N)},getNodesBounds:x=>{const{nodeLookup:v,nodeOrigin:N}=s.getState();return j8(x,{nodeLookup:v,nodeOrigin:N})},getHandleConnections:({type:x,id:v,nodeId:N})=>Array.from(s.getState().connectionLookup.get(`${N}-${x}${v?`-${v}`:""}`)?.values()??[]),getNodeConnections:({type:x,handleId:v,nodeId:N})=>Array.from(s.getState().connectionLookup.get(`${N}${x?v?`-${x}-${v}`:`-${x}`:""}`)?.values()??[]),fitView:async x=>{const v=s.getState().fitViewResolver??M8();return s.setState({fitViewQueued:!0,fitViewOptions:x,fitViewResolver:v}),l.nodeQueue.push(N=>[...N]),v.promise}}},[]);return A.useMemo(()=>({...c,...n,viewportInitialized:o}),[o])}const pp=n=>n.selected,PM=typeof window<"u"?window:void 0;function eD({deleteKeyCode:n,multiSelectionKeyCode:s}){const l=Fe(),{deleteElements:o}=Xo(),c=Sr(n,{actInsideInputWithModifier:!1}),d=Sr(s,{target:PM});A.useEffect(()=>{if(c){const{edges:f,nodes:h}=l.getState();o({nodes:h.filter(pp),edges:f.filter(pp)}),l.setState({nodesSelectionActive:!1})}},[c]),A.useEffect(()=>{l.setState({multiSelectionActive:d})},[d])}function tD(n){const s=Fe();A.useEffect(()=>{const l=()=>{if(!n.current||!(n.current.checkVisibility?.()??!0))return!1;const o=of(n.current);(o.height===0||o.width===0)&&s.getState().onError?.("004",xn.error004()),s.setState({width:o.width||500,height:o.height||500})};if(n.current){l(),window.addEventListener("resize",l);const o=new ResizeObserver(()=>l());return o.observe(n.current),()=>{window.removeEventListener("resize",l),o&&n.current&&o.unobserve(n.current)}}},[])}const Zo={position:"absolute",width:"100%",height:"100%",top:0,left:0},nD=n=>({userSelectionActive:n.userSelectionActive,lib:n.lib,connectionInProgress:n.connection.inProgress});function aD({onPaneContextMenu:n,zoomOnScroll:s=!0,zoomOnPinch:l=!0,panOnScroll:o=!1,panOnScrollSpeed:c=.5,panOnScrollMode:d=es.Free,zoomOnDoubleClick:f=!0,panOnDrag:h=!0,defaultViewport:p,translateExtent:m,minZoom:y,maxZoom:x,zoomActivationKeyCode:v,preventScrolling:N=!0,children:S,noWheelClassName:T,noPanClassName:E,onViewportChange:z,isControlledViewport:w,paneClickDistance:_,selectionOnDrag:C}){const $=Fe(),O=A.useRef(null),{userSelectionActive:V,lib:G,connectionInProgress:L}=De(nD,Qe),F=Sr(v),q=A.useRef();tD(O);const Z=A.useCallback(te=>{z?.({x:te[0],y:te[1],zoom:te[2]}),w||$.setState({transform:te})},[z,w]);return A.useEffect(()=>{if(O.current){q.current=hM({domNode:O.current,minZoom:y,maxZoom:x,translateExtent:m,viewport:p,onDraggingChange:j=>$.setState({paneDragging:j}),onPanZoomStart:(j,D)=>{const{onViewportChangeStart:H,onMoveStart:Y}=$.getState();Y?.(j,D),H?.(D)},onPanZoom:(j,D)=>{const{onViewportChange:H,onMove:Y}=$.getState();Y?.(j,D),H?.(D)},onPanZoomEnd:(j,D)=>{const{onViewportChangeEnd:H,onMoveEnd:Y}=$.getState();Y?.(j,D),H?.(D)}});const{x:te,y:M,zoom:U}=q.current.getViewport();return $.setState({panZoom:q.current,transform:[te,M,U],domNode:O.current.closest(".react-flow")}),()=>{q.current?.destroy()}}},[]),A.useEffect(()=>{q.current?.update({onPaneContextMenu:n,zoomOnScroll:s,zoomOnPinch:l,panOnScroll:o,panOnScrollSpeed:c,panOnScrollMode:d,zoomOnDoubleClick:f,panOnDrag:h,zoomActivationKeyPressed:F,preventScrolling:N,noPanClassName:E,userSelectionActive:V,noWheelClassName:T,lib:G,onTransformChange:Z,connectionInProgress:L,selectionOnDrag:C,paneClickDistance:_})},[n,s,l,o,c,d,f,h,F,N,E,V,T,G,Z,L,C,_]),i.jsx("div",{className:"react-flow__renderer",ref:O,style:Zo,children:S})}const sD=n=>({userSelectionActive:n.userSelectionActive,userSelectionRect:n.userSelectionRect});function iD(){const{userSelectionActive:n,userSelectionRect:s}=De(sD,Qe);return n&&s?i.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:s.width,height:s.height,transform:`translate(${s.x}px, ${s.y}px)`}}):null}const Ed=(n,s)=>l=>{l.target===s.current&&n?.(l)},rD=n=>({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable,connectionInProgress:n.connection.inProgress,dragging:n.paneDragging});function lD({isSelecting:n,selectionKeyPressed:s,selectionMode:l=Nr.Full,panOnDrag:o,paneClickDistance:c,selectionOnDrag:d,onSelectionStart:f,onSelectionEnd:h,onPaneClick:p,onPaneContextMenu:m,onPaneScroll:y,onPaneMouseEnter:x,onPaneMouseMove:v,onPaneMouseLeave:N,children:S}){const T=Fe(),{userSelectionActive:E,elementsSelectable:z,dragging:w,connectionInProgress:_}=De(rD,Qe),C=z&&(n||E),$=A.useRef(null),O=A.useRef(),V=A.useRef(new Set),G=A.useRef(new Set),L=A.useRef(!1),F=H=>{if(L.current||_){L.current=!1;return}p?.(H),T.getState().resetSelectedElements(),T.setState({nodesSelectionActive:!1})},q=H=>{if(Array.isArray(o)&&o?.includes(2)){H.preventDefault();return}m?.(H)},Z=y?H=>y(H):void 0,te=H=>{L.current&&(H.stopPropagation(),L.current=!1)},M=H=>{const{domNode:Y}=T.getState();if(O.current=Y?.getBoundingClientRect(),!O.current)return;const ee=H.target===$.current;if(!ee&&!!H.target.closest(".nokey")||!n||!(d&&ee||s)||H.button!==0||!H.isPrimary)return;H.target?.setPointerCapture?.(H.pointerId),L.current=!1;const{x:se,y:le}=an(H.nativeEvent,O.current);T.setState({userSelectionRect:{width:0,height:0,startX:se,startY:le,x:se,y:le}}),ee||(H.stopPropagation(),H.preventDefault())},U=H=>{const{userSelectionRect:Y,transform:ee,nodeLookup:Q,edgeLookup:W,connectionLookup:se,triggerNodeChanges:le,triggerEdgeChanges:de,defaultEdgeOptions:be,resetSelectedElements:me}=T.getState();if(!O.current||!Y)return;const{x:oe,y:fe}=an(H.nativeEvent,O.current),{startX:je,startY:Ne}=Y;if(!L.current){const ge=s?0:c;if(Math.hypot(oe-je,fe-Ne)<=ge)return;me(),f?.(H)}L.current=!0;const ye={startX:je,startY:Ne,x:oe<je?oe:je,y:fe<Ne?fe:Ne,width:Math.abs(oe-je),height:Math.abs(fe-Ne)},_e=V.current,Ce=G.current;V.current=new Set(rf(Q,ye,ee,l===Nr.Partial,!0).map(ge=>ge.id)),G.current=new Set;const re=be?.selectable??!0;for(const ge of V.current){const Oe=se.get(ge);if(Oe)for(const{edgeId:it}of Oe.values()){const Tt=W.get(it);Tt&&(Tt.selectable??re)&&G.current.add(it)}}if(!X0(_e,V.current)){const ge=Ps(Q,V.current,!0);le(ge)}if(!X0(Ce,G.current)){const ge=Ps(W,G.current);de(ge)}T.setState({userSelectionRect:ye,userSelectionActive:!0,nodesSelectionActive:!1})},j=H=>{H.button===0&&(H.target?.releasePointerCapture?.(H.pointerId),!E&&H.target===$.current&&T.getState().userSelectionRect&&F?.(H),T.setState({userSelectionActive:!1,userSelectionRect:null}),L.current&&(h?.(H),T.setState({nodesSelectionActive:V.current.size>0})))},D=o===!0||Array.isArray(o)&&o.includes(0);return i.jsxs("div",{className:st(["react-flow__pane",{draggable:D,dragging:w,selection:n}]),onClick:C?void 0:Ed(F,$),onContextMenu:Ed(q,$),onWheel:Ed(Z,$),onPointerEnter:C?void 0:x,onPointerMove:C?U:v,onPointerUp:C?j:void 0,onPointerDownCapture:C?M:void 0,onClickCapture:C?te:void 0,onPointerLeave:N,ref:$,style:Zo,children:[S,i.jsx(iD,{})]})}function Qd({id:n,store:s,unselect:l=!1,nodeRef:o}){const{addSelectedNodes:c,unselectNodesAndEdges:d,multiSelectionActive:f,nodeLookup:h,onError:p}=s.getState(),m=h.get(n);if(!m){p?.("012",xn.error012(n));return}s.setState({nodesSelectionActive:!1}),m.selected?(l||m.selected&&f)&&(d({nodes:[m],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):c([n])}function gy({nodeRef:n,disabled:s=!1,noDragClassName:l,handleSelector:o,nodeId:c,isSelectable:d,nodeClickDistance:f}){const h=Fe(),[p,m]=A.useState(!1),y=A.useRef();return A.useEffect(()=>{y.current=eM({getStoreItems:()=>h.getState(),onNodeMouseDown:x=>{Qd({id:x,store:h,nodeRef:n})},onDragStart:()=>{m(!0)},onDragStop:()=>{m(!1)}})},[]),A.useEffect(()=>{if(s)y.current?.destroy();else if(n.current)return y.current?.update({noDragClassName:l,handleSelector:o,domNode:n.current,isSelectable:d,nodeId:c,nodeClickDistance:f}),()=>{y.current?.destroy()}},[l,o,s,d,n,c]),p}const oD=n=>s=>s.selected&&(s.draggable||n&&typeof s.draggable>"u");function hy(){const n=Fe();return A.useCallback(l=>{const{nodeExtent:o,snapToGrid:c,snapGrid:d,nodesDraggable:f,onError:h,updateNodePositions:p,nodeLookup:m,nodeOrigin:y}=n.getState(),x=new Map,v=oD(f),N=c?d[0]:5,S=c?d[1]:5,T=l.direction.x*N*l.factor,E=l.direction.y*S*l.factor;for(const[,z]of m){if(!v(z))continue;let w={x:z.internals.positionAbsolute.x+T,y:z.internals.positionAbsolute.y+E};c&&(w=Mr(w,d));const{position:_,positionAbsolute:C}=Mx({nodeId:z.id,nextPosition:w,nodeLookup:m,nodeExtent:o,nodeOrigin:y,onError:h});z.position=_,z.internals.positionAbsolute=C,x.set(z.id,z)}p(x)},[])}const hf=A.createContext(null),cD=hf.Provider;hf.Consumer;const my=()=>A.useContext(hf),uD=n=>({connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName,rfId:n.rfId}),dD=(n,s,l)=>o=>{const{connectionClickStartHandle:c,connectionMode:d,connection:f}=o,{fromHandle:h,toHandle:p,isValid:m}=f,y=p?.nodeId===n&&p?.id===s&&p?.type===l;return{connectingFrom:h?.nodeId===n&&h?.id===s&&h?.type===l,connectingTo:y,clickConnecting:c?.nodeId===n&&c?.id===s&&c?.type===l,isPossibleEndHandle:d===ri.Strict?h?.type!==l:n!==h?.nodeId||s!==h?.id,connectionInProcess:!!h,clickConnectionInProcess:!!c,valid:y&&m}};function fD({type:n="source",position:s=pe.Top,isValidConnection:l,isConnectable:o=!0,isConnectableStart:c=!0,isConnectableEnd:d=!0,id:f,onConnect:h,children:p,className:m,onMouseDown:y,onTouchStart:x,...v},N){const S=f||null,T=n==="target",E=Fe(),z=my(),{connectOnClick:w,noPanClassName:_,rfId:C}=De(uD,Qe),{connectingFrom:$,connectingTo:O,clickConnecting:V,isPossibleEndHandle:G,connectionInProcess:L,clickConnectionInProcess:F,valid:q}=De(dD(z,S,n),Qe);z||E.getState().onError?.("010",xn.error010());const Z=U=>{const{defaultEdgeOptions:j,onConnect:D,hasDefaultEdges:H}=E.getState(),Y={...j,...U};if(H){const{edges:ee,setEdges:Q}=E.getState();Q(Gx(Y,ee))}D?.(Y),h?.(Y)},te=U=>{if(!z)return;const j=Bx(U.nativeEvent);if(c&&(j&&U.button===0||!j)){const D=E.getState();Zd.onPointerDown(U.nativeEvent,{handleDomNode:U.currentTarget,autoPanOnConnect:D.autoPanOnConnect,connectionMode:D.connectionMode,connectionRadius:D.connectionRadius,domNode:D.domNode,nodeLookup:D.nodeLookup,lib:D.lib,isTarget:T,handleId:S,nodeId:z,flowId:D.rfId,panBy:D.panBy,cancelConnection:D.cancelConnection,onConnectStart:D.onConnectStart,onConnectEnd:D.onConnectEnd,updateConnection:D.updateConnection,onConnect:Z,isValidConnection:l||D.isValidConnection,getTransform:()=>E.getState().transform,getFromHandle:()=>E.getState().connection.fromHandle,autoPanSpeed:D.autoPanSpeed,dragThreshold:D.connectionDragThreshold})}j?y?.(U):x?.(U)},M=U=>{const{onClickConnectStart:j,onClickConnectEnd:D,connectionClickStartHandle:H,connectionMode:Y,isValidConnection:ee,lib:Q,rfId:W,nodeLookup:se,connection:le}=E.getState();if(!z||!H&&!c)return;if(!H){j?.(U.nativeEvent,{nodeId:z,handleId:S,handleType:n}),E.setState({connectionClickStartHandle:{nodeId:z,type:n,id:S}});return}const de=Hx(U.target),be=l||ee,{connection:me,isValid:oe}=Zd.isValid(U.nativeEvent,{handle:{nodeId:z,id:S,type:n},connectionMode:Y,fromNodeId:H.nodeId,fromHandleId:H.id||null,fromType:H.type,isValidConnection:be,flowId:W,doc:de,lib:Q,nodeLookup:se});oe&&me&&Z(me);const fe=structuredClone(le);delete fe.inProgress,fe.toPosition=fe.toHandle?fe.toHandle.position:null,D?.(U,fe),E.setState({connectionClickStartHandle:null})};return i.jsx("div",{"data-handleid":S,"data-nodeid":z,"data-handlepos":s,"data-id":`${C}-${z}-${S}-${n}`,className:st(["react-flow__handle",`react-flow__handle-${s}`,"nodrag",_,m,{source:!T,target:T,connectable:o,connectablestart:c,connectableend:d,clickconnecting:V,connectingfrom:$,connectingto:O,valid:q,connectionindicator:o&&(!L||G)&&(L||F?d:c)}]),onMouseDown:te,onTouchStart:te,onClick:w?M:void 0,ref:N,...v,children:p})}const pn=A.memo(dy(fD));function gD({data:n,isConnectable:s,sourcePosition:l=pe.Bottom}){return i.jsxs(i.Fragment,{children:[n?.label,i.jsx(pn,{type:"source",position:l,isConnectable:s})]})}function hD({data:n,isConnectable:s,targetPosition:l=pe.Top,sourcePosition:o=pe.Bottom}){return i.jsxs(i.Fragment,{children:[i.jsx(pn,{type:"target",position:l,isConnectable:s}),n?.label,i.jsx(pn,{type:"source",position:o,isConnectable:s})]})}function mD(){return null}function pD({data:n,isConnectable:s,targetPosition:l=pe.Top}){return i.jsxs(i.Fragment,{children:[i.jsx(pn,{type:"target",position:l,isConnectable:s}),n?.label]})}const zo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},xp={input:gD,default:hD,output:pD,group:mD};function xD(n){return n.internals.handleBounds===void 0?{width:n.width??n.initialWidth??n.style?.width,height:n.height??n.initialHeight??n.style?.height}:{width:n.width??n.style?.width,height:n.height??n.style?.height}}const yD=n=>{const{width:s,height:l,x:o,y:c}=Tr(n.nodeLookup,{filter:d=>!!d.selected});return{width:nn(s)?s:null,height:nn(l)?l:null,userSelectionActive:n.userSelectionActive,transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]}) translate(${o}px,${c}px)`}};function bD({onSelectionContextMenu:n,noPanClassName:s,disableKeyboardA11y:l}){const o=Fe(),{width:c,height:d,transformString:f,userSelectionActive:h}=De(yD,Qe),p=hy(),m=A.useRef(null);if(A.useEffect(()=>{l||m.current?.focus({preventScroll:!0})},[l]),gy({nodeRef:m}),h||!c||!d)return null;const y=n?v=>{const N=o.getState().nodes.filter(S=>S.selected);n(v,N)}:void 0,x=v=>{Object.prototype.hasOwnProperty.call(zo,v.key)&&(v.preventDefault(),p({direction:zo[v.key],factor:v.shiftKey?4:1}))};return i.jsx("div",{className:st(["react-flow__nodesselection","react-flow__container",s]),style:{transform:f},children:i.jsx("div",{ref:m,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:l?void 0:-1,onKeyDown:l?void 0:x,style:{width:c,height:d}})})}const yp=typeof window<"u"?window:void 0,vD=n=>({nodesSelectionActive:n.nodesSelectionActive,userSelectionActive:n.userSelectionActive});function py({children:n,onPaneClick:s,onPaneMouseEnter:l,onPaneMouseMove:o,onPaneMouseLeave:c,onPaneContextMenu:d,onPaneScroll:f,paneClickDistance:h,deleteKeyCode:p,selectionKeyCode:m,selectionOnDrag:y,selectionMode:x,onSelectionStart:v,onSelectionEnd:N,multiSelectionKeyCode:S,panActivationKeyCode:T,zoomActivationKeyCode:E,elementsSelectable:z,zoomOnScroll:w,zoomOnPinch:_,panOnScroll:C,panOnScrollSpeed:$,panOnScrollMode:O,zoomOnDoubleClick:V,panOnDrag:G,defaultViewport:L,translateExtent:F,minZoom:q,maxZoom:Z,preventScrolling:te,onSelectionContextMenu:M,noWheelClassName:U,noPanClassName:j,disableKeyboardA11y:D,onViewportChange:H,isControlledViewport:Y}){const{nodesSelectionActive:ee,userSelectionActive:Q}=De(vD,Qe),W=Sr(m,{target:yp}),se=Sr(T,{target:yp}),le=se||G,de=se||C,be=y&&le!==!0,me=W||Q||be;return eD({deleteKeyCode:p,multiSelectionKeyCode:S}),i.jsx(aD,{onPaneContextMenu:d,elementsSelectable:z,zoomOnScroll:w,zoomOnPinch:_,panOnScroll:de,panOnScrollSpeed:$,panOnScrollMode:O,zoomOnDoubleClick:V,panOnDrag:!W&&le,defaultViewport:L,translateExtent:F,minZoom:q,maxZoom:Z,zoomActivationKeyCode:E,preventScrolling:te,noWheelClassName:U,noPanClassName:j,onViewportChange:H,isControlledViewport:Y,paneClickDistance:h,selectionOnDrag:be,children:i.jsxs(lD,{onSelectionStart:v,onSelectionEnd:N,onPaneClick:s,onPaneMouseEnter:l,onPaneMouseMove:o,onPaneMouseLeave:c,onPaneContextMenu:d,onPaneScroll:f,panOnDrag:le,isSelecting:!!me,selectionMode:x,selectionKeyPressed:W,paneClickDistance:h,selectionOnDrag:be,children:[n,ee&&i.jsx(bD,{onSelectionContextMenu:M,noPanClassName:j,disableKeyboardA11y:D})]})})}py.displayName="FlowRenderer";const _D=A.memo(py),ND=n=>s=>n?rf(s.nodeLookup,{x:0,y:0,width:s.width,height:s.height},s.transform,!0).map(l=>l.id):Array.from(s.nodeLookup.keys());function wD(n){return De(A.useCallback(ND(n),[n]),Qe)}const jD=n=>n.updateNodeInternals;function SD(){const n=De(jD),[s]=A.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(l=>{const o=new Map;l.forEach(c=>{const d=c.target.getAttribute("data-id");o.set(d,{id:d,nodeElement:c.target,force:!0})}),n(o)}));return A.useEffect(()=>()=>{s?.disconnect()},[s]),s}function kD({node:n,nodeType:s,hasDimensions:l,resizeObserver:o}){const c=Fe(),d=A.useRef(null),f=A.useRef(null),h=A.useRef(n.sourcePosition),p=A.useRef(n.targetPosition),m=A.useRef(s),y=l&&!!n.internals.handleBounds;return A.useEffect(()=>{d.current&&!n.hidden&&(!y||f.current!==d.current)&&(f.current&&o?.unobserve(f.current),o?.observe(d.current),f.current=d.current)},[y,n.hidden]),A.useEffect(()=>()=>{f.current&&(o?.unobserve(f.current),f.current=null)},[]),A.useEffect(()=>{if(d.current){const x=m.current!==s,v=h.current!==n.sourcePosition,N=p.current!==n.targetPosition;(x||v||N)&&(m.current=s,h.current=n.sourcePosition,p.current=n.targetPosition,c.getState().updateNodeInternals(new Map([[n.id,{id:n.id,nodeElement:d.current,force:!0}]])))}},[n.id,s,n.sourcePosition,n.targetPosition]),d}function CD({id:n,onClick:s,onMouseEnter:l,onMouseMove:o,onMouseLeave:c,onContextMenu:d,onDoubleClick:f,nodesDraggable:h,elementsSelectable:p,nodesConnectable:m,nodesFocusable:y,resizeObserver:x,noDragClassName:v,noPanClassName:N,disableKeyboardA11y:S,rfId:T,nodeTypes:E,nodeClickDistance:z,onError:w}){const{node:_,internals:C,isParent:$}=De(oe=>{const fe=oe.nodeLookup.get(n),je=oe.parentLookup.has(n);return{node:fe,internals:fe.internals,isParent:je}},Qe);let O=_.type||"default",V=E?.[O]||xp[O];V===void 0&&(w?.("003",xn.error003(O)),O="default",V=E?.default||xp.default);const G=!!(_.draggable||h&&typeof _.draggable>"u"),L=!!(_.selectable||p&&typeof _.selectable>"u"),F=!!(_.connectable||m&&typeof _.connectable>"u"),q=!!(_.focusable||y&&typeof _.focusable>"u"),Z=Fe(),te=Rx(_),M=kD({node:_,nodeType:O,hasDimensions:te,resizeObserver:x}),U=gy({nodeRef:M,disabled:_.hidden||!G,noDragClassName:v,handleSelector:_.dragHandle,nodeId:n,isSelectable:L,nodeClickDistance:z}),j=hy();if(_.hidden)return null;const D=Zn(_),H=xD(_),Y=L||G||s||l||o||c,ee=l?oe=>l(oe,{...C.userNode}):void 0,Q=o?oe=>o(oe,{...C.userNode}):void 0,W=c?oe=>c(oe,{...C.userNode}):void 0,se=d?oe=>d(oe,{...C.userNode}):void 0,le=f?oe=>f(oe,{...C.userNode}):void 0,de=oe=>{const{selectNodesOnDrag:fe,nodeDragThreshold:je}=Z.getState();L&&(!fe||!G||je>0)&&Qd({id:n,store:Z,nodeRef:M}),s&&s(oe,{...C.userNode})},be=oe=>{if(!(Ux(oe.nativeEvent)||S)){if(Cx.includes(oe.key)&&L){const fe=oe.key==="Escape";Qd({id:n,store:Z,unselect:fe,nodeRef:M})}else if(G&&_.selected&&Object.prototype.hasOwnProperty.call(zo,oe.key)){oe.preventDefault();const{ariaLabelConfig:fe}=Z.getState();Z.setState({ariaLiveMessage:fe["node.a11yDescription.ariaLiveMessage"]({direction:oe.key.replace("Arrow","").toLowerCase(),x:~~C.positionAbsolute.x,y:~~C.positionAbsolute.y})}),j({direction:zo[oe.key],factor:oe.shiftKey?4:1})}}},me=()=>{if(S||!M.current?.matches(":focus-visible"))return;const{transform:oe,width:fe,height:je,autoPanOnNodeFocus:Ne,setCenter:ye}=Z.getState();if(!Ne)return;rf(new Map([[n,_]]),{x:0,y:0,width:fe,height:je},oe,!0).length>0||ye(_.position.x+D.width/2,_.position.y+D.height/2,{zoom:oe[2]})};return i.jsx("div",{className:st(["react-flow__node",`react-flow__node-${O}`,{[N]:G},_.className,{selected:_.selected,selectable:L,parent:$,draggable:G,dragging:U}]),ref:M,style:{zIndex:C.z,transform:`translate(${C.positionAbsolute.x}px,${C.positionAbsolute.y}px)`,pointerEvents:Y?"all":"none",visibility:te?"visible":"hidden",..._.style,...H},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ee,onMouseMove:Q,onMouseLeave:W,onContextMenu:se,onClick:de,onDoubleClick:le,onKeyDown:q?be:void 0,tabIndex:q?0:void 0,onFocus:q?me:void 0,role:_.ariaRole??(q?"group":void 0),"aria-roledescription":"node","aria-describedby":S?void 0:`${iy}-${T}`,"aria-label":_.ariaLabel,..._.domAttributes,children:i.jsx(cD,{value:n,children:i.jsx(V,{id:n,data:_.data,type:O,positionAbsoluteX:C.positionAbsolute.x,positionAbsoluteY:C.positionAbsolute.y,selected:_.selected??!1,selectable:L,draggable:G,deletable:_.deletable??!0,isConnectable:F,sourcePosition:_.sourcePosition,targetPosition:_.targetPosition,dragging:U,dragHandle:_.dragHandle,zIndex:C.z,parentId:_.parentId,...D})})})}var ED=A.memo(CD);const zD=n=>({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,onError:n.onError});function xy(n){const{nodesDraggable:s,nodesConnectable:l,nodesFocusable:o,elementsSelectable:c,onError:d}=De(zD,Qe),f=wD(n.onlyRenderVisibleElements),h=SD();return i.jsx("div",{className:"react-flow__nodes",style:Zo,children:f.map(p=>i.jsx(ED,{id:p,nodeTypes:n.nodeTypes,nodeExtent:n.nodeExtent,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,resizeObserver:h,nodesDraggable:s,nodesConnectable:l,nodesFocusable:o,elementsSelectable:c,nodeClickDistance:n.nodeClickDistance,onError:d},p))})}xy.displayName="NodeRenderer";const AD=A.memo(xy);function TD(n){return De(A.useCallback(l=>{if(!n)return l.edges.map(c=>c.id);const o=[];if(l.width&&l.height)for(const c of l.edges){const d=l.nodeLookup.get(c.source),f=l.nodeLookup.get(c.target);d&&f&&R8({sourceNode:d,targetNode:f,width:l.width,height:l.height,transform:l.transform})&&o.push(c.id)}return o},[n]),Qe)}const MD=({color:n="none",strokeWidth:s=1})=>{const l={strokeWidth:s,...n&&{stroke:n}};return i.jsx("polyline",{className:"arrow",style:l,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},DD=({color:n="none",strokeWidth:s=1})=>{const l={strokeWidth:s,...n&&{stroke:n,fill:n}};return i.jsx("polyline",{className:"arrowclosed",style:l,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},bp={[ko.Arrow]:MD,[ko.ArrowClosed]:DD};function OD(n){const s=Fe();return A.useMemo(()=>Object.prototype.hasOwnProperty.call(bp,n)?bp[n]:(s.getState().onError?.("009",xn.error009(n)),null),[n])}const LD=({id:n,type:s,color:l,width:o=12.5,height:c=12.5,markerUnits:d="strokeWidth",strokeWidth:f,orient:h="auto-start-reverse"})=>{const p=OD(s);return p?i.jsx("marker",{className:"react-flow__arrowhead",id:n,markerWidth:`${o}`,markerHeight:`${c}`,viewBox:"-10 -10 20 20",markerUnits:d,orient:h,refX:"0",refY:"0",children:i.jsx(p,{color:l,strokeWidth:f})}):null},yy=({defaultColor:n,rfId:s})=>{const l=De(d=>d.edges),o=De(d=>d.defaultEdgeOptions),c=A.useMemo(()=>Y8(l,{id:s,defaultColor:n,defaultMarkerStart:o?.markerStart,defaultMarkerEnd:o?.markerEnd}),[l,o,s,n]);return c.length?i.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:i.jsx("defs",{children:c.map(d=>i.jsx(LD,{id:d.id,type:d.type,color:d.color,width:d.width,height:d.height,markerUnits:d.markerUnits,strokeWidth:d.strokeWidth,orient:d.orient},d.id))})}):null};yy.displayName="MarkerDefinitions";var RD=A.memo(yy);function by({x:n,y:s,label:l,labelStyle:o,labelShowBg:c=!0,labelBgStyle:d,labelBgPadding:f=[2,4],labelBgBorderRadius:h=2,children:p,className:m,...y}){const[x,v]=A.useState({x:1,y:0,width:0,height:0}),N=st(["react-flow__edge-textwrapper",m]),S=A.useRef(null);return A.useEffect(()=>{if(S.current){const T=S.current.getBBox();v({x:T.x,y:T.y,width:T.width,height:T.height})}},[l]),l?i.jsxs("g",{transform:`translate(${n-x.width/2} ${s-x.height/2})`,className:N,visibility:x.width?"visible":"hidden",...y,children:[c&&i.jsx("rect",{width:x.width+2*f[0],x:-f[0],y:-f[1],height:x.height+2*f[1],className:"react-flow__edge-textbg",style:d,rx:h,ry:h}),i.jsx("text",{className:"react-flow__edge-text",y:x.height/2,dy:"0.3em",ref:S,style:o,children:l}),p]}):null}by.displayName="EdgeText";const $D=A.memo(by);function Qo({path:n,labelX:s,labelY:l,label:o,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,interactionWidth:m=20,...y}){return i.jsxs(i.Fragment,{children:[i.jsx("path",{...y,d:n,fill:"none",className:st(["react-flow__edge-path",y.className])}),m?i.jsx("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}):null,o&&nn(s)&&nn(l)?i.jsx($D,{x:s,y:l,label:o,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p}):null]})}function vp({pos:n,x1:s,y1:l,x2:o,y2:c}){return n===pe.Left||n===pe.Right?[.5*(s+o),l]:[s,.5*(l+c)]}function vy({sourceX:n,sourceY:s,sourcePosition:l=pe.Bottom,targetX:o,targetY:c,targetPosition:d=pe.Top}){const[f,h]=vp({pos:l,x1:n,y1:s,x2:o,y2:c}),[p,m]=vp({pos:d,x1:o,y1:c,x2:n,y2:s}),[y,x,v,N]=Vx({sourceX:n,sourceY:s,targetX:o,targetY:c,sourceControlX:f,sourceControlY:h,targetControlX:p,targetControlY:m});return[`M${n},${s} C${f},${h} ${p},${m} ${o},${c}`,y,x,v,N]}function _y(n){return A.memo(({id:s,sourceX:l,sourceY:o,targetX:c,targetY:d,sourcePosition:f,targetPosition:h,label:p,labelStyle:m,labelShowBg:y,labelBgStyle:x,labelBgPadding:v,labelBgBorderRadius:N,style:S,markerEnd:T,markerStart:E,interactionWidth:z})=>{const[w,_,C]=vy({sourceX:l,sourceY:o,sourcePosition:f,targetX:c,targetY:d,targetPosition:h}),$=n.isInternal?void 0:s;return i.jsx(Qo,{id:$,path:w,labelX:_,labelY:C,label:p,labelStyle:m,labelShowBg:y,labelBgStyle:x,labelBgPadding:v,labelBgBorderRadius:N,style:S,markerEnd:T,markerStart:E,interactionWidth:z})})}const HD=_y({isInternal:!1}),Ny=_y({isInternal:!0});HD.displayName="SimpleBezierEdge";Ny.displayName="SimpleBezierEdgeInternal";function wy(n){return A.memo(({id:s,sourceX:l,sourceY:o,targetX:c,targetY:d,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:x,style:v,sourcePosition:N=pe.Bottom,targetPosition:S=pe.Top,markerEnd:T,markerStart:E,pathOptions:z,interactionWidth:w})=>{const[_,C,$]=Yd({sourceX:l,sourceY:o,sourcePosition:N,targetX:c,targetY:d,targetPosition:S,borderRadius:z?.borderRadius,offset:z?.offset,stepPosition:z?.stepPosition}),O=n.isInternal?void 0:s;return i.jsx(Qo,{id:O,path:_,labelX:C,labelY:$,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:x,style:v,markerEnd:T,markerStart:E,interactionWidth:w})})}const jy=wy({isInternal:!1}),Sy=wy({isInternal:!0});jy.displayName="SmoothStepEdge";Sy.displayName="SmoothStepEdgeInternal";function ky(n){return A.memo(({id:s,...l})=>{const o=n.isInternal?void 0:s;return i.jsx(jy,{...l,id:o,pathOptions:A.useMemo(()=>({borderRadius:0,offset:l.pathOptions?.offset}),[l.pathOptions?.offset])})})}const UD=ky({isInternal:!1}),Cy=ky({isInternal:!0});UD.displayName="StepEdge";Cy.displayName="StepEdgeInternal";function Ey(n){return A.memo(({id:s,sourceX:l,sourceY:o,targetX:c,targetY:d,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:x,style:v,markerEnd:N,markerStart:S,interactionWidth:T})=>{const[E,z,w]=Xx({sourceX:l,sourceY:o,targetX:c,targetY:d}),_=n.isInternal?void 0:s;return i.jsx(Qo,{id:_,path:E,labelX:z,labelY:w,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:x,style:v,markerEnd:N,markerStart:S,interactionWidth:T})})}const BD=Ey({isInternal:!1}),zy=Ey({isInternal:!0});BD.displayName="StraightEdge";zy.displayName="StraightEdgeInternal";function Ay(n){return A.memo(({id:s,sourceX:l,sourceY:o,targetX:c,targetY:d,sourcePosition:f=pe.Bottom,targetPosition:h=pe.Top,label:p,labelStyle:m,labelShowBg:y,labelBgStyle:x,labelBgPadding:v,labelBgBorderRadius:N,style:S,markerEnd:T,markerStart:E,pathOptions:z,interactionWidth:w})=>{const[_,C,$]=qx({sourceX:l,sourceY:o,sourcePosition:f,targetX:c,targetY:d,targetPosition:h,curvature:z?.curvature}),O=n.isInternal?void 0:s;return i.jsx(Qo,{id:O,path:_,labelX:C,labelY:$,label:p,labelStyle:m,labelShowBg:y,labelBgStyle:x,labelBgPadding:v,labelBgBorderRadius:N,style:S,markerEnd:T,markerStart:E,interactionWidth:w})})}const VD=Ay({isInternal:!1}),Ty=Ay({isInternal:!0});VD.displayName="BezierEdge";Ty.displayName="BezierEdgeInternal";const _p={default:Ty,straight:zy,step:Cy,smoothstep:Sy,simplebezier:Ny},Np={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},qD=(n,s,l)=>l===pe.Left?n-s:l===pe.Right?n+s:n,YD=(n,s,l)=>l===pe.Top?n-s:l===pe.Bottom?n+s:n,wp="react-flow__edgeupdater";function jp({position:n,centerX:s,centerY:l,radius:o=10,onMouseDown:c,onMouseEnter:d,onMouseOut:f,type:h}){return i.jsx("circle",{onMouseDown:c,onMouseEnter:d,onMouseOut:f,className:st([wp,`${wp}-${h}`]),cx:qD(s,o,n),cy:YD(l,o,n),r:o,stroke:"transparent",fill:"transparent"})}function GD({isReconnectable:n,reconnectRadius:s,edge:l,sourceX:o,sourceY:c,targetX:d,targetY:f,sourcePosition:h,targetPosition:p,onReconnect:m,onReconnectStart:y,onReconnectEnd:x,setReconnecting:v,setUpdateHover:N}){const S=Fe(),T=(C,$)=>{if(C.button!==0)return;const{autoPanOnConnect:O,domNode:V,isValidConnection:G,connectionMode:L,connectionRadius:F,lib:q,onConnectStart:Z,onConnectEnd:te,cancelConnection:M,nodeLookup:U,rfId:j,panBy:D,updateConnection:H}=S.getState(),Y=$.type==="target",ee=(se,le)=>{v(!1),x?.(se,l,$.type,le)},Q=se=>m?.(l,se),W=(se,le)=>{v(!0),y?.(C,l,$.type),Z?.(se,le)};Zd.onPointerDown(C.nativeEvent,{autoPanOnConnect:O,connectionMode:L,connectionRadius:F,domNode:V,handleId:$.id,nodeId:$.nodeId,nodeLookup:U,isTarget:Y,edgeUpdaterType:$.type,lib:q,flowId:j,cancelConnection:M,panBy:D,isValidConnection:G,onConnect:Q,onConnectStart:W,onConnectEnd:te,onReconnectEnd:ee,updateConnection:H,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,dragThreshold:S.getState().connectionDragThreshold,handleDomNode:C.currentTarget})},E=C=>T(C,{nodeId:l.target,id:l.targetHandle??null,type:"target"}),z=C=>T(C,{nodeId:l.source,id:l.sourceHandle??null,type:"source"}),w=()=>N(!0),_=()=>N(!1);return i.jsxs(i.Fragment,{children:[(n===!0||n==="source")&&i.jsx(jp,{position:h,centerX:o,centerY:c,radius:s,onMouseDown:E,onMouseEnter:w,onMouseOut:_,type:"source"}),(n===!0||n==="target")&&i.jsx(jp,{position:p,centerX:d,centerY:f,radius:s,onMouseDown:z,onMouseEnter:w,onMouseOut:_,type:"target"})]})}function XD({id:n,edgesFocusable:s,edgesReconnectable:l,elementsSelectable:o,onClick:c,onDoubleClick:d,onContextMenu:f,onMouseEnter:h,onMouseMove:p,onMouseLeave:m,reconnectRadius:y,onReconnect:x,onReconnectStart:v,onReconnectEnd:N,rfId:S,edgeTypes:T,noPanClassName:E,onError:z,disableKeyboardA11y:w}){let _=De(ye=>ye.edgeLookup.get(n));const C=De(ye=>ye.defaultEdgeOptions);_=C?{...C,..._}:_;let $=_.type||"default",O=T?.[$]||_p[$];O===void 0&&(z?.("011",xn.error011($)),$="default",O=T?.default||_p.default);const V=!!(_.focusable||s&&typeof _.focusable>"u"),G=typeof x<"u"&&(_.reconnectable||l&&typeof _.reconnectable>"u"),L=!!(_.selectable||o&&typeof _.selectable>"u"),F=A.useRef(null),[q,Z]=A.useState(!1),[te,M]=A.useState(!1),U=Fe(),{zIndex:j,sourceX:D,sourceY:H,targetX:Y,targetY:ee,sourcePosition:Q,targetPosition:W}=De(A.useCallback(ye=>{const _e=ye.nodeLookup.get(_.source),Ce=ye.nodeLookup.get(_.target);if(!_e||!Ce)return{zIndex:_.zIndex,...Np};const re=q8({id:n,sourceNode:_e,targetNode:Ce,sourceHandle:_.sourceHandle||null,targetHandle:_.targetHandle||null,connectionMode:ye.connectionMode,onError:z});return{zIndex:L8({selected:_.selected,zIndex:_.zIndex,sourceNode:_e,targetNode:Ce,elevateOnSelect:ye.elevateEdgesOnSelect,zIndexMode:ye.zIndexMode}),...re||Np}},[_.source,_.target,_.sourceHandle,_.targetHandle,_.selected,_.zIndex]),Qe),se=A.useMemo(()=>_.markerStart?`url('#${Gd(_.markerStart,S)}')`:void 0,[_.markerStart,S]),le=A.useMemo(()=>_.markerEnd?`url('#${Gd(_.markerEnd,S)}')`:void 0,[_.markerEnd,S]);if(_.hidden||D===null||H===null||Y===null||ee===null)return null;const de=ye=>{const{addSelectedEdges:_e,unselectNodesAndEdges:Ce,multiSelectionActive:re}=U.getState();L&&(U.setState({nodesSelectionActive:!1}),_.selected&&re?(Ce({nodes:[],edges:[_]}),F.current?.blur()):_e([n])),c&&c(ye,_)},be=d?ye=>{d(ye,{..._})}:void 0,me=f?ye=>{f(ye,{..._})}:void 0,oe=h?ye=>{h(ye,{..._})}:void 0,fe=p?ye=>{p(ye,{..._})}:void 0,je=m?ye=>{m(ye,{..._})}:void 0,Ne=ye=>{if(!w&&Cx.includes(ye.key)&&L){const{unselectNodesAndEdges:_e,addSelectedEdges:Ce}=U.getState();ye.key==="Escape"?(F.current?.blur(),_e({edges:[_]})):Ce([n])}};return i.jsx("svg",{style:{zIndex:j},children:i.jsxs("g",{className:st(["react-flow__edge",`react-flow__edge-${$}`,_.className,E,{selected:_.selected,animated:_.animated,inactive:!L&&!c,updating:q,selectable:L}]),onClick:de,onDoubleClick:be,onContextMenu:me,onMouseEnter:oe,onMouseMove:fe,onMouseLeave:je,onKeyDown:V?Ne:void 0,tabIndex:V?0:void 0,role:_.ariaRole??(V?"group":"img"),"aria-roledescription":"edge","data-id":n,"data-testid":`rf__edge-${n}`,"aria-label":_.ariaLabel===null?void 0:_.ariaLabel||`Edge from ${_.source} to ${_.target}`,"aria-describedby":V?`${ry}-${S}`:void 0,ref:F,..._.domAttributes,children:[!te&&i.jsx(O,{id:n,source:_.source,target:_.target,type:_.type,selected:_.selected,animated:_.animated,selectable:L,deletable:_.deletable??!0,label:_.label,labelStyle:_.labelStyle,labelShowBg:_.labelShowBg,labelBgStyle:_.labelBgStyle,labelBgPadding:_.labelBgPadding,labelBgBorderRadius:_.labelBgBorderRadius,sourceX:D,sourceY:H,targetX:Y,targetY:ee,sourcePosition:Q,targetPosition:W,data:_.data,style:_.style,sourceHandleId:_.sourceHandle,targetHandleId:_.targetHandle,markerStart:se,markerEnd:le,pathOptions:"pathOptions"in _?_.pathOptions:void 0,interactionWidth:_.interactionWidth}),G&&i.jsx(GD,{edge:_,isReconnectable:G,reconnectRadius:y,onReconnect:x,onReconnectStart:v,onReconnectEnd:N,sourceX:D,sourceY:H,targetX:Y,targetY:ee,sourcePosition:Q,targetPosition:W,setUpdateHover:Z,setReconnecting:M})]})})}var ZD=A.memo(XD);const QD=n=>({edgesFocusable:n.edgesFocusable,edgesReconnectable:n.edgesReconnectable,elementsSelectable:n.elementsSelectable,connectionMode:n.connectionMode,onError:n.onError});function My({defaultMarkerColor:n,onlyRenderVisibleElements:s,rfId:l,edgeTypes:o,noPanClassName:c,onReconnect:d,onEdgeContextMenu:f,onEdgeMouseEnter:h,onEdgeMouseMove:p,onEdgeMouseLeave:m,onEdgeClick:y,reconnectRadius:x,onEdgeDoubleClick:v,onReconnectStart:N,onReconnectEnd:S,disableKeyboardA11y:T}){const{edgesFocusable:E,edgesReconnectable:z,elementsSelectable:w,onError:_}=De(QD,Qe),C=TD(s);return i.jsxs("div",{className:"react-flow__edges",children:[i.jsx(RD,{defaultColor:n,rfId:l}),C.map($=>i.jsx(ZD,{id:$,edgesFocusable:E,edgesReconnectable:z,elementsSelectable:w,noPanClassName:c,onReconnect:d,onContextMenu:f,onMouseEnter:h,onMouseMove:p,onMouseLeave:m,onClick:y,reconnectRadius:x,onDoubleClick:v,onReconnectStart:N,onReconnectEnd:S,rfId:l,onError:_,edgeTypes:o,disableKeyboardA11y:T},$))]})}My.displayName="EdgeRenderer";const FD=A.memo(My),KD=n=>`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function ID({children:n}){const s=De(KD);return i.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:s},children:n})}function JD(n){const s=Xo(),l=A.useRef(!1);A.useEffect(()=>{!l.current&&s.viewportInitialized&&n&&(setTimeout(()=>n(s),1),l.current=!0)},[n,s.viewportInitialized])}const WD=n=>n.panZoom?.syncViewport;function PD(n){const s=De(WD),l=Fe();return A.useEffect(()=>{n&&(s?.(n),l.setState({transform:[n.x,n.y,n.zoom]}))},[n,s]),null}function eO(n){return n.connection.inProgress?{...n.connection,to:Dr(n.connection.to,n.transform)}:{...n.connection}}function tO(n){return eO}function nO(n){const s=tO();return De(s,Qe)}const aO=n=>({nodesConnectable:n.nodesConnectable,isValid:n.connection.isValid,inProgress:n.connection.inProgress,width:n.width,height:n.height});function sO({containerStyle:n,style:s,type:l,component:o}){const{nodesConnectable:c,width:d,height:f,isValid:h,inProgress:p}=De(aO,Qe);return!(d&&c&&p)?null:i.jsx("svg",{style:n,width:d,height:f,className:"react-flow__connectionline react-flow__container",children:i.jsx("g",{className:st(["react-flow__connection",Ax(h)]),children:i.jsx(Dy,{style:s,type:l,CustomComponent:o,isValid:h})})})}const Dy=({style:n,type:s=ja.Bezier,CustomComponent:l,isValid:o})=>{const{inProgress:c,from:d,fromNode:f,fromHandle:h,fromPosition:p,to:m,toNode:y,toHandle:x,toPosition:v,pointer:N}=nO();if(!c)return;if(l)return i.jsx(l,{connectionLineType:s,connectionLineStyle:n,fromNode:f,fromHandle:h,fromX:d.x,fromY:d.y,toX:m.x,toY:m.y,fromPosition:p,toPosition:v,connectionStatus:Ax(o),toNode:y,toHandle:x,pointer:N});let S="";const T={sourceX:d.x,sourceY:d.y,sourcePosition:p,targetX:m.x,targetY:m.y,targetPosition:v};switch(s){case ja.Bezier:[S]=qx(T);break;case ja.SimpleBezier:[S]=vy(T);break;case ja.Step:[S]=Yd({...T,borderRadius:0});break;case ja.SmoothStep:[S]=Yd(T);break;default:[S]=Xx(T)}return i.jsx("path",{d:S,fill:"none",className:"react-flow__connection-path",style:n})};Dy.displayName="ConnectionLine";const iO={};function Sp(n=iO){A.useRef(n),Fe(),A.useEffect(()=>{},[n])}function rO(){Fe(),A.useRef(!1),A.useEffect(()=>{},[])}function Oy({nodeTypes:n,edgeTypes:s,onInit:l,onNodeClick:o,onEdgeClick:c,onNodeDoubleClick:d,onEdgeDoubleClick:f,onNodeMouseEnter:h,onNodeMouseMove:p,onNodeMouseLeave:m,onNodeContextMenu:y,onSelectionContextMenu:x,onSelectionStart:v,onSelectionEnd:N,connectionLineType:S,connectionLineStyle:T,connectionLineComponent:E,connectionLineContainerStyle:z,selectionKeyCode:w,selectionOnDrag:_,selectionMode:C,multiSelectionKeyCode:$,panActivationKeyCode:O,zoomActivationKeyCode:V,deleteKeyCode:G,onlyRenderVisibleElements:L,elementsSelectable:F,defaultViewport:q,translateExtent:Z,minZoom:te,maxZoom:M,preventScrolling:U,defaultMarkerColor:j,zoomOnScroll:D,zoomOnPinch:H,panOnScroll:Y,panOnScrollSpeed:ee,panOnScrollMode:Q,zoomOnDoubleClick:W,panOnDrag:se,onPaneClick:le,onPaneMouseEnter:de,onPaneMouseMove:be,onPaneMouseLeave:me,onPaneScroll:oe,onPaneContextMenu:fe,paneClickDistance:je,nodeClickDistance:Ne,onEdgeContextMenu:ye,onEdgeMouseEnter:_e,onEdgeMouseMove:Ce,onEdgeMouseLeave:re,reconnectRadius:ge,onReconnect:Oe,onReconnectStart:it,onReconnectEnd:Tt,noDragClassName:It,noWheelClassName:bn,noPanClassName:Ea,disableKeyboardA11y:za,nodeExtent:dt,rfId:rs,viewport:vn,onViewportChange:Qn}){return Sp(n),Sp(s),rO(),JD(l),PD(vn),i.jsx(_D,{onPaneClick:le,onPaneMouseEnter:de,onPaneMouseMove:be,onPaneMouseLeave:me,onPaneContextMenu:fe,onPaneScroll:oe,paneClickDistance:je,deleteKeyCode:G,selectionKeyCode:w,selectionOnDrag:_,selectionMode:C,onSelectionStart:v,onSelectionEnd:N,multiSelectionKeyCode:$,panActivationKeyCode:O,zoomActivationKeyCode:V,elementsSelectable:F,zoomOnScroll:D,zoomOnPinch:H,zoomOnDoubleClick:W,panOnScroll:Y,panOnScrollSpeed:ee,panOnScrollMode:Q,panOnDrag:se,defaultViewport:q,translateExtent:Z,minZoom:te,maxZoom:M,onSelectionContextMenu:x,preventScrolling:U,noDragClassName:It,noWheelClassName:bn,noPanClassName:Ea,disableKeyboardA11y:za,onViewportChange:Qn,isControlledViewport:!!vn,children:i.jsxs(ID,{children:[i.jsx(FD,{edgeTypes:s,onEdgeClick:c,onEdgeDoubleClick:f,onReconnect:Oe,onReconnectStart:it,onReconnectEnd:Tt,onlyRenderVisibleElements:L,onEdgeContextMenu:ye,onEdgeMouseEnter:_e,onEdgeMouseMove:Ce,onEdgeMouseLeave:re,reconnectRadius:ge,defaultMarkerColor:j,noPanClassName:Ea,disableKeyboardA11y:za,rfId:rs}),i.jsx(sO,{style:T,type:S,component:E,containerStyle:z}),i.jsx("div",{className:"react-flow__edgelabel-renderer"}),i.jsx(AD,{nodeTypes:n,onNodeClick:o,onNodeDoubleClick:d,onNodeMouseEnter:h,onNodeMouseMove:p,onNodeMouseLeave:m,onNodeContextMenu:y,nodeClickDistance:Ne,onlyRenderVisibleElements:L,noPanClassName:Ea,noDragClassName:It,disableKeyboardA11y:za,nodeExtent:dt,rfId:rs}),i.jsx("div",{className:"react-flow__viewport-portal"})]})})}Oy.displayName="GraphView";const lO=A.memo(Oy),kp=({nodes:n,edges:s,defaultNodes:l,defaultEdges:o,width:c,height:d,fitView:f,fitViewOptions:h,minZoom:p=.5,maxZoom:m=2,nodeOrigin:y,nodeExtent:x,zIndexMode:v="basic"}={})=>{const N=new Map,S=new Map,T=new Map,E=new Map,z=o??s??[],w=l??n??[],_=y??[0,0],C=x??_r;Fx(T,E,z);const $=Xd(w,N,S,{nodeOrigin:_,nodeExtent:C,zIndexMode:v});let O=[0,0,1];if(f&&c&&d){const V=Tr(N,{filter:q=>!!((q.width||q.initialWidth)&&(q.height||q.initialHeight))}),{x:G,y:L,zoom:F}=lf(V,c,d,p,m,h?.padding??.1);O=[G,L,F]}return{rfId:"1",width:c??0,height:d??0,transform:O,nodes:w,nodesInitialized:$,nodeLookup:N,parentLookup:S,edges:z,edgeLookup:E,connectionLookup:T,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:l!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:p,maxZoom:m,translateExtent:_r,nodeExtent:C,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:ri.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:_,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:f??!1,fitViewOptions:h,fitViewResolver:null,connection:{...zx},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:z8,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Ex,zIndexMode:v,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},oO=({nodes:n,edges:s,defaultNodes:l,defaultEdges:o,width:c,height:d,fitView:f,fitViewOptions:h,minZoom:p,maxZoom:m,nodeOrigin:y,nodeExtent:x,zIndexMode:v})=>kM((N,S)=>{async function T(){const{nodeLookup:E,panZoom:z,fitViewOptions:w,fitViewResolver:_,width:C,height:$,minZoom:O,maxZoom:V}=S();z&&(await C8({nodes:E,width:C,height:$,panZoom:z,minZoom:O,maxZoom:V},w),_?.resolve(!0),N({fitViewResolver:null}))}return{...kp({nodes:n,edges:s,width:c,height:d,fitView:f,fitViewOptions:h,minZoom:p,maxZoom:m,nodeOrigin:y,nodeExtent:x,defaultNodes:l,defaultEdges:o,zIndexMode:v}),setNodes:E=>{const{nodeLookup:z,parentLookup:w,nodeOrigin:_,elevateNodesOnSelect:C,fitViewQueued:$,zIndexMode:O}=S(),V=Xd(E,z,w,{nodeOrigin:_,nodeExtent:x,elevateNodesOnSelect:C,checkEquality:!0,zIndexMode:O});$&&V?(T(),N({nodes:E,nodesInitialized:V,fitViewQueued:!1,fitViewOptions:void 0})):N({nodes:E,nodesInitialized:V})},setEdges:E=>{const{connectionLookup:z,edgeLookup:w}=S();Fx(z,w,E),N({edges:E})},setDefaultNodesAndEdges:(E,z)=>{if(E){const{setNodes:w}=S();w(E),N({hasDefaultNodes:!0})}if(z){const{setEdges:w}=S();w(z),N({hasDefaultEdges:!0})}},updateNodeInternals:E=>{const{triggerNodeChanges:z,nodeLookup:w,parentLookup:_,domNode:C,nodeOrigin:$,nodeExtent:O,debug:V,fitViewQueued:G,zIndexMode:L}=S(),{changes:F,updatedInternals:q}=I8(E,w,_,C,$,O,L);q&&(Z8(w,_,{nodeOrigin:$,nodeExtent:O,zIndexMode:L}),G?(T(),N({fitViewQueued:!1,fitViewOptions:void 0})):N({}),F?.length>0&&(V&&console.log("React Flow: trigger node changes",F),z?.(F)))},updateNodePositions:(E,z=!1)=>{const w=[];let _=[];const{nodeLookup:C,triggerNodeChanges:$,connection:O,updateConnection:V,onNodesChangeMiddlewareMap:G}=S();for(const[L,F]of E){const q=C.get(L),Z=!!(q?.expandParent&&q?.parentId&&F?.position),te={id:L,type:"position",position:Z?{x:Math.max(0,F.position.x),y:Math.max(0,F.position.y)}:F.position,dragging:z};if(q&&O.inProgress&&O.fromNode.id===q.id){const M=ss(q,O.fromHandle,pe.Left,!0);V({...O,from:M})}Z&&q.parentId&&w.push({id:L,parentId:q.parentId,rect:{...F.internals.positionAbsolute,width:F.measured.width??0,height:F.measured.height??0}}),_.push(te)}if(w.length>0){const{parentLookup:L,nodeOrigin:F}=S(),q=gf(w,C,L,F);_.push(...q)}for(const L of G.values())_=L(_);$(_)},triggerNodeChanges:E=>{const{onNodesChange:z,setNodes:w,nodes:_,hasDefaultNodes:C,debug:$}=S();if(E?.length){if(C){const O=cy(E,_);w(O)}$&&console.log("React Flow: trigger node changes",E),z?.(E)}},triggerEdgeChanges:E=>{const{onEdgesChange:z,setEdges:w,edges:_,hasDefaultEdges:C,debug:$}=S();if(E?.length){if(C){const O=uy(E,_);w(O)}$&&console.log("React Flow: trigger edge changes",E),z?.(E)}},addSelectedNodes:E=>{const{multiSelectionActive:z,edgeLookup:w,nodeLookup:_,triggerNodeChanges:C,triggerEdgeChanges:$}=S();if(z){const O=E.map(V=>Pa(V,!0));C(O);return}C(Ps(_,new Set([...E]),!0)),$(Ps(w))},addSelectedEdges:E=>{const{multiSelectionActive:z,edgeLookup:w,nodeLookup:_,triggerNodeChanges:C,triggerEdgeChanges:$}=S();if(z){const O=E.map(V=>Pa(V,!0));$(O);return}$(Ps(w,new Set([...E]))),C(Ps(_,new Set,!0))},unselectNodesAndEdges:({nodes:E,edges:z}={})=>{const{edges:w,nodes:_,nodeLookup:C,triggerNodeChanges:$,triggerEdgeChanges:O}=S(),V=E||_,G=z||w,L=V.map(q=>{const Z=C.get(q.id);return Z&&(Z.selected=!1),Pa(q.id,!1)}),F=G.map(q=>Pa(q.id,!1));$(L),O(F)},setMinZoom:E=>{const{panZoom:z,maxZoom:w}=S();z?.setScaleExtent([E,w]),N({minZoom:E})},setMaxZoom:E=>{const{panZoom:z,minZoom:w}=S();z?.setScaleExtent([w,E]),N({maxZoom:E})},setTranslateExtent:E=>{S().panZoom?.setTranslateExtent(E),N({translateExtent:E})},resetSelectedElements:()=>{const{edges:E,nodes:z,triggerNodeChanges:w,triggerEdgeChanges:_,elementsSelectable:C}=S();if(!C)return;const $=z.reduce((V,G)=>G.selected?[...V,Pa(G.id,!1)]:V,[]),O=E.reduce((V,G)=>G.selected?[...V,Pa(G.id,!1)]:V,[]);w($),_(O)},setNodeExtent:E=>{const{nodes:z,nodeLookup:w,parentLookup:_,nodeOrigin:C,elevateNodesOnSelect:$,nodeExtent:O,zIndexMode:V}=S();E[0][0]===O[0][0]&&E[0][1]===O[0][1]&&E[1][0]===O[1][0]&&E[1][1]===O[1][1]||(Xd(z,w,_,{nodeOrigin:C,nodeExtent:E,elevateNodesOnSelect:$,checkEquality:!1,zIndexMode:V}),N({nodeExtent:E}))},panBy:E=>{const{transform:z,width:w,height:_,panZoom:C,translateExtent:$}=S();return J8({delta:E,panZoom:C,transform:z,translateExtent:$,width:w,height:_})},setCenter:async(E,z,w)=>{const{width:_,height:C,maxZoom:$,panZoom:O}=S();if(!O)return Promise.resolve(!1);const V=typeof w?.zoom<"u"?w.zoom:$;return await O.setViewport({x:_/2-E*V,y:C/2-z*V,zoom:V},{duration:w?.duration,ease:w?.ease,interpolate:w?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{N({connection:{...zx}})},updateConnection:E=>{N({connection:E})},reset:()=>N({...kp()})}},Object.is);function cO({initialNodes:n,initialEdges:s,defaultNodes:l,defaultEdges:o,initialWidth:c,initialHeight:d,initialMinZoom:f,initialMaxZoom:h,initialFitViewOptions:p,fitView:m,nodeOrigin:y,nodeExtent:x,zIndexMode:v,children:N}){const[S]=A.useState(()=>oO({nodes:n,edges:s,defaultNodes:l,defaultEdges:o,width:c,height:d,fitView:m,minZoom:f,maxZoom:h,fitViewOptions:p,nodeOrigin:y,nodeExtent:x,zIndexMode:v}));return i.jsx(CM,{value:S,children:i.jsx(IM,{children:N})})}function uO({children:n,nodes:s,edges:l,defaultNodes:o,defaultEdges:c,width:d,height:f,fitView:h,fitViewOptions:p,minZoom:m,maxZoom:y,nodeOrigin:x,nodeExtent:v,zIndexMode:N}){return A.useContext(Yo)?i.jsx(i.Fragment,{children:n}):i.jsx(cO,{initialNodes:s,initialEdges:l,defaultNodes:o,defaultEdges:c,initialWidth:d,initialHeight:f,fitView:h,initialFitViewOptions:p,initialMinZoom:m,initialMaxZoom:y,nodeOrigin:x,nodeExtent:v,zIndexMode:N,children:n})}const dO={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function fO({nodes:n,edges:s,defaultNodes:l,defaultEdges:o,className:c,nodeTypes:d,edgeTypes:f,onNodeClick:h,onEdgeClick:p,onInit:m,onMove:y,onMoveStart:x,onMoveEnd:v,onConnect:N,onConnectStart:S,onConnectEnd:T,onClickConnectStart:E,onClickConnectEnd:z,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:C,onNodeContextMenu:$,onNodeDoubleClick:O,onNodeDragStart:V,onNodeDrag:G,onNodeDragStop:L,onNodesDelete:F,onEdgesDelete:q,onDelete:Z,onSelectionChange:te,onSelectionDragStart:M,onSelectionDrag:U,onSelectionDragStop:j,onSelectionContextMenu:D,onSelectionStart:H,onSelectionEnd:Y,onBeforeDelete:ee,connectionMode:Q,connectionLineType:W=ja.Bezier,connectionLineStyle:se,connectionLineComponent:le,connectionLineContainerStyle:de,deleteKeyCode:be="Backspace",selectionKeyCode:me="Shift",selectionOnDrag:oe=!1,selectionMode:fe=Nr.Full,panActivationKeyCode:je="Space",multiSelectionKeyCode:Ne=jr()?"Meta":"Control",zoomActivationKeyCode:ye=jr()?"Meta":"Control",snapToGrid:_e,snapGrid:Ce,onlyRenderVisibleElements:re=!1,selectNodesOnDrag:ge,nodesDraggable:Oe,autoPanOnNodeFocus:it,nodesConnectable:Tt,nodesFocusable:It,nodeOrigin:bn=ly,edgesFocusable:Ea,edgesReconnectable:za,elementsSelectable:dt=!0,defaultViewport:rs=BM,minZoom:vn=.5,maxZoom:Qn=2,translateExtent:Aa=_r,preventScrolling:Ko=!0,nodeExtent:ls,defaultMarkerColor:Io="#b1b1b7",zoomOnScroll:Jo=!0,zoomOnPinch:Ta=!0,panOnScroll:xt=!1,panOnScrollSpeed:ln=.5,panOnScrollMode:yt=es.Free,zoomOnDoubleClick:Wo=!0,panOnDrag:Po=!0,onPaneClick:ec,onPaneMouseEnter:os,onPaneMouseMove:cs,onPaneMouseLeave:us,onPaneScroll:_n,onPaneContextMenu:ds,paneClickDistance:Ma=1,nodeClickDistance:tc=0,children:Or,onReconnect:fi,onReconnectStart:Da,onReconnectEnd:nc,onEdgeContextMenu:Lr,onEdgeDoubleClick:Rr,onEdgeMouseEnter:$r,onEdgeMouseMove:gi,onEdgeMouseLeave:hi,reconnectRadius:Hr=10,onNodesChange:Ur,onEdgesChange:on,noDragClassName:rt="nodrag",noWheelClassName:pt="nowheel",noPanClassName:Nn="nopan",fitView:fs,fitViewOptions:Br,connectOnClick:ac,attributionPosition:Vr,proOptions:Oa,defaultEdgeOptions:mi,elevateNodesOnSelect:Fn=!0,elevateEdgesOnSelect:Kn=!1,disableKeyboardA11y:In=!1,autoPanOnConnect:Jn,autoPanOnNodeDrag:Pe,autoPanSpeed:qr,connectionRadius:Yr,isValidConnection:wn,onError:Wn,style:sc,id:pi,nodeDragThreshold:Gr,connectionDragThreshold:ic,viewport:gs,onViewportChange:hs,width:Jt,height:Nt,colorMode:Xr="light",debug:rc,onScroll:ms,ariaLabelConfig:Zr,zIndexMode:La="basic",...lc},wt){const Ra=pi||"1",Qr=GM(Xr),xi=A.useCallback(jn=>{jn.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),ms?.(jn)},[ms]);return i.jsx("div",{"data-testid":"rf__wrapper",...lc,onScroll:xi,style:{...sc,...dO},ref:wt,className:st(["react-flow",c,Qr]),id:pi,role:"application",children:i.jsxs(uO,{nodes:n,edges:s,width:Jt,height:Nt,fitView:fs,fitViewOptions:Br,minZoom:vn,maxZoom:Qn,nodeOrigin:bn,nodeExtent:ls,zIndexMode:La,children:[i.jsx(lO,{onInit:m,onNodeClick:h,onEdgeClick:p,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:C,onNodeContextMenu:$,onNodeDoubleClick:O,nodeTypes:d,edgeTypes:f,connectionLineType:W,connectionLineStyle:se,connectionLineComponent:le,connectionLineContainerStyle:de,selectionKeyCode:me,selectionOnDrag:oe,selectionMode:fe,deleteKeyCode:be,multiSelectionKeyCode:Ne,panActivationKeyCode:je,zoomActivationKeyCode:ye,onlyRenderVisibleElements:re,defaultViewport:rs,translateExtent:Aa,minZoom:vn,maxZoom:Qn,preventScrolling:Ko,zoomOnScroll:Jo,zoomOnPinch:Ta,zoomOnDoubleClick:Wo,panOnScroll:xt,panOnScrollSpeed:ln,panOnScrollMode:yt,panOnDrag:Po,onPaneClick:ec,onPaneMouseEnter:os,onPaneMouseMove:cs,onPaneMouseLeave:us,onPaneScroll:_n,onPaneContextMenu:ds,paneClickDistance:Ma,nodeClickDistance:tc,onSelectionContextMenu:D,onSelectionStart:H,onSelectionEnd:Y,onReconnect:fi,onReconnectStart:Da,onReconnectEnd:nc,onEdgeContextMenu:Lr,onEdgeDoubleClick:Rr,onEdgeMouseEnter:$r,onEdgeMouseMove:gi,onEdgeMouseLeave:hi,reconnectRadius:Hr,defaultMarkerColor:Io,noDragClassName:rt,noWheelClassName:pt,noPanClassName:Nn,rfId:Ra,disableKeyboardA11y:In,nodeExtent:ls,viewport:gs,onViewportChange:hs}),i.jsx(YM,{nodes:n,edges:s,defaultNodes:l,defaultEdges:o,onConnect:N,onConnectStart:S,onConnectEnd:T,onClickConnectStart:E,onClickConnectEnd:z,nodesDraggable:Oe,autoPanOnNodeFocus:it,nodesConnectable:Tt,nodesFocusable:It,edgesFocusable:Ea,edgesReconnectable:za,elementsSelectable:dt,elevateNodesOnSelect:Fn,elevateEdgesOnSelect:Kn,minZoom:vn,maxZoom:Qn,nodeExtent:ls,onNodesChange:Ur,onEdgesChange:on,snapToGrid:_e,snapGrid:Ce,connectionMode:Q,translateExtent:Aa,connectOnClick:ac,defaultEdgeOptions:mi,fitView:fs,fitViewOptions:Br,onNodesDelete:F,onEdgesDelete:q,onDelete:Z,onNodeDragStart:V,onNodeDrag:G,onNodeDragStop:L,onSelectionDrag:U,onSelectionDragStart:M,onSelectionDragStop:j,onMove:y,onMoveStart:x,onMoveEnd:v,noPanClassName:Nn,nodeOrigin:bn,rfId:Ra,autoPanOnConnect:Jn,autoPanOnNodeDrag:Pe,autoPanSpeed:qr,onError:Wn,connectionRadius:Yr,isValidConnection:wn,selectNodesOnDrag:ge,nodeDragThreshold:Gr,connectionDragThreshold:ic,onBeforeDelete:ee,debug:rc,ariaLabelConfig:Zr,zIndexMode:La}),i.jsx(UM,{onSelectionChange:te}),Or,i.jsx(OM,{proOptions:Oa,position:Vr}),i.jsx(DM,{rfId:Ra,disableKeyboardA11y:In})]})})}var gO=dy(fO);function hO(n){const[s,l]=A.useState(n),o=A.useCallback(c=>l(d=>cy(c,d)),[]);return[s,l,o]}function mO(n){const[s,l]=A.useState(n),o=A.useCallback(c=>l(d=>uy(c,d)),[]);return[s,l,o]}function pO({dimensions:n,lineWidth:s,variant:l,className:o}){return i.jsx("path",{strokeWidth:s,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`,className:st(["react-flow__background-pattern",l,o])})}function xO({radius:n,className:s}){return i.jsx("circle",{cx:n,cy:n,r:n,className:st(["react-flow__background-pattern","dots",s])})}var Sa;(function(n){n.Lines="lines",n.Dots="dots",n.Cross="cross"})(Sa||(Sa={}));const yO={[Sa.Dots]:1,[Sa.Lines]:1,[Sa.Cross]:6},bO=n=>({transform:n.transform,patternId:`pattern-${n.rfId}`});function Ly({id:n,variant:s=Sa.Dots,gap:l=20,size:o,lineWidth:c=1,offset:d=0,color:f,bgColor:h,style:p,className:m,patternClassName:y}){const x=A.useRef(null),{transform:v,patternId:N}=De(bO,Qe),S=o||yO[s],T=s===Sa.Dots,E=s===Sa.Cross,z=Array.isArray(l)?l:[l,l],w=[z[0]*v[2]||1,z[1]*v[2]||1],_=S*v[2],C=Array.isArray(d)?d:[d,d],$=E?[_,_]:w,O=[C[0]*v[2]||1+$[0]/2,C[1]*v[2]||1+$[1]/2],V=`${N}${n||""}`;return i.jsxs("svg",{className:st(["react-flow__background",m]),style:{...p,...Zo,"--xy-background-color-props":h,"--xy-background-pattern-color-props":f},ref:x,"data-testid":"rf__background",children:[i.jsx("pattern",{id:V,x:v[0]%w[0],y:v[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${O[0]},-${O[1]})`,children:T?i.jsx(xO,{radius:_/2,className:y}):i.jsx(pO,{dimensions:$,lineWidth:c,variant:s,className:y})}),i.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${V})`})]})}Ly.displayName="Background";const vO=A.memo(Ly);function _O(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:i.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function NO(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:i.jsx("path",{d:"M0 0h32v4.2H0z"})})}function wO(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:i.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function jO(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:i.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function SO(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:i.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function uo({children:n,className:s,...l}){return i.jsx("button",{type:"button",className:st(["react-flow__controls-button",s]),...l,children:n})}const kO=n=>({isInteractive:n.nodesDraggable||n.nodesConnectable||n.elementsSelectable,minZoomReached:n.transform[2]<=n.minZoom,maxZoomReached:n.transform[2]>=n.maxZoom,ariaLabelConfig:n.ariaLabelConfig});function Ry({style:n,showZoom:s=!0,showFitView:l=!0,showInteractive:o=!0,fitViewOptions:c,onZoomIn:d,onZoomOut:f,onFitView:h,onInteractiveChange:p,className:m,children:y,position:x="bottom-left",orientation:v="vertical","aria-label":N}){const S=Fe(),{isInteractive:T,minZoomReached:E,maxZoomReached:z,ariaLabelConfig:w}=De(kO,Qe),{zoomIn:_,zoomOut:C,fitView:$}=Xo(),O=()=>{_(),d?.()},V=()=>{C(),f?.()},G=()=>{$(c),h?.()},L=()=>{S.setState({nodesDraggable:!T,nodesConnectable:!T,elementsSelectable:!T}),p?.(!T)},F=v==="horizontal"?"horizontal":"vertical";return i.jsxs(Go,{className:st(["react-flow__controls",F,m]),position:x,style:n,"data-testid":"rf__controls","aria-label":N??w["controls.ariaLabel"],children:[s&&i.jsxs(i.Fragment,{children:[i.jsx(uo,{onClick:O,className:"react-flow__controls-zoomin",title:w["controls.zoomIn.ariaLabel"],"aria-label":w["controls.zoomIn.ariaLabel"],disabled:z,children:i.jsx(_O,{})}),i.jsx(uo,{onClick:V,className:"react-flow__controls-zoomout",title:w["controls.zoomOut.ariaLabel"],"aria-label":w["controls.zoomOut.ariaLabel"],disabled:E,children:i.jsx(NO,{})})]}),l&&i.jsx(uo,{className:"react-flow__controls-fitview",onClick:G,title:w["controls.fitView.ariaLabel"],"aria-label":w["controls.fitView.ariaLabel"],children:i.jsx(wO,{})}),o&&i.jsx(uo,{className:"react-flow__controls-interactive",onClick:L,title:w["controls.interactive.ariaLabel"],"aria-label":w["controls.interactive.ariaLabel"],children:T?i.jsx(SO,{}):i.jsx(jO,{})}),y]})}Ry.displayName="Controls";const CO=A.memo(Ry);function EO({id:n,x:s,y:l,width:o,height:c,style:d,color:f,strokeColor:h,strokeWidth:p,className:m,borderRadius:y,shapeRendering:x,selected:v,onClick:N}){const{background:S,backgroundColor:T}=d||{},E=f||S||T;return i.jsx("rect",{className:st(["react-flow__minimap-node",{selected:v},m]),x:s,y:l,rx:y,ry:y,width:o,height:c,style:{fill:E,stroke:h,strokeWidth:p},shapeRendering:x,onClick:N?z=>N(z,n):void 0})}const zO=A.memo(EO),AO=n=>n.nodes.map(s=>s.id),zd=n=>n instanceof Function?n:()=>n;function TO({nodeStrokeColor:n,nodeColor:s,nodeClassName:l="",nodeBorderRadius:o=5,nodeStrokeWidth:c,nodeComponent:d=zO,onClick:f}){const h=De(AO,Qe),p=zd(s),m=zd(n),y=zd(l),x=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return i.jsx(i.Fragment,{children:h.map(v=>i.jsx(DO,{id:v,nodeColorFunc:p,nodeStrokeColorFunc:m,nodeClassNameFunc:y,nodeBorderRadius:o,nodeStrokeWidth:c,NodeComponent:d,onClick:f,shapeRendering:x},v))})}function MO({id:n,nodeColorFunc:s,nodeStrokeColorFunc:l,nodeClassNameFunc:o,nodeBorderRadius:c,nodeStrokeWidth:d,shapeRendering:f,NodeComponent:h,onClick:p}){const{node:m,x:y,y:x,width:v,height:N}=De(S=>{const{internals:T}=S.nodeLookup.get(n),E=T.userNode,{x:z,y:w}=T.positionAbsolute,{width:_,height:C}=Zn(E);return{node:E,x:z,y:w,width:_,height:C}},Qe);return!m||m.hidden||!Rx(m)?null:i.jsx(h,{x:y,y:x,width:v,height:N,style:m.style,selected:!!m.selected,className:o(m),color:s(m),borderRadius:c,strokeColor:l(m),strokeWidth:d,shapeRendering:f,onClick:p,id:m.id})}const DO=A.memo(MO);var OO=A.memo(TO);const LO=200,RO=150,$O=n=>!n.hidden,HO=n=>{const s={x:-n.transform[0]/n.transform[2],y:-n.transform[1]/n.transform[2],width:n.width/n.transform[2],height:n.height/n.transform[2]};return{viewBB:s,boundingRect:n.nodeLookup.size>0?Lx(Tr(n.nodeLookup,{filter:$O}),s):s,rfId:n.rfId,panZoom:n.panZoom,translateExtent:n.translateExtent,flowWidth:n.width,flowHeight:n.height,ariaLabelConfig:n.ariaLabelConfig}},UO="react-flow__minimap-desc";function $y({style:n,className:s,nodeStrokeColor:l,nodeColor:o,nodeClassName:c="",nodeBorderRadius:d=5,nodeStrokeWidth:f,nodeComponent:h,bgColor:p,maskColor:m,maskStrokeColor:y,maskStrokeWidth:x,position:v="bottom-right",onClick:N,onNodeClick:S,pannable:T=!1,zoomable:E=!1,ariaLabel:z,inversePan:w,zoomStep:_=1,offsetScale:C=5}){const $=Fe(),O=A.useRef(null),{boundingRect:V,viewBB:G,rfId:L,panZoom:F,translateExtent:q,flowWidth:Z,flowHeight:te,ariaLabelConfig:M}=De(HO,Qe),U=n?.width??LO,j=n?.height??RO,D=V.width/U,H=V.height/j,Y=Math.max(D,H),ee=Y*U,Q=Y*j,W=C*Y,se=V.x-(ee-V.width)/2-W,le=V.y-(Q-V.height)/2-W,de=ee+W*2,be=Q+W*2,me=`${UO}-${L}`,oe=A.useRef(0),fe=A.useRef();oe.current=Y,A.useEffect(()=>{if(O.current&&F)return fe.current=rM({domNode:O.current,panZoom:F,getTransform:()=>$.getState().transform,getViewScale:()=>oe.current}),()=>{fe.current?.destroy()}},[F]),A.useEffect(()=>{fe.current?.update({translateExtent:q,width:Z,height:te,inversePan:w,pannable:T,zoomStep:_,zoomable:E})},[T,E,w,_,q,Z,te]);const je=N?_e=>{const[Ce,re]=fe.current?.pointer(_e)||[0,0];N(_e,{x:Ce,y:re})}:void 0,Ne=S?A.useCallback((_e,Ce)=>{const re=$.getState().nodeLookup.get(Ce).internals.userNode;S(_e,re)},[]):void 0,ye=z??M["minimap.ariaLabel"];return i.jsx(Go,{position:v,style:{...n,"--xy-minimap-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-background-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-stroke-color-props":typeof y=="string"?y:void 0,"--xy-minimap-mask-stroke-width-props":typeof x=="number"?x*Y:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof l=="string"?l:void 0,"--xy-minimap-node-stroke-width-props":typeof f=="number"?f:void 0},className:st(["react-flow__minimap",s]),"data-testid":"rf__minimap",children:i.jsxs("svg",{width:U,height:j,viewBox:`${se} ${le} ${de} ${be}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":me,ref:O,onClick:je,children:[ye&&i.jsx("title",{id:me,children:ye}),i.jsx(OO,{onClick:Ne,nodeColor:o,nodeStrokeColor:l,nodeBorderRadius:d,nodeClassName:c,nodeStrokeWidth:f,nodeComponent:h}),i.jsx("path",{className:"react-flow__minimap-mask",d:`M${se-W},${le-W}h${de+W*2}v${be+W*2}h${-de-W*2}z
        M${G.x},${G.y}h${G.width}v${G.height}h${-G.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}$y.displayName="MiniMap";const BO=A.memo($y),VO=n=>s=>n?`${Math.max(1/s.transform[2],1)}`:void 0,qO={[ui.Line]:"right",[ui.Handle]:"bottom-right"};function YO({nodeId:n,position:s,variant:l=ui.Handle,className:o,style:c=void 0,children:d,color:f,minWidth:h=10,minHeight:p=10,maxWidth:m=Number.MAX_VALUE,maxHeight:y=Number.MAX_VALUE,keepAspectRatio:x=!1,resizeDirection:v,autoScale:N=!0,shouldResize:S,onResizeStart:T,onResize:E,onResizeEnd:z}){const w=my(),_=typeof n=="string"?n:w,C=Fe(),$=A.useRef(null),O=l===ui.Handle,V=De(A.useCallback(VO(O&&N),[O,N]),Qe),G=A.useRef(null),L=s??qO[l];A.useEffect(()=>{if(!(!$.current||!_))return G.current||(G.current=vM({domNode:$.current,nodeId:_,getStoreItems:()=>{const{nodeLookup:q,transform:Z,snapGrid:te,snapToGrid:M,nodeOrigin:U,domNode:j}=C.getState();return{nodeLookup:q,transform:Z,snapGrid:te,snapToGrid:M,nodeOrigin:U,paneDomNode:j}},onChange:(q,Z)=>{const{triggerNodeChanges:te,nodeLookup:M,parentLookup:U,nodeOrigin:j}=C.getState(),D=[],H={x:q.x,y:q.y},Y=M.get(_);if(Y&&Y.expandParent&&Y.parentId){const ee=Y.origin??j,Q=q.width??Y.measured.width??0,W=q.height??Y.measured.height??0,se={id:Y.id,parentId:Y.parentId,rect:{width:Q,height:W,...$x({x:q.x??Y.position.x,y:q.y??Y.position.y},{width:Q,height:W},Y.parentId,M,ee)}},le=gf([se],M,U,j);D.push(...le),H.x=q.x?Math.max(ee[0]*Q,q.x):void 0,H.y=q.y?Math.max(ee[1]*W,q.y):void 0}if(H.x!==void 0&&H.y!==void 0){const ee={id:_,type:"position",position:{...H}};D.push(ee)}if(q.width!==void 0&&q.height!==void 0){const Q={id:_,type:"dimensions",resizing:!0,setAttributes:v?v==="horizontal"?"width":"height":!0,dimensions:{width:q.width,height:q.height}};D.push(Q)}for(const ee of Z){const Q={...ee,type:"position"};D.push(Q)}te(D)},onEnd:({width:q,height:Z})=>{const te={id:_,type:"dimensions",resizing:!1,dimensions:{width:q,height:Z}};C.getState().triggerNodeChanges([te])}})),G.current.update({controlPosition:L,boundaries:{minWidth:h,minHeight:p,maxWidth:m,maxHeight:y},keepAspectRatio:x,resizeDirection:v,onResizeStart:T,onResize:E,onResizeEnd:z,shouldResize:S}),()=>{G.current?.destroy()}},[L,h,p,m,y,x,T,E,z,S]);const F=L.split("-");return i.jsx("div",{className:st(["react-flow__resize-control","nodrag",...F,l,o]),ref:$,style:{...c,scale:V,...f&&{[O?"backgroundColor":"borderColor"]:f}},children:d})}A.memo(YO);function GO({data:n}){const l={NEW_CONVERSATION:"New conversation",KEYWORDS:"Text contains specific keywords",HAS_TAGS:"Contact has specific tags",PIPELINE_UPDATE:"Contact has been affected to a pipeline",SHORT_RESPONSE:"Advanced Short response"}[n.triggerType]||"Select option";return i.jsxs("div",{className:"min-w-[280px] bg-white dark:bg-[#0F0F0F] rounded-lg shadow-md border border-gray-200 dark:border-[#262626] font-sans transition-colors duration-200",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-[#262626]",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:"bg-indigo-600 rounded p-1",children:i.jsx(ti,{size:14,className:"text-white",fill:"white"})}),i.jsx("span",{className:"text-gray-700 dark:text-neutral-200 font-semibold text-sm",children:"Trigger"})]}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-neutral-400 leading-snug",children:"Define the input parameters to trigger the workflow, to ensure that accurate information is captured in the conversation flow."})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("div",{className:"text-xs font-semibold text-gray-700 dark:text-neutral-300 mb-2",children:"Starting Step"}),i.jsx("div",{className:"relative",children:i.jsxs("div",{className:"w-full bg-gray-50 dark:bg-[#1A1A1A] text-gray-700 dark:text-neutral-200 text-sm px-3 py-2.5 rounded border border-gray-200 dark:border-[#404040] flex items-center justify-between",children:[i.jsx("span",{className:"truncate",children:l}),i.jsx(Cr,{size:16,className:"text-gray-400"})]})}),n.triggerType==="KEYWORDS"&&n.keyword&&i.jsxs("div",{className:"mt-2 text-xs text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-1 rounded border border-indigo-100 dark:border-indigo-800",children:['Contains: "',n.keyword,'"']})]}),i.jsx(pn,{type:"source",position:pe.Right,className:"!bg-emerald-400 !w-4 !h-4 !border-4 !border-white dark:!border-[#0F0F0F] !-right-2"})]})}const XO={text:di,media:mr,buttons:Up,list:Fd,template:kr,addGroup:hn,removeGroup:Jd,addTag:Mo,removeTag:Hp,addPipeline:$p,removePipeline:sn,delay:pr},Cp=(n,s,l=!1)=>{const o=n.selectionStart,c=n.selectionEnd,d=n.value,f=d.substring(0,o),h=d.substring(c),p=d.substring(o,c);let m,y;l?(m=f+s+p+s+h,y=o+s.length+p.length+s.length):(m=f+s+h,y=o+s.length),Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value").set.call(n,m),n.dispatchEvent(new Event("input",{bubbles:!0})),n.focus(),n.setSelectionRange(y,y)},ZO=({label:n,icon:s,actions:l})=>{const[o,c]=A.useState(!1),[d,f]=A.useState(!1),[h,p]=A.useState(n),m=A.useRef(null),y=A.useRef(null);A.useEffect(()=>{const N=S=>{m.current&&!m.current.contains(S.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),A.useEffect(()=>{d&&y.current&&(y.current.focus(),y.current.select())},[d]);const x=()=>{h.trim()?l.onRename(h):p(n),f(!1)},v=N=>{N.key==="Enter"&&x(),N.key==="Escape"&&(p(n),f(!1))};return i.jsxs("div",{className:"flex items-center justify-between mb-3 h-8",children:[i.jsxs("div",{className:"flex items-center gap-2 font-semibold text-gray-800 dark:text-gray-100 flex-1 min-w-0",children:[s&&i.jsx(s,{size:18,className:"text-gray-500 dark:text-gray-400 flex-shrink-0"}),d?i.jsx("input",{ref:y,type:"text",className:"nodrag w-full bg-white dark:bg-[#1A1A1A] border border-indigo-500 rounded px-1 py-0.5 text-sm outline-none text-gray-800 dark:text-gray-100",value:h,onChange:N=>p(N.target.value),onBlur:x,onKeyDown:v,onClick:N=>N.stopPropagation()}):i.jsx("span",{className:"truncate cursor-text",onDoubleClick:()=>f(!0),title:"Double click to rename",children:n})]}),i.jsxs("div",{className:"relative flex-shrink-0 ml-2",ref:m,children:[i.jsx("button",{onClick:N=>{N.stopPropagation(),c(!o)},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:i.jsx(Lp,{size:16,className:"text-gray-400 dark:text-gray-500"})}),o&&i.jsxs("div",{className:"absolute right-0 top-full mt-1 w-40 bg-white dark:bg-[#1A1A1A] rounded-lg shadow-xl border border-gray-100 dark:border-[#333] z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-100",children:[i.jsxs("button",{onClick:N=>{N.stopPropagation(),p(n),f(!0),c(!1)},className:"w-full text-left px-3 py-2 text-xs text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#252525] flex items-center gap-2 transition-colors",children:[i.jsx(Er,{size:14})," Rename"]}),i.jsxs("button",{onClick:N=>{N.stopPropagation(),l.onDuplicate(),c(!1)},className:"w-full text-left px-3 py-2 text-xs text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#252525] flex items-center gap-2 transition-colors",children:[i.jsx(Id,{size:14})," Duplicate"]}),i.jsx("div",{className:"h-px bg-gray-100 dark:bg-[#333] my-1"}),i.jsxs("button",{onClick:N=>{N.stopPropagation(),l.onDelete(),c(!1)},className:"w-full text-left px-3 py-2 text-xs text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 flex items-center gap-2 transition-colors",children:[i.jsx(sn,{size:14})," Delete"]})]})]})]})},Fo=({message:n="Please fill all the required fields"})=>i.jsxs("div",{className:"bg-red-600 text-white px-3 py-2 rounded-lg flex items-center gap-2 text-xs font-medium mb-3 shadow-sm",children:[i.jsx(Ca,{size:14,className:"flex-shrink-0"}),i.jsx("span",{children:n})]}),Hy=({inputRef:n})=>{const s=(o,c=!0)=>n.current&&Cp(n.current,o,c),l=()=>n.current&&Cp(n.current,"{{variable}}",!1);return i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>s("*"),className:"p-1.5 text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 dark:text-indigo-400 rounded hover:bg-indigo-100 dark:hover:bg-indigo-900/40",children:i.jsx(j_,{size:14})}),i.jsx("button",{onClick:()=>s("_"),className:"p-1.5 text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 dark:text-indigo-400 rounded hover:bg-indigo-100 dark:hover:bg-indigo-900/40",children:i.jsx(S_,{size:14})}),i.jsx("button",{onClick:()=>s("~"),className:"p-1.5 text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 dark:text-indigo-400 rounded hover:bg-indigo-100 dark:hover:bg-indigo-900/40",children:i.jsx(k_,{size:14})})]}),i.jsx("div",{className:"flex-1"}),i.jsx("button",{onClick:l,className:"text-xs font-semibold text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/20 px-3 py-1.5 rounded-full hover:bg-indigo-100 dark:hover:bg-indigo-900/40",children:"Add Variable"})]})},ot=({children:n,required:s})=>i.jsxs("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1",children:[s&&i.jsx("span",{className:"text-red-500 mr-1",children:"*"}),n]}),Kt=n=>i.jsx("input",{...n,className:`nodrag w-full border border-gray-200 dark:border-[#333] bg-white dark:bg-[#0A0A0A] dark:text-gray-100 rounded-lg p-2.5 text-sm focus:ring-2 focus:ring-indigo-500 outline-none ${n.className}`}),mf=n=>i.jsx("textarea",{...n,className:`nodrag w-full border border-gray-200 dark:border-[#333] bg-white dark:bg-[#0A0A0A] dark:text-gray-100 rounded-lg p-3 text-sm focus:ring-2 focus:ring-indigo-500 resize-none ${n.className}`}),QO=({data:n,onChange:s})=>{const l=n.content?.length>0,o=A.useRef(null);return i.jsxs("div",{children:[!l&&i.jsx(Fo,{}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 font-medium",children:[i.jsx("span",{className:"text-red-500",children:"*"})," Respond with a simple text message."]}),i.jsx("div",{className:"relative",children:i.jsx(mf,{ref:o,placeholder:"Enter text",minRows:3,value:n.content||"",onChange:c=>s("content",c.target.value)})}),i.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 mb-3",children:["Characters: ",(n.content||"").length,"/1098"]}),i.jsx(Hy,{inputRef:o})]})},FO=({data:n,onChange:s})=>{const[l,o]=A.useState(n.buttonType||"reply"),c=n.body?.length>0&&(l==="reply"?n.buttons?.length>0:n.cta?.url),d=A.useRef(null);A.useEffect(()=>{n.buttons||s("buttons",[])},[]);const f=()=>{(n.buttons||[]).length<3&&s("buttons",[...n.buttons||[],{id:Date.now(),label:""}])},h=(m,y)=>{const x=[...n.buttons||[]];x[m].label=y,s("buttons",x)},p=m=>{const y=[...n.buttons||[]];y.splice(m,1),s("buttons",y)};return i.jsxs("div",{className:"space-y-4",children:[!c&&i.jsx(Fo,{}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Send interactive buttons or a call to action button."}),i.jsxs("div",{children:[i.jsx(ot,{children:"Header (Optional)"}),i.jsxs("select",{className:"nodrag w-full border border-gray-200 dark:border-[#333] bg-white dark:bg-[#0A0A0A] dark:text-gray-100 rounded-lg p-2 text-sm mb-2",value:n.headerType||"None",onChange:m=>s("headerType",m.target.value),children:[i.jsx("option",{value:"None",children:"None"}),i.jsx("option",{value:"Text",children:"Text"}),i.jsx("option",{value:"Image",children:"Image"})]}),n.headerType==="Text"&&i.jsx(Kt,{placeholder:"Enter header text",value:n.headerText||"",onChange:m=>s("headerText",m.target.value)})]}),i.jsxs("div",{children:[i.jsx(ot,{required:!0,children:"Body"}),i.jsx(mf,{ref:d,placeholder:"Enter the main message",value:n.body||"",onChange:m=>s("body",m.target.value)}),i.jsx(Hy,{inputRef:d})]}),i.jsxs("div",{children:[i.jsx(ot,{children:"Footer Text (Optional)"}),i.jsx(Kt,{placeholder:"Enter footer text",value:n.footer||"",onChange:m=>s("footer",m.target.value)})]}),i.jsxs("div",{children:[i.jsx(ot,{children:"Button type:"}),i.jsxs("div",{className:"flex gap-4 mt-2",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[i.jsx("input",{type:"radio",checked:l==="reply",onChange:()=>{o("reply"),s("buttonType","reply")},className:"text-indigo-600"}),"Reply Buttons"]}),i.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[i.jsx("input",{type:"radio",checked:l==="cta",onChange:()=>{o("cta"),s("buttonType","cta")},className:"text-indigo-600"}),"CTA URL Button"]})]})]}),l==="reply"?i.jsxs("div",{className:"bg-gray-50 dark:bg-[#151515] p-3 rounded-lg border border-gray-100 dark:border-[#333]",children:[i.jsx(ot,{required:!0,children:"Reply Buttons (at least 1)"}),(n.buttons||[]).map((m,y)=>i.jsxs("div",{className:"mb-3",children:[i.jsx(ot,{children:`Button ${y+1} Label`}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Kt,{value:m.label,onChange:x=>h(y,x.target.value),placeholder:"Label",maxLength:20}),i.jsx("button",{onClick:()=>p(y),className:"text-red-500 hover:bg-red-50 p-2 rounded",children:i.jsx(sn,{size:16})})]}),i.jsxs("div",{className:"text-xs text-gray-400 text-right",children:[m.label.length,"/20"]})]},y)),(n.buttons?.length||0)<3&&i.jsx("button",{onClick:f,className:"w-full py-2 border border-dashed border-gray-300 dark:border-[#444] rounded text-gray-500 text-sm hover:bg-gray-100 dark:hover:bg-[#222]",children:"+ Add Button"})]}):i.jsxs("div",{className:"bg-gray-50 dark:bg-[#151515] p-3 rounded-lg border border-gray-100 dark:border-[#333]",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx(ot,{required:!0,children:"Display Text"}),i.jsx(Kt,{value:n.cta?.displayText||"",onChange:m=>s("cta",{...n.cta,displayText:m.target.value})})]}),i.jsxs("div",{children:[i.jsx(ot,{required:!0,children:"URL"}),i.jsx(Kt,{value:n.cta?.url||"",onChange:m=>s("cta",{...n.cta,url:m.target.value}),placeholder:"https://"})]})]})]})},KO=({data:n,onChange:s})=>{const l=n.body?.length>0&&n.buttonLabel&&n.sections?.length>0,o=()=>{s("sections",[...n.sections||[],{id:Date.now(),title:"",rows:[{id:Date.now()+1,title:""}]}])},c=(h,p,m)=>{const y=[...n.sections||[]];y[h][p]=m,s("sections",y)},d=h=>{const p=[...n.sections||[]];p[h].rows.push({id:Date.now(),title:"",description:""}),s("sections",p)},f=(h,p,m,y)=>{const x=[...n.sections||[]];x[h].rows[p][m]=y,s("sections",x)};return i.jsxs("div",{className:"space-y-4",children:[!l&&i.jsx(Fo,{}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Send interactive list message."}),i.jsxs("div",{children:[i.jsx(ot,{children:"Header (Optional)"}),i.jsx(Kt,{value:n.headerText||"",onChange:h=>s("headerText",h.target.value)})]}),i.jsxs("div",{children:[i.jsx(ot,{required:!0,children:"Body"}),i.jsx(mf,{value:n.body||"",onChange:h=>s("body",h.target.value)})]}),i.jsxs("div",{children:[i.jsx(ot,{children:"Footer (Optional)"}),i.jsx(Kt,{value:n.footer||"",onChange:h=>s("footer",h.target.value)})]}),i.jsxs("div",{children:[i.jsx(ot,{required:!0,children:"Button Label"}),i.jsx(Kt,{value:n.buttonLabel||"",onChange:h=>s("buttonLabel",h.target.value),placeholder:"View List"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx(ot,{required:!0,children:"Sections"}),i.jsx("button",{onClick:o,className:"text-xs bg-indigo-50 text-indigo-600 px-2 py-1 rounded",children:"Add Section"})]}),(n.sections||[]).map((h,p)=>i.jsxs("div",{className:"border border-gray-200 dark:border-[#333] rounded-lg p-3 mb-3 bg-gray-50 dark:bg-[#151515]",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx(ot,{required:!0,children:"Section Title"}),i.jsx(Kt,{value:h.title,onChange:m=>c(p,"title",m.target.value)})]}),i.jsxs("div",{className:"ml-2 pl-2 border-l-2 border-indigo-100 dark:border-[#333]",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx(ot,{children:"Rows"}),i.jsx("button",{onClick:()=>d(p),className:"text-xs text-indigo-500",children:"+ Row"})]}),h.rows.map((m,y)=>i.jsxs("div",{className:"mb-3 grid grid-cols-2 gap-2",children:[i.jsx("div",{className:"col-span-2",children:i.jsx(Kt,{placeholder:"Row Title",value:m.title,onChange:x=>f(p,y,"title",x.target.value)})}),i.jsx(Kt,{placeholder:"ID",value:m.id,onChange:x=>f(p,y,"id",x.target.value)}),i.jsx(Kt,{placeholder:"Desc",value:m.description,onChange:x=>f(p,y,"description",x.target.value)})]},m.id))]})]},h.id))]})]})},IO=({data:n,onChange:s})=>{const l=[{name:"welcome_msg",id:"1",lang:"en",variables:0},{name:"offer_alert",id:"2",lang:"en",variables:1}];return i.jsxs("div",{children:[i.jsxs("div",{className:"mb-4",children:[i.jsx(ot,{required:!0,children:"Select Template"}),i.jsxs("select",{className:"nodrag w-full border border-gray-200 dark:border-[#333] bg-white dark:bg-[#0A0A0A] dark:text-gray-100 rounded-lg p-2.5 text-sm",value:n.template?.id||"",onChange:o=>{const c=l.find(d=>d.id===o.target.value);s("template",c)},children:[i.jsx("option",{value:"",children:"Select a template..."}),l.map(o=>i.jsx("option",{value:o.id,children:o.name},o.id))]})]}),n.template&&i.jsxs("div",{className:"bg-gray-50 dark:bg-[#151515] rounded-xl p-4 border border-gray-200 dark:border-[#333]",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2 font-semibold text-gray-800 dark:text-gray-100",children:[i.jsx(kr,{size:18,className:"text-teal-600"}),i.jsx("span",{children:n.template.name})]}),i.jsxs("div",{className:"flex gap-2 text-gray-400",children:[i.jsx(Er,{size:16,className:"cursor-pointer hover:text-gray-600"}),i.jsx(sn,{size:16,className:"cursor-pointer hover:text-red-500",onClick:()=>s("template",null)})]})]}),i.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[i.jsxs("div",{children:["ID: ",n.template.id]}),i.jsxs("div",{children:["Lang: ",n.template.lang]}),i.jsxs("div",{children:["Variables: ",n.template.variables]})]}),i.jsx("div",{className:"mt-3 flex justify-end",children:i.jsx("span",{className:"bg-gray-200 dark:bg-[#333] text-gray-600 dark:text-gray-300 px-2 py-0.5 rounded text-xs",children:"Inactive"})})]})]})},JO=({data:n,onChange:s,type:l})=>{const o=[{id:"1",name:"VIP Customers"},{id:"2",name:"Leads"}],c=l==="addGroup";return i.jsxs("div",{className:"bg-gray-50 dark:bg-[#151515] rounded-xl p-4 border border-gray-200 dark:border-[#333]",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2 font-semibold text-gray-800 dark:text-gray-100",children:[c?i.jsx(hn,{size:18,className:"text-teal-600"}):i.jsx(Jd,{size:18,className:"text-teal-600"}),i.jsx("span",{children:c?"Add to Group":"Remove from Group"})]}),i.jsxs("div",{className:"flex gap-2 text-gray-400",children:[i.jsx(Er,{size:16}),i.jsx(sn,{size:16})]})]}),i.jsxs("div",{className:"mb-2",children:[i.jsx(ot,{children:c?"Add to:":"Remove from:"}),i.jsxs("select",{className:"nodrag w-full bg-transparent border-b border-gray-300 dark:border-[#444] py-1 text-sm focus:border-indigo-500 outline-none dark:text-gray-200",value:n.groupId||"",onChange:d=>s("groupId",d.target.value),children:[i.jsx("option",{value:"",children:"No group selected"}),o.map(d=>i.jsx("option",{value:d.id,children:d.name},d.id))]})]}),i.jsxs("div",{className:"flex justify-between items-center mt-4",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Action"}),i.jsx("span",{className:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 px-3 py-1 rounded-full text-xs font-medium",children:"Active"})]})]})},WO=({data:n,onChange:s})=>{const l=n.mediaType&&n.file;return i.jsxs("div",{children:[!l&&i.jsx(Fo,{}),i.jsx(ot,{required:!0,children:"Media Type"}),i.jsxs("select",{className:"nodrag w-full border border-gray-200 dark:border-[#333] rounded-lg p-2 mb-2 dark:bg-[#0A0A0A] dark:text-white",value:n.mediaType,onChange:o=>s("mediaType",o.target.value),children:[i.jsx("option",{children:"Image"}),i.jsx("option",{children:"Video"})]}),i.jsx(ot,{children:"Upload"}),i.jsx("div",{className:"border border-dashed p-4 rounded text-center dark:border-[#333] text-gray-500",children:i.jsx("input",{type:"file",onChange:o=>s("file",o.target.files[0])})})]})};function PO({id:n,data:s}){const{setNodes:l,deleteElements:o,getNodes:c}=Xo(),d=A.useCallback((m,y)=>{l(x=>x.map(v=>v.id===n?{...v,data:{...v.data,[m]:y}}:v))},[n,l]),f={onDelete:()=>o({nodes:[{id:n}]}),onDuplicate:()=>{const m=c().find(y=>y.id===n);m&&l(y=>y.concat({...m,id:`${m.data.subType}-${Date.now()}`,position:{x:m.position.x+50,y:m.position.y+50},selected:!1}))},onRename:m=>d("label",m)},h=XO[s.subType]||di,p=()=>{switch(s.subType){case"text":return i.jsx(QO,{data:s,onChange:d});case"buttons":return i.jsx(FO,{data:s,onChange:d});case"list":return i.jsx(KO,{data:s,onChange:d});case"template":return i.jsx(IO,{data:s,onChange:d});case"addGroup":case"removeGroup":return i.jsx(JO,{data:s,onChange:d,type:s.subType});case"media":return i.jsx(WO,{data:s,onChange:d});default:return i.jsxs("div",{className:"text-gray-500 text-center py-4",children:["Coming Soon: ",s.subType]})}};return i.jsxs("div",{className:"min-w-[320px] max-w-[360px] bg-white dark:bg-[#0F0F0F] rounded-xl shadow-lg border border-gray-200 dark:border-[#262626] font-sans transition-colors duration-200",children:[i.jsx(pn,{type:"target",position:pe.Left,className:"!bg-gray-400 dark:!bg-neutral-600 !w-3 !h-3 !-left-1.5"}),i.jsxs("div",{className:"p-5",children:[["addGroup","removeGroup"].includes(s.subType)?null:i.jsx(ZO,{label:s.label,icon:h,actions:f}),p()]}),i.jsx(pn,{type:"source",position:pe.Right,className:"!bg-gray-400 dark:!bg-neutral-600 !w-3 !h-3 !-right-1.5"})]})}function eL({data:n}){return i.jsxs("div",{className:"min-w-[240px] bg-white dark:bg-[#0F0F0F] rounded-lg shadow-sm border border-gray-200 dark:border-[#262626] transition-colors duration-200",children:[i.jsx(pn,{type:"target",position:pe.Top,className:"!bg-gray-400 dark:!bg-neutral-600 !w-3 !h-3"}),i.jsxs("div",{className:"p-3 border-b border-gray-50 dark:border-[#262626] flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-teal-50 dark:bg-teal-900/10 flex items-center justify-center border border-teal-100 dark:border-teal-900/30",children:i.jsx(yo,{size:16,className:"text-teal-600 dark:text-teal-400"})}),i.jsx("span",{className:"text-sm font-semibold text-gray-800 dark:text-neutral-100",children:"Condition"})]}),i.jsxs("div",{className:"p-3",children:[i.jsx("div",{className:"text-xs text-gray-500 dark:text-neutral-500 mb-2",children:"Check if..."}),i.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-neutral-200 bg-gray-50 dark:bg-[#1A1A1A] p-2 rounded border border-gray-100 dark:border-[#262626]",children:n.condition||'User replies "Yes"'}),i.jsxs("div",{className:"flex justify-between mt-4",children:[i.jsx("div",{className:"text-xs font-semibold text-green-600 dark:text-green-400 uppercase",children:"True"}),i.jsx("div",{className:"text-xs font-semibold text-red-600 dark:text-red-400 uppercase",children:"False"})]})]}),i.jsx(pn,{type:"source",position:pe.Bottom,id:"true",className:"!bg-green-500 !w-3 !h-3 !left-[25%]"}),i.jsx(pn,{type:"source",position:pe.Bottom,id:"false",className:"!bg-red-500 !w-3 !h-3 !left-[75%]"})]})}const tL={trigger:GO,condition:eL,action:PO},nL=[{id:"messages",title:"cat_messages",items:[{id:"text",label:"node_text",icon:di,subType:"text"},{id:"media",label:"node_media",icon:mr,subType:"media"},{id:"buttons",label:"node_buttons",icon:Up,subType:"buttons"},{id:"list",label:"node_list",icon:Fd,subType:"list"},{id:"template",label:"node_template",icon:kr,subType:"template"}]},{id:"groups",title:"cat_groups",items:[{id:"addGroup",label:"node_add_group",icon:hn,subType:"addGroup"},{id:"removeGroup",label:"node_remove_group",icon:Jd,subType:"removeGroup"}]},{id:"tags",title:"cat_tags",items:[{id:"addTag",label:"node_add_tag",icon:Mo,subType:"addTag"},{id:"removeTag",label:"node_remove_tag",icon:Hp,subType:"removeTag"}]},{id:"funnel",title:"cat_funnel",items:[{id:"addPipeline",label:"node_add_pipeline",icon:$p,subType:"addPipeline"},{id:"removePipeline",label:"node_remove_pipeline",icon:sn,subType:"removePipeline"}]},{id:"others",title:"cat_others",items:[{id:"delay",label:"node_delay",icon:pr,subType:"delay"}]}],aL=[{value:"NEW_CONVERSATION",label:"trigger_new_conversation"},{value:"KEYWORDS",label:"trigger_keywords"},{value:"HAS_TAGS",label:"trigger_has_tags"},{value:"PIPELINE_UPDATE",label:"trigger_pipeline_update"},{value:"SHORT_RESPONSE",label:"trigger_short_response"}];function sL(){const{t:n}=ut(),{id:s}=Vp(),l=is(),o=s==="new",c=A.useRef(null),[d,f,h]=hO([]),[p,m,y]=mO([]),[x,v]=A.useState("Untitled Flow"),[N,S]=A.useState("NEW_CONVERSATION"),[T,E]=A.useState({}),[z,w]=A.useState(!1),[_,C]=A.useState(!1),[$,O]=A.useState({messages:!0,groups:!0,tags:!0,funnel:!1,others:!0}),[V,G]=A.useState(null);A.useEffect(()=>{o?f([{id:"trigger-1",type:"trigger",data:{triggerType:"NEW_CONVERSATION"},position:{x:100,y:300},deletable:!1}]):L()},[s]),A.useEffect(()=>{f(M=>M.map(U=>U.type==="trigger"?{...U,data:{...U.data,triggerType:N,...T}}:U))},[N,T,f]);const L=async()=>{try{const M=await ce.get(`/flows/${s}`);v(M.name),S(M.triggerType||"NEW_CONVERSATION"),E(M.triggerData||{}),w(M.isActive),M.content&&M.content.nodes&&(f(M.content.nodes),m(M.content.edges||[]))}catch(M){console.error("Failed to load flow",M)}},F=A.useCallback(M=>{m(U=>Gx({...M,animated:!0,style:{stroke:"#94a3b8",strokeWidth:2}},U))},[m]),q=async()=>{C(!0);const M={name:x,content:{nodes:d,edges:p},triggerType:N,triggerData:T,isActive:z};try{let U;o?U=await ce.post("/flows",M):U=await ce.put(`/flows/${s}`,M),o&&l(`/automations/${U.id}`,{replace:!0})}catch(U){console.error("Failed to save",U),alert(`Failed to save: ${U.message}`)}finally{C(!1)}},Z=M=>{const U={id:`${M.subType}-${Date.now()}`,type:"action",data:{label:n(M.label),subType:M.subType,description:"Click to configure"},position:{x:500,y:300}};f(j=>j.concat(U))},te=M=>{O(U=>({...U,[M]:!U[M]}))};return i.jsxs("div",{className:"h-screen flex bg-gray-50 dark:bg-[#050505] font-sans text-gray-900 dark:text-neutral-100 transition-colors duration-300",children:[i.jsxs("div",{className:"w-72 bg-white dark:bg-[#0F0F0F] border-r border-gray-200 dark:border-[#262626] flex flex-col shadow-sm z-10 transition-colors duration-300",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-[#262626] flex items-center justify-between",children:[i.jsx("button",{onClick:()=>l("/automations"),className:"text-gray-500 hover:text-gray-800 dark:hover:text-neutral-200 transition-colors",children:i.jsx(C_,{size:18})}),i.jsx("span",{className:"font-semibold text-gray-700 dark:text-neutral-200",children:n("flow_builder_components")}),i.jsx("div",{className:"w-5"})]}),i.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:nL.map(M=>i.jsxs("div",{className:"border-b border-gray-100 dark:border-[#262626]",children:[i.jsxs("button",{onClick:()=>te(M.id),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-[#1A1A1A] transition-colors",children:[i.jsx("span",{className:"font-semibold text-sm text-gray-800 dark:text-neutral-200",children:n(M.title)}),$[M.id]?i.jsx(Cr,{size:16,className:"text-gray-400"}):i.jsx(Dp,{size:16,className:"text-gray-400"})]}),$[M.id]&&i.jsx("div",{className:"pb-2",children:M.items.map(U=>i.jsxs("div",{onClick:()=>Z(U),className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-[#1A1A1A] cursor-pointer flex items-center gap-3 group transition-colors",children:[i.jsx(U.icon,{size:18,className:"text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors"}),i.jsx("span",{className:"text-sm text-gray-600 dark:text-neutral-400 group-hover:text-gray-900 dark:group-hover:text-neutral-200 transition-colors",children:n(U.label)}),i.jsx("div",{className:"flex-1"}),i.jsx("span",{className:"opacity-0 group-hover:opacity-100 text-gray-400",children:i.jsxs("div",{className:"grid grid-cols-2 gap-0.5",children:[i.jsx("div",{className:"w-1 h-1 rounded-full bg-current"}),i.jsx("div",{className:"w-1 h-1 rounded-full bg-current"}),i.jsx("div",{className:"w-1 h-1 rounded-full bg-current"}),i.jsx("div",{className:"w-1 h-1 rounded-full bg-current"})]})})]},U.id))})]},M.id))})]}),i.jsxs("div",{className:"flex-1 flex flex-col relative",children:[i.jsxs("div",{className:"h-16 bg-white dark:bg-[#0F0F0F] border-b border-gray-200 dark:border-[#262626] flex items-center justify-between px-6 shadow-sm z-10 transition-colors duration-300",children:[i.jsx("div",{className:"flex items-center gap-4",children:i.jsx("input",{value:x,onChange:M=>v(M.target.value),className:"text-lg font-bold text-gray-800 dark:text-neutral-100 bg-transparent border-none focus:ring-0 placeholder-gray-400 dark:placeholder-neutral-600",placeholder:"Untitled Flow"})}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("button",{onClick:()=>w(!z),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium border transition-colors ${z?"bg-green-50 border-green-200 text-green-700 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400":"bg-gray-50 border-gray-200 text-gray-600 hover:bg-gray-100 dark:bg-[#1A1A1A] dark:border-[#404040] dark:text-neutral-400 dark:hover:bg-[#262626]"}`,children:[z?i.jsx(Rp,{size:16}):i.jsx(ti,{size:16}),n(z?"tooltip_active":"tooltip_draft")]}),i.jsxs("button",{onClick:q,disabled:_,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2 rounded-lg font-medium text-sm flex items-center gap-2 transition-all shadow-sm hover:shadow active:scale-95",children:[i.jsx(Op,{size:18}),n(_?"status_saving":"btn_save_flow")]})]})]}),i.jsx("div",{className:"absolute top-20 right-6 z-20 w-80",children:V?.type==="trigger"?i.jsxs("div",{className:"bg-white dark:bg-[#0F0F0F] rounded-xl shadow-xl border border-gray-100 dark:border-[#262626] overflow-hidden animate-in fade-in slide-in-from-right-4 duration-200",children:[i.jsx("div",{className:"bg-gray-50 dark:bg-[#151515] px-4 py-3 border-b border-gray-100 dark:border-[#262626] flex items-center justify-between",children:i.jsx("span",{className:"font-semibold text-gray-700 dark:text-neutral-200 text-sm",children:n("config_trigger")})}),i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-gray-500 dark:text-neutral-400 mb-1",children:n("label_trigger_event")}),i.jsx("select",{value:N,onChange:M=>S(M.target.value),className:"w-full text-sm border-gray-200 dark:border-[#404040] dark:bg-[#1A1A1A] dark:text-neutral-200 rounded-lg focus:ring-indigo-500 focus:border-indigo-500",children:aL.map(M=>i.jsx("option",{value:M.value,children:n(M.label)},M.value))})]}),N==="KEYWORDS"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-gray-500 dark:text-neutral-400 mb-1",children:n("label_keywords")}),i.jsx("input",{type:"text",placeholder:"e.g. hello, pricing",className:"w-full text-sm border-gray-200 dark:border-[#404040] dark:bg-[#1A1A1A] dark:text-neutral-200 rounded-lg focus:ring-indigo-500 focus:border-indigo-500",value:T.keyword||"",onChange:M=>E({...T,keyword:M.target.value})}),i.jsx("p",{className:"text-xs text-gray-400 dark:text-neutral-500 mt-1",children:n("hint_comma_separated")})]})]})]}):null}),i.jsxs("div",{className:"flex-1 bg-slate-50 dark:bg-[#050505] relative transition-colors duration-300",ref:c,children:[i.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.4] dark:opacity-[0.1]",style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"}}),i.jsxs(gO,{nodes:d,edges:p,onNodesChange:h,onEdgesChange:y,onConnect:F,onNodeClick:(M,U)=>G(U),onPaneClick:()=>G(null),nodeTypes:tL,fitView:!0,attributionPosition:"bottom-right",className:"dark:invert-0",children:[i.jsx(vO,{color:"#cbd5e1",gap:20,size:1,className:"dark:opacity-10"}),i.jsx(CO,{className:"!bg-white dark:!bg-[#0F0F0F] !border-gray-200 dark:!border-[#262626] !shadow-sm [&>button]:!text-gray-600 dark:[&>button]:!text-neutral-400 hover:[&>button]:!bg-gray-50 dark:hover:[&>button]:!bg-[#1A1A1A]"}),i.jsx(BO,{className:"!bg-white dark:!bg-[#0F0F0F] !border-gray-200 dark:!border-[#262626] !shadow-sm",nodeColor:"#e2e8f0",maskColor:"rgba(248, 250, 252, 0.7)"})]})]})]})]})}const iL=()=>{const{t:n}=ut(),[s,l]=A.useState([]),[o,c]=A.useState(!0),[d,f]=A.useState("OPEN"),[h,p]=A.useState([]);A.useEffect(()=>{m(),y()},[d]);const m=async()=>{try{c(!0);const x=await ce.getConversations({status:d});l(x)}catch(x){console.error("Failed to fetch conversations:",x)}finally{c(!1)}},y=async()=>{try{const x=await ce.getTeamMembers();p(x)}catch(x){console.error("Failed to fetch team members:",x)}};return i.jsxs("div",{className:"inbox-page p-6 h-full flex flex-col bg-gray-50 dark:bg-black transition-colors duration-300",children:[i.jsxs("header",{className:"mb-6 flex justify-between items-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:n("inbox_title")}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>f("OPEN"),className:`px-3 py-1 rounded text-sm transition-colors ${d==="OPEN"?"bg-blue-600 dark:bg-green-600 text-white":"bg-gray-200 dark:bg-zinc-800 text-gray-700 dark:text-zinc-300"}`,children:n("filter_open")}),i.jsx("button",{onClick:()=>f("CLOSED"),className:`px-3 py-1 rounded text-sm transition-colors ${d==="CLOSED"?"bg-blue-600 dark:bg-green-600 text-white":"bg-gray-200 dark:bg-zinc-800 text-gray-700 dark:text-zinc-300"}`,children:n("filter_closed")})]})]}),i.jsx("div",{className:"bg-white dark:bg-[#09090b] rounded-lg shadow overflow-hidden flex-1 border border-gray-100 dark:border-zinc-800",children:i.jsx("div",{className:"grid grid-cols-1 divide-y divide-gray-100 dark:divide-zinc-800",children:o?i.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:n("loading_conversations")}):s.length===0?i.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:n("no_conversations")}):s.map(x=>i.jsx(go,{to:`/inbox/${x.id}`,className:"block hover:bg-gray-50 dark:hover:bg-zinc-900/50 transition-colors p-4",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-green-900/20 flex items-center justify-center text-blue-600 dark:text-green-500 font-semibold",children:x.contact?.name?.[0]||"?"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-gray-900 dark:text-zinc-100",children:x.contact?.name||n("unknown_contact")}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 truncate max-w-md",children:x.lastMessage||n("no_messages_yet")})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-xs text-gray-400 dark:text-zinc-500",children:x.updatedAt?new Date(x.updatedAt).toLocaleString():""}),x.assignedTo?i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 mt-1",children:x.assignedTo.name}):i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 dark:bg-zinc-800 text-gray-800 dark:text-zinc-300 mt-1",children:n("label_unassigned")})]})]})},x.id))})})]})},rL=({contactId:n})=>{const{t:s}=ut(),[l,o]=A.useState([]),[c,d]=A.useState(""),[f,h]=A.useState(!0);A.useEffect(()=>{n&&p()},[n]);const p=async()=>{try{h(!0);const y=await ce.getNotes(n);o(y)}catch(y){console.error("Failed to fetch notes:",y)}finally{h(!1)}},m=async y=>{if(y.preventDefault(),!!c.trim())try{await ce.addNote({contactId:parseInt(n),content:c}),d(""),p()}catch(x){console.error("Failed to add note:",x)}};return i.jsxs("div",{className:"internal-notes bg-gray-50 dark:bg-zinc-900/30 p-4 rounded-lg border border-gray-200 dark:border-zinc-800",children:[i.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-zinc-300 mb-3",children:s("notes_title")}),i.jsx("div",{className:"notes-list space-y-3 mb-4 max-h-60 overflow-y-auto",children:f?i.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400",children:s("notes_loading")}):l.length===0?i.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 italic",children:s("notes_empty")}):l.map(y=>i.jsxs("div",{className:"note-item bg-white dark:bg-zinc-900 p-2 rounded border border-gray-100 dark:border-zinc-800 shadow-sm",children:[i.jsx("p",{className:"text-xs text-gray-800 dark:text-zinc-200 whitespace-pre-wrap",children:y.content}),i.jsxs("div",{className:"flex justify-between items-center mt-1",children:[i.jsx("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400",children:y.author?y.author.name:s("notes_unknown_user")}),i.jsx("span",{className:"text-[10px] text-gray-400 dark:text-zinc-500",children:new Date(y.createdAt).toLocaleString()})]})]},y.id))}),i.jsxs("form",{onSubmit:m,className:"note-form",children:[i.jsx("textarea",{value:c,onChange:y=>d(y.target.value),placeholder:s("notes_placeholder"),className:"w-full text-xs p-2 border border-gray-300 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white rounded mb-2 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:focus:ring-green-500 dark:placeholder-zinc-500",rows:"2"}),i.jsx("button",{type:"submit",disabled:!c.trim(),className:"w-full bg-gray-600 dark:bg-zinc-700 hover:bg-gray-700 dark:hover:bg-zinc-600 text-white text-xs py-1 px-2 rounded disabled:opacity-50 transition-colors",children:s("btn_add_note")})]})]})},lL=()=>{const{t:n}=ut(),{id:s}=Vp(),l=is(),[o,c]=A.useState(null),[d,f]=A.useState([]),[h,p]=A.useState(""),[m,y]=A.useState(!0),[x,v]=A.useState([]),N=A.useRef(null);A.useEffect(()=>{s&&(T(),E())},[s]),A.useEffect(()=>{S()},[d]);const S=()=>{N.current?.scrollIntoView({behavior:"smooth"})},T=async()=>{try{y(!0);const C=await ce.getConversation(s);c(C),f(C.messages||[])}catch(C){console.error("Failed to fetch conversation:",C)}finally{y(!1)}},E=async()=>{try{const C=await ce.getTeamMembers();v(C)}catch(C){console.error("Failed to fetch team members:",C)}},z=async C=>{if(C.preventDefault(),!!h.trim())try{const $=await ce.sendMessage(s,{content:h});f([...d,$]),p("")}catch($){console.error("Failed to send message:",$)}},w=async C=>{const $=C.target.value;try{const O=await ce.assignConversation(s,$);c(V=>({...V,assignedTo:O.assignedTo,assignedToId:O.assignedToId}))}catch(O){console.error("Failed to assign agent:",O)}},_=async C=>{try{const $=await ce.updateConversationStatus(s,C);c(O=>({...O,status:$.status}))}catch($){console.error("Failed to update status:",$)}};return m?i.jsx("div",{className:"p-6 text-center",children:n("conversation_loading")}):o?i.jsxs("div",{className:"conversation-page h-[calc(100vh-64px)] flex flex-col md:flex-row bg-white dark:bg-gray-900",children:[i.jsxs("div",{className:"flex-1 flex flex-col border-r border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-white dark:bg-gray-800",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("button",{onClick:()=>l("/inbox"),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 mr-2 md:hidden",children:[" ",n("btn_back")]}),i.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400 font-semibold text-lg",children:o.contact?.name?.[0]||"C"}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-bold text-gray-800 dark:text-white",children:o.contact?.name}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:o.contact?.phone})]})]}),i.jsx("div",{className:"flex items-center gap-2",children:o.status==="OPEN"?i.jsx("button",{onClick:()=>_("CLOSED"),className:"text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 px-3 py-1 rounded",children:n("btn_mark_closed")}):i.jsx("button",{onClick:()=>_("OPEN"),className:"text-xs bg-green-50 dark:bg-green-900/10 hover:bg-green-100 dark:hover:bg-green-900/20 text-green-700 dark:text-green-400 px-3 py-1 rounded",children:n("btn_reopen")})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50 dark:bg-gray-900 space-y-4",children:[d.map(C=>{const $=C.direction==="OUTBOUND";return i.jsx("div",{className:`flex ${$?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${$?"bg-blue-600 text-white rounded-br-none":"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-800 dark:text-gray-100 rounded-bl-none"} shadow-sm`,children:[i.jsx("p",{className:"text-sm whitespace-pre-wrap",children:C.content}),i.jsxs("div",{className:`text-[10px] mt-1 ${$?"text-blue-100":"text-gray-400 dark:text-gray-500"}`,children:[new Date(C.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),$&&C.sender&&`  ${C.sender.name}`]})]})},C.id)}),i.jsx("div",{ref:N})]}),i.jsx("div",{className:"p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("form",{onSubmit:z,className:"flex gap-2",children:[i.jsx("input",{type:"text",value:h,onChange:C=>p(C.target.value),placeholder:n("placeholder_type_message"),className:"flex-1 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:placeholder-gray-400"}),i.jsx("button",{type:"submit",disabled:!h.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-colors",children:n("btn_send")})]})})]}),i.jsxs("div",{className:"w-full md:w-80 bg-white dark:bg-gray-800 p-4 overflow-y-auto border-l border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:n("label_assignment")}),i.jsxs("select",{value:o.assignedToId||"",onChange:w,className:"w-full p-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:n("label_unassigned")}),x.map(C=>i.jsx("option",{value:C.id,children:C.name},C.id))]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:n("label_contact_info")}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded border border-gray-100 dark:border-gray-600",children:[i.jsxs("p",{className:"text-sm text-gray-800 dark:text-gray-200 mb-1",children:[i.jsx("span",{className:"font-semibold",children:n("label_name")})," ",o.contact?.name]}),i.jsxs("p",{className:"text-sm text-gray-800 dark:text-gray-200 mb-1",children:[i.jsx("span",{className:"font-semibold",children:n("label_phone")})," ",o.contact?.phone]}),i.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:o.contact?.tags?.map((C,$)=>i.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 px-2 py-0.5 rounded-full",children:C},$))})]})]}),i.jsx(rL,{contactId:o.contactId})]})]}):i.jsx("div",{className:"p-6 text-center",children:n("conversation_not_found")})},oL=()=>{const{t:n}=ut(),[s,l]=A.useState([]),[o,c]=A.useState(!0),[d,f]=A.useState("Verified"),[h,p]=A.useState(!1),[m,y]=A.useState({name:"",email:"",role:"AGENT",avatar:""});A.useEffect(()=>{x()},[]);const x=async()=>{try{c(!0);const T=await ce.getTeamMembers();l(T)}catch(T){console.error("Failed to fetch team members:",T)}finally{c(!1)}},v=T=>{const{name:E,value:z}=T.target;y(w=>({...w,[E]:z}))},N=async T=>{T.preventDefault();try{await ce.addTeamMember(m),x(),p(!1),y({name:"",email:"",role:"AGENT",avatar:""})}catch(E){console.error("Failed to add team member:",E),alert(n("error_add_member"))}},S=async T=>{if(window.confirm(n("confirm_remove_member")))try{await ce.deleteTeamMember(T),x()}catch(E){console.error("Failed to delete member:",E)}};return i.jsxs("div",{className:"team-page p-6 bg-gray-50 dark:bg-black min-h-full transition-colors duration-300",children:[i.jsxs("div",{className:"flex gap-8 border-b border-gray-200 dark:border-zinc-800 mb-8",children:[i.jsxs("button",{className:`pb-3 text-sm font-medium transition-colors relative ${d==="Verified"?"text-blue-600 dark:text-green-500":"text-gray-500 dark:text-zinc-500 hover:text-gray-700 dark:hover:text-zinc-300"}`,onClick:()=>f("Verified"),children:[n("tab_verified"),d==="Verified"&&i.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 dark:bg-green-500 rounded-t-full"})]}),i.jsxs("button",{className:`pb-3 text-sm font-medium transition-colors relative ${d==="Unverified"?"text-blue-600 dark:text-green-500":"text-gray-500 dark:text-zinc-500 hover:text-gray-700 dark:hover:text-zinc-300"}`,onClick:()=>f("Unverified"),children:[n("tab_unverified"),d==="Unverified"&&i.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 dark:bg-green-500 rounded-t-full"})]})]}),i.jsxs("div",{className:"flex justify-between items-start mb-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:n("team_title")}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:n("team_subtitle")})]}),i.jsxs("button",{onClick:()=>p(!0),className:"bg-blue-600 hover:bg-blue-700 dark:bg-green-600 dark:hover:bg-green-700 text-white px-4 py-2 rounded-full text-sm font-medium flex items-center gap-2 transition-colors shadow-sm",children:[n("btn_invite_user")," ",i.jsx(ka,{size:16})]})]}),i.jsxs("div",{className:"bg-white dark:bg-[#09090b] p-4 rounded-xl shadow-sm mb-6 flex justify-between items-center border border-gray-100 dark:border-zinc-800",children:[i.jsxs("div",{className:"relative w-64",children:[i.jsx(Kd,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500",size:18}),i.jsx("input",{type:"text",placeholder:n("placeholder_search_team"),className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-zinc-900/50 border-none rounded-lg text-sm focus:ring-2 focus:ring-blue-100 dark:focus:ring-green-900 focus:bg-white dark:focus:bg-zinc-900 transition-all outline-none text-gray-700 dark:text-zinc-200 placeholder-gray-400 dark:placeholder-zinc-600"})]}),i.jsxs("button",{className:"flex items-center gap-2 text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-200 border border-gray-200 dark:border-zinc-800 hover:border-gray-300 dark:hover:border-zinc-700 rounded-lg px-3 py-2 text-sm transition-all bg-white dark:bg-[#09090b]",children:[i.jsx(E_,{size:16}),n("btn_columns")]})]}),i.jsx("div",{className:"bg-white dark:bg-[#09090b] rounded-xl shadow-sm overflow-hidden border border-gray-100 dark:border-zinc-800",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-blue-50/50 dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800",children:[i.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:n("col_name")}),i.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:n("col_email")}),i.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:n("col_role")}),i.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:n("col_active")}),i.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:n("col_assignable")}),i.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:n("col_last_updated")}),i.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-900 dark:text-zinc-200",children:n("col_actions")})]})}),i.jsx("tbody",{className:"divide-y divide-gray-50 dark:divide-zinc-800",children:o?i.jsx("tr",{children:i.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500 dark:text-zinc-500 text-sm",children:n("loading")})}):s.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500 dark:text-zinc-500 text-sm",children:n("no_team_members")})}):s.map(T=>i.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-zinc-900/50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"flex items-center",children:i.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-zinc-200",children:T.name})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-zinc-400",children:T.email}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:"text-sm text-gray-900 dark:text-zinc-300 capitalize",children:T.role.toLowerCase()})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.jsx("div",{className:"w-8 h-4 bg-green-200 dark:bg-green-900/40 rounded-full relative cursor-pointer",children:i.jsx("div",{className:"absolute right-0.5 top-0.5 w-3 h-3 bg-white rounded-full shadow-sm"})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.jsx("input",{type:"checkbox",className:"rounded text-blue-600 dark:text-green-600 focus:ring-blue-500 dark:focus:ring-green-500 border-gray-300 dark:border-zinc-700 dark:bg-zinc-900",defaultChecked:!0})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-zinc-500",children:[new Date(T.updatedAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})," ",new Date(T.updatedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:i.jsx("button",{onClick:()=>S(T.id),className:"text-gray-400 dark:text-zinc-600 hover:text-red-600 dark:hover:text-red-500 transition-colors",children:n("btn_delete")})})]},T.id))})]})}),h&&i.jsx("div",{className:"fixed inset-0 bg-black/20 dark:bg-black/70 backdrop-blur-sm overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:i.jsxs("div",{className:"relative p-6 border dark:border-zinc-800 w-96 shadow-2xl rounded-xl bg-white dark:bg-[#09090b] animate-fade-in up",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:n("modal_invite_title")}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 mb-4",children:n("modal_invite_subtitle")}),i.jsxs("form",{onSubmit:N,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-gray-700 dark:text-zinc-300 text-xs font-semibold mb-1.5 uppercase tracking-wide",children:n("col_name")}),i.jsx("input",{type:"text",name:"name",value:m.name,onChange:v,className:"w-full px-3 py-2 border border-gray-200 dark:border-zinc-800 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-green-500/20 focus:border-blue-500 dark:focus:border-green-500 transition-all placeholder-gray-300 dark:placeholder-zinc-600 dark:bg-zinc-900 dark:text-white",placeholder:"Jane Doe",required:!0})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-gray-700 dark:text-zinc-300 text-xs font-semibold mb-1.5 uppercase tracking-wide",children:n("col_email")}),i.jsx("input",{type:"email",name:"email",value:m.email,onChange:v,className:"w-full px-3 py-2 border border-gray-200 dark:border-zinc-800 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-green-500/20 focus:border-blue-500 dark:focus:border-green-500 transition-all placeholder-gray-300 dark:placeholder-zinc-600 dark:bg-zinc-900 dark:text-white",placeholder:"jane@example.com",required:!0})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-gray-700 dark:text-zinc-300 text-xs font-semibold mb-1.5 uppercase tracking-wide",children:n("col_role")}),i.jsxs("select",{name:"role",value:m.role,onChange:v,className:"w-full px-3 py-2 border border-gray-200 dark:border-zinc-800 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-green-500/20 focus:border-blue-500 dark:focus:border-green-500 transition-all bg-white dark:bg-zinc-900 dark:text-white",children:[i.jsx("option",{value:"AGENT",children:n("role_agent")}),i.jsx("option",{value:"MANAGER",children:n("role_manager")}),i.jsx("option",{value:"ADMIN",children:n("role_admin")})]})]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 bg-gray-100 dark:bg-zinc-900 text-gray-700 dark:text-zinc-300 text-sm font-medium rounded-lg hover:bg-gray-200 dark:hover:bg-zinc-800 transition-colors",children:n("btn_cancel")}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 dark:bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 dark:hover:bg-green-700 shadow-sm shadow-blue-200 dark:shadow-none transition-colors",children:n("btn_send_invitation")})]})]})]})})]})};function cL(){return i.jsx(aA,{children:i.jsx(sA,{children:i.jsx(tA,{children:i.jsx(T_,{children:i.jsxs(M_,{children:[i.jsx(vt,{path:"/login",element:i.jsx(dA,{})}),i.jsxs(vt,{path:"/",element:i.jsx(iA,{children:i.jsx(rA,{})}),children:[i.jsx(vt,{index:!0,element:i.jsx(lA,{})}),i.jsx(vt,{path:"contacts",element:i.jsx(cA,{})}),i.jsx(vt,{path:"lists",element:i.jsx(uA,{})}),i.jsx(vt,{path:"campaigns",element:i.jsx(gA,{})}),i.jsx(vt,{path:"campaigns/new",element:i.jsx(fA,{})}),i.jsx(vt,{path:"templates",element:i.jsx(pA,{})}),i.jsx(vt,{path:"media",element:i.jsx(hA,{})}),i.jsx(vt,{path:"settings",element:i.jsx(xA,{})}),i.jsx(vt,{path:"automations",element:i.jsx(yA,{})}),i.jsx(vt,{path:"automations/:id",element:i.jsx(sL,{})}),i.jsx(vt,{path:"inbox",element:i.jsx(iL,{})}),i.jsx(vt,{path:"inbox/:id",element:i.jsx(lL,{})}),i.jsx(vt,{path:"team",element:i.jsx(oL,{})})]})]})})})})})}U_.createRoot(document.getElementById("root")).render(i.jsx(A.StrictMode,{children:i.jsx(cL,{})}));
