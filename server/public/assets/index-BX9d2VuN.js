import{a as $b,b as Kb,r as E,R as Th,A as Fb,C as _h,X as Mh,Y as Dh,T as Oh,c as Ju,B as Jb,d as Wu,e as Ks,i as Wb,f as Rh,g as Ib,h as Hh,j as Pb,k as ev,l as Pi,m as Iu,u as tv}from"./recharts-BUca6RXO.js";import{X as pt,I as av,C as wn,a as Vm,b as dd,L as Ym,c as nv,U as sv,d as da,e as kd,M as lv,H as rv,f as mr,G as lo,g as sr,S as fd,h as Lh,i as iv,j as ov,k as mo,l as lr,R as xo,m as rr,P as jn,n as ar,o as ta,p as cv,q as Gm,T as Bh,A as Uh,r as gd,s as uv,F as al,t as ua,u as Xm,v as Cd,w as yo,x as xr,y as dv,z as aa,B as qh,D as Zm,E as fv,J as gv,K as hv,N as mv,W as Pu,O as xv,Q as zd,V as ir,Y as Qm,Z as Qs,_ as yv,$ as pv,a0 as bv,a1 as yr,a2 as vv,a3 as Nv,a4 as jv,a5 as wv,a6 as Sv,a7 as $m,a8 as Vh,a9 as Km,aa as Fm,ab as kv,ac as Jm,ad as Wm,ae as Ed,af as Im,ag as Cv,ah as zv,ai as Ev,aj as Av,ak as Tv}from"./icons-DRNK27bv.js";import{u as Pm,N as _v,a as es,b as Qi,O as Mv,L as eo,c as ex,B as Dv,R as Ov,d as yt}from"./router-BSK44Qcf.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))c(d);new MutationObserver(d=>{for(const f of d)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&c(g)}).observe(document,{childList:!0,subtree:!0});function i(d){const f={};return d.integrity&&(f.integrity=d.integrity),d.referrerPolicy&&(f.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?f.credentials="include":d.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function c(d){if(d.ep)return;d.ep=!0;const f=i(d);fetch(d.href,f)}})();var ed={exports:{}},Jl={};var Yh;function Rv(){if(Yh)return Jl;Yh=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(c,d,f){var g=null;if(f!==void 0&&(g=""+f),d.key!==void 0&&(g=""+d.key),"key"in d){f={};for(var h in d)h!=="key"&&(f[h]=d[h])}else f=d;return d=f.ref,{$$typeof:n,type:c,key:g,ref:d!==void 0?d:null,props:f}}return Jl.Fragment=r,Jl.jsx=i,Jl.jsxs=i,Jl}var Gh;function Hv(){return Gh||(Gh=1,ed.exports=Rv()),ed.exports}var s=Hv(),td={exports:{}},Wl={},ad={exports:{}},nd={};var Xh;function Lv(){return Xh||(Xh=1,(function(n){function r(C,O){var H=C.length;C.push(O);e:for(;0<H;){var Q=H-1>>>1,G=C[Q];if(0<d(G,O))C[Q]=O,C[H]=G,H=Q;else break e}}function i(C){return C.length===0?null:C[0]}function c(C){if(C.length===0)return null;var O=C[0],H=C.pop();if(H!==O){C[0]=H;e:for(var Q=0,G=C.length,ee=G>>>1;Q<ee;){var P=2*(Q+1)-1,le=C[P],ie=P+1,fe=C[ie];if(0>d(le,H))ie<G&&0>d(fe,le)?(C[Q]=fe,C[ie]=H,Q=ie):(C[Q]=le,C[P]=H,Q=P);else if(ie<G&&0>d(fe,H))C[Q]=fe,C[ie]=H,Q=ie;else break e}}return O}function d(C,O){var H=C.sortIndex-O.sortIndex;return H!==0?H:C.id-O.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;n.unstable_now=function(){return f.now()}}else{var g=Date,h=g.now();n.unstable_now=function(){return g.now()-h}}var m=[],y=[],p=1,b=null,v=3,S=!1,N=!1,z=!1,A=!1,k=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function _(C){for(var O=i(y);O!==null;){if(O.callback===null)c(y);else if(O.startTime<=C)c(y),O.sortIndex=O.expirationTime,r(m,O);else break;O=i(y)}}function L(C){if(z=!1,_(C),!N)if(i(m)!==null)N=!0,q||(q=!0,W());else{var O=i(y);O!==null&&D(L,O.startTime-C)}}var q=!1,Y=-1,U=5,X=-1;function re(){return A?!0:!(n.unstable_now()-X<U)}function $(){if(A=!1,q){var C=n.unstable_now();X=C;var O=!0;try{e:{N=!1,z&&(z=!1,M(Y),Y=-1),S=!0;var H=v;try{t:{for(_(C),b=i(m);b!==null&&!(b.expirationTime>C&&re());){var Q=b.callback;if(typeof Q=="function"){b.callback=null,v=b.priorityLevel;var G=Q(b.expirationTime<=C);if(C=n.unstable_now(),typeof G=="function"){b.callback=G,_(C),O=!0;break t}b===i(m)&&c(m),_(C)}else c(m);b=i(m)}if(b!==null)O=!0;else{var ee=i(y);ee!==null&&D(L,ee.startTime-C),O=!1}}break e}finally{b=null,v=H,S=!1}O=void 0}}finally{O?W():q=!1}}}var W;if(typeof j=="function")W=function(){j($)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,T=B.port2;B.port1.onmessage=$,W=function(){T.postMessage(null)}}else W=function(){k($,0)};function D(C,O){Y=k(function(){C(n.unstable_now())},O)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(C){C.callback=null},n.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<C?Math.floor(1e3/C):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(C){switch(v){case 1:case 2:case 3:var O=3;break;default:O=v}var H=v;v=O;try{return C()}finally{v=H}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(C,O){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var H=v;v=C;try{return O()}finally{v=H}},n.unstable_scheduleCallback=function(C,O,H){var Q=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Q+H:Q):H=Q,C){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=H+G,C={id:p++,callback:O,priorityLevel:C,startTime:H,expirationTime:G,sortIndex:-1},H>Q?(C.sortIndex=H,r(y,C),i(m)===null&&C===i(y)&&(z?(M(Y),Y=-1):z=!0,D(L,H-Q))):(C.sortIndex=G,r(m,C),N||S||(N=!0,q||(q=!0,W()))),C},n.unstable_shouldYield=re,n.unstable_wrapCallback=function(C){var O=v;return function(){var H=v;v=O;try{return C.apply(this,arguments)}finally{v=H}}}})(nd)),nd}var Zh;function Bv(){return Zh||(Zh=1,ad.exports=Lv()),ad.exports}var Qh;function Uv(){if(Qh)return Wl;Qh=1;var n=Bv(),r=$b(),i=Kb();function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function g(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(f(e)!==e)throw Error(c(188))}function y(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(c(188));return t!==e?null:e}for(var a=e,l=t;;){var o=a.return;if(o===null)break;var u=o.alternate;if(u===null){if(l=o.return,l!==null){a=l;continue}break}if(o.child===u.child){for(u=o.child;u;){if(u===a)return m(o),e;if(u===l)return m(o),t;u=u.sibling}throw Error(c(188))}if(a.return!==l.return)a=o,l=u;else{for(var x=!1,w=o.child;w;){if(w===a){x=!0,a=o,l=u;break}if(w===l){x=!0,l=o,a=u;break}w=w.sibling}if(!x){for(w=u.child;w;){if(w===a){x=!0,a=u,l=o;break}if(w===l){x=!0,l=u,a=o;break}w=w.sibling}if(!x)throw Error(c(189))}}if(a.alternate!==l)throw Error(c(190))}if(a.tag!==3)throw Error(c(188));return a.stateNode.current===a?e:t}function p(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=p(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,v=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),j=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),re=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function W(e){return e===null||typeof e!="object"?null:(e=$&&e[$]||e["@@iterator"],typeof e=="function"?e:null)}var B=Symbol.for("react.client.reference");function T(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===B?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case z:return"Fragment";case k:return"Profiler";case A:return"StrictMode";case L:return"Suspense";case q:return"SuspenseList";case X:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case N:return"Portal";case j:return e.displayName||"Context";case M:return(e._context.displayName||"Context")+".Consumer";case _:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Y:return t=e.displayName||null,t!==null?t:T(e.type)||"Memo";case U:t=e._payload,e=e._init;try{return T(e(t))}catch{}}return null}var D=Array.isArray,C=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},Q=[],G=-1;function ee(e){return{current:e}}function P(e){0>G||(e.current=Q[G],Q[G]=null,G--)}function le(e,t){G++,Q[G]=e.current,e.current=t}var ie=ee(null),fe=ee(null),be=ee(null),me=ee(null);function oe(e,t){switch(le(be,t),le(fe,e),le(ie,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Pg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Pg(t),e=eh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}P(ie),le(ie,e)}function ue(){P(ie),P(fe),P(be)}function Se(e){e.memoizedState!==null&&le(me,e);var t=ie.current,a=eh(t,e.type);t!==a&&(le(fe,e),le(ie,a))}function je(e){fe.current===e&&(P(ie),P(fe)),me.current===e&&(P(me),Ql._currentValue=H)}var ye,Ne;function se(e){if(ye===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);ye=t&&t[1]||"",Ne=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ye+e+Ne}var pe=!1;function we(e,t){if(!e||pe)return"";pe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(I){var J=I}Reflect.construct(e,[],ne)}else{try{ne.call()}catch(I){J=I}e.call(ne.prototype)}}else{try{throw Error()}catch(I){J=I}(ne=e())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(I){if(I&&J&&typeof I.stack=="string")return[I.stack,J.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=l.DetermineComponentFrameRoot(),x=u[0],w=u[1];if(x&&w){var R=x.split(`
`),F=w.split(`
`);for(o=l=0;l<R.length&&!R[l].includes("DetermineComponentFrameRoot");)l++;for(;o<F.length&&!F[o].includes("DetermineComponentFrameRoot");)o++;if(l===R.length||o===F.length)for(l=R.length-1,o=F.length-1;1<=l&&0<=o&&R[l]!==F[o];)o--;for(;1<=l&&0<=o;l--,o--)if(R[l]!==F[o]){if(l!==1||o!==1)do if(l--,o--,0>o||R[l]!==F[o]){var te=`
`+R[l].replace(" at new "," at ");return e.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",e.displayName)),te}while(1<=l&&0<=o);break}}}finally{pe=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?se(a):""}function Ye(e,t){switch(e.tag){case 26:case 27:case 5:return se(e.type);case 16:return se("Lazy");case 13:return e.child!==t&&t!==null?se("Suspense Fallback"):se("Suspense");case 19:return se("SuspenseList");case 0:case 15:return we(e.type,!1);case 11:return we(e.type.render,!1);case 1:return we(e.type,!0);case 31:return se("Activity");default:return""}}function Qt(e){try{var t="",a=null;do t+=Ye(e,a),a=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var zt=Object.prototype.hasOwnProperty,$t=n.unstable_scheduleCallback,ma=n.unstable_cancelCallback,Sn=n.unstable_shouldYield,kn=n.unstable_requestPaint,ot=n.unstable_now,ts=n.unstable_getCurrentPriorityLevel,xa=n.unstable_ImmediatePriority,Ya=n.unstable_UserBlockingPriority,Cn=n.unstable_NormalPriority,Do=n.unstable_LowPriority,as=n.unstable_IdlePriority,Oo=n.log,Ro=n.unstable_setDisableYieldValue,zn=null,ht=null;function sa(e){if(typeof Oo=="function"&&Ro(e),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(zn,e)}catch{}}var mt=Math.clz32?Math.clz32:Bo,Ho=Math.log,Lo=Math.LN2;function Bo(e){return e>>>=0,e===0?32:31-(Ho(e)/Lo|0)|0}var ns=256,ss=262144,ls=4194304;function ya(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function rs(e,t,a){var l=e.pendingLanes;if(l===0)return 0;var o=0,u=e.suspendedLanes,x=e.pingedLanes;e=e.warmLanes;var w=l&134217727;return w!==0?(l=w&~u,l!==0?o=ya(l):(x&=w,x!==0?o=ya(x):a||(a=w&~e,a!==0&&(o=ya(a))))):(w=l&~u,w!==0?o=ya(w):x!==0?o=ya(x):a||(a=l&~e,a!==0&&(o=ya(a)))),o===0?0:t!==0&&t!==o&&(t&u)===0&&(u=o&-o,a=t&-t,u>=a||u===32&&(a&4194048)!==0)?t:o}function En(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Uo(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wr(){var e=ls;return ls<<=1,(ls&62914560)===0&&(ls=4194304),e}function nl(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function An(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function qo(e,t,a,l,o,u){var x=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var w=e.entanglements,R=e.expirationTimes,F=e.hiddenUpdates;for(a=x&~a;0<a;){var te=31-mt(a),ne=1<<te;w[te]=0,R[te]=-1;var J=F[te];if(J!==null)for(F[te]=null,te=0;te<J.length;te++){var I=J[te];I!==null&&(I.lane&=-536870913)}a&=~ne}l!==0&&Sr(e,l,0),u!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=u&~(x&~t))}function Sr(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-mt(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function kr(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-mt(a),o=1<<l;o&t|e[l]&t&&(e[l]|=t),a&=~o}}function Cr(e,t){var a=t&-t;return a=(a&42)!==0?1:sl(a),(a&(e.suspendedLanes|t))!==0?0:a}function sl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ll(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function zr(){var e=O.p;return e!==0?e:(e=window.event,e===void 0?32:wh(e.type))}function Er(e,t){var a=O.p;try{return O.p=e,t()}finally{O.p=a}}var la=Math.random().toString(36).slice(2),st="__reactFiber$"+la,gt="__reactProps$"+la,pa="__reactContainer$"+la,is="__reactEvents$"+la,Ar="__reactListeners$"+la,Vo="__reactHandles$"+la,Tr="__reactResources$"+la,Tn="__reactMarker$"+la;function rl(e){delete e[st],delete e[gt],delete e[is],delete e[Ar],delete e[Vo]}function Ga(e){var t=e[st];if(t)return t;for(var a=e.parentNode;a;){if(t=a[pa]||a[st]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=ih(e);e!==null;){if(a=e[st])return a;e=ih(e)}return t}e=a,a=e.parentNode}return null}function Xa(e){if(e=e[st]||e[pa]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Za(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(c(33))}function Qa(e){var t=e[Tr];return t||(t=e[Tr]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ie(e){e[Tn]=!0}var _r=new Set,Mr={};function ba(e,t){$a(e,t),$a(e+"Capture",t)}function $a(e,t){for(Mr[e]=t,e=0;e<t.length;e++)_r.add(t[e])}var Yo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),il={},Dr={};function Go(e){return zt.call(Dr,e)?!0:zt.call(il,e)?!1:Yo.test(e)?Dr[e]=!0:(il[e]=!0,!1)}function os(e,t,a){if(Go(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function cs(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Kt(e,t,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+l)}}function bt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Or(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xo(e,t,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var o=l.get,u=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(x){a=""+x,u.call(this,x)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(x){a=""+x},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function us(e){if(!e._valueTracker){var t=Or(e)?"checked":"value";e._valueTracker=Xo(e,t,""+e[t])}}function Rr(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=Or(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function _n(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Zo=/[\n"\\]/g;function vt(e){return e.replace(Zo,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Mn(e,t,a,l,o,u,x,w){e.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.type=x:e.removeAttribute("type"),t!=null?x==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+bt(t)):e.value!==""+bt(t)&&(e.value=""+bt(t)):x!=="submit"&&x!=="reset"||e.removeAttribute("value"),t!=null?ol(e,x,bt(t)):a!=null?ol(e,x,bt(a)):l!=null&&e.removeAttribute("value"),o==null&&u!=null&&(e.defaultChecked=!!u),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+bt(w):e.removeAttribute("name")}function Hr(e,t,a,l,o,u,x,w){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||a!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){us(e);return}a=a!=null?""+bt(a):"",t=t!=null?""+bt(t):a,w||t===e.value||(e.value=t),e.defaultValue=t}l=l??o,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=w?e.checked:!!l,e.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(e.name=x),us(e)}function ol(e,t,a){t==="number"&&_n(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function va(e,t,a,l){if(e=e.options,t){t={};for(var o=0;o<a.length;o++)t["$"+a[o]]=!0;for(a=0;a<e.length;a++)o=t.hasOwnProperty("$"+e[a].value),e[a].selected!==o&&(e[a].selected=o),o&&l&&(e[a].defaultSelected=!0)}else{for(a=""+bt(a),t=null,o=0;o<e.length;o++){if(e[o].value===a){e[o].selected=!0,l&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function $d(e,t,a){if(t!=null&&(t=""+bt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+bt(a):""}function Kd(e,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(c(92));if(D(l)){if(1<l.length)throw Error(c(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=bt(t),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),us(e)}function ds(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Yy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fd(e,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,a):typeof a!="number"||a===0||Yy.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Jd(e,t,a){if(t!=null&&typeof t!="object")throw Error(c(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var o in t)l=t[o],t.hasOwnProperty(o)&&a[o]!==l&&Fd(e,o,l)}else for(var u in t)t.hasOwnProperty(u)&&Fd(e,u,t[u])}function Qo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Lr(e){return Xy.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Na(){}var $o=null;function Ko(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fs=null,gs=null;function Wd(e){var t=Xa(e);if(t&&(e=t.stateNode)){var a=e[gt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Mn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+vt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var o=l[gt]||null;if(!o)throw Error(c(90));Mn(l,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===e.form&&Rr(l)}break e;case"textarea":$d(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&va(e,!!a.multiple,t,!1)}}}var Fo=!1;function Id(e,t,a){if(Fo)return e(t,a);Fo=!0;try{var l=e(t);return l}finally{if(Fo=!1,(fs!==null||gs!==null)&&(Si(),fs&&(t=fs,e=gs,gs=fs=null,Wd(t),e)))for(t=0;t<e.length;t++)Wd(e[t])}}function cl(e,t){var a=e.stateNode;if(a===null)return null;var l=a[gt]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(c(231,t,typeof a));return a}var ja=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jo=!1;if(ja)try{var ul={};Object.defineProperty(ul,"passive",{get:function(){Jo=!0}}),window.addEventListener("test",ul,ul),window.removeEventListener("test",ul,ul)}catch{Jo=!1}var Ka=null,Wo=null,Br=null;function Pd(){if(Br)return Br;var e,t=Wo,a=t.length,l,o="value"in Ka?Ka.value:Ka.textContent,u=o.length;for(e=0;e<a&&t[e]===o[e];e++);var x=a-e;for(l=1;l<=x&&t[a-l]===o[u-l];l++);return Br=o.slice(e,1<l?1-l:void 0)}function Ur(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qr(){return!0}function ef(){return!1}function Nt(e){function t(a,l,o,u,x){this._reactName=a,this._targetInst=o,this.type=l,this.nativeEvent=u,this.target=x,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(a=e[w],this[w]=a?a(u):u[w]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?qr:ef,this.isPropagationStopped=ef,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=qr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=qr)},persist:function(){},isPersistent:qr}),t}var Dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vr=Nt(Dn),dl=b({},Dn,{view:0,detail:0}),Zy=Nt(dl),Io,Po,fl,Yr=b({},dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fl&&(fl&&e.type==="mousemove"?(Io=e.screenX-fl.screenX,Po=e.screenY-fl.screenY):Po=Io=0,fl=e),Io)},movementY:function(e){return"movementY"in e?e.movementY:Po}}),tf=Nt(Yr),Qy=b({},Yr,{dataTransfer:0}),$y=Nt(Qy),Ky=b({},dl,{relatedTarget:0}),ec=Nt(Ky),Fy=b({},Dn,{animationName:0,elapsedTime:0,pseudoElement:0}),Jy=Nt(Fy),Wy=b({},Dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Iy=Nt(Wy),Py=b({},Dn,{data:0}),af=Nt(Py),ep={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ap={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function np(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ap[e])?!!t[e]:!1}function tc(){return np}var sp=b({},dl,{key:function(e){if(e.key){var t=ep[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ur(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tc,charCode:function(e){return e.type==="keypress"?Ur(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ur(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),lp=Nt(sp),rp=b({},Yr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nf=Nt(rp),ip=b({},dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tc}),op=Nt(ip),cp=b({},Dn,{propertyName:0,elapsedTime:0,pseudoElement:0}),up=Nt(cp),dp=b({},Yr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fp=Nt(dp),gp=b({},Dn,{newState:0,oldState:0}),hp=Nt(gp),mp=[9,13,27,32],ac=ja&&"CompositionEvent"in window,gl=null;ja&&"documentMode"in document&&(gl=document.documentMode);var xp=ja&&"TextEvent"in window&&!gl,sf=ja&&(!ac||gl&&8<gl&&11>=gl),lf=" ",rf=!1;function of(e,t){switch(e){case"keyup":return mp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hs=!1;function yp(e,t){switch(e){case"compositionend":return cf(t);case"keypress":return t.which!==32?null:(rf=!0,lf);case"textInput":return e=t.data,e===lf&&rf?null:e;default:return null}}function pp(e,t){if(hs)return e==="compositionend"||!ac&&of(e,t)?(e=Pd(),Br=Wo=Ka=null,hs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sf&&t.locale!=="ko"?null:t.data;default:return null}}var bp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!bp[e.type]:t==="textarea"}function df(e,t,a,l){fs?gs?gs.push(l):gs=[l]:fs=l,t=_i(t,"onChange"),0<t.length&&(a=new Vr("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var hl=null,ml=null;function vp(e){$g(e,0)}function Gr(e){var t=Za(e);if(Rr(t))return e}function ff(e,t){if(e==="change")return t}var gf=!1;if(ja){var nc;if(ja){var sc="oninput"in document;if(!sc){var hf=document.createElement("div");hf.setAttribute("oninput","return;"),sc=typeof hf.oninput=="function"}nc=sc}else nc=!1;gf=nc&&(!document.documentMode||9<document.documentMode)}function mf(){hl&&(hl.detachEvent("onpropertychange",xf),ml=hl=null)}function xf(e){if(e.propertyName==="value"&&Gr(ml)){var t=[];df(t,ml,e,Ko(e)),Id(vp,t)}}function Np(e,t,a){e==="focusin"?(mf(),hl=t,ml=a,hl.attachEvent("onpropertychange",xf)):e==="focusout"&&mf()}function jp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Gr(ml)}function wp(e,t){if(e==="click")return Gr(t)}function Sp(e,t){if(e==="input"||e==="change")return Gr(t)}function kp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Et=typeof Object.is=="function"?Object.is:kp;function xl(e,t){if(Et(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var o=a[l];if(!zt.call(t,o)||!Et(e[o],t[o]))return!1}return!0}function yf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pf(e,t){var a=yf(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=yf(a)}}function bf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=_n(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=_n(e.document)}return t}function lc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Cp=ja&&"documentMode"in document&&11>=document.documentMode,ms=null,rc=null,yl=null,ic=!1;function Nf(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ic||ms==null||ms!==_n(l)||(l=ms,"selectionStart"in l&&lc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),yl&&xl(yl,l)||(yl=l,l=_i(rc,"onSelect"),0<l.length&&(t=new Vr("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=ms)))}function On(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var xs={animationend:On("Animation","AnimationEnd"),animationiteration:On("Animation","AnimationIteration"),animationstart:On("Animation","AnimationStart"),transitionrun:On("Transition","TransitionRun"),transitionstart:On("Transition","TransitionStart"),transitioncancel:On("Transition","TransitionCancel"),transitionend:On("Transition","TransitionEnd")},oc={},jf={};ja&&(jf=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function Rn(e){if(oc[e])return oc[e];if(!xs[e])return e;var t=xs[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in jf)return oc[e]=t[a];return e}var wf=Rn("animationend"),Sf=Rn("animationiteration"),kf=Rn("animationstart"),zp=Rn("transitionrun"),Ep=Rn("transitionstart"),Ap=Rn("transitioncancel"),Cf=Rn("transitionend"),zf=new Map,cc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cc.push("scrollEnd");function Ft(e,t){zf.set(e,t),ba(t,[e])}var Xr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Lt=[],ys=0,uc=0;function Zr(){for(var e=ys,t=uc=ys=0;t<e;){var a=Lt[t];Lt[t++]=null;var l=Lt[t];Lt[t++]=null;var o=Lt[t];Lt[t++]=null;var u=Lt[t];if(Lt[t++]=null,l!==null&&o!==null){var x=l.pending;x===null?o.next=o:(o.next=x.next,x.next=o),l.pending=o}u!==0&&Ef(a,o,u)}}function Qr(e,t,a,l){Lt[ys++]=e,Lt[ys++]=t,Lt[ys++]=a,Lt[ys++]=l,uc|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function dc(e,t,a,l){return Qr(e,t,a,l),$r(e)}function Hn(e,t){return Qr(e,null,null,t),$r(e)}function Ef(e,t,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var o=!1,u=e.return;u!==null;)u.childLanes|=a,l=u.alternate,l!==null&&(l.childLanes|=a),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(o=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,o&&t!==null&&(o=31-mt(a),e=u.hiddenUpdates,l=e[o],l===null?e[o]=[t]:l.push(t),t.lane=a|536870912),u):null}function $r(e){if(50<Ul)throw Ul=0,vu=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ps={};function Tp(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function At(e,t,a,l){return new Tp(e,t,a,l)}function fc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wa(e,t){var a=e.alternate;return a===null?(a=At(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Af(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Kr(e,t,a,l,o,u){var x=0;if(l=e,typeof e=="function")fc(e)&&(x=1);else if(typeof e=="string")x=Rb(e,a,ie.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case X:return e=At(31,a,t,o),e.elementType=X,e.lanes=u,e;case z:return Ln(a.children,o,u,t);case A:x=8,o|=24;break;case k:return e=At(12,a,t,o|2),e.elementType=k,e.lanes=u,e;case L:return e=At(13,a,t,o),e.elementType=L,e.lanes=u,e;case q:return e=At(19,a,t,o),e.elementType=q,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case j:x=10;break e;case M:x=9;break e;case _:x=11;break e;case Y:x=14;break e;case U:x=16,l=null;break e}x=29,a=Error(c(130,e===null?"null":typeof e,"")),l=null}return t=At(x,a,t,o),t.elementType=e,t.type=l,t.lanes=u,t}function Ln(e,t,a,l){return e=At(7,e,l,t),e.lanes=a,e}function gc(e,t,a){return e=At(6,e,null,t),e.lanes=a,e}function Tf(e){var t=At(18,null,null,0);return t.stateNode=e,t}function hc(e,t,a){return t=At(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var _f=new WeakMap;function Bt(e,t){if(typeof e=="object"&&e!==null){var a=_f.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Qt(t)},_f.set(e,t),t)}return{value:e,source:t,stack:Qt(t)}}var bs=[],vs=0,Fr=null,pl=0,Ut=[],qt=0,Fa=null,ra=1,ia="";function Sa(e,t){bs[vs++]=pl,bs[vs++]=Fr,Fr=e,pl=t}function Mf(e,t,a){Ut[qt++]=ra,Ut[qt++]=ia,Ut[qt++]=Fa,Fa=e;var l=ra;e=ia;var o=32-mt(l)-1;l&=~(1<<o),a+=1;var u=32-mt(t)+o;if(30<u){var x=o-o%5;u=(l&(1<<x)-1).toString(32),l>>=x,o-=x,ra=1<<32-mt(t)+o|a<<o|l,ia=u+e}else ra=1<<u|a<<o|l,ia=e}function mc(e){e.return!==null&&(Sa(e,1),Mf(e,1,0))}function xc(e){for(;e===Fr;)Fr=bs[--vs],bs[vs]=null,pl=bs[--vs],bs[vs]=null;for(;e===Fa;)Fa=Ut[--qt],Ut[qt]=null,ia=Ut[--qt],Ut[qt]=null,ra=Ut[--qt],Ut[qt]=null}function Df(e,t){Ut[qt++]=ra,Ut[qt++]=ia,Ut[qt++]=Fa,ra=t.id,ia=t.overflow,Fa=e}var ct=null,Ge=null,_e=!1,Ja=null,Vt=!1,yc=Error(c(519));function Wa(e){var t=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bl(Bt(t,e)),yc}function Of(e){var t=e.stateNode,a=e.type,l=e.memoizedProps;switch(t[st]=e,t[gt]=l,a){case"dialog":Ee("cancel",t),Ee("close",t);break;case"iframe":case"object":case"embed":Ee("load",t);break;case"video":case"audio":for(a=0;a<Vl.length;a++)Ee(Vl[a],t);break;case"source":Ee("error",t);break;case"img":case"image":case"link":Ee("error",t),Ee("load",t);break;case"details":Ee("toggle",t);break;case"input":Ee("invalid",t),Hr(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ee("invalid",t);break;case"textarea":Ee("invalid",t),Kd(t,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||Wg(t.textContent,a)?(l.popover!=null&&(Ee("beforetoggle",t),Ee("toggle",t)),l.onScroll!=null&&Ee("scroll",t),l.onScrollEnd!=null&&Ee("scrollend",t),l.onClick!=null&&(t.onclick=Na),t=!0):t=!1,t||Wa(e,!0)}function Rf(e){for(ct=e.return;ct;)switch(ct.tag){case 5:case 31:case 13:Vt=!1;return;case 27:case 3:Vt=!0;return;default:ct=ct.return}}function Ns(e){if(e!==ct)return!1;if(!_e)return Rf(e),_e=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Ru(e.type,e.memoizedProps)),a=!a),a&&Ge&&Wa(e),Rf(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));Ge=rh(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));Ge=rh(e)}else t===27?(t=Ge,fn(e.type)?(e=qu,qu=null,Ge=e):Ge=t):Ge=ct?Gt(e.stateNode.nextSibling):null;return!0}function Bn(){Ge=ct=null,_e=!1}function pc(){var e=Ja;return e!==null&&(kt===null?kt=e:kt.push.apply(kt,e),Ja=null),e}function bl(e){Ja===null?Ja=[e]:Ja.push(e)}var bc=ee(null),Un=null,ka=null;function Ia(e,t,a){le(bc,t._currentValue),t._currentValue=a}function Ca(e){e._currentValue=bc.current,P(bc)}function vc(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function Nc(e,t,a,l){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){var x=o.child;u=u.firstContext;e:for(;u!==null;){var w=u;u=o;for(var R=0;R<t.length;R++)if(w.context===t[R]){u.lanes|=a,w=u.alternate,w!==null&&(w.lanes|=a),vc(u.return,a,e),l||(x=null);break e}u=w.next}}else if(o.tag===18){if(x=o.return,x===null)throw Error(c(341));x.lanes|=a,u=x.alternate,u!==null&&(u.lanes|=a),vc(x,a,e),x=null}else x=o.child;if(x!==null)x.return=o;else for(x=o;x!==null;){if(x===e){x=null;break}if(o=x.sibling,o!==null){o.return=x.return,x=o;break}x=x.return}o=x}}function js(e,t,a,l){e=null;for(var o=t,u=!1;o!==null;){if(!u){if((o.flags&524288)!==0)u=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var x=o.alternate;if(x===null)throw Error(c(387));if(x=x.memoizedProps,x!==null){var w=o.type;Et(o.pendingProps.value,x.value)||(e!==null?e.push(w):e=[w])}}else if(o===me.current){if(x=o.alternate,x===null)throw Error(c(387));x.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(Ql):e=[Ql])}o=o.return}e!==null&&Nc(t,e,a,l),t.flags|=262144}function Jr(e){for(e=e.firstContext;e!==null;){if(!Et(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function qn(e){Un=e,ka=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ut(e){return Hf(Un,e)}function Wr(e,t){return Un===null&&qn(e),Hf(e,t)}function Hf(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},ka===null){if(e===null)throw Error(c(308));ka=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ka=ka.next=t;return a}var _p=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Mp=n.unstable_scheduleCallback,Dp=n.unstable_NormalPriority,Pe={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jc(){return{controller:new _p,data:new Map,refCount:0}}function vl(e){e.refCount--,e.refCount===0&&Mp(Dp,function(){e.controller.abort()})}var Nl=null,wc=0,ws=0,Ss=null;function Op(e,t){if(Nl===null){var a=Nl=[];wc=0,ws=Cu(),Ss={status:"pending",value:void 0,then:function(l){a.push(l)}}}return wc++,t.then(Lf,Lf),t}function Lf(){if(--wc===0&&Nl!==null){Ss!==null&&(Ss.status="fulfilled");var e=Nl;Nl=null,ws=0,Ss=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Rp(e,t){var a=[],l={status:"pending",value:null,reason:null,then:function(o){a.push(o)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var o=0;o<a.length;o++)(0,a[o])(t)},function(o){for(l.status="rejected",l.reason=o,o=0;o<a.length;o++)(0,a[o])(void 0)}),l}var Bf=C.S;C.S=function(e,t){Ng=ot(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Op(e,t),Bf!==null&&Bf(e,t)};var Vn=ee(null);function Sc(){var e=Vn.current;return e!==null?e:Ve.pooledCache}function Ir(e,t){t===null?le(Vn,Vn.current):le(Vn,t.pool)}function Uf(){var e=Sc();return e===null?null:{parent:Pe._currentValue,pool:e}}var ks=Error(c(460)),kc=Error(c(474)),Pr=Error(c(542)),ei={then:function(){}};function qf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Vf(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Na,Na),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Gf(e),e;default:if(typeof t.status=="string")t.then(Na,Na);else{if(e=Ve,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=l}},function(l){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Gf(e),e}throw Gn=t,ks}}function Yn(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Gn=a,ks):a}}var Gn=null;function Yf(){if(Gn===null)throw Error(c(459));var e=Gn;return Gn=null,e}function Gf(e){if(e===ks||e===Pr)throw Error(c(483))}var Cs=null,jl=0;function ti(e){var t=jl;return jl+=1,Cs===null&&(Cs=[]),Vf(Cs,e,t)}function wl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ai(e,t){throw t.$$typeof===v?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Xf(e){function t(Z,V){if(e){var K=Z.deletions;K===null?(Z.deletions=[V],Z.flags|=16):K.push(V)}}function a(Z,V){if(!e)return null;for(;V!==null;)t(Z,V),V=V.sibling;return null}function l(Z){for(var V=new Map;Z!==null;)Z.key!==null?V.set(Z.key,Z):V.set(Z.index,Z),Z=Z.sibling;return V}function o(Z,V){return Z=wa(Z,V),Z.index=0,Z.sibling=null,Z}function u(Z,V,K){return Z.index=K,e?(K=Z.alternate,K!==null?(K=K.index,K<V?(Z.flags|=67108866,V):K):(Z.flags|=67108866,V)):(Z.flags|=1048576,V)}function x(Z){return e&&Z.alternate===null&&(Z.flags|=67108866),Z}function w(Z,V,K,ae){return V===null||V.tag!==6?(V=gc(K,Z.mode,ae),V.return=Z,V):(V=o(V,K),V.return=Z,V)}function R(Z,V,K,ae){var xe=K.type;return xe===z?te(Z,V,K.props.children,ae,K.key):V!==null&&(V.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===U&&Yn(xe)===V.type)?(V=o(V,K.props),wl(V,K),V.return=Z,V):(V=Kr(K.type,K.key,K.props,null,Z.mode,ae),wl(V,K),V.return=Z,V)}function F(Z,V,K,ae){return V===null||V.tag!==4||V.stateNode.containerInfo!==K.containerInfo||V.stateNode.implementation!==K.implementation?(V=hc(K,Z.mode,ae),V.return=Z,V):(V=o(V,K.children||[]),V.return=Z,V)}function te(Z,V,K,ae,xe){return V===null||V.tag!==7?(V=Ln(K,Z.mode,ae,xe),V.return=Z,V):(V=o(V,K),V.return=Z,V)}function ne(Z,V,K){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=gc(""+V,Z.mode,K),V.return=Z,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case S:return K=Kr(V.type,V.key,V.props,null,Z.mode,K),wl(K,V),K.return=Z,K;case N:return V=hc(V,Z.mode,K),V.return=Z,V;case U:return V=Yn(V),ne(Z,V,K)}if(D(V)||W(V))return V=Ln(V,Z.mode,K,null),V.return=Z,V;if(typeof V.then=="function")return ne(Z,ti(V),K);if(V.$$typeof===j)return ne(Z,Wr(Z,V),K);ai(Z,V)}return null}function J(Z,V,K,ae){var xe=V!==null?V.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return xe!==null?null:w(Z,V,""+K,ae);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case S:return K.key===xe?R(Z,V,K,ae):null;case N:return K.key===xe?F(Z,V,K,ae):null;case U:return K=Yn(K),J(Z,V,K,ae)}if(D(K)||W(K))return xe!==null?null:te(Z,V,K,ae,null);if(typeof K.then=="function")return J(Z,V,ti(K),ae);if(K.$$typeof===j)return J(Z,V,Wr(Z,K),ae);ai(Z,K)}return null}function I(Z,V,K,ae,xe){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Z=Z.get(K)||null,w(V,Z,""+ae,xe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case S:return Z=Z.get(ae.key===null?K:ae.key)||null,R(V,Z,ae,xe);case N:return Z=Z.get(ae.key===null?K:ae.key)||null,F(V,Z,ae,xe);case U:return ae=Yn(ae),I(Z,V,K,ae,xe)}if(D(ae)||W(ae))return Z=Z.get(K)||null,te(V,Z,ae,xe,null);if(typeof ae.then=="function")return I(Z,V,K,ti(ae),xe);if(ae.$$typeof===j)return I(Z,V,K,Wr(V,ae),xe);ai(V,ae)}return null}function de(Z,V,K,ae){for(var xe=null,De=null,ge=V,Ce=V=0,Te=null;ge!==null&&Ce<K.length;Ce++){ge.index>Ce?(Te=ge,ge=null):Te=ge.sibling;var Oe=J(Z,ge,K[Ce],ae);if(Oe===null){ge===null&&(ge=Te);break}e&&ge&&Oe.alternate===null&&t(Z,ge),V=u(Oe,V,Ce),De===null?xe=Oe:De.sibling=Oe,De=Oe,ge=Te}if(Ce===K.length)return a(Z,ge),_e&&Sa(Z,Ce),xe;if(ge===null){for(;Ce<K.length;Ce++)ge=ne(Z,K[Ce],ae),ge!==null&&(V=u(ge,V,Ce),De===null?xe=ge:De.sibling=ge,De=ge);return _e&&Sa(Z,Ce),xe}for(ge=l(ge);Ce<K.length;Ce++)Te=I(ge,Z,Ce,K[Ce],ae),Te!==null&&(e&&Te.alternate!==null&&ge.delete(Te.key===null?Ce:Te.key),V=u(Te,V,Ce),De===null?xe=Te:De.sibling=Te,De=Te);return e&&ge.forEach(function(yn){return t(Z,yn)}),_e&&Sa(Z,Ce),xe}function ve(Z,V,K,ae){if(K==null)throw Error(c(151));for(var xe=null,De=null,ge=V,Ce=V=0,Te=null,Oe=K.next();ge!==null&&!Oe.done;Ce++,Oe=K.next()){ge.index>Ce?(Te=ge,ge=null):Te=ge.sibling;var yn=J(Z,ge,Oe.value,ae);if(yn===null){ge===null&&(ge=Te);break}e&&ge&&yn.alternate===null&&t(Z,ge),V=u(yn,V,Ce),De===null?xe=yn:De.sibling=yn,De=yn,ge=Te}if(Oe.done)return a(Z,ge),_e&&Sa(Z,Ce),xe;if(ge===null){for(;!Oe.done;Ce++,Oe=K.next())Oe=ne(Z,Oe.value,ae),Oe!==null&&(V=u(Oe,V,Ce),De===null?xe=Oe:De.sibling=Oe,De=Oe);return _e&&Sa(Z,Ce),xe}for(ge=l(ge);!Oe.done;Ce++,Oe=K.next())Oe=I(ge,Z,Ce,Oe.value,ae),Oe!==null&&(e&&Oe.alternate!==null&&ge.delete(Oe.key===null?Ce:Oe.key),V=u(Oe,V,Ce),De===null?xe=Oe:De.sibling=Oe,De=Oe);return e&&ge.forEach(function(Qb){return t(Z,Qb)}),_e&&Sa(Z,Ce),xe}function qe(Z,V,K,ae){if(typeof K=="object"&&K!==null&&K.type===z&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case S:e:{for(var xe=K.key;V!==null;){if(V.key===xe){if(xe=K.type,xe===z){if(V.tag===7){a(Z,V.sibling),ae=o(V,K.props.children),ae.return=Z,Z=ae;break e}}else if(V.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===U&&Yn(xe)===V.type){a(Z,V.sibling),ae=o(V,K.props),wl(ae,K),ae.return=Z,Z=ae;break e}a(Z,V);break}else t(Z,V);V=V.sibling}K.type===z?(ae=Ln(K.props.children,Z.mode,ae,K.key),ae.return=Z,Z=ae):(ae=Kr(K.type,K.key,K.props,null,Z.mode,ae),wl(ae,K),ae.return=Z,Z=ae)}return x(Z);case N:e:{for(xe=K.key;V!==null;){if(V.key===xe)if(V.tag===4&&V.stateNode.containerInfo===K.containerInfo&&V.stateNode.implementation===K.implementation){a(Z,V.sibling),ae=o(V,K.children||[]),ae.return=Z,Z=ae;break e}else{a(Z,V);break}else t(Z,V);V=V.sibling}ae=hc(K,Z.mode,ae),ae.return=Z,Z=ae}return x(Z);case U:return K=Yn(K),qe(Z,V,K,ae)}if(D(K))return de(Z,V,K,ae);if(W(K)){if(xe=W(K),typeof xe!="function")throw Error(c(150));return K=xe.call(K),ve(Z,V,K,ae)}if(typeof K.then=="function")return qe(Z,V,ti(K),ae);if(K.$$typeof===j)return qe(Z,V,Wr(Z,K),ae);ai(Z,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,V!==null&&V.tag===6?(a(Z,V.sibling),ae=o(V,K),ae.return=Z,Z=ae):(a(Z,V),ae=gc(K,Z.mode,ae),ae.return=Z,Z=ae),x(Z)):a(Z,V)}return function(Z,V,K,ae){try{jl=0;var xe=qe(Z,V,K,ae);return Cs=null,xe}catch(ge){if(ge===ks||ge===Pr)throw ge;var De=At(29,ge,null,Z.mode);return De.lanes=ae,De.return=Z,De}}}var Xn=Xf(!0),Zf=Xf(!1),Pa=!1;function Cc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function en(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function tn(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Re&2)!==0){var o=l.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),l.pending=t,t=$r(e),Ef(e,null,a),t}return Qr(e,l,t,a),$r(e)}function Sl(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,kr(e,a)}}function Ec(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var o=null,u=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};u===null?o=u=x:u=u.next=x,a=a.next}while(a!==null);u===null?o=u=t:u=u.next=t}else o=u=t;a={baseState:l.baseState,firstBaseUpdate:o,lastBaseUpdate:u,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Ac=!1;function kl(){if(Ac){var e=Ss;if(e!==null)throw e}}function Cl(e,t,a,l){Ac=!1;var o=e.updateQueue;Pa=!1;var u=o.firstBaseUpdate,x=o.lastBaseUpdate,w=o.shared.pending;if(w!==null){o.shared.pending=null;var R=w,F=R.next;R.next=null,x===null?u=F:x.next=F,x=R;var te=e.alternate;te!==null&&(te=te.updateQueue,w=te.lastBaseUpdate,w!==x&&(w===null?te.firstBaseUpdate=F:w.next=F,te.lastBaseUpdate=R))}if(u!==null){var ne=o.baseState;x=0,te=F=R=null,w=u;do{var J=w.lane&-536870913,I=J!==w.lane;if(I?(Ae&J)===J:(l&J)===J){J!==0&&J===ws&&(Ac=!0),te!==null&&(te=te.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var de=e,ve=w;J=t;var qe=a;switch(ve.tag){case 1:if(de=ve.payload,typeof de=="function"){ne=de.call(qe,ne,J);break e}ne=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=ve.payload,J=typeof de=="function"?de.call(qe,ne,J):de,J==null)break e;ne=b({},ne,J);break e;case 2:Pa=!0}}J=w.callback,J!==null&&(e.flags|=64,I&&(e.flags|=8192),I=o.callbacks,I===null?o.callbacks=[J]:I.push(J))}else I={lane:J,tag:w.tag,payload:w.payload,callback:w.callback,next:null},te===null?(F=te=I,R=ne):te=te.next=I,x|=J;if(w=w.next,w===null){if(w=o.shared.pending,w===null)break;I=w,w=I.next,I.next=null,o.lastBaseUpdate=I,o.shared.pending=null}}while(!0);te===null&&(R=ne),o.baseState=R,o.firstBaseUpdate=F,o.lastBaseUpdate=te,u===null&&(o.shared.lanes=0),rn|=x,e.lanes=x,e.memoizedState=ne}}function Qf(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function $f(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Qf(a[e],t)}var zs=ee(null),ni=ee(0);function Kf(e,t){e=Ra,le(ni,e),le(zs,t),Ra=e|t.baseLanes}function Tc(){le(ni,Ra),le(zs,zs.current)}function _c(){Ra=ni.current,P(zs),P(ni)}var Tt=ee(null),Yt=null;function an(e){var t=e.alternate;le(Je,Je.current&1),le(Tt,e),Yt===null&&(t===null||zs.current!==null||t.memoizedState!==null)&&(Yt=e)}function Mc(e){le(Je,Je.current),le(Tt,e),Yt===null&&(Yt=e)}function Ff(e){e.tag===22?(le(Je,Je.current),le(Tt,e),Yt===null&&(Yt=e)):nn()}function nn(){le(Je,Je.current),le(Tt,Tt.current)}function _t(e){P(Tt),Yt===e&&(Yt=null),P(Je)}var Je=ee(0);function si(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Bu(a)||Uu(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var za=0,ke=null,Be=null,et=null,li=!1,Es=!1,Zn=!1,ri=0,zl=0,As=null,Hp=0;function Ke(){throw Error(c(321))}function Dc(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Et(e[a],t[a]))return!1;return!0}function Oc(e,t,a,l,o,u){return za=u,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,C.H=e===null||e.memoizedState===null?M0:Fc,Zn=!1,u=a(l,o),Zn=!1,Es&&(u=Wf(t,a,l,o)),Jf(e),u}function Jf(e){C.H=Tl;var t=Be!==null&&Be.next!==null;if(za=0,et=Be=ke=null,li=!1,zl=0,As=null,t)throw Error(c(300));e===null||tt||(e=e.dependencies,e!==null&&Jr(e)&&(tt=!0))}function Wf(e,t,a,l){ke=e;var o=0;do{if(Es&&(As=null),zl=0,Es=!1,25<=o)throw Error(c(301));if(o+=1,et=Be=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}C.H=D0,u=t(a,l)}while(Es);return u}function Lp(){var e=C.H,t=e.useState()[0];return t=typeof t.then=="function"?El(t):t,e=e.useState()[0],(Be!==null?Be.memoizedState:null)!==e&&(ke.flags|=1024),t}function Rc(){var e=ri!==0;return ri=0,e}function Hc(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Lc(e){if(li){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}li=!1}za=0,et=Be=ke=null,Es=!1,zl=ri=0,As=null}function xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?ke.memoizedState=et=e:et=et.next=e,et}function We(){if(Be===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=et===null?ke.memoizedState:et.next;if(t!==null)et=t,Be=e;else{if(e===null)throw ke.alternate===null?Error(c(467)):Error(c(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},et===null?ke.memoizedState=et=e:et=et.next=e}return et}function ii(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function El(e){var t=zl;return zl+=1,As===null&&(As=[]),e=Vf(As,e,t),t=ke,(et===null?t.memoizedState:et.next)===null&&(t=t.alternate,C.H=t===null||t.memoizedState===null?M0:Fc),e}function oi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return El(e);if(e.$$typeof===j)return ut(e)}throw Error(c(438,String(e)))}function Bc(e){var t=null,a=ke.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=ke.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=ii(),ke.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),l=0;l<e;l++)a[l]=re;return t.index++,a}function Ea(e,t){return typeof t=="function"?t(e):t}function ci(e){var t=We();return Uc(t,Be,e)}function Uc(e,t,a){var l=e.queue;if(l===null)throw Error(c(311));l.lastRenderedReducer=a;var o=e.baseQueue,u=l.pending;if(u!==null){if(o!==null){var x=o.next;o.next=u.next,u.next=x}t.baseQueue=o=u,l.pending=null}if(u=e.baseState,o===null)e.memoizedState=u;else{t=o.next;var w=x=null,R=null,F=t,te=!1;do{var ne=F.lane&-536870913;if(ne!==F.lane?(Ae&ne)===ne:(za&ne)===ne){var J=F.revertLane;if(J===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ne===ws&&(te=!0);else if((za&J)===J){F=F.next,J===ws&&(te=!0);continue}else ne={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},R===null?(w=R=ne,x=u):R=R.next=ne,ke.lanes|=J,rn|=J;ne=F.action,Zn&&a(u,ne),u=F.hasEagerState?F.eagerState:a(u,ne)}else J={lane:ne,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},R===null?(w=R=J,x=u):R=R.next=J,ke.lanes|=ne,rn|=ne;F=F.next}while(F!==null&&F!==t);if(R===null?x=u:R.next=w,!Et(u,e.memoizedState)&&(tt=!0,te&&(a=Ss,a!==null)))throw a;e.memoizedState=u,e.baseState=x,e.baseQueue=R,l.lastRenderedState=u}return o===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function qc(e){var t=We(),a=t.queue;if(a===null)throw Error(c(311));a.lastRenderedReducer=e;var l=a.dispatch,o=a.pending,u=t.memoizedState;if(o!==null){a.pending=null;var x=o=o.next;do u=e(u,x.action),x=x.next;while(x!==o);Et(u,t.memoizedState)||(tt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),a.lastRenderedState=u}return[u,l]}function If(e,t,a){var l=ke,o=We(),u=_e;if(u){if(a===void 0)throw Error(c(407));a=a()}else a=t();var x=!Et((Be||o).memoizedState,a);if(x&&(o.memoizedState=a,tt=!0),o=o.queue,Gc(t0.bind(null,l,o,e),[e]),o.getSnapshot!==t||x||et!==null&&et.memoizedState.tag&1){if(l.flags|=2048,Ts(9,{destroy:void 0},e0.bind(null,l,o,a,t),null),Ve===null)throw Error(c(349));u||(za&127)!==0||Pf(l,t,a)}return a}function Pf(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ke.updateQueue,t===null?(t=ii(),ke.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function e0(e,t,a,l){t.value=a,t.getSnapshot=l,a0(t)&&n0(e)}function t0(e,t,a){return a(function(){a0(t)&&n0(e)})}function a0(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Et(e,a)}catch{return!0}}function n0(e){var t=Hn(e,2);t!==null&&Ct(t,e,2)}function Vc(e){var t=xt();if(typeof e=="function"){var a=e;if(e=a(),Zn){sa(!0);try{a()}finally{sa(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:e},t}function s0(e,t,a,l){return e.baseState=a,Uc(e,Be,typeof l=="function"?l:Ea)}function Bp(e,t,a,l,o){if(fi(e))throw Error(c(485));if(e=t.action,e!==null){var u={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){u.listeners.push(x)}};C.T!==null?a(!0):u.isTransition=!1,l(u),a=t.pending,a===null?(u.next=t.pending=u,l0(t,u)):(u.next=a.next,t.pending=a.next=u)}}function l0(e,t){var a=t.action,l=t.payload,o=e.state;if(t.isTransition){var u=C.T,x={};C.T=x;try{var w=a(o,l),R=C.S;R!==null&&R(x,w),r0(e,t,w)}catch(F){Yc(e,t,F)}finally{u!==null&&x.types!==null&&(u.types=x.types),C.T=u}}else try{u=a(o,l),r0(e,t,u)}catch(F){Yc(e,t,F)}}function r0(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){i0(e,t,l)},function(l){return Yc(e,t,l)}):i0(e,t,a)}function i0(e,t,a){t.status="fulfilled",t.value=a,o0(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,l0(e,a)))}function Yc(e,t,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,o0(t),t=t.next;while(t!==l)}e.action=null}function o0(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function c0(e,t){return t}function u0(e,t){if(_e){var a=Ve.formState;if(a!==null){e:{var l=ke;if(_e){if(Ge){t:{for(var o=Ge,u=Vt;o.nodeType!==8;){if(!u){o=null;break t}if(o=Gt(o.nextSibling),o===null){o=null;break t}}u=o.data,o=u==="F!"||u==="F"?o:null}if(o){Ge=Gt(o.nextSibling),l=o.data==="F!";break e}}Wa(l)}l=!1}l&&(t=a[0])}}return a=xt(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c0,lastRenderedState:t},a.queue=l,a=A0.bind(null,ke,l),l.dispatch=a,l=Vc(!1),u=Kc.bind(null,ke,!1,l.queue),l=xt(),o={state:t,dispatch:null,action:e,pending:null},l.queue=o,a=Bp.bind(null,ke,o,u,a),o.dispatch=a,l.memoizedState=e,[t,a,!1]}function d0(e){var t=We();return f0(t,Be,e)}function f0(e,t,a){if(t=Uc(e,t,c0)[0],e=ci(Ea)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=El(t)}catch(x){throw x===ks?Pr:x}else l=t;t=We();var o=t.queue,u=o.dispatch;return a!==t.memoizedState&&(ke.flags|=2048,Ts(9,{destroy:void 0},Up.bind(null,o,a),null)),[l,u,e]}function Up(e,t){e.action=t}function g0(e){var t=We(),a=Be;if(a!==null)return f0(t,a,e);We(),t=t.memoizedState,a=We();var l=a.queue.dispatch;return a.memoizedState=e,[t,l,!1]}function Ts(e,t,a,l){return e={tag:e,create:a,deps:l,inst:t,next:null},t=ke.updateQueue,t===null&&(t=ii(),ke.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e),e}function h0(){return We().memoizedState}function ui(e,t,a,l){var o=xt();ke.flags|=e,o.memoizedState=Ts(1|t,{destroy:void 0},a,l===void 0?null:l)}function di(e,t,a,l){var o=We();l=l===void 0?null:l;var u=o.memoizedState.inst;Be!==null&&l!==null&&Dc(l,Be.memoizedState.deps)?o.memoizedState=Ts(t,u,a,l):(ke.flags|=e,o.memoizedState=Ts(1|t,u,a,l))}function m0(e,t){ui(8390656,8,e,t)}function Gc(e,t){di(2048,8,e,t)}function qp(e){ke.flags|=4;var t=ke.updateQueue;if(t===null)t=ii(),ke.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function x0(e){var t=We().memoizedState;return qp({ref:t,nextImpl:e}),function(){if((Re&2)!==0)throw Error(c(440));return t.impl.apply(void 0,arguments)}}function y0(e,t){return di(4,2,e,t)}function p0(e,t){return di(4,4,e,t)}function b0(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function v0(e,t,a){a=a!=null?a.concat([e]):null,di(4,4,b0.bind(null,t,e),a)}function Xc(){}function N0(e,t){var a=We();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&Dc(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function j0(e,t){var a=We();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&Dc(t,l[1]))return l[0];if(l=e(),Zn){sa(!0);try{e()}finally{sa(!1)}}return a.memoizedState=[l,t],l}function Zc(e,t,a){return a===void 0||(za&1073741824)!==0&&(Ae&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=wg(),ke.lanes|=e,rn|=e,a)}function w0(e,t,a,l){return Et(a,t)?a:zs.current!==null?(e=Zc(e,a,l),Et(e,t)||(tt=!0),e):(za&42)===0||(za&1073741824)!==0&&(Ae&261930)===0?(tt=!0,e.memoizedState=a):(e=wg(),ke.lanes|=e,rn|=e,t)}function S0(e,t,a,l,o){var u=O.p;O.p=u!==0&&8>u?u:8;var x=C.T,w={};C.T=w,Kc(e,!1,t,a);try{var R=o(),F=C.S;if(F!==null&&F(w,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var te=Rp(R,l);Al(e,t,te,Ot(e))}else Al(e,t,l,Ot(e))}catch(ne){Al(e,t,{then:function(){},status:"rejected",reason:ne},Ot())}finally{O.p=u,x!==null&&w.types!==null&&(x.types=w.types),C.T=x}}function Vp(){}function Qc(e,t,a,l){if(e.tag!==5)throw Error(c(476));var o=k0(e).queue;S0(e,o,t,H,a===null?Vp:function(){return C0(e),a(l)})}function k0(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:H},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function C0(e){var t=k0(e);t.next===null&&(t=e.alternate.memoizedState),Al(e,t.next.queue,{},Ot())}function $c(){return ut(Ql)}function z0(){return We().memoizedState}function E0(){return We().memoizedState}function Yp(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Ot();e=en(a);var l=tn(t,e,a);l!==null&&(Ct(l,t,a),Sl(l,t,a)),t={cache:jc()},e.payload=t;return}t=t.return}}function Gp(e,t,a){var l=Ot();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},fi(e)?T0(t,a):(a=dc(e,t,a,l),a!==null&&(Ct(a,e,l),_0(a,t,l)))}function A0(e,t,a){var l=Ot();Al(e,t,a,l)}function Al(e,t,a,l){var o={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(fi(e))T0(t,o);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var x=t.lastRenderedState,w=u(x,a);if(o.hasEagerState=!0,o.eagerState=w,Et(w,x))return Qr(e,t,o,0),Ve===null&&Zr(),!1}catch{}if(a=dc(e,t,o,l),a!==null)return Ct(a,e,l),_0(a,t,l),!0}return!1}function Kc(e,t,a,l){if(l={lane:2,revertLane:Cu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},fi(e)){if(t)throw Error(c(479))}else t=dc(e,a,l,2),t!==null&&Ct(t,e,2)}function fi(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function T0(e,t){Es=li=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function _0(e,t,a){if((a&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,kr(e,a)}}var Tl={readContext:ut,use:oi,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useLayoutEffect:Ke,useInsertionEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useSyncExternalStore:Ke,useId:Ke,useHostTransitionStatus:Ke,useFormState:Ke,useActionState:Ke,useOptimistic:Ke,useMemoCache:Ke,useCacheRefresh:Ke};Tl.useEffectEvent=Ke;var M0={readContext:ut,use:oi,useCallback:function(e,t){return xt().memoizedState=[e,t===void 0?null:t],e},useContext:ut,useEffect:m0,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,ui(4194308,4,b0.bind(null,t,e),a)},useLayoutEffect:function(e,t){return ui(4194308,4,e,t)},useInsertionEffect:function(e,t){ui(4,2,e,t)},useMemo:function(e,t){var a=xt();t=t===void 0?null:t;var l=e();if(Zn){sa(!0);try{e()}finally{sa(!1)}}return a.memoizedState=[l,t],l},useReducer:function(e,t,a){var l=xt();if(a!==void 0){var o=a(t);if(Zn){sa(!0);try{a(t)}finally{sa(!1)}}}else o=t;return l.memoizedState=l.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},l.queue=e,e=e.dispatch=Gp.bind(null,ke,e),[l.memoizedState,e]},useRef:function(e){var t=xt();return e={current:e},t.memoizedState=e},useState:function(e){e=Vc(e);var t=e.queue,a=A0.bind(null,ke,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Xc,useDeferredValue:function(e,t){var a=xt();return Zc(a,e,t)},useTransition:function(){var e=Vc(!1);return e=S0.bind(null,ke,e.queue,!0,!1),xt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var l=ke,o=xt();if(_e){if(a===void 0)throw Error(c(407));a=a()}else{if(a=t(),Ve===null)throw Error(c(349));(Ae&127)!==0||Pf(l,t,a)}o.memoizedState=a;var u={value:a,getSnapshot:t};return o.queue=u,m0(t0.bind(null,l,u,e),[e]),l.flags|=2048,Ts(9,{destroy:void 0},e0.bind(null,l,u,a,t),null),a},useId:function(){var e=xt(),t=Ve.identifierPrefix;if(_e){var a=ia,l=ra;a=(l&~(1<<32-mt(l)-1)).toString(32)+a,t="_"+t+"R_"+a,a=ri++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Hp++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:$c,useFormState:u0,useActionState:u0,useOptimistic:function(e){var t=xt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Kc.bind(null,ke,!0,a),a.dispatch=t,[e,t]},useMemoCache:Bc,useCacheRefresh:function(){return xt().memoizedState=Yp.bind(null,ke)},useEffectEvent:function(e){var t=xt(),a={impl:e};return t.memoizedState=a,function(){if((Re&2)!==0)throw Error(c(440));return a.impl.apply(void 0,arguments)}}},Fc={readContext:ut,use:oi,useCallback:N0,useContext:ut,useEffect:Gc,useImperativeHandle:v0,useInsertionEffect:y0,useLayoutEffect:p0,useMemo:j0,useReducer:ci,useRef:h0,useState:function(){return ci(Ea)},useDebugValue:Xc,useDeferredValue:function(e,t){var a=We();return w0(a,Be.memoizedState,e,t)},useTransition:function(){var e=ci(Ea)[0],t=We().memoizedState;return[typeof e=="boolean"?e:El(e),t]},useSyncExternalStore:If,useId:z0,useHostTransitionStatus:$c,useFormState:d0,useActionState:d0,useOptimistic:function(e,t){var a=We();return s0(a,Be,e,t)},useMemoCache:Bc,useCacheRefresh:E0};Fc.useEffectEvent=x0;var D0={readContext:ut,use:oi,useCallback:N0,useContext:ut,useEffect:Gc,useImperativeHandle:v0,useInsertionEffect:y0,useLayoutEffect:p0,useMemo:j0,useReducer:qc,useRef:h0,useState:function(){return qc(Ea)},useDebugValue:Xc,useDeferredValue:function(e,t){var a=We();return Be===null?Zc(a,e,t):w0(a,Be.memoizedState,e,t)},useTransition:function(){var e=qc(Ea)[0],t=We().memoizedState;return[typeof e=="boolean"?e:El(e),t]},useSyncExternalStore:If,useId:z0,useHostTransitionStatus:$c,useFormState:g0,useActionState:g0,useOptimistic:function(e,t){var a=We();return Be!==null?s0(a,Be,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Bc,useCacheRefresh:E0};D0.useEffectEvent=x0;function Jc(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:b({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Wc={enqueueSetState:function(e,t,a){e=e._reactInternals;var l=Ot(),o=en(l);o.payload=t,a!=null&&(o.callback=a),t=tn(e,o,l),t!==null&&(Ct(t,e,l),Sl(t,e,l))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=Ot(),o=en(l);o.tag=1,o.payload=t,a!=null&&(o.callback=a),t=tn(e,o,l),t!==null&&(Ct(t,e,l),Sl(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Ot(),l=en(a);l.tag=2,t!=null&&(l.callback=t),t=tn(e,l,a),t!==null&&(Ct(t,e,a),Sl(t,e,a))}};function O0(e,t,a,l,o,u,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,u,x):t.prototype&&t.prototype.isPureReactComponent?!xl(a,l)||!xl(o,u):!0}function R0(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&Wc.enqueueReplaceState(t,t.state,null)}function Qn(e,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(e=e.defaultProps){a===t&&(a=b({},a));for(var o in e)a[o]===void 0&&(a[o]=e[o])}return a}function H0(e){Xr(e)}function L0(e){console.error(e)}function B0(e){Xr(e)}function gi(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function U0(e,t,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Ic(e,t,a){return a=en(a),a.tag=3,a.payload={element:null},a.callback=function(){gi(e,t)},a}function q0(e){return e=en(e),e.tag=3,e}function V0(e,t,a,l){var o=a.type.getDerivedStateFromError;if(typeof o=="function"){var u=l.value;e.payload=function(){return o(u)},e.callback=function(){U0(t,a,l)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(e.callback=function(){U0(t,a,l),typeof o!="function"&&(on===null?on=new Set([this]):on.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function Xp(e,t,a,l,o){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&js(t,a,o,!0),a=Tt.current,a!==null){switch(a.tag){case 31:case 13:return Yt===null?ki():a.alternate===null&&Fe===0&&(Fe=3),a.flags&=-257,a.flags|=65536,a.lanes=o,l===ei?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),wu(e,l,o)),!1;case 22:return a.flags|=65536,l===ei?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),wu(e,l,o)),!1}throw Error(c(435,a.tag))}return wu(e,l,o),ki(),!1}if(_e)return t=Tt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,l!==yc&&(e=Error(c(422),{cause:l}),bl(Bt(e,a)))):(l!==yc&&(t=Error(c(423),{cause:l}),bl(Bt(t,a))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,l=Bt(l,a),o=Ic(e.stateNode,l,o),Ec(e,o),Fe!==4&&(Fe=2)),!1;var u=Error(c(520),{cause:l});if(u=Bt(u,a),Bl===null?Bl=[u]:Bl.push(u),Fe!==4&&(Fe=2),t===null)return!0;l=Bt(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=o&-o,a.lanes|=e,e=Ic(a.stateNode,l,e),Ec(a,e),!1;case 1:if(t=a.type,u=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(on===null||!on.has(u))))return a.flags|=65536,o&=-o,a.lanes|=o,o=q0(o),V0(o,e,a,l),Ec(a,o),!1}a=a.return}while(a!==null);return!1}var Pc=Error(c(461)),tt=!1;function dt(e,t,a,l){t.child=e===null?Zf(t,null,a,l):Xn(t,e.child,a,l)}function Y0(e,t,a,l,o){a=a.render;var u=t.ref;if("ref"in l){var x={};for(var w in l)w!=="ref"&&(x[w]=l[w])}else x=l;return qn(t),l=Oc(e,t,a,x,u,o),w=Rc(),e!==null&&!tt?(Hc(e,t,o),Aa(e,t,o)):(_e&&w&&mc(t),t.flags|=1,dt(e,t,l,o),t.child)}function G0(e,t,a,l,o){if(e===null){var u=a.type;return typeof u=="function"&&!fc(u)&&u.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=u,X0(e,t,u,l,o)):(e=Kr(a.type,null,l,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!iu(e,o)){var x=u.memoizedProps;if(a=a.compare,a=a!==null?a:xl,a(x,l)&&e.ref===t.ref)return Aa(e,t,o)}return t.flags|=1,e=wa(u,l),e.ref=t.ref,e.return=t,t.child=e}function X0(e,t,a,l,o){if(e!==null){var u=e.memoizedProps;if(xl(u,l)&&e.ref===t.ref)if(tt=!1,t.pendingProps=l=u,iu(e,o))(e.flags&131072)!==0&&(tt=!0);else return t.lanes=e.lanes,Aa(e,t,o)}return eu(e,t,a,l,o)}function Z0(e,t,a,l){var o=l.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|a:a,e!==null){for(l=t.child=e.child,o=0;l!==null;)o=o|l.lanes|l.childLanes,l=l.sibling;l=o&~u}else l=0,t.child=null;return Q0(e,t,u,a,l)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ir(t,u!==null?u.cachePool:null),u!==null?Kf(t,u):Tc(),Ff(t);else return l=t.lanes=536870912,Q0(e,t,u!==null?u.baseLanes|a:a,a,l)}else u!==null?(Ir(t,u.cachePool),Kf(t,u),nn(),t.memoizedState=null):(e!==null&&Ir(t,null),Tc(),nn());return dt(e,t,o,a),t.child}function _l(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Q0(e,t,a,l,o){var u=Sc();return u=u===null?null:{parent:Pe._currentValue,pool:u},t.memoizedState={baseLanes:a,cachePool:u},e!==null&&Ir(t,null),Tc(),Ff(t),e!==null&&js(e,t,l,!0),t.childLanes=o,null}function hi(e,t){return t=xi({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function $0(e,t,a){return Xn(t,e.child,null,a),e=hi(t,t.pendingProps),e.flags|=2,_t(t),t.memoizedState=null,e}function Zp(e,t,a){var l=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(_e){if(l.mode==="hidden")return e=hi(t,l),t.lanes=536870912,_l(null,e);if(Mc(t),(e=Ge)?(e=lh(e,Vt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Fa!==null?{id:ra,overflow:ia}:null,retryLane:536870912,hydrationErrors:null},a=Tf(e),a.return=t,t.child=a,ct=t,Ge=null)):e=null,e===null)throw Wa(t);return t.lanes=536870912,null}return hi(t,l)}var u=e.memoizedState;if(u!==null){var x=u.dehydrated;if(Mc(t),o)if(t.flags&256)t.flags&=-257,t=$0(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(c(558));else if(tt||js(e,t,a,!1),o=(a&e.childLanes)!==0,tt||o){if(l=Ve,l!==null&&(x=Cr(l,a),x!==0&&x!==u.retryLane))throw u.retryLane=x,Hn(e,x),Ct(l,e,x),Pc;ki(),t=$0(e,t,a)}else e=u.treeContext,Ge=Gt(x.nextSibling),ct=t,_e=!0,Ja=null,Vt=!1,e!==null&&Df(t,e),t=hi(t,l),t.flags|=4096;return t}return e=wa(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function mi(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(c(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function eu(e,t,a,l,o){return qn(t),a=Oc(e,t,a,l,void 0,o),l=Rc(),e!==null&&!tt?(Hc(e,t,o),Aa(e,t,o)):(_e&&l&&mc(t),t.flags|=1,dt(e,t,a,o),t.child)}function K0(e,t,a,l,o,u){return qn(t),t.updateQueue=null,a=Wf(t,l,a,o),Jf(e),l=Rc(),e!==null&&!tt?(Hc(e,t,u),Aa(e,t,u)):(_e&&l&&mc(t),t.flags|=1,dt(e,t,a,u),t.child)}function F0(e,t,a,l,o){if(qn(t),t.stateNode===null){var u=ps,x=a.contextType;typeof x=="object"&&x!==null&&(u=ut(x)),u=new a(l,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Wc,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=l,u.state=t.memoizedState,u.refs={},Cc(t),x=a.contextType,u.context=typeof x=="object"&&x!==null?ut(x):ps,u.state=t.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(Jc(t,a,x,l),u.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(x=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),x!==u.state&&Wc.enqueueReplaceState(u,u.state,null),Cl(t,l,u,o),kl(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){u=t.stateNode;var w=t.memoizedProps,R=Qn(a,w);u.props=R;var F=u.context,te=a.contextType;x=ps,typeof te=="object"&&te!==null&&(x=ut(te));var ne=a.getDerivedStateFromProps;te=typeof ne=="function"||typeof u.getSnapshotBeforeUpdate=="function",w=t.pendingProps!==w,te||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(w||F!==x)&&R0(t,u,l,x),Pa=!1;var J=t.memoizedState;u.state=J,Cl(t,l,u,o),kl(),F=t.memoizedState,w||J!==F||Pa?(typeof ne=="function"&&(Jc(t,a,ne,l),F=t.memoizedState),(R=Pa||O0(t,a,R,l,J,F,x))?(te||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=F),u.props=l,u.state=F,u.context=x,l=R):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{u=t.stateNode,zc(e,t),x=t.memoizedProps,te=Qn(a,x),u.props=te,ne=t.pendingProps,J=u.context,F=a.contextType,R=ps,typeof F=="object"&&F!==null&&(R=ut(F)),w=a.getDerivedStateFromProps,(F=typeof w=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(x!==ne||J!==R)&&R0(t,u,l,R),Pa=!1,J=t.memoizedState,u.state=J,Cl(t,l,u,o),kl();var I=t.memoizedState;x!==ne||J!==I||Pa||e!==null&&e.dependencies!==null&&Jr(e.dependencies)?(typeof w=="function"&&(Jc(t,a,w,l),I=t.memoizedState),(te=Pa||O0(t,a,te,l,J,I,R)||e!==null&&e.dependencies!==null&&Jr(e.dependencies))?(F||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(l,I,R),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(l,I,R)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||x===e.memoizedProps&&J===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&J===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=I),u.props=l,u.state=I,u.context=R,l=te):(typeof u.componentDidUpdate!="function"||x===e.memoizedProps&&J===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&J===e.memoizedState||(t.flags|=1024),l=!1)}return u=l,mi(e,t),l=(t.flags&128)!==0,u||l?(u=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&l?(t.child=Xn(t,e.child,null,o),t.child=Xn(t,null,a,o)):dt(e,t,a,o),t.memoizedState=u.state,e=t.child):e=Aa(e,t,o),e}function J0(e,t,a,l){return Bn(),t.flags|=256,dt(e,t,a,l),t.child}var tu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function au(e){return{baseLanes:e,cachePool:Uf()}}function nu(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Dt),e}function W0(e,t,a){var l=t.pendingProps,o=!1,u=(t.flags&128)!==0,x;if((x=u)||(x=e!==null&&e.memoizedState===null?!1:(Je.current&2)!==0),x&&(o=!0,t.flags&=-129),x=(t.flags&32)!==0,t.flags&=-33,e===null){if(_e){if(o?an(t):nn(),(e=Ge)?(e=lh(e,Vt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Fa!==null?{id:ra,overflow:ia}:null,retryLane:536870912,hydrationErrors:null},a=Tf(e),a.return=t,t.child=a,ct=t,Ge=null)):e=null,e===null)throw Wa(t);return Uu(e)?t.lanes=32:t.lanes=536870912,null}var w=l.children;return l=l.fallback,o?(nn(),o=t.mode,w=xi({mode:"hidden",children:w},o),l=Ln(l,o,a,null),w.return=t,l.return=t,w.sibling=l,t.child=w,l=t.child,l.memoizedState=au(a),l.childLanes=nu(e,x,a),t.memoizedState=tu,_l(null,l)):(an(t),su(t,w))}var R=e.memoizedState;if(R!==null&&(w=R.dehydrated,w!==null)){if(u)t.flags&256?(an(t),t.flags&=-257,t=lu(e,t,a)):t.memoizedState!==null?(nn(),t.child=e.child,t.flags|=128,t=null):(nn(),w=l.fallback,o=t.mode,l=xi({mode:"visible",children:l.children},o),w=Ln(w,o,a,null),w.flags|=2,l.return=t,w.return=t,l.sibling=w,t.child=l,Xn(t,e.child,null,a),l=t.child,l.memoizedState=au(a),l.childLanes=nu(e,x,a),t.memoizedState=tu,t=_l(null,l));else if(an(t),Uu(w)){if(x=w.nextSibling&&w.nextSibling.dataset,x)var F=x.dgst;x=F,l=Error(c(419)),l.stack="",l.digest=x,bl({value:l,source:null,stack:null}),t=lu(e,t,a)}else if(tt||js(e,t,a,!1),x=(a&e.childLanes)!==0,tt||x){if(x=Ve,x!==null&&(l=Cr(x,a),l!==0&&l!==R.retryLane))throw R.retryLane=l,Hn(e,l),Ct(x,e,l),Pc;Bu(w)||ki(),t=lu(e,t,a)}else Bu(w)?(t.flags|=192,t.child=e.child,t=null):(e=R.treeContext,Ge=Gt(w.nextSibling),ct=t,_e=!0,Ja=null,Vt=!1,e!==null&&Df(t,e),t=su(t,l.children),t.flags|=4096);return t}return o?(nn(),w=l.fallback,o=t.mode,R=e.child,F=R.sibling,l=wa(R,{mode:"hidden",children:l.children}),l.subtreeFlags=R.subtreeFlags&65011712,F!==null?w=wa(F,w):(w=Ln(w,o,a,null),w.flags|=2),w.return=t,l.return=t,l.sibling=w,t.child=l,_l(null,l),l=t.child,w=e.child.memoizedState,w===null?w=au(a):(o=w.cachePool,o!==null?(R=Pe._currentValue,o=o.parent!==R?{parent:R,pool:R}:o):o=Uf(),w={baseLanes:w.baseLanes|a,cachePool:o}),l.memoizedState=w,l.childLanes=nu(e,x,a),t.memoizedState=tu,_l(e.child,l)):(an(t),a=e.child,e=a.sibling,a=wa(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,e!==null&&(x=t.deletions,x===null?(t.deletions=[e],t.flags|=16):x.push(e)),t.child=a,t.memoizedState=null,a)}function su(e,t){return t=xi({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function xi(e,t){return e=At(22,e,null,t),e.lanes=0,e}function lu(e,t,a){return Xn(t,e.child,null,a),e=su(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function I0(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),vc(e.return,t,a)}function ru(e,t,a,l,o,u){var x=e.memoizedState;x===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:o,treeForkCount:u}:(x.isBackwards=t,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=a,x.tailMode=o,x.treeForkCount=u)}function P0(e,t,a){var l=t.pendingProps,o=l.revealOrder,u=l.tail;l=l.children;var x=Je.current,w=(x&2)!==0;if(w?(x=x&1|2,t.flags|=128):x&=1,le(Je,x),dt(e,t,l,a),l=_e?pl:0,!w&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&I0(e,a,t);else if(e.tag===19)I0(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(a=t.child,o=null;a!==null;)e=a.alternate,e!==null&&si(e)===null&&(o=a),a=a.sibling;a=o,a===null?(o=t.child,t.child=null):(o=a.sibling,a.sibling=null),ru(t,!1,o,a,u,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&si(e)===null){t.child=o;break}e=o.sibling,o.sibling=a,a=o,o=e}ru(t,!0,a,null,u,l);break;case"together":ru(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Aa(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),rn|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(js(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,a=wa(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=wa(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function iu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Jr(e)))}function Qp(e,t,a){switch(t.tag){case 3:oe(t,t.stateNode.containerInfo),Ia(t,Pe,e.memoizedState.cache),Bn();break;case 27:case 5:Se(t);break;case 4:oe(t,t.stateNode.containerInfo);break;case 10:Ia(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Mc(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(an(t),t.flags|=128,null):(a&t.child.childLanes)!==0?W0(e,t,a):(an(t),e=Aa(e,t,a),e!==null?e.sibling:null);an(t);break;case 19:var o=(e.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(js(e,t,a,!1),l=(a&t.childLanes)!==0),o){if(l)return P0(e,t,a);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),le(Je,Je.current),l)break;return null;case 22:return t.lanes=0,Z0(e,t,a,t.pendingProps);case 24:Ia(t,Pe,e.memoizedState.cache)}return Aa(e,t,a)}function eg(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)tt=!0;else{if(!iu(e,a)&&(t.flags&128)===0)return tt=!1,Qp(e,t,a);tt=(e.flags&131072)!==0}else tt=!1,_e&&(t.flags&1048576)!==0&&Mf(t,pl,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=Yn(t.elementType),t.type=e,typeof e=="function")fc(e)?(l=Qn(e,l),t.tag=1,t=F0(null,t,e,l,a)):(t.tag=0,t=eu(null,t,e,l,a));else{if(e!=null){var o=e.$$typeof;if(o===_){t.tag=11,t=Y0(null,t,e,l,a);break e}else if(o===Y){t.tag=14,t=G0(null,t,e,l,a);break e}}throw t=T(e)||e,Error(c(306,t,""))}}return t;case 0:return eu(e,t,t.type,t.pendingProps,a);case 1:return l=t.type,o=Qn(l,t.pendingProps),F0(e,t,l,o,a);case 3:e:{if(oe(t,t.stateNode.containerInfo),e===null)throw Error(c(387));l=t.pendingProps;var u=t.memoizedState;o=u.element,zc(e,t),Cl(t,l,null,a);var x=t.memoizedState;if(l=x.cache,Ia(t,Pe,l),l!==u.cache&&Nc(t,[Pe],a,!0),kl(),l=x.element,u.isDehydrated)if(u={element:l,isDehydrated:!1,cache:x.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=J0(e,t,l,a);break e}else if(l!==o){o=Bt(Error(c(424)),t),bl(o),t=J0(e,t,l,a);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ge=Gt(e.firstChild),ct=t,_e=!0,Ja=null,Vt=!0,a=Zf(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Bn(),l===o){t=Aa(e,t,a);break e}dt(e,t,l,a)}t=t.child}return t;case 26:return mi(e,t),e===null?(a=dh(t.type,null,t.pendingProps,null))?t.memoizedState=a:_e||(a=t.type,e=t.pendingProps,l=Mi(be.current).createElement(a),l[st]=t,l[gt]=e,ft(l,a,e),Ie(l),t.stateNode=l):t.memoizedState=dh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Se(t),e===null&&_e&&(l=t.stateNode=oh(t.type,t.pendingProps,be.current),ct=t,Vt=!0,o=Ge,fn(t.type)?(qu=o,Ge=Gt(l.firstChild)):Ge=o),dt(e,t,t.pendingProps.children,a),mi(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&_e&&((o=l=Ge)&&(l=jb(l,t.type,t.pendingProps,Vt),l!==null?(t.stateNode=l,ct=t,Ge=Gt(l.firstChild),Vt=!1,o=!0):o=!1),o||Wa(t)),Se(t),o=t.type,u=t.pendingProps,x=e!==null?e.memoizedProps:null,l=u.children,Ru(o,u)?l=null:x!==null&&Ru(o,x)&&(t.flags|=32),t.memoizedState!==null&&(o=Oc(e,t,Lp,null,null,a),Ql._currentValue=o),mi(e,t),dt(e,t,l,a),t.child;case 6:return e===null&&_e&&((e=a=Ge)&&(a=wb(a,t.pendingProps,Vt),a!==null?(t.stateNode=a,ct=t,Ge=null,e=!0):e=!1),e||Wa(t)),null;case 13:return W0(e,t,a);case 4:return oe(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Xn(t,null,l,a):dt(e,t,l,a),t.child;case 11:return Y0(e,t,t.type,t.pendingProps,a);case 7:return dt(e,t,t.pendingProps,a),t.child;case 8:return dt(e,t,t.pendingProps.children,a),t.child;case 12:return dt(e,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,Ia(t,t.type,l.value),dt(e,t,l.children,a),t.child;case 9:return o=t.type._context,l=t.pendingProps.children,qn(t),o=ut(o),l=l(o),t.flags|=1,dt(e,t,l,a),t.child;case 14:return G0(e,t,t.type,t.pendingProps,a);case 15:return X0(e,t,t.type,t.pendingProps,a);case 19:return P0(e,t,a);case 31:return Zp(e,t,a);case 22:return Z0(e,t,a,t.pendingProps);case 24:return qn(t),l=ut(Pe),e===null?(o=Sc(),o===null&&(o=Ve,u=jc(),o.pooledCache=u,u.refCount++,u!==null&&(o.pooledCacheLanes|=a),o=u),t.memoizedState={parent:l,cache:o},Cc(t),Ia(t,Pe,o)):((e.lanes&a)!==0&&(zc(e,t),Cl(t,null,null,a),kl()),o=e.memoizedState,u=t.memoizedState,o.parent!==l?(o={parent:l,cache:l},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Ia(t,Pe,l)):(l=u.cache,Ia(t,Pe,l),l!==o.cache&&Nc(t,[Pe],a,!0))),dt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function Ta(e){e.flags|=4}function ou(e,t,a,l,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(zg())e.flags|=8192;else throw Gn=ei,kc}else e.flags&=-16777217}function tg(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!xh(t))if(zg())e.flags|=8192;else throw Gn=ei,kc}function yi(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?wr():536870912,e.lanes|=t,Os|=t)}function Ml(e,t){if(!_e)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var o=e.child;o!==null;)a|=o.lanes|o.childLanes,l|=o.subtreeFlags&65011712,l|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)a|=o.lanes|o.childLanes,l|=o.subtreeFlags,l|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function $p(e,t,a){var l=t.pendingProps;switch(xc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return Xe(t),null;case 3:return a=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Ca(Pe),ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ns(t)?Ta(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,pc())),Xe(t),null;case 26:var o=t.type,u=t.memoizedState;return e===null?(Ta(t),u!==null?(Xe(t),tg(t,u)):(Xe(t),ou(t,o,null,l,a))):u?u!==e.memoizedState?(Ta(t),Xe(t),tg(t,u)):(Xe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&Ta(t),Xe(t),ou(t,o,e,l,a)),null;case 27:if(je(t),a=be.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Ta(t);else{if(!l){if(t.stateNode===null)throw Error(c(166));return Xe(t),null}e=ie.current,Ns(t)?Of(t):(e=oh(o,l,a),t.stateNode=e,Ta(t))}return Xe(t),null;case 5:if(je(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Ta(t);else{if(!l){if(t.stateNode===null)throw Error(c(166));return Xe(t),null}if(u=ie.current,Ns(t))Of(t);else{var x=Mi(be.current);switch(u){case 1:u=x.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:u=x.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":u=x.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":u=x.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":u=x.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof l.is=="string"?x.createElement("select",{is:l.is}):x.createElement("select"),l.multiple?u.multiple=!0:l.size&&(u.size=l.size);break;default:u=typeof l.is=="string"?x.createElement(o,{is:l.is}):x.createElement(o)}}u[st]=t,u[gt]=l;e:for(x=t.child;x!==null;){if(x.tag===5||x.tag===6)u.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}t.stateNode=u;e:switch(ft(u,o,l),o){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ta(t)}}return Xe(t),ou(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&Ta(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(c(166));if(e=be.current,Ns(t)){if(e=t.stateNode,a=t.memoizedProps,l=null,o=ct,o!==null)switch(o.tag){case 27:case 5:l=o.memoizedProps}e[st]=t,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Wg(e.nodeValue,a)),e||Wa(t,!0)}else e=Mi(e).createTextNode(l),e[st]=t,t.stateNode=e}return Xe(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(l=Ns(t),a!==null){if(e===null){if(!l)throw Error(c(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(557));e[st]=t}else Bn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Xe(t),e=!1}else a=pc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(_t(t),t):(_t(t),null);if((t.flags&128)!==0)throw Error(c(558))}return Xe(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Ns(t),l!==null&&l.dehydrated!==null){if(e===null){if(!o)throw Error(c(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(c(317));o[st]=t}else Bn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Xe(t),o=!1}else o=pc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(_t(t),t):(_t(t),null)}return _t(t),(t.flags&128)!==0?(t.lanes=a,t):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=t.child,o=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(o=l.alternate.memoizedState.cachePool.pool),u=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(u=l.memoizedState.cachePool.pool),u!==o&&(l.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),yi(t,t.updateQueue),Xe(t),null);case 4:return ue(),e===null&&Tu(t.stateNode.containerInfo),Xe(t),null;case 10:return Ca(t.type),Xe(t),null;case 19:if(P(Je),l=t.memoizedState,l===null)return Xe(t),null;if(o=(t.flags&128)!==0,u=l.rendering,u===null)if(o)Ml(l,!1);else{if(Fe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=si(e),u!==null){for(t.flags|=128,Ml(l,!1),e=u.updateQueue,t.updateQueue=e,yi(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Af(a,e),a=a.sibling;return le(Je,Je.current&1|2),_e&&Sa(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&ot()>ji&&(t.flags|=128,o=!0,Ml(l,!1),t.lanes=4194304)}else{if(!o)if(e=si(u),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,yi(t,e),Ml(l,!0),l.tail===null&&l.tailMode==="hidden"&&!u.alternate&&!_e)return Xe(t),null}else 2*ot()-l.renderingStartTime>ji&&a!==536870912&&(t.flags|=128,o=!0,Ml(l,!1),t.lanes=4194304);l.isBackwards?(u.sibling=t.child,t.child=u):(e=l.last,e!==null?e.sibling=u:t.child=u,l.last=u)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=ot(),e.sibling=null,a=Je.current,le(Je,o?a&1|2:a&1),_e&&Sa(t,l.treeForkCount),e):(Xe(t),null);case 22:case 23:return _t(t),_c(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),a=t.updateQueue,a!==null&&yi(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),e!==null&&P(Vn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Ca(Pe),Xe(t),null;case 25:return null;case 30:return null}throw Error(c(156,t.tag))}function Kp(e,t){switch(xc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ca(Pe),ue(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return je(t),null;case 31:if(t.memoizedState!==null){if(_t(t),t.alternate===null)throw Error(c(340));Bn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(_t(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));Bn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return P(Je),null;case 4:return ue(),null;case 10:return Ca(t.type),null;case 22:case 23:return _t(t),_c(),e!==null&&P(Vn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ca(Pe),null;case 25:return null;default:return null}}function ag(e,t){switch(xc(t),t.tag){case 3:Ca(Pe),ue();break;case 26:case 27:case 5:je(t);break;case 4:ue();break;case 31:t.memoizedState!==null&&_t(t);break;case 13:_t(t);break;case 19:P(Je);break;case 10:Ca(t.type);break;case 22:case 23:_t(t),_c(),e!==null&&P(Vn);break;case 24:Ca(Pe)}}function Dl(e,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var o=l.next;a=o;do{if((a.tag&e)===e){l=void 0;var u=a.create,x=a.inst;l=u(),x.destroy=l}a=a.next}while(a!==o)}}catch(w){Le(t,t.return,w)}}function sn(e,t,a){try{var l=t.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var u=o.next;l=u;do{if((l.tag&e)===e){var x=l.inst,w=x.destroy;if(w!==void 0){x.destroy=void 0,o=t;var R=a,F=w;try{F()}catch(te){Le(o,R,te)}}}l=l.next}while(l!==u)}}catch(te){Le(t,t.return,te)}}function ng(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{$f(t,a)}catch(l){Le(e,e.return,l)}}}function sg(e,t,a){a.props=Qn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Le(e,t,l)}}function Ol(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(o){Le(e,t,o)}}function oa(e,t){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(o){Le(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(o){Le(e,t,o)}else a.current=null}function lg(e){var t=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(o){Le(e,e.return,o)}}function cu(e,t,a){try{var l=e.stateNode;xb(l,e.type,a,t),l[gt]=t}catch(o){Le(e,e.return,o)}}function rg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&fn(e.type)||e.tag===4}function uu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&fn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function du(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Na));else if(l!==4&&(l===27&&fn(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(du(e,t,a),e=e.sibling;e!==null;)du(e,t,a),e=e.sibling}function pi(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(l===27&&fn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(pi(e,t,a),e=e.sibling;e!==null;)pi(e,t,a),e=e.sibling}function ig(e){var t=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);ft(t,l,a),t[st]=e,t[gt]=a}catch(u){Le(e,e.return,u)}}var _a=!1,at=!1,fu=!1,og=typeof WeakSet=="function"?WeakSet:Set,it=null;function Fp(e,t){if(e=e.containerInfo,Du=Ui,e=vf(e),lc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var o=l.anchorOffset,u=l.focusNode;l=l.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var x=0,w=-1,R=-1,F=0,te=0,ne=e,J=null;t:for(;;){for(var I;ne!==a||o!==0&&ne.nodeType!==3||(w=x+o),ne!==u||l!==0&&ne.nodeType!==3||(R=x+l),ne.nodeType===3&&(x+=ne.nodeValue.length),(I=ne.firstChild)!==null;)J=ne,ne=I;for(;;){if(ne===e)break t;if(J===a&&++F===o&&(w=x),J===u&&++te===l&&(R=x),(I=ne.nextSibling)!==null)break;ne=J,J=ne.parentNode}ne=I}a=w===-1||R===-1?null:{start:w,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ou={focusedElem:e,selectionRange:a},Ui=!1,it=t;it!==null;)if(t=it,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,it=e;else for(;it!==null;){switch(t=it,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)o=e[a],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,a=t,o=u.memoizedProps,u=u.memoizedState,l=a.stateNode;try{var de=Qn(a.type,o);e=l.getSnapshotBeforeUpdate(de,u),l.__reactInternalSnapshotBeforeUpdate=e}catch(ve){Le(a,a.return,ve)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Lu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Lu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=t.sibling,e!==null){e.return=t.return,it=e;break}it=t.return}}function cg(e,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Da(e,a),l&4&&Dl(5,a);break;case 1:if(Da(e,a),l&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(x){Le(a,a.return,x)}else{var o=Qn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(x){Le(a,a.return,x)}}l&64&&ng(a),l&512&&Ol(a,a.return);break;case 3:if(Da(e,a),l&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{$f(e,t)}catch(x){Le(a,a.return,x)}}break;case 27:t===null&&l&4&&ig(a);case 26:case 5:Da(e,a),t===null&&l&4&&lg(a),l&512&&Ol(a,a.return);break;case 12:Da(e,a);break;case 31:Da(e,a),l&4&&fg(e,a);break;case 13:Da(e,a),l&4&&gg(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=sb.bind(null,a),Sb(e,a))));break;case 22:if(l=a.memoizedState!==null||_a,!l){t=t!==null&&t.memoizedState!==null||at,o=_a;var u=at;_a=l,(at=t)&&!u?Oa(e,a,(a.subtreeFlags&8772)!==0):Da(e,a),_a=o,at=u}break;case 30:break;default:Da(e,a)}}function ug(e){var t=e.alternate;t!==null&&(e.alternate=null,ug(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&rl(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ze=null,jt=!1;function Ma(e,t,a){for(a=a.child;a!==null;)dg(e,t,a),a=a.sibling}function dg(e,t,a){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(zn,a)}catch{}switch(a.tag){case 26:at||oa(a,t),Ma(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:at||oa(a,t);var l=Ze,o=jt;fn(a.type)&&(Ze=a.stateNode,jt=!1),Ma(e,t,a),Gl(a.stateNode),Ze=l,jt=o;break;case 5:at||oa(a,t);case 6:if(l=Ze,o=jt,Ze=null,Ma(e,t,a),Ze=l,jt=o,Ze!==null)if(jt)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(a.stateNode)}catch(u){Le(a,t,u)}else try{Ze.removeChild(a.stateNode)}catch(u){Le(a,t,u)}break;case 18:Ze!==null&&(jt?(e=Ze,nh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Ys(e)):nh(Ze,a.stateNode));break;case 4:l=Ze,o=jt,Ze=a.stateNode.containerInfo,jt=!0,Ma(e,t,a),Ze=l,jt=o;break;case 0:case 11:case 14:case 15:sn(2,a,t),at||sn(4,a,t),Ma(e,t,a);break;case 1:at||(oa(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&sg(a,t,l)),Ma(e,t,a);break;case 21:Ma(e,t,a);break;case 22:at=(l=at)||a.memoizedState!==null,Ma(e,t,a),at=l;break;default:Ma(e,t,a)}}function fg(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ys(e)}catch(a){Le(t,t.return,a)}}}function gg(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ys(e)}catch(a){Le(t,t.return,a)}}function Jp(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new og),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new og),t;default:throw Error(c(435,e.tag))}}function bi(e,t){var a=Jp(e);t.forEach(function(l){if(!a.has(l)){a.add(l);var o=lb.bind(null,e,l);l.then(o,o)}})}function wt(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var o=a[l],u=e,x=t,w=x;e:for(;w!==null;){switch(w.tag){case 27:if(fn(w.type)){Ze=w.stateNode,jt=!1;break e}break;case 5:Ze=w.stateNode,jt=!1;break e;case 3:case 4:Ze=w.stateNode.containerInfo,jt=!0;break e}w=w.return}if(Ze===null)throw Error(c(160));dg(u,x,o),Ze=null,jt=!1,u=o.alternate,u!==null&&(u.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)hg(t,e),t=t.sibling}var Jt=null;function hg(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:wt(t,e),St(e),l&4&&(sn(3,e,e.return),Dl(3,e),sn(5,e,e.return));break;case 1:wt(t,e),St(e),l&512&&(at||a===null||oa(a,a.return)),l&64&&_a&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var o=Jt;if(wt(t,e),St(e),l&512&&(at||a===null||oa(a,a.return)),l&4){var u=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,o=o.ownerDocument||o;t:switch(l){case"title":u=o.getElementsByTagName("title")[0],(!u||u[Tn]||u[st]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=o.createElement(l),o.head.insertBefore(u,o.querySelector("head > title"))),ft(u,l,a),u[st]=e,Ie(u),l=u;break e;case"link":var x=hh("link","href",o).get(l+(a.href||""));if(x){for(var w=0;w<x.length;w++)if(u=x[w],u.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&u.getAttribute("rel")===(a.rel==null?null:a.rel)&&u.getAttribute("title")===(a.title==null?null:a.title)&&u.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(w,1);break t}}u=o.createElement(l),ft(u,l,a),o.head.appendChild(u);break;case"meta":if(x=hh("meta","content",o).get(l+(a.content||""))){for(w=0;w<x.length;w++)if(u=x[w],u.getAttribute("content")===(a.content==null?null:""+a.content)&&u.getAttribute("name")===(a.name==null?null:a.name)&&u.getAttribute("property")===(a.property==null?null:a.property)&&u.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&u.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(w,1);break t}}u=o.createElement(l),ft(u,l,a),o.head.appendChild(u);break;default:throw Error(c(468,l))}u[st]=e,Ie(u),l=u}e.stateNode=l}else mh(o,e.type,e.stateNode);else e.stateNode=gh(o,l,e.memoizedProps);else u!==l?(u===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):u.count--,l===null?mh(o,e.type,e.stateNode):gh(o,l,e.memoizedProps)):l===null&&e.stateNode!==null&&cu(e,e.memoizedProps,a.memoizedProps)}break;case 27:wt(t,e),St(e),l&512&&(at||a===null||oa(a,a.return)),a!==null&&l&4&&cu(e,e.memoizedProps,a.memoizedProps);break;case 5:if(wt(t,e),St(e),l&512&&(at||a===null||oa(a,a.return)),e.flags&32){o=e.stateNode;try{ds(o,"")}catch(de){Le(e,e.return,de)}}l&4&&e.stateNode!=null&&(o=e.memoizedProps,cu(e,o,a!==null?a.memoizedProps:o)),l&1024&&(fu=!0);break;case 6:if(wt(t,e),St(e),l&4){if(e.stateNode===null)throw Error(c(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(de){Le(e,e.return,de)}}break;case 3:if(Ri=null,o=Jt,Jt=Di(t.containerInfo),wt(t,e),Jt=o,St(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ys(t.containerInfo)}catch(de){Le(e,e.return,de)}fu&&(fu=!1,mg(e));break;case 4:l=Jt,Jt=Di(e.stateNode.containerInfo),wt(t,e),St(e),Jt=l;break;case 12:wt(t,e),St(e);break;case 31:wt(t,e),St(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,bi(e,l)));break;case 13:wt(t,e),St(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ni=ot()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,bi(e,l)));break;case 22:o=e.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,F=_a,te=at;if(_a=F||o,at=te||R,wt(t,e),at=te,_a=F,St(e),l&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(a===null||R||_a||at||$n(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){R=a=t;try{if(u=R.stateNode,o)x=u.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{w=R.stateNode;var ne=R.memoizedProps.style,J=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;w.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(de){Le(R,R.return,de)}}}else if(t.tag===6){if(a===null){R=t;try{R.stateNode.nodeValue=o?"":R.memoizedProps}catch(de){Le(R,R.return,de)}}}else if(t.tag===18){if(a===null){R=t;try{var I=R.stateNode;o?sh(I,!0):sh(R.stateNode,!1)}catch(de){Le(R,R.return,de)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,bi(e,a))));break;case 19:wt(t,e),St(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,bi(e,l)));break;case 30:break;case 21:break;default:wt(t,e),St(e)}}function St(e){var t=e.flags;if(t&2){try{for(var a,l=e.return;l!==null;){if(rg(l)){a=l;break}l=l.return}if(a==null)throw Error(c(160));switch(a.tag){case 27:var o=a.stateNode,u=uu(e);pi(e,u,o);break;case 5:var x=a.stateNode;a.flags&32&&(ds(x,""),a.flags&=-33);var w=uu(e);pi(e,w,x);break;case 3:case 4:var R=a.stateNode.containerInfo,F=uu(e);du(e,F,R);break;default:throw Error(c(161))}}catch(te){Le(e,e.return,te)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;mg(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Da(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)cg(e,t.alternate,t),t=t.sibling}function $n(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:sn(4,t,t.return),$n(t);break;case 1:oa(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&sg(t,t.return,a),$n(t);break;case 27:Gl(t.stateNode);case 26:case 5:oa(t,t.return),$n(t);break;case 22:t.memoizedState===null&&$n(t);break;case 30:$n(t);break;default:$n(t)}e=e.sibling}}function Oa(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,o=e,u=t,x=u.flags;switch(u.tag){case 0:case 11:case 15:Oa(o,u,a),Dl(4,u);break;case 1:if(Oa(o,u,a),l=u,o=l.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(F){Le(l,l.return,F)}if(l=u,o=l.updateQueue,o!==null){var w=l.stateNode;try{var R=o.shared.hiddenCallbacks;if(R!==null)for(o.shared.hiddenCallbacks=null,o=0;o<R.length;o++)Qf(R[o],w)}catch(F){Le(l,l.return,F)}}a&&x&64&&ng(u),Ol(u,u.return);break;case 27:ig(u);case 26:case 5:Oa(o,u,a),a&&l===null&&x&4&&lg(u),Ol(u,u.return);break;case 12:Oa(o,u,a);break;case 31:Oa(o,u,a),a&&x&4&&fg(o,u);break;case 13:Oa(o,u,a),a&&x&4&&gg(o,u);break;case 22:u.memoizedState===null&&Oa(o,u,a),Ol(u,u.return);break;case 30:break;default:Oa(o,u,a)}t=t.sibling}}function gu(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&vl(a))}function hu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&vl(e))}function Wt(e,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)xg(e,t,a,l),t=t.sibling}function xg(e,t,a,l){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Wt(e,t,a,l),o&2048&&Dl(9,t);break;case 1:Wt(e,t,a,l);break;case 3:Wt(e,t,a,l),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&vl(e)));break;case 12:if(o&2048){Wt(e,t,a,l),e=t.stateNode;try{var u=t.memoizedProps,x=u.id,w=u.onPostCommit;typeof w=="function"&&w(x,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){Le(t,t.return,R)}}else Wt(e,t,a,l);break;case 31:Wt(e,t,a,l);break;case 13:Wt(e,t,a,l);break;case 23:break;case 22:u=t.stateNode,x=t.alternate,t.memoizedState!==null?u._visibility&2?Wt(e,t,a,l):Rl(e,t):u._visibility&2?Wt(e,t,a,l):(u._visibility|=2,_s(e,t,a,l,(t.subtreeFlags&10256)!==0||!1)),o&2048&&gu(x,t);break;case 24:Wt(e,t,a,l),o&2048&&hu(t.alternate,t);break;default:Wt(e,t,a,l)}}function _s(e,t,a,l,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,x=t,w=a,R=l,F=x.flags;switch(x.tag){case 0:case 11:case 15:_s(u,x,w,R,o),Dl(8,x);break;case 23:break;case 22:var te=x.stateNode;x.memoizedState!==null?te._visibility&2?_s(u,x,w,R,o):Rl(u,x):(te._visibility|=2,_s(u,x,w,R,o)),o&&F&2048&&gu(x.alternate,x);break;case 24:_s(u,x,w,R,o),o&&F&2048&&hu(x.alternate,x);break;default:_s(u,x,w,R,o)}t=t.sibling}}function Rl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,l=t,o=l.flags;switch(l.tag){case 22:Rl(a,l),o&2048&&gu(l.alternate,l);break;case 24:Rl(a,l),o&2048&&hu(l.alternate,l);break;default:Rl(a,l)}t=t.sibling}}var Hl=8192;function Ms(e,t,a){if(e.subtreeFlags&Hl)for(e=e.child;e!==null;)yg(e,t,a),e=e.sibling}function yg(e,t,a){switch(e.tag){case 26:Ms(e,t,a),e.flags&Hl&&e.memoizedState!==null&&Hb(a,Jt,e.memoizedState,e.memoizedProps);break;case 5:Ms(e,t,a);break;case 3:case 4:var l=Jt;Jt=Di(e.stateNode.containerInfo),Ms(e,t,a),Jt=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Hl,Hl=16777216,Ms(e,t,a),Hl=l):Ms(e,t,a));break;default:Ms(e,t,a)}}function pg(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ll(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];it=l,vg(l,e)}pg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)bg(e),e=e.sibling}function bg(e){switch(e.tag){case 0:case 11:case 15:Ll(e),e.flags&2048&&sn(9,e,e.return);break;case 3:Ll(e);break;case 12:Ll(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,vi(e)):Ll(e);break;default:Ll(e)}}function vi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];it=l,vg(l,e)}pg(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:sn(8,t,t.return),vi(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,vi(t));break;default:vi(t)}e=e.sibling}}function vg(e,t){for(;it!==null;){var a=it;switch(a.tag){case 0:case 11:case 15:sn(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:vl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,it=l;else e:for(a=e;it!==null;){l=it;var o=l.sibling,u=l.return;if(ug(l),l===a){it=null;break e}if(o!==null){o.return=u,it=o;break e}it=u}}}var Wp={getCacheForType:function(e){var t=ut(Pe),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return ut(Pe).controller.signal}},Ip=typeof WeakMap=="function"?WeakMap:Map,Re=0,Ve=null,ze=null,Ae=0,He=0,Mt=null,ln=!1,Ds=!1,mu=!1,Ra=0,Fe=0,rn=0,Kn=0,xu=0,Dt=0,Os=0,Bl=null,kt=null,yu=!1,Ni=0,Ng=0,ji=1/0,wi=null,on=null,lt=0,cn=null,Rs=null,Ha=0,pu=0,bu=null,jg=null,Ul=0,vu=null;function Ot(){return(Re&2)!==0&&Ae!==0?Ae&-Ae:C.T!==null?Cu():zr()}function wg(){if(Dt===0)if((Ae&536870912)===0||_e){var e=ss;ss<<=1,(ss&3932160)===0&&(ss=262144),Dt=e}else Dt=536870912;return e=Tt.current,e!==null&&(e.flags|=32),Dt}function Ct(e,t,a){(e===Ve&&(He===2||He===9)||e.cancelPendingCommit!==null)&&(Hs(e,0),un(e,Ae,Dt,!1)),An(e,a),((Re&2)===0||e!==Ve)&&(e===Ve&&((Re&2)===0&&(Kn|=a),Fe===4&&un(e,Ae,Dt,!1)),ca(e))}function Sg(e,t,a){if((Re&6)!==0)throw Error(c(327));var l=!a&&(t&127)===0&&(t&e.expiredLanes)===0||En(e,t),o=l?tb(e,t):ju(e,t,!0),u=l;do{if(o===0){Ds&&!l&&un(e,t,0,!1);break}else{if(a=e.current.alternate,u&&!Pp(a)){o=ju(e,t,!1),u=!1;continue}if(o===2){if(u=t,e.errorRecoveryDisabledLanes&u)var x=0;else x=e.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){t=x;e:{var w=e;o=Bl;var R=w.current.memoizedState.isDehydrated;if(R&&(Hs(w,x).flags|=256),x=ju(w,x,!1),x!==2){if(mu&&!R){w.errorRecoveryDisabledLanes|=u,Kn|=u,o=4;break e}u=kt,kt=o,u!==null&&(kt===null?kt=u:kt.push.apply(kt,u))}o=x}if(u=!1,o!==2)continue}}if(o===1){Hs(e,0),un(e,t,0,!0);break}e:{switch(l=e,u=o,u){case 0:case 1:throw Error(c(345));case 4:if((t&4194048)!==t)break;case 6:un(l,t,Dt,!ln);break e;case 2:kt=null;break;case 3:case 5:break;default:throw Error(c(329))}if((t&62914560)===t&&(o=Ni+300-ot(),10<o)){if(un(l,t,Dt,!ln),rs(l,0,!0)!==0)break e;Ha=t,l.timeoutHandle=th(kg.bind(null,l,a,kt,wi,yu,t,Dt,Kn,Os,ln,u,"Throttled",-0,0),o);break e}kg(l,a,kt,wi,yu,t,Dt,Kn,Os,ln,u,null,-0,0)}}break}while(!0);ca(e)}function kg(e,t,a,l,o,u,x,w,R,F,te,ne,J,I){if(e.timeoutHandle=-1,ne=t.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Na},yg(t,u,ne);var de=(u&62914560)===u?Ni-ot():(u&4194048)===u?Ng-ot():0;if(de=Lb(ne,de),de!==null){Ha=u,e.cancelPendingCommit=de(Dg.bind(null,e,t,u,a,l,o,x,w,R,te,ne,null,J,I)),un(e,u,x,!F);return}}Dg(e,t,u,a,l,o,x,w,R)}function Pp(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var o=a[l],u=o.getSnapshot;o=o.value;try{if(!Et(u(),o))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function un(e,t,a,l){t&=~xu,t&=~Kn,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var o=t;0<o;){var u=31-mt(o),x=1<<u;l[u]=-1,o&=~x}a!==0&&Sr(e,a,t)}function Si(){return(Re&6)===0?(ql(0),!1):!0}function Nu(){if(ze!==null){if(He===0)var e=ze.return;else e=ze,ka=Un=null,Lc(e),Cs=null,jl=0,e=ze;for(;e!==null;)ag(e.alternate,e),e=e.return;ze=null}}function Hs(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,bb(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Ha=0,Nu(),Ve=e,ze=a=wa(e.current,null),Ae=t,He=0,Mt=null,ln=!1,Ds=En(e,t),mu=!1,Os=Dt=xu=Kn=rn=Fe=0,kt=Bl=null,yu=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var o=31-mt(l),u=1<<o;t|=e[o],l&=~u}return Ra=t,Zr(),a}function Cg(e,t){ke=null,C.H=Tl,t===ks||t===Pr?(t=Yf(),He=3):t===kc?(t=Yf(),He=4):He=t===Pc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Mt=t,ze===null&&(Fe=1,gi(e,Bt(t,e.current)))}function zg(){var e=Tt.current;return e===null?!0:(Ae&4194048)===Ae?Yt===null:(Ae&62914560)===Ae||(Ae&536870912)!==0?e===Yt:!1}function Eg(){var e=C.H;return C.H=Tl,e===null?Tl:e}function Ag(){var e=C.A;return C.A=Wp,e}function ki(){Fe=4,ln||(Ae&4194048)!==Ae&&Tt.current!==null||(Ds=!0),(rn&134217727)===0&&(Kn&134217727)===0||Ve===null||un(Ve,Ae,Dt,!1)}function ju(e,t,a){var l=Re;Re|=2;var o=Eg(),u=Ag();(Ve!==e||Ae!==t)&&(wi=null,Hs(e,t)),t=!1;var x=Fe;e:do try{if(He!==0&&ze!==null){var w=ze,R=Mt;switch(He){case 8:Nu(),x=6;break e;case 3:case 2:case 9:case 6:Tt.current===null&&(t=!0);var F=He;if(He=0,Mt=null,Ls(e,w,R,F),a&&Ds){x=0;break e}break;default:F=He,He=0,Mt=null,Ls(e,w,R,F)}}eb(),x=Fe;break}catch(te){Cg(e,te)}while(!0);return t&&e.shellSuspendCounter++,ka=Un=null,Re=l,C.H=o,C.A=u,ze===null&&(Ve=null,Ae=0,Zr()),x}function eb(){for(;ze!==null;)Tg(ze)}function tb(e,t){var a=Re;Re|=2;var l=Eg(),o=Ag();Ve!==e||Ae!==t?(wi=null,ji=ot()+500,Hs(e,t)):Ds=En(e,t);e:do try{if(He!==0&&ze!==null){t=ze;var u=Mt;t:switch(He){case 1:He=0,Mt=null,Ls(e,t,u,1);break;case 2:case 9:if(qf(u)){He=0,Mt=null,_g(t);break}t=function(){He!==2&&He!==9||Ve!==e||(He=7),ca(e)},u.then(t,t);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:qf(u)?(He=0,Mt=null,_g(t)):(He=0,Mt=null,Ls(e,t,u,7));break;case 5:var x=null;switch(ze.tag){case 26:x=ze.memoizedState;case 5:case 27:var w=ze;if(x?xh(x):w.stateNode.complete){He=0,Mt=null;var R=w.sibling;if(R!==null)ze=R;else{var F=w.return;F!==null?(ze=F,Ci(F)):ze=null}break t}}He=0,Mt=null,Ls(e,t,u,5);break;case 6:He=0,Mt=null,Ls(e,t,u,6);break;case 8:Nu(),Fe=6;break e;default:throw Error(c(462))}}ab();break}catch(te){Cg(e,te)}while(!0);return ka=Un=null,C.H=l,C.A=o,Re=a,ze!==null?0:(Ve=null,Ae=0,Zr(),Fe)}function ab(){for(;ze!==null&&!Sn();)Tg(ze)}function Tg(e){var t=eg(e.alternate,e,Ra);e.memoizedProps=e.pendingProps,t===null?Ci(e):ze=t}function _g(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=K0(a,t,t.pendingProps,t.type,void 0,Ae);break;case 11:t=K0(a,t,t.pendingProps,t.type.render,t.ref,Ae);break;case 5:Lc(t);default:ag(a,t),t=ze=Af(t,Ra),t=eg(a,t,Ra)}e.memoizedProps=e.pendingProps,t===null?Ci(e):ze=t}function Ls(e,t,a,l){ka=Un=null,Lc(t),Cs=null,jl=0;var o=t.return;try{if(Xp(e,o,t,a,Ae)){Fe=1,gi(e,Bt(a,e.current)),ze=null;return}}catch(u){if(o!==null)throw ze=o,u;Fe=1,gi(e,Bt(a,e.current)),ze=null;return}t.flags&32768?(_e||l===1?e=!0:Ds||(Ae&536870912)!==0?e=!1:(ln=e=!0,(l===2||l===9||l===3||l===6)&&(l=Tt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Mg(t,e)):Ci(t)}function Ci(e){var t=e;do{if((t.flags&32768)!==0){Mg(t,ln);return}e=t.return;var a=$p(t.alternate,t,Ra);if(a!==null){ze=a;return}if(t=t.sibling,t!==null){ze=t;return}ze=t=e}while(t!==null);Fe===0&&(Fe=5)}function Mg(e,t){do{var a=Kp(e.alternate,e);if(a!==null){a.flags&=32767,ze=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){ze=e;return}ze=e=a}while(e!==null);Fe=6,ze=null}function Dg(e,t,a,l,o,u,x,w,R){e.cancelPendingCommit=null;do zi();while(lt!==0);if((Re&6)!==0)throw Error(c(327));if(t!==null){if(t===e.current)throw Error(c(177));if(u=t.lanes|t.childLanes,u|=uc,qo(e,a,u,x,w,R),e===Ve&&(ze=Ve=null,Ae=0),Rs=t,cn=e,Ha=a,pu=u,bu=o,jg=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,rb(Cn,function(){return Bg(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=C.T,C.T=null,o=O.p,O.p=2,x=Re,Re|=4;try{Fp(e,t,a)}finally{Re=x,O.p=o,C.T=l}}lt=1,Og(),Rg(),Hg()}}function Og(){if(lt===1){lt=0;var e=cn,t=Rs,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=C.T,C.T=null;var l=O.p;O.p=2;var o=Re;Re|=4;try{hg(t,e);var u=Ou,x=vf(e.containerInfo),w=u.focusedElem,R=u.selectionRange;if(x!==w&&w&&w.ownerDocument&&bf(w.ownerDocument.documentElement,w)){if(R!==null&&lc(w)){var F=R.start,te=R.end;if(te===void 0&&(te=F),"selectionStart"in w)w.selectionStart=F,w.selectionEnd=Math.min(te,w.value.length);else{var ne=w.ownerDocument||document,J=ne&&ne.defaultView||window;if(J.getSelection){var I=J.getSelection(),de=w.textContent.length,ve=Math.min(R.start,de),qe=R.end===void 0?ve:Math.min(R.end,de);!I.extend&&ve>qe&&(x=qe,qe=ve,ve=x);var Z=pf(w,ve),V=pf(w,qe);if(Z&&V&&(I.rangeCount!==1||I.anchorNode!==Z.node||I.anchorOffset!==Z.offset||I.focusNode!==V.node||I.focusOffset!==V.offset)){var K=ne.createRange();K.setStart(Z.node,Z.offset),I.removeAllRanges(),ve>qe?(I.addRange(K),I.extend(V.node,V.offset)):(K.setEnd(V.node,V.offset),I.addRange(K))}}}}for(ne=[],I=w;I=I.parentNode;)I.nodeType===1&&ne.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ne.length;w++){var ae=ne[w];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Ui=!!Du,Ou=Du=null}finally{Re=o,O.p=l,C.T=a}}e.current=t,lt=2}}function Rg(){if(lt===2){lt=0;var e=cn,t=Rs,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=C.T,C.T=null;var l=O.p;O.p=2;var o=Re;Re|=4;try{cg(e,t.alternate,t)}finally{Re=o,O.p=l,C.T=a}}lt=3}}function Hg(){if(lt===4||lt===3){lt=0,kn();var e=cn,t=Rs,a=Ha,l=jg;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?lt=5:(lt=0,Rs=cn=null,Lg(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(on=null),ll(a),t=t.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(zn,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=C.T,o=O.p,O.p=2,C.T=null;try{for(var u=e.onRecoverableError,x=0;x<l.length;x++){var w=l[x];u(w.value,{componentStack:w.stack})}}finally{C.T=t,O.p=o}}(Ha&3)!==0&&zi(),ca(e),o=e.pendingLanes,(a&261930)!==0&&(o&42)!==0?e===vu?Ul++:(Ul=0,vu=e):Ul=0,ql(0)}}function Lg(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,vl(t)))}function zi(){return Og(),Rg(),Hg(),Bg()}function Bg(){if(lt!==5)return!1;var e=cn,t=pu;pu=0;var a=ll(Ha),l=C.T,o=O.p;try{O.p=32>a?32:a,C.T=null,a=bu,bu=null;var u=cn,x=Ha;if(lt=0,Rs=cn=null,Ha=0,(Re&6)!==0)throw Error(c(331));var w=Re;if(Re|=4,bg(u.current),xg(u,u.current,x,a),Re=w,ql(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(zn,u)}catch{}return!0}finally{O.p=o,C.T=l,Lg(e,t)}}function Ug(e,t,a){t=Bt(a,t),t=Ic(e.stateNode,t,2),e=tn(e,t,2),e!==null&&(An(e,2),ca(e))}function Le(e,t,a){if(e.tag===3)Ug(e,e,a);else for(;t!==null;){if(t.tag===3){Ug(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(on===null||!on.has(l))){e=Bt(a,e),a=q0(2),l=tn(t,a,2),l!==null&&(V0(a,l,t,e),An(l,2),ca(l));break}}t=t.return}}function wu(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new Ip;var o=new Set;l.set(t,o)}else o=l.get(t),o===void 0&&(o=new Set,l.set(t,o));o.has(a)||(mu=!0,o.add(a),e=nb.bind(null,e,t,a),t.then(e,e))}function nb(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ve===e&&(Ae&a)===a&&(Fe===4||Fe===3&&(Ae&62914560)===Ae&&300>ot()-Ni?(Re&2)===0&&Hs(e,0):xu|=a,Os===Ae&&(Os=0)),ca(e)}function qg(e,t){t===0&&(t=wr()),e=Hn(e,t),e!==null&&(An(e,t),ca(e))}function sb(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),qg(e,a)}function lb(e,t){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,o=e.memoizedState;o!==null&&(a=o.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(c(314))}l!==null&&l.delete(t),qg(e,a)}function rb(e,t){return $t(e,t)}var Ei=null,Bs=null,Su=!1,Ai=!1,ku=!1,dn=0;function ca(e){e!==Bs&&e.next===null&&(Bs===null?Ei=Bs=e:Bs=Bs.next=e),Ai=!0,Su||(Su=!0,ob())}function ql(e,t){if(!ku&&Ai){ku=!0;do for(var a=!1,l=Ei;l!==null;){if(e!==0){var o=l.pendingLanes;if(o===0)var u=0;else{var x=l.suspendedLanes,w=l.pingedLanes;u=(1<<31-mt(42|e)+1)-1,u&=o&~(x&~w),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(a=!0,Xg(l,u))}else u=Ae,u=rs(l,l===Ve?u:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(u&3)===0||En(l,u)||(a=!0,Xg(l,u));l=l.next}while(a);ku=!1}}function ib(){Vg()}function Vg(){Ai=Su=!1;var e=0;dn!==0&&pb()&&(e=dn);for(var t=ot(),a=null,l=Ei;l!==null;){var o=l.next,u=Yg(l,t);u===0?(l.next=null,a===null?Ei=o:a.next=o,o===null&&(Bs=a)):(a=l,(e!==0||(u&3)!==0)&&(Ai=!0)),l=o}lt!==0&&lt!==5||ql(e),dn!==0&&(dn=0)}function Yg(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,o=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var x=31-mt(u),w=1<<x,R=o[x];R===-1?((w&a)===0||(w&l)!==0)&&(o[x]=Uo(w,t)):R<=t&&(e.expiredLanes|=w),u&=~w}if(t=Ve,a=Ae,a=rs(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===t&&(He===2||He===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&ma(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||En(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(l!==null&&ma(l),ll(a)){case 2:case 8:a=Ya;break;case 32:a=Cn;break;case 268435456:a=as;break;default:a=Cn}return l=Gg.bind(null,e),a=$t(a,l),e.callbackPriority=t,e.callbackNode=a,t}return l!==null&&l!==null&&ma(l),e.callbackPriority=2,e.callbackNode=null,2}function Gg(e,t){if(lt!==0&&lt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(zi()&&e.callbackNode!==a)return null;var l=Ae;return l=rs(e,e===Ve?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Sg(e,l,t),Yg(e,ot()),e.callbackNode!=null&&e.callbackNode===a?Gg.bind(null,e):null)}function Xg(e,t){if(zi())return null;Sg(e,t,!0)}function ob(){vb(function(){(Re&6)!==0?$t(xa,ib):Vg()})}function Cu(){if(dn===0){var e=ws;e===0&&(e=ns,ns<<=1,(ns&261888)===0&&(ns=256)),dn=e}return dn}function Zg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Lr(""+e)}function Qg(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function cb(e,t,a,l,o){if(t==="submit"&&a&&a.stateNode===o){var u=Zg((o[gt]||null).action),x=l.submitter;x&&(t=(t=x[gt]||null)?Zg(t.formAction):x.getAttribute("formAction"),t!==null&&(u=t,x=null));var w=new Vr("action","action",null,l,o);e.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(dn!==0){var R=x?Qg(o,x):new FormData(o);Qc(a,{pending:!0,data:R,method:o.method,action:u},null,R)}}else typeof u=="function"&&(w.preventDefault(),R=x?Qg(o,x):new FormData(o),Qc(a,{pending:!0,data:R,method:o.method,action:u},u,R))},currentTarget:o}]})}}for(var zu=0;zu<cc.length;zu++){var Eu=cc[zu],ub=Eu.toLowerCase(),db=Eu[0].toUpperCase()+Eu.slice(1);Ft(ub,"on"+db)}Ft(wf,"onAnimationEnd"),Ft(Sf,"onAnimationIteration"),Ft(kf,"onAnimationStart"),Ft("dblclick","onDoubleClick"),Ft("focusin","onFocus"),Ft("focusout","onBlur"),Ft(zp,"onTransitionRun"),Ft(Ep,"onTransitionStart"),Ft(Ap,"onTransitionCancel"),Ft(Cf,"onTransitionEnd"),$a("onMouseEnter",["mouseout","mouseover"]),$a("onMouseLeave",["mouseout","mouseover"]),$a("onPointerEnter",["pointerout","pointerover"]),$a("onPointerLeave",["pointerout","pointerover"]),ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ba("onBeforeInput",["compositionend","keypress","textInput","paste"]),ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vl));function $g(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],o=l.event;l=l.listeners;e:{var u=void 0;if(t)for(var x=l.length-1;0<=x;x--){var w=l[x],R=w.instance,F=w.currentTarget;if(w=w.listener,R!==u&&o.isPropagationStopped())break e;u=w,o.currentTarget=F;try{u(o)}catch(te){Xr(te)}o.currentTarget=null,u=R}else for(x=0;x<l.length;x++){if(w=l[x],R=w.instance,F=w.currentTarget,w=w.listener,R!==u&&o.isPropagationStopped())break e;u=w,o.currentTarget=F;try{u(o)}catch(te){Xr(te)}o.currentTarget=null,u=R}}}}function Ee(e,t){var a=t[is];a===void 0&&(a=t[is]=new Set);var l=e+"__bubble";a.has(l)||(Kg(t,e,2,!1),a.add(l))}function Au(e,t,a){var l=0;t&&(l|=4),Kg(a,e,l,t)}var Ti="_reactListening"+Math.random().toString(36).slice(2);function Tu(e){if(!e[Ti]){e[Ti]=!0,_r.forEach(function(a){a!=="selectionchange"&&(fb.has(a)||Au(a,!1,e),Au(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ti]||(t[Ti]=!0,Au("selectionchange",!1,t))}}function Kg(e,t,a,l){switch(wh(t)){case 2:var o=qb;break;case 8:o=Vb;break;default:o=Zu}a=o.bind(null,t,a,e),o=void 0,!Jo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),l?o!==void 0?e.addEventListener(t,a,{capture:!0,passive:o}):e.addEventListener(t,a,!0):o!==void 0?e.addEventListener(t,a,{passive:o}):e.addEventListener(t,a,!1)}function _u(e,t,a,l,o){var u=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var w=l.stateNode.containerInfo;if(w===o)break;if(x===4)for(x=l.return;x!==null;){var R=x.tag;if((R===3||R===4)&&x.stateNode.containerInfo===o)return;x=x.return}for(;w!==null;){if(x=Ga(w),x===null)return;if(R=x.tag,R===5||R===6||R===26||R===27){l=u=x;continue e}w=w.parentNode}}l=l.return}Id(function(){var F=u,te=Ko(a),ne=[];e:{var J=zf.get(e);if(J!==void 0){var I=Vr,de=e;switch(e){case"keypress":if(Ur(a)===0)break e;case"keydown":case"keyup":I=lp;break;case"focusin":de="focus",I=ec;break;case"focusout":de="blur",I=ec;break;case"beforeblur":case"afterblur":I=ec;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=tf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=$y;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=op;break;case wf:case Sf:case kf:I=Jy;break;case Cf:I=up;break;case"scroll":case"scrollend":I=Zy;break;case"wheel":I=fp;break;case"copy":case"cut":case"paste":I=Iy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=nf;break;case"toggle":case"beforetoggle":I=hp}var ve=(t&4)!==0,qe=!ve&&(e==="scroll"||e==="scrollend"),Z=ve?J!==null?J+"Capture":null:J;ve=[];for(var V=F,K;V!==null;){var ae=V;if(K=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||K===null||Z===null||(ae=cl(V,Z),ae!=null&&ve.push(Yl(V,ae,K))),qe)break;V=V.return}0<ve.length&&(J=new I(J,de,null,a,te),ne.push({event:J,listeners:ve}))}}if((t&7)===0){e:{if(J=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",J&&a!==$o&&(de=a.relatedTarget||a.fromElement)&&(Ga(de)||de[pa]))break e;if((I||J)&&(J=te.window===te?te:(J=te.ownerDocument)?J.defaultView||J.parentWindow:window,I?(de=a.relatedTarget||a.toElement,I=F,de=de?Ga(de):null,de!==null&&(qe=f(de),ve=de.tag,de!==qe||ve!==5&&ve!==27&&ve!==6)&&(de=null)):(I=null,de=F),I!==de)){if(ve=tf,ae="onMouseLeave",Z="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(ve=nf,ae="onPointerLeave",Z="onPointerEnter",V="pointer"),qe=I==null?J:Za(I),K=de==null?J:Za(de),J=new ve(ae,V+"leave",I,a,te),J.target=qe,J.relatedTarget=K,ae=null,Ga(te)===F&&(ve=new ve(Z,V+"enter",de,a,te),ve.target=K,ve.relatedTarget=qe,ae=ve),qe=ae,I&&de)t:{for(ve=gb,Z=I,V=de,K=0,ae=Z;ae;ae=ve(ae))K++;ae=0;for(var xe=V;xe;xe=ve(xe))ae++;for(;0<K-ae;)Z=ve(Z),K--;for(;0<ae-K;)V=ve(V),ae--;for(;K--;){if(Z===V||V!==null&&Z===V.alternate){ve=Z;break t}Z=ve(Z),V=ve(V)}ve=null}else ve=null;I!==null&&Fg(ne,J,I,ve,!1),de!==null&&qe!==null&&Fg(ne,qe,de,ve,!0)}}e:{if(J=F?Za(F):window,I=J.nodeName&&J.nodeName.toLowerCase(),I==="select"||I==="input"&&J.type==="file")var De=ff;else if(uf(J))if(gf)De=Sp;else{De=jp;var ge=Np}else I=J.nodeName,!I||I.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?F&&Qo(F.elementType)&&(De=ff):De=wp;if(De&&(De=De(e,F))){df(ne,De,a,te);break e}ge&&ge(e,J,F),e==="focusout"&&F&&J.type==="number"&&F.memoizedProps.value!=null&&ol(J,"number",J.value)}switch(ge=F?Za(F):window,e){case"focusin":(uf(ge)||ge.contentEditable==="true")&&(ms=ge,rc=F,yl=null);break;case"focusout":yl=rc=ms=null;break;case"mousedown":ic=!0;break;case"contextmenu":case"mouseup":case"dragend":ic=!1,Nf(ne,a,te);break;case"selectionchange":if(Cp)break;case"keydown":case"keyup":Nf(ne,a,te)}var Ce;if(ac)e:{switch(e){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else hs?of(e,a)&&(Te="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(sf&&a.locale!=="ko"&&(hs||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&hs&&(Ce=Pd()):(Ka=te,Wo="value"in Ka?Ka.value:Ka.textContent,hs=!0)),ge=_i(F,Te),0<ge.length&&(Te=new af(Te,e,null,a,te),ne.push({event:Te,listeners:ge}),Ce?Te.data=Ce:(Ce=cf(a),Ce!==null&&(Te.data=Ce)))),(Ce=xp?yp(e,a):pp(e,a))&&(Te=_i(F,"onBeforeInput"),0<Te.length&&(ge=new af("onBeforeInput","beforeinput",null,a,te),ne.push({event:ge,listeners:Te}),ge.data=Ce)),cb(ne,e,F,a,te)}$g(ne,t)})}function Yl(e,t,a){return{instance:e,listener:t,currentTarget:a}}function _i(e,t){for(var a=t+"Capture",l=[];e!==null;){var o=e,u=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||u===null||(o=cl(e,a),o!=null&&l.unshift(Yl(e,o,u)),o=cl(e,t),o!=null&&l.push(Yl(e,o,u))),e.tag===3)return l;e=e.return}return[]}function gb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Fg(e,t,a,l,o){for(var u=t._reactName,x=[];a!==null&&a!==l;){var w=a,R=w.alternate,F=w.stateNode;if(w=w.tag,R!==null&&R===l)break;w!==5&&w!==26&&w!==27||F===null||(R=F,o?(F=cl(a,u),F!=null&&x.unshift(Yl(a,F,R))):o||(F=cl(a,u),F!=null&&x.push(Yl(a,F,R)))),a=a.return}x.length!==0&&e.push({event:t,listeners:x})}var hb=/\r\n?/g,mb=/\u0000|\uFFFD/g;function Jg(e){return(typeof e=="string"?e:""+e).replace(hb,`
`).replace(mb,"")}function Wg(e,t){return t=Jg(t),Jg(e)===t}function Ue(e,t,a,l,o,u){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||ds(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&ds(e,""+l);break;case"className":cs(e,"class",l);break;case"tabIndex":cs(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":cs(e,a,l);break;case"style":Jd(e,l,u);break;case"data":if(t!=="object"){cs(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Lr(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(a==="formAction"?(t!=="input"&&Ue(e,t,"name",o.name,o,null),Ue(e,t,"formEncType",o.formEncType,o,null),Ue(e,t,"formMethod",o.formMethod,o,null),Ue(e,t,"formTarget",o.formTarget,o,null)):(Ue(e,t,"encType",o.encType,o,null),Ue(e,t,"method",o.method,o,null),Ue(e,t,"target",o.target,o,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Lr(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Na);break;case"onScroll":l!=null&&Ee("scroll",e);break;case"onScrollEnd":l!=null&&Ee("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(c(61));if(a=l.__html,a!=null){if(o.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Lr(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Ee("beforetoggle",e),Ee("toggle",e),os(e,"popover",l);break;case"xlinkActuate":Kt(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Kt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Kt(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Kt(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Kt(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Kt(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Kt(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Kt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Kt(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":os(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Gy.get(a)||a,os(e,a,l))}}function Mu(e,t,a,l,o,u){switch(a){case"style":Jd(e,l,u);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(c(61));if(a=l.__html,a!=null){if(o.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"children":typeof l=="string"?ds(e,l):(typeof l=="number"||typeof l=="bigint")&&ds(e,""+l);break;case"onScroll":l!=null&&Ee("scroll",e);break;case"onScrollEnd":l!=null&&Ee("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Na);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(o=a.endsWith("Capture"),t=a.slice(2,o?a.length-7:void 0),u=e[gt]||null,u=u!=null?u[a]:null,typeof u=="function"&&e.removeEventListener(t,u,o),typeof l=="function")){typeof u!="function"&&u!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,l,o);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):os(e,a,l)}}}function ft(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ee("error",e),Ee("load",e);var l=!1,o=!1,u;for(u in a)if(a.hasOwnProperty(u)){var x=a[u];if(x!=null)switch(u){case"src":l=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:Ue(e,t,u,x,a,null)}}o&&Ue(e,t,"srcSet",a.srcSet,a,null),l&&Ue(e,t,"src",a.src,a,null);return;case"input":Ee("invalid",e);var w=u=x=o=null,R=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var te=a[l];if(te!=null)switch(l){case"name":o=te;break;case"type":x=te;break;case"checked":R=te;break;case"defaultChecked":F=te;break;case"value":u=te;break;case"defaultValue":w=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(c(137,t));break;default:Ue(e,t,l,te,a,null)}}Hr(e,u,w,R,F,x,o,!1);return;case"select":Ee("invalid",e),l=x=u=null;for(o in a)if(a.hasOwnProperty(o)&&(w=a[o],w!=null))switch(o){case"value":u=w;break;case"defaultValue":x=w;break;case"multiple":l=w;default:Ue(e,t,o,w,a,null)}t=u,a=x,e.multiple=!!l,t!=null?va(e,!!l,t,!1):a!=null&&va(e,!!l,a,!0);return;case"textarea":Ee("invalid",e),u=o=l=null;for(x in a)if(a.hasOwnProperty(x)&&(w=a[x],w!=null))switch(x){case"value":l=w;break;case"defaultValue":o=w;break;case"children":u=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(c(91));break;default:Ue(e,t,x,w,a,null)}Kd(e,l,o,u);return;case"option":for(R in a)a.hasOwnProperty(R)&&(l=a[R],l!=null)&&(R==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":Ue(e,t,R,l,a,null));return;case"dialog":Ee("beforetoggle",e),Ee("toggle",e),Ee("cancel",e),Ee("close",e);break;case"iframe":case"object":Ee("load",e);break;case"video":case"audio":for(l=0;l<Vl.length;l++)Ee(Vl[l],e);break;case"image":Ee("error",e),Ee("load",e);break;case"details":Ee("toggle",e);break;case"embed":case"source":case"link":Ee("error",e),Ee("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:Ue(e,t,F,l,a,null)}return;default:if(Qo(t)){for(te in a)a.hasOwnProperty(te)&&(l=a[te],l!==void 0&&Mu(e,t,te,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&Ue(e,t,w,l,a,null))}function xb(e,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,u=null,x=null,w=null,R=null,F=null,te=null;for(I in a){var ne=a[I];if(a.hasOwnProperty(I)&&ne!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":R=ne;default:l.hasOwnProperty(I)||Ue(e,t,I,null,l,ne)}}for(var J in l){var I=l[J];if(ne=a[J],l.hasOwnProperty(J)&&(I!=null||ne!=null))switch(J){case"type":u=I;break;case"name":o=I;break;case"checked":F=I;break;case"defaultChecked":te=I;break;case"value":x=I;break;case"defaultValue":w=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(c(137,t));break;default:I!==ne&&Ue(e,t,J,I,l,ne)}}Mn(e,x,w,R,F,te,u,o);return;case"select":I=x=w=J=null;for(u in a)if(R=a[u],a.hasOwnProperty(u)&&R!=null)switch(u){case"value":break;case"multiple":I=R;default:l.hasOwnProperty(u)||Ue(e,t,u,null,l,R)}for(o in l)if(u=l[o],R=a[o],l.hasOwnProperty(o)&&(u!=null||R!=null))switch(o){case"value":J=u;break;case"defaultValue":w=u;break;case"multiple":x=u;default:u!==R&&Ue(e,t,o,u,l,R)}t=w,a=x,l=I,J!=null?va(e,!!a,J,!1):!!l!=!!a&&(t!=null?va(e,!!a,t,!0):va(e,!!a,a?[]:"",!1));return;case"textarea":I=J=null;for(w in a)if(o=a[w],a.hasOwnProperty(w)&&o!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Ue(e,t,w,null,l,o)}for(x in l)if(o=l[x],u=a[x],l.hasOwnProperty(x)&&(o!=null||u!=null))switch(x){case"value":J=o;break;case"defaultValue":I=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(c(91));break;default:o!==u&&Ue(e,t,x,o,l,u)}$d(e,J,I);return;case"option":for(var de in a)J=a[de],a.hasOwnProperty(de)&&J!=null&&!l.hasOwnProperty(de)&&(de==="selected"?e.selected=!1:Ue(e,t,de,null,l,J));for(R in l)J=l[R],I=a[R],l.hasOwnProperty(R)&&J!==I&&(J!=null||I!=null)&&(R==="selected"?e.selected=J&&typeof J!="function"&&typeof J!="symbol":Ue(e,t,R,J,l,I));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)J=a[ve],a.hasOwnProperty(ve)&&J!=null&&!l.hasOwnProperty(ve)&&Ue(e,t,ve,null,l,J);for(F in l)if(J=l[F],I=a[F],l.hasOwnProperty(F)&&J!==I&&(J!=null||I!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(c(137,t));break;default:Ue(e,t,F,J,l,I)}return;default:if(Qo(t)){for(var qe in a)J=a[qe],a.hasOwnProperty(qe)&&J!==void 0&&!l.hasOwnProperty(qe)&&Mu(e,t,qe,void 0,l,J);for(te in l)J=l[te],I=a[te],!l.hasOwnProperty(te)||J===I||J===void 0&&I===void 0||Mu(e,t,te,J,l,I);return}}for(var Z in a)J=a[Z],a.hasOwnProperty(Z)&&J!=null&&!l.hasOwnProperty(Z)&&Ue(e,t,Z,null,l,J);for(ne in l)J=l[ne],I=a[ne],!l.hasOwnProperty(ne)||J===I||J==null&&I==null||Ue(e,t,ne,J,l,I)}function Ig(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var o=a[l],u=o.transferSize,x=o.initiatorType,w=o.duration;if(u&&w&&Ig(x)){for(x=0,w=o.responseEnd,l+=1;l<a.length;l++){var R=a[l],F=R.startTime;if(F>w)break;var te=R.transferSize,ne=R.initiatorType;te&&Ig(ne)&&(R=R.responseEnd,x+=te*(R<w?1:(w-F)/(R-F)))}if(--l,t+=8*(u+x)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Du=null,Ou=null;function Mi(e){return e.nodeType===9?e:e.ownerDocument}function Pg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ru(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hu=null;function pb(){var e=window.event;return e&&e.type==="popstate"?e===Hu?!1:(Hu=e,!0):(Hu=null,!1)}var th=typeof setTimeout=="function"?setTimeout:void 0,bb=typeof clearTimeout=="function"?clearTimeout:void 0,ah=typeof Promise=="function"?Promise:void 0,vb=typeof queueMicrotask=="function"?queueMicrotask:typeof ah<"u"?function(e){return ah.resolve(null).then(e).catch(Nb)}:th;function Nb(e){setTimeout(function(){throw e})}function fn(e){return e==="head"}function nh(e,t){var a=t,l=0;do{var o=a.nextSibling;if(e.removeChild(a),o&&o.nodeType===8)if(a=o.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(o),Ys(t);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Gl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Gl(a);for(var u=a.firstChild;u;){var x=u.nextSibling,w=u.nodeName;u[Tn]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&u.rel.toLowerCase()==="stylesheet"||a.removeChild(u),u=x}}else a==="body"&&Gl(e.ownerDocument.body);a=o}while(a);Ys(t)}function sh(e,t){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function Lu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Lu(a),rl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function jb(e,t,a,l){for(;e.nodeType===1;){var o=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Tn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Gt(e.nextSibling),e===null)break}return null}function wb(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Gt(e.nextSibling),e===null))return null;return e}function lh(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Gt(e.nextSibling),e===null))return null;return e}function Bu(e){return e.data==="$?"||e.data==="$~"}function Uu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Sb(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Gt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var qu=null;function rh(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Gt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function ih(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function oh(e,t,a){switch(t=Mi(a),e){case"html":if(e=t.documentElement,!e)throw Error(c(452));return e;case"head":if(e=t.head,!e)throw Error(c(453));return e;case"body":if(e=t.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function Gl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);rl(e)}var Xt=new Map,ch=new Set;function Di(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var La=O.d;O.d={f:kb,r:Cb,D:zb,C:Eb,L:Ab,m:Tb,X:Mb,S:_b,M:Db};function kb(){var e=La.f(),t=Si();return e||t}function Cb(e){var t=Xa(e);t!==null&&t.tag===5&&t.type==="form"?C0(t):La.r(e)}var Us=typeof document>"u"?null:document;function uh(e,t,a){var l=Us;if(l&&typeof t=="string"&&t){var o=vt(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof a=="string"&&(o+='[crossorigin="'+a+'"]'),ch.has(o)||(ch.add(o),e={rel:e,crossOrigin:a,href:t},l.querySelector(o)===null&&(t=l.createElement("link"),ft(t,"link",e),Ie(t),l.head.appendChild(t)))}}function zb(e){La.D(e),uh("dns-prefetch",e,null)}function Eb(e,t){La.C(e,t),uh("preconnect",e,t)}function Ab(e,t,a){La.L(e,t,a);var l=Us;if(l&&e&&t){var o='link[rel="preload"][as="'+vt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(o+='[imagesrcset="'+vt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(o+='[imagesizes="'+vt(a.imageSizes)+'"]')):o+='[href="'+vt(e)+'"]';var u=o;switch(t){case"style":u=qs(e);break;case"script":u=Vs(e)}Xt.has(u)||(e=b({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Xt.set(u,e),l.querySelector(o)!==null||t==="style"&&l.querySelector(Xl(u))||t==="script"&&l.querySelector(Zl(u))||(t=l.createElement("link"),ft(t,"link",e),Ie(t),l.head.appendChild(t)))}}function Tb(e,t){La.m(e,t);var a=Us;if(a&&e){var l=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+vt(l)+'"][href="'+vt(e)+'"]',u=o;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=Vs(e)}if(!Xt.has(u)&&(e=b({rel:"modulepreload",href:e},t),Xt.set(u,e),a.querySelector(o)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Zl(u)))return}l=a.createElement("link"),ft(l,"link",e),Ie(l),a.head.appendChild(l)}}}function _b(e,t,a){La.S(e,t,a);var l=Us;if(l&&e){var o=Qa(l).hoistableStyles,u=qs(e);t=t||"default";var x=o.get(u);if(!x){var w={loading:0,preload:null};if(x=l.querySelector(Xl(u)))w.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Xt.get(u))&&Vu(e,a);var R=x=l.createElement("link");Ie(R),ft(R,"link",e),R._p=new Promise(function(F,te){R.onload=F,R.onerror=te}),R.addEventListener("load",function(){w.loading|=1}),R.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Oi(x,t,l)}x={type:"stylesheet",instance:x,count:1,state:w},o.set(u,x)}}}function Mb(e,t){La.X(e,t);var a=Us;if(a&&e){var l=Qa(a).hoistableScripts,o=Vs(e),u=l.get(o);u||(u=a.querySelector(Zl(o)),u||(e=b({src:e,async:!0},t),(t=Xt.get(o))&&Yu(e,t),u=a.createElement("script"),Ie(u),ft(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},l.set(o,u))}}function Db(e,t){La.M(e,t);var a=Us;if(a&&e){var l=Qa(a).hoistableScripts,o=Vs(e),u=l.get(o);u||(u=a.querySelector(Zl(o)),u||(e=b({src:e,async:!0,type:"module"},t),(t=Xt.get(o))&&Yu(e,t),u=a.createElement("script"),Ie(u),ft(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},l.set(o,u))}}function dh(e,t,a,l){var o=(o=be.current)?Di(o):null;if(!o)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=qs(a.href),a=Qa(o).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=qs(a.href);var u=Qa(o).hoistableStyles,x=u.get(e);if(x||(o=o.ownerDocument||o,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,x),(u=o.querySelector(Xl(e)))&&!u._p&&(x.instance=u,x.state.loading=5),Xt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Xt.set(e,a),u||Ob(o,e,a,x.state))),t&&l===null)throw Error(c(528,""));return x}if(t&&l!==null)throw Error(c(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Vs(a),a=Qa(o).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function qs(e){return'href="'+vt(e)+'"'}function Xl(e){return'link[rel="stylesheet"]['+e+"]"}function fh(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Ob(e,t,a,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),ft(t,"link",a),Ie(t),e.head.appendChild(t))}function Vs(e){return'[src="'+vt(e)+'"]'}function Zl(e){return"script[async]"+e}function gh(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+vt(a.href)+'"]');if(l)return t.instance=l,Ie(l),l;var o=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Ie(l),ft(l,"style",o),Oi(l,a.precedence,e),t.instance=l;case"stylesheet":o=qs(a.href);var u=e.querySelector(Xl(o));if(u)return t.state.loading|=4,t.instance=u,Ie(u),u;l=fh(a),(o=Xt.get(o))&&Vu(l,o),u=(e.ownerDocument||e).createElement("link"),Ie(u);var x=u;return x._p=new Promise(function(w,R){x.onload=w,x.onerror=R}),ft(u,"link",l),t.state.loading|=4,Oi(u,a.precedence,e),t.instance=u;case"script":return u=Vs(a.src),(o=e.querySelector(Zl(u)))?(t.instance=o,Ie(o),o):(l=a,(o=Xt.get(u))&&(l=b({},a),Yu(l,o)),e=e.ownerDocument||e,o=e.createElement("script"),Ie(o),ft(o,"link",l),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(c(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Oi(l,a.precedence,e));return t.instance}function Oi(e,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=l.length?l[l.length-1]:null,u=o,x=0;x<l.length;x++){var w=l[x];if(w.dataset.precedence===t)u=w;else if(u!==o)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Vu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Yu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ri=null;function hh(e,t,a){if(Ri===null){var l=new Map,o=Ri=new Map;o.set(a,l)}else o=Ri,l=o.get(a),l||(l=new Map,o.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),o=0;o<a.length;o++){var u=a[o];if(!(u[Tn]||u[st]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var x=u.getAttribute(t)||"";x=e+x;var w=l.get(x);w?w.push(u):l.set(x,[u])}}return l}function mh(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Rb(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function xh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Hb(e,t,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var o=qs(l.href),u=t.querySelector(Xl(o));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Hi.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=u,Ie(u);return}u=t.ownerDocument||t,l=fh(l),(o=Xt.get(o))&&Vu(l,o),u=u.createElement("link"),Ie(u);var x=u;x._p=new Promise(function(w,R){x.onload=w,x.onerror=R}),ft(u,"link",l),a.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Hi.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Gu=0;function Lb(e,t){return e.stylesheets&&e.count===0&&Bi(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&Bi(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&Gu===0&&(Gu=62500*yb());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Bi(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>Gu?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(o)}}:null}function Hi(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Bi(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Li=null;function Bi(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Li=new Map,t.forEach(Bb,e),Li=null,Hi.call(e))}function Bb(e,t){if(!(t.state.loading&4)){var a=Li.get(e);if(a)var l=a.get(null);else{a=new Map,Li.set(e,a);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<o.length;u++){var x=o[u];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),l=x)}l&&a.set(null,l)}o=t.instance,x=o.getAttribute("data-precedence"),u=a.get(x)||l,u===l&&a.set(null,o),a.set(x,o),this.count++,l=Hi.bind(this),o.addEventListener("load",l),o.addEventListener("error",l),u?u.parentNode.insertBefore(o,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var Ql={$$typeof:j,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function Ub(e,t,a,l,o,u,x,w,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nl(0),this.hiddenUpdates=nl(null),this.identifierPrefix=l,this.onUncaughtError=o,this.onCaughtError=u,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function yh(e,t,a,l,o,u,x,w,R,F,te,ne){return e=new Ub(e,t,a,x,R,F,te,ne,w),t=1,u===!0&&(t|=24),u=At(3,null,null,t),e.current=u,u.stateNode=e,t=jc(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:l,isDehydrated:a,cache:t},Cc(u),e}function ph(e){return e?(e=ps,e):ps}function bh(e,t,a,l,o,u){o=ph(o),l.context===null?l.context=o:l.pendingContext=o,l=en(t),l.payload={element:a},u=u===void 0?null:u,u!==null&&(l.callback=u),a=tn(e,l,t),a!==null&&(Ct(a,e,t),Sl(a,e,t))}function vh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Xu(e,t){vh(e,t),(e=e.alternate)&&vh(e,t)}function Nh(e){if(e.tag===13||e.tag===31){var t=Hn(e,67108864);t!==null&&Ct(t,e,67108864),Xu(e,67108864)}}function jh(e){if(e.tag===13||e.tag===31){var t=Ot();t=sl(t);var a=Hn(e,t);a!==null&&Ct(a,e,t),Xu(e,t)}}var Ui=!0;function qb(e,t,a,l){var o=C.T;C.T=null;var u=O.p;try{O.p=2,Zu(e,t,a,l)}finally{O.p=u,C.T=o}}function Vb(e,t,a,l){var o=C.T;C.T=null;var u=O.p;try{O.p=8,Zu(e,t,a,l)}finally{O.p=u,C.T=o}}function Zu(e,t,a,l){if(Ui){var o=Qu(l);if(o===null)_u(e,t,l,qi,a),Sh(e,l);else if(Gb(o,e,t,a,l))l.stopPropagation();else if(Sh(e,l),t&4&&-1<Yb.indexOf(e)){for(;o!==null;){var u=Xa(o);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var x=ya(u.pendingLanes);if(x!==0){var w=u;for(w.pendingLanes|=2,w.entangledLanes|=2;x;){var R=1<<31-mt(x);w.entanglements[1]|=R,x&=~R}ca(u),(Re&6)===0&&(ji=ot()+500,ql(0))}}break;case 31:case 13:w=Hn(u,2),w!==null&&Ct(w,u,2),Si(),Xu(u,2)}if(u=Qu(l),u===null&&_u(e,t,l,qi,a),u===o)break;o=u}o!==null&&l.stopPropagation()}else _u(e,t,l,null,a)}}function Qu(e){return e=Ko(e),$u(e)}var qi=null;function $u(e){if(qi=null,e=Ga(e),e!==null){var t=f(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=g(t),e!==null)return e;e=null}else if(a===31){if(e=h(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return qi=e,null}function wh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ts()){case xa:return 2;case Ya:return 8;case Cn:case Do:return 32;case as:return 268435456;default:return 32}default:return 32}}var Ku=!1,gn=null,hn=null,mn=null,$l=new Map,Kl=new Map,xn=[],Yb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sh(e,t){switch(e){case"focusin":case"focusout":gn=null;break;case"dragenter":case"dragleave":hn=null;break;case"mouseover":case"mouseout":mn=null;break;case"pointerover":case"pointerout":$l.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kl.delete(t.pointerId)}}function Fl(e,t,a,l,o,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:u,targetContainers:[o]},t!==null&&(t=Xa(t),t!==null&&Nh(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Gb(e,t,a,l,o){switch(t){case"focusin":return gn=Fl(gn,e,t,a,l,o),!0;case"dragenter":return hn=Fl(hn,e,t,a,l,o),!0;case"mouseover":return mn=Fl(mn,e,t,a,l,o),!0;case"pointerover":var u=o.pointerId;return $l.set(u,Fl($l.get(u)||null,e,t,a,l,o)),!0;case"gotpointercapture":return u=o.pointerId,Kl.set(u,Fl(Kl.get(u)||null,e,t,a,l,o)),!0}return!1}function kh(e){var t=Ga(e.target);if(t!==null){var a=f(t);if(a!==null){if(t=a.tag,t===13){if(t=g(a),t!==null){e.blockedOn=t,Er(e.priority,function(){jh(a)});return}}else if(t===31){if(t=h(a),t!==null){e.blockedOn=t,Er(e.priority,function(){jh(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Qu(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);$o=l,a.target.dispatchEvent(l),$o=null}else return t=Xa(a),t!==null&&Nh(t),e.blockedOn=a,!1;t.shift()}return!0}function Ch(e,t,a){Vi(e)&&a.delete(t)}function Xb(){Ku=!1,gn!==null&&Vi(gn)&&(gn=null),hn!==null&&Vi(hn)&&(hn=null),mn!==null&&Vi(mn)&&(mn=null),$l.forEach(Ch),Kl.forEach(Ch)}function Yi(e,t){e.blockedOn===t&&(e.blockedOn=null,Ku||(Ku=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Xb)))}var Gi=null;function zh(e){Gi!==e&&(Gi=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Gi===e&&(Gi=null);for(var t=0;t<e.length;t+=3){var a=e[t],l=e[t+1],o=e[t+2];if(typeof l!="function"){if($u(l||a)===null)continue;break}var u=Xa(a);u!==null&&(e.splice(t,3),t-=3,Qc(u,{pending:!0,data:o,method:a.method,action:l},l,o))}}))}function Ys(e){function t(R){return Yi(R,e)}gn!==null&&Yi(gn,e),hn!==null&&Yi(hn,e),mn!==null&&Yi(mn,e),$l.forEach(t),Kl.forEach(t);for(var a=0;a<xn.length;a++){var l=xn[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<xn.length&&(a=xn[0],a.blockedOn===null);)kh(a),a.blockedOn===null&&xn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var o=a[l],u=a[l+1],x=o[gt]||null;if(typeof u=="function")x||zh(a);else if(x){var w=null;if(u&&u.hasAttribute("formAction")){if(o=u,x=u[gt]||null)w=x.formAction;else if($u(o)!==null)continue}else w=x.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),zh(a)}}}function Eh(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(x){return o=x})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function Fu(e){this._internalRoot=e}Xi.prototype.render=Fu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));var a=t.current,l=Ot();bh(a,l,e,t,null,null)},Xi.prototype.unmount=Fu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;bh(e.current,2,null,e,null,null),Si(),t[pa]=null}};function Xi(e){this._internalRoot=e}Xi.prototype.unstable_scheduleHydration=function(e){if(e){var t=zr();e={blockedOn:null,target:e,priority:t};for(var a=0;a<xn.length&&t!==0&&t<xn[a].priority;a++);xn.splice(a,0,e),a===0&&kh(e)}};var Ah=r.version;if(Ah!=="19.2.3")throw Error(c(527,Ah,"19.2.3"));O.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=y(t),e=e!==null?p(e):null,e=e===null?null:e.stateNode,e};var Zb={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:C,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zi.isDisabled&&Zi.supportsFiber)try{zn=Zi.inject(Zb),ht=Zi}catch{}}return Wl.createRoot=function(e,t){if(!d(e))throw Error(c(299));var a=!1,l="",o=H0,u=L0,x=B0;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(x=t.onRecoverableError)),t=yh(e,1,!1,null,null,a,l,null,o,u,x,Eh),e[pa]=t.current,Tu(e),new Fu(t)},Wl.hydrateRoot=function(e,t,a){if(!d(e))throw Error(c(299));var l=!1,o="",u=H0,x=L0,w=B0,R=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(R=a.formState)),t=yh(e,1,!0,t,a??null,l,o,R,u,x,w,Eh),t.context=ph(null),a=t.current,l=Ot(),l=sl(l),o=en(l),o.callback=null,tn(a,o,l),a=l,t.current.lanes=a,An(t,a),ca(t),e[pa]=t.current,Tu(e),new Xi(t)},Wl.version="19.2.3",Wl}var $h;function qv(){if($h)return td.exports;$h=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),td.exports=Uv(),td.exports}var Vv=qv();const Yv="/api";class Gv{constructor(){this.baseUrl=Yv,this.token=localStorage.getItem("token")}setToken(r){this.token=r,r?localStorage.setItem("token",r):localStorage.removeItem("token")}getToken(){return this.token}async request(r,i={}){const c=`${this.baseUrl}${r}`,d={"Content-Type":"application/json",...i.headers};this.token&&(d.Authorization=`Bearer ${this.token}`);const f={...i,headers:d};i.body&&typeof i.body=="object"&&!(i.body instanceof FormData)&&(f.body=JSON.stringify(i.body)),i.body instanceof FormData&&delete d["Content-Type"];const g=await fetch(c,f);if(g.status===401&&!r.includes("/auth/login"))throw this.setToken(null),window.location.href="/login",new Error("Session expired. Please login again.");const h=await g.text();let m;try{m=h?JSON.parse(h):{}}catch(y){throw console.error("API Error:",y,"Response was not JSON:",h),new Error(`Server Error (${g.status}): Please check browser console for details.`)}if(!g.ok)throw new Error(m.message||"An error occurred");return m}async get(r,i={}){return this.request(r,{...i,method:"GET"})}async post(r,i,c={}){return this.request(r,{...c,method:"POST",body:i})}async put(r,i,c={}){return this.request(r,{...c,method:"PUT",body:i})}async delete(r,i={}){return this.request(r,{...i,method:"DELETE"})}async login(r,i){const c=await this.request("/auth/login",{method:"POST",body:{username:r,password:i}});return this.setToken(c.token),c}async register(r,i){const c=await this.request("/auth/register",{method:"POST",body:{username:r,password:i}});return this.setToken(c.token),c}async getMe(){return this.request("/auth/me")}logout(){this.setToken(null)}async getContacts(r={}){const i=new URLSearchParams(r).toString();return this.request(`/contacts${i?`?${i}`:""}`)}async getContactStats(){return this.request("/contacts/stats")}async getContactTags(){return this.request("/contacts/tags")}async getContact(r){return this.request(`/contacts/${r}`)}async createContact(r){return this.request("/contacts",{method:"POST",body:r})}async updateContact(r,i){return this.request(`/contacts/${r}`,{method:"PUT",body:i})}async deleteContact(r){return this.request(`/contacts/${r}`,{method:"DELETE"})}async importContacts(r){const i=new FormData;return i.append("file",r),this.request("/contacts/import",{method:"POST",body:i})}async fetchWhatsAppContacts(){return this.request("/contacts/fetch-whatsapp",{method:"POST"})}async uploadFile(r){const i=new FormData;return i.append("file",r),this.request("/upload",{method:"POST",body:i})}async getLists(){return this.request("/lists")}async getList(r){return this.request(`/lists/${r}`)}async createList(r){return this.request("/lists",{method:"POST",body:r})}async updateList(r,i){return this.request(`/lists/${r}`,{method:"PUT",body:i})}async deleteList(r){return this.request(`/lists/${r}`,{method:"DELETE"})}async addContactsToList(r,i){return this.request(`/lists/${r}/contacts`,{method:"POST",body:{contactIds:i}})}async removeContactFromList(r,i){return this.request(`/lists/${r}/contacts/${i}`,{method:"DELETE"})}async getCampaigns(r={}){const i=new URLSearchParams(r).toString();return this.request(`/campaigns${i?`?${i}`:""}`)}async getCampaignStats(){return this.request("/campaigns/stats")}async getCampaign(r){return this.request(`/campaigns/${r}`)}async getCampaignRecipients(r,i={}){const c=new URLSearchParams(i).toString();return this.request(`/campaigns/${r}/recipients${c?`?${c}`:""}`)}async createCampaign(r){return this.request("/campaigns",{method:"POST",body:r})}async updateCampaign(r,i){return this.request(`/campaigns/${r}`,{method:"PUT",body:i})}async deleteCampaign(r){return this.request(`/campaigns/${r}`,{method:"DELETE"})}async sendCampaign(r){return this.request(`/campaigns/${r}/send`,{method:"POST"})}async stopCampaign(r){return this.request(`/campaigns/${r}/stop`,{method:"POST"})}async getTemplates(){return this.request("/templates")}async getTemplate(r){return this.request(`/templates/${r}`)}async createTemplate(r){return this.request("/templates",{method:"POST",body:r})}async updateTemplate(r,i){return this.request(`/templates/${r}`,{method:"PUT",body:i})}async deleteTemplate(r){return this.request(`/templates/${r}`,{method:"DELETE"})}async getMedia(r={}){const i=new URLSearchParams(r).toString();return this.request(`/media${i?`?${i}`:""}`)}async uploadMedia(r){const i=new FormData;return i.append("file",r),this.request("/media/upload",{method:"POST",body:i})}async deleteMedia(r){return this.request(`/media/${r}`,{method:"DELETE"})}async getTeamMembers(){return this.request("/team")}async addTeamMember(r){return this.request("/team",{method:"POST",body:r})}async updateTeamMember(r,i){return this.request(`/team/${r}`,{method:"PUT",body:i})}async deleteTeamMember(r){return this.request(`/team/${r}`,{method:"DELETE"})}async getConversations(r={}){const i=new URLSearchParams(r).toString();return this.request(`/conversations${i?`?${i}`:""}`)}async getConversation(r){return this.request(`/conversations/${r}`)}async sendMessage(r,i){return this.request(`/conversations/${r}/messages`,{method:"POST",body:i})}async assignConversation(r,i){return this.request(`/conversations/${r}/assign`,{method:"PUT",body:{assignedToId:i}})}async updateConversationStatus(r,i){return this.request(`/conversations/${r}/status`,{method:"PUT",body:{status:i}})}async getNotes(r){return this.request(`/notes/contact/${r}`)}async addNote(r){return this.request("/notes",{method:"POST",body:r})}}const ce=new Gv,tx=E.createContext(null),Ad=()=>{const n=E.useContext(tx);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},Xv=({children:n})=>{const[r,i]=E.useState(null),[c,d]=E.useState(!0),[f,g]=E.useState(null);E.useEffect(()=>{(async()=>{if(ce.getToken())try{const S=await ce.getMe();i(S.user)}catch(S){console.error("Auth check failed:",S),ce.logout()}d(!1)})()},[]);const p={user:r,loading:c,error:f,isAuthenticated:!!r,login:async(b,v)=>{g(null);try{const S=await ce.login(b,v);return i(S.user),S}catch(S){throw g(S.message),S}},register:async(b,v)=>{g(null);try{const S=await ce.register(b,v);return i(S.user),S}catch(S){throw g(S.message),S}},logout:()=>{ce.logout(),i(null)}};return s.jsx(tx.Provider,{value:p,children:n})},ax=E.createContext(null),po=()=>{const n=E.useContext(ax);if(!n)throw new Error("useToast must be used within a ToastProvider");return n},Zv=({id:n,type:r,message:i,onClose:c})=>{const d={success:s.jsx(dd,{className:"text-blue-500",size:20}),error:s.jsx(Vm,{className:"text-red-500",size:20}),warning:s.jsx(wn,{className:"text-amber-500",size:20}),info:s.jsx(av,{className:"text-emerald-500",size:20})},f={success:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",error:"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",warning:"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800",info:"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800"};return s.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-xl border shadow-lg backdrop-blur-sm animate-slide-up ${f[r]}`,style:{minWidth:"300px"},children:[d[r],s.jsx("p",{className:"flex-1 text-sm font-medium text-gray-800 dark:text-gray-200",children:i}),s.jsx("button",{onClick:()=>c(n),className:"p-1 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg transition-colors",children:s.jsx(pt,{size:16,className:"text-gray-400"})})]})},Qv=({children:n})=>{const[r,i]=E.useState([]),c=E.useCallback(g=>{i(h=>h.filter(m=>m.id!==g))},[]),d=E.useCallback((g,h,m=4e3)=>{const y=Date.now()+Math.random();i(p=>[...p,{id:y,type:g,message:h}]),setTimeout(()=>{c(y)},m)},[c]),f={success:g=>d("success",g),error:g=>d("error",g),warning:g=>d("warning",g),info:g=>d("info",g)};return s.jsxs(ax.Provider,{value:f,children:[n,s.jsx("div",{className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-2",children:r.map(g=>s.jsx(Zv,{id:g.id,type:g.type,message:g.message,onClose:c},g.id))})]})},nx=E.createContext(),sx=()=>E.useContext(nx),$v=({children:n})=>{const[r,i]=E.useState(()=>typeof window<"u"?localStorage.getItem("theme")==="dark"||!localStorage.getItem("theme")&&window.matchMedia("(prefers-color-scheme: dark)").matches:!1);E.useEffect(()=>{r?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[r]);const c=()=>i(!r);return s.jsx(nx.Provider,{value:{isDark:r,toggleTheme:c},children:n})},Kv=({children:n})=>{const{isAuthenticated:r,loading:i}=Ad(),c=Pm();return i?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background-light dark:bg-background-dark",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-primary/30 border-t-primary rounded-full animate-spin"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading..."})]})}):r?n:s.jsx(_v,{to:"/login",state:{from:c},replace:!0})},Fv=()=>{const{isDark:n}=sx(),[r,i]=E.useState(!1),{user:c,logout:d}=Ad(),f=es(),g=()=>{d(),f("/login")},h=[{to:"/",icon:Ym,label:"Dashboard",end:!0},{to:"/inbox",icon:nv,label:"Inbox"},{to:"/team",icon:sv,label:"Team"},{to:"/contacts",icon:da,label:"Contacts"},{to:"/lists",icon:kd,label:"Lists"},{to:"/campaigns/new",icon:lv,label:"New Campaign"},{to:"/campaigns",icon:rv,label:"History",end:!0},{to:"/templates",icon:mr,label:"Templates"},{to:"/automations",icon:lo,label:"Automations"},{to:"/media",icon:sr,label:"Media Library"},{to:"/settings",icon:fd,label:"Settings"}],m=h.filter(p=>!["Team","Settings"].includes(p.label)),y=h.filter(p=>["Team","Settings"].includes(p.label));return s.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-background-dark text-gray-900 dark:text-gray-100 transition-colors duration-300",children:[s.jsx("aside",{className:"w-72 bg-[#F3F5FA] dark:bg-surface-dark border-r border-gray-200/50 dark:border-gray-800/80 flex-col hidden md:flex font-sans",children:s.jsxs("div",{className:"p-4 flex flex-col h-full",children:[s.jsx("div",{className:"mb-6 mx-2",children:s.jsx("div",{className:"bg-emerald-100/50 dark:bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 px-4 py-3 rounded-2xl flex items-center justify-center font-bold text-sm tracking-wide shadow-sm backdrop-blur-sm",children:"WHATSMS ORGANIZATION"})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800/50 rounded-[2rem] p-4 shadow-sm flex-1 overflow-y-auto mb-4",children:[s.jsx("div",{className:"mb-4 px-2 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Menu"}),s.jsx("nav",{className:"space-y-1",children:m.map((p,b)=>s.jsxs(Qi,{to:p.to,end:p.end,className:({isActive:v})=>`flex items-center gap-3 px-4 py-3 rounded-2xl transition-all duration-200 font-medium group ${v?"bg-emerald-50 dark:bg-emerald-500/20 text-emerald-600 dark:text-emerald-300 shadow-sm":"text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-gray-800 dark:hover:text-gray-200"}`,style:{animationDelay:`${b*.05}s`},children:[s.jsx(p.icon,{size:20,className:`flex-shrink-0 transition-colors ${({isActive:v})=>v?"text-emerald-500":"text-gray-400 group-hover:text-gray-600"}`,strokeWidth:1.8}),s.jsx("span",{children:p.label})]},p.to))})]}),s.jsxs("div",{className:"px-2 space-y-1 mb-2",children:[y.map(p=>s.jsxs(Qi,{to:p.to,className:({isActive:b})=>`flex items-center gap-3 px-4 py-3 rounded-2xl transition-all duration-200 font-medium group ${b?"text-emerald-600 dark:text-emerald-300":"text-gray-500 dark:text-gray-400 hover:bg-emerald-50/50 dark:hover:bg-gray-800/50 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[s.jsx(p.icon,{size:20,className:"flex-shrink-0",strokeWidth:1.8}),s.jsx("span",{children:p.label})]},p.to)),s.jsxs("button",{onClick:g,className:"flex items-center gap-3 w-full px-4 py-3 text-gray-500 dark:text-gray-400 hover:bg-red-50 dark:hover:bg-red-900/10 hover:text-red-600 dark:hover:text-red-400 rounded-2xl transition-all duration-200 font-medium group",children:[s.jsx(Lh,{size:20,className:"group-hover:text-red-500 transition-colors",strokeWidth:1.8}),s.jsx("span",{children:"Logout"})]})]}),s.jsx("div",{className:"px-6 py-2",children:s.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-600",children:c?`Logged in as ${c.username}`:""})})]})}),r&&s.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 md:hidden animate-fade-in",onClick:()=>i(!1)}),s.jsx("aside",{className:`fixed inset-y-0 left-0 w-80 bg-[#F3F5FA] dark:bg-surface-dark border-r border-gray-200 dark:border-gray-800 flex flex-col z-50 transform transition-transform duration-300 md:hidden ${r?"translate-x-0":"-translate-x-full"}`,children:s.jsxs("div",{className:"p-4 flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6 mx-2",children:[s.jsx("div",{className:"bg-emerald-100/50 dark:bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 px-4 py-2 rounded-xl font-bold text-sm tracking-wide",children:"WHATSMS"}),s.jsx("button",{onClick:()=>i(!1),className:"p-2 rounded-xl hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500",children:s.jsx(pt,{size:20})})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800/50 rounded-[2rem] p-4 shadow-sm flex-1 overflow-y-auto mb-4",children:s.jsx("nav",{className:"space-y-1",children:m.map(p=>s.jsxs(Qi,{to:p.to,end:p.end,onClick:()=>i(!1),className:({isActive:b})=>`flex items-center gap-3 px-4 py-3 rounded-2xl transition-all duration-200 font-medium ${b?"bg-emerald-50 dark:bg-emerald-500/20 text-emerald-600 dark:text-emerald-300 shadow-sm":"text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[s.jsx(p.icon,{size:20,className:"flex-shrink-0",strokeWidth:1.8}),s.jsx("span",{children:p.label})]},p.to))})}),s.jsxs("div",{className:"px-2 space-y-1 mb-2",children:[y.map(p=>s.jsxs(Qi,{to:p.to,onClick:()=>i(!1),className:({isActive:b})=>`flex items-center gap-3 px-4 py-3 rounded-2xl transition-all duration-200 font-medium group ${b?"text-emerald-600 dark:text-emerald-300":"text-gray-500 dark:text-gray-400 hover:bg-emerald-50/50 dark:hover:bg-gray-800/50 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[s.jsx(p.icon,{size:20,className:"flex-shrink-0",strokeWidth:1.8}),s.jsx("span",{children:p.label})]},p.to)),s.jsxs("button",{onClick:()=>{g(),i(!1)},className:"flex items-center gap-3 w-full px-4 py-3 text-gray-500 dark:text-gray-400 hover:bg-red-50 dark:hover:bg-red-900/10 hover:text-red-600 rounded-2xl transition-all duration-200 font-medium",children:[s.jsx(Lh,{size:20,strokeWidth:1.8}),s.jsx("span",{children:"Logout"})]})]})]})}),s.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden bg-white dark:bg-background-dark relative z-0",children:[s.jsxs("header",{className:"md:hidden bg-white dark:bg-surface-dark border-b border-gray-200 dark:border-gray-800 px-4 py-3.5 flex items-center justify-between shadow-soft",children:[s.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[s.jsx("span",{className:"w-8 h-8 bg-emerald-600 rounded-lg flex items-center justify-center text-white text-xs",children:"WS"}),s.jsx("span",{className:"text-gray-800 dark:text-white",children:"WhatsSMS"})]}),s.jsx("div",{className:"flex gap-1",children:s.jsx("button",{className:"p-2.5 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400 transition-colors",onClick:()=>i(!0),children:s.jsx(iv,{size:22,strokeWidth:1.75})})})]}),s.jsx("div",{className:"flex-1 overflow-auto p-4 md:p-8",children:s.jsx(Mv,{})})]})]})},Td={generateMessage:async(n,r="")=>{try{const i=r.trim()?`You are an expert marketing strategist and copywriter known for creating high-converting WhatsApp campaigns.

The user has **existing content** they want you to **modify, improve, or rewrite** based on their instructions.

**Existing Content:**
"""
${r}
"""

**Your Task:**
Follow the user's instructions to modify the existing content. Keep the same general idea unless they ask you to change it completely.

**Guidelines:**
- Keep changes focused on what the user asks
- Maintain the message structure unless told otherwise
- Use *bold* for emphasis, emojis sparingly
- Make it concise and WhatsApp-appropriate

Output ONLY the improved/modified message text. No explanations.`:`You are an expert marketing strategist and copywriter known for creating high-converting WhatsApp campaigns.
Your goal is to write a powerful, effective marketing message based on the user's request.

**Strategy Guidelines:**
- **One Core Message:** Focus on a single clear value proposition.
- **Direct & Persuasive:** Use simple language. No buzzwords. No filler.
- **Structure:**
    1. **Hook:** Grab attention instantly (first line).
    2. **Value:** Explain the benefit clearly.
    3. **CTA:** One simple, actionable step (e.g., "Reply YES", "Click here").
- **Formatting:** Use *bold* for emphasis. Use emojis sparingly to highlight key points.
- **No Em Dashes.**

**Output Instructions:**
Provide **3 Distinct Variations** of the message to give the user choices:
1.  **Direct & Urgent** (Focus on scarcity or time-sensitivity)
2.  **Benefit-Focused** (Focus on the problem/solution)
3.  **Friendly & Conversational** (Softer tone)

Separate the variations clearly so the user can copy the one they like.`;return(await ce.post("/ai/chat",{messages:[{role:"system",content:i},{role:"user",content:n}]})).content}catch(i){throw console.error("AI Generation Error:",i),i}},getAnalyticsInsights:async(n=[])=>{try{return(await ce.post("/ai/analytics",{campaignIds:n})).insights}catch(r){throw console.error("Error fetching AI analytics:",r),r}},analyzeTemplate:async(n,r)=>{try{return await ce.post("/ai/analyze-template",{templateBody:n,templateName:r})}catch(i){throw console.error("Error analyzing template:",i),i}},chatAssistant:async(n,r="",i="template")=>{try{return(await ce.post("/ai/chat-assistant",{messages:n,currentContent:r,contentType:i})).content}catch(c){throw console.error("AI Chat Assistant Error:",c),c}}},Jv=()=>{const[n,r]=E.useState(null),[i,c]=E.useState(null),[d,f]=E.useState([]),[g,h]=E.useState([]),[m,y]=E.useState(!1),[p,b]=E.useState(!1),[v,S]=E.useState("all"),[N,z]=E.useState([]),[A,k]=E.useState(!0),[M,j]=E.useState(null),_=es(),L=()=>{const B=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];if(!(i&&i.totalMessagesSent>0))return B.map(H=>({name:H,sent:0,delivered:0,read:0}));const D=i.totalMessagesSent||0,C=i.totalDelivered||0,O=i.totalRead||0;return B.map((H,Q)=>{const G=(Q+1)/28;return{name:H,sent:Math.round(D*G),delivered:Math.round(C*G),read:Math.round(O*G)}})},q=()=>d.slice(0,5).map(B=>({name:B.name.length>10?B.name.substring(0,10)+"...":B.name,delivered:B.statsDelivered||0,read:B.statsRead||0,replied:B.statsReplied||0})),Y=async()=>{try{k(!0),j(null);const[B,T,D]=await Promise.all([ce.getContactStats(),ce.getCampaignStats(),ce.getCampaigns({limit:5})]);r(B),c(T),f(D.campaigns||[])}catch(B){j(B.message),console.error("Failed to fetch dashboard data:",B)}finally{k(!1)}};E.useEffect(()=>{Y()},[]);const U=async()=>{y(!0);try{const B=v==="select"?N:[],T=await Td.getAnalyticsInsights(B);h(T||[]),b(!1)}catch(B){console.error(B),alert("Failed to generate insights")}finally{y(!1)}},X=B=>{z(T=>T.includes(B)?T.filter(D=>D!==B):[...T,B])},re=[{label:"Total Campaigns",value:i?.totalCampaigns??"-",change:`${i?.activeCampaigns??0} active`,trend:i?.activeCampaigns>0?"up":"neutral",icon:ov},{label:"Messages Sent",value:i?.totalMessagesSent?.toLocaleString()??"-",change:`${i?.deliveryRate??0}% delivery rate`,trend:"up",icon:mo},{label:"Total Contacts",value:n?.total?.toLocaleString()??"-",change:`+${n?.thisWeek??0} this week`,trend:n?.thisWeek>0?"up":"neutral",icon:da},{label:"Contact Lists",value:n?.listsCount??"-",change:"Active lists",trend:"neutral",icon:lr}],$=()=>d.slice(0,4).map(B=>({id:B.id,action:`Campaign "${B.name}" ${B.status.toLowerCase().replace("_"," ")}`,time:new Date(B.updatedAt).toLocaleDateString(),type:B.status==="COMPLETED"?"success":B.status==="IN_PROGRESS"?"info":"pending"})),W=({active:B,payload:T,label:D})=>B&&T&&T.length?s.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-xl shadow-lg border border-gray-100 dark:border-gray-800",children:[s.jsx("p",{className:"text-sm font-medium mb-2",children:D}),T.map((C,O)=>s.jsxs("p",{className:"text-xs",style:{color:C.color},children:[C.name,": ",C.value.toLocaleString()]},O))]}):null;return A?s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("div",{className:"h-8 w-48 bg-gray-200 dark:bg-gray-800 rounded-lg skeleton"}),s.jsx("div",{className:"h-4 w-64 bg-gray-200 dark:bg-gray-800 rounded-lg mt-2 skeleton"})]})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[1,2,3,4].map(B=>s.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80",children:[s.jsx("div",{className:"h-12 w-12 bg-gray-200 dark:bg-gray-800 rounded-xl skeleton"}),s.jsx("div",{className:"h-4 w-24 bg-gray-200 dark:bg-gray-800 rounded mt-4 skeleton"}),s.jsx("div",{className:"h-8 w-16 bg-gray-200 dark:bg-gray-800 rounded mt-2 skeleton"})]},B))})]}):M?s.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[s.jsx("p",{className:"text-red-500 mb-4",children:M}),s.jsxs("button",{onClick:Y,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-xl",children:[s.jsx(xo,{size:16}),"Retry"]})]}):s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Welcome back! Here's an overview of your campaigns."})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>_("/contacts"),className:"flex items-center gap-2 px-4 py-2.5 bg-white dark:bg-surface-dark border border-gray-200 dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-200 text-sm font-medium shadow-soft card-hover",children:[s.jsx(rr,{size:18,className:"icon-gray",strokeWidth:1.75}),s.jsx("span",{children:"Import"})]}),s.jsxs("button",{onClick:()=>_("/campaigns/new"),className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[s.jsx(jn,{size:18,strokeWidth:2}),s.jsx("span",{children:"New Campaign"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl p-6 shadow-soft border border-gray-100 dark:border-gray-800/80 relative overflow-hidden animate-slide-up",children:[s.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary/5 dark:bg-primary/10 rounded-full -mr-16 -mt-16 blur-2xl"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center",children:s.jsx(ar,{size:20,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"font-semibold",children:"AI Performance Insights"}),s.jsx("p",{className:"text-xs text-gray-400",children:"AI-powered analysis"})]})]}),s.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 px-4 py-2 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[s.jsx(ar,{size:14}),g.length>0?"Analyze Again":"Analyze"]})]}),m?s.jsxs("div",{className:"flex items-center gap-3 py-4 text-gray-600 dark:text-gray-400",children:[s.jsx(ta,{size:24,className:"animate-spin text-primary"}),s.jsx("p",{children:"Analyzing campaign data..."})]}):g.length>0?s.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:g.map((B,T)=>s.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-xl border border-gray-100 dark:border-gray-700/50 hover:border-primary/30 transition-colors",children:s.jsx("p",{className:"text-sm leading-relaxed text-gray-700 dark:text-gray-300",children:B})},T))}):s.jsxs("div",{className:"py-6 text-center bg-gray-50 dark:bg-gray-800/30 rounded-xl border border-gray-100 dark:border-gray-700/50 border-dashed",children:[s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"Get AI-powered recommendations to improve your delivery and read rates."}),s.jsx("button",{onClick:()=>b(!0),className:"text-sm text-primary hover:underline font-medium",children:"Start Analysis "})]})]})]}),p&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[60] flex items-center justify-center p-4 animate-fade-in backdrop-blur-sm",children:s.jsxs("div",{className:"bg-white dark:bg-surface-dark w-full max-w-lg rounded-xl shadow-2xl p-6 border border-gray-100 dark:border-gray-800",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-bold",children:"Configure Analysis"}),s.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(pt,{size:20})})]}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsx("div",{onClick:()=>S("all"),className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${v==="all"?"border-primary bg-primary/5":"border-gray-100 dark:border-gray-800 hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${v==="all"?"border-primary":"border-gray-300"}`,children:v==="all"&&s.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Analyze All Data"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Includes all past campaigns"})]})]})}),s.jsxs("div",{onClick:()=>S("select"),className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${v==="select"?"border-primary bg-primary/5":"border-gray-100 dark:border-gray-800 hover:border-gray-300"}`,children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${v==="select"?"border-primary":"border-gray-300"}`,children:v==="select"&&s.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Select Specific Campaigns"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Compare specific blasts"})]})]}),v==="select"&&s.jsx("div",{className:"pl-8 space-y-2 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:d.map(B=>s.jsxs("div",{onClick:T=>{T.stopPropagation(),X(B.id)},className:"flex items-center gap-3 p-2 hover:bg-gray-100 dark:hover:bg-gray-800/50 rounded-lg cursor-pointer",children:[N.includes(B.id)?s.jsx(cv,{size:18,className:"text-primary"}):s.jsx(Gm,{size:18,className:"text-gray-400"}),s.jsx("span",{className:"text-sm truncate",children:B.name})]},B.id))})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium",children:"Cancel"}),s.jsx("button",{onClick:U,disabled:m||v==="select"&&N.length===0,className:"flex items-center gap-2 px-6 py-2 btn-primary text-white rounded-lg font-medium shadow-glow disabled:opacity-50",children:m?s.jsxs(s.Fragment,{children:[s.jsx(ta,{size:16,className:"animate-spin"}),s.jsx("span",{children:"Analyzing..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(ar,{size:16}),s.jsx("span",{children:"Generate Insights"})]})})]})]})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:re.map((B,T)=>s.jsxs("div",{className:`stat-card bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 card-hover animate-slide-up stagger-${T+1}`,style:{opacity:0},children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-gray-100 dark:bg-gray-800/80 flex items-center justify-center",children:s.jsx(B.icon,{size:22,className:"icon-gray",strokeWidth:1.75})}),B.trend==="up"&&s.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-2 py-1 rounded-full",children:[s.jsx(Bh,{size:12}),s.jsx("span",{children:"Up"})]})]}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium mb-1",children:B.label}),s.jsx("p",{className:"text-3xl font-bold tracking-tight",children:B.value}),s.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:B.change})]},T))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 animate-slide-up stagger-5",style:{opacity:0},children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center",children:s.jsx(Uh,{size:20,className:"text-white",strokeWidth:1.75})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"Message Trends"}),s.jsx("p",{className:"text-xs text-gray-400",children:"Last 7 days"})]})]})}),s.jsx("div",{className:"h-64",children:s.jsx(Th,{width:"100%",height:"100%",children:s.jsxs(Fb,{data:L(),margin:{top:10,right:10,left:-20,bottom:0},children:[s.jsxs("defs",{children:[s.jsxs("linearGradient",{id:"colorSent",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),s.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]}),s.jsxs("linearGradient",{id:"colorDelivered",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),s.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]}),s.jsxs("linearGradient",{id:"colorRead",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.3}),s.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]})]}),s.jsx(_h,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),s.jsx(Mh,{dataKey:"name",tick:{fontSize:12},stroke:"#9CA3AF"}),s.jsx(Dh,{tick:{fontSize:12},stroke:"#9CA3AF"}),s.jsx(Oh,{content:s.jsx(W,{})}),s.jsx(Ju,{type:"monotone",dataKey:"sent",stroke:"#10b981",strokeWidth:2,fillOpacity:1,fill:"url(#colorSent)",name:"Sent"}),s.jsx(Ju,{type:"monotone",dataKey:"delivered",stroke:"#3b82f6",strokeWidth:2,fillOpacity:1,fill:"url(#colorDelivered)",name:"Delivered"}),s.jsx(Ju,{type:"monotone",dataKey:"read",stroke:"#8b5cf6",strokeWidth:2,fillOpacity:1,fill:"url(#colorRead)",name:"Read"})]})})}),s.jsxs("div",{className:"flex justify-center gap-6 mt-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-xs text-gray-500",children:"Sent"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),s.jsx("span",{className:"text-xs text-gray-500",children:"Delivered"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),s.jsx("span",{className:"text-xs text-gray-500",children:"Read"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 animate-slide-up stagger-6",style:{opacity:0},children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center",children:s.jsx(gd,{size:20,className:"text-white",strokeWidth:1.75})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"Campaign Comparison"}),s.jsx("p",{className:"text-xs text-gray-400",children:"Recent campaigns"})]})]})}),s.jsx("div",{className:"h-64",children:d.length>0?s.jsx(Th,{width:"100%",height:"100%",children:s.jsxs(Jb,{data:q(),margin:{top:10,right:10,left:-20,bottom:0},children:[s.jsx(_h,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),s.jsx(Mh,{dataKey:"name",tick:{fontSize:10},stroke:"#9CA3AF"}),s.jsx(Dh,{tick:{fontSize:12},stroke:"#9CA3AF"}),s.jsx(Oh,{content:s.jsx(W,{})}),s.jsx(Wu,{dataKey:"delivered",fill:"#10b981",radius:[4,4,0,0],name:"Delivered"}),s.jsx(Wu,{dataKey:"read",fill:"#3b82f6",radius:[4,4,0,0],name:"Read"}),s.jsx(Wu,{dataKey:"replied",fill:"#f59e0b",radius:[4,4,0,0],name:"Replied"})]})}):s.jsx("div",{className:"h-full flex items-center justify-center",children:s.jsx("p",{className:"text-gray-400 text-sm",children:"No campaigns yet"})})}),s.jsxs("div",{className:"flex justify-center gap-6 mt-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-xs text-gray-500",children:"Delivered"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),s.jsx("span",{className:"text-xs text-gray-500",children:"Read"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),s.jsx("span",{className:"text-xs text-gray-500",children:"Replied"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 animate-slide-up stagger-7",style:{opacity:0},children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-800/80 flex items-center justify-center",children:s.jsx(Bh,{size:20,className:"icon-gray",strokeWidth:1.75})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"Performance Overview"}),s.jsx("p",{className:"text-xs text-gray-400",children:"Message delivery metrics"})]})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"text-center p-4 bg-emerald-50 dark:bg-emerald-900/10 rounded-xl border border-emerald-100 dark:border-emerald-900/20",children:[s.jsx("p",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:i?.totalDelivered?.toLocaleString()??0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Delivered"})]}),s.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/10 rounded-xl border border-blue-100 dark:border-blue-900/20",children:[s.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:i?.totalRead?.toLocaleString()??0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Read"})]}),s.jsxs("div",{className:"text-center p-4 bg-amber-50 dark:bg-amber-900/10 rounded-xl border border-amber-100 dark:border-amber-900/20",children:[s.jsx("p",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:i?.totalReplied?.toLocaleString()??0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Replied"})]}),s.jsxs("div",{className:"text-center p-4 bg-red-50 dark:bg-red-900/10 rounded-xl border border-red-100 dark:border-red-900/20",children:[s.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:i?.totalFailed?.toLocaleString()??0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Failed"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[s.jsx("span",{className:"text-gray-500",children:"Delivery Rate"}),s.jsxs("span",{className:"font-semibold text-emerald-600",children:[i?.deliveryRate??0,"%"]})]}),s.jsx("div",{className:"h-3 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-emerald-600 rounded-full transition-all duration-700 ease-out",style:{width:`${i?.deliveryRate??0}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[s.jsx("span",{className:"text-gray-500",children:"Read Rate"}),s.jsxs("span",{className:"font-semibold text-blue-600",children:[i?.readRate??0,"%"]})]}),s.jsx("div",{className:"h-3 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-700 ease-out",style:{width:`${i?.readRate??0}%`}})})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 animate-slide-up stagger-8",style:{opacity:0},children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-800/80 flex items-center justify-center",children:s.jsx(Uh,{size:20,className:"icon-gray",strokeWidth:1.75})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"Recent Campaigns"}),s.jsx("p",{className:"text-xs text-gray-400",children:"Latest updates"})]})]}),s.jsx("div",{className:"space-y-4",children:$().length>0?$().map(B=>s.jsxs("div",{className:"flex items-start gap-3 group",children:[s.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${B.type==="success"?"bg-emerald-500":B.type==="pending"?"bg-amber-500":"bg-primary"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 truncate group-hover:text-gray-900 dark:group-hover:text-white transition-colors",children:B.action}),s.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:B.time})]})]},B.id)):s.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No campaigns yet"})}),s.jsxs("button",{onClick:()=>_("/campaigns"),className:"w-full mt-6 py-2.5 text-sm text-primary font-medium hover:bg-emerald-50 dark:hover:bg-emerald-900/10 rounded-lg transition-colors flex items-center justify-center gap-1",children:["View All Campaigns",s.jsx(uv,{size:14})]})]})]})]})},Wv=({onClose:n,onSuccess:r})=>{const[i,c]=E.useState(!1),[d,f]=E.useState(null),[g,h]=E.useState(!1),[m,y]=E.useState(null),[p,b]=E.useState(null),v=E.useCallback(k=>{k.preventDefault(),k.stopPropagation(),k.type==="dragenter"||k.type==="dragover"?c(!0):k.type==="dragleave"&&c(!1)},[]),S=E.useCallback(k=>{if(k.preventDefault(),k.stopPropagation(),c(!1),k.dataTransfer.files&&k.dataTransfer.files[0]){const M=k.dataTransfer.files[0];M.type==="text/csv"||M.name.endsWith(".csv")?(f(M),y(null)):y("Please upload a valid CSV file.")}},[]),N=k=>{k.preventDefault(),k.target.files&&k.target.files[0]&&(f(k.target.files[0]),y(null))},z=async()=>{if(d){h(!0),y(null);try{const k=await ce.importContacts(d);b(k),r&&r()}catch(k){y(k.message||"Failed to upload file")}finally{h(!1)}}},A=()=>{f(null),b(null),y(null)};return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:s.jsxs("div",{className:"bg-white dark:bg-surface-dark w-full max-w-md rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-800 overflow-hidden animate-slide-up",children:[s.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-800 flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Import Contacts"}),s.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:s.jsx(pt,{size:20,className:"text-gray-500"})})]}),s.jsx("div",{className:"p-6",children:p?s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center mx-auto mb-4 animate-scale-in",children:s.jsx(ua,{size:32,strokeWidth:3})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Import Complete"}),s.jsxs("div",{className:"flex justify-center gap-8 my-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:p.imported}),s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Imported"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:p.skipped}),s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Skipped"})]})]}),p.errors&&p.errors.length>0&&s.jsxs("div",{className:"text-left bg-gray-50 dark:bg-gray-800/50 rounded-lg p-3 mb-6 max-h-32 overflow-y-auto text-xs text-gray-600 dark:text-gray-400",children:[s.jsx("p",{className:"font-medium mb-1",children:"Errors:"}),s.jsx("ul",{className:"list-disc pl-4 space-y-1",children:p.errors.map((k,M)=>s.jsx("li",{children:k},M))})]}),s.jsxs("div",{className:"flex justify-center gap-3",children:[s.jsx("button",{onClick:A,className:"px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Import More"}),s.jsx("button",{onClick:n,className:"px-6 py-2 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:"Done"})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`relative border-2 border-dashed rounded-xl p-8 text-center transition-all duration-200 ${i?"border-primary bg-emerald-50 dark:bg-emerald-900/10":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onDragEnter:v,onDragLeave:v,onDragOver:v,onDrop:S,children:[s.jsx("input",{type:"file",accept:".csv",onChange:N,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:g}),d?s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center mb-3",children:s.jsx(al,{size:24})}),s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:d.name}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[(d.size/1024).toFixed(1)," KB"]})]}):s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-800 text-gray-400 rounded-full flex items-center justify-center mb-3",children:s.jsx(rr,{size:24})}),s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Click or drag CSV here"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Columns: name, phone, interests"})]})]}),m&&s.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg flex items-center gap-2",children:[s.jsx(wn,{size:16}),s.jsx("span",{children:m})]}),s.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[s.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cancel"}),s.jsx("button",{onClick:z,disabled:!d||g,className:`flex items-center gap-2 px-6 py-2 rounded-xl text-sm font-medium text-white transition-all ${!d||g?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed":"btn-primary shadow-glow hover:-translate-y-0.5"}`,children:g?s.jsxs(s.Fragment,{children:[s.jsx(ta,{size:16,className:"animate-spin"}),"Importing..."]}):"Import Contacts"})]})]})})]})})},Iv=()=>{const n=po(),[r,i]=E.useState([]),[c,d]=E.useState(null),[f,g]=E.useState([]),[h,m]=E.useState(""),[y,p]=E.useState(!0),[b,v]=E.useState(null),[S,N]=E.useState(""),[z,A]=E.useState({page:1,limit:20,total:0,totalPages:1}),[k,M]=E.useState(!1),[j,_]=E.useState(!1),[L,q]=E.useState(!1),[Y,U]=E.useState({name:"",phone:"",interests:"",tags:""}),[X,re]=E.useState(!1),[$,W]=E.useState(!1),B=E.useRef(null),T=Ks.useCallback(async(G=1,ee="",P="")=>{try{p(!0),v(null);const le={page:G,limit:z.limit};ee&&(le.search=ee),P&&(le.tag=P);const[ie,fe,be]=await Promise.all([ce.getContacts(le),ce.getContactStats(),ce.getContactTags()]);i(ie.contacts||[]),A(ie.pagination||{page:1,limit:20,total:0,totalPages:1}),d(fe),g(be.tags||[])}catch(le){v(le.message)}finally{p(!1)}},[z.limit]);E.useEffect(()=>{T()},[T]),E.useEffect(()=>(B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{T(1,S,h)},300),()=>clearTimeout(B.current)),[S,h,T]);const D=async G=>{G.preventDefault(),re(!0);try{const ee=Y.interests.split(",").map(le=>le.trim()).filter(le=>le),P=Y.tags.split(",").map(le=>le.trim()).filter(le=>le);await ce.createContact({name:Y.name,phone:Y.phone,interests:ee,tags:P}),M(!1),U({name:"",phone:"",interests:"",tags:""}),T(z.page,S,h),n.success("Contact added successfully!")}catch(ee){n.error(ee.message)}finally{re(!1)}},C=async G=>{if(confirm("Are you sure you want to delete this contact?"))try{await ce.deleteContact(G),T(z.page,S,h),n.success("Contact deleted")}catch(ee){n.error(ee.message)}},O=G=>{G>=1&&G<=z.totalPages&&T(G,S,h)},H=async()=>{W(!0);try{const G=await ce.fetchWhatsAppContacts();T(1,S,h),G.imported>0?n.success(`Imported ${G.imported} new contacts from WhatsApp!`):n.info(G.message||"No new contacts to import")}catch(G){n.error(G.message||"Failed to fetch WhatsApp contacts")}finally{W(!1)}},Q=G=>{m(G),q(!1)};return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Contacts"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Manage your audience and contact lists"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:H,disabled:$,className:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl text-sm font-medium shadow-glow card-hover disabled:opacity-50",children:[$?s.jsx(ta,{size:18,className:"animate-spin"}):s.jsx(Xm,{size:18}),s.jsx("span",{children:$?"Fetching...":"Fetch WhatsApp"})]}),s.jsxs("button",{onClick:()=>_(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-white dark:bg-surface-dark border border-gray-200 dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-200 text-sm font-medium shadow-soft card-hover",children:[s.jsx(rr,{size:18,className:"icon-gray",strokeWidth:1.75}),s.jsx("span",{children:"Import CSV"})]}),s.jsxs("button",{onClick:()=>M(!0),className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[s.jsx(jn,{size:18,strokeWidth:2}),s.jsx("span",{children:"Add Contact"})]})]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Total Contacts",value:c?.total?.toLocaleString()??"-"},{label:"Active Lists",value:c?.listsCount??"-"},{label:"New This Week",value:c?.thisWeek??"-"},{label:"Showing",value:`${r.length} of ${z.total}`}].map((G,ee)=>s.jsxs("div",{className:"bg-white dark:bg-surface-dark px-4 py-3 rounded-xl border border-gray-100 dark:border-gray-800/80 shadow-soft",children:[s.jsx("p",{className:"text-xs text-gray-400 font-medium",children:G.label}),s.jsx("p",{className:"text-xl font-bold mt-0.5",children:G.value})]},ee))}),s.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800/80 flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Cd,{className:"absolute left-4 top-1/2 -translate-y-1/2 icon-gray",size:18,strokeWidth:1.75}),s.jsx("input",{type:"text",placeholder:"Search contacts by name or phone...",value:S,onChange:G=>N(G.target.value),className:"w-full pl-11 pr-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 focus:border-primary outline-none transition-all text-sm text-gray-900 dark:text-white placeholder:text-gray-400"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>q(!L),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl transition-colors text-sm font-medium border ${h?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-600":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:[s.jsx(yo,{size:16,strokeWidth:1.75}),s.jsx("span",{children:h||"Filter by Tag"}),s.jsx(xr,{size:14})]}),L&&s.jsxs("div",{className:"absolute top-full left-0 mt-2 w-48 bg-white dark:bg-surface-dark rounded-xl shadow-lg border border-gray-100 dark:border-gray-800 z-50 py-2 max-h-60 overflow-y-auto",children:[s.jsx("button",{onClick:()=>Q(""),className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800 ${h?"text-gray-700 dark:text-gray-300":"text-emerald-600 font-medium"}`,children:"All Contacts"}),f.map(G=>s.jsx("button",{onClick:()=>Q(G),className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800 ${h===G?"text-emerald-600 font-medium":"text-gray-700 dark:text-gray-300"}`,children:G},G)),f.length===0&&s.jsx("p",{className:"px-4 py-2 text-xs text-gray-400",children:"No tags created yet"})]})]}),s.jsxs("button",{onClick:()=>T(z.page,S,h),className:"flex items-center gap-2 px-4 py-2.5 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-sm font-medium border border-gray-200 dark:border-gray-700",children:[s.jsx(xo,{size:16,className:"icon-gray",strokeWidth:1.75}),s.jsx("span",{children:"Refresh"})]})]}),b&&s.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800 flex items-center gap-3 text-red-700 dark:text-red-400",children:[s.jsx(wn,{size:18}),s.jsx("span",{children:b}),s.jsx("button",{onClick:()=>T(),className:"ml-auto text-sm underline",children:"Retry"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-background-dark text-gray-500 dark:text-gray-400 text-xs uppercase tracking-wider font-semibold",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 font-semibold",children:"Contact"}),s.jsx("th",{className:"px-6 py-4 font-semibold",children:"Phone"}),s.jsx("th",{className:"px-6 py-4 font-semibold",children:"Tags"}),s.jsx("th",{className:"px-6 py-4 font-semibold",children:"Lists"}),s.jsx("th",{className:"px-6 py-4 text-right font-semibold",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800/80",children:y?[...Array(5)].map((G,ee)=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"h-10 w-40 bg-gray-200 dark:bg-gray-800 rounded skeleton"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"h-4 w-32 bg-gray-200 dark:bg-gray-800 rounded skeleton"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"h-6 w-20 bg-gray-200 dark:bg-gray-800 rounded skeleton"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"h-6 w-24 bg-gray-200 dark:bg-gray-800 rounded skeleton"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"h-4 w-8 bg-gray-200 dark:bg-gray-800 rounded skeleton ml-auto"})})]},ee)):r.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-400",children:S?"No contacts found matching your search":"No contacts yet. Add your first contact!"})}):r.map(G=>s.jsxs("tr",{className:"table-row-hover group",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center text-primary font-semibold text-sm",children:G.name.split(" ").map(ee=>ee[0]).join("").slice(0,2)}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:G.name}),s.jsxs("p",{className:"text-xs text-gray-400",children:["ID: ",G.id]})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("span",{className:"text-gray-600 dark:text-gray-300 font-mono text-sm flex items-center gap-2",children:[s.jsx(dv,{size:14,className:"icon-gray",strokeWidth:1.75}),G.phone]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[(G.tags||[]).slice(0,3).map((ee,P)=>s.jsx("span",{className:"px-2.5 py-1 text-xs rounded-lg bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 font-medium",children:ee},P)),(G.tags||[]).length>3&&s.jsxs("span",{className:"px-2 py-1 text-xs text-gray-400",children:["+",G.tags.length-3]}),(G.tags||[]).length===0&&s.jsx("span",{className:"text-xs text-gray-400",children:"No tags"})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[(G.lists||[]).slice(0,2).map((ee,P)=>s.jsx("span",{className:"px-2.5 py-1 text-xs rounded-lg bg-gray-100 dark:bg-gray-800/80 text-gray-600 dark:text-gray-300 font-medium",children:ee.name},P)),(G.lists||[]).length>2&&s.jsxs("span",{className:"px-2 py-1 text-xs text-gray-400",children:["+",G.lists.length-2]})]})}),s.jsx("td",{className:"px-6 py-4 text-right",children:s.jsx("button",{onClick:()=>C(G.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:s.jsx(pt,{size:18,strokeWidth:1.75})})})]},G.id))})]})}),z.totalPages>1&&s.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 dark:border-gray-800/80 flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",(z.page-1)*z.limit+1,"-",Math.min(z.page*z.limit,z.total)," of ",z.total]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>O(z.page-1),disabled:z.page<=1,className:"px-3 py-1.5 text-sm rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 transition-colors disabled:opacity-50",children:"Previous"}),[...Array(Math.min(5,z.totalPages))].map((G,ee)=>{const P=ee+1;return s.jsx("button",{onClick:()=>O(P),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${z.page===P?"bg-primary text-white":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500"}`,children:P},P)}),s.jsx("button",{onClick:()=>O(z.page+1),disabled:z.page>=z.totalPages,className:"px-3 py-1.5 text-sm rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 transition-colors disabled:opacity-50",children:"Next"})]})]})]}),k&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl shadow-xl max-w-md w-full p-6 animate-slide-up",style:{opacity:0,animationDelay:"0s"},children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Add Contact"}),s.jsx("button",{onClick:()=>M(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:s.jsx(pt,{size:20})})]}),s.jsxs("form",{onSubmit:D,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Name *"}),s.jsx("input",{type:"text",value:Y.name,onChange:G=>U({...Y,name:G.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none text-gray-900 dark:text-white placeholder:text-gray-400",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone *"}),s.jsx("input",{type:"text",value:Y.phone,onChange:G=>U({...Y,phone:G.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"+1234567890",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Interests (comma-separated)"}),s.jsx("input",{type:"text",value:Y.interests,onChange:G=>U({...Y,interests:G.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"marketing, sales"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tags (comma-separated)"}),s.jsx("input",{type:"text",value:Y.tags,onChange:G=>U({...Y,tags:G.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"VIP, Hot Lead"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Use tags to segment your contacts"})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>M(!1),className:"flex-1 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl font-medium",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:X,className:"flex-1 py-2.5 btn-primary text-white rounded-xl font-medium disabled:opacity-50",children:X?"Saving...":"Add Contact"})]})]})]})}),j&&s.jsx(Wv,{onClose:()=>_(!1),onSuccess:()=>{T(1,"")}})]})},Pv=()=>{const n=po(),[r,i]=E.useState([]),[c,d]=E.useState(!0),[f,g]=E.useState(null),[h,m]=E.useState([]),[y,p]=E.useState(!1),[b,v]=E.useState(!1),[S,N]=E.useState(!1),[z,A]=E.useState(!1),[k,M]=E.useState({name:"",description:""}),[j,_]=E.useState([]),[L,q]=E.useState([]),[Y,U]=E.useState(""),[X,re]=E.useState(!1),[$,W]=E.useState([]),[B,T]=E.useState(""),[D,C]=E.useState(""),[O,H]=E.useState(!1),Q=Ks.useCallback(async()=>{try{d(!0);const se=await ce.getLists();i(se.lists||[])}catch{n.error("Failed to load lists")}finally{d(!1)}},[n]),G=Ks.useCallback(async se=>{try{p(!0);const pe=await ce.getList(se);m(pe.members||[])}catch{n.error("Failed to load list members")}finally{p(!1)}},[n]),ee=async()=>{try{const[se,pe]=await Promise.all([ce.getContacts({limit:500}),ce.getContactTags()]);_(se.contacts||[]),q(pe.tags||[])}catch{n.error("Failed to load contacts")}};E.useEffect(()=>{Q()},[Q]),E.useEffect(()=>{f&&G(f.id)},[f,G]);const P=async se=>{se.preventDefault(),H(!0);try{await ce.createList(k),n.success("List created successfully!"),v(!1),M({name:"",description:""}),Q()}catch{n.error(err.message)}finally{H(!1)}},le=async se=>{if(confirm("Are you sure you want to delete this list?"))try{await ce.deleteList(se),n.success("List deleted"),f?.id===se&&(g(null),m([])),Q()}catch{n.error(err.message)}},ie=async()=>{if($.length===0){n.warning("Select at least one contact");return}H(!0);try{const se=await ce.addContactsToList(f.id,$);n.success(`Added ${se.added} contacts, ${se.skipped} already in list`),N(!1),W([]),G(f.id),Q()}catch{n.error(err.message)}finally{H(!1)}},fe=async()=>{if(!D){n.warning("Select a source list");return}H(!0);try{const pe=(await ce.getList(D)).members.map(Ye=>Ye.id);if(pe.length===0){n.info("Source list is empty"),H(!1);return}const we=await ce.addContactsToList(f.id,pe);n.success(`Added ${we.added} contacts from list, ${we.skipped} already present`),A(!1),C(""),G(f.id),Q()}catch{n.error(err.message)}finally{H(!1)}},be=async se=>{try{await ce.removeContactFromList(f.id,se),n.success("Contact removed from list"),G(f.id),Q()}catch{n.error(err.message)}},me=()=>{ee(),W([]),T(""),U(""),re(!1),N(!0)},oe=se=>{W(pe=>pe.includes(se)?pe.filter(we=>we!==se):[...pe,se])},ue=j.filter(se=>{const pe=se.name.toLowerCase().includes(B.toLowerCase())||se.phone.includes(B),we=!Y||se.tags&&se.tags.includes(Y);return pe&&we}),Se=ue.filter(se=>!h.some(pe=>pe.id===se.id)),je=()=>{const se=Se.map(pe=>pe.id);W(pe=>{const we=new Set(pe);return se.forEach(Ye=>we.add(Ye)),Array.from(we)})},ye=()=>{W([])},Ne=r.filter(se=>se.id!==f?.id);return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Contact Lists"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Organize your contacts into targeted lists"})]}),s.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[s.jsx(jn,{size:18,strokeWidth:2}),s.jsx("span",{children:"Create List"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-soft border border-gray-100 dark:border-gray-800/80 overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800/80 flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold",children:"Your Lists"}),s.jsx("button",{onClick:Q,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:s.jsx(xo,{size:16,className:"icon-gray"})})]}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:c?s.jsx("div",{className:"p-4 space-y-3",children:[1,2,3].map(se=>s.jsx("div",{className:"h-16 bg-gray-100 dark:bg-gray-800 rounded-xl skeleton"},se))}):r.length===0?s.jsx("p",{className:"p-4 text-center text-gray-400",children:"No lists yet. Create your first list!"}):s.jsx("div",{className:"p-2",children:r.map(se=>s.jsxs("button",{onClick:()=>g(se),className:`w-full text-left p-3 rounded-xl transition-all mb-1 ${f?.id===se.id?"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800":"hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center",children:s.jsx(da,{size:18,className:"text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:se.name}),s.jsxs("p",{className:"text-xs text-gray-400",children:[se.memberCount," contacts"]})]})]}),s.jsx("button",{onClick:pe=>{pe.stopPropagation(),le(se.id)},className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg opacity-0 group-hover:opacity-100 transition-all",children:s.jsx(aa,{size:14})})]}),se.description&&s.jsx("p",{className:"text-xs text-gray-400 mt-1 pl-13",children:se.description})]},se.id))})})]}),s.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-surface-dark rounded-2xl shadow-soft border border-gray-100 dark:border-gray-800/80 overflow-hidden",children:f?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800/80 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:f.name}),s.jsxs("p",{className:"text-xs text-gray-400",children:[f.memberCount," contacts"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-xl transition-colors",children:[s.jsx(da,{size:16}),"From List"]}),s.jsxs("button",{onClick:me,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium btn-primary text-white rounded-xl",children:[s.jsx(qh,{size:16}),"Add Contacts"]})]})]}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:y?s.jsx("div",{className:"p-4 space-y-2",children:[1,2,3,4].map(se=>s.jsx("div",{className:"h-14 bg-gray-100 dark:bg-gray-800 rounded-xl skeleton"},se))}):h.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-60 text-gray-400",children:[s.jsx(qh,{size:40,strokeWidth:1,className:"mb-3 opacity-50"}),s.jsx("p",{children:"This list is empty"}),s.jsx("p",{className:"text-sm",children:"Add contacts to get started"})]}):s.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-800/80",children:h.map(se=>s.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center text-primary font-semibold text-sm",children:se.name.split(" ").map(pe=>pe[0]).join("").slice(0,2)}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:se.name}),s.jsx("p",{className:"text-xs text-gray-400",children:se.phone})]})]}),s.jsx("button",{onClick:()=>be(se.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:s.jsx(pt,{size:16})})]},se.id))})})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-80 text-gray-400",children:[s.jsx(da,{size:48,strokeWidth:1,className:"mb-4 opacity-50"}),s.jsx("p",{className:"text-lg font-medium",children:"Select a list"}),s.jsx("p",{className:"text-sm",children:"Choose a list from the sidebar to view its contacts"})]})})]}),b&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-xl max-w-md w-full p-6 animate-slide-up",style:{opacity:0},children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Create New List"}),s.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:s.jsx(pt,{size:20})})]}),s.jsxs("form",{onSubmit:P,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"List Name *"}),s.jsx("input",{type:"text",value:k.name,onChange:se=>M({...k,name:se.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none",placeholder:"e.g. VIP Customers",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),s.jsx("textarea",{value:k.description,onChange:se=>M({...k,description:se.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none resize-none",rows:3,placeholder:"Optional description..."})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>v(!1),className:"flex-1 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl font-medium",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:O,className:"flex-1 py-2.5 btn-primary text-white rounded-xl font-medium disabled:opacity-50",children:O?"Creating...":"Create List"})]})]})]})}),S&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-xl max-w-lg w-full p-6 animate-slide-up max-h-[80vh] flex flex-col",style:{opacity:0},children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-xl font-bold",children:["Add Contacts to ",f?.name]}),s.jsx("button",{onClick:()=>N(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:s.jsx(pt,{size:20})})]}),s.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:[$.length," selected"]}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Cd,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),s.jsx("input",{type:"text",placeholder:"Search contacts...",value:B,onChange:se=>T(se.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>re(!X),className:`flex items-center gap-2 px-3 py-2.5 rounded-xl border transition-colors ${Y?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-600":"border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(yo,{size:16}),s.jsx("span",{className:"text-sm",children:Y||"Tag"}),s.jsx(xr,{size:14})]}),X&&s.jsxs("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white dark:bg-surface-dark rounded-xl shadow-lg border border-gray-100 dark:border-gray-800 z-50 py-2 max-h-48 overflow-y-auto",children:[s.jsx("button",{onClick:()=>{U(""),re(!1)},className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800 ${Y?"":"text-emerald-600 font-medium"}`,children:"All Tags"}),L.map(se=>s.jsx("button",{onClick:()=>{U(se),re(!1)},className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800 ${Y===se?"text-emerald-600 font-medium":""}`,children:se},se)),L.length===0&&s.jsx("p",{className:"px-4 py-2 text-xs text-gray-400",children:"No tags"})]})]})]}),s.jsxs("div",{className:"flex gap-2 mb-3",children:[s.jsxs("button",{onClick:je,disabled:Se.length===0,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium bg-blue-50 dark:bg-blue-900/20 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Zm,{size:14}),"Add All (",Se.length,")"]}),$.length>0&&s.jsxs("button",{onClick:ye,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:[s.jsx(pt,{size:14}),"Clear"]}),s.jsxs("span",{className:"ml-auto text-xs text-gray-400",children:["Showing ",ue.length," contacts"]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto border border-gray-100 dark:border-gray-800 rounded-xl divide-y divide-gray-100 dark:divide-gray-800/80 max-h-60",children:ue.length===0?s.jsx("p",{className:"p-4 text-center text-gray-400",children:"No contacts found"}):ue.map(se=>{const pe=$.includes(se.id),we=h.some(Ye=>Ye.id===se.id);return s.jsxs("button",{onClick:()=>!we&&oe(se.id),disabled:we,className:`w-full flex items-center justify-between p-3 transition-colors ${we?"opacity-50 cursor-not-allowed":pe?"bg-emerald-50 dark:bg-emerald-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center text-primary text-xs font-semibold",children:se.name.split(" ").map(Ye=>Ye[0]).join("").slice(0,2)}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-medium text-sm",children:se.name}),s.jsx("p",{className:"text-xs text-gray-400",children:se.phone})]})]}),we?s.jsx("span",{className:"text-xs text-gray-400",children:"Already in list"}):pe?s.jsx("div",{className:"w-5 h-5 rounded-full bg-emerald-500 flex items-center justify-center",children:s.jsx(ua,{size:12,className:"text-white"})}):s.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300"})]},se.id)})}),s.jsxs("div",{className:"flex gap-3 pt-4 mt-4 border-t border-gray-100 dark:border-gray-800",children:[s.jsx("button",{onClick:()=>N(!1),className:"flex-1 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl font-medium",children:"Cancel"}),s.jsx("button",{onClick:ie,disabled:O||$.length===0,className:"flex-1 py-2.5 btn-primary text-white rounded-xl font-medium disabled:opacity-50",children:O?"Adding...":`Add ${$.length} Contact${$.length!==1?"s":""}`})]})]})}),z&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-xl max-w-md w-full p-6 animate-slide-up",style:{opacity:0},children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Copy From Another List"}),s.jsx("button",{onClick:()=>A(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:s.jsx(pt,{size:20})})]}),s.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["All contacts from the selected list will be copied to ",s.jsx("strong",{children:f?.name})]}),s.jsx("div",{className:"space-y-2 mb-6",children:Ne.length===0?s.jsx("p",{className:"text-center text-gray-400 py-4",children:"No other lists available"}):Ne.map(se=>s.jsxs("button",{onClick:()=>C(se.id.toString()),className:`w-full flex items-center justify-between p-3 rounded-xl transition-all ${D===se.id.toString()?"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800":"border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(da,{size:18,className:"text-gray-400"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-medium",children:se.name}),s.jsxs("p",{className:"text-xs text-gray-400",children:[se.memberCount," contacts"]})]})]}),D===se.id.toString()&&s.jsx("div",{className:"w-5 h-5 rounded-full bg-emerald-500 flex items-center justify-center",children:s.jsx(ua,{size:12,className:"text-white"})})]},se.id))}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>A(!1),className:"flex-1 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl font-medium",children:"Cancel"}),s.jsx("button",{onClick:fe,disabled:O||!D,className:"flex-1 py-2.5 btn-primary text-white rounded-xl font-medium disabled:opacity-50",children:O?"Copying...":"Copy Contacts"})]})]})})]})},e1=()=>{const[n,r]=E.useState(""),[i,c]=E.useState(""),[d,f]=E.useState(!1),[g,h]=E.useState(""),[m,y]=E.useState(!1),p=es(),b=Pm(),{login:v,register:S,isAuthenticated:N}=Ad();Ks.useEffect(()=>{if(N){const A=b.state?.from?.pathname||"/";p(A,{replace:!0})}},[N,p,b]);const z=async A=>{A.preventDefault(),h(""),f(!0);try{m?await S(n,i):await v(n,i);const k=b.state?.from?.pathname||"/";p(k,{replace:!0})}catch(k){h(k.message||"An error occurred")}finally{f(!1)}};return s.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background-light via-white to-emerald-50 dark:from-background-dark dark:via-surface-dark dark:to-background-dark transition-colors duration-300 p-4",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary/5 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-accent/5 rounded-full blur-3xl"})]}),s.jsxs("div",{className:"relative w-full max-w-md animate-slide-up",style:{opacity:0,animationDelay:"0.1s"},children:[s.jsxs("div",{className:"bg-white dark:bg-surface-dark p-8 md:p-10 rounded-3xl shadow-soft border border-gray-100 dark:border-gray-800/80",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-2xl flex items-center justify-center mx-auto mb-5",children:s.jsx(fv,{size:28,className:"icon-gray",strokeWidth:1.5})}),s.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:m?"Create Account":"Welcome Back"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:m?"Sign up to start managing campaigns":"Sign in to manage your campaigns"})]}),g&&s.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-center gap-3 text-red-700 dark:text-red-400",children:[s.jsx(wn,{size:20}),s.jsx("span",{className:"text-sm",children:g})]}),s.jsxs("form",{onSubmit:z,className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Username"}),s.jsxs("div",{className:"relative",children:[s.jsx(gv,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 icon-gray",strokeWidth:1.75}),s.jsx("input",{type:"text",value:n,onChange:A=>r(A.target.value),className:"w-full pl-11 pr-4 py-3.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none transition-all text-base text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"Enter your username",required:!0,autoComplete:"username"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(hv,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 icon-gray",strokeWidth:1.75}),s.jsx("input",{type:"password",value:i,onChange:A=>c(A.target.value),className:"w-full pl-11 pr-4 py-3.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none transition-all text-base text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:m?"Create a password (min 6 chars)":"Enter your password",required:!0,minLength:m?6:void 0,autoComplete:m?"new-password":"current-password"})]})]}),s.jsx("button",{type:"submit",disabled:d,className:"w-full py-3.5 px-4 btn-primary text-white font-semibold rounded-xl shadow-glow transition-all flex items-center justify-center gap-2 disabled:opacity-70",children:d?s.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx("span",{children:m?"Create Account":"Sign In"}),s.jsx(mv,{size:18,strokeWidth:2})]})})]}),s.jsxs("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mt-8",children:[m?"Already have an account?":"Don't have an account?"," ",s.jsx("button",{onClick:()=>{y(!m),h("")},className:"text-primary hover:underline font-medium",children:m?"Sign In":"Create one"})]})]}),s.jsxs("p",{className:"text-center text-xs text-gray-400 mt-6",children:[s.jsx("span",{className:"gradient-text font-semibold",children:"WhatsSMS"}),"  WhatsApp Marketing Platform"]})]})]})},lx=({currentContent:n="",onApplyText:r,contentType:i="template"})=>{const[c,d]=E.useState([]),[f,g]=E.useState(""),[h,m]=E.useState(!1),[y,p]=E.useState(null),[b,v]=E.useState(!1),S=E.useRef(null),N=E.useRef(null),z=[{label:" Analyze my text",prompt:"Analyze my current text and give feedback"},{label:" Make it shorter",prompt:"Make my current text shorter and more concise"},{label:" Add emojis",prompt:"Add relevant emojis to my current text"},{label:" Improve CTA",prompt:"Improve the call-to-action in my text"}],A=L=>L.split(/(\*\*[^*]+\*\*)/g).map((Y,U)=>Y.startsWith("**")&&Y.endsWith("**")?s.jsx("strong",{className:"font-semibold",children:Y.slice(2,-2)},U):Y);E.useEffect(()=>{S.current?.scrollIntoView({behavior:"smooth"})},[c]),E.useEffect(()=>{b||N.current?.focus()},[b]);const k=async(L=null)=>{const q=L||f.trim();if(!q||h)return;const Y={role:"user",content:q};d(U=>[...U,Y]),g(""),m(!0);try{const U=[...c,Y],X=await Td.chatAssistant(U,n,i);d(re=>[...re,{role:"assistant",content:X}])}catch{d(U=>[...U,{role:"assistant",content:"Sorry, I encountered an error. Please try again.",isError:!0}])}finally{m(!1)}},M=async(L,q)=>{try{await navigator.clipboard.writeText(L),p(q),setTimeout(()=>p(null),2e3)}catch(Y){console.error("Failed to copy:",Y)}},j=L=>{r&&r(L)},_=L=>{L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),k())};return b?s.jsxs("button",{onClick:()=>v(!1),className:"w-full flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl text-sm font-medium hover:opacity-90 transition-opacity",children:[s.jsx(Pu,{size:16}),s.jsx("span",{children:"AI Assistant"}),s.jsx(xv,{size:16})]}):s.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-surface-dark rounded-xl border border-gray-200 dark:border-gray-800 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-800 bg-gradient-to-r from-emerald-500/10 to-teal-600/10",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-emerald-500 to-teal-600 flex items-center justify-center",children:s.jsx(ar,{size:16,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-sm",children:"AI Assistant"}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Ask me anything about your ",i]})]})]}),s.jsx("button",{onClick:()=>v(!0),className:"p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:s.jsx(xr,{size:18})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{minHeight:"200px"},children:c.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-emerald-500/20 to-teal-600/20 flex items-center justify-center mb-3",children:s.jsx(Pu,{size:24,className:"text-emerald-500"})}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["Hi! I can help you write, edit, or analyze your ",i,"."]}),s.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:z.map((L,q)=>s.jsx("button",{onClick:()=>k(L.prompt),disabled:h,className:"px-3 py-1.5 text-xs bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors disabled:opacity-50",children:L.label},q))})]}):s.jsxs(s.Fragment,{children:[c.map((L,q)=>s.jsx("div",{className:`flex ${L.role==="user"?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[85%] rounded-2xl px-4 py-2.5 ${L.role==="user"?"bg-primary text-white rounded-br-md":L.isError?"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded-bl-md":"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-bl-md"}`,children:[s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:L.role==="assistant"?A(L.content):L.content}),L.role==="assistant"&&!L.isError&&s.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:()=>M(L.content,q),className:"flex items-center gap-1 text-xs text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:y===q?s.jsxs(s.Fragment,{children:[s.jsx(ua,{size:12,className:"text-green-500"}),s.jsx("span",{className:"text-green-500",children:"Copied!"})]}):s.jsxs(s.Fragment,{children:[s.jsx(zd,{size:12}),s.jsx("span",{children:"Copy"})]})}),r&&s.jsxs("button",{onClick:()=>j(L.content),className:"flex items-center gap-1 text-xs text-primary hover:text-primary/80 transition-colors",children:[s.jsx(Pu,{size:12}),s.jsx("span",{children:"Apply"})]})]})]})},q)),h&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl rounded-bl-md px-4 py-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ta,{size:14,className:"animate-spin text-emerald-500"}),s.jsx("span",{className:"text-sm text-gray-500",children:"Thinking..."})]})})}),s.jsx("div",{ref:S})]})}),c.length>0&&s.jsx("div",{className:"px-4 pb-2 flex gap-2 overflow-x-auto",children:z.slice(0,3).map((L,q)=>s.jsx("button",{onClick:()=>k(L.prompt),disabled:h,className:"flex-shrink-0 px-2.5 py-1 text-xs bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors disabled:opacity-50",children:L.label},q))}),s.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-black/20",children:s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsx("textarea",{ref:N,value:f,onChange:L=>g(L.target.value),onKeyDown:_,placeholder:"Ask me anything...",rows:1,className:"flex-1 px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl outline-none focus:border-primary resize-none text-sm min-h-[42px] max-h-[120px] text-gray-900 dark:text-white placeholder:text-gray-400",style:{height:"auto"},disabled:h}),s.jsx("button",{onClick:()=>k(),disabled:!f.trim()||h,className:"p-2.5 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-90 transition-opacity",children:s.jsx(mo,{size:18})})]})})]})},t1=()=>{const[n,r]=E.useState(1),[i,c]=E.useState([]),[d,f]=E.useState([]),[g,h]=E.useState(!0),[m,y]=E.useState(!1),[p,b]=E.useState(null),v=es(),S=po(),[N,z]=E.useState(!1),[A,k]=E.useState(null),[M,j]=E.useState({name:"",messageBody:"",selectedLists:[],scheduledAt:"",files:[]}),[_,L]=E.useState(!1);E.useEffect(()=>{q()},[]);const q=async()=>{try{h(!0);const[D,C]=await Promise.all([ce.getLists(),ce.getTemplates()]);c(D.lists||[]),f(C.templates||[])}catch(D){b(D.message)}finally{h(!1)}},Y=[{number:1,label:"Compose",icon:al},{number:2,label:"Recipients",icon:da},{number:3,label:"Review",icon:ua}],U=D=>{j(C=>({...C,selectedLists:C.selectedLists.includes(D)?C.selectedLists.filter(O=>O!==D):[...C.selectedLists,D]}))},X=D=>{let C=D.content,O=[];try{const H=JSON.parse(D.content);C=H.body||D.content,H.files&&(O=H.files)}catch{console.log("Template is not JSON, using as raw text")}j(H=>({...H,messageBody:C,files:O}))},re=()=>i.filter(D=>M.selectedLists.includes(D.id)).reduce((D,C)=>D+(C.memberCount||0),0),$=()=>n===1?M.name&&M.messageBody:n===2?M.selectedLists.length>0:!0,W=async()=>{y(!0),b(null);try{const D=await ce.createCampaign({name:M.name,messageBody:M.messageBody,listIds:M.selectedLists,scheduledAt:M.scheduledAt||null,mediaIds:M.files.map(C=>C.mediaId)});k(D.campaign.id),z(!0)}catch(D){b(D.message),S.error(D.message||"Failed to create campaign")}finally{y(!1)}},B=async D=>{const C=D.target.files[0];if(C){if(C.size>10*1024*1024){b("File size must be less than 10MB");return}L(!0);try{const O=await ce.uploadFile(C);j(H=>({...H,files:[...H.files,{mediaId:O.mediaId,filename:O.filename||C.name,mimetype:O.mimeType||C.type}]}))}catch{b("Failed to upload file")}finally{L(!1),D.target.value=null}}},T=D=>{j(C=>({...C,files:C.files.filter((O,H)=>H!==D)}))};return g?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(ta,{className:"w-8 h-8 animate-spin text-primary"})}):s.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-fade-in",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create Campaign"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Compose and send messages to your contacts"})]}),s.jsxs("div",{className:"flex items-center justify-between relative",children:[s.jsx("div",{className:"absolute top-6 left-0 right-0 h-0.5 bg-gray-200 dark:bg-gray-800 mx-16"}),s.jsx("div",{className:"absolute top-6 left-0 h-0.5 bg-primary mx-16 transition-all duration-500",style:{width:`${(n-1)/(Y.length-1)*100}%`}}),Y.map((D,C)=>s.jsxs("div",{className:"flex flex-col items-center relative z-10 animate-slide-up",style:{animationDelay:`${C*.1}s`,opacity:0},children:[s.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-300 ${n>D.number||n===D.number?"bg-primary text-white shadow-glow":"bg-gray-100 dark:bg-gray-800 text-gray-400"}`,children:n>D.number?s.jsx(ua,{size:20,strokeWidth:2.5}):s.jsx(D.icon,{size:20,strokeWidth:1.75})}),s.jsx("span",{className:`mt-3 text-sm font-medium ${n>=D.number?"text-gray-900 dark:text-white":"text-gray-400"}`,children:D.label})]},D.number))]}),p&&s.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-center gap-3 text-red-700 dark:text-red-400",children:[s.jsx(wn,{size:20}),s.jsx("span",{children:p}),s.jsx("button",{onClick:()=>b(null),className:"ml-auto",children:s.jsx(pt,{size:18})})]}),s.jsxs("div",{className:"bg-white dark:bg-surface-dark p-8 rounded-2xl shadow-soft border border-gray-100 dark:border-gray-800/80",children:[n===1&&s.jsxs("div",{className:"flex gap-6 animate-fade-in",children:[s.jsxs("div",{className:"flex-1 space-y-6",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Compose Message"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Campaign Name *"}),s.jsx("input",{type:"text",value:M.name,onChange:D=>j({...M,name:D.target.value}),className:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-colors text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"e.g., January Newsletter"})]}),d.length>0&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Use Template"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:d.map(D=>s.jsx("button",{onClick:()=>X(D),className:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:D.name},D.id))})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Message Content"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:"image/*,application/pdf",onChange:B,disabled:_}),s.jsx("label",{htmlFor:"file-upload",className:`p-2 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer transition-colors ${_?"opacity-50 cursor-not-allowed":""}`,title:"Attach Image or PDF",children:_?s.jsx(ta,{size:16,className:"animate-spin text-gray-500"}):s.jsx(ir,{size:16,className:"text-gray-500 dark:text-gray-400"})})]})]}),s.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:["Use ",s.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 rounded",children:"{{name}}"})," or ",s.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 rounded",children:"{{phone}}"})," for personalization"]}),s.jsx("textarea",{value:M.messageBody,onChange:D=>j({...M,messageBody:D.target.value}),className:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-colors resize-none h-40 text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"Hey {{name}}, we have exciting news for you..."}),s.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[M.messageBody.length," characters"]}),M.files&&M.files.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:M.files.map((D,C)=>s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm text-xs",children:[s.jsx(ir,{size:12,className:"text-gray-400"}),s.jsx("span",{className:"max-w-[150px] truncate text-gray-600 dark:text-gray-300",children:D.filename}),s.jsx("button",{type:"button",onClick:()=>T(C),className:"text-gray-400 hover:text-red-500",children:s.jsx(pt,{size:12})})]},C))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Schedule (Optional)"}),s.jsx("input",{type:"datetime-local",value:M.scheduledAt,onChange:D=>j({...M,scheduledAt:D.target.value}),className:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-colors"})]})]}),s.jsx("div",{className:"w-[380px] flex-shrink-0",children:s.jsx(lx,{currentContent:M.messageBody,contentType:"campaign",onApplyText:D=>j(C=>({...C,messageBody:D}))})})]}),n===2&&s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Select Recipients"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Choose which contact lists will receive this campaign"}),i.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-400 mb-4",children:"No contact lists found"}),s.jsx("button",{onClick:()=>v("/contacts"),className:"text-primary hover:underline",children:"Create a list first"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map((D,C)=>s.jsx("button",{onClick:()=>U(D.id),className:`p-4 rounded-xl border-2 text-left transition-all duration-200 animate-slide-up ${M.selectedLists.includes(D.id)?"border-primary bg-emerald-50 dark:bg-emerald-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,style:{animationDelay:`${C*.05}s`,opacity:0},children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:D.name}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[D.memberCount||0," contacts"]})]}),s.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${M.selectedLists.includes(D.id)?"border-primary bg-primary text-white":"border-gray-300 dark:border-gray-600"}`,children:M.selectedLists.includes(D.id)&&s.jsx(ua,{size:14})})]})},D.id))}),s.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-800",children:s.jsxs("p",{className:"text-lg font-medium",children:["Total Recipients: ",s.jsx("span",{className:"text-primary",children:re()})]})})]}),n===3&&s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Review Campaign"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl",children:[s.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"Campaign Name"}),s.jsx("p",{className:"font-medium",children:M.name})]}),s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl",children:[s.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"Message"}),s.jsx("p",{className:"whitespace-pre-wrap",children:M.messageBody})]}),s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl",children:[s.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"Recipients"}),s.jsxs("p",{className:"font-medium",children:[re()," contacts from ",M.selectedLists.length," lists"]}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:i.filter(D=>M.selectedLists.includes(D.id)).map(D=>s.jsx("span",{className:"px-2 py-1 text-xs bg-gray-200 dark:bg-gray-800 rounded-lg",children:D.name},D.id))})]}),M.scheduledAt&&s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl",children:[s.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"Scheduled For"}),s.jsx("p",{className:"font-medium",children:new Date(M.scheduledAt).toLocaleString()})]})]})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("button",{onClick:()=>n>1?r(n-1):v("/campaigns"),className:"px-6 py-3 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors font-medium",children:n===1?"Cancel":"Back"}),n<3?s.jsxs("button",{onClick:()=>r(n+1),disabled:!$(),className:"flex items-center gap-2 px-6 py-3 btn-primary text-white rounded-xl font-medium shadow-glow disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx("span",{children:"Continue"}),s.jsx(Qm,{size:18})]}):s.jsx("button",{onClick:W,disabled:m,className:"flex items-center gap-2 px-6 py-3 btn-primary text-white rounded-xl font-medium shadow-glow disabled:opacity-50",children:m?s.jsxs(s.Fragment,{children:[s.jsx(ta,{size:18,className:"animate-spin"}),s.jsx("span",{children:"Creating..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(ua,{size:18}),s.jsx("span",{children:"Create Campaign"})]})})]}),N&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:s.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-2xl p-8 max-w-sm w-full text-center border border-gray-100 dark:border-gray-800",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/20 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(ua,{size:32,strokeWidth:3})}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Campaign Created!"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Your campaign has been successfully saved as a draft. What would you like to do next?"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:async()=>{try{S.success("Campaign started! Sending messages..."),z(!1),v("/campaigns"),await ce.sendCampaign(A)}catch(D){S.error("Failed to start campaign: "+D.message)}},className:"w-full py-3 btn-primary text-white rounded-xl font-medium shadow-glow flex items-center justify-center gap-2",children:[s.jsx(mo,{size:18}),s.jsx("span",{children:"Send Now"})]}),s.jsxs("button",{onClick:()=>v("/campaigns"),className:"w-full py-3 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-medium transition-colors flex items-center justify-center gap-2",children:[s.jsx(Ym,{size:18}),s.jsx("span",{children:"Go to Dashboard"})]})]})]})})]})},a1=()=>{const[n,r]=E.useState([]),[i,c]=E.useState(null),[d,f]=E.useState(!0),[g,h]=E.useState(null),[m,y]=E.useState(""),p=es(),b=Ks.useCallback(async()=>{try{f(!0),h(null);const[k,M]=await Promise.all([ce.getCampaigns({status:m||void 0,limit:50}),ce.getCampaignStats()]);r(k.campaigns||[]),c(M)}catch(k){h(k.message)}finally{f(!1)}},[m]);E.useEffect(()=>{b()},[b]);const v=async k=>{if(confirm("Start sending this campaign now?"))try{await ce.sendCampaign(k),b()}catch(M){alert(M.message)}},S=async k=>{if(confirm("Stop this campaign?"))try{await ce.stopCampaign(k),b()}catch(M){alert(M.message)}},N=async k=>{if(confirm("Delete this campaign?"))try{await ce.deleteCampaign(k),b()}catch(M){alert(M.message)}},z=k=>{switch(k){case"COMPLETED":return{bg:"bg-blue-50 dark:bg-blue-900/20",text:"text-blue-600 dark:text-blue-400",icon:dd,label:"Completed"};case"IN_PROGRESS":return{bg:"bg-emerald-50 dark:bg-emerald-900/20",text:"text-emerald-600 dark:text-emerald-400",icon:Qs,label:"In Progress"};case"SCHEDULED":return{bg:"bg-amber-50 dark:bg-amber-900/20",text:"text-amber-600 dark:text-amber-400",icon:lr,label:"Scheduled"};case"STOPPED":return{bg:"bg-red-50 dark:bg-red-900/20",text:"text-red-600 dark:text-red-400",icon:Vm,label:"Stopped"};default:return{bg:"bg-gray-50 dark:bg-gray-800/50",text:"text-gray-500 dark:text-gray-400",icon:lr,label:"Draft"}}},A=[{label:"Total Campaigns",value:i?.totalCampaigns??"-",icon:gd},{label:"Messages Sent",value:i?.totalMessagesSent?.toLocaleString()??"-",icon:mo},{label:"Delivery Rate",value:`${i?.deliveryRate??0}%`,icon:dd},{label:"Active Now",value:i?.activeCampaigns??"-",icon:Qs}];return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Campaigns"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"View and manage your marketing campaigns"})]}),s.jsxs("button",{onClick:()=>p("/campaigns/new"),className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[s.jsx(jn,{size:18,strokeWidth:2}),s.jsx("span",{children:"New Campaign"})]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:A.map((k,M)=>s.jsxs("div",{className:"bg-white dark:bg-surface-dark p-4 rounded-xl border border-gray-100 dark:border-gray-800/80 shadow-soft flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:s.jsx(k.icon,{size:18,className:"icon-gray",strokeWidth:1.75})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-400 font-medium",children:k.label}),s.jsx("p",{className:"text-xl font-bold",children:k.value})]})]},M))}),s.jsxs("div",{className:"flex items-center gap-4 overflow-x-auto pb-2",children:[s.jsx("button",{onClick:()=>b(),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:s.jsx(xo,{size:18,className:"icon-gray"})}),["","DRAFT","IN_PROGRESS","COMPLETED","STOPPED"].map(k=>s.jsx("button",{onClick:()=>y(k),className:`px-4 py-2 text-sm font-medium rounded-lg whitespace-nowrap transition-colors ${m===k?"bg-primary text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:k||"All"},k))]}),g&&s.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-center gap-3 text-red-700 dark:text-red-400",children:[s.jsx(wn,{size:18}),s.jsx("span",{children:g}),s.jsx("button",{onClick:b,className:"ml-auto text-sm underline",children:"Retry"})]}),d?s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:[1,2,3,4].map(k=>s.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-800 rounded-xl skeleton"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"h-5 w-32 bg-gray-200 dark:bg-gray-800 rounded skeleton"}),s.jsx("div",{className:"h-4 w-24 bg-gray-200 dark:bg-gray-800 rounded mt-2 skeleton"})]})]}),s.jsx("div",{className:"h-16 bg-gray-200 dark:bg-gray-800 rounded-xl skeleton"})]},k))}):n.length===0?s.jsxs("div",{className:"bg-white dark:bg-surface-dark p-12 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-xl flex items-center justify-center mx-auto mb-4",children:s.jsx(gd,{size:28,className:"icon-gray"})}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Campaigns Yet"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:m?`No ${m.toLowerCase().replace("_"," ")} campaigns found`:"Create your first campaign to get started"}),s.jsxs("button",{onClick:()=>p("/campaigns/new"),className:"inline-flex items-center gap-2 px-4 py-2 btn-primary text-white rounded-xl font-medium",children:[s.jsx(jn,{size:18}),"Create Campaign"]})]}):s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:n.map((k,M)=>{const j=z(k.status),_=j.icon;return s.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 card-hover animate-slide-up group",style:{animationDelay:`${M*.05}s`,opacity:0},children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`w-12 h-12 ${j.bg} rounded-xl flex items-center justify-center`,children:s.jsx(_,{size:22,className:j.text,strokeWidth:1.75})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:k.name}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1.5",children:[s.jsx(yv,{size:14,className:"icon-gray"}),new Date(k.createdAt).toLocaleDateString()]})]})]}),s.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${j.bg} ${j.text}`,children:j.label})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[s.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[s.jsx("p",{className:"text-lg font-bold",children:k.recipientCount||0}),s.jsx("p",{className:"text-xs text-gray-400",children:"Recipients"})]}),s.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[s.jsx("p",{className:"text-lg font-bold text-blue-600",children:k.statsDelivered||0}),s.jsx("p",{className:"text-xs text-gray-400",children:"Delivered"})]}),s.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[s.jsx("p",{className:"text-lg font-bold text-emerald-600",children:k.statsRead||0}),s.jsx("p",{className:"text-xs text-gray-400",children:"Read"})]}),s.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[s.jsx("p",{className:"text-lg font-bold text-red-600",children:k.statsFailed||0}),s.jsx("p",{className:"text-xs text-gray-400",children:"Failed"})]})]}),k.status==="IN_PROGRESS"&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[s.jsx("span",{children:"Progress"}),s.jsxs("span",{children:[k.statsDelivered||0," / ",k.recipientCount||0]})]}),s.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500 animate-pulse",style:{width:`${k.recipientCount?k.statsDelivered/k.recipientCount*100:0}%`}})})]}),s.jsxs("div",{className:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[k.status==="DRAFT"&&s.jsx("button",{onClick:()=>v(k.id),className:"p-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-gray-400 hover:text-blue-600 rounded-lg transition-colors",title:"Send Campaign",children:s.jsx(Qs,{size:18})}),k.status==="IN_PROGRESS"&&s.jsx("button",{onClick:()=>S(k.id),className:"p-2 hover:bg-amber-50 dark:hover:bg-amber-900/20 text-gray-400 hover:text-amber-600 rounded-lg transition-colors",title:"Stop Campaign",children:s.jsx(Gm,{size:18})}),k.status!=="IN_PROGRESS"&&s.jsx("button",{onClick:()=>N(k.id),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-400 hover:text-red-600 rounded-lg transition-colors",title:"Delete Campaign",children:s.jsx(aa,{size:18})})]})]},k.id)})})]})},n1=()=>{const[n,r]=E.useState([]),[i,c]=E.useState(!0),[d,f]=E.useState(!1),[g,h]=E.useState(!1),m=E.useRef(null),y=async()=>{try{c(!0);const N=await ce.getMedia();r(N.media||[])}catch(N){setError(N.message)}finally{c(!1)}};E.useEffect(()=>{y()},[]);const p=async N=>{const z=N.target.files?.[0];if(z){f(!0);try{await ce.uploadMedia(z),h(!1),y()}catch(A){alert(A.message)}finally{f(!1)}}},b=async N=>{if(confirm("Are you sure you want to delete this file?"))try{await ce.deleteMedia(N),r(n.filter(z=>z.id!==N))}catch(z){alert(z.message)}},v=N=>{if(N===0)return"0 B";const z=1024,A=["B","KB","MB","GB"],k=Math.floor(Math.log(N)/Math.log(z));return parseFloat((N/Math.pow(z,k)).toFixed(1))+" "+A[k]},S=N=>N.startsWith("image/")?s.jsx(sr,{size:24,className:"text-purple-500"}):N.startsWith("video/")?s.jsx(pv,{size:24,className:"text-pink-500"}):N.startsWith("audio/")?s.jsx(bv,{size:24,className:"text-emerald-500"}):s.jsx(al,{size:24,className:"text-gray-500"});return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Media Library"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Manage images, videos, and documents for your campaigns"})]}),s.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[s.jsx(rr,{size:18,strokeWidth:2}),s.jsx("span",{children:"Upload File"})]})]}),i?s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(N=>s.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-800 rounded-2xl skeleton"},N))}):n.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white dark:bg-surface-dark rounded-2xl border border-dashed border-gray-200 dark:border-gray-800",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-50 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4",children:s.jsx(sr,{size:32,className:"text-gray-300 dark:text-gray-600"})}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"No media files yet"}),s.jsx("button",{onClick:()=>h(!0),className:"mt-2 text-primary text-sm hover:underline",children:"Upload your first file"})]}):s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6",children:n.map(N=>s.jsxs("div",{className:"group relative bg-white dark:bg-surface-dark rounded-2xl shadow-soft border border-gray-100 dark:border-gray-800/80 overflow-hidden card-hover",children:[s.jsxs("div",{className:"aspect-square bg-gray-50 dark:bg-black/20 flex items-center justify-center relative overflow-hidden",children:[N.mimetype.startsWith("image/")?s.jsx("img",{src:`undefined/uploads/${N.path}`,alt:N.filename,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}):S(N.mimetype),s.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2 backdrop-blur-[2px]",children:s.jsx("button",{onClick:()=>b(N.id),className:"p-2 bg-white/10 hover:bg-white/20 text-white rounded-lg backdrop-blur-sm transition-colors",title:"Delete",children:s.jsx(aa,{size:18})})})]}),s.jsxs("div",{className:"p-3",children:[s.jsx("p",{className:"text-sm font-medium truncate text-gray-900 dark:text-white",title:N.filename,children:N.filename}),s.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:[v(N.size),"  ",N.mimetype.split("/")[1].toUpperCase()]})]})]},N.id))}),g&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:s.jsxs("div",{className:"bg-white dark:bg-surface-dark w-full max-w-md rounded-2xl shadow-2xl p-6 animate-slide-up",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Upload Media"}),s.jsx("button",{onClick:()=>h(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:s.jsx(pt,{size:20})})]}),s.jsxs("div",{className:"border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl p-8 text-center hover:border-primary transition-colors cursor-pointer",onClick:()=>m.current?.click(),children:[s.jsx("input",{ref:m,type:"file",className:"hidden",onChange:p,accept:"image/*,video/*,application/pdf"}),d?s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(ta,{size:32,className:"text-primary animate-spin mb-3"}),s.jsx("p",{className:"text-sm font-medium",children:"Uploading..."})]}):s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"w-12 h-12 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-500 rounded-full flex items-center justify-center mb-3",children:s.jsx(rr,{size:24})}),s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Click to upload"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Images, Videos, PDF (Max 16MB)"})]})]})]})})]})},s1=({header:n,body:r,footer:i,files:c,buttons:d})=>{const f=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),g=h=>h?h.split(/(\{\{\d+\}\})/g).map((y,p)=>y.match(/\{\{\d+\}\}/)?s.jsx("span",{className:"bg-blue-100 text-blue-600 px-1 rounded mx-0.5 font-medium",children:y},p):y):s.jsx("span",{className:"text-gray-400 italic",children:"Type something..."});return s.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-4 rounded-xl overflow-hidden relative",children:[s.jsx("div",{className:"absolute inset-0",style:{backgroundImage:'url("/whatsapp-bg.png")',backgroundSize:"cover",backgroundPosition:"center"}}),s.jsxs("div",{className:"w-full max-w-[320px] relative z-10 flex flex-col gap-2",children:[s.jsxs("div",{className:"bg-white dark:bg-[#202c33] rounded-lg shadow-sm p-1 relative rounded-tr-none self-end message-bubble-tail",children:[s.jsxs("div",{className:"p-2 pb-6 min-w-[120px]",children:[c&&c.length>0&&s.jsx("div",{className:"mb-2 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 flex items-center justify-center h-40 border border-gray-100 dark:border-gray-700",children:s.jsxs("div",{className:"text-center p-4",children:[s.jsx(ir,{className:"mx-auto mb-2 text-gray-400",size:24}),s.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[150px]",children:c[0].filename}),s.jsx("p",{className:"text-[10px] text-gray-400 uppercase mt-0.5",children:c[0].mimetype?.split("/")[1]||"FILE"})]})}),n&&s.jsx("div",{className:"font-bold text-sm text-gray-900 dark:text-gray-100 mb-1 leading-snug",children:n}),s.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-200 whitespace-pre-wrap leading-relaxed",children:g(r)}),i&&s.jsx("div",{className:"text-[11px] text-gray-500 dark:text-gray-400 mt-2 pt-1 border-t border-gray-100 dark:border-gray-700/50",children:i})]}),s.jsxs("div",{className:"absolute right-2 bottom-1 flex items-center gap-1",children:[s.jsx("span",{className:"text-[10px] text-gray-400",children:f}),s.jsx(Zm,{size:14,className:"text-[#53bdeb]"})]})]}),d&&d.length>0&&d.map((h,m)=>s.jsx("div",{className:"bg-white dark:bg-[#202c33] rounded-lg shadow-sm p-3 text-center cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:s.jsxs("span",{className:"text-[#00a884] font-medium text-sm block truncate",children:[h.type==="URL"&&" ",h.type==="PHONE_NUMBER"&&" ",h.text||"Button Text"]})},m))]})]})},l1=()=>{const[n,r]=E.useState([]),[i,c]=E.useState(!0),[d,f]=E.useState(!1),[g,h]=E.useState(null),[m,y]=E.useState({name:"",header:"",body:"",footer:"",buttons:[],files:[]}),[p,b]=E.useState(!1),[v,S]=E.useState(!1),[N,z]=E.useState(null),A=async()=>{try{c(!0);const U=await ce.getTemplates();r(U.templates||[])}catch{console.error(err)}finally{c(!1)}};E.useEffect(()=>{A()},[]);const k=()=>{y({name:"",header:"",body:"",footer:"",buttons:[],files:[]}),h(null),z(null)},M=async()=>{if(!m.body.trim()){alert("Please add body text first.");return}S(!0),z(null);try{const U=await Td.analyzeTemplate(m.body,m.name);z(U)}catch{alert("Failed to analyze template.")}finally{S(!1)}},j=async U=>{const X=U.target.files[0];if(X){if(X.size>10*1024*1024){alert("File size must be less than 10MB");return}b(!0);try{const re=await ce.uploadFile(X);y($=>({...$,files:[...$.files,{mediaId:re.mediaId,filename:re.filename||X.name,mimetype:re.mimeType||X.type}]}))}catch{alert("Failed to upload file")}finally{b(!1),U.target.value=null}}},_=U=>{y(X=>({...X,files:X.files.filter((re,$)=>$!==U)}))},L=async()=>{try{const U=JSON.stringify({header:m.header,body:m.body,footer:m.footer,buttons:m.buttons,files:m.files});g?await ce.updateTemplate(g,{name:m.name,content:U}):await ce.createTemplate({name:m.name,content:U}),f(!1),A(),k()}catch{alert(err.message)}},q=U=>{try{const X=JSON.parse(U.content);y({name:U.name,header:X.header||"",body:X.body||U.content,footer:X.footer||"",buttons:X.buttons||[],files:X.files||[]})}catch{y({name:U.name,header:"",body:U.content,footer:"",buttons:[]})}h(U.id),f(!0)},Y=async U=>{if(confirm("Start deletion?"))try{await ce.deleteTemplate(U),r(n.filter(X=>X.id!==U))}catch{alert(err.message)}};return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Message Templates"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Design structured WhatsApp messages"})]}),s.jsxs("button",{onClick:()=>{k(),f(!0)},className:"flex items-center gap-2 px-4 py-2.5 btn-primary text-white rounded-xl text-sm font-medium shadow-glow",children:[s.jsx(jn,{size:18,strokeWidth:2}),s.jsx("span",{children:"Create Template"})]})]}),i?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(U=>s.jsx("div",{className:"h-48 bg-gray-100 dark:bg-gray-800 rounded-xl skeleton"},U))}):n.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white dark:bg-surface-dark rounded-xl border border-dashed border-gray-200 dark:border-gray-800",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-50 dark:bg-blue-900/20 rounded-full flex items-center justify-center mb-4",children:s.jsx(mr,{size:32,className:"text-blue-500"})}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"No templates yet"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(U=>{let X;try{X=JSON.parse(U.content)}catch{X={body:U.content}}return s.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 p-5 card-hover",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 text-blue-600 rounded-lg",children:s.jsx(Xm,{size:18})}),s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white truncate",children:U.name})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>q(U),className:"p-2 text-gray-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:s.jsx(yr,{size:16})}),s.jsx("button",{onClick:()=>Y(U.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:s.jsx(aa,{size:16})})]})]}),s.jsx("div",{className:"bg-[#E5DDD5] dark:bg-[#1f2c34] p-3 rounded-lg text-sm relative",children:s.jsxs("div",{className:"bg-white dark:bg-[#202c33] p-2 rounded-lg shadow-sm text-gray-900 dark:text-gray-100",children:[X.header&&s.jsx("p",{className:"font-bold mb-1 opacity-90",children:X.header}),s.jsx("p",{className:"whitespace-pre-wrap",children:X.body}),X.footer&&s.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:X.footer})]})})]},U.id)})}),d&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:s.jsxs("div",{className:"bg-white dark:bg-surface-dark w-full max-w-[95vw] h-[90vh] rounded-xl shadow-2xl overflow-hidden flex animate-slide-up",children:[s.jsxs("div",{className:"w-[35%] p-6 overflow-y-auto border-r border-gray-200 dark:border-gray-800 scrollbar-hide",children:[s.jsx("h2",{className:"text-xl font-bold mb-6",children:g?"Edit Template":"New Template"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Template Name"}),s.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-xl bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-gray-700 outline-none focus:border-primary text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"e.g. welcome_message",value:m.name,onChange:U=>y({...m,name:U.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Header (Optional)"}),s.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-xl bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-gray-700 outline-none focus:border-primary text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"Company Name / Title",value:m.header,onChange:U=>y({...m,header:U.target.value})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[s.jsx("label",{className:"block text-sm font-medium",children:"Body Text"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"file",id:"tpl-file-upload",className:"hidden",accept:"image/*,application/pdf",onChange:j,disabled:p}),s.jsx("label",{htmlFor:"tpl-file-upload",className:`p-1.5 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer transition-colors ${p?"opacity-50 cursor-not-allowed":""}`,title:"Attach Image or PDF",children:p?s.jsx(ta,{size:16,className:"animate-spin text-gray-500"}):s.jsx(ir,{size:16,className:"text-gray-500 dark:text-gray-400"})})]})]}),s.jsx("textarea",{className:"w-full h-32 px-4 py-3 rounded-xl bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-gray-700 outline-none focus:border-primary resize-none text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"Hello {{1}}, thanks for signing up!",value:m.body,onChange:U=>y({...m,body:U.target.value})}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Use ","{{1}}",", ","{{2}}"," for variables."]}),m.files.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:m.files.map((U,X)=>s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm text-xs",children:[s.jsx(ir,{size:12,className:"text-gray-400"}),s.jsx("span",{className:"max-w-[150px] truncate text-gray-600 dark:text-gray-300",children:U.filename}),s.jsx("button",{type:"button",onClick:()=>_(X),className:"text-gray-400 hover:text-red-500",children:s.jsx(pt,{size:12})})]},X))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Footer (Optional)"}),s.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-xl bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-gray-700 outline-none focus:border-primary text-gray-900 dark:text-white placeholder:text-gray-400",placeholder:"Reply STOP to unsubscribe",value:m.footer,onChange:U=>y({...m,footer:U.target.value})})]})]}),s.jsxs("div",{className:"mt-8 flex gap-3",children:[s.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-2.5 rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800",children:"Cancel"}),s.jsxs("button",{onClick:M,disabled:v||!m.body.trim(),className:"flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-primary text-primary hover:bg-primary/10 disabled:opacity-50",children:[v?s.jsx(ta,{size:16,className:"animate-spin"}):s.jsx(ar,{size:16}),v?"Analyzing...":"Analyze"]}),s.jsx("button",{onClick:L,className:"flex-1 py-2.5 btn-primary text-white rounded-xl shadow-glow",children:"Save Template"})]})]}),s.jsxs("div",{className:"w-[30%] bg-gray-50/50 dark:bg-black/10 border-r border-gray-200 dark:border-gray-800 p-4 flex flex-col",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-4 px-2",children:"Preview"}),s.jsx("div",{className:"flex-1 rounded-2xl overflow-hidden border border-gray-200 dark:border-gray-800 shadow-inner",children:s.jsx(s1,{header:m.header,body:m.body,footer:m.footer,files:m.files,buttons:m.buttons})})]}),s.jsxs("div",{className:"w-[35%] bg-gray-50 dark:bg-black/40 flex flex-col overflow-hidden p-4",children:[N&&s.jsxs("div",{className:`mb-4 p-4 rounded-xl border ${N.verdict==="good"?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800":N.verdict==="bad"?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[N.verdict==="good"?s.jsx(vv,{size:18,className:"text-emerald-600"}):s.jsx(wn,{size:18,className:N.verdict==="bad"?"text-red-600":"text-amber-600"}),s.jsxs("span",{className:"font-semibold",children:["Score: ",N.score,"/10"]})]}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-2",children:N.summary}),N.suggestions&&N.suggestions.length>0&&s.jsx("ul",{className:"text-sm space-y-1",children:N.suggestions.map((U,X)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-gray-400",children:""}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:U})]},X))})]}),s.jsx(lx,{currentContent:m.body,contentType:"template",onApplyText:U=>{y(X=>({...X,body:U})),z(null)}})]})]})})]})},r1=()=>{const{isDark:n,toggleTheme:r}=sx(),i=po(),[c,d]=E.useState({phoneNumberId:"",accessToken:"",wabaId:"",verifyToken:"whatsms_token"}),[f,g]=E.useState(!0),[h,m]=E.useState(!1),[y,p]=E.useState(!1),[b,v]=E.useState(""),S=`${window.location.origin}/webhooks`;E.useEffect(()=>{N()},[]);const N=async()=>{try{const M=await ce.get("/settings");M&&d({phoneNumberId:M.phoneNumberId||"",accessToken:M.accessToken||"",wabaId:M.wabaId||"",verifyToken:M.verifyToken||"whatsms_token"})}catch(M){console.error("Failed to load settings",M)}finally{g(!1)}},z=M=>{d({...c,[M.target.name]:M.target.value})},A=async()=>{try{await ce.post("/settings",c),i.success("Configuration saved successfully!")}catch(M){console.error("Failed to save settings",M),i.error("Failed to save configuration")}},k=()=>{navigator.clipboard.writeText(S),p(!0),setTimeout(()=>p(!1),2e3)};return f?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Settings"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Configure your WhatsApp Business API connection"})]}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[s.jsx("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 lg:col-span-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 flex items-center justify-center",children:s.jsx(fd,{size:20})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Appearance"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Customize the look and feel"})]})]}),s.jsxs("button",{onClick:r,className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 ${n?"bg-emerald-600":"bg-gray-200"}`,children:[s.jsx("span",{className:"sr-only",children:"Toggle theme"}),s.jsx("span",{className:`${n?"translate-x-7":"translate-x-1"} inline-block h-6 w-6 transform rounded-full bg-white transition-transform duration-300 flex items-center justify-center`,children:n?s.jsx(Nv,{size:14,className:"text-emerald-600"}):s.jsx(jv,{size:14,className:"text-orange-400"})})]})]})}),s.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 flex items-center justify-center",children:s.jsx(fd,{size:20})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:"API Credentials"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Enter your Meta Developer keys"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone Number ID"}),s.jsx("input",{type:"text",name:"phoneNumberId",value:c.phoneNumberId,onChange:z,placeholder:"e.g. 10452...",className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-all text-gray-900 dark:text-white placeholder:text-gray-400"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Found in WhatsApp API Setup"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Access Token"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:h?"text":"password",name:"accessToken",value:c.accessToken,onChange:z,placeholder:"Permanent or Temporary Access Token",className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-all pr-12 text-gray-900 dark:text-white placeholder:text-gray-400"}),s.jsx("button",{onClick:()=>m(!h),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:h?s.jsx(wv,{size:18}):s.jsx(Sv,{size:18})})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium mb-2",children:["WABA ID ",s.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),s.jsx("input",{type:"text",name:"wabaId",value:c.wabaId,onChange:z,placeholder:"e.g. 123456789...",className:"w-full px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-all text-gray-900 dark:text-white placeholder:text-gray-400"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"WhatsApp Business Account ID (for reference)"})]}),s.jsx("div",{className:"pt-4",children:s.jsxs("button",{onClick:A,className:"w-full px-6 py-2.5 bg-primary hover:bg-primary-dark text-white rounded-xl font-medium transition-colors flex items-center justify-center gap-2",children:[s.jsx($m,{size:18}),"Save Credentials"]})}),s.jsxs("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-800",children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Test Connectivity"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:b,onChange:M=>v(M.target.value),placeholder:"Recipient Phone (e.g. 1555...)",className:"flex-1 px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-background-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-all text-gray-900 dark:text-white placeholder:text-gray-400"}),s.jsxs("button",{onClick:async()=>{if(!b){i.error("Please enter a phone number to test");return}try{await A();const M=await ce.post("/settings/test",{targetPhone:b});i.success(M.message||"Connection Verified!")}catch(M){i.error(M.message||"Test Connection Failed")}},className:"px-6 py-2.5 bg-gray-100 hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-medium transition-colors flex items-center justify-center gap-2 whitespace-nowrap",title:"Send 'hello_world' template",children:[s.jsx(Vh,{size:18}),"Send Test"]})]}),s.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:['Sends a standard "hello_world" template. ',s.jsx("br",{}),"Note: If using a Meta Test Number, you can only send to ",s.jsx("strong",{children:"Verified Numbers"}),"."]})]}),s.jsx("p",{className:"text-xs text-center text-gray-400 mt-1",children:"Note: Credentials must be saved before testing."})]})]}),s.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-xl shadow-soft border border-gray-100 dark:border-gray-800/80 h-fit",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-teal-50 dark:bg-teal-900/20 text-teal-600 flex items-center justify-center",children:s.jsx(Vh,{size:20})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Webhook Setup"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Connect to Meta for incoming messages"})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl border border-gray-100 dark:border-gray-800",children:[s.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:"Callback URL"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("code",{className:"flex-1 text-sm font-mono text-gray-600 dark:text-gray-300 break-all",children:S}),s.jsx("button",{onClick:k,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Copy URL",children:y?s.jsx(ua,{size:16,className:"text-blue-500"}):s.jsx(zd,{size:16,className:"text-gray-400"})})]})]}),s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-background-dark rounded-xl border border-gray-100 dark:border-gray-800",children:[s.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:"Verify Token"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",name:"verifyToken",value:c.verifyToken,onChange:z,placeholder:"whatsms_token",className:"flex-1 w-full px-4 py-2 rounded-xl bg-white dark:bg-surface-dark border border-gray-200 dark:border-gray-700 outline-none focus:border-primary transition-all text-sm font-mono"}),s.jsx("div",{className:"text-xs px-2 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 rounded",children:"Editable"})]}),s.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Must match the Verify Token in Meta Dashboard"})]}),s.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/10 p-4 rounded-xl text-sm text-emerald-800 dark:text-emerald-300",children:[s.jsx("h4",{className:"font-semibold mb-1",children:"Setup Instructions:"}),s.jsxs("ol",{className:"list-decimal pl-4 space-y-1 opacity-80",children:[s.jsx("li",{children:"Go to your App Dashboard in Meta Developers."}),s.jsxs("li",{children:["Select ",s.jsx("strong",{children:"WhatsApp"})," > ",s.jsx("strong",{children:"Configuration"}),"."]}),s.jsxs("li",{children:["Click ",s.jsx("strong",{children:"Edit"})," under Webhook."]}),s.jsx("li",{children:"Paste the Callback URL and Verify Token above."}),s.jsxs("li",{children:["Enable events: ",s.jsx("code",{children:"messages"}),", ",s.jsx("code",{children:"message_status"}),"."]})]})]})]})]})]})]})};function i1(){const[n,r]=E.useState([]),[i,c]=E.useState(!0),[d,f]=E.useState(null),[g,h]=E.useState(null),[m,y]=E.useState("");E.useEffect(()=>{p()},[]),E.useEffect(()=>{const z=()=>f(null);return document.addEventListener("click",z),()=>document.removeEventListener("click",z)},[]);const p=async()=>{try{const z=await ce.get("/flows");r(z)}catch(z){console.error("Failed to fetch flows",z)}finally{c(!1)}},b=async z=>{if(confirm("Are you sure? This will stop any active executions."))try{await ce.delete(`/flows/${z}`),p()}catch(A){console.error("Failed to delete flow",A)}},v=z=>{h(z.id),y(z.name),f(null)},S=async()=>{if(!m.trim()){h(null);return}const z=n.find(A=>A.id===g);if(z&&z.name!==m)try{await ce.put(`/flows/${z.id}`,{...z,name:m}),r(n.map(A=>A.id===g?{...A,name:m}:A))}catch(A){console.error("Failed to rename flow",A),alert("Failed to rename flow"),p()}h(null)},N=async z=>{try{await ce.put(`/flows/${z.id}`,{isActive:!z.isActive}),p()}catch(A){console.error("Failed to update status",A)}};return i?s.jsx("div",{className:"p-8 text-center text-gray-400",children:"Loading automations..."}):s.jsxs("div",{className:"p-6 max-w-7xl mx-auto min-h-screen",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-neutral-100 mb-2",children:"Automations"}),s.jsx("p",{className:"text-gray-500 dark:text-neutral-400",children:"Build automated message flows and chatbots"})]}),s.jsxs(eo,{to:"/automations/new",className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors shadow-sm",children:[s.jsx(jn,{size:20}),"Create Flow"]})]}),n.length===0?s.jsxs("div",{className:"text-center py-16 bg-white dark:bg-[#0F0F0F] rounded-xl border border-gray-200 dark:border-[#262626] shadow-sm transition-colors",children:[s.jsx(lo,{size:48,className:"mx-auto text-gray-400 dark:text-neutral-600 mb-4"}),s.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-2",children:"No automations yet"}),s.jsx("p",{className:"text-gray-500 dark:text-neutral-400 mb-6",children:"Create your first automated workflow to engage customers 24/7."}),s.jsx(eo,{to:"/automations/new",className:"text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300 font-medium",children:"Get Started "})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(z=>s.jsxs("div",{className:"bg-white dark:bg-[#0F0F0F] rounded-xl border border-gray-200 dark:border-[#262626] p-6 hover:shadow-md transition-all duration-200",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:`p-2 rounded-lg ${z.isActive?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-500 dark:bg-[#1A1A1A] dark:text-neutral-400"}`,children:s.jsx(lo,{size:24})}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:A=>{A.stopPropagation(),A.preventDefault(),f(d===z.id?null:z.id)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-white p-1 rounded-full hover:bg-gray-100 dark:hover:bg-[#262626] transition-colors",children:[s.jsx("span",{className:"sr-only",children:"Menu"}),s.jsx(Km,{size:20})]}),d===z.id&&s.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-[#1A1A1A] rounded-lg shadow-xl py-1 z-50 border border-gray-200 dark:border-[#333] animate-in fade-in zoom-in-95 duration-100",children:[s.jsxs("button",{onClick:A=>{A.stopPropagation(),v(z)},className:"w-full text-left px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#252525] flex items-center gap-2",children:[s.jsx(yr,{size:16})," Rename"]}),s.jsxs("button",{onClick:A=>{A.stopPropagation(),f(null),b(z.id)},className:"w-full text-left px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[s.jsx(aa,{size:16})," Delete"]})]})]})]}),g===z.id?s.jsxs("div",{className:"mb-4",children:[s.jsx("input",{type:"text",autoFocus:!0,value:m,onChange:A=>y(A.target.value),onBlur:S,onKeyDown:A=>{A.key==="Enter"&&S(),A.key==="Escape"&&h(null)},className:"w-full text-lg font-semibold text-gray-900 dark:text-neutral-100 bg-white dark:bg-[#1A1A1A] border border-indigo-500 rounded px-2 py-1 outline-none shadow-sm"}),s.jsx("p",{className:"text-xs text-indigo-500 mt-1",children:"Press Enter to save"})]}):s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-neutral-100 mb-2 truncate cursor-pointer hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",onDoubleClick:()=>v(z),title:"Double click to rename",children:z.name}),s.jsx("p",{className:"text-gray-500 dark:text-neutral-400 text-sm mb-4 line-clamp-2",children:z.description||"No description provided."})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100 dark:border-[#262626]",children:[s.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-neutral-400",children:s.jsxs("span",{children:[z._count?.executions||0," runs"]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>N(z),className:`p-2 rounded-lg transition-colors ${z.isActive?"bg-green-100 text-green-600 hover:bg-green-200 dark:bg-green-900/30 dark:text-green-400 dark:hover:bg-green-900/50":"bg-gray-100 text-gray-500 hover:bg-gray-200 dark:bg-[#1A1A1A] dark:text-neutral-400 dark:hover:bg-[#262626]"}`,title:z.isActive?"Pause":"Activate",children:z.isActive?s.jsx(Fm,{size:18}):s.jsx(Qs,{size:18})}),s.jsx(eo,{to:`/automations/${z.id}`,className:"p-2 bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100 dark:bg-indigo-900/30 dark:text-indigo-400 dark:hover:bg-indigo-900/50",title:"Edit",children:s.jsx(kv,{size:18})})]})]})]},z.id))})]})}function nt(n){if(typeof n=="string"||typeof n=="number")return""+n;let r="";if(Array.isArray(n))for(let i=0,c;i<n.length;i++)(c=nt(n[i]))!==""&&(r+=(r&&" ")+c);else for(let i in n)n[i]&&(r+=(r&&" ")+i);return r}var o1={value:()=>{}};function bo(){for(var n=0,r=arguments.length,i={},c;n<r;++n){if(!(c=arguments[n]+"")||c in i||/[\s.]/.test(c))throw new Error("illegal type: "+c);i[c]=[]}return new to(i)}function to(n){this._=n}function c1(n,r){return n.trim().split(/^|\s+/).map(function(i){var c="",d=i.indexOf(".");if(d>=0&&(c=i.slice(d+1),i=i.slice(0,d)),i&&!r.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:c}})}to.prototype=bo.prototype={constructor:to,on:function(n,r){var i=this._,c=c1(n+"",i),d,f=-1,g=c.length;if(arguments.length<2){for(;++f<g;)if((d=(n=c[f]).type)&&(d=u1(i[d],n.name)))return d;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++f<g;)if(d=(n=c[f]).type)i[d]=Kh(i[d],n.name,r);else if(r==null)for(d in i)i[d]=Kh(i[d],n.name,null);return this},copy:function(){var n={},r=this._;for(var i in r)n[i]=r[i].slice();return new to(n)},call:function(n,r){if((d=arguments.length-2)>0)for(var i=new Array(d),c=0,d,f;c<d;++c)i[c]=arguments[c+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(f=this._[n],c=0,d=f.length;c<d;++c)f[c].value.apply(r,i)},apply:function(n,r,i){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var c=this._[n],d=0,f=c.length;d<f;++d)c[d].value.apply(r,i)}};function u1(n,r){for(var i=0,c=n.length,d;i<c;++i)if((d=n[i]).name===r)return d.value}function Kh(n,r,i){for(var c=0,d=n.length;c<d;++c)if(n[c].name===r){n[c]=o1,n=n.slice(0,c).concat(n.slice(c+1));break}return i!=null&&n.push({name:r,value:i}),n}var hd="http://www.w3.org/1999/xhtml";const Fh={svg:"http://www.w3.org/2000/svg",xhtml:hd,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function vo(n){var r=n+="",i=r.indexOf(":");return i>=0&&(r=n.slice(0,i))!=="xmlns"&&(n=n.slice(i+1)),Fh.hasOwnProperty(r)?{space:Fh[r],local:n}:n}function d1(n){return function(){var r=this.ownerDocument,i=this.namespaceURI;return i===hd&&r.documentElement.namespaceURI===hd?r.createElement(n):r.createElementNS(i,n)}}function f1(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function rx(n){var r=vo(n);return(r.local?f1:d1)(r)}function g1(){}function _d(n){return n==null?g1:function(){return this.querySelector(n)}}function h1(n){typeof n!="function"&&(n=_d(n));for(var r=this._groups,i=r.length,c=new Array(i),d=0;d<i;++d)for(var f=r[d],g=f.length,h=c[d]=new Array(g),m,y,p=0;p<g;++p)(m=f[p])&&(y=n.call(m,m.__data__,p,f))&&("__data__"in m&&(y.__data__=m.__data__),h[p]=y);return new Ht(c,this._parents)}function m1(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function x1(){return[]}function ix(n){return n==null?x1:function(){return this.querySelectorAll(n)}}function y1(n){return function(){return m1(n.apply(this,arguments))}}function p1(n){typeof n=="function"?n=y1(n):n=ix(n);for(var r=this._groups,i=r.length,c=[],d=[],f=0;f<i;++f)for(var g=r[f],h=g.length,m,y=0;y<h;++y)(m=g[y])&&(c.push(n.call(m,m.__data__,y,g)),d.push(m));return new Ht(c,d)}function ox(n){return function(){return this.matches(n)}}function cx(n){return function(r){return r.matches(n)}}var b1=Array.prototype.find;function v1(n){return function(){return b1.call(this.children,n)}}function N1(){return this.firstElementChild}function j1(n){return this.select(n==null?N1:v1(typeof n=="function"?n:cx(n)))}var w1=Array.prototype.filter;function S1(){return Array.from(this.children)}function k1(n){return function(){return w1.call(this.children,n)}}function C1(n){return this.selectAll(n==null?S1:k1(typeof n=="function"?n:cx(n)))}function z1(n){typeof n!="function"&&(n=ox(n));for(var r=this._groups,i=r.length,c=new Array(i),d=0;d<i;++d)for(var f=r[d],g=f.length,h=c[d]=[],m,y=0;y<g;++y)(m=f[y])&&n.call(m,m.__data__,y,f)&&h.push(m);return new Ht(c,this._parents)}function ux(n){return new Array(n.length)}function E1(){return new Ht(this._enter||this._groups.map(ux),this._parents)}function ro(n,r){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=r}ro.prototype={constructor:ro,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,r){return this._parent.insertBefore(n,r)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function A1(n){return function(){return n}}function T1(n,r,i,c,d,f){for(var g=0,h,m=r.length,y=f.length;g<y;++g)(h=r[g])?(h.__data__=f[g],c[g]=h):i[g]=new ro(n,f[g]);for(;g<m;++g)(h=r[g])&&(d[g]=h)}function _1(n,r,i,c,d,f,g){var h,m,y=new Map,p=r.length,b=f.length,v=new Array(p),S;for(h=0;h<p;++h)(m=r[h])&&(v[h]=S=g.call(m,m.__data__,h,r)+"",y.has(S)?d[h]=m:y.set(S,m));for(h=0;h<b;++h)S=g.call(n,f[h],h,f)+"",(m=y.get(S))?(c[h]=m,m.__data__=f[h],y.delete(S)):i[h]=new ro(n,f[h]);for(h=0;h<p;++h)(m=r[h])&&y.get(v[h])===m&&(d[h]=m)}function M1(n){return n.__data__}function D1(n,r){if(!arguments.length)return Array.from(this,M1);var i=r?_1:T1,c=this._parents,d=this._groups;typeof n!="function"&&(n=A1(n));for(var f=d.length,g=new Array(f),h=new Array(f),m=new Array(f),y=0;y<f;++y){var p=c[y],b=d[y],v=b.length,S=O1(n.call(p,p&&p.__data__,y,c)),N=S.length,z=h[y]=new Array(N),A=g[y]=new Array(N),k=m[y]=new Array(v);i(p,b,z,A,k,S,r);for(var M=0,j=0,_,L;M<N;++M)if(_=z[M]){for(M>=j&&(j=M+1);!(L=A[j])&&++j<N;);_._next=L||null}}return g=new Ht(g,c),g._enter=h,g._exit=m,g}function O1(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function R1(){return new Ht(this._exit||this._groups.map(ux),this._parents)}function H1(n,r,i){var c=this.enter(),d=this,f=this.exit();return typeof n=="function"?(c=n(c),c&&(c=c.selection())):c=c.append(n+""),r!=null&&(d=r(d),d&&(d=d.selection())),i==null?f.remove():i(f),c&&d?c.merge(d).order():d}function L1(n){for(var r=n.selection?n.selection():n,i=this._groups,c=r._groups,d=i.length,f=c.length,g=Math.min(d,f),h=new Array(d),m=0;m<g;++m)for(var y=i[m],p=c[m],b=y.length,v=h[m]=new Array(b),S,N=0;N<b;++N)(S=y[N]||p[N])&&(v[N]=S);for(;m<d;++m)h[m]=i[m];return new Ht(h,this._parents)}function B1(){for(var n=this._groups,r=-1,i=n.length;++r<i;)for(var c=n[r],d=c.length-1,f=c[d],g;--d>=0;)(g=c[d])&&(f&&g.compareDocumentPosition(f)^4&&f.parentNode.insertBefore(g,f),f=g);return this}function U1(n){n||(n=q1);function r(b,v){return b&&v?n(b.__data__,v.__data__):!b-!v}for(var i=this._groups,c=i.length,d=new Array(c),f=0;f<c;++f){for(var g=i[f],h=g.length,m=d[f]=new Array(h),y,p=0;p<h;++p)(y=g[p])&&(m[p]=y);m.sort(r)}return new Ht(d,this._parents).order()}function q1(n,r){return n<r?-1:n>r?1:n>=r?0:NaN}function V1(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function Y1(){return Array.from(this)}function G1(){for(var n=this._groups,r=0,i=n.length;r<i;++r)for(var c=n[r],d=0,f=c.length;d<f;++d){var g=c[d];if(g)return g}return null}function X1(){let n=0;for(const r of this)++n;return n}function Z1(){return!this.node()}function Q1(n){for(var r=this._groups,i=0,c=r.length;i<c;++i)for(var d=r[i],f=0,g=d.length,h;f<g;++f)(h=d[f])&&n.call(h,h.__data__,f,d);return this}function $1(n){return function(){this.removeAttribute(n)}}function K1(n){return function(){this.removeAttributeNS(n.space,n.local)}}function F1(n,r){return function(){this.setAttribute(n,r)}}function J1(n,r){return function(){this.setAttributeNS(n.space,n.local,r)}}function W1(n,r){return function(){var i=r.apply(this,arguments);i==null?this.removeAttribute(n):this.setAttribute(n,i)}}function I1(n,r){return function(){var i=r.apply(this,arguments);i==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,i)}}function P1(n,r){var i=vo(n);if(arguments.length<2){var c=this.node();return i.local?c.getAttributeNS(i.space,i.local):c.getAttribute(i)}return this.each((r==null?i.local?K1:$1:typeof r=="function"?i.local?I1:W1:i.local?J1:F1)(i,r))}function dx(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function eN(n){return function(){this.style.removeProperty(n)}}function tN(n,r,i){return function(){this.style.setProperty(n,r,i)}}function aN(n,r,i){return function(){var c=r.apply(this,arguments);c==null?this.style.removeProperty(n):this.style.setProperty(n,c,i)}}function nN(n,r,i){return arguments.length>1?this.each((r==null?eN:typeof r=="function"?aN:tN)(n,r,i??"")):Fs(this.node(),n)}function Fs(n,r){return n.style.getPropertyValue(r)||dx(n).getComputedStyle(n,null).getPropertyValue(r)}function sN(n){return function(){delete this[n]}}function lN(n,r){return function(){this[n]=r}}function rN(n,r){return function(){var i=r.apply(this,arguments);i==null?delete this[n]:this[n]=i}}function iN(n,r){return arguments.length>1?this.each((r==null?sN:typeof r=="function"?rN:lN)(n,r)):this.node()[n]}function fx(n){return n.trim().split(/^|\s+/)}function Md(n){return n.classList||new gx(n)}function gx(n){this._node=n,this._names=fx(n.getAttribute("class")||"")}gx.prototype={add:function(n){var r=this._names.indexOf(n);r<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var r=this._names.indexOf(n);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function hx(n,r){for(var i=Md(n),c=-1,d=r.length;++c<d;)i.add(r[c])}function mx(n,r){for(var i=Md(n),c=-1,d=r.length;++c<d;)i.remove(r[c])}function oN(n){return function(){hx(this,n)}}function cN(n){return function(){mx(this,n)}}function uN(n,r){return function(){(r.apply(this,arguments)?hx:mx)(this,n)}}function dN(n,r){var i=fx(n+"");if(arguments.length<2){for(var c=Md(this.node()),d=-1,f=i.length;++d<f;)if(!c.contains(i[d]))return!1;return!0}return this.each((typeof r=="function"?uN:r?oN:cN)(i,r))}function fN(){this.textContent=""}function gN(n){return function(){this.textContent=n}}function hN(n){return function(){var r=n.apply(this,arguments);this.textContent=r??""}}function mN(n){return arguments.length?this.each(n==null?fN:(typeof n=="function"?hN:gN)(n)):this.node().textContent}function xN(){this.innerHTML=""}function yN(n){return function(){this.innerHTML=n}}function pN(n){return function(){var r=n.apply(this,arguments);this.innerHTML=r??""}}function bN(n){return arguments.length?this.each(n==null?xN:(typeof n=="function"?pN:yN)(n)):this.node().innerHTML}function vN(){this.nextSibling&&this.parentNode.appendChild(this)}function NN(){return this.each(vN)}function jN(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wN(){return this.each(jN)}function SN(n){var r=typeof n=="function"?n:rx(n);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function kN(){return null}function CN(n,r){var i=typeof n=="function"?n:rx(n),c=r==null?kN:typeof r=="function"?r:_d(r);return this.select(function(){return this.insertBefore(i.apply(this,arguments),c.apply(this,arguments)||null)})}function zN(){var n=this.parentNode;n&&n.removeChild(this)}function EN(){return this.each(zN)}function AN(){var n=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(n,this.nextSibling):n}function TN(){var n=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(n,this.nextSibling):n}function _N(n){return this.select(n?TN:AN)}function MN(n){return arguments.length?this.property("__data__",n):this.node().__data__}function DN(n){return function(r){n.call(this,r,this.__data__)}}function ON(n){return n.trim().split(/^|\s+/).map(function(r){var i="",c=r.indexOf(".");return c>=0&&(i=r.slice(c+1),r=r.slice(0,c)),{type:r,name:i}})}function RN(n){return function(){var r=this.__on;if(r){for(var i=0,c=-1,d=r.length,f;i<d;++i)f=r[i],(!n.type||f.type===n.type)&&f.name===n.name?this.removeEventListener(f.type,f.listener,f.options):r[++c]=f;++c?r.length=c:delete this.__on}}}function HN(n,r,i){return function(){var c=this.__on,d,f=DN(r);if(c){for(var g=0,h=c.length;g<h;++g)if((d=c[g]).type===n.type&&d.name===n.name){this.removeEventListener(d.type,d.listener,d.options),this.addEventListener(d.type,d.listener=f,d.options=i),d.value=r;return}}this.addEventListener(n.type,f,i),d={type:n.type,name:n.name,value:r,listener:f,options:i},c?c.push(d):this.__on=[d]}}function LN(n,r,i){var c=ON(n+""),d,f=c.length,g;if(arguments.length<2){var h=this.node().__on;if(h){for(var m=0,y=h.length,p;m<y;++m)for(d=0,p=h[m];d<f;++d)if((g=c[d]).type===p.type&&g.name===p.name)return p.value}return}for(h=r?HN:RN,d=0;d<f;++d)this.each(h(c[d],r,i));return this}function xx(n,r,i){var c=dx(n),d=c.CustomEvent;typeof d=="function"?d=new d(r,i):(d=c.document.createEvent("Event"),i?(d.initEvent(r,i.bubbles,i.cancelable),d.detail=i.detail):d.initEvent(r,!1,!1)),n.dispatchEvent(d)}function BN(n,r){return function(){return xx(this,n,r)}}function UN(n,r){return function(){return xx(this,n,r.apply(this,arguments))}}function qN(n,r){return this.each((typeof r=="function"?UN:BN)(n,r))}function*VN(){for(var n=this._groups,r=0,i=n.length;r<i;++r)for(var c=n[r],d=0,f=c.length,g;d<f;++d)(g=c[d])&&(yield g)}var yx=[null];function Ht(n,r){this._groups=n,this._parents=r}function pr(){return new Ht([[document.documentElement]],yx)}function YN(){return this}Ht.prototype=pr.prototype={constructor:Ht,select:h1,selectAll:p1,selectChild:j1,selectChildren:C1,filter:z1,data:D1,enter:E1,exit:R1,join:H1,merge:L1,selection:YN,order:B1,sort:U1,call:V1,nodes:Y1,node:G1,size:X1,empty:Z1,each:Q1,attr:P1,style:nN,property:iN,classed:dN,text:mN,html:bN,raise:NN,lower:wN,append:SN,insert:CN,remove:EN,clone:_N,datum:MN,on:LN,dispatch:qN,[Symbol.iterator]:VN};function Rt(n){return typeof n=="string"?new Ht([[document.querySelector(n)]],[document.documentElement]):new Ht([[n]],yx)}function GN(n){let r;for(;r=n.sourceEvent;)n=r;return n}function It(n,r){if(n=GN(n),r===void 0&&(r=n.currentTarget),r){var i=r.ownerSVGElement||r;if(i.createSVGPoint){var c=i.createSVGPoint();return c.x=n.clientX,c.y=n.clientY,c=c.matrixTransform(r.getScreenCTM().inverse()),[c.x,c.y]}if(r.getBoundingClientRect){var d=r.getBoundingClientRect();return[n.clientX-d.left-r.clientLeft,n.clientY-d.top-r.clientTop]}}return[n.pageX,n.pageY]}const XN={passive:!1},or={capture:!0,passive:!1};function sd(n){n.stopImmediatePropagation()}function $s(n){n.preventDefault(),n.stopImmediatePropagation()}function px(n){var r=n.document.documentElement,i=Rt(n).on("dragstart.drag",$s,or);"onselectstart"in r?i.on("selectstart.drag",$s,or):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function bx(n,r){var i=n.document.documentElement,c=Rt(n).on("dragstart.drag",null);r&&(c.on("click.drag",$s,or),setTimeout(function(){c.on("click.drag",null)},0)),"onselectstart"in i?c.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}const $i=n=>()=>n;function md(n,{sourceEvent:r,subject:i,target:c,identifier:d,active:f,x:g,y:h,dx:m,dy:y,dispatch:p}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:i,enumerable:!0,configurable:!0},target:{value:c,enumerable:!0,configurable:!0},identifier:{value:d,enumerable:!0,configurable:!0},active:{value:f,enumerable:!0,configurable:!0},x:{value:g,enumerable:!0,configurable:!0},y:{value:h,enumerable:!0,configurable:!0},dx:{value:m,enumerable:!0,configurable:!0},dy:{value:y,enumerable:!0,configurable:!0},_:{value:p}})}md.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function ZN(n){return!n.ctrlKey&&!n.button}function QN(){return this.parentNode}function $N(n,r){return r??{x:n.x,y:n.y}}function KN(){return navigator.maxTouchPoints||"ontouchstart"in this}function vx(){var n=ZN,r=QN,i=$N,c=KN,d={},f=bo("start","drag","end"),g=0,h,m,y,p,b=0;function v(_){_.on("mousedown.drag",S).filter(c).on("touchstart.drag",A).on("touchmove.drag",k,XN).on("touchend.drag touchcancel.drag",M).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(_,L){if(!(p||!n.call(this,_,L))){var q=j(this,r.call(this,_,L),_,L,"mouse");q&&(Rt(_.view).on("mousemove.drag",N,or).on("mouseup.drag",z,or),px(_.view),sd(_),y=!1,h=_.clientX,m=_.clientY,q("start",_))}}function N(_){if($s(_),!y){var L=_.clientX-h,q=_.clientY-m;y=L*L+q*q>b}d.mouse("drag",_)}function z(_){Rt(_.view).on("mousemove.drag mouseup.drag",null),bx(_.view,y),$s(_),d.mouse("end",_)}function A(_,L){if(n.call(this,_,L)){var q=_.changedTouches,Y=r.call(this,_,L),U=q.length,X,re;for(X=0;X<U;++X)(re=j(this,Y,_,L,q[X].identifier,q[X]))&&(sd(_),re("start",_,q[X]))}}function k(_){var L=_.changedTouches,q=L.length,Y,U;for(Y=0;Y<q;++Y)(U=d[L[Y].identifier])&&($s(_),U("drag",_,L[Y]))}function M(_){var L=_.changedTouches,q=L.length,Y,U;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),Y=0;Y<q;++Y)(U=d[L[Y].identifier])&&(sd(_),U("end",_,L[Y]))}function j(_,L,q,Y,U,X){var re=f.copy(),$=It(X||q,L),W,B,T;if((T=i.call(_,new md("beforestart",{sourceEvent:q,target:v,identifier:U,active:g,x:$[0],y:$[1],dx:0,dy:0,dispatch:re}),Y))!=null)return W=T.x-$[0]||0,B=T.y-$[1]||0,function D(C,O,H){var Q=$,G;switch(C){case"start":d[U]=D,G=g++;break;case"end":delete d[U],--g;case"drag":$=It(H||O,L),G=g;break}re.call(C,_,new md(C,{sourceEvent:O,subject:T,target:v,identifier:U,active:G,x:$[0]+W,y:$[1]+B,dx:$[0]-Q[0],dy:$[1]-Q[1],dispatch:re}),Y)}}return v.filter=function(_){return arguments.length?(n=typeof _=="function"?_:$i(!!_),v):n},v.container=function(_){return arguments.length?(r=typeof _=="function"?_:$i(_),v):r},v.subject=function(_){return arguments.length?(i=typeof _=="function"?_:$i(_),v):i},v.touchable=function(_){return arguments.length?(c=typeof _=="function"?_:$i(!!_),v):c},v.on=function(){var _=f.on.apply(f,arguments);return _===f?v:_},v.clickDistance=function(_){return arguments.length?(b=(_=+_)*_,v):Math.sqrt(b)},v}var Js=0,er=0,Il=0,Nx=1e3,io,tr,oo=0,Wn=0,No=0,cr=typeof performance=="object"&&performance.now?performance:Date,jx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Dd(){return Wn||(jx(FN),Wn=cr.now()+No)}function FN(){Wn=0}function co(){this._call=this._time=this._next=null}co.prototype=wx.prototype={constructor:co,restart:function(n,r,i){if(typeof n!="function")throw new TypeError("callback is not a function");i=(i==null?Dd():+i)+(r==null?0:+r),!this._next&&tr!==this&&(tr?tr._next=this:io=this,tr=this),this._call=n,this._time=i,xd()},stop:function(){this._call&&(this._call=null,this._time=1/0,xd())}};function wx(n,r,i){var c=new co;return c.restart(n,r,i),c}function JN(){Dd(),++Js;for(var n=io,r;n;)(r=Wn-n._time)>=0&&n._call.call(void 0,r),n=n._next;--Js}function Jh(){Wn=(oo=cr.now())+No,Js=er=0;try{JN()}finally{Js=0,IN(),Wn=0}}function WN(){var n=cr.now(),r=n-oo;r>Nx&&(No-=r,oo=n)}function IN(){for(var n,r=io,i,c=1/0;r;)r._call?(c>r._time&&(c=r._time),n=r,r=r._next):(i=r._next,r._next=null,r=n?n._next=i:io=i);tr=n,xd(c)}function xd(n){if(!Js){er&&(er=clearTimeout(er));var r=n-Wn;r>24?(n<1/0&&(er=setTimeout(Jh,n-cr.now()-No)),Il&&(Il=clearInterval(Il))):(Il||(oo=cr.now(),Il=setInterval(WN,Nx)),Js=1,jx(Jh))}}function Wh(n,r,i){var c=new co;return r=r==null?0:+r,c.restart(d=>{c.stop(),n(d+r)},r,i),c}var PN=bo("start","end","cancel","interrupt"),ej=[],Sx=0,Ih=1,yd=2,ao=3,Ph=4,pd=5,no=6;function jo(n,r,i,c,d,f){var g=n.__transition;if(!g)n.__transition={};else if(i in g)return;tj(n,i,{name:r,index:c,group:d,on:PN,tween:ej,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:Sx})}function Od(n,r){var i=na(n,r);if(i.state>Sx)throw new Error("too late; already scheduled");return i}function ha(n,r){var i=na(n,r);if(i.state>ao)throw new Error("too late; already running");return i}function na(n,r){var i=n.__transition;if(!i||!(i=i[r]))throw new Error("transition not found");return i}function tj(n,r,i){var c=n.__transition,d;c[r]=i,i.timer=wx(f,0,i.time);function f(y){i.state=Ih,i.timer.restart(g,i.delay,i.time),i.delay<=y&&g(y-i.delay)}function g(y){var p,b,v,S;if(i.state!==Ih)return m();for(p in c)if(S=c[p],S.name===i.name){if(S.state===ao)return Wh(g);S.state===Ph?(S.state=no,S.timer.stop(),S.on.call("interrupt",n,n.__data__,S.index,S.group),delete c[p]):+p<r&&(S.state=no,S.timer.stop(),S.on.call("cancel",n,n.__data__,S.index,S.group),delete c[p])}if(Wh(function(){i.state===ao&&(i.state=Ph,i.timer.restart(h,i.delay,i.time),h(y))}),i.state=yd,i.on.call("start",n,n.__data__,i.index,i.group),i.state===yd){for(i.state=ao,d=new Array(v=i.tween.length),p=0,b=-1;p<v;++p)(S=i.tween[p].value.call(n,n.__data__,i.index,i.group))&&(d[++b]=S);d.length=b+1}}function h(y){for(var p=y<i.duration?i.ease.call(null,y/i.duration):(i.timer.restart(m),i.state=pd,1),b=-1,v=d.length;++b<v;)d[b].call(n,p);i.state===pd&&(i.on.call("end",n,n.__data__,i.index,i.group),m())}function m(){i.state=no,i.timer.stop(),delete c[r];for(var y in c)return;delete n.__transition}}function so(n,r){var i=n.__transition,c,d,f=!0,g;if(i){r=r==null?null:r+"";for(g in i){if((c=i[g]).name!==r){f=!1;continue}d=c.state>yd&&c.state<pd,c.state=no,c.timer.stop(),c.on.call(d?"interrupt":"cancel",n,n.__data__,c.index,c.group),delete i[g]}f&&delete n.__transition}}function aj(n){return this.each(function(){so(this,n)})}function nj(n,r){var i,c;return function(){var d=ha(this,n),f=d.tween;if(f!==i){c=i=f;for(var g=0,h=c.length;g<h;++g)if(c[g].name===r){c=c.slice(),c.splice(g,1);break}}d.tween=c}}function sj(n,r,i){var c,d;if(typeof i!="function")throw new Error;return function(){var f=ha(this,n),g=f.tween;if(g!==c){d=(c=g).slice();for(var h={name:r,value:i},m=0,y=d.length;m<y;++m)if(d[m].name===r){d[m]=h;break}m===y&&d.push(h)}f.tween=d}}function lj(n,r){var i=this._id;if(n+="",arguments.length<2){for(var c=na(this.node(),i).tween,d=0,f=c.length,g;d<f;++d)if((g=c[d]).name===n)return g.value;return null}return this.each((r==null?nj:sj)(i,n,r))}function Rd(n,r,i){var c=n._id;return n.each(function(){var d=ha(this,c);(d.value||(d.value={}))[r]=i.apply(this,arguments)}),function(d){return na(d,c).value[r]}}function kx(n,r){var i;return(typeof r=="number"?Wb:r instanceof Hh?Rh:(i=Hh(r))?(r=i,Rh):Ib)(n,r)}function rj(n){return function(){this.removeAttribute(n)}}function ij(n){return function(){this.removeAttributeNS(n.space,n.local)}}function oj(n,r,i){var c,d=i+"",f;return function(){var g=this.getAttribute(n);return g===d?null:g===c?f:f=r(c=g,i)}}function cj(n,r,i){var c,d=i+"",f;return function(){var g=this.getAttributeNS(n.space,n.local);return g===d?null:g===c?f:f=r(c=g,i)}}function uj(n,r,i){var c,d,f;return function(){var g,h=i(this),m;return h==null?void this.removeAttribute(n):(g=this.getAttribute(n),m=h+"",g===m?null:g===c&&m===d?f:(d=m,f=r(c=g,h)))}}function dj(n,r,i){var c,d,f;return function(){var g,h=i(this),m;return h==null?void this.removeAttributeNS(n.space,n.local):(g=this.getAttributeNS(n.space,n.local),m=h+"",g===m?null:g===c&&m===d?f:(d=m,f=r(c=g,h)))}}function fj(n,r){var i=vo(n),c=i==="transform"?Pb:kx;return this.attrTween(n,typeof r=="function"?(i.local?dj:uj)(i,c,Rd(this,"attr."+n,r)):r==null?(i.local?ij:rj)(i):(i.local?cj:oj)(i,c,r))}function gj(n,r){return function(i){this.setAttribute(n,r.call(this,i))}}function hj(n,r){return function(i){this.setAttributeNS(n.space,n.local,r.call(this,i))}}function mj(n,r){var i,c;function d(){var f=r.apply(this,arguments);return f!==c&&(i=(c=f)&&hj(n,f)),i}return d._value=r,d}function xj(n,r){var i,c;function d(){var f=r.apply(this,arguments);return f!==c&&(i=(c=f)&&gj(n,f)),i}return d._value=r,d}function yj(n,r){var i="attr."+n;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(r==null)return this.tween(i,null);if(typeof r!="function")throw new Error;var c=vo(n);return this.tween(i,(c.local?mj:xj)(c,r))}function pj(n,r){return function(){Od(this,n).delay=+r.apply(this,arguments)}}function bj(n,r){return r=+r,function(){Od(this,n).delay=r}}function vj(n){var r=this._id;return arguments.length?this.each((typeof n=="function"?pj:bj)(r,n)):na(this.node(),r).delay}function Nj(n,r){return function(){ha(this,n).duration=+r.apply(this,arguments)}}function jj(n,r){return r=+r,function(){ha(this,n).duration=r}}function wj(n){var r=this._id;return arguments.length?this.each((typeof n=="function"?Nj:jj)(r,n)):na(this.node(),r).duration}function Sj(n,r){if(typeof r!="function")throw new Error;return function(){ha(this,n).ease=r}}function kj(n){var r=this._id;return arguments.length?this.each(Sj(r,n)):na(this.node(),r).ease}function Cj(n,r){return function(){var i=r.apply(this,arguments);if(typeof i!="function")throw new Error;ha(this,n).ease=i}}function zj(n){if(typeof n!="function")throw new Error;return this.each(Cj(this._id,n))}function Ej(n){typeof n!="function"&&(n=ox(n));for(var r=this._groups,i=r.length,c=new Array(i),d=0;d<i;++d)for(var f=r[d],g=f.length,h=c[d]=[],m,y=0;y<g;++y)(m=f[y])&&n.call(m,m.__data__,y,f)&&h.push(m);return new qa(c,this._parents,this._name,this._id)}function Aj(n){if(n._id!==this._id)throw new Error;for(var r=this._groups,i=n._groups,c=r.length,d=i.length,f=Math.min(c,d),g=new Array(c),h=0;h<f;++h)for(var m=r[h],y=i[h],p=m.length,b=g[h]=new Array(p),v,S=0;S<p;++S)(v=m[S]||y[S])&&(b[S]=v);for(;h<c;++h)g[h]=r[h];return new qa(g,this._parents,this._name,this._id)}function Tj(n){return(n+"").trim().split(/^|\s+/).every(function(r){var i=r.indexOf(".");return i>=0&&(r=r.slice(0,i)),!r||r==="start"})}function _j(n,r,i){var c,d,f=Tj(r)?Od:ha;return function(){var g=f(this,n),h=g.on;h!==c&&(d=(c=h).copy()).on(r,i),g.on=d}}function Mj(n,r){var i=this._id;return arguments.length<2?na(this.node(),i).on.on(n):this.each(_j(i,n,r))}function Dj(n){return function(){var r=this.parentNode;for(var i in this.__transition)if(+i!==n)return;r&&r.removeChild(this)}}function Oj(){return this.on("end.remove",Dj(this._id))}function Rj(n){var r=this._name,i=this._id;typeof n!="function"&&(n=_d(n));for(var c=this._groups,d=c.length,f=new Array(d),g=0;g<d;++g)for(var h=c[g],m=h.length,y=f[g]=new Array(m),p,b,v=0;v<m;++v)(p=h[v])&&(b=n.call(p,p.__data__,v,h))&&("__data__"in p&&(b.__data__=p.__data__),y[v]=b,jo(y[v],r,i,v,y,na(p,i)));return new qa(f,this._parents,r,i)}function Hj(n){var r=this._name,i=this._id;typeof n!="function"&&(n=ix(n));for(var c=this._groups,d=c.length,f=[],g=[],h=0;h<d;++h)for(var m=c[h],y=m.length,p,b=0;b<y;++b)if(p=m[b]){for(var v=n.call(p,p.__data__,b,m),S,N=na(p,i),z=0,A=v.length;z<A;++z)(S=v[z])&&jo(S,r,i,z,v,N);f.push(v),g.push(p)}return new qa(f,g,r,i)}var Lj=pr.prototype.constructor;function Bj(){return new Lj(this._groups,this._parents)}function Uj(n,r){var i,c,d;return function(){var f=Fs(this,n),g=(this.style.removeProperty(n),Fs(this,n));return f===g?null:f===i&&g===c?d:d=r(i=f,c=g)}}function Cx(n){return function(){this.style.removeProperty(n)}}function qj(n,r,i){var c,d=i+"",f;return function(){var g=Fs(this,n);return g===d?null:g===c?f:f=r(c=g,i)}}function Vj(n,r,i){var c,d,f;return function(){var g=Fs(this,n),h=i(this),m=h+"";return h==null&&(m=h=(this.style.removeProperty(n),Fs(this,n))),g===m?null:g===c&&m===d?f:(d=m,f=r(c=g,h))}}function Yj(n,r){var i,c,d,f="style."+r,g="end."+f,h;return function(){var m=ha(this,n),y=m.on,p=m.value[f]==null?h||(h=Cx(r)):void 0;(y!==i||d!==p)&&(c=(i=y).copy()).on(g,d=p),m.on=c}}function Gj(n,r,i){var c=(n+="")=="transform"?ev:kx;return r==null?this.styleTween(n,Uj(n,c)).on("end.style."+n,Cx(n)):typeof r=="function"?this.styleTween(n,Vj(n,c,Rd(this,"style."+n,r))).each(Yj(this._id,n)):this.styleTween(n,qj(n,c,r),i).on("end.style."+n,null)}function Xj(n,r,i){return function(c){this.style.setProperty(n,r.call(this,c),i)}}function Zj(n,r,i){var c,d;function f(){var g=r.apply(this,arguments);return g!==d&&(c=(d=g)&&Xj(n,g,i)),c}return f._value=r,f}function Qj(n,r,i){var c="style."+(n+="");if(arguments.length<2)return(c=this.tween(c))&&c._value;if(r==null)return this.tween(c,null);if(typeof r!="function")throw new Error;return this.tween(c,Zj(n,r,i??""))}function $j(n){return function(){this.textContent=n}}function Kj(n){return function(){var r=n(this);this.textContent=r??""}}function Fj(n){return this.tween("text",typeof n=="function"?Kj(Rd(this,"text",n)):$j(n==null?"":n+""))}function Jj(n){return function(r){this.textContent=n.call(this,r)}}function Wj(n){var r,i;function c(){var d=n.apply(this,arguments);return d!==i&&(r=(i=d)&&Jj(d)),r}return c._value=n,c}function Ij(n){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;return this.tween(r,Wj(n))}function Pj(){for(var n=this._name,r=this._id,i=zx(),c=this._groups,d=c.length,f=0;f<d;++f)for(var g=c[f],h=g.length,m,y=0;y<h;++y)if(m=g[y]){var p=na(m,r);jo(m,n,i,y,g,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new qa(c,this._parents,n,i)}function e2(){var n,r,i=this,c=i._id,d=i.size();return new Promise(function(f,g){var h={value:g},m={value:function(){--d===0&&f()}};i.each(function(){var y=ha(this,c),p=y.on;p!==n&&(r=(n=p).copy(),r._.cancel.push(h),r._.interrupt.push(h),r._.end.push(m)),y.on=r}),d===0&&f()})}var t2=0;function qa(n,r,i,c){this._groups=n,this._parents=r,this._name=i,this._id=c}function zx(){return++t2}var Ba=pr.prototype;qa.prototype={constructor:qa,select:Rj,selectAll:Hj,selectChild:Ba.selectChild,selectChildren:Ba.selectChildren,filter:Ej,merge:Aj,selection:Bj,transition:Pj,call:Ba.call,nodes:Ba.nodes,node:Ba.node,size:Ba.size,empty:Ba.empty,each:Ba.each,on:Mj,attr:fj,attrTween:yj,style:Gj,styleTween:Qj,text:Fj,textTween:Ij,remove:Oj,tween:lj,delay:vj,duration:wj,ease:kj,easeVarying:zj,end:e2,[Symbol.iterator]:Ba[Symbol.iterator]};function a2(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var n2={time:null,delay:0,duration:250,ease:a2};function s2(n,r){for(var i;!(i=n.__transition)||!(i=i[r]);)if(!(n=n.parentNode))throw new Error(`transition ${r} not found`);return i}function l2(n){var r,i;n instanceof qa?(r=n._id,n=n._name):(r=zx(),(i=n2).time=Dd(),n=n==null?null:n+"");for(var c=this._groups,d=c.length,f=0;f<d;++f)for(var g=c[f],h=g.length,m,y=0;y<h;++y)(m=g[y])&&jo(m,n,r,y,g,i||s2(m,r));return new qa(c,this._parents,n,r)}pr.prototype.interrupt=aj;pr.prototype.transition=l2;const Ki=n=>()=>n;function r2(n,{sourceEvent:r,target:i,transform:c,dispatch:d}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}function Ua(n,r,i){this.k=n,this.x=r,this.y=i}Ua.prototype={constructor:Ua,scale:function(n){return n===1?this:new Ua(this.k*n,this.x,this.y)},translate:function(n,r){return n===0&r===0?this:new Ua(this.k,this.x+this.k*n,this.y+this.k*r)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var wo=new Ua(1,0,0);Ex.prototype=Ua.prototype;function Ex(n){for(;!n.__zoom;)if(!(n=n.parentNode))return wo;return n.__zoom}function ld(n){n.stopImmediatePropagation()}function Pl(n){n.preventDefault(),n.stopImmediatePropagation()}function i2(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function o2(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function em(){return this.__zoom||wo}function c2(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function u2(){return navigator.maxTouchPoints||"ontouchstart"in this}function d2(n,r,i){var c=n.invertX(r[0][0])-i[0][0],d=n.invertX(r[1][0])-i[1][0],f=n.invertY(r[0][1])-i[0][1],g=n.invertY(r[1][1])-i[1][1];return n.translate(d>c?(c+d)/2:Math.min(0,c)||Math.max(0,d),g>f?(f+g)/2:Math.min(0,f)||Math.max(0,g))}function Ax(){var n=i2,r=o2,i=d2,c=c2,d=u2,f=[0,1/0],g=[[-1/0,-1/0],[1/0,1/0]],h=250,m=Pi,y=bo("start","zoom","end"),p,b,v,S=500,N=150,z=0,A=10;function k(T){T.property("__zoom",em).on("wheel.zoom",U,{passive:!1}).on("mousedown.zoom",X).on("dblclick.zoom",re).filter(d).on("touchstart.zoom",$).on("touchmove.zoom",W).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}k.transform=function(T,D,C,O){var H=T.selection?T.selection():T;H.property("__zoom",em),T!==H?L(T,D,C,O):H.interrupt().each(function(){q(this,arguments).event(O).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},k.scaleBy=function(T,D,C,O){k.scaleTo(T,function(){var H=this.__zoom.k,Q=typeof D=="function"?D.apply(this,arguments):D;return H*Q},C,O)},k.scaleTo=function(T,D,C,O){k.transform(T,function(){var H=r.apply(this,arguments),Q=this.__zoom,G=C==null?_(H):typeof C=="function"?C.apply(this,arguments):C,ee=Q.invert(G),P=typeof D=="function"?D.apply(this,arguments):D;return i(j(M(Q,P),G,ee),H,g)},C,O)},k.translateBy=function(T,D,C,O){k.transform(T,function(){return i(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof C=="function"?C.apply(this,arguments):C),r.apply(this,arguments),g)},null,O)},k.translateTo=function(T,D,C,O,H){k.transform(T,function(){var Q=r.apply(this,arguments),G=this.__zoom,ee=O==null?_(Q):typeof O=="function"?O.apply(this,arguments):O;return i(wo.translate(ee[0],ee[1]).scale(G.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof C=="function"?-C.apply(this,arguments):-C),Q,g)},O,H)};function M(T,D){return D=Math.max(f[0],Math.min(f[1],D)),D===T.k?T:new Ua(D,T.x,T.y)}function j(T,D,C){var O=D[0]-C[0]*T.k,H=D[1]-C[1]*T.k;return O===T.x&&H===T.y?T:new Ua(T.k,O,H)}function _(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function L(T,D,C,O){T.on("start.zoom",function(){q(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){q(this,arguments).event(O).end()}).tween("zoom",function(){var H=this,Q=arguments,G=q(H,Q).event(O),ee=r.apply(H,Q),P=C==null?_(ee):typeof C=="function"?C.apply(H,Q):C,le=Math.max(ee[1][0]-ee[0][0],ee[1][1]-ee[0][1]),ie=H.__zoom,fe=typeof D=="function"?D.apply(H,Q):D,be=m(ie.invert(P).concat(le/ie.k),fe.invert(P).concat(le/fe.k));return function(me){if(me===1)me=fe;else{var oe=be(me),ue=le/oe[2];me=new Ua(ue,P[0]-oe[0]*ue,P[1]-oe[1]*ue)}G.zoom(null,me)}})}function q(T,D,C){return!C&&T.__zooming||new Y(T,D)}function Y(T,D){this.that=T,this.args=D,this.active=0,this.sourceEvent=null,this.extent=r.apply(T,D),this.taps=0}Y.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,D){return this.mouse&&T!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var D=Rt(this.that).datum();y.call(T,this.that,new r2(T,{sourceEvent:this.sourceEvent,target:k,transform:this.that.__zoom,dispatch:y}),D)}};function U(T,...D){if(!n.apply(this,arguments))return;var C=q(this,D).event(T),O=this.__zoom,H=Math.max(f[0],Math.min(f[1],O.k*Math.pow(2,c.apply(this,arguments)))),Q=It(T);if(C.wheel)(C.mouse[0][0]!==Q[0]||C.mouse[0][1]!==Q[1])&&(C.mouse[1]=O.invert(C.mouse[0]=Q)),clearTimeout(C.wheel);else{if(O.k===H)return;C.mouse=[Q,O.invert(Q)],so(this),C.start()}Pl(T),C.wheel=setTimeout(G,N),C.zoom("mouse",i(j(M(O,H),C.mouse[0],C.mouse[1]),C.extent,g));function G(){C.wheel=null,C.end()}}function X(T,...D){if(v||!n.apply(this,arguments))return;var C=T.currentTarget,O=q(this,D,!0).event(T),H=Rt(T.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",le,!0),Q=It(T,C),G=T.clientX,ee=T.clientY;px(T.view),ld(T),O.mouse=[Q,this.__zoom.invert(Q)],so(this),O.start();function P(ie){if(Pl(ie),!O.moved){var fe=ie.clientX-G,be=ie.clientY-ee;O.moved=fe*fe+be*be>z}O.event(ie).zoom("mouse",i(j(O.that.__zoom,O.mouse[0]=It(ie,C),O.mouse[1]),O.extent,g))}function le(ie){H.on("mousemove.zoom mouseup.zoom",null),bx(ie.view,O.moved),Pl(ie),O.event(ie).end()}}function re(T,...D){if(n.apply(this,arguments)){var C=this.__zoom,O=It(T.changedTouches?T.changedTouches[0]:T,this),H=C.invert(O),Q=C.k*(T.shiftKey?.5:2),G=i(j(M(C,Q),O,H),r.apply(this,D),g);Pl(T),h>0?Rt(this).transition().duration(h).call(L,G,O,T):Rt(this).call(k.transform,G,O,T)}}function $(T,...D){if(n.apply(this,arguments)){var C=T.touches,O=C.length,H=q(this,D,T.changedTouches.length===O).event(T),Q,G,ee,P;for(ld(T),G=0;G<O;++G)ee=C[G],P=It(ee,this),P=[P,this.__zoom.invert(P),ee.identifier],H.touch0?!H.touch1&&H.touch0[2]!==P[2]&&(H.touch1=P,H.taps=0):(H.touch0=P,Q=!0,H.taps=1+!!p);p&&(p=clearTimeout(p)),Q&&(H.taps<2&&(b=P[0],p=setTimeout(function(){p=null},S)),so(this),H.start())}}function W(T,...D){if(this.__zooming){var C=q(this,D).event(T),O=T.changedTouches,H=O.length,Q,G,ee,P;for(Pl(T),Q=0;Q<H;++Q)G=O[Q],ee=It(G,this),C.touch0&&C.touch0[2]===G.identifier?C.touch0[0]=ee:C.touch1&&C.touch1[2]===G.identifier&&(C.touch1[0]=ee);if(G=C.that.__zoom,C.touch1){var le=C.touch0[0],ie=C.touch0[1],fe=C.touch1[0],be=C.touch1[1],me=(me=fe[0]-le[0])*me+(me=fe[1]-le[1])*me,oe=(oe=be[0]-ie[0])*oe+(oe=be[1]-ie[1])*oe;G=M(G,Math.sqrt(me/oe)),ee=[(le[0]+fe[0])/2,(le[1]+fe[1])/2],P=[(ie[0]+be[0])/2,(ie[1]+be[1])/2]}else if(C.touch0)ee=C.touch0[0],P=C.touch0[1];else return;C.zoom("touch",i(j(G,ee,P),C.extent,g))}}function B(T,...D){if(this.__zooming){var C=q(this,D).event(T),O=T.changedTouches,H=O.length,Q,G;for(ld(T),v&&clearTimeout(v),v=setTimeout(function(){v=null},S),Q=0;Q<H;++Q)G=O[Q],C.touch0&&C.touch0[2]===G.identifier?delete C.touch0:C.touch1&&C.touch1[2]===G.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(G=It(G,this),Math.hypot(b[0]-G[0],b[1]-G[1])<A)){var ee=Rt(this).on("dblclick.zoom");ee&&ee.apply(this,arguments)}}}return k.wheelDelta=function(T){return arguments.length?(c=typeof T=="function"?T:Ki(+T),k):c},k.filter=function(T){return arguments.length?(n=typeof T=="function"?T:Ki(!!T),k):n},k.touchable=function(T){return arguments.length?(d=typeof T=="function"?T:Ki(!!T),k):d},k.extent=function(T){return arguments.length?(r=typeof T=="function"?T:Ki([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),k):r},k.scaleExtent=function(T){return arguments.length?(f[0]=+T[0],f[1]=+T[1],k):[f[0],f[1]]},k.translateExtent=function(T){return arguments.length?(g[0][0]=+T[0][0],g[1][0]=+T[1][0],g[0][1]=+T[0][1],g[1][1]=+T[1][1],k):[[g[0][0],g[0][1]],[g[1][0],g[1][1]]]},k.constrain=function(T){return arguments.length?(i=T,k):i},k.duration=function(T){return arguments.length?(h=+T,k):h},k.interpolate=function(T){return arguments.length?(m=T,k):m},k.on=function(){var T=y.on.apply(y,arguments);return T===y?k:T},k.clickDistance=function(T){return arguments.length?(z=(T=+T)*T,k):Math.sqrt(z)},k.tapDistance=function(T){return arguments.length?(A=+T,k):A},k}const ga={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:n=>`Node type "${n}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:n=>`The old edge with id=${n} does not exist.`,error009:n=>`Marker type "${n}" doesn't exist.`,error008:(n,{id:r,sourceHandle:i,targetHandle:c})=>`Couldn't create edge for ${n} handle id: "${n==="source"?i:c}", edge id: ${r}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:n=>`Edge type "${n}" not found. Using fallback type "default".`,error012:n=>`Node with id "${n}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(n="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${n}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},ur=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Tx=["Enter"," ","Escape"],_x={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:n,x:r,y:i})=>`Moved selected node ${n}. New position, x: ${r}, y: ${i}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Ws;(function(n){n.Strict="strict",n.Loose="loose"})(Ws||(Ws={}));var Jn;(function(n){n.Free="free",n.Vertical="vertical",n.Horizontal="horizontal"})(Jn||(Jn={}));var dr;(function(n){n.Partial="partial",n.Full="full"})(dr||(dr={}));const Mx={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var vn;(function(n){n.Bezier="default",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n.SimpleBezier="simplebezier"})(vn||(vn={}));var uo;(function(n){n.Arrow="arrow",n.ArrowClosed="arrowclosed"})(uo||(uo={}));var he;(function(n){n.Left="left",n.Top="top",n.Right="right",n.Bottom="bottom"})(he||(he={}));const tm={[he.Left]:he.Right,[he.Right]:he.Left,[he.Top]:he.Bottom,[he.Bottom]:he.Top};function Dx(n){return n===null?null:n?"valid":"invalid"}const Ox=n=>"id"in n&&"source"in n&&"target"in n,f2=n=>"id"in n&&"position"in n&&!("source"in n)&&!("target"in n),Hd=n=>"id"in n&&"internals"in n&&!("source"in n)&&!("target"in n),br=(n,r=[0,0])=>{const{width:i,height:c}=Va(n),d=n.origin??r,f=i*d[0],g=c*d[1];return{x:n.position.x-f,y:n.position.y-g}},g2=(n,r={nodeOrigin:[0,0]})=>{if(n.length===0)return{x:0,y:0,width:0,height:0};const i=n.reduce((c,d)=>{const f=typeof d=="string";let g=!r.nodeLookup&&!f?d:void 0;r.nodeLookup&&(g=f?r.nodeLookup.get(d):Hd(d)?d:r.nodeLookup.get(d.id));const h=g?fo(g,r.nodeOrigin):{x:0,y:0,x2:0,y2:0};return So(c,h)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ko(i)},vr=(n,r={})=>{let i={x:1/0,y:1/0,x2:-1/0,y2:-1/0},c=!1;return n.forEach(d=>{(r.filter===void 0||r.filter(d))&&(i=So(i,fo(d)),c=!0)}),c?ko(i):{x:0,y:0,width:0,height:0}},Ld=(n,r,[i,c,d]=[0,0,1],f=!1,g=!1)=>{const h={...jr(r,[i,c,d]),width:r.width/d,height:r.height/d},m=[];for(const y of n.values()){const{measured:p,selectable:b=!0,hidden:v=!1}=y;if(g&&!b||v)continue;const S=p.width??y.width??y.initialWidth??null,N=p.height??y.height??y.initialHeight??null,z=fr(h,Ps(y)),A=(S??0)*(N??0),k=f&&z>0;(!y.internals.handleBounds||k||z>=A||y.dragging)&&m.push(y)}return m},h2=(n,r)=>{const i=new Set;return n.forEach(c=>{i.add(c.id)}),r.filter(c=>i.has(c.source)||i.has(c.target))};function m2(n,r){const i=new Map,c=r?.nodes?new Set(r.nodes.map(d=>d.id)):null;return n.forEach(d=>{d.measured.width&&d.measured.height&&(r?.includeHiddenNodes||!d.hidden)&&(!c||c.has(d.id))&&i.set(d.id,d)}),i}async function x2({nodes:n,width:r,height:i,panZoom:c,minZoom:d,maxZoom:f},g){if(n.size===0)return Promise.resolve(!0);const h=m2(n,g),m=vr(h),y=Bd(m,r,i,g?.minZoom??d,g?.maxZoom??f,g?.padding??.1);return await c.setViewport(y,{duration:g?.duration,ease:g?.ease,interpolate:g?.interpolate}),Promise.resolve(!0)}function Rx({nodeId:n,nextPosition:r,nodeLookup:i,nodeOrigin:c=[0,0],nodeExtent:d,onError:f}){const g=i.get(n),h=g.parentId?i.get(g.parentId):void 0,{x:m,y}=h?h.internals.positionAbsolute:{x:0,y:0},p=g.origin??c;let b=g.extent||d;if(g.extent==="parent"&&!g.expandParent)if(!h)f?.("005",ga.error005());else{const S=h.measured.width,N=h.measured.height;S&&N&&(b=[[m,y],[m+S,y+N]])}else h&&el(g.extent)&&(b=[[g.extent[0][0]+m,g.extent[0][1]+y],[g.extent[1][0]+m,g.extent[1][1]+y]]);const v=el(b)?In(r,b,g.measured):r;return(g.measured.width===void 0||g.measured.height===void 0)&&f?.("015",ga.error015()),{position:{x:v.x-m+(g.measured.width??0)*p[0],y:v.y-y+(g.measured.height??0)*p[1]},positionAbsolute:v}}async function y2({nodesToRemove:n=[],edgesToRemove:r=[],nodes:i,edges:c,onBeforeDelete:d}){const f=new Set(n.map(v=>v.id)),g=[];for(const v of i){if(v.deletable===!1)continue;const S=f.has(v.id),N=!S&&v.parentId&&g.find(z=>z.id===v.parentId);(S||N)&&g.push(v)}const h=new Set(r.map(v=>v.id)),m=c.filter(v=>v.deletable!==!1),p=h2(g,m);for(const v of m)h.has(v.id)&&!p.find(N=>N.id===v.id)&&p.push(v);if(!d)return{edges:p,nodes:g};const b=await d({nodes:g,edges:p});return typeof b=="boolean"?b?{edges:p,nodes:g}:{edges:[],nodes:[]}:b}const Is=(n,r=0,i=1)=>Math.min(Math.max(n,r),i),In=(n={x:0,y:0},r,i)=>({x:Is(n.x,r[0][0],r[1][0]-(i?.width??0)),y:Is(n.y,r[0][1],r[1][1]-(i?.height??0))});function Hx(n,r,i){const{width:c,height:d}=Va(i),{x:f,y:g}=i.internals.positionAbsolute;return In(n,[[f,g],[f+c,g+d]],r)}const am=(n,r,i)=>n<r?Is(Math.abs(n-r),1,r)/r:n>i?-Is(Math.abs(n-i),1,r)/r:0,Lx=(n,r,i=15,c=40)=>{const d=am(n.x,c,r.width-c)*i,f=am(n.y,c,r.height-c)*i;return[d,f]},So=(n,r)=>({x:Math.min(n.x,r.x),y:Math.min(n.y,r.y),x2:Math.max(n.x2,r.x2),y2:Math.max(n.y2,r.y2)}),bd=({x:n,y:r,width:i,height:c})=>({x:n,y:r,x2:n+i,y2:r+c}),ko=({x:n,y:r,x2:i,y2:c})=>({x:n,y:r,width:i-n,height:c-r}),Ps=(n,r=[0,0])=>{const{x:i,y:c}=Hd(n)?n.internals.positionAbsolute:br(n,r);return{x:i,y:c,width:n.measured?.width??n.width??n.initialWidth??0,height:n.measured?.height??n.height??n.initialHeight??0}},fo=(n,r=[0,0])=>{const{x:i,y:c}=Hd(n)?n.internals.positionAbsolute:br(n,r);return{x:i,y:c,x2:i+(n.measured?.width??n.width??n.initialWidth??0),y2:c+(n.measured?.height??n.height??n.initialHeight??0)}},Bx=(n,r)=>ko(So(bd(n),bd(r))),fr=(n,r)=>{const i=Math.max(0,Math.min(n.x+n.width,r.x+r.width)-Math.max(n.x,r.x)),c=Math.max(0,Math.min(n.y+n.height,r.y+r.height)-Math.max(n.y,r.y));return Math.ceil(i*c)},nm=n=>Pt(n.width)&&Pt(n.height)&&Pt(n.x)&&Pt(n.y),Pt=n=>!isNaN(n)&&isFinite(n),p2=(n,r)=>{},Nr=(n,r=[1,1])=>({x:r[0]*Math.round(n.x/r[0]),y:r[1]*Math.round(n.y/r[1])}),jr=({x:n,y:r},[i,c,d],f=!1,g=[1,1])=>{const h={x:(n-i)/d,y:(r-c)/d};return f?Nr(h,g):h},go=({x:n,y:r},[i,c,d])=>({x:n*d+i,y:r*d+c});function Gs(n,r){if(typeof n=="number")return Math.floor((r-r/(1+n))*.5);if(typeof n=="string"&&n.endsWith("px")){const i=parseFloat(n);if(!Number.isNaN(i))return Math.floor(i)}if(typeof n=="string"&&n.endsWith("%")){const i=parseFloat(n);if(!Number.isNaN(i))return Math.floor(r*i*.01)}return console.error(`[React Flow] The padding value "${n}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function b2(n,r,i){if(typeof n=="string"||typeof n=="number"){const c=Gs(n,i),d=Gs(n,r);return{top:c,right:d,bottom:c,left:d,x:d*2,y:c*2}}if(typeof n=="object"){const c=Gs(n.top??n.y??0,i),d=Gs(n.bottom??n.y??0,i),f=Gs(n.left??n.x??0,r),g=Gs(n.right??n.x??0,r);return{top:c,right:g,bottom:d,left:f,x:f+g,y:c+d}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function v2(n,r,i,c,d,f){const{x:g,y:h}=go(n,[r,i,c]),{x:m,y}=go({x:n.x+n.width,y:n.y+n.height},[r,i,c]),p=d-m,b=f-y;return{left:Math.floor(g),top:Math.floor(h),right:Math.floor(p),bottom:Math.floor(b)}}const Bd=(n,r,i,c,d,f)=>{const g=b2(f,r,i),h=(r-g.x)/n.width,m=(i-g.y)/n.height,y=Math.min(h,m),p=Is(y,c,d),b=n.x+n.width/2,v=n.y+n.height/2,S=r/2-b*p,N=i/2-v*p,z=v2(n,S,N,p,r,i),A={left:Math.min(z.left-g.left,0),top:Math.min(z.top-g.top,0),right:Math.min(z.right-g.right,0),bottom:Math.min(z.bottom-g.bottom,0)};return{x:S-A.left+A.right,y:N-A.top+A.bottom,zoom:p}},gr=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function el(n){return n!=null&&n!=="parent"}function Va(n){return{width:n.measured?.width??n.width??n.initialWidth??0,height:n.measured?.height??n.height??n.initialHeight??0}}function Ux(n){return(n.measured?.width??n.width??n.initialWidth)!==void 0&&(n.measured?.height??n.height??n.initialHeight)!==void 0}function qx(n,r={width:0,height:0},i,c,d){const f={...n},g=c.get(i);if(g){const h=g.origin||d;f.x+=g.internals.positionAbsolute.x-(r.width??0)*h[0],f.y+=g.internals.positionAbsolute.y-(r.height??0)*h[1]}return f}function sm(n,r){if(n.size!==r.size)return!1;for(const i of n)if(!r.has(i))return!1;return!0}function N2(){let n,r;return{promise:new Promise((c,d)=>{n=c,r=d}),resolve:n,reject:r}}function j2(n){return{..._x,...n||{}}}function nr(n,{snapGrid:r=[0,0],snapToGrid:i=!1,transform:c,containerBounds:d}){const{x:f,y:g}=ea(n),h=jr({x:f-(d?.left??0),y:g-(d?.top??0)},c),{x:m,y}=i?Nr(h,r):h;return{xSnapped:m,ySnapped:y,...h}}const Ud=n=>({width:n.offsetWidth,height:n.offsetHeight}),Vx=n=>n?.getRootNode?.()||window?.document,w2=["INPUT","SELECT","TEXTAREA"];function Yx(n){const r=n.composedPath?.()?.[0]||n.target;return r?.nodeType!==1?!1:w2.includes(r.nodeName)||r.hasAttribute("contenteditable")||!!r.closest(".nokey")}const Gx=n=>"clientX"in n,ea=(n,r)=>{const i=Gx(n),c=i?n.clientX:n.touches?.[0].clientX,d=i?n.clientY:n.touches?.[0].clientY;return{x:c-(r?.left??0),y:d-(r?.top??0)}},lm=(n,r,i,c,d)=>{const f=r.querySelectorAll(`.${n}`);return!f||!f.length?null:Array.from(f).map(g=>{const h=g.getBoundingClientRect();return{id:g.getAttribute("data-handleid"),type:n,nodeId:d,position:g.getAttribute("data-handlepos"),x:(h.left-i.left)/c,y:(h.top-i.top)/c,...Ud(g)}})};function Xx({sourceX:n,sourceY:r,targetX:i,targetY:c,sourceControlX:d,sourceControlY:f,targetControlX:g,targetControlY:h}){const m=n*.125+d*.375+g*.375+i*.125,y=r*.125+f*.375+h*.375+c*.125,p=Math.abs(m-n),b=Math.abs(y-r);return[m,y,p,b]}function Fi(n,r){return n>=0?.5*n:r*25*Math.sqrt(-n)}function rm({pos:n,x1:r,y1:i,x2:c,y2:d,c:f}){switch(n){case he.Left:return[r-Fi(r-c,f),i];case he.Right:return[r+Fi(c-r,f),i];case he.Top:return[r,i-Fi(i-d,f)];case he.Bottom:return[r,i+Fi(d-i,f)]}}function Zx({sourceX:n,sourceY:r,sourcePosition:i=he.Bottom,targetX:c,targetY:d,targetPosition:f=he.Top,curvature:g=.25}){const[h,m]=rm({pos:i,x1:n,y1:r,x2:c,y2:d,c:g}),[y,p]=rm({pos:f,x1:c,y1:d,x2:n,y2:r,c:g}),[b,v,S,N]=Xx({sourceX:n,sourceY:r,targetX:c,targetY:d,sourceControlX:h,sourceControlY:m,targetControlX:y,targetControlY:p});return[`M${n},${r} C${h},${m} ${y},${p} ${c},${d}`,b,v,S,N]}function Qx({sourceX:n,sourceY:r,targetX:i,targetY:c}){const d=Math.abs(i-n)/2,f=i<n?i+d:i-d,g=Math.abs(c-r)/2,h=c<r?c+g:c-g;return[f,h,d,g]}function S2({sourceNode:n,targetNode:r,selected:i=!1,zIndex:c=0,elevateOnSelect:d=!1,zIndexMode:f="basic"}){if(f==="manual")return c;const g=d&&i?c+1e3:c,h=Math.max(n.parentId||d&&n.selected?n.internals.z:0,r.parentId||d&&r.selected?r.internals.z:0);return g+h}function k2({sourceNode:n,targetNode:r,width:i,height:c,transform:d}){const f=So(fo(n),fo(r));f.x===f.x2&&(f.x2+=1),f.y===f.y2&&(f.y2+=1);const g={x:-d[0]/d[2],y:-d[1]/d[2],width:i/d[2],height:c/d[2]};return fr(g,ko(f))>0}const C2=({source:n,sourceHandle:r,target:i,targetHandle:c})=>`xy-edge__${n}${r||""}-${i}${c||""}`,z2=(n,r)=>r.some(i=>i.source===n.source&&i.target===n.target&&(i.sourceHandle===n.sourceHandle||!i.sourceHandle&&!n.sourceHandle)&&(i.targetHandle===n.targetHandle||!i.targetHandle&&!n.targetHandle)),$x=(n,r,i={})=>{if(!n.source||!n.target)return r;const c=i.getEdgeId||C2;let d;return Ox(n)?d={...n}:d={...n,id:c(n)},z2(d,r)?r:(d.sourceHandle===null&&delete d.sourceHandle,d.targetHandle===null&&delete d.targetHandle,r.concat(d))};function Kx({sourceX:n,sourceY:r,targetX:i,targetY:c}){const[d,f,g,h]=Qx({sourceX:n,sourceY:r,targetX:i,targetY:c});return[`M ${n},${r}L ${i},${c}`,d,f,g,h]}const im={[he.Left]:{x:-1,y:0},[he.Right]:{x:1,y:0},[he.Top]:{x:0,y:-1},[he.Bottom]:{x:0,y:1}},E2=({source:n,sourcePosition:r=he.Bottom,target:i})=>r===he.Left||r===he.Right?n.x<i.x?{x:1,y:0}:{x:-1,y:0}:n.y<i.y?{x:0,y:1}:{x:0,y:-1},om=(n,r)=>Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2));function A2({source:n,sourcePosition:r=he.Bottom,target:i,targetPosition:c=he.Top,center:d,offset:f,stepPosition:g}){const h=im[r],m=im[c],y={x:n.x+h.x*f,y:n.y+h.y*f},p={x:i.x+m.x*f,y:i.y+m.y*f},b=E2({source:y,sourcePosition:r,target:p}),v=b.x!==0?"x":"y",S=b[v];let N=[],z,A;const k={x:0,y:0},M={x:0,y:0},[,,j,_]=Qx({sourceX:n.x,sourceY:n.y,targetX:i.x,targetY:i.y});if(h[v]*m[v]===-1){v==="x"?(z=d.x??y.x+(p.x-y.x)*g,A=d.y??(y.y+p.y)/2):(z=d.x??(y.x+p.x)/2,A=d.y??y.y+(p.y-y.y)*g);const q=[{x:z,y:y.y},{x:z,y:p.y}],Y=[{x:y.x,y:A},{x:p.x,y:A}];h[v]===S?N=v==="x"?q:Y:N=v==="x"?Y:q}else{const q=[{x:y.x,y:p.y}],Y=[{x:p.x,y:y.y}];if(v==="x"?N=h.x===S?Y:q:N=h.y===S?q:Y,r===c){const W=Math.abs(n[v]-i[v]);if(W<=f){const B=Math.min(f-1,f-W);h[v]===S?k[v]=(y[v]>n[v]?-1:1)*B:M[v]=(p[v]>i[v]?-1:1)*B}}if(r!==c){const W=v==="x"?"y":"x",B=h[v]===m[W],T=y[W]>p[W],D=y[W]<p[W];(h[v]===1&&(!B&&T||B&&D)||h[v]!==1&&(!B&&D||B&&T))&&(N=v==="x"?q:Y)}const U={x:y.x+k.x,y:y.y+k.y},X={x:p.x+M.x,y:p.y+M.y},re=Math.max(Math.abs(U.x-N[0].x),Math.abs(X.x-N[0].x)),$=Math.max(Math.abs(U.y-N[0].y),Math.abs(X.y-N[0].y));re>=$?(z=(U.x+X.x)/2,A=N[0].y):(z=N[0].x,A=(U.y+X.y)/2)}return[[n,{x:y.x+k.x,y:y.y+k.y},...N,{x:p.x+M.x,y:p.y+M.y},i],z,A,j,_]}function T2(n,r,i,c){const d=Math.min(om(n,r)/2,om(r,i)/2,c),{x:f,y:g}=r;if(n.x===f&&f===i.x||n.y===g&&g===i.y)return`L${f} ${g}`;if(n.y===g){const y=n.x<i.x?-1:1,p=n.y<i.y?1:-1;return`L ${f+d*y},${g}Q ${f},${g} ${f},${g+d*p}`}const h=n.x<i.x?1:-1,m=n.y<i.y?-1:1;return`L ${f},${g+d*m}Q ${f},${g} ${f+d*h},${g}`}function vd({sourceX:n,sourceY:r,sourcePosition:i=he.Bottom,targetX:c,targetY:d,targetPosition:f=he.Top,borderRadius:g=5,centerX:h,centerY:m,offset:y=20,stepPosition:p=.5}){const[b,v,S,N,z]=A2({source:{x:n,y:r},sourcePosition:i,target:{x:c,y:d},targetPosition:f,center:{x:h,y:m},offset:y,stepPosition:p});return[b.reduce((k,M,j)=>{let _="";return j>0&&j<b.length-1?_=T2(b[j-1],M,b[j+1],g):_=`${j===0?"M":"L"}${M.x} ${M.y}`,k+=_,k},""),v,S,N,z]}function cm(n){return n&&!!(n.internals.handleBounds||n.handles?.length)&&!!(n.measured.width||n.width||n.initialWidth)}function _2(n){const{sourceNode:r,targetNode:i}=n;if(!cm(r)||!cm(i))return null;const c=r.internals.handleBounds||um(r.handles),d=i.internals.handleBounds||um(i.handles),f=dm(c?.source??[],n.sourceHandle),g=dm(n.connectionMode===Ws.Strict?d?.target??[]:(d?.target??[]).concat(d?.source??[]),n.targetHandle);if(!f||!g)return n.onError?.("008",ga.error008(f?"target":"source",{id:n.id,sourceHandle:n.sourceHandle,targetHandle:n.targetHandle})),null;const h=f?.position||he.Bottom,m=g?.position||he.Top,y=Pn(r,f,h),p=Pn(i,g,m);return{sourceX:y.x,sourceY:y.y,targetX:p.x,targetY:p.y,sourcePosition:h,targetPosition:m}}function um(n){if(!n)return null;const r=[],i=[];for(const c of n)c.width=c.width??1,c.height=c.height??1,c.type==="source"?r.push(c):c.type==="target"&&i.push(c);return{source:r,target:i}}function Pn(n,r,i=he.Left,c=!1){const d=(r?.x??0)+n.internals.positionAbsolute.x,f=(r?.y??0)+n.internals.positionAbsolute.y,{width:g,height:h}=r??Va(n);if(c)return{x:d+g/2,y:f+h/2};switch(r?.position??i){case he.Top:return{x:d+g/2,y:f};case he.Right:return{x:d+g,y:f+h/2};case he.Bottom:return{x:d+g/2,y:f+h};case he.Left:return{x:d,y:f+h/2}}}function dm(n,r){return n&&(r?n.find(i=>i.id===r):n[0])||null}function Nd(n,r){return n?typeof n=="string"?n:`${r?`${r}__`:""}${Object.keys(n).sort().map(c=>`${c}=${n[c]}`).join("&")}`:""}function M2(n,{id:r,defaultColor:i,defaultMarkerStart:c,defaultMarkerEnd:d}){const f=new Set;return n.reduce((g,h)=>([h.markerStart||c,h.markerEnd||d].forEach(m=>{if(m&&typeof m=="object"){const y=Nd(m,r);f.has(y)||(g.push({id:y,color:m.color||i,...m}),f.add(y))}}),g),[]).sort((g,h)=>g.id.localeCompare(h.id))}const Fx=1e3,D2=10,qd={nodeOrigin:[0,0],nodeExtent:ur,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},O2={...qd,checkEquality:!0};function Vd(n,r){const i={...n};for(const c in r)r[c]!==void 0&&(i[c]=r[c]);return i}function R2(n,r,i){const c=Vd(qd,i);for(const d of n.values())if(d.parentId)Gd(d,n,r,c);else{const f=br(d,c.nodeOrigin),g=el(d.extent)?d.extent:c.nodeExtent,h=In(f,g,Va(d));d.internals.positionAbsolute=h}}function H2(n,r){if(!n.handles)return n.measured?r?.internals.handleBounds:void 0;const i=[],c=[];for(const d of n.handles){const f={id:d.id,width:d.width??1,height:d.height??1,nodeId:n.id,x:d.x,y:d.y,position:d.position,type:d.type};d.type==="source"?i.push(f):d.type==="target"&&c.push(f)}return{source:i,target:c}}function Yd(n){return n==="manual"}function jd(n,r,i,c={}){const d=Vd(O2,c),f={i:0},g=new Map(r),h=d?.elevateNodesOnSelect&&!Yd(d.zIndexMode)?Fx:0;let m=n.length>0;r.clear(),i.clear();for(const y of n){let p=g.get(y.id);if(d.checkEquality&&y===p?.internals.userNode)r.set(y.id,p);else{const b=br(y,d.nodeOrigin),v=el(y.extent)?y.extent:d.nodeExtent,S=In(b,v,Va(y));p={...d.defaults,...y,measured:{width:y.measured?.width,height:y.measured?.height},internals:{positionAbsolute:S,handleBounds:H2(y,p),z:Jx(y,h,d.zIndexMode),userNode:y}},r.set(y.id,p)}(p.measured===void 0||p.measured.width===void 0||p.measured.height===void 0)&&!p.hidden&&(m=!1),y.parentId&&Gd(p,r,i,c,f)}return m}function L2(n,r){if(!n.parentId)return;const i=r.get(n.parentId);i?i.set(n.id,n):r.set(n.parentId,new Map([[n.id,n]]))}function Gd(n,r,i,c,d){const{elevateNodesOnSelect:f,nodeOrigin:g,nodeExtent:h,zIndexMode:m}=Vd(qd,c),y=n.parentId,p=r.get(y);if(!p){console.warn(`Parent node ${y} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}L2(n,i),d&&!p.parentId&&p.internals.rootParentIndex===void 0&&m==="auto"&&(p.internals.rootParentIndex=++d.i,p.internals.z=p.internals.z+d.i*D2),d&&p.internals.rootParentIndex!==void 0&&(d.i=p.internals.rootParentIndex);const b=f&&!Yd(m)?Fx:0,{x:v,y:S,z:N}=B2(n,p,g,h,b,m),{positionAbsolute:z}=n.internals,A=v!==z.x||S!==z.y;(A||N!==n.internals.z)&&r.set(n.id,{...n,internals:{...n.internals,positionAbsolute:A?{x:v,y:S}:z,z:N}})}function Jx(n,r,i){const c=Pt(n.zIndex)?n.zIndex:0;return Yd(i)?c:c+(n.selected?r:0)}function B2(n,r,i,c,d,f){const{x:g,y:h}=r.internals.positionAbsolute,m=Va(n),y=br(n,i),p=el(n.extent)?In(y,n.extent,m):y;let b=In({x:g+p.x,y:h+p.y},c,m);n.extent==="parent"&&(b=Hx(b,m,r));const v=Jx(n,d,f),S=r.internals.z??0;return{x:b.x,y:b.y,z:S>=v?S+1:v}}function Xd(n,r,i,c=[0,0]){const d=[],f=new Map;for(const g of n){const h=r.get(g.parentId);if(!h)continue;const m=f.get(g.parentId)?.expandedRect??Ps(h),y=Bx(m,g.rect);f.set(g.parentId,{expandedRect:y,parent:h})}return f.size>0&&f.forEach(({expandedRect:g,parent:h},m)=>{const y=h.internals.positionAbsolute,p=Va(h),b=h.origin??c,v=g.x<y.x?Math.round(Math.abs(y.x-g.x)):0,S=g.y<y.y?Math.round(Math.abs(y.y-g.y)):0,N=Math.max(p.width,Math.round(g.width)),z=Math.max(p.height,Math.round(g.height)),A=(N-p.width)*b[0],k=(z-p.height)*b[1];(v>0||S>0||A||k)&&(d.push({id:m,type:"position",position:{x:h.position.x-v+A,y:h.position.y-S+k}}),i.get(m)?.forEach(M=>{n.some(j=>j.id===M.id)||d.push({id:M.id,type:"position",position:{x:M.position.x+v,y:M.position.y+S}})})),(p.width<g.width||p.height<g.height||v||S)&&d.push({id:m,type:"dimensions",setAttributes:!0,dimensions:{width:N+(v?b[0]*v-A:0),height:z+(S?b[1]*S-k:0)}})}),d}function U2(n,r,i,c,d,f,g){const h=c?.querySelector(".xyflow__viewport");let m=!1;if(!h)return{changes:[],updatedInternals:m};const y=[],p=window.getComputedStyle(h),{m22:b}=new window.DOMMatrixReadOnly(p.transform),v=[];for(const S of n.values()){const N=r.get(S.id);if(!N)continue;if(N.hidden){r.set(N.id,{...N,internals:{...N.internals,handleBounds:void 0}}),m=!0;continue}const z=Ud(S.nodeElement),A=N.measured.width!==z.width||N.measured.height!==z.height;if(!!(z.width&&z.height&&(A||!N.internals.handleBounds||S.force))){const M=S.nodeElement.getBoundingClientRect(),j=el(N.extent)?N.extent:f;let{positionAbsolute:_}=N.internals;N.parentId&&N.extent==="parent"?_=Hx(_,z,r.get(N.parentId)):j&&(_=In(_,j,z));const L={...N,measured:z,internals:{...N.internals,positionAbsolute:_,handleBounds:{source:lm("source",S.nodeElement,M,b,N.id),target:lm("target",S.nodeElement,M,b,N.id)}}};r.set(N.id,L),N.parentId&&Gd(L,r,i,{nodeOrigin:d,zIndexMode:g}),m=!0,A&&(y.push({id:N.id,type:"dimensions",dimensions:z}),N.expandParent&&N.parentId&&v.push({id:N.id,parentId:N.parentId,rect:Ps(L,d)}))}}if(v.length>0){const S=Xd(v,r,i,d);y.push(...S)}return{changes:y,updatedInternals:m}}async function q2({delta:n,panZoom:r,transform:i,translateExtent:c,width:d,height:f}){if(!r||!n.x&&!n.y)return Promise.resolve(!1);const g=await r.setViewportConstrained({x:i[0]+n.x,y:i[1]+n.y,zoom:i[2]},[[0,0],[d,f]],c),h=!!g&&(g.x!==i[0]||g.y!==i[1]||g.k!==i[2]);return Promise.resolve(h)}function fm(n,r,i,c,d,f){let g=d;const h=c.get(g)||new Map;c.set(g,h.set(i,r)),g=`${d}-${n}`;const m=c.get(g)||new Map;if(c.set(g,m.set(i,r)),f){g=`${d}-${n}-${f}`;const y=c.get(g)||new Map;c.set(g,y.set(i,r))}}function Wx(n,r,i){n.clear(),r.clear();for(const c of i){const{source:d,target:f,sourceHandle:g=null,targetHandle:h=null}=c,m={edgeId:c.id,source:d,target:f,sourceHandle:g,targetHandle:h},y=`${d}-${g}--${f}-${h}`,p=`${f}-${h}--${d}-${g}`;fm("source",m,p,n,d,g),fm("target",m,y,n,f,h),r.set(c.id,c)}}function Ix(n,r){if(!n.parentId)return!1;const i=r.get(n.parentId);return i?i.selected?!0:Ix(i,r):!1}function gm(n,r,i){let c=n;do{if(c?.matches?.(r))return!0;if(c===i)return!1;c=c?.parentElement}while(c);return!1}function V2(n,r,i,c){const d=new Map;for(const[f,g]of n)if((g.selected||g.id===c)&&(!g.parentId||!Ix(g,n))&&(g.draggable||r&&typeof g.draggable>"u")){const h=n.get(f);h&&d.set(f,{id:f,position:h.position||{x:0,y:0},distance:{x:i.x-h.internals.positionAbsolute.x,y:i.y-h.internals.positionAbsolute.y},extent:h.extent,parentId:h.parentId,origin:h.origin,expandParent:h.expandParent,internals:{positionAbsolute:h.internals.positionAbsolute||{x:0,y:0}},measured:{width:h.measured.width??0,height:h.measured.height??0}})}return d}function rd({nodeId:n,dragItems:r,nodeLookup:i,dragging:c=!0}){const d=[];for(const[g,h]of r){const m=i.get(g)?.internals.userNode;m&&d.push({...m,position:h.position,dragging:c})}if(!n)return[d[0],d];const f=i.get(n)?.internals.userNode;return[f?{...f,position:r.get(n)?.position||f.position,dragging:c}:d[0],d]}function Y2({dragItems:n,snapGrid:r,x:i,y:c}){const d=n.values().next().value;if(!d)return null;const f={x:i-d.distance.x,y:c-d.distance.y},g=Nr(f,r);return{x:g.x-f.x,y:g.y-f.y}}function G2({onNodeMouseDown:n,getStoreItems:r,onDragStart:i,onDrag:c,onDragStop:d}){let f={x:null,y:null},g=0,h=new Map,m=!1,y={x:0,y:0},p=null,b=!1,v=null,S=!1,N=!1,z=null;function A({noDragClassName:M,handleSelector:j,domNode:_,isSelectable:L,nodeId:q,nodeClickDistance:Y=0}){v=Rt(_);function U({x:W,y:B}){const{nodeLookup:T,nodeExtent:D,snapGrid:C,snapToGrid:O,nodeOrigin:H,onNodeDrag:Q,onSelectionDrag:G,onError:ee,updateNodePositions:P}=r();f={x:W,y:B};let le=!1;const ie=h.size>1,fe=ie&&D?bd(vr(h)):null,be=ie&&O?Y2({dragItems:h,snapGrid:C,x:W,y:B}):null;for(const[me,oe]of h){if(!T.has(me))continue;let ue={x:W-oe.distance.x,y:B-oe.distance.y};O&&(ue=be?{x:Math.round(ue.x+be.x),y:Math.round(ue.y+be.y)}:Nr(ue,C));let Se=null;if(ie&&D&&!oe.extent&&fe){const{positionAbsolute:Ne}=oe.internals,se=Ne.x-fe.x+D[0][0],pe=Ne.x+oe.measured.width-fe.x2+D[1][0],we=Ne.y-fe.y+D[0][1],Ye=Ne.y+oe.measured.height-fe.y2+D[1][1];Se=[[se,we],[pe,Ye]]}const{position:je,positionAbsolute:ye}=Rx({nodeId:me,nextPosition:ue,nodeLookup:T,nodeExtent:Se||D,nodeOrigin:H,onError:ee});le=le||oe.position.x!==je.x||oe.position.y!==je.y,oe.position=je,oe.internals.positionAbsolute=ye}if(N=N||le,!!le&&(P(h,!0),z&&(c||Q||!q&&G))){const[me,oe]=rd({nodeId:q,dragItems:h,nodeLookup:T});c?.(z,h,me,oe),Q?.(z,me,oe),q||G?.(z,oe)}}async function X(){if(!p)return;const{transform:W,panBy:B,autoPanSpeed:T,autoPanOnNodeDrag:D}=r();if(!D){m=!1,cancelAnimationFrame(g);return}const[C,O]=Lx(y,p,T);(C!==0||O!==0)&&(f.x=(f.x??0)-C/W[2],f.y=(f.y??0)-O/W[2],await B({x:C,y:O})&&U(f)),g=requestAnimationFrame(X)}function re(W){const{nodeLookup:B,multiSelectionActive:T,nodesDraggable:D,transform:C,snapGrid:O,snapToGrid:H,selectNodesOnDrag:Q,onNodeDragStart:G,onSelectionDragStart:ee,unselectNodesAndEdges:P}=r();b=!0,(!Q||!L)&&!T&&q&&(B.get(q)?.selected||P()),L&&Q&&q&&n?.(q);const le=nr(W.sourceEvent,{transform:C,snapGrid:O,snapToGrid:H,containerBounds:p});if(f=le,h=V2(B,D,le,q),h.size>0&&(i||G||!q&&ee)){const[ie,fe]=rd({nodeId:q,dragItems:h,nodeLookup:B});i?.(W.sourceEvent,h,ie,fe),G?.(W.sourceEvent,ie,fe),q||ee?.(W.sourceEvent,fe)}}const $=vx().clickDistance(Y).on("start",W=>{const{domNode:B,nodeDragThreshold:T,transform:D,snapGrid:C,snapToGrid:O}=r();p=B?.getBoundingClientRect()||null,S=!1,N=!1,z=W.sourceEvent,T===0&&re(W),f=nr(W.sourceEvent,{transform:D,snapGrid:C,snapToGrid:O,containerBounds:p}),y=ea(W.sourceEvent,p)}).on("drag",W=>{const{autoPanOnNodeDrag:B,transform:T,snapGrid:D,snapToGrid:C,nodeDragThreshold:O,nodeLookup:H}=r(),Q=nr(W.sourceEvent,{transform:T,snapGrid:D,snapToGrid:C,containerBounds:p});if(z=W.sourceEvent,(W.sourceEvent.type==="touchmove"&&W.sourceEvent.touches.length>1||q&&!H.has(q))&&(S=!0),!S){if(!m&&B&&b&&(m=!0,X()),!b){const G=ea(W.sourceEvent,p),ee=G.x-y.x,P=G.y-y.y;Math.sqrt(ee*ee+P*P)>O&&re(W)}(f.x!==Q.xSnapped||f.y!==Q.ySnapped)&&h&&b&&(y=ea(W.sourceEvent,p),U(Q))}}).on("end",W=>{if(!(!b||S)&&(m=!1,b=!1,cancelAnimationFrame(g),h.size>0)){const{nodeLookup:B,updateNodePositions:T,onNodeDragStop:D,onSelectionDragStop:C}=r();if(N&&(T(h,!1),N=!1),d||D||!q&&C){const[O,H]=rd({nodeId:q,dragItems:h,nodeLookup:B,dragging:!1});d?.(W.sourceEvent,h,O,H),D?.(W.sourceEvent,O,H),q||C?.(W.sourceEvent,H)}}}).filter(W=>{const B=W.target;return!W.button&&(!M||!gm(B,`.${M}`,_))&&(!j||gm(B,j,_))});v.call($)}function k(){v?.on(".drag",null)}return{update:A,destroy:k}}function X2(n,r,i){const c=[],d={x:n.x-i,y:n.y-i,width:i*2,height:i*2};for(const f of r.values())fr(d,Ps(f))>0&&c.push(f);return c}const Z2=250;function Q2(n,r,i,c){let d=[],f=1/0;const g=X2(n,i,r+Z2);for(const h of g){const m=[...h.internals.handleBounds?.source??[],...h.internals.handleBounds?.target??[]];for(const y of m){if(c.nodeId===y.nodeId&&c.type===y.type&&c.id===y.id)continue;const{x:p,y:b}=Pn(h,y,y.position,!0),v=Math.sqrt(Math.pow(p-n.x,2)+Math.pow(b-n.y,2));v>r||(v<f?(d=[{...y,x:p,y:b}],f=v):v===f&&d.push({...y,x:p,y:b}))}}if(!d.length)return null;if(d.length>1){const h=c.type==="source"?"target":"source";return d.find(m=>m.type===h)??d[0]}return d[0]}function Px(n,r,i,c,d,f=!1){const g=c.get(n);if(!g)return null;const h=d==="strict"?g.internals.handleBounds?.[r]:[...g.internals.handleBounds?.source??[],...g.internals.handleBounds?.target??[]],m=(i?h?.find(y=>y.id===i):h?.[0])??null;return m&&f?{...m,...Pn(g,m,m.position,!0)}:m}function ey(n,r){return n||(r?.classList.contains("target")?"target":r?.classList.contains("source")?"source":null)}function $2(n,r){let i=null;return r?i=!0:n&&!r&&(i=!1),i}const ty=()=>!0;function K2(n,{connectionMode:r,connectionRadius:i,handleId:c,nodeId:d,edgeUpdaterType:f,isTarget:g,domNode:h,nodeLookup:m,lib:y,autoPanOnConnect:p,flowId:b,panBy:v,cancelConnection:S,onConnectStart:N,onConnect:z,onConnectEnd:A,isValidConnection:k=ty,onReconnectEnd:M,updateConnection:j,getTransform:_,getFromHandle:L,autoPanSpeed:q,dragThreshold:Y=1,handleDomNode:U}){const X=Vx(n.target);let re=0,$;const{x:W,y:B}=ea(n),T=ey(f,U),D=h?.getBoundingClientRect();let C=!1;if(!D||!T)return;const O=Px(d,T,c,m,r);if(!O)return;let H=ea(n,D),Q=!1,G=null,ee=!1,P=null;function le(){if(!p||!D)return;const[je,ye]=Lx(H,D,q);v({x:je,y:ye}),re=requestAnimationFrame(le)}const ie={...O,nodeId:d,type:T,position:O.position},fe=m.get(d);let me={inProgress:!0,isValid:null,from:Pn(fe,ie,he.Left,!0),fromHandle:ie,fromPosition:ie.position,fromNode:fe,to:H,toHandle:null,toPosition:tm[ie.position],toNode:null,pointer:H};function oe(){C=!0,j(me),N?.(n,{nodeId:d,handleId:c,handleType:T})}Y===0&&oe();function ue(je){if(!C){const{x:Ye,y:Qt}=ea(je),zt=Ye-W,$t=Qt-B;if(!(zt*zt+$t*$t>Y*Y))return;oe()}if(!L()||!ie){Se(je);return}const ye=_();H=ea(je,D),$=Q2(jr(H,ye,!1,[1,1]),i,m,ie),Q||(le(),Q=!0);const Ne=ay(je,{handle:$,connectionMode:r,fromNodeId:d,fromHandleId:c,fromType:g?"target":"source",isValidConnection:k,doc:X,lib:y,flowId:b,nodeLookup:m});P=Ne.handleDomNode,G=Ne.connection,ee=$2(!!$,Ne.isValid);const se=m.get(d),pe=se?Pn(se,ie,he.Left,!0):me.from,we={...me,from:pe,isValid:ee,to:Ne.toHandle&&ee?go({x:Ne.toHandle.x,y:Ne.toHandle.y},ye):H,toHandle:Ne.toHandle,toPosition:ee&&Ne.toHandle?Ne.toHandle.position:tm[ie.position],toNode:Ne.toHandle?m.get(Ne.toHandle.nodeId):null,pointer:H};j(we),me=we}function Se(je){if(!("touches"in je&&je.touches.length>0)){if(C){($||P)&&G&&ee&&z?.(G);const{inProgress:ye,...Ne}=me,se={...Ne,toPosition:me.toHandle?me.toPosition:null};A?.(je,se),f&&M?.(je,se)}S(),cancelAnimationFrame(re),Q=!1,ee=!1,G=null,P=null,X.removeEventListener("mousemove",ue),X.removeEventListener("mouseup",Se),X.removeEventListener("touchmove",ue),X.removeEventListener("touchend",Se)}}X.addEventListener("mousemove",ue),X.addEventListener("mouseup",Se),X.addEventListener("touchmove",ue),X.addEventListener("touchend",Se)}function ay(n,{handle:r,connectionMode:i,fromNodeId:c,fromHandleId:d,fromType:f,doc:g,lib:h,flowId:m,isValidConnection:y=ty,nodeLookup:p}){const b=f==="target",v=r?g.querySelector(`.${h}-flow__handle[data-id="${m}-${r?.nodeId}-${r?.id}-${r?.type}"]`):null,{x:S,y:N}=ea(n),z=g.elementFromPoint(S,N),A=z?.classList.contains(`${h}-flow__handle`)?z:v,k={handleDomNode:A,isValid:!1,connection:null,toHandle:null};if(A){const M=ey(void 0,A),j=A.getAttribute("data-nodeid"),_=A.getAttribute("data-handleid"),L=A.classList.contains("connectable"),q=A.classList.contains("connectableend");if(!j||!M)return k;const Y={source:b?j:c,sourceHandle:b?_:d,target:b?c:j,targetHandle:b?d:_};k.connection=Y;const X=L&&q&&(i===Ws.Strict?b&&M==="source"||!b&&M==="target":j!==c||_!==d);k.isValid=X&&y(Y),k.toHandle=Px(j,M,_,p,i,!0)}return k}const wd={onPointerDown:K2,isValid:ay};function F2({domNode:n,panZoom:r,getTransform:i,getViewScale:c}){const d=Rt(n);function f({translateExtent:h,width:m,height:y,zoomStep:p=1,pannable:b=!0,zoomable:v=!0,inversePan:S=!1}){const N=j=>{if(j.sourceEvent.type!=="wheel"||!r)return;const _=i(),L=j.sourceEvent.ctrlKey&&gr()?10:1,q=-j.sourceEvent.deltaY*(j.sourceEvent.deltaMode===1?.05:j.sourceEvent.deltaMode?1:.002)*p,Y=_[2]*Math.pow(2,q*L);r.scaleTo(Y)};let z=[0,0];const A=j=>{(j.sourceEvent.type==="mousedown"||j.sourceEvent.type==="touchstart")&&(z=[j.sourceEvent.clientX??j.sourceEvent.touches[0].clientX,j.sourceEvent.clientY??j.sourceEvent.touches[0].clientY])},k=j=>{const _=i();if(j.sourceEvent.type!=="mousemove"&&j.sourceEvent.type!=="touchmove"||!r)return;const L=[j.sourceEvent.clientX??j.sourceEvent.touches[0].clientX,j.sourceEvent.clientY??j.sourceEvent.touches[0].clientY],q=[L[0]-z[0],L[1]-z[1]];z=L;const Y=c()*Math.max(_[2],Math.log(_[2]))*(S?-1:1),U={x:_[0]-q[0]*Y,y:_[1]-q[1]*Y},X=[[0,0],[m,y]];r.setViewportConstrained({x:U.x,y:U.y,zoom:_[2]},X,h)},M=Ax().on("start",A).on("zoom",b?k:null).on("zoom.wheel",v?N:null);d.call(M,{})}function g(){d.on("zoom",null)}return{update:f,destroy:g,pointer:It}}const Co=n=>({x:n.x,y:n.y,zoom:n.k}),id=({x:n,y:r,zoom:i})=>wo.translate(n,r).scale(i),Xs=(n,r)=>n.target.closest(`.${r}`),ny=(n,r)=>r===2&&Array.isArray(n)&&n.includes(2),J2=n=>((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2,od=(n,r=0,i=J2,c=()=>{})=>{const d=typeof r=="number"&&r>0;return d||c(),d?n.transition().duration(r).ease(i).on("end",c):n},sy=n=>{const r=n.ctrlKey&&gr()?10:1;return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*r};function W2({zoomPanValues:n,noWheelClassName:r,d3Selection:i,d3Zoom:c,panOnScrollMode:d,panOnScrollSpeed:f,zoomOnPinch:g,onPanZoomStart:h,onPanZoom:m,onPanZoomEnd:y}){return p=>{if(Xs(p,r))return p.ctrlKey&&p.preventDefault(),!1;p.preventDefault(),p.stopImmediatePropagation();const b=i.property("__zoom").k||1;if(p.ctrlKey&&g){const A=It(p),k=sy(p),M=b*Math.pow(2,k);c.scaleTo(i,M,A,p);return}const v=p.deltaMode===1?20:1;let S=d===Jn.Vertical?0:p.deltaX*v,N=d===Jn.Horizontal?0:p.deltaY*v;!gr()&&p.shiftKey&&d!==Jn.Vertical&&(S=p.deltaY*v,N=0),c.translateBy(i,-(S/b)*f,-(N/b)*f,{internal:!0});const z=Co(i.property("__zoom"));clearTimeout(n.panScrollTimeout),n.isPanScrolling?(m?.(p,z),n.panScrollTimeout=setTimeout(()=>{y?.(p,z),n.isPanScrolling=!1},150)):(n.isPanScrolling=!0,h?.(p,z))}}function I2({noWheelClassName:n,preventScrolling:r,d3ZoomHandler:i}){return function(c,d){const f=c.type==="wheel",g=!r&&f&&!c.ctrlKey,h=Xs(c,n);if(c.ctrlKey&&f&&h&&c.preventDefault(),g||h)return null;c.preventDefault(),i.call(this,c,d)}}function P2({zoomPanValues:n,onDraggingChange:r,onPanZoomStart:i}){return c=>{if(c.sourceEvent?.internal)return;const d=Co(c.transform);n.mouseButton=c.sourceEvent?.button||0,n.isZoomingOrPanning=!0,n.prevViewport=d,c.sourceEvent?.type==="mousedown"&&r(!0),i&&i?.(c.sourceEvent,d)}}function ew({zoomPanValues:n,panOnDrag:r,onPaneContextMenu:i,onTransformChange:c,onPanZoom:d}){return f=>{n.usedRightMouseButton=!!(i&&ny(r,n.mouseButton??0)),f.sourceEvent?.sync||c([f.transform.x,f.transform.y,f.transform.k]),d&&!f.sourceEvent?.internal&&d?.(f.sourceEvent,Co(f.transform))}}function tw({zoomPanValues:n,panOnDrag:r,panOnScroll:i,onDraggingChange:c,onPanZoomEnd:d,onPaneContextMenu:f}){return g=>{if(!g.sourceEvent?.internal&&(n.isZoomingOrPanning=!1,f&&ny(r,n.mouseButton??0)&&!n.usedRightMouseButton&&g.sourceEvent&&f(g.sourceEvent),n.usedRightMouseButton=!1,c(!1),d)){const h=Co(g.transform);n.prevViewport=h,clearTimeout(n.timerId),n.timerId=setTimeout(()=>{d?.(g.sourceEvent,h)},i?150:0)}}}function aw({zoomActivationKeyPressed:n,zoomOnScroll:r,zoomOnPinch:i,panOnDrag:c,panOnScroll:d,zoomOnDoubleClick:f,userSelectionActive:g,noWheelClassName:h,noPanClassName:m,lib:y,connectionInProgress:p}){return b=>{const v=n||r,S=i&&b.ctrlKey,N=b.type==="wheel";if(b.button===1&&b.type==="mousedown"&&(Xs(b,`${y}-flow__node`)||Xs(b,`${y}-flow__edge`)))return!0;if(!c&&!v&&!d&&!f&&!i||g||p&&!N||Xs(b,h)&&N||Xs(b,m)&&(!N||d&&N&&!n)||!i&&b.ctrlKey&&N)return!1;if(!i&&b.type==="touchstart"&&b.touches?.length>1)return b.preventDefault(),!1;if(!v&&!d&&!S&&N||!c&&(b.type==="mousedown"||b.type==="touchstart")||Array.isArray(c)&&!c.includes(b.button)&&b.type==="mousedown")return!1;const z=Array.isArray(c)&&c.includes(b.button)||!b.button||b.button<=1;return(!b.ctrlKey||N)&&z}}function nw({domNode:n,minZoom:r,maxZoom:i,translateExtent:c,viewport:d,onPanZoom:f,onPanZoomStart:g,onPanZoomEnd:h,onDraggingChange:m}){const y={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=n.getBoundingClientRect(),b=Ax().scaleExtent([r,i]).translateExtent(c),v=Rt(n).call(b);M({x:d.x,y:d.y,zoom:Is(d.zoom,r,i)},[[0,0],[p.width,p.height]],c);const S=v.on("wheel.zoom"),N=v.on("dblclick.zoom");b.wheelDelta(sy);function z($,W){return v?new Promise(B=>{b?.interpolate(W?.interpolate==="linear"?Iu:Pi).transform(od(v,W?.duration,W?.ease,()=>B(!0)),$)}):Promise.resolve(!1)}function A({noWheelClassName:$,noPanClassName:W,onPaneContextMenu:B,userSelectionActive:T,panOnScroll:D,panOnDrag:C,panOnScrollMode:O,panOnScrollSpeed:H,preventScrolling:Q,zoomOnPinch:G,zoomOnScroll:ee,zoomOnDoubleClick:P,zoomActivationKeyPressed:le,lib:ie,onTransformChange:fe,connectionInProgress:be,paneClickDistance:me,selectionOnDrag:oe}){T&&!y.isZoomingOrPanning&&k();const ue=D&&!le&&!T;b.clickDistance(oe?1/0:!Pt(me)||me<0?0:me);const Se=ue?W2({zoomPanValues:y,noWheelClassName:$,d3Selection:v,d3Zoom:b,panOnScrollMode:O,panOnScrollSpeed:H,zoomOnPinch:G,onPanZoomStart:g,onPanZoom:f,onPanZoomEnd:h}):I2({noWheelClassName:$,preventScrolling:Q,d3ZoomHandler:S});if(v.on("wheel.zoom",Se,{passive:!1}),!T){const ye=P2({zoomPanValues:y,onDraggingChange:m,onPanZoomStart:g});b.on("start",ye);const Ne=ew({zoomPanValues:y,panOnDrag:C,onPaneContextMenu:!!B,onPanZoom:f,onTransformChange:fe});b.on("zoom",Ne);const se=tw({zoomPanValues:y,panOnDrag:C,panOnScroll:D,onPaneContextMenu:B,onPanZoomEnd:h,onDraggingChange:m});b.on("end",se)}const je=aw({zoomActivationKeyPressed:le,panOnDrag:C,zoomOnScroll:ee,panOnScroll:D,zoomOnDoubleClick:P,zoomOnPinch:G,userSelectionActive:T,noPanClassName:W,noWheelClassName:$,lib:ie,connectionInProgress:be});b.filter(je),P?v.on("dblclick.zoom",N):v.on("dblclick.zoom",null)}function k(){b.on("zoom",null)}async function M($,W,B){const T=id($),D=b?.constrain()(T,W,B);return D&&await z(D),new Promise(C=>C(D))}async function j($,W){const B=id($);return await z(B,W),new Promise(T=>T(B))}function _($){if(v){const W=id($),B=v.property("__zoom");(B.k!==$.zoom||B.x!==$.x||B.y!==$.y)&&b?.transform(v,W,null,{sync:!0})}}function L(){const $=v?Ex(v.node()):{x:0,y:0,k:1};return{x:$.x,y:$.y,zoom:$.k}}function q($,W){return v?new Promise(B=>{b?.interpolate(W?.interpolate==="linear"?Iu:Pi).scaleTo(od(v,W?.duration,W?.ease,()=>B(!0)),$)}):Promise.resolve(!1)}function Y($,W){return v?new Promise(B=>{b?.interpolate(W?.interpolate==="linear"?Iu:Pi).scaleBy(od(v,W?.duration,W?.ease,()=>B(!0)),$)}):Promise.resolve(!1)}function U($){b?.scaleExtent($)}function X($){b?.translateExtent($)}function re($){const W=!Pt($)||$<0?0:$;b?.clickDistance(W)}return{update:A,destroy:k,setViewport:j,setViewportConstrained:M,getViewport:L,scaleTo:q,scaleBy:Y,setScaleExtent:U,setTranslateExtent:X,syncViewport:_,setClickDistance:re}}var tl;(function(n){n.Line="line",n.Handle="handle"})(tl||(tl={}));function sw({width:n,prevWidth:r,height:i,prevHeight:c,affectsX:d,affectsY:f}){const g=n-r,h=i-c,m=[g>0?1:g<0?-1:0,h>0?1:h<0?-1:0];return g&&d&&(m[0]=m[0]*-1),h&&f&&(m[1]=m[1]*-1),m}function hm(n){const r=n.includes("right")||n.includes("left"),i=n.includes("bottom")||n.includes("top"),c=n.includes("left"),d=n.includes("top");return{isHorizontal:r,isVertical:i,affectsX:c,affectsY:d}}function pn(n,r){return Math.max(0,r-n)}function bn(n,r){return Math.max(0,n-r)}function Ji(n,r,i){return Math.max(0,r-n,n-i)}function mm(n,r){return n?!r:r}function lw(n,r,i,c,d,f,g,h){let{affectsX:m,affectsY:y}=r;const{isHorizontal:p,isVertical:b}=r,v=p&&b,{xSnapped:S,ySnapped:N}=i,{minWidth:z,maxWidth:A,minHeight:k,maxHeight:M}=c,{x:j,y:_,width:L,height:q,aspectRatio:Y}=n;let U=Math.floor(p?S-n.pointerX:0),X=Math.floor(b?N-n.pointerY:0);const re=L+(m?-U:U),$=q+(y?-X:X),W=-f[0]*L,B=-f[1]*q;let T=Ji(re,z,A),D=Ji($,k,M);if(g){let H=0,Q=0;m&&U<0?H=pn(j+U+W,g[0][0]):!m&&U>0&&(H=bn(j+re+W,g[1][0])),y&&X<0?Q=pn(_+X+B,g[0][1]):!y&&X>0&&(Q=bn(_+$+B,g[1][1])),T=Math.max(T,H),D=Math.max(D,Q)}if(h){let H=0,Q=0;m&&U>0?H=bn(j+U,h[0][0]):!m&&U<0&&(H=pn(j+re,h[1][0])),y&&X>0?Q=bn(_+X,h[0][1]):!y&&X<0&&(Q=pn(_+$,h[1][1])),T=Math.max(T,H),D=Math.max(D,Q)}if(d){if(p){const H=Ji(re/Y,k,M)*Y;if(T=Math.max(T,H),g){let Q=0;!m&&!y||m&&!y&&v?Q=bn(_+B+re/Y,g[1][1])*Y:Q=pn(_+B+(m?U:-U)/Y,g[0][1])*Y,T=Math.max(T,Q)}if(h){let Q=0;!m&&!y||m&&!y&&v?Q=pn(_+re/Y,h[1][1])*Y:Q=bn(_+(m?U:-U)/Y,h[0][1])*Y,T=Math.max(T,Q)}}if(b){const H=Ji($*Y,z,A)/Y;if(D=Math.max(D,H),g){let Q=0;!m&&!y||y&&!m&&v?Q=bn(j+$*Y+W,g[1][0])/Y:Q=pn(j+(y?X:-X)*Y+W,g[0][0])/Y,D=Math.max(D,Q)}if(h){let Q=0;!m&&!y||y&&!m&&v?Q=pn(j+$*Y,h[1][0])/Y:Q=bn(j+(y?X:-X)*Y,h[0][0])/Y,D=Math.max(D,Q)}}}X=X+(X<0?D:-D),U=U+(U<0?T:-T),d&&(v?re>$*Y?X=(mm(m,y)?-U:U)/Y:U=(mm(m,y)?-X:X)*Y:p?(X=U/Y,y=m):(U=X*Y,m=y));const C=m?j+U:j,O=y?_+X:_;return{width:L+(m?-U:U),height:q+(y?-X:X),x:f[0]*U*(m?-1:1)+C,y:f[1]*X*(y?-1:1)+O}}const ly={width:0,height:0,x:0,y:0},rw={...ly,pointerX:0,pointerY:0,aspectRatio:1};function iw(n){return[[0,0],[n.measured.width,n.measured.height]]}function ow(n,r,i){const c=r.position.x+n.position.x,d=r.position.y+n.position.y,f=n.measured.width??0,g=n.measured.height??0,h=i[0]*f,m=i[1]*g;return[[c-h,d-m],[c+f-h,d+g-m]]}function cw({domNode:n,nodeId:r,getStoreItems:i,onChange:c,onEnd:d}){const f=Rt(n);let g={controlDirection:hm("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function h({controlPosition:y,boundaries:p,keepAspectRatio:b,resizeDirection:v,onResizeStart:S,onResize:N,onResizeEnd:z,shouldResize:A}){let k={...ly},M={...rw};g={boundaries:p,resizeDirection:v,keepAspectRatio:b,controlDirection:hm(y)};let j,_=null,L=[],q,Y,U,X=!1;const re=vx().on("start",$=>{const{nodeLookup:W,transform:B,snapGrid:T,snapToGrid:D,nodeOrigin:C,paneDomNode:O}=i();if(j=W.get(r),!j)return;_=O?.getBoundingClientRect()??null;const{xSnapped:H,ySnapped:Q}=nr($.sourceEvent,{transform:B,snapGrid:T,snapToGrid:D,containerBounds:_});k={width:j.measured.width??0,height:j.measured.height??0,x:j.position.x??0,y:j.position.y??0},M={...k,pointerX:H,pointerY:Q,aspectRatio:k.width/k.height},q=void 0,j.parentId&&(j.extent==="parent"||j.expandParent)&&(q=W.get(j.parentId),Y=q&&j.extent==="parent"?iw(q):void 0),L=[],U=void 0;for(const[G,ee]of W)if(ee.parentId===r&&(L.push({id:G,position:{...ee.position},extent:ee.extent}),ee.extent==="parent"||ee.expandParent)){const P=ow(ee,j,ee.origin??C);U?U=[[Math.min(P[0][0],U[0][0]),Math.min(P[0][1],U[0][1])],[Math.max(P[1][0],U[1][0]),Math.max(P[1][1],U[1][1])]]:U=P}S?.($,{...k})}).on("drag",$=>{const{transform:W,snapGrid:B,snapToGrid:T,nodeOrigin:D}=i(),C=nr($.sourceEvent,{transform:W,snapGrid:B,snapToGrid:T,containerBounds:_}),O=[];if(!j)return;const{x:H,y:Q,width:G,height:ee}=k,P={},le=j.origin??D,{width:ie,height:fe,x:be,y:me}=lw(M,g.controlDirection,C,g.boundaries,g.keepAspectRatio,le,Y,U),oe=ie!==G,ue=fe!==ee,Se=be!==H&&oe,je=me!==Q&&ue;if(!Se&&!je&&!oe&&!ue)return;if((Se||je||le[0]===1||le[1]===1)&&(P.x=Se?be:k.x,P.y=je?me:k.y,k.x=P.x,k.y=P.y,L.length>0)){const pe=be-H,we=me-Q;for(const Ye of L)Ye.position={x:Ye.position.x-pe+le[0]*(ie-G),y:Ye.position.y-we+le[1]*(fe-ee)},O.push(Ye)}if((oe||ue)&&(P.width=oe&&(!g.resizeDirection||g.resizeDirection==="horizontal")?ie:k.width,P.height=ue&&(!g.resizeDirection||g.resizeDirection==="vertical")?fe:k.height,k.width=P.width,k.height=P.height),q&&j.expandParent){const pe=le[0]*(P.width??0);P.x&&P.x<pe&&(k.x=pe,M.x=M.x-(P.x-pe));const we=le[1]*(P.height??0);P.y&&P.y<we&&(k.y=we,M.y=M.y-(P.y-we))}const ye=sw({width:k.width,prevWidth:G,height:k.height,prevHeight:ee,affectsX:g.controlDirection.affectsX,affectsY:g.controlDirection.affectsY}),Ne={...k,direction:ye};A?.($,Ne)!==!1&&(X=!0,N?.($,Ne),c(P,O))}).on("end",$=>{X&&(z?.($,{...k}),d?.({...k}),X=!1)});f.call(re)}function m(){f.on(".drag",null)}return{update:h,destroy:m}}const uw={},xm=n=>{let r;const i=new Set,c=(p,b)=>{const v=typeof p=="function"?p(r):p;if(!Object.is(v,r)){const S=r;r=b??(typeof v!="object"||v===null)?v:Object.assign({},r,v),i.forEach(N=>N(r,S))}},d=()=>r,m={setState:c,getState:d,getInitialState:()=>y,subscribe:p=>(i.add(p),()=>i.delete(p)),destroy:()=>{(uw?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),i.clear()}},y=r=n(c,d,m);return m},dw=n=>n?xm(n):xm,{useDebugValue:fw}=Ks,{useSyncExternalStoreWithSelector:gw}=tv,hw=n=>n;function ry(n,r=hw,i){const c=gw(n.subscribe,n.getState,n.getServerState||n.getInitialState,r,i);return fw(c),c}const ym=(n,r)=>{const i=dw(n),c=(d,f=r)=>ry(i,d,f);return Object.assign(c,i),c},mw=(n,r)=>n?ym(n,r):ym;function Qe(n,r){if(Object.is(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;if(n instanceof Map&&r instanceof Map){if(n.size!==r.size)return!1;for(const[c,d]of n)if(!Object.is(d,r.get(c)))return!1;return!0}if(n instanceof Set&&r instanceof Set){if(n.size!==r.size)return!1;for(const c of n)if(!r.has(c))return!1;return!0}const i=Object.keys(n);if(i.length!==Object.keys(r).length)return!1;for(const c of i)if(!Object.prototype.hasOwnProperty.call(r,c)||!Object.is(n[c],r[c]))return!1;return!0}const zo=E.createContext(null),xw=zo.Provider,iy=ga.error001();function Me(n,r){const i=E.useContext(zo);if(i===null)throw new Error(iy);return ry(i,n,r)}function $e(){const n=E.useContext(zo);if(n===null)throw new Error(iy);return E.useMemo(()=>({getState:n.getState,setState:n.setState,subscribe:n.subscribe}),[n])}const pm={display:"none"},yw={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},oy="react-flow__node-desc",cy="react-flow__edge-desc",pw="react-flow__aria-live",bw=n=>n.ariaLiveMessage,vw=n=>n.ariaLabelConfig;function Nw({rfId:n}){const r=Me(bw);return s.jsx("div",{id:`${pw}-${n}`,"aria-live":"assertive","aria-atomic":"true",style:yw,children:r})}function jw({rfId:n,disableKeyboardA11y:r}){const i=Me(vw);return s.jsxs(s.Fragment,{children:[s.jsx("div",{id:`${oy}-${n}`,style:pm,children:r?i["node.a11yDescription.default"]:i["node.a11yDescription.keyboardDisabled"]}),s.jsx("div",{id:`${cy}-${n}`,style:pm,children:i["edge.a11yDescription.default"]}),!r&&s.jsx(Nw,{rfId:n})]})}const Eo=E.forwardRef(({position:n="top-left",children:r,className:i,style:c,...d},f)=>{const g=`${n}`.split("-");return s.jsx("div",{className:nt(["react-flow__panel",i,...g]),style:c,ref:f,...d,children:r})});Eo.displayName="Panel";function ww({proOptions:n,position:r="bottom-right"}){return n?.hideAttribution?null:s.jsx(Eo,{position:r,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:s.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Sw=n=>{const r=[],i=[];for(const[,c]of n.nodeLookup)c.selected&&r.push(c.internals.userNode);for(const[,c]of n.edgeLookup)c.selected&&i.push(c);return{selectedNodes:r,selectedEdges:i}},Wi=n=>n.id;function kw(n,r){return Qe(n.selectedNodes.map(Wi),r.selectedNodes.map(Wi))&&Qe(n.selectedEdges.map(Wi),r.selectedEdges.map(Wi))}function Cw({onSelectionChange:n}){const r=$e(),{selectedNodes:i,selectedEdges:c}=Me(Sw,kw);return E.useEffect(()=>{const d={nodes:i,edges:c};n?.(d),r.getState().onSelectionChangeHandlers.forEach(f=>f(d))},[i,c,n]),null}const zw=n=>!!n.onSelectionChangeHandlers;function Ew({onSelectionChange:n}){const r=Me(zw);return n||r?s.jsx(Cw,{onSelectionChange:n}):null}const uy=[0,0],Aw={x:0,y:0,zoom:1},Tw=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],bm=[...Tw,"rfId"],_w=n=>({setNodes:n.setNodes,setEdges:n.setEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges}),vm={translateExtent:ur,nodeOrigin:uy,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function Mw(n){const{setNodes:r,setEdges:i,setMinZoom:c,setMaxZoom:d,setTranslateExtent:f,setNodeExtent:g,reset:h,setDefaultNodesAndEdges:m}=Me(_w,Qe),y=$e();E.useEffect(()=>(m(n.defaultNodes,n.defaultEdges),()=>{p.current=vm,h()}),[]);const p=E.useRef(vm);return E.useEffect(()=>{for(const b of bm){const v=n[b],S=p.current[b];v!==S&&(typeof n[b]>"u"||(b==="nodes"?r(v):b==="edges"?i(v):b==="minZoom"?c(v):b==="maxZoom"?d(v):b==="translateExtent"?f(v):b==="nodeExtent"?g(v):b==="ariaLabelConfig"?y.setState({ariaLabelConfig:j2(v)}):b==="fitView"?y.setState({fitViewQueued:v}):b==="fitViewOptions"?y.setState({fitViewOptions:v}):y.setState({[b]:v})))}p.current=n},bm.map(b=>n[b])),null}function Nm(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Dw(n){const[r,i]=E.useState(n==="system"?null:n);return E.useEffect(()=>{if(n!=="system"){i(n);return}const c=Nm(),d=()=>i(c?.matches?"dark":"light");return d(),c?.addEventListener("change",d),()=>{c?.removeEventListener("change",d)}},[n]),r!==null?r:Nm()?.matches?"dark":"light"}const jm=typeof document<"u"?document:null;function hr(n=null,r={target:jm,actInsideInputWithModifier:!0}){const[i,c]=E.useState(!1),d=E.useRef(!1),f=E.useRef(new Set([])),[g,h]=E.useMemo(()=>{if(n!==null){const y=(Array.isArray(n)?n:[n]).filter(b=>typeof b=="string").map(b=>b.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=y.reduce((b,v)=>b.concat(...v),[]);return[y,p]}return[[],[]]},[n]);return E.useEffect(()=>{const m=r?.target??jm,y=r?.actInsideInputWithModifier??!0;if(n!==null){const p=S=>{if(d.current=S.ctrlKey||S.metaKey||S.shiftKey||S.altKey,(!d.current||d.current&&!y)&&Yx(S))return!1;const z=Sm(S.code,h);if(f.current.add(S[z]),wm(g,f.current,!1)){const A=S.composedPath?.()?.[0]||S.target,k=A?.nodeName==="BUTTON"||A?.nodeName==="A";r.preventDefault!==!1&&(d.current||!k)&&S.preventDefault(),c(!0)}},b=S=>{const N=Sm(S.code,h);wm(g,f.current,!0)?(c(!1),f.current.clear()):f.current.delete(S[N]),S.key==="Meta"&&f.current.clear(),d.current=!1},v=()=>{f.current.clear(),c(!1)};return m?.addEventListener("keydown",p),m?.addEventListener("keyup",b),window.addEventListener("blur",v),window.addEventListener("contextmenu",v),()=>{m?.removeEventListener("keydown",p),m?.removeEventListener("keyup",b),window.removeEventListener("blur",v),window.removeEventListener("contextmenu",v)}}},[n,c]),i}function wm(n,r,i){return n.filter(c=>i||c.length===r.size).some(c=>c.every(d=>r.has(d)))}function Sm(n,r){return r.includes(n)?"code":"key"}const Ow=()=>{const n=$e();return E.useMemo(()=>({zoomIn:r=>{const{panZoom:i}=n.getState();return i?i.scaleBy(1.2,{duration:r?.duration}):Promise.resolve(!1)},zoomOut:r=>{const{panZoom:i}=n.getState();return i?i.scaleBy(1/1.2,{duration:r?.duration}):Promise.resolve(!1)},zoomTo:(r,i)=>{const{panZoom:c}=n.getState();return c?c.scaleTo(r,{duration:i?.duration}):Promise.resolve(!1)},getZoom:()=>n.getState().transform[2],setViewport:async(r,i)=>{const{transform:[c,d,f],panZoom:g}=n.getState();return g?(await g.setViewport({x:r.x??c,y:r.y??d,zoom:r.zoom??f},i),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[r,i,c]=n.getState().transform;return{x:r,y:i,zoom:c}},setCenter:async(r,i,c)=>n.getState().setCenter(r,i,c),fitBounds:async(r,i)=>{const{width:c,height:d,minZoom:f,maxZoom:g,panZoom:h}=n.getState(),m=Bd(r,c,d,f,g,i?.padding??.1);return h?(await h.setViewport(m,{duration:i?.duration,ease:i?.ease,interpolate:i?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(r,i={})=>{const{transform:c,snapGrid:d,snapToGrid:f,domNode:g}=n.getState();if(!g)return r;const{x:h,y:m}=g.getBoundingClientRect(),y={x:r.x-h,y:r.y-m},p=i.snapGrid??d,b=i.snapToGrid??f;return jr(y,c,b,p)},flowToScreenPosition:r=>{const{transform:i,domNode:c}=n.getState();if(!c)return r;const{x:d,y:f}=c.getBoundingClientRect(),g=go(r,i);return{x:g.x+d,y:g.y+f}}}),[])};function dy(n,r){const i=[],c=new Map,d=[];for(const f of n)if(f.type==="add"){d.push(f);continue}else if(f.type==="remove"||f.type==="replace")c.set(f.id,[f]);else{const g=c.get(f.id);g?g.push(f):c.set(f.id,[f])}for(const f of r){const g=c.get(f.id);if(!g){i.push(f);continue}if(g[0].type==="remove")continue;if(g[0].type==="replace"){i.push({...g[0].item});continue}const h={...f};for(const m of g)Rw(m,h);i.push(h)}return d.length&&d.forEach(f=>{f.index!==void 0?i.splice(f.index,0,{...f.item}):i.push({...f.item})}),i}function Rw(n,r){switch(n.type){case"select":{r.selected=n.selected;break}case"position":{typeof n.position<"u"&&(r.position=n.position),typeof n.dragging<"u"&&(r.dragging=n.dragging);break}case"dimensions":{typeof n.dimensions<"u"&&(r.measured={...n.dimensions},n.setAttributes&&((n.setAttributes===!0||n.setAttributes==="width")&&(r.width=n.dimensions.width),(n.setAttributes===!0||n.setAttributes==="height")&&(r.height=n.dimensions.height))),typeof n.resizing=="boolean"&&(r.resizing=n.resizing);break}}}function fy(n,r){return dy(n,r)}function gy(n,r){return dy(n,r)}function Fn(n,r){return{id:n,type:"select",selected:r}}function Zs(n,r=new Set,i=!1){const c=[];for(const[d,f]of n){const g=r.has(d);!(f.selected===void 0&&!g)&&f.selected!==g&&(i&&(f.selected=g),c.push(Fn(f.id,g)))}return c}function km({items:n=[],lookup:r}){const i=[],c=new Map(n.map(d=>[d.id,d]));for(const[d,f]of n.entries()){const g=r.get(f.id),h=g?.internals?.userNode??g;h!==void 0&&h!==f&&i.push({id:f.id,item:f,type:"replace"}),h===void 0&&i.push({item:f,type:"add",index:d})}for(const[d]of r)c.get(d)===void 0&&i.push({id:d,type:"remove"});return i}function Cm(n){return{id:n.id,type:"remove"}}const zm=n=>f2(n),Hw=n=>Ox(n);function hy(n){return E.forwardRef(n)}const Lw=typeof window<"u"?E.useLayoutEffect:E.useEffect;function Em(n){const[r,i]=E.useState(BigInt(0)),[c]=E.useState(()=>Bw(()=>i(d=>d+BigInt(1))));return Lw(()=>{const d=c.get();d.length&&(n(d),c.reset())},[r]),c}function Bw(n){let r=[];return{get:()=>r,reset:()=>{r=[]},push:i=>{r.push(i),n()}}}const my=E.createContext(null);function Uw({children:n}){const r=$e(),i=E.useCallback(h=>{const{nodes:m=[],setNodes:y,hasDefaultNodes:p,onNodesChange:b,nodeLookup:v,fitViewQueued:S,onNodesChangeMiddlewareMap:N}=r.getState();let z=m;for(const k of h)z=typeof k=="function"?k(z):k;let A=km({items:z,lookup:v});for(const k of N.values())A=k(A);p&&y(z),A.length>0?b?.(A):S&&window.requestAnimationFrame(()=>{const{fitViewQueued:k,nodes:M,setNodes:j}=r.getState();k&&j(M)})},[]),c=Em(i),d=E.useCallback(h=>{const{edges:m=[],setEdges:y,hasDefaultEdges:p,onEdgesChange:b,edgeLookup:v}=r.getState();let S=m;for(const N of h)S=typeof N=="function"?N(S):N;p?y(S):b&&b(km({items:S,lookup:v}))},[]),f=Em(d),g=E.useMemo(()=>({nodeQueue:c,edgeQueue:f}),[]);return s.jsx(my.Provider,{value:g,children:n})}function qw(){const n=E.useContext(my);if(!n)throw new Error("useBatchContext must be used within a BatchProvider");return n}const Vw=n=>!!n.panZoom;function Ao(){const n=Ow(),r=$e(),i=qw(),c=Me(Vw),d=E.useMemo(()=>{const f=b=>r.getState().nodeLookup.get(b),g=b=>{i.nodeQueue.push(b)},h=b=>{i.edgeQueue.push(b)},m=b=>{const{nodeLookup:v,nodeOrigin:S}=r.getState(),N=zm(b)?b:v.get(b.id),z=N.parentId?qx(N.position,N.measured,N.parentId,v,S):N.position,A={...N,position:z,width:N.measured?.width??N.width,height:N.measured?.height??N.height};return Ps(A)},y=(b,v,S={replace:!1})=>{g(N=>N.map(z=>{if(z.id===b){const A=typeof v=="function"?v(z):v;return S.replace&&zm(A)?A:{...z,...A}}return z}))},p=(b,v,S={replace:!1})=>{h(N=>N.map(z=>{if(z.id===b){const A=typeof v=="function"?v(z):v;return S.replace&&Hw(A)?A:{...z,...A}}return z}))};return{getNodes:()=>r.getState().nodes.map(b=>({...b})),getNode:b=>f(b)?.internals.userNode,getInternalNode:f,getEdges:()=>{const{edges:b=[]}=r.getState();return b.map(v=>({...v}))},getEdge:b=>r.getState().edgeLookup.get(b),setNodes:g,setEdges:h,addNodes:b=>{const v=Array.isArray(b)?b:[b];i.nodeQueue.push(S=>[...S,...v])},addEdges:b=>{const v=Array.isArray(b)?b:[b];i.edgeQueue.push(S=>[...S,...v])},toObject:()=>{const{nodes:b=[],edges:v=[],transform:S}=r.getState(),[N,z,A]=S;return{nodes:b.map(k=>({...k})),edges:v.map(k=>({...k})),viewport:{x:N,y:z,zoom:A}}},deleteElements:async({nodes:b=[],edges:v=[]})=>{const{nodes:S,edges:N,onNodesDelete:z,onEdgesDelete:A,triggerNodeChanges:k,triggerEdgeChanges:M,onDelete:j,onBeforeDelete:_}=r.getState(),{nodes:L,edges:q}=await y2({nodesToRemove:b,edgesToRemove:v,nodes:S,edges:N,onBeforeDelete:_}),Y=q.length>0,U=L.length>0;if(Y){const X=q.map(Cm);A?.(q),M(X)}if(U){const X=L.map(Cm);z?.(L),k(X)}return(U||Y)&&j?.({nodes:L,edges:q}),{deletedNodes:L,deletedEdges:q}},getIntersectingNodes:(b,v=!0,S)=>{const N=nm(b),z=N?b:m(b),A=S!==void 0;return z?(S||r.getState().nodes).filter(k=>{const M=r.getState().nodeLookup.get(k.id);if(M&&!N&&(k.id===b.id||!M.internals.positionAbsolute))return!1;const j=Ps(A?k:M),_=fr(j,z);return v&&_>0||_>=j.width*j.height||_>=z.width*z.height}):[]},isNodeIntersecting:(b,v,S=!0)=>{const z=nm(b)?b:m(b);if(!z)return!1;const A=fr(z,v);return S&&A>0||A>=v.width*v.height||A>=z.width*z.height},updateNode:y,updateNodeData:(b,v,S={replace:!1})=>{y(b,N=>{const z=typeof v=="function"?v(N):v;return S.replace?{...N,data:z}:{...N,data:{...N.data,...z}}},S)},updateEdge:p,updateEdgeData:(b,v,S={replace:!1})=>{p(b,N=>{const z=typeof v=="function"?v(N):v;return S.replace?{...N,data:z}:{...N,data:{...N.data,...z}}},S)},getNodesBounds:b=>{const{nodeLookup:v,nodeOrigin:S}=r.getState();return g2(b,{nodeLookup:v,nodeOrigin:S})},getHandleConnections:({type:b,id:v,nodeId:S})=>Array.from(r.getState().connectionLookup.get(`${S}-${b}${v?`-${v}`:""}`)?.values()??[]),getNodeConnections:({type:b,handleId:v,nodeId:S})=>Array.from(r.getState().connectionLookup.get(`${S}${b?v?`-${b}-${v}`:`-${b}`:""}`)?.values()??[]),fitView:async b=>{const v=r.getState().fitViewResolver??N2();return r.setState({fitViewQueued:!0,fitViewOptions:b,fitViewResolver:v}),i.nodeQueue.push(S=>[...S]),v.promise}}},[]);return E.useMemo(()=>({...d,...n,viewportInitialized:c}),[c])}const Am=n=>n.selected,Yw=typeof window<"u"?window:void 0;function Gw({deleteKeyCode:n,multiSelectionKeyCode:r}){const i=$e(),{deleteElements:c}=Ao(),d=hr(n,{actInsideInputWithModifier:!1}),f=hr(r,{target:Yw});E.useEffect(()=>{if(d){const{edges:g,nodes:h}=i.getState();c({nodes:h.filter(Am),edges:g.filter(Am)}),i.setState({nodesSelectionActive:!1})}},[d]),E.useEffect(()=>{i.setState({multiSelectionActive:f})},[f])}function Xw(n){const r=$e();E.useEffect(()=>{const i=()=>{if(!n.current||!(n.current.checkVisibility?.()??!0))return!1;const c=Ud(n.current);(c.height===0||c.width===0)&&r.getState().onError?.("004",ga.error004()),r.setState({width:c.width||500,height:c.height||500})};if(n.current){i(),window.addEventListener("resize",i);const c=new ResizeObserver(()=>i());return c.observe(n.current),()=>{window.removeEventListener("resize",i),c&&n.current&&c.unobserve(n.current)}}},[])}const To={position:"absolute",width:"100%",height:"100%",top:0,left:0},Zw=n=>({userSelectionActive:n.userSelectionActive,lib:n.lib,connectionInProgress:n.connection.inProgress});function Qw({onPaneContextMenu:n,zoomOnScroll:r=!0,zoomOnPinch:i=!0,panOnScroll:c=!1,panOnScrollSpeed:d=.5,panOnScrollMode:f=Jn.Free,zoomOnDoubleClick:g=!0,panOnDrag:h=!0,defaultViewport:m,translateExtent:y,minZoom:p,maxZoom:b,zoomActivationKeyCode:v,preventScrolling:S=!0,children:N,noWheelClassName:z,noPanClassName:A,onViewportChange:k,isControlledViewport:M,paneClickDistance:j,selectionOnDrag:_}){const L=$e(),q=E.useRef(null),{userSelectionActive:Y,lib:U,connectionInProgress:X}=Me(Zw,Qe),re=hr(v),$=E.useRef();Xw(q);const W=E.useCallback(B=>{k?.({x:B[0],y:B[1],zoom:B[2]}),M||L.setState({transform:B})},[k,M]);return E.useEffect(()=>{if(q.current){$.current=nw({domNode:q.current,minZoom:p,maxZoom:b,translateExtent:y,viewport:m,onDraggingChange:C=>L.setState({paneDragging:C}),onPanZoomStart:(C,O)=>{const{onViewportChangeStart:H,onMoveStart:Q}=L.getState();Q?.(C,O),H?.(O)},onPanZoom:(C,O)=>{const{onViewportChange:H,onMove:Q}=L.getState();Q?.(C,O),H?.(O)},onPanZoomEnd:(C,O)=>{const{onViewportChangeEnd:H,onMoveEnd:Q}=L.getState();Q?.(C,O),H?.(O)}});const{x:B,y:T,zoom:D}=$.current.getViewport();return L.setState({panZoom:$.current,transform:[B,T,D],domNode:q.current.closest(".react-flow")}),()=>{$.current?.destroy()}}},[]),E.useEffect(()=>{$.current?.update({onPaneContextMenu:n,zoomOnScroll:r,zoomOnPinch:i,panOnScroll:c,panOnScrollSpeed:d,panOnScrollMode:f,zoomOnDoubleClick:g,panOnDrag:h,zoomActivationKeyPressed:re,preventScrolling:S,noPanClassName:A,userSelectionActive:Y,noWheelClassName:z,lib:U,onTransformChange:W,connectionInProgress:X,selectionOnDrag:_,paneClickDistance:j})},[n,r,i,c,d,f,g,h,re,S,A,Y,z,U,W,X,_,j]),s.jsx("div",{className:"react-flow__renderer",ref:q,style:To,children:N})}const $w=n=>({userSelectionActive:n.userSelectionActive,userSelectionRect:n.userSelectionRect});function Kw(){const{userSelectionActive:n,userSelectionRect:r}=Me($w,Qe);return n&&r?s.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:r.width,height:r.height,transform:`translate(${r.x}px, ${r.y}px)`}}):null}const cd=(n,r)=>i=>{i.target===r.current&&n?.(i)},Fw=n=>({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable,connectionInProgress:n.connection.inProgress,dragging:n.paneDragging});function Jw({isSelecting:n,selectionKeyPressed:r,selectionMode:i=dr.Full,panOnDrag:c,paneClickDistance:d,selectionOnDrag:f,onSelectionStart:g,onSelectionEnd:h,onPaneClick:m,onPaneContextMenu:y,onPaneScroll:p,onPaneMouseEnter:b,onPaneMouseMove:v,onPaneMouseLeave:S,children:N}){const z=$e(),{userSelectionActive:A,elementsSelectable:k,dragging:M,connectionInProgress:j}=Me(Fw,Qe),_=k&&(n||A),L=E.useRef(null),q=E.useRef(),Y=E.useRef(new Set),U=E.useRef(new Set),X=E.useRef(!1),re=H=>{if(X.current||j){X.current=!1;return}m?.(H),z.getState().resetSelectedElements(),z.setState({nodesSelectionActive:!1})},$=H=>{if(Array.isArray(c)&&c?.includes(2)){H.preventDefault();return}y?.(H)},W=p?H=>p(H):void 0,B=H=>{X.current&&(H.stopPropagation(),X.current=!1)},T=H=>{const{domNode:Q}=z.getState();if(q.current=Q?.getBoundingClientRect(),!q.current)return;const G=H.target===L.current;if(!G&&!!H.target.closest(".nokey")||!n||!(f&&G||r)||H.button!==0||!H.isPrimary)return;H.target?.setPointerCapture?.(H.pointerId),X.current=!1;const{x:le,y:ie}=ea(H.nativeEvent,q.current);z.setState({userSelectionRect:{width:0,height:0,startX:le,startY:ie,x:le,y:ie}}),G||(H.stopPropagation(),H.preventDefault())},D=H=>{const{userSelectionRect:Q,transform:G,nodeLookup:ee,edgeLookup:P,connectionLookup:le,triggerNodeChanges:ie,triggerEdgeChanges:fe,defaultEdgeOptions:be,resetSelectedElements:me}=z.getState();if(!q.current||!Q)return;const{x:oe,y:ue}=ea(H.nativeEvent,q.current),{startX:Se,startY:je}=Q;if(!X.current){const we=r?0:d;if(Math.hypot(oe-Se,ue-je)<=we)return;me(),g?.(H)}X.current=!0;const ye={startX:Se,startY:je,x:oe<Se?oe:Se,y:ue<je?ue:je,width:Math.abs(oe-Se),height:Math.abs(ue-je)},Ne=Y.current,se=U.current;Y.current=new Set(Ld(ee,ye,G,i===dr.Partial,!0).map(we=>we.id)),U.current=new Set;const pe=be?.selectable??!0;for(const we of Y.current){const Ye=le.get(we);if(Ye)for(const{edgeId:Qt}of Ye.values()){const zt=P.get(Qt);zt&&(zt.selectable??pe)&&U.current.add(Qt)}}if(!sm(Ne,Y.current)){const we=Zs(ee,Y.current,!0);ie(we)}if(!sm(se,U.current)){const we=Zs(P,U.current);fe(we)}z.setState({userSelectionRect:ye,userSelectionActive:!0,nodesSelectionActive:!1})},C=H=>{H.button===0&&(H.target?.releasePointerCapture?.(H.pointerId),!A&&H.target===L.current&&z.getState().userSelectionRect&&re?.(H),z.setState({userSelectionActive:!1,userSelectionRect:null}),X.current&&(h?.(H),z.setState({nodesSelectionActive:Y.current.size>0})))},O=c===!0||Array.isArray(c)&&c.includes(0);return s.jsxs("div",{className:nt(["react-flow__pane",{draggable:O,dragging:M,selection:n}]),onClick:_?void 0:cd(re,L),onContextMenu:cd($,L),onWheel:cd(W,L),onPointerEnter:_?void 0:b,onPointerMove:_?D:v,onPointerUp:_?C:void 0,onPointerDownCapture:_?T:void 0,onClickCapture:_?B:void 0,onPointerLeave:S,ref:L,style:To,children:[N,s.jsx(Kw,{})]})}function Sd({id:n,store:r,unselect:i=!1,nodeRef:c}){const{addSelectedNodes:d,unselectNodesAndEdges:f,multiSelectionActive:g,nodeLookup:h,onError:m}=r.getState(),y=h.get(n);if(!y){m?.("012",ga.error012(n));return}r.setState({nodesSelectionActive:!1}),y.selected?(i||y.selected&&g)&&(f({nodes:[y],edges:[]}),requestAnimationFrame(()=>c?.current?.blur())):d([n])}function xy({nodeRef:n,disabled:r=!1,noDragClassName:i,handleSelector:c,nodeId:d,isSelectable:f,nodeClickDistance:g}){const h=$e(),[m,y]=E.useState(!1),p=E.useRef();return E.useEffect(()=>{p.current=G2({getStoreItems:()=>h.getState(),onNodeMouseDown:b=>{Sd({id:b,store:h,nodeRef:n})},onDragStart:()=>{y(!0)},onDragStop:()=>{y(!1)}})},[]),E.useEffect(()=>{if(r)p.current?.destroy();else if(n.current)return p.current?.update({noDragClassName:i,handleSelector:c,domNode:n.current,isSelectable:f,nodeId:d,nodeClickDistance:g}),()=>{p.current?.destroy()}},[i,c,r,f,n,d]),m}const Ww=n=>r=>r.selected&&(r.draggable||n&&typeof r.draggable>"u");function yy(){const n=$e();return E.useCallback(i=>{const{nodeExtent:c,snapToGrid:d,snapGrid:f,nodesDraggable:g,onError:h,updateNodePositions:m,nodeLookup:y,nodeOrigin:p}=n.getState(),b=new Map,v=Ww(g),S=d?f[0]:5,N=d?f[1]:5,z=i.direction.x*S*i.factor,A=i.direction.y*N*i.factor;for(const[,k]of y){if(!v(k))continue;let M={x:k.internals.positionAbsolute.x+z,y:k.internals.positionAbsolute.y+A};d&&(M=Nr(M,f));const{position:j,positionAbsolute:_}=Rx({nodeId:k.id,nextPosition:M,nodeLookup:y,nodeExtent:c,nodeOrigin:p,onError:h});k.position=j,k.internals.positionAbsolute=_,b.set(k.id,k)}m(b)},[])}const Zd=E.createContext(null),Iw=Zd.Provider;Zd.Consumer;const py=()=>E.useContext(Zd),Pw=n=>({connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName,rfId:n.rfId}),eS=(n,r,i)=>c=>{const{connectionClickStartHandle:d,connectionMode:f,connection:g}=c,{fromHandle:h,toHandle:m,isValid:y}=g,p=m?.nodeId===n&&m?.id===r&&m?.type===i;return{connectingFrom:h?.nodeId===n&&h?.id===r&&h?.type===i,connectingTo:p,clickConnecting:d?.nodeId===n&&d?.id===r&&d?.type===i,isPossibleEndHandle:f===Ws.Strict?h?.type!==i:n!==h?.nodeId||r!==h?.id,connectionInProcess:!!h,clickConnectionInProcess:!!d,valid:p&&y}};function tS({type:n="source",position:r=he.Top,isValidConnection:i,isConnectable:c=!0,isConnectableStart:d=!0,isConnectableEnd:f=!0,id:g,onConnect:h,children:m,className:y,onMouseDown:p,onTouchStart:b,...v},S){const N=g||null,z=n==="target",A=$e(),k=py(),{connectOnClick:M,noPanClassName:j,rfId:_}=Me(Pw,Qe),{connectingFrom:L,connectingTo:q,clickConnecting:Y,isPossibleEndHandle:U,connectionInProcess:X,clickConnectionInProcess:re,valid:$}=Me(eS(k,N,n),Qe);k||A.getState().onError?.("010",ga.error010());const W=D=>{const{defaultEdgeOptions:C,onConnect:O,hasDefaultEdges:H}=A.getState(),Q={...C,...D};if(H){const{edges:G,setEdges:ee}=A.getState();ee($x(Q,G))}O?.(Q),h?.(Q)},B=D=>{if(!k)return;const C=Gx(D.nativeEvent);if(d&&(C&&D.button===0||!C)){const O=A.getState();wd.onPointerDown(D.nativeEvent,{handleDomNode:D.currentTarget,autoPanOnConnect:O.autoPanOnConnect,connectionMode:O.connectionMode,connectionRadius:O.connectionRadius,domNode:O.domNode,nodeLookup:O.nodeLookup,lib:O.lib,isTarget:z,handleId:N,nodeId:k,flowId:O.rfId,panBy:O.panBy,cancelConnection:O.cancelConnection,onConnectStart:O.onConnectStart,onConnectEnd:O.onConnectEnd,updateConnection:O.updateConnection,onConnect:W,isValidConnection:i||O.isValidConnection,getTransform:()=>A.getState().transform,getFromHandle:()=>A.getState().connection.fromHandle,autoPanSpeed:O.autoPanSpeed,dragThreshold:O.connectionDragThreshold})}C?p?.(D):b?.(D)},T=D=>{const{onClickConnectStart:C,onClickConnectEnd:O,connectionClickStartHandle:H,connectionMode:Q,isValidConnection:G,lib:ee,rfId:P,nodeLookup:le,connection:ie}=A.getState();if(!k||!H&&!d)return;if(!H){C?.(D.nativeEvent,{nodeId:k,handleId:N,handleType:n}),A.setState({connectionClickStartHandle:{nodeId:k,type:n,id:N}});return}const fe=Vx(D.target),be=i||G,{connection:me,isValid:oe}=wd.isValid(D.nativeEvent,{handle:{nodeId:k,id:N,type:n},connectionMode:Q,fromNodeId:H.nodeId,fromHandleId:H.id||null,fromType:H.type,isValidConnection:be,flowId:P,doc:fe,lib:ee,nodeLookup:le});oe&&me&&W(me);const ue=structuredClone(ie);delete ue.inProgress,ue.toPosition=ue.toHandle?ue.toHandle.position:null,O?.(D,ue),A.setState({connectionClickStartHandle:null})};return s.jsx("div",{"data-handleid":N,"data-nodeid":k,"data-handlepos":r,"data-id":`${_}-${k}-${N}-${n}`,className:nt(["react-flow__handle",`react-flow__handle-${r}`,"nodrag",j,y,{source:!z,target:z,connectable:c,connectablestart:d,connectableend:f,clickconnecting:Y,connectingfrom:L,connectingto:q,valid:$,connectionindicator:c&&(!X||U)&&(X||re?f:d)}]),onMouseDown:B,onTouchStart:B,onClick:M?T:void 0,ref:S,...v,children:m})}const fa=E.memo(hy(tS));function aS({data:n,isConnectable:r,sourcePosition:i=he.Bottom}){return s.jsxs(s.Fragment,{children:[n?.label,s.jsx(fa,{type:"source",position:i,isConnectable:r})]})}function nS({data:n,isConnectable:r,targetPosition:i=he.Top,sourcePosition:c=he.Bottom}){return s.jsxs(s.Fragment,{children:[s.jsx(fa,{type:"target",position:i,isConnectable:r}),n?.label,s.jsx(fa,{type:"source",position:c,isConnectable:r})]})}function sS(){return null}function lS({data:n,isConnectable:r,targetPosition:i=he.Top}){return s.jsxs(s.Fragment,{children:[s.jsx(fa,{type:"target",position:i,isConnectable:r}),n?.label]})}const ho={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Tm={input:aS,default:nS,output:lS,group:sS};function rS(n){return n.internals.handleBounds===void 0?{width:n.width??n.initialWidth??n.style?.width,height:n.height??n.initialHeight??n.style?.height}:{width:n.width??n.style?.width,height:n.height??n.style?.height}}const iS=n=>{const{width:r,height:i,x:c,y:d}=vr(n.nodeLookup,{filter:f=>!!f.selected});return{width:Pt(r)?r:null,height:Pt(i)?i:null,userSelectionActive:n.userSelectionActive,transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]}) translate(${c}px,${d}px)`}};function oS({onSelectionContextMenu:n,noPanClassName:r,disableKeyboardA11y:i}){const c=$e(),{width:d,height:f,transformString:g,userSelectionActive:h}=Me(iS,Qe),m=yy(),y=E.useRef(null);if(E.useEffect(()=>{i||y.current?.focus({preventScroll:!0})},[i]),xy({nodeRef:y}),h||!d||!f)return null;const p=n?v=>{const S=c.getState().nodes.filter(N=>N.selected);n(v,S)}:void 0,b=v=>{Object.prototype.hasOwnProperty.call(ho,v.key)&&(v.preventDefault(),m({direction:ho[v.key],factor:v.shiftKey?4:1}))};return s.jsx("div",{className:nt(["react-flow__nodesselection","react-flow__container",r]),style:{transform:g},children:s.jsx("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:i?void 0:-1,onKeyDown:i?void 0:b,style:{width:d,height:f}})})}const _m=typeof window<"u"?window:void 0,cS=n=>({nodesSelectionActive:n.nodesSelectionActive,userSelectionActive:n.userSelectionActive});function by({children:n,onPaneClick:r,onPaneMouseEnter:i,onPaneMouseMove:c,onPaneMouseLeave:d,onPaneContextMenu:f,onPaneScroll:g,paneClickDistance:h,deleteKeyCode:m,selectionKeyCode:y,selectionOnDrag:p,selectionMode:b,onSelectionStart:v,onSelectionEnd:S,multiSelectionKeyCode:N,panActivationKeyCode:z,zoomActivationKeyCode:A,elementsSelectable:k,zoomOnScroll:M,zoomOnPinch:j,panOnScroll:_,panOnScrollSpeed:L,panOnScrollMode:q,zoomOnDoubleClick:Y,panOnDrag:U,defaultViewport:X,translateExtent:re,minZoom:$,maxZoom:W,preventScrolling:B,onSelectionContextMenu:T,noWheelClassName:D,noPanClassName:C,disableKeyboardA11y:O,onViewportChange:H,isControlledViewport:Q}){const{nodesSelectionActive:G,userSelectionActive:ee}=Me(cS,Qe),P=hr(y,{target:_m}),le=hr(z,{target:_m}),ie=le||U,fe=le||_,be=p&&ie!==!0,me=P||ee||be;return Gw({deleteKeyCode:m,multiSelectionKeyCode:N}),s.jsx(Qw,{onPaneContextMenu:f,elementsSelectable:k,zoomOnScroll:M,zoomOnPinch:j,panOnScroll:fe,panOnScrollSpeed:L,panOnScrollMode:q,zoomOnDoubleClick:Y,panOnDrag:!P&&ie,defaultViewport:X,translateExtent:re,minZoom:$,maxZoom:W,zoomActivationKeyCode:A,preventScrolling:B,noWheelClassName:D,noPanClassName:C,onViewportChange:H,isControlledViewport:Q,paneClickDistance:h,selectionOnDrag:be,children:s.jsxs(Jw,{onSelectionStart:v,onSelectionEnd:S,onPaneClick:r,onPaneMouseEnter:i,onPaneMouseMove:c,onPaneMouseLeave:d,onPaneContextMenu:f,onPaneScroll:g,panOnDrag:ie,isSelecting:!!me,selectionMode:b,selectionKeyPressed:P,paneClickDistance:h,selectionOnDrag:be,children:[n,G&&s.jsx(oS,{onSelectionContextMenu:T,noPanClassName:C,disableKeyboardA11y:O})]})})}by.displayName="FlowRenderer";const uS=E.memo(by),dS=n=>r=>n?Ld(r.nodeLookup,{x:0,y:0,width:r.width,height:r.height},r.transform,!0).map(i=>i.id):Array.from(r.nodeLookup.keys());function fS(n){return Me(E.useCallback(dS(n),[n]),Qe)}const gS=n=>n.updateNodeInternals;function hS(){const n=Me(gS),[r]=E.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(i=>{const c=new Map;i.forEach(d=>{const f=d.target.getAttribute("data-id");c.set(f,{id:f,nodeElement:d.target,force:!0})}),n(c)}));return E.useEffect(()=>()=>{r?.disconnect()},[r]),r}function mS({node:n,nodeType:r,hasDimensions:i,resizeObserver:c}){const d=$e(),f=E.useRef(null),g=E.useRef(null),h=E.useRef(n.sourcePosition),m=E.useRef(n.targetPosition),y=E.useRef(r),p=i&&!!n.internals.handleBounds;return E.useEffect(()=>{f.current&&!n.hidden&&(!p||g.current!==f.current)&&(g.current&&c?.unobserve(g.current),c?.observe(f.current),g.current=f.current)},[p,n.hidden]),E.useEffect(()=>()=>{g.current&&(c?.unobserve(g.current),g.current=null)},[]),E.useEffect(()=>{if(f.current){const b=y.current!==r,v=h.current!==n.sourcePosition,S=m.current!==n.targetPosition;(b||v||S)&&(y.current=r,h.current=n.sourcePosition,m.current=n.targetPosition,d.getState().updateNodeInternals(new Map([[n.id,{id:n.id,nodeElement:f.current,force:!0}]])))}},[n.id,r,n.sourcePosition,n.targetPosition]),f}function xS({id:n,onClick:r,onMouseEnter:i,onMouseMove:c,onMouseLeave:d,onContextMenu:f,onDoubleClick:g,nodesDraggable:h,elementsSelectable:m,nodesConnectable:y,nodesFocusable:p,resizeObserver:b,noDragClassName:v,noPanClassName:S,disableKeyboardA11y:N,rfId:z,nodeTypes:A,nodeClickDistance:k,onError:M}){const{node:j,internals:_,isParent:L}=Me(oe=>{const ue=oe.nodeLookup.get(n),Se=oe.parentLookup.has(n);return{node:ue,internals:ue.internals,isParent:Se}},Qe);let q=j.type||"default",Y=A?.[q]||Tm[q];Y===void 0&&(M?.("003",ga.error003(q)),q="default",Y=A?.default||Tm.default);const U=!!(j.draggable||h&&typeof j.draggable>"u"),X=!!(j.selectable||m&&typeof j.selectable>"u"),re=!!(j.connectable||y&&typeof j.connectable>"u"),$=!!(j.focusable||p&&typeof j.focusable>"u"),W=$e(),B=Ux(j),T=mS({node:j,nodeType:q,hasDimensions:B,resizeObserver:b}),D=xy({nodeRef:T,disabled:j.hidden||!U,noDragClassName:v,handleSelector:j.dragHandle,nodeId:n,isSelectable:X,nodeClickDistance:k}),C=yy();if(j.hidden)return null;const O=Va(j),H=rS(j),Q=X||U||r||i||c||d,G=i?oe=>i(oe,{..._.userNode}):void 0,ee=c?oe=>c(oe,{..._.userNode}):void 0,P=d?oe=>d(oe,{..._.userNode}):void 0,le=f?oe=>f(oe,{..._.userNode}):void 0,ie=g?oe=>g(oe,{..._.userNode}):void 0,fe=oe=>{const{selectNodesOnDrag:ue,nodeDragThreshold:Se}=W.getState();X&&(!ue||!U||Se>0)&&Sd({id:n,store:W,nodeRef:T}),r&&r(oe,{..._.userNode})},be=oe=>{if(!(Yx(oe.nativeEvent)||N)){if(Tx.includes(oe.key)&&X){const ue=oe.key==="Escape";Sd({id:n,store:W,unselect:ue,nodeRef:T})}else if(U&&j.selected&&Object.prototype.hasOwnProperty.call(ho,oe.key)){oe.preventDefault();const{ariaLabelConfig:ue}=W.getState();W.setState({ariaLiveMessage:ue["node.a11yDescription.ariaLiveMessage"]({direction:oe.key.replace("Arrow","").toLowerCase(),x:~~_.positionAbsolute.x,y:~~_.positionAbsolute.y})}),C({direction:ho[oe.key],factor:oe.shiftKey?4:1})}}},me=()=>{if(N||!T.current?.matches(":focus-visible"))return;const{transform:oe,width:ue,height:Se,autoPanOnNodeFocus:je,setCenter:ye}=W.getState();if(!je)return;Ld(new Map([[n,j]]),{x:0,y:0,width:ue,height:Se},oe,!0).length>0||ye(j.position.x+O.width/2,j.position.y+O.height/2,{zoom:oe[2]})};return s.jsx("div",{className:nt(["react-flow__node",`react-flow__node-${q}`,{[S]:U},j.className,{selected:j.selected,selectable:X,parent:L,draggable:U,dragging:D}]),ref:T,style:{zIndex:_.z,transform:`translate(${_.positionAbsolute.x}px,${_.positionAbsolute.y}px)`,pointerEvents:Q?"all":"none",visibility:B?"visible":"hidden",...j.style,...H},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:G,onMouseMove:ee,onMouseLeave:P,onContextMenu:le,onClick:fe,onDoubleClick:ie,onKeyDown:$?be:void 0,tabIndex:$?0:void 0,onFocus:$?me:void 0,role:j.ariaRole??($?"group":void 0),"aria-roledescription":"node","aria-describedby":N?void 0:`${oy}-${z}`,"aria-label":j.ariaLabel,...j.domAttributes,children:s.jsx(Iw,{value:n,children:s.jsx(Y,{id:n,data:j.data,type:q,positionAbsoluteX:_.positionAbsolute.x,positionAbsoluteY:_.positionAbsolute.y,selected:j.selected??!1,selectable:X,draggable:U,deletable:j.deletable??!0,isConnectable:re,sourcePosition:j.sourcePosition,targetPosition:j.targetPosition,dragging:D,dragHandle:j.dragHandle,zIndex:_.z,parentId:j.parentId,...O})})})}var yS=E.memo(xS);const pS=n=>({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,onError:n.onError});function vy(n){const{nodesDraggable:r,nodesConnectable:i,nodesFocusable:c,elementsSelectable:d,onError:f}=Me(pS,Qe),g=fS(n.onlyRenderVisibleElements),h=hS();return s.jsx("div",{className:"react-flow__nodes",style:To,children:g.map(m=>s.jsx(yS,{id:m,nodeTypes:n.nodeTypes,nodeExtent:n.nodeExtent,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,resizeObserver:h,nodesDraggable:r,nodesConnectable:i,nodesFocusable:c,elementsSelectable:d,nodeClickDistance:n.nodeClickDistance,onError:f},m))})}vy.displayName="NodeRenderer";const bS=E.memo(vy);function vS(n){return Me(E.useCallback(i=>{if(!n)return i.edges.map(d=>d.id);const c=[];if(i.width&&i.height)for(const d of i.edges){const f=i.nodeLookup.get(d.source),g=i.nodeLookup.get(d.target);f&&g&&k2({sourceNode:f,targetNode:g,width:i.width,height:i.height,transform:i.transform})&&c.push(d.id)}return c},[n]),Qe)}const NS=({color:n="none",strokeWidth:r=1})=>{const i={strokeWidth:r,...n&&{stroke:n}};return s.jsx("polyline",{className:"arrow",style:i,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},jS=({color:n="none",strokeWidth:r=1})=>{const i={strokeWidth:r,...n&&{stroke:n,fill:n}};return s.jsx("polyline",{className:"arrowclosed",style:i,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Mm={[uo.Arrow]:NS,[uo.ArrowClosed]:jS};function wS(n){const r=$e();return E.useMemo(()=>Object.prototype.hasOwnProperty.call(Mm,n)?Mm[n]:(r.getState().onError?.("009",ga.error009(n)),null),[n])}const SS=({id:n,type:r,color:i,width:c=12.5,height:d=12.5,markerUnits:f="strokeWidth",strokeWidth:g,orient:h="auto-start-reverse"})=>{const m=wS(r);return m?s.jsx("marker",{className:"react-flow__arrowhead",id:n,markerWidth:`${c}`,markerHeight:`${d}`,viewBox:"-10 -10 20 20",markerUnits:f,orient:h,refX:"0",refY:"0",children:s.jsx(m,{color:i,strokeWidth:g})}):null},Ny=({defaultColor:n,rfId:r})=>{const i=Me(f=>f.edges),c=Me(f=>f.defaultEdgeOptions),d=E.useMemo(()=>M2(i,{id:r,defaultColor:n,defaultMarkerStart:c?.markerStart,defaultMarkerEnd:c?.markerEnd}),[i,c,r,n]);return d.length?s.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:s.jsx("defs",{children:d.map(f=>s.jsx(SS,{id:f.id,type:f.type,color:f.color,width:f.width,height:f.height,markerUnits:f.markerUnits,strokeWidth:f.strokeWidth,orient:f.orient},f.id))})}):null};Ny.displayName="MarkerDefinitions";var kS=E.memo(Ny);function jy({x:n,y:r,label:i,labelStyle:c,labelShowBg:d=!0,labelBgStyle:f,labelBgPadding:g=[2,4],labelBgBorderRadius:h=2,children:m,className:y,...p}){const[b,v]=E.useState({x:1,y:0,width:0,height:0}),S=nt(["react-flow__edge-textwrapper",y]),N=E.useRef(null);return E.useEffect(()=>{if(N.current){const z=N.current.getBBox();v({x:z.x,y:z.y,width:z.width,height:z.height})}},[i]),i?s.jsxs("g",{transform:`translate(${n-b.width/2} ${r-b.height/2})`,className:S,visibility:b.width?"visible":"hidden",...p,children:[d&&s.jsx("rect",{width:b.width+2*g[0],x:-g[0],y:-g[1],height:b.height+2*g[1],className:"react-flow__edge-textbg",style:f,rx:h,ry:h}),s.jsx("text",{className:"react-flow__edge-text",y:b.height/2,dy:"0.3em",ref:N,style:c,children:i}),m]}):null}jy.displayName="EdgeText";const CS=E.memo(jy);function _o({path:n,labelX:r,labelY:i,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:g,labelBgPadding:h,labelBgBorderRadius:m,interactionWidth:y=20,...p}){return s.jsxs(s.Fragment,{children:[s.jsx("path",{...p,d:n,fill:"none",className:nt(["react-flow__edge-path",p.className])}),y?s.jsx("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:y,className:"react-flow__edge-interaction"}):null,c&&Pt(r)&&Pt(i)?s.jsx(CS,{x:r,y:i,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:g,labelBgPadding:h,labelBgBorderRadius:m}):null]})}function Dm({pos:n,x1:r,y1:i,x2:c,y2:d}){return n===he.Left||n===he.Right?[.5*(r+c),i]:[r,.5*(i+d)]}function wy({sourceX:n,sourceY:r,sourcePosition:i=he.Bottom,targetX:c,targetY:d,targetPosition:f=he.Top}){const[g,h]=Dm({pos:i,x1:n,y1:r,x2:c,y2:d}),[m,y]=Dm({pos:f,x1:c,y1:d,x2:n,y2:r}),[p,b,v,S]=Xx({sourceX:n,sourceY:r,targetX:c,targetY:d,sourceControlX:g,sourceControlY:h,targetControlX:m,targetControlY:y});return[`M${n},${r} C${g},${h} ${m},${y} ${c},${d}`,p,b,v,S]}function Sy(n){return E.memo(({id:r,sourceX:i,sourceY:c,targetX:d,targetY:f,sourcePosition:g,targetPosition:h,label:m,labelStyle:y,labelShowBg:p,labelBgStyle:b,labelBgPadding:v,labelBgBorderRadius:S,style:N,markerEnd:z,markerStart:A,interactionWidth:k})=>{const[M,j,_]=wy({sourceX:i,sourceY:c,sourcePosition:g,targetX:d,targetY:f,targetPosition:h}),L=n.isInternal?void 0:r;return s.jsx(_o,{id:L,path:M,labelX:j,labelY:_,label:m,labelStyle:y,labelShowBg:p,labelBgStyle:b,labelBgPadding:v,labelBgBorderRadius:S,style:N,markerEnd:z,markerStart:A,interactionWidth:k})})}const zS=Sy({isInternal:!1}),ky=Sy({isInternal:!0});zS.displayName="SimpleBezierEdge";ky.displayName="SimpleBezierEdgeInternal";function Cy(n){return E.memo(({id:r,sourceX:i,sourceY:c,targetX:d,targetY:f,label:g,labelStyle:h,labelShowBg:m,labelBgStyle:y,labelBgPadding:p,labelBgBorderRadius:b,style:v,sourcePosition:S=he.Bottom,targetPosition:N=he.Top,markerEnd:z,markerStart:A,pathOptions:k,interactionWidth:M})=>{const[j,_,L]=vd({sourceX:i,sourceY:c,sourcePosition:S,targetX:d,targetY:f,targetPosition:N,borderRadius:k?.borderRadius,offset:k?.offset,stepPosition:k?.stepPosition}),q=n.isInternal?void 0:r;return s.jsx(_o,{id:q,path:j,labelX:_,labelY:L,label:g,labelStyle:h,labelShowBg:m,labelBgStyle:y,labelBgPadding:p,labelBgBorderRadius:b,style:v,markerEnd:z,markerStart:A,interactionWidth:M})})}const zy=Cy({isInternal:!1}),Ey=Cy({isInternal:!0});zy.displayName="SmoothStepEdge";Ey.displayName="SmoothStepEdgeInternal";function Ay(n){return E.memo(({id:r,...i})=>{const c=n.isInternal?void 0:r;return s.jsx(zy,{...i,id:c,pathOptions:E.useMemo(()=>({borderRadius:0,offset:i.pathOptions?.offset}),[i.pathOptions?.offset])})})}const ES=Ay({isInternal:!1}),Ty=Ay({isInternal:!0});ES.displayName="StepEdge";Ty.displayName="StepEdgeInternal";function _y(n){return E.memo(({id:r,sourceX:i,sourceY:c,targetX:d,targetY:f,label:g,labelStyle:h,labelShowBg:m,labelBgStyle:y,labelBgPadding:p,labelBgBorderRadius:b,style:v,markerEnd:S,markerStart:N,interactionWidth:z})=>{const[A,k,M]=Kx({sourceX:i,sourceY:c,targetX:d,targetY:f}),j=n.isInternal?void 0:r;return s.jsx(_o,{id:j,path:A,labelX:k,labelY:M,label:g,labelStyle:h,labelShowBg:m,labelBgStyle:y,labelBgPadding:p,labelBgBorderRadius:b,style:v,markerEnd:S,markerStart:N,interactionWidth:z})})}const AS=_y({isInternal:!1}),My=_y({isInternal:!0});AS.displayName="StraightEdge";My.displayName="StraightEdgeInternal";function Dy(n){return E.memo(({id:r,sourceX:i,sourceY:c,targetX:d,targetY:f,sourcePosition:g=he.Bottom,targetPosition:h=he.Top,label:m,labelStyle:y,labelShowBg:p,labelBgStyle:b,labelBgPadding:v,labelBgBorderRadius:S,style:N,markerEnd:z,markerStart:A,pathOptions:k,interactionWidth:M})=>{const[j,_,L]=Zx({sourceX:i,sourceY:c,sourcePosition:g,targetX:d,targetY:f,targetPosition:h,curvature:k?.curvature}),q=n.isInternal?void 0:r;return s.jsx(_o,{id:q,path:j,labelX:_,labelY:L,label:m,labelStyle:y,labelShowBg:p,labelBgStyle:b,labelBgPadding:v,labelBgBorderRadius:S,style:N,markerEnd:z,markerStart:A,interactionWidth:M})})}const TS=Dy({isInternal:!1}),Oy=Dy({isInternal:!0});TS.displayName="BezierEdge";Oy.displayName="BezierEdgeInternal";const Om={default:Oy,straight:My,step:Ty,smoothstep:Ey,simplebezier:ky},Rm={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},_S=(n,r,i)=>i===he.Left?n-r:i===he.Right?n+r:n,MS=(n,r,i)=>i===he.Top?n-r:i===he.Bottom?n+r:n,Hm="react-flow__edgeupdater";function Lm({position:n,centerX:r,centerY:i,radius:c=10,onMouseDown:d,onMouseEnter:f,onMouseOut:g,type:h}){return s.jsx("circle",{onMouseDown:d,onMouseEnter:f,onMouseOut:g,className:nt([Hm,`${Hm}-${h}`]),cx:_S(r,c,n),cy:MS(i,c,n),r:c,stroke:"transparent",fill:"transparent"})}function DS({isReconnectable:n,reconnectRadius:r,edge:i,sourceX:c,sourceY:d,targetX:f,targetY:g,sourcePosition:h,targetPosition:m,onReconnect:y,onReconnectStart:p,onReconnectEnd:b,setReconnecting:v,setUpdateHover:S}){const N=$e(),z=(_,L)=>{if(_.button!==0)return;const{autoPanOnConnect:q,domNode:Y,isValidConnection:U,connectionMode:X,connectionRadius:re,lib:$,onConnectStart:W,onConnectEnd:B,cancelConnection:T,nodeLookup:D,rfId:C,panBy:O,updateConnection:H}=N.getState(),Q=L.type==="target",G=(le,ie)=>{v(!1),b?.(le,i,L.type,ie)},ee=le=>y?.(i,le),P=(le,ie)=>{v(!0),p?.(_,i,L.type),W?.(le,ie)};wd.onPointerDown(_.nativeEvent,{autoPanOnConnect:q,connectionMode:X,connectionRadius:re,domNode:Y,handleId:L.id,nodeId:L.nodeId,nodeLookup:D,isTarget:Q,edgeUpdaterType:L.type,lib:$,flowId:C,cancelConnection:T,panBy:O,isValidConnection:U,onConnect:ee,onConnectStart:P,onConnectEnd:B,onReconnectEnd:G,updateConnection:H,getTransform:()=>N.getState().transform,getFromHandle:()=>N.getState().connection.fromHandle,dragThreshold:N.getState().connectionDragThreshold,handleDomNode:_.currentTarget})},A=_=>z(_,{nodeId:i.target,id:i.targetHandle??null,type:"target"}),k=_=>z(_,{nodeId:i.source,id:i.sourceHandle??null,type:"source"}),M=()=>S(!0),j=()=>S(!1);return s.jsxs(s.Fragment,{children:[(n===!0||n==="source")&&s.jsx(Lm,{position:h,centerX:c,centerY:d,radius:r,onMouseDown:A,onMouseEnter:M,onMouseOut:j,type:"source"}),(n===!0||n==="target")&&s.jsx(Lm,{position:m,centerX:f,centerY:g,radius:r,onMouseDown:k,onMouseEnter:M,onMouseOut:j,type:"target"})]})}function OS({id:n,edgesFocusable:r,edgesReconnectable:i,elementsSelectable:c,onClick:d,onDoubleClick:f,onContextMenu:g,onMouseEnter:h,onMouseMove:m,onMouseLeave:y,reconnectRadius:p,onReconnect:b,onReconnectStart:v,onReconnectEnd:S,rfId:N,edgeTypes:z,noPanClassName:A,onError:k,disableKeyboardA11y:M}){let j=Me(ye=>ye.edgeLookup.get(n));const _=Me(ye=>ye.defaultEdgeOptions);j=_?{..._,...j}:j;let L=j.type||"default",q=z?.[L]||Om[L];q===void 0&&(k?.("011",ga.error011(L)),L="default",q=z?.default||Om.default);const Y=!!(j.focusable||r&&typeof j.focusable>"u"),U=typeof b<"u"&&(j.reconnectable||i&&typeof j.reconnectable>"u"),X=!!(j.selectable||c&&typeof j.selectable>"u"),re=E.useRef(null),[$,W]=E.useState(!1),[B,T]=E.useState(!1),D=$e(),{zIndex:C,sourceX:O,sourceY:H,targetX:Q,targetY:G,sourcePosition:ee,targetPosition:P}=Me(E.useCallback(ye=>{const Ne=ye.nodeLookup.get(j.source),se=ye.nodeLookup.get(j.target);if(!Ne||!se)return{zIndex:j.zIndex,...Rm};const pe=_2({id:n,sourceNode:Ne,targetNode:se,sourceHandle:j.sourceHandle||null,targetHandle:j.targetHandle||null,connectionMode:ye.connectionMode,onError:k});return{zIndex:S2({selected:j.selected,zIndex:j.zIndex,sourceNode:Ne,targetNode:se,elevateOnSelect:ye.elevateEdgesOnSelect,zIndexMode:ye.zIndexMode}),...pe||Rm}},[j.source,j.target,j.sourceHandle,j.targetHandle,j.selected,j.zIndex]),Qe),le=E.useMemo(()=>j.markerStart?`url('#${Nd(j.markerStart,N)}')`:void 0,[j.markerStart,N]),ie=E.useMemo(()=>j.markerEnd?`url('#${Nd(j.markerEnd,N)}')`:void 0,[j.markerEnd,N]);if(j.hidden||O===null||H===null||Q===null||G===null)return null;const fe=ye=>{const{addSelectedEdges:Ne,unselectNodesAndEdges:se,multiSelectionActive:pe}=D.getState();X&&(D.setState({nodesSelectionActive:!1}),j.selected&&pe?(se({nodes:[],edges:[j]}),re.current?.blur()):Ne([n])),d&&d(ye,j)},be=f?ye=>{f(ye,{...j})}:void 0,me=g?ye=>{g(ye,{...j})}:void 0,oe=h?ye=>{h(ye,{...j})}:void 0,ue=m?ye=>{m(ye,{...j})}:void 0,Se=y?ye=>{y(ye,{...j})}:void 0,je=ye=>{if(!M&&Tx.includes(ye.key)&&X){const{unselectNodesAndEdges:Ne,addSelectedEdges:se}=D.getState();ye.key==="Escape"?(re.current?.blur(),Ne({edges:[j]})):se([n])}};return s.jsx("svg",{style:{zIndex:C},children:s.jsxs("g",{className:nt(["react-flow__edge",`react-flow__edge-${L}`,j.className,A,{selected:j.selected,animated:j.animated,inactive:!X&&!d,updating:$,selectable:X}]),onClick:fe,onDoubleClick:be,onContextMenu:me,onMouseEnter:oe,onMouseMove:ue,onMouseLeave:Se,onKeyDown:Y?je:void 0,tabIndex:Y?0:void 0,role:j.ariaRole??(Y?"group":"img"),"aria-roledescription":"edge","data-id":n,"data-testid":`rf__edge-${n}`,"aria-label":j.ariaLabel===null?void 0:j.ariaLabel||`Edge from ${j.source} to ${j.target}`,"aria-describedby":Y?`${cy}-${N}`:void 0,ref:re,...j.domAttributes,children:[!B&&s.jsx(q,{id:n,source:j.source,target:j.target,type:j.type,selected:j.selected,animated:j.animated,selectable:X,deletable:j.deletable??!0,label:j.label,labelStyle:j.labelStyle,labelShowBg:j.labelShowBg,labelBgStyle:j.labelBgStyle,labelBgPadding:j.labelBgPadding,labelBgBorderRadius:j.labelBgBorderRadius,sourceX:O,sourceY:H,targetX:Q,targetY:G,sourcePosition:ee,targetPosition:P,data:j.data,style:j.style,sourceHandleId:j.sourceHandle,targetHandleId:j.targetHandle,markerStart:le,markerEnd:ie,pathOptions:"pathOptions"in j?j.pathOptions:void 0,interactionWidth:j.interactionWidth}),U&&s.jsx(DS,{edge:j,isReconnectable:U,reconnectRadius:p,onReconnect:b,onReconnectStart:v,onReconnectEnd:S,sourceX:O,sourceY:H,targetX:Q,targetY:G,sourcePosition:ee,targetPosition:P,setUpdateHover:W,setReconnecting:T})]})})}var RS=E.memo(OS);const HS=n=>({edgesFocusable:n.edgesFocusable,edgesReconnectable:n.edgesReconnectable,elementsSelectable:n.elementsSelectable,connectionMode:n.connectionMode,onError:n.onError});function Ry({defaultMarkerColor:n,onlyRenderVisibleElements:r,rfId:i,edgeTypes:c,noPanClassName:d,onReconnect:f,onEdgeContextMenu:g,onEdgeMouseEnter:h,onEdgeMouseMove:m,onEdgeMouseLeave:y,onEdgeClick:p,reconnectRadius:b,onEdgeDoubleClick:v,onReconnectStart:S,onReconnectEnd:N,disableKeyboardA11y:z}){const{edgesFocusable:A,edgesReconnectable:k,elementsSelectable:M,onError:j}=Me(HS,Qe),_=vS(r);return s.jsxs("div",{className:"react-flow__edges",children:[s.jsx(kS,{defaultColor:n,rfId:i}),_.map(L=>s.jsx(RS,{id:L,edgesFocusable:A,edgesReconnectable:k,elementsSelectable:M,noPanClassName:d,onReconnect:f,onContextMenu:g,onMouseEnter:h,onMouseMove:m,onMouseLeave:y,onClick:p,reconnectRadius:b,onDoubleClick:v,onReconnectStart:S,onReconnectEnd:N,rfId:i,onError:j,edgeTypes:c,disableKeyboardA11y:z},L))]})}Ry.displayName="EdgeRenderer";const LS=E.memo(Ry),BS=n=>`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function US({children:n}){const r=Me(BS);return s.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:r},children:n})}function qS(n){const r=Ao(),i=E.useRef(!1);E.useEffect(()=>{!i.current&&r.viewportInitialized&&n&&(setTimeout(()=>n(r),1),i.current=!0)},[n,r.viewportInitialized])}const VS=n=>n.panZoom?.syncViewport;function YS(n){const r=Me(VS),i=$e();return E.useEffect(()=>{n&&(r?.(n),i.setState({transform:[n.x,n.y,n.zoom]}))},[n,r]),null}function GS(n){return n.connection.inProgress?{...n.connection,to:jr(n.connection.to,n.transform)}:{...n.connection}}function XS(n){return GS}function ZS(n){const r=XS();return Me(r,Qe)}const QS=n=>({nodesConnectable:n.nodesConnectable,isValid:n.connection.isValid,inProgress:n.connection.inProgress,width:n.width,height:n.height});function $S({containerStyle:n,style:r,type:i,component:c}){const{nodesConnectable:d,width:f,height:g,isValid:h,inProgress:m}=Me(QS,Qe);return!(f&&d&&m)?null:s.jsx("svg",{style:n,width:f,height:g,className:"react-flow__connectionline react-flow__container",children:s.jsx("g",{className:nt(["react-flow__connection",Dx(h)]),children:s.jsx(Hy,{style:r,type:i,CustomComponent:c,isValid:h})})})}const Hy=({style:n,type:r=vn.Bezier,CustomComponent:i,isValid:c})=>{const{inProgress:d,from:f,fromNode:g,fromHandle:h,fromPosition:m,to:y,toNode:p,toHandle:b,toPosition:v,pointer:S}=ZS();if(!d)return;if(i)return s.jsx(i,{connectionLineType:r,connectionLineStyle:n,fromNode:g,fromHandle:h,fromX:f.x,fromY:f.y,toX:y.x,toY:y.y,fromPosition:m,toPosition:v,connectionStatus:Dx(c),toNode:p,toHandle:b,pointer:S});let N="";const z={sourceX:f.x,sourceY:f.y,sourcePosition:m,targetX:y.x,targetY:y.y,targetPosition:v};switch(r){case vn.Bezier:[N]=Zx(z);break;case vn.SimpleBezier:[N]=wy(z);break;case vn.Step:[N]=vd({...z,borderRadius:0});break;case vn.SmoothStep:[N]=vd(z);break;default:[N]=Kx(z)}return s.jsx("path",{d:N,fill:"none",className:"react-flow__connection-path",style:n})};Hy.displayName="ConnectionLine";const KS={};function Bm(n=KS){E.useRef(n),$e(),E.useEffect(()=>{},[n])}function FS(){$e(),E.useRef(!1),E.useEffect(()=>{},[])}function Ly({nodeTypes:n,edgeTypes:r,onInit:i,onNodeClick:c,onEdgeClick:d,onNodeDoubleClick:f,onEdgeDoubleClick:g,onNodeMouseEnter:h,onNodeMouseMove:m,onNodeMouseLeave:y,onNodeContextMenu:p,onSelectionContextMenu:b,onSelectionStart:v,onSelectionEnd:S,connectionLineType:N,connectionLineStyle:z,connectionLineComponent:A,connectionLineContainerStyle:k,selectionKeyCode:M,selectionOnDrag:j,selectionMode:_,multiSelectionKeyCode:L,panActivationKeyCode:q,zoomActivationKeyCode:Y,deleteKeyCode:U,onlyRenderVisibleElements:X,elementsSelectable:re,defaultViewport:$,translateExtent:W,minZoom:B,maxZoom:T,preventScrolling:D,defaultMarkerColor:C,zoomOnScroll:O,zoomOnPinch:H,panOnScroll:Q,panOnScrollSpeed:G,panOnScrollMode:ee,zoomOnDoubleClick:P,panOnDrag:le,onPaneClick:ie,onPaneMouseEnter:fe,onPaneMouseMove:be,onPaneMouseLeave:me,onPaneScroll:oe,onPaneContextMenu:ue,paneClickDistance:Se,nodeClickDistance:je,onEdgeContextMenu:ye,onEdgeMouseEnter:Ne,onEdgeMouseMove:se,onEdgeMouseLeave:pe,reconnectRadius:we,onReconnect:Ye,onReconnectStart:Qt,onReconnectEnd:zt,noDragClassName:$t,noWheelClassName:ma,noPanClassName:Sn,disableKeyboardA11y:kn,nodeExtent:ot,rfId:ts,viewport:xa,onViewportChange:Ya}){return Bm(n),Bm(r),FS(),qS(i),YS(xa),s.jsx(uS,{onPaneClick:ie,onPaneMouseEnter:fe,onPaneMouseMove:be,onPaneMouseLeave:me,onPaneContextMenu:ue,onPaneScroll:oe,paneClickDistance:Se,deleteKeyCode:U,selectionKeyCode:M,selectionOnDrag:j,selectionMode:_,onSelectionStart:v,onSelectionEnd:S,multiSelectionKeyCode:L,panActivationKeyCode:q,zoomActivationKeyCode:Y,elementsSelectable:re,zoomOnScroll:O,zoomOnPinch:H,zoomOnDoubleClick:P,panOnScroll:Q,panOnScrollSpeed:G,panOnScrollMode:ee,panOnDrag:le,defaultViewport:$,translateExtent:W,minZoom:B,maxZoom:T,onSelectionContextMenu:b,preventScrolling:D,noDragClassName:$t,noWheelClassName:ma,noPanClassName:Sn,disableKeyboardA11y:kn,onViewportChange:Ya,isControlledViewport:!!xa,children:s.jsxs(US,{children:[s.jsx(LS,{edgeTypes:r,onEdgeClick:d,onEdgeDoubleClick:g,onReconnect:Ye,onReconnectStart:Qt,onReconnectEnd:zt,onlyRenderVisibleElements:X,onEdgeContextMenu:ye,onEdgeMouseEnter:Ne,onEdgeMouseMove:se,onEdgeMouseLeave:pe,reconnectRadius:we,defaultMarkerColor:C,noPanClassName:Sn,disableKeyboardA11y:kn,rfId:ts}),s.jsx($S,{style:z,type:N,component:A,containerStyle:k}),s.jsx("div",{className:"react-flow__edgelabel-renderer"}),s.jsx(bS,{nodeTypes:n,onNodeClick:c,onNodeDoubleClick:f,onNodeMouseEnter:h,onNodeMouseMove:m,onNodeMouseLeave:y,onNodeContextMenu:p,nodeClickDistance:je,onlyRenderVisibleElements:X,noPanClassName:Sn,noDragClassName:$t,disableKeyboardA11y:kn,nodeExtent:ot,rfId:ts}),s.jsx("div",{className:"react-flow__viewport-portal"})]})})}Ly.displayName="GraphView";const JS=E.memo(Ly),Um=({nodes:n,edges:r,defaultNodes:i,defaultEdges:c,width:d,height:f,fitView:g,fitViewOptions:h,minZoom:m=.5,maxZoom:y=2,nodeOrigin:p,nodeExtent:b,zIndexMode:v="basic"}={})=>{const S=new Map,N=new Map,z=new Map,A=new Map,k=c??r??[],M=i??n??[],j=p??[0,0],_=b??ur;Wx(z,A,k);const L=jd(M,S,N,{nodeOrigin:j,nodeExtent:_,zIndexMode:v});let q=[0,0,1];if(g&&d&&f){const Y=vr(S,{filter:$=>!!(($.width||$.initialWidth)&&($.height||$.initialHeight))}),{x:U,y:X,zoom:re}=Bd(Y,d,f,m,y,h?.padding??.1);q=[U,X,re]}return{rfId:"1",width:d??0,height:f??0,transform:q,nodes:M,nodesInitialized:L,nodeLookup:S,parentLookup:N,edges:k,edgeLookup:A,connectionLookup:z,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:i!==void 0,hasDefaultEdges:c!==void 0,panZoom:null,minZoom:m,maxZoom:y,translateExtent:ur,nodeExtent:_,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Ws.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:j,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:g??!1,fitViewOptions:h,fitViewResolver:null,connection:{...Mx},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:p2,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:_x,zIndexMode:v,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},WS=({nodes:n,edges:r,defaultNodes:i,defaultEdges:c,width:d,height:f,fitView:g,fitViewOptions:h,minZoom:m,maxZoom:y,nodeOrigin:p,nodeExtent:b,zIndexMode:v})=>mw((S,N)=>{async function z(){const{nodeLookup:A,panZoom:k,fitViewOptions:M,fitViewResolver:j,width:_,height:L,minZoom:q,maxZoom:Y}=N();k&&(await x2({nodes:A,width:_,height:L,panZoom:k,minZoom:q,maxZoom:Y},M),j?.resolve(!0),S({fitViewResolver:null}))}return{...Um({nodes:n,edges:r,width:d,height:f,fitView:g,fitViewOptions:h,minZoom:m,maxZoom:y,nodeOrigin:p,nodeExtent:b,defaultNodes:i,defaultEdges:c,zIndexMode:v}),setNodes:A=>{const{nodeLookup:k,parentLookup:M,nodeOrigin:j,elevateNodesOnSelect:_,fitViewQueued:L,zIndexMode:q}=N(),Y=jd(A,k,M,{nodeOrigin:j,nodeExtent:b,elevateNodesOnSelect:_,checkEquality:!0,zIndexMode:q});L&&Y?(z(),S({nodes:A,nodesInitialized:Y,fitViewQueued:!1,fitViewOptions:void 0})):S({nodes:A,nodesInitialized:Y})},setEdges:A=>{const{connectionLookup:k,edgeLookup:M}=N();Wx(k,M,A),S({edges:A})},setDefaultNodesAndEdges:(A,k)=>{if(A){const{setNodes:M}=N();M(A),S({hasDefaultNodes:!0})}if(k){const{setEdges:M}=N();M(k),S({hasDefaultEdges:!0})}},updateNodeInternals:A=>{const{triggerNodeChanges:k,nodeLookup:M,parentLookup:j,domNode:_,nodeOrigin:L,nodeExtent:q,debug:Y,fitViewQueued:U,zIndexMode:X}=N(),{changes:re,updatedInternals:$}=U2(A,M,j,_,L,q,X);$&&(R2(M,j,{nodeOrigin:L,nodeExtent:q,zIndexMode:X}),U?(z(),S({fitViewQueued:!1,fitViewOptions:void 0})):S({}),re?.length>0&&(Y&&console.log("React Flow: trigger node changes",re),k?.(re)))},updateNodePositions:(A,k=!1)=>{const M=[];let j=[];const{nodeLookup:_,triggerNodeChanges:L,connection:q,updateConnection:Y,onNodesChangeMiddlewareMap:U}=N();for(const[X,re]of A){const $=_.get(X),W=!!($?.expandParent&&$?.parentId&&re?.position),B={id:X,type:"position",position:W?{x:Math.max(0,re.position.x),y:Math.max(0,re.position.y)}:re.position,dragging:k};if($&&q.inProgress&&q.fromNode.id===$.id){const T=Pn($,q.fromHandle,he.Left,!0);Y({...q,from:T})}W&&$.parentId&&M.push({id:X,parentId:$.parentId,rect:{...re.internals.positionAbsolute,width:re.measured.width??0,height:re.measured.height??0}}),j.push(B)}if(M.length>0){const{parentLookup:X,nodeOrigin:re}=N(),$=Xd(M,_,X,re);j.push(...$)}for(const X of U.values())j=X(j);L(j)},triggerNodeChanges:A=>{const{onNodesChange:k,setNodes:M,nodes:j,hasDefaultNodes:_,debug:L}=N();if(A?.length){if(_){const q=fy(A,j);M(q)}L&&console.log("React Flow: trigger node changes",A),k?.(A)}},triggerEdgeChanges:A=>{const{onEdgesChange:k,setEdges:M,edges:j,hasDefaultEdges:_,debug:L}=N();if(A?.length){if(_){const q=gy(A,j);M(q)}L&&console.log("React Flow: trigger edge changes",A),k?.(A)}},addSelectedNodes:A=>{const{multiSelectionActive:k,edgeLookup:M,nodeLookup:j,triggerNodeChanges:_,triggerEdgeChanges:L}=N();if(k){const q=A.map(Y=>Fn(Y,!0));_(q);return}_(Zs(j,new Set([...A]),!0)),L(Zs(M))},addSelectedEdges:A=>{const{multiSelectionActive:k,edgeLookup:M,nodeLookup:j,triggerNodeChanges:_,triggerEdgeChanges:L}=N();if(k){const q=A.map(Y=>Fn(Y,!0));L(q);return}L(Zs(M,new Set([...A]))),_(Zs(j,new Set,!0))},unselectNodesAndEdges:({nodes:A,edges:k}={})=>{const{edges:M,nodes:j,nodeLookup:_,triggerNodeChanges:L,triggerEdgeChanges:q}=N(),Y=A||j,U=k||M,X=Y.map($=>{const W=_.get($.id);return W&&(W.selected=!1),Fn($.id,!1)}),re=U.map($=>Fn($.id,!1));L(X),q(re)},setMinZoom:A=>{const{panZoom:k,maxZoom:M}=N();k?.setScaleExtent([A,M]),S({minZoom:A})},setMaxZoom:A=>{const{panZoom:k,minZoom:M}=N();k?.setScaleExtent([M,A]),S({maxZoom:A})},setTranslateExtent:A=>{N().panZoom?.setTranslateExtent(A),S({translateExtent:A})},resetSelectedElements:()=>{const{edges:A,nodes:k,triggerNodeChanges:M,triggerEdgeChanges:j,elementsSelectable:_}=N();if(!_)return;const L=k.reduce((Y,U)=>U.selected?[...Y,Fn(U.id,!1)]:Y,[]),q=A.reduce((Y,U)=>U.selected?[...Y,Fn(U.id,!1)]:Y,[]);M(L),j(q)},setNodeExtent:A=>{const{nodes:k,nodeLookup:M,parentLookup:j,nodeOrigin:_,elevateNodesOnSelect:L,nodeExtent:q,zIndexMode:Y}=N();A[0][0]===q[0][0]&&A[0][1]===q[0][1]&&A[1][0]===q[1][0]&&A[1][1]===q[1][1]||(jd(k,M,j,{nodeOrigin:_,nodeExtent:A,elevateNodesOnSelect:L,checkEquality:!1,zIndexMode:Y}),S({nodeExtent:A}))},panBy:A=>{const{transform:k,width:M,height:j,panZoom:_,translateExtent:L}=N();return q2({delta:A,panZoom:_,transform:k,translateExtent:L,width:M,height:j})},setCenter:async(A,k,M)=>{const{width:j,height:_,maxZoom:L,panZoom:q}=N();if(!q)return Promise.resolve(!1);const Y=typeof M?.zoom<"u"?M.zoom:L;return await q.setViewport({x:j/2-A*Y,y:_/2-k*Y,zoom:Y},{duration:M?.duration,ease:M?.ease,interpolate:M?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{S({connection:{...Mx}})},updateConnection:A=>{S({connection:A})},reset:()=>S({...Um()})}},Object.is);function IS({initialNodes:n,initialEdges:r,defaultNodes:i,defaultEdges:c,initialWidth:d,initialHeight:f,initialMinZoom:g,initialMaxZoom:h,initialFitViewOptions:m,fitView:y,nodeOrigin:p,nodeExtent:b,zIndexMode:v,children:S}){const[N]=E.useState(()=>WS({nodes:n,edges:r,defaultNodes:i,defaultEdges:c,width:d,height:f,fitView:y,minZoom:g,maxZoom:h,fitViewOptions:m,nodeOrigin:p,nodeExtent:b,zIndexMode:v}));return s.jsx(xw,{value:N,children:s.jsx(Uw,{children:S})})}function PS({children:n,nodes:r,edges:i,defaultNodes:c,defaultEdges:d,width:f,height:g,fitView:h,fitViewOptions:m,minZoom:y,maxZoom:p,nodeOrigin:b,nodeExtent:v,zIndexMode:S}){return E.useContext(zo)?s.jsx(s.Fragment,{children:n}):s.jsx(IS,{initialNodes:r,initialEdges:i,defaultNodes:c,defaultEdges:d,initialWidth:f,initialHeight:g,fitView:h,initialFitViewOptions:m,initialMinZoom:y,initialMaxZoom:p,nodeOrigin:b,nodeExtent:v,zIndexMode:S,children:n})}const ek={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function tk({nodes:n,edges:r,defaultNodes:i,defaultEdges:c,className:d,nodeTypes:f,edgeTypes:g,onNodeClick:h,onEdgeClick:m,onInit:y,onMove:p,onMoveStart:b,onMoveEnd:v,onConnect:S,onConnectStart:N,onConnectEnd:z,onClickConnectStart:A,onClickConnectEnd:k,onNodeMouseEnter:M,onNodeMouseMove:j,onNodeMouseLeave:_,onNodeContextMenu:L,onNodeDoubleClick:q,onNodeDragStart:Y,onNodeDrag:U,onNodeDragStop:X,onNodesDelete:re,onEdgesDelete:$,onDelete:W,onSelectionChange:B,onSelectionDragStart:T,onSelectionDrag:D,onSelectionDragStop:C,onSelectionContextMenu:O,onSelectionStart:H,onSelectionEnd:Q,onBeforeDelete:G,connectionMode:ee,connectionLineType:P=vn.Bezier,connectionLineStyle:le,connectionLineComponent:ie,connectionLineContainerStyle:fe,deleteKeyCode:be="Backspace",selectionKeyCode:me="Shift",selectionOnDrag:oe=!1,selectionMode:ue=dr.Full,panActivationKeyCode:Se="Space",multiSelectionKeyCode:je=gr()?"Meta":"Control",zoomActivationKeyCode:ye=gr()?"Meta":"Control",snapToGrid:Ne,snapGrid:se,onlyRenderVisibleElements:pe=!1,selectNodesOnDrag:we,nodesDraggable:Ye,autoPanOnNodeFocus:Qt,nodesConnectable:zt,nodesFocusable:$t,nodeOrigin:ma=uy,edgesFocusable:Sn,edgesReconnectable:kn,elementsSelectable:ot=!0,defaultViewport:ts=Aw,minZoom:xa=.5,maxZoom:Ya=2,translateExtent:Cn=ur,preventScrolling:Do=!0,nodeExtent:as,defaultMarkerColor:Oo="#b1b1b7",zoomOnScroll:Ro=!0,zoomOnPinch:zn=!0,panOnScroll:ht=!1,panOnScrollSpeed:sa=.5,panOnScrollMode:mt=Jn.Free,zoomOnDoubleClick:Ho=!0,panOnDrag:Lo=!0,onPaneClick:Bo,onPaneMouseEnter:ns,onPaneMouseMove:ss,onPaneMouseLeave:ls,onPaneScroll:ya,onPaneContextMenu:rs,paneClickDistance:En=1,nodeClickDistance:Uo=0,children:wr,onReconnect:nl,onReconnectStart:An,onReconnectEnd:qo,onEdgeContextMenu:Sr,onEdgeDoubleClick:kr,onEdgeMouseEnter:Cr,onEdgeMouseMove:sl,onEdgeMouseLeave:ll,reconnectRadius:zr=10,onNodesChange:Er,onEdgesChange:la,noDragClassName:st="nodrag",noWheelClassName:gt="nowheel",noPanClassName:pa="nopan",fitView:is,fitViewOptions:Ar,connectOnClick:Vo,attributionPosition:Tr,proOptions:Tn,defaultEdgeOptions:rl,elevateNodesOnSelect:Ga=!0,elevateEdgesOnSelect:Xa=!1,disableKeyboardA11y:Za=!1,autoPanOnConnect:Qa,autoPanOnNodeDrag:Ie,autoPanSpeed:_r,connectionRadius:Mr,isValidConnection:ba,onError:$a,style:Yo,id:il,nodeDragThreshold:Dr,connectionDragThreshold:Go,viewport:os,onViewportChange:cs,width:Kt,height:bt,colorMode:Or="light",debug:Xo,onScroll:us,ariaLabelConfig:Rr,zIndexMode:_n="basic",...Zo},vt){const Mn=il||"1",Hr=Dw(Or),ol=E.useCallback(va=>{va.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),us?.(va)},[us]);return s.jsx("div",{"data-testid":"rf__wrapper",...Zo,onScroll:ol,style:{...Yo,...ek},ref:vt,className:nt(["react-flow",d,Hr]),id:il,role:"application",children:s.jsxs(PS,{nodes:n,edges:r,width:Kt,height:bt,fitView:is,fitViewOptions:Ar,minZoom:xa,maxZoom:Ya,nodeOrigin:ma,nodeExtent:as,zIndexMode:_n,children:[s.jsx(JS,{onInit:y,onNodeClick:h,onEdgeClick:m,onNodeMouseEnter:M,onNodeMouseMove:j,onNodeMouseLeave:_,onNodeContextMenu:L,onNodeDoubleClick:q,nodeTypes:f,edgeTypes:g,connectionLineType:P,connectionLineStyle:le,connectionLineComponent:ie,connectionLineContainerStyle:fe,selectionKeyCode:me,selectionOnDrag:oe,selectionMode:ue,deleteKeyCode:be,multiSelectionKeyCode:je,panActivationKeyCode:Se,zoomActivationKeyCode:ye,onlyRenderVisibleElements:pe,defaultViewport:ts,translateExtent:Cn,minZoom:xa,maxZoom:Ya,preventScrolling:Do,zoomOnScroll:Ro,zoomOnPinch:zn,zoomOnDoubleClick:Ho,panOnScroll:ht,panOnScrollSpeed:sa,panOnScrollMode:mt,panOnDrag:Lo,onPaneClick:Bo,onPaneMouseEnter:ns,onPaneMouseMove:ss,onPaneMouseLeave:ls,onPaneScroll:ya,onPaneContextMenu:rs,paneClickDistance:En,nodeClickDistance:Uo,onSelectionContextMenu:O,onSelectionStart:H,onSelectionEnd:Q,onReconnect:nl,onReconnectStart:An,onReconnectEnd:qo,onEdgeContextMenu:Sr,onEdgeDoubleClick:kr,onEdgeMouseEnter:Cr,onEdgeMouseMove:sl,onEdgeMouseLeave:ll,reconnectRadius:zr,defaultMarkerColor:Oo,noDragClassName:st,noWheelClassName:gt,noPanClassName:pa,rfId:Mn,disableKeyboardA11y:Za,nodeExtent:as,viewport:os,onViewportChange:cs}),s.jsx(Mw,{nodes:n,edges:r,defaultNodes:i,defaultEdges:c,onConnect:S,onConnectStart:N,onConnectEnd:z,onClickConnectStart:A,onClickConnectEnd:k,nodesDraggable:Ye,autoPanOnNodeFocus:Qt,nodesConnectable:zt,nodesFocusable:$t,edgesFocusable:Sn,edgesReconnectable:kn,elementsSelectable:ot,elevateNodesOnSelect:Ga,elevateEdgesOnSelect:Xa,minZoom:xa,maxZoom:Ya,nodeExtent:as,onNodesChange:Er,onEdgesChange:la,snapToGrid:Ne,snapGrid:se,connectionMode:ee,translateExtent:Cn,connectOnClick:Vo,defaultEdgeOptions:rl,fitView:is,fitViewOptions:Ar,onNodesDelete:re,onEdgesDelete:$,onDelete:W,onNodeDragStart:Y,onNodeDrag:U,onNodeDragStop:X,onSelectionDrag:D,onSelectionDragStart:T,onSelectionDragStop:C,onMove:p,onMoveStart:b,onMoveEnd:v,noPanClassName:pa,nodeOrigin:ma,rfId:Mn,autoPanOnConnect:Qa,autoPanOnNodeDrag:Ie,autoPanSpeed:_r,onError:$a,connectionRadius:Mr,isValidConnection:ba,selectNodesOnDrag:we,nodeDragThreshold:Dr,connectionDragThreshold:Go,onBeforeDelete:G,debug:Xo,ariaLabelConfig:Rr,zIndexMode:_n}),s.jsx(Ew,{onSelectionChange:B}),wr,s.jsx(ww,{proOptions:Tn,position:Tr}),s.jsx(jw,{rfId:Mn,disableKeyboardA11y:Za})]})})}var ak=hy(tk);function nk(n){const[r,i]=E.useState(n),c=E.useCallback(d=>i(f=>fy(d,f)),[]);return[r,i,c]}function sk(n){const[r,i]=E.useState(n),c=E.useCallback(d=>i(f=>gy(d,f)),[]);return[r,i,c]}function lk({dimensions:n,lineWidth:r,variant:i,className:c}){return s.jsx("path",{strokeWidth:r,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`,className:nt(["react-flow__background-pattern",i,c])})}function rk({radius:n,className:r}){return s.jsx("circle",{cx:n,cy:n,r:n,className:nt(["react-flow__background-pattern","dots",r])})}var Nn;(function(n){n.Lines="lines",n.Dots="dots",n.Cross="cross"})(Nn||(Nn={}));const ik={[Nn.Dots]:1,[Nn.Lines]:1,[Nn.Cross]:6},ok=n=>({transform:n.transform,patternId:`pattern-${n.rfId}`});function By({id:n,variant:r=Nn.Dots,gap:i=20,size:c,lineWidth:d=1,offset:f=0,color:g,bgColor:h,style:m,className:y,patternClassName:p}){const b=E.useRef(null),{transform:v,patternId:S}=Me(ok,Qe),N=c||ik[r],z=r===Nn.Dots,A=r===Nn.Cross,k=Array.isArray(i)?i:[i,i],M=[k[0]*v[2]||1,k[1]*v[2]||1],j=N*v[2],_=Array.isArray(f)?f:[f,f],L=A?[j,j]:M,q=[_[0]*v[2]||1+L[0]/2,_[1]*v[2]||1+L[1]/2],Y=`${S}${n||""}`;return s.jsxs("svg",{className:nt(["react-flow__background",y]),style:{...m,...To,"--xy-background-color-props":h,"--xy-background-pattern-color-props":g},ref:b,"data-testid":"rf__background",children:[s.jsx("pattern",{id:Y,x:v[0]%M[0],y:v[1]%M[1],width:M[0],height:M[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${q[0]},-${q[1]})`,children:z?s.jsx(rk,{radius:j/2,className:p}):s.jsx(lk,{dimensions:L,lineWidth:d,variant:r,className:p})}),s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${Y})`})]})}By.displayName="Background";const ck=E.memo(By);function uk(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:s.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function dk(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:s.jsx("path",{d:"M0 0h32v4.2H0z"})})}function fk(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:s.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function gk(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:s.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function hk(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:s.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Ii({children:n,className:r,...i}){return s.jsx("button",{type:"button",className:nt(["react-flow__controls-button",r]),...i,children:n})}const mk=n=>({isInteractive:n.nodesDraggable||n.nodesConnectable||n.elementsSelectable,minZoomReached:n.transform[2]<=n.minZoom,maxZoomReached:n.transform[2]>=n.maxZoom,ariaLabelConfig:n.ariaLabelConfig});function Uy({style:n,showZoom:r=!0,showFitView:i=!0,showInteractive:c=!0,fitViewOptions:d,onZoomIn:f,onZoomOut:g,onFitView:h,onInteractiveChange:m,className:y,children:p,position:b="bottom-left",orientation:v="vertical","aria-label":S}){const N=$e(),{isInteractive:z,minZoomReached:A,maxZoomReached:k,ariaLabelConfig:M}=Me(mk,Qe),{zoomIn:j,zoomOut:_,fitView:L}=Ao(),q=()=>{j(),f?.()},Y=()=>{_(),g?.()},U=()=>{L(d),h?.()},X=()=>{N.setState({nodesDraggable:!z,nodesConnectable:!z,elementsSelectable:!z}),m?.(!z)},re=v==="horizontal"?"horizontal":"vertical";return s.jsxs(Eo,{className:nt(["react-flow__controls",re,y]),position:b,style:n,"data-testid":"rf__controls","aria-label":S??M["controls.ariaLabel"],children:[r&&s.jsxs(s.Fragment,{children:[s.jsx(Ii,{onClick:q,className:"react-flow__controls-zoomin",title:M["controls.zoomIn.ariaLabel"],"aria-label":M["controls.zoomIn.ariaLabel"],disabled:k,children:s.jsx(uk,{})}),s.jsx(Ii,{onClick:Y,className:"react-flow__controls-zoomout",title:M["controls.zoomOut.ariaLabel"],"aria-label":M["controls.zoomOut.ariaLabel"],disabled:A,children:s.jsx(dk,{})})]}),i&&s.jsx(Ii,{className:"react-flow__controls-fitview",onClick:U,title:M["controls.fitView.ariaLabel"],"aria-label":M["controls.fitView.ariaLabel"],children:s.jsx(fk,{})}),c&&s.jsx(Ii,{className:"react-flow__controls-interactive",onClick:X,title:M["controls.interactive.ariaLabel"],"aria-label":M["controls.interactive.ariaLabel"],children:z?s.jsx(hk,{}):s.jsx(gk,{})}),p]})}Uy.displayName="Controls";const xk=E.memo(Uy);function yk({id:n,x:r,y:i,width:c,height:d,style:f,color:g,strokeColor:h,strokeWidth:m,className:y,borderRadius:p,shapeRendering:b,selected:v,onClick:S}){const{background:N,backgroundColor:z}=f||{},A=g||N||z;return s.jsx("rect",{className:nt(["react-flow__minimap-node",{selected:v},y]),x:r,y:i,rx:p,ry:p,width:c,height:d,style:{fill:A,stroke:h,strokeWidth:m},shapeRendering:b,onClick:S?k=>S(k,n):void 0})}const pk=E.memo(yk),bk=n=>n.nodes.map(r=>r.id),ud=n=>n instanceof Function?n:()=>n;function vk({nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:c=5,nodeStrokeWidth:d,nodeComponent:f=pk,onClick:g}){const h=Me(bk,Qe),m=ud(r),y=ud(n),p=ud(i),b=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return s.jsx(s.Fragment,{children:h.map(v=>s.jsx(jk,{id:v,nodeColorFunc:m,nodeStrokeColorFunc:y,nodeClassNameFunc:p,nodeBorderRadius:c,nodeStrokeWidth:d,NodeComponent:f,onClick:g,shapeRendering:b},v))})}function Nk({id:n,nodeColorFunc:r,nodeStrokeColorFunc:i,nodeClassNameFunc:c,nodeBorderRadius:d,nodeStrokeWidth:f,shapeRendering:g,NodeComponent:h,onClick:m}){const{node:y,x:p,y:b,width:v,height:S}=Me(N=>{const{internals:z}=N.nodeLookup.get(n),A=z.userNode,{x:k,y:M}=z.positionAbsolute,{width:j,height:_}=Va(A);return{node:A,x:k,y:M,width:j,height:_}},Qe);return!y||y.hidden||!Ux(y)?null:s.jsx(h,{x:p,y:b,width:v,height:S,style:y.style,selected:!!y.selected,className:c(y),color:r(y),borderRadius:d,strokeColor:i(y),strokeWidth:f,shapeRendering:g,onClick:m,id:y.id})}const jk=E.memo(Nk);var wk=E.memo(vk);const Sk=200,kk=150,Ck=n=>!n.hidden,zk=n=>{const r={x:-n.transform[0]/n.transform[2],y:-n.transform[1]/n.transform[2],width:n.width/n.transform[2],height:n.height/n.transform[2]};return{viewBB:r,boundingRect:n.nodeLookup.size>0?Bx(vr(n.nodeLookup,{filter:Ck}),r):r,rfId:n.rfId,panZoom:n.panZoom,translateExtent:n.translateExtent,flowWidth:n.width,flowHeight:n.height,ariaLabelConfig:n.ariaLabelConfig}},Ek="react-flow__minimap-desc";function qy({style:n,className:r,nodeStrokeColor:i,nodeColor:c,nodeClassName:d="",nodeBorderRadius:f=5,nodeStrokeWidth:g,nodeComponent:h,bgColor:m,maskColor:y,maskStrokeColor:p,maskStrokeWidth:b,position:v="bottom-right",onClick:S,onNodeClick:N,pannable:z=!1,zoomable:A=!1,ariaLabel:k,inversePan:M,zoomStep:j=1,offsetScale:_=5}){const L=$e(),q=E.useRef(null),{boundingRect:Y,viewBB:U,rfId:X,panZoom:re,translateExtent:$,flowWidth:W,flowHeight:B,ariaLabelConfig:T}=Me(zk,Qe),D=n?.width??Sk,C=n?.height??kk,O=Y.width/D,H=Y.height/C,Q=Math.max(O,H),G=Q*D,ee=Q*C,P=_*Q,le=Y.x-(G-Y.width)/2-P,ie=Y.y-(ee-Y.height)/2-P,fe=G+P*2,be=ee+P*2,me=`${Ek}-${X}`,oe=E.useRef(0),ue=E.useRef();oe.current=Q,E.useEffect(()=>{if(q.current&&re)return ue.current=F2({domNode:q.current,panZoom:re,getTransform:()=>L.getState().transform,getViewScale:()=>oe.current}),()=>{ue.current?.destroy()}},[re]),E.useEffect(()=>{ue.current?.update({translateExtent:$,width:W,height:B,inversePan:M,pannable:z,zoomStep:j,zoomable:A})},[z,A,M,j,$,W,B]);const Se=S?Ne=>{const[se,pe]=ue.current?.pointer(Ne)||[0,0];S(Ne,{x:se,y:pe})}:void 0,je=N?E.useCallback((Ne,se)=>{const pe=L.getState().nodeLookup.get(se).internals.userNode;N(Ne,pe)},[]):void 0,ye=k??T["minimap.ariaLabel"];return s.jsx(Eo,{position:v,style:{...n,"--xy-minimap-background-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-background-color-props":typeof y=="string"?y:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof b=="number"?b*Q:void 0,"--xy-minimap-node-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-node-stroke-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-width-props":typeof g=="number"?g:void 0},className:nt(["react-flow__minimap",r]),"data-testid":"rf__minimap",children:s.jsxs("svg",{width:D,height:C,viewBox:`${le} ${ie} ${fe} ${be}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":me,ref:q,onClick:Se,children:[ye&&s.jsx("title",{id:me,children:ye}),s.jsx(wk,{onClick:je,nodeColor:c,nodeStrokeColor:i,nodeBorderRadius:f,nodeClassName:d,nodeStrokeWidth:g,nodeComponent:h}),s.jsx("path",{className:"react-flow__minimap-mask",d:`M${le-P},${ie-P}h${fe+P*2}v${be+P*2}h${-fe-P*2}z
        M${U.x},${U.y}h${U.width}v${U.height}h${-U.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}qy.displayName="MiniMap";const Ak=E.memo(qy),Tk=n=>r=>n?`${Math.max(1/r.transform[2],1)}`:void 0,_k={[tl.Line]:"right",[tl.Handle]:"bottom-right"};function Mk({nodeId:n,position:r,variant:i=tl.Handle,className:c,style:d=void 0,children:f,color:g,minWidth:h=10,minHeight:m=10,maxWidth:y=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:b=!1,resizeDirection:v,autoScale:S=!0,shouldResize:N,onResizeStart:z,onResize:A,onResizeEnd:k}){const M=py(),j=typeof n=="string"?n:M,_=$e(),L=E.useRef(null),q=i===tl.Handle,Y=Me(E.useCallback(Tk(q&&S),[q,S]),Qe),U=E.useRef(null),X=r??_k[i];E.useEffect(()=>{if(!(!L.current||!j))return U.current||(U.current=cw({domNode:L.current,nodeId:j,getStoreItems:()=>{const{nodeLookup:$,transform:W,snapGrid:B,snapToGrid:T,nodeOrigin:D,domNode:C}=_.getState();return{nodeLookup:$,transform:W,snapGrid:B,snapToGrid:T,nodeOrigin:D,paneDomNode:C}},onChange:($,W)=>{const{triggerNodeChanges:B,nodeLookup:T,parentLookup:D,nodeOrigin:C}=_.getState(),O=[],H={x:$.x,y:$.y},Q=T.get(j);if(Q&&Q.expandParent&&Q.parentId){const G=Q.origin??C,ee=$.width??Q.measured.width??0,P=$.height??Q.measured.height??0,le={id:Q.id,parentId:Q.parentId,rect:{width:ee,height:P,...qx({x:$.x??Q.position.x,y:$.y??Q.position.y},{width:ee,height:P},Q.parentId,T,G)}},ie=Xd([le],T,D,C);O.push(...ie),H.x=$.x?Math.max(G[0]*ee,$.x):void 0,H.y=$.y?Math.max(G[1]*P,$.y):void 0}if(H.x!==void 0&&H.y!==void 0){const G={id:j,type:"position",position:{...H}};O.push(G)}if($.width!==void 0&&$.height!==void 0){const ee={id:j,type:"dimensions",resizing:!0,setAttributes:v?v==="horizontal"?"width":"height":!0,dimensions:{width:$.width,height:$.height}};O.push(ee)}for(const G of W){const ee={...G,type:"position"};O.push(ee)}B(O)},onEnd:({width:$,height:W})=>{const B={id:j,type:"dimensions",resizing:!1,dimensions:{width:$,height:W}};_.getState().triggerNodeChanges([B])}})),U.current.update({controlPosition:X,boundaries:{minWidth:h,minHeight:m,maxWidth:y,maxHeight:p},keepAspectRatio:b,resizeDirection:v,onResizeStart:z,onResize:A,onResizeEnd:k,shouldResize:N}),()=>{U.current?.destroy()}},[X,h,m,y,p,b,z,A,k,N]);const re=X.split("-");return s.jsx("div",{className:nt(["react-flow__resize-control","nodrag",...re,i,c]),ref:L,style:{...d,scale:Y,...g&&{[q?"backgroundColor":"borderColor"]:g}},children:f})}E.memo(Mk);function Dk({data:n}){const i={NEW_CONVERSATION:"New conversation",KEYWORDS:"Text contains specific keywords",HAS_TAGS:"Contact has specific tags",PIPELINE_UPDATE:"Contact has been affected to a pipeline",SHORT_RESPONSE:"Advanced Short response"}[n.triggerType]||"Select option";return s.jsxs("div",{className:"min-w-[280px] bg-white dark:bg-[#0F0F0F] rounded-lg shadow-md border border-gray-200 dark:border-[#262626] font-sans transition-colors duration-200",children:[s.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-[#262626]",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"bg-indigo-600 rounded p-1",children:s.jsx(Qs,{size:14,className:"text-white",fill:"white"})}),s.jsx("span",{className:"text-gray-700 dark:text-neutral-200 font-semibold text-sm",children:"Trigger"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-neutral-400 leading-snug",children:"Define the input parameters to trigger the workflow, to ensure that accurate information is captured in the conversation flow."})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-700 dark:text-neutral-300 mb-2",children:"Starting Step"}),s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"w-full bg-gray-50 dark:bg-[#1A1A1A] text-gray-700 dark:text-neutral-200 text-sm px-3 py-2.5 rounded border border-gray-200 dark:border-[#404040] flex items-center justify-between",children:[s.jsx("span",{className:"truncate",children:i}),s.jsx(xr,{size:16,className:"text-gray-400"})]})}),n.triggerType==="KEYWORDS"&&n.keyword&&s.jsxs("div",{className:"mt-2 text-xs text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-1 rounded border border-indigo-100 dark:border-indigo-800",children:['Contains: "',n.keyword,'"']})]}),s.jsx(fa,{type:"source",position:he.Right,className:"!bg-emerald-400 !w-4 !h-4 !border-4 !border-white dark:!border-[#0F0F0F] !-right-2"})]})}const Ok={text:al,media:sr,buttons:Im,list:kd,template:mr,addGroup:da,removeGroup:Ed,addTag:yo,removeTag:Wm,addPipeline:Jm,removePipeline:aa,delay:lr},qm=(n,r,i=!1)=>{const c=n.selectionStart,d=n.selectionEnd,f=n.value,g=f.substring(0,c),h=f.substring(d),m=f.substring(c,d);let y,p;i?(y=g+r+m+r+h,p=c+r.length+m.length+r.length):(y=g+r+h,p=c+r.length),Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value").set.call(n,y),n.dispatchEvent(new Event("input",{bubbles:!0})),n.focus(),n.setSelectionRange(p,p)},Rk=({label:n,icon:r,actions:i})=>{const[c,d]=E.useState(!1),[f,g]=E.useState(!1),[h,m]=E.useState(n),y=E.useRef(null),p=E.useRef(null);E.useEffect(()=>{const S=N=>{y.current&&!y.current.contains(N.target)&&d(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]),E.useEffect(()=>{f&&p.current&&(p.current.focus(),p.current.select())},[f]);const b=()=>{h.trim()?i.onRename(h):m(n),g(!1)},v=S=>{S.key==="Enter"&&b(),S.key==="Escape"&&(m(n),g(!1))};return s.jsxs("div",{className:"flex items-center justify-between mb-3 h-8",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold text-gray-800 dark:text-gray-100 flex-1 min-w-0",children:[r&&s.jsx(r,{size:18,className:"text-gray-500 dark:text-gray-400 flex-shrink-0"}),f?s.jsx("input",{ref:p,type:"text",className:"nodrag w-full bg-white dark:bg-[#1A1A1A] border border-indigo-500 rounded px-1 py-0.5 text-sm outline-none text-gray-800 dark:text-gray-100",value:h,onChange:S=>m(S.target.value),onBlur:b,onKeyDown:v,onClick:S=>S.stopPropagation()}):s.jsx("span",{className:"truncate cursor-text",onDoubleClick:()=>g(!0),title:"Double click to rename",children:n})]}),s.jsxs("div",{className:"relative flex-shrink-0 ml-2",ref:y,children:[s.jsx("button",{onClick:S=>{S.stopPropagation(),d(!c)},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:s.jsx(Km,{size:16,className:"text-gray-400 dark:text-gray-500"})}),c&&s.jsxs("div",{className:"absolute right-0 top-full mt-1 w-40 bg-white dark:bg-[#1A1A1A] rounded-lg shadow-xl border border-gray-100 dark:border-[#333] z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-100",children:[s.jsxs("button",{onClick:S=>{S.stopPropagation(),m(n),g(!0),d(!1)},className:"w-full text-left px-3 py-2 text-xs text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#252525] flex items-center gap-2 transition-colors",children:[s.jsx(yr,{size:14})," Rename"]}),s.jsxs("button",{onClick:S=>{S.stopPropagation(),i.onDuplicate(),d(!1)},className:"w-full text-left px-3 py-2 text-xs text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#252525] flex items-center gap-2 transition-colors",children:[s.jsx(zd,{size:14})," Duplicate"]}),s.jsx("div",{className:"h-px bg-gray-100 dark:bg-[#333] my-1"}),s.jsxs("button",{onClick:S=>{S.stopPropagation(),i.onDelete(),d(!1)},className:"w-full text-left px-3 py-2 text-xs text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 flex items-center gap-2 transition-colors",children:[s.jsx(aa,{size:14})," Delete"]})]})]})]})},Mo=({message:n="Please fill all the required fields"})=>s.jsxs("div",{className:"bg-red-600 text-white px-3 py-2 rounded-lg flex items-center gap-2 text-xs font-medium mb-3 shadow-sm",children:[s.jsx(wn,{size:14,className:"flex-shrink-0"}),s.jsx("span",{children:n})]}),Vy=({inputRef:n})=>{const r=(c,d=!0)=>n.current&&qm(n.current,c,d),i=()=>n.current&&qm(n.current,"{{variable}}",!1);return s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>r("*"),className:"p-1.5 text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 dark:text-indigo-400 rounded hover:bg-indigo-100 dark:hover:bg-indigo-900/40",children:s.jsx(Cv,{size:14})}),s.jsx("button",{onClick:()=>r("_"),className:"p-1.5 text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 dark:text-indigo-400 rounded hover:bg-indigo-100 dark:hover:bg-indigo-900/40",children:s.jsx(zv,{size:14})}),s.jsx("button",{onClick:()=>r("~"),className:"p-1.5 text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 dark:text-indigo-400 rounded hover:bg-indigo-100 dark:hover:bg-indigo-900/40",children:s.jsx(Ev,{size:14})})]}),s.jsx("div",{className:"flex-1"}),s.jsx("button",{onClick:i,className:"text-xs font-semibold text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/20 px-3 py-1.5 rounded-full hover:bg-indigo-100 dark:hover:bg-indigo-900/40",children:"Add Variable"})]})},rt=({children:n,required:r})=>s.jsxs("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1",children:[r&&s.jsx("span",{className:"text-red-500 mr-1",children:"*"}),n]}),Zt=n=>s.jsx("input",{...n,className:`nodrag w-full border border-gray-200 dark:border-[#333] bg-white dark:bg-[#0A0A0A] dark:text-gray-100 rounded-lg p-2.5 text-sm focus:ring-2 focus:ring-indigo-500 outline-none ${n.className}`}),Qd=n=>s.jsx("textarea",{...n,className:`nodrag w-full border border-gray-200 dark:border-[#333] bg-white dark:bg-[#0A0A0A] dark:text-gray-100 rounded-lg p-3 text-sm focus:ring-2 focus:ring-indigo-500 resize-none ${n.className}`}),Hk=({data:n,onChange:r})=>{const i=n.content?.length>0,c=E.useRef(null);return s.jsxs("div",{children:[!i&&s.jsx(Mo,{}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 font-medium",children:[s.jsx("span",{className:"text-red-500",children:"*"})," Respond with a simple text message."]}),s.jsx("div",{className:"relative",children:s.jsx(Qd,{ref:c,placeholder:"Enter text",minRows:3,value:n.content||"",onChange:d=>r("content",d.target.value)})}),s.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 mb-3",children:["Characters: ",(n.content||"").length,"/1098"]}),s.jsx(Vy,{inputRef:c})]})},Lk=({data:n,onChange:r})=>{const[i,c]=E.useState(n.buttonType||"reply"),d=n.body?.length>0&&(i==="reply"?n.buttons?.length>0:n.cta?.url),f=E.useRef(null);E.useEffect(()=>{n.buttons||r("buttons",[])},[]);const g=()=>{(n.buttons||[]).length<3&&r("buttons",[...n.buttons||[],{id:Date.now(),label:""}])},h=(y,p)=>{const b=[...n.buttons||[]];b[y].label=p,r("buttons",b)},m=y=>{const p=[...n.buttons||[]];p.splice(y,1),r("buttons",p)};return s.jsxs("div",{className:"space-y-4",children:[!d&&s.jsx(Mo,{}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Send interactive buttons or a call to action button."}),s.jsxs("div",{children:[s.jsx(rt,{children:"Header (Optional)"}),s.jsxs("select",{className:"nodrag w-full border border-gray-200 dark:border-[#333] bg-white dark:bg-[#0A0A0A] dark:text-gray-100 rounded-lg p-2 text-sm mb-2",value:n.headerType||"None",onChange:y=>r("headerType",y.target.value),children:[s.jsx("option",{value:"None",children:"None"}),s.jsx("option",{value:"Text",children:"Text"}),s.jsx("option",{value:"Image",children:"Image"})]}),n.headerType==="Text"&&s.jsx(Zt,{placeholder:"Enter header text",value:n.headerText||"",onChange:y=>r("headerText",y.target.value)})]}),s.jsxs("div",{children:[s.jsx(rt,{required:!0,children:"Body"}),s.jsx(Qd,{ref:f,placeholder:"Enter the main message",value:n.body||"",onChange:y=>r("body",y.target.value)}),s.jsx(Vy,{inputRef:f})]}),s.jsxs("div",{children:[s.jsx(rt,{children:"Footer Text (Optional)"}),s.jsx(Zt,{placeholder:"Enter footer text",value:n.footer||"",onChange:y=>r("footer",y.target.value)})]}),s.jsxs("div",{children:[s.jsx(rt,{children:"Button type:"}),s.jsxs("div",{className:"flex gap-4 mt-2",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("input",{type:"radio",checked:i==="reply",onChange:()=>{c("reply"),r("buttonType","reply")},className:"text-indigo-600"}),"Reply Buttons"]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("input",{type:"radio",checked:i==="cta",onChange:()=>{c("cta"),r("buttonType","cta")},className:"text-indigo-600"}),"CTA URL Button"]})]})]}),i==="reply"?s.jsxs("div",{className:"bg-gray-50 dark:bg-[#151515] p-3 rounded-lg border border-gray-100 dark:border-[#333]",children:[s.jsx(rt,{required:!0,children:"Reply Buttons (at least 1)"}),(n.buttons||[]).map((y,p)=>s.jsxs("div",{className:"mb-3",children:[s.jsx(rt,{children:`Button ${p+1} Label`}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Zt,{value:y.label,onChange:b=>h(p,b.target.value),placeholder:"Label",maxLength:20}),s.jsx("button",{onClick:()=>m(p),className:"text-red-500 hover:bg-red-50 p-2 rounded",children:s.jsx(aa,{size:16})})]}),s.jsxs("div",{className:"text-xs text-gray-400 text-right",children:[y.label.length,"/20"]})]},p)),(n.buttons?.length||0)<3&&s.jsx("button",{onClick:g,className:"w-full py-2 border border-dashed border-gray-300 dark:border-[#444] rounded text-gray-500 text-sm hover:bg-gray-100 dark:hover:bg-[#222]",children:"+ Add Button"})]}):s.jsxs("div",{className:"bg-gray-50 dark:bg-[#151515] p-3 rounded-lg border border-gray-100 dark:border-[#333]",children:[s.jsxs("div",{className:"mb-3",children:[s.jsx(rt,{required:!0,children:"Display Text"}),s.jsx(Zt,{value:n.cta?.displayText||"",onChange:y=>r("cta",{...n.cta,displayText:y.target.value})})]}),s.jsxs("div",{children:[s.jsx(rt,{required:!0,children:"URL"}),s.jsx(Zt,{value:n.cta?.url||"",onChange:y=>r("cta",{...n.cta,url:y.target.value}),placeholder:"https://"})]})]})]})},Bk=({data:n,onChange:r})=>{const i=n.body?.length>0&&n.buttonLabel&&n.sections?.length>0,c=()=>{r("sections",[...n.sections||[],{id:Date.now(),title:"",rows:[{id:Date.now()+1,title:""}]}])},d=(h,m,y)=>{const p=[...n.sections||[]];p[h][m]=y,r("sections",p)},f=h=>{const m=[...n.sections||[]];m[h].rows.push({id:Date.now(),title:"",description:""}),r("sections",m)},g=(h,m,y,p)=>{const b=[...n.sections||[]];b[h].rows[m][y]=p,r("sections",b)};return s.jsxs("div",{className:"space-y-4",children:[!i&&s.jsx(Mo,{}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Send interactive list message."}),s.jsxs("div",{children:[s.jsx(rt,{children:"Header (Optional)"}),s.jsx(Zt,{value:n.headerText||"",onChange:h=>r("headerText",h.target.value)})]}),s.jsxs("div",{children:[s.jsx(rt,{required:!0,children:"Body"}),s.jsx(Qd,{value:n.body||"",onChange:h=>r("body",h.target.value)})]}),s.jsxs("div",{children:[s.jsx(rt,{children:"Footer (Optional)"}),s.jsx(Zt,{value:n.footer||"",onChange:h=>r("footer",h.target.value)})]}),s.jsxs("div",{children:[s.jsx(rt,{required:!0,children:"Button Label"}),s.jsx(Zt,{value:n.buttonLabel||"",onChange:h=>r("buttonLabel",h.target.value),placeholder:"View List"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx(rt,{required:!0,children:"Sections"}),s.jsx("button",{onClick:c,className:"text-xs bg-indigo-50 text-indigo-600 px-2 py-1 rounded",children:"Add Section"})]}),(n.sections||[]).map((h,m)=>s.jsxs("div",{className:"border border-gray-200 dark:border-[#333] rounded-lg p-3 mb-3 bg-gray-50 dark:bg-[#151515]",children:[s.jsxs("div",{className:"mb-2",children:[s.jsx(rt,{required:!0,children:"Section Title"}),s.jsx(Zt,{value:h.title,onChange:y=>d(m,"title",y.target.value)})]}),s.jsxs("div",{className:"ml-2 pl-2 border-l-2 border-indigo-100 dark:border-[#333]",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx(rt,{children:"Rows"}),s.jsx("button",{onClick:()=>f(m),className:"text-xs text-indigo-500",children:"+ Row"})]}),h.rows.map((y,p)=>s.jsxs("div",{className:"mb-3 grid grid-cols-2 gap-2",children:[s.jsx("div",{className:"col-span-2",children:s.jsx(Zt,{placeholder:"Row Title",value:y.title,onChange:b=>g(m,p,"title",b.target.value)})}),s.jsx(Zt,{placeholder:"ID",value:y.id,onChange:b=>g(m,p,"id",b.target.value)}),s.jsx(Zt,{placeholder:"Desc",value:y.description,onChange:b=>g(m,p,"description",b.target.value)})]},y.id))]})]},h.id))]})]})},Uk=({data:n,onChange:r})=>{const i=[{name:"welcome_msg",id:"1",lang:"en",variables:0},{name:"offer_alert",id:"2",lang:"en",variables:1}];return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4",children:[s.jsx(rt,{required:!0,children:"Select Template"}),s.jsxs("select",{className:"nodrag w-full border border-gray-200 dark:border-[#333] bg-white dark:bg-[#0A0A0A] dark:text-gray-100 rounded-lg p-2.5 text-sm",value:n.template?.id||"",onChange:c=>{const d=i.find(f=>f.id===c.target.value);r("template",d)},children:[s.jsx("option",{value:"",children:"Select a template..."}),i.map(c=>s.jsx("option",{value:c.id,children:c.name},c.id))]})]}),n.template&&s.jsxs("div",{className:"bg-gray-50 dark:bg-[#151515] rounded-xl p-4 border border-gray-200 dark:border-[#333]",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold text-gray-800 dark:text-gray-100",children:[s.jsx(mr,{size:18,className:"text-teal-600"}),s.jsx("span",{children:n.template.name})]}),s.jsxs("div",{className:"flex gap-2 text-gray-400",children:[s.jsx(yr,{size:16,className:"cursor-pointer hover:text-gray-600"}),s.jsx(aa,{size:16,className:"cursor-pointer hover:text-red-500",onClick:()=>r("template",null)})]})]}),s.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("div",{children:["ID: ",n.template.id]}),s.jsxs("div",{children:["Lang: ",n.template.lang]}),s.jsxs("div",{children:["Variables: ",n.template.variables]})]}),s.jsx("div",{className:"mt-3 flex justify-end",children:s.jsx("span",{className:"bg-gray-200 dark:bg-[#333] text-gray-600 dark:text-gray-300 px-2 py-0.5 rounded text-xs",children:"Inactive"})})]})]})},qk=({data:n,onChange:r,type:i})=>{const c=[{id:"1",name:"VIP Customers"},{id:"2",name:"Leads"}],d=i==="addGroup";return s.jsxs("div",{className:"bg-gray-50 dark:bg-[#151515] rounded-xl p-4 border border-gray-200 dark:border-[#333]",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold text-gray-800 dark:text-gray-100",children:[d?s.jsx(da,{size:18,className:"text-teal-600"}):s.jsx(Ed,{size:18,className:"text-teal-600"}),s.jsx("span",{children:d?"Add to Group":"Remove from Group"})]}),s.jsxs("div",{className:"flex gap-2 text-gray-400",children:[s.jsx(yr,{size:16}),s.jsx(aa,{size:16})]})]}),s.jsxs("div",{className:"mb-2",children:[s.jsx(rt,{children:d?"Add to:":"Remove from:"}),s.jsxs("select",{className:"nodrag w-full bg-transparent border-b border-gray-300 dark:border-[#444] py-1 text-sm focus:border-indigo-500 outline-none dark:text-gray-200",value:n.groupId||"",onChange:f=>r("groupId",f.target.value),children:[s.jsx("option",{value:"",children:"No group selected"}),c.map(f=>s.jsx("option",{value:f.id,children:f.name},f.id))]})]}),s.jsxs("div",{className:"flex justify-between items-center mt-4",children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Action"}),s.jsx("span",{className:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 px-3 py-1 rounded-full text-xs font-medium",children:"Active"})]})]})},Vk=({data:n,onChange:r})=>{const i=n.mediaType&&n.file;return s.jsxs("div",{children:[!i&&s.jsx(Mo,{}),s.jsx(rt,{required:!0,children:"Media Type"}),s.jsxs("select",{className:"nodrag w-full border border-gray-200 dark:border-[#333] rounded-lg p-2 mb-2 dark:bg-[#0A0A0A] dark:text-white",value:n.mediaType,onChange:c=>r("mediaType",c.target.value),children:[s.jsx("option",{children:"Image"}),s.jsx("option",{children:"Video"})]}),s.jsx(rt,{children:"Upload"}),s.jsx("div",{className:"border border-dashed p-4 rounded text-center dark:border-[#333] text-gray-500",children:s.jsx("input",{type:"file",onChange:c=>r("file",c.target.files[0])})})]})};function Yk({id:n,data:r}){const{setNodes:i,deleteElements:c,getNodes:d}=Ao(),f=E.useCallback((y,p)=>{i(b=>b.map(v=>v.id===n?{...v,data:{...v.data,[y]:p}}:v))},[n,i]),g={onDelete:()=>c({nodes:[{id:n}]}),onDuplicate:()=>{const y=d().find(p=>p.id===n);y&&i(p=>p.concat({...y,id:`${y.data.subType}-${Date.now()}`,position:{x:y.position.x+50,y:y.position.y+50},selected:!1}))},onRename:y=>f("label",y)},h=Ok[r.subType]||al,m=()=>{switch(r.subType){case"text":return s.jsx(Hk,{data:r,onChange:f});case"buttons":return s.jsx(Lk,{data:r,onChange:f});case"list":return s.jsx(Bk,{data:r,onChange:f});case"template":return s.jsx(Uk,{data:r,onChange:f});case"addGroup":case"removeGroup":return s.jsx(qk,{data:r,onChange:f,type:r.subType});case"media":return s.jsx(Vk,{data:r,onChange:f});default:return s.jsxs("div",{className:"text-gray-500 text-center py-4",children:["Coming Soon: ",r.subType]})}};return s.jsxs("div",{className:"min-w-[320px] max-w-[360px] bg-white dark:bg-[#0F0F0F] rounded-xl shadow-lg border border-gray-200 dark:border-[#262626] font-sans transition-colors duration-200",children:[s.jsx(fa,{type:"target",position:he.Left,className:"!bg-gray-400 dark:!bg-neutral-600 !w-3 !h-3 !-left-1.5"}),s.jsxs("div",{className:"p-5",children:[["addGroup","removeGroup"].includes(r.subType)?null:s.jsx(Rk,{label:r.label,icon:h,actions:g}),m()]}),s.jsx(fa,{type:"source",position:he.Right,className:"!bg-gray-400 dark:!bg-neutral-600 !w-3 !h-3 !-right-1.5"})]})}function Gk({data:n}){return s.jsxs("div",{className:"min-w-[240px] bg-white dark:bg-[#0F0F0F] rounded-lg shadow-sm border border-gray-200 dark:border-[#262626] transition-colors duration-200",children:[s.jsx(fa,{type:"target",position:he.Top,className:"!bg-gray-400 dark:!bg-neutral-600 !w-3 !h-3"}),s.jsxs("div",{className:"p-3 border-b border-gray-50 dark:border-[#262626] flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-teal-50 dark:bg-teal-900/10 flex items-center justify-center border border-teal-100 dark:border-teal-900/30",children:s.jsx(lo,{size:16,className:"text-teal-600 dark:text-teal-400"})}),s.jsx("span",{className:"text-sm font-semibold text-gray-800 dark:text-neutral-100",children:"Condition"})]}),s.jsxs("div",{className:"p-3",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-neutral-500 mb-2",children:"Check if..."}),s.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-neutral-200 bg-gray-50 dark:bg-[#1A1A1A] p-2 rounded border border-gray-100 dark:border-[#262626]",children:n.condition||'User replies "Yes"'}),s.jsxs("div",{className:"flex justify-between mt-4",children:[s.jsx("div",{className:"text-xs font-semibold text-green-600 dark:text-green-400 uppercase",children:"True"}),s.jsx("div",{className:"text-xs font-semibold text-red-600 dark:text-red-400 uppercase",children:"False"})]})]}),s.jsx(fa,{type:"source",position:he.Bottom,id:"true",className:"!bg-green-500 !w-3 !h-3 !left-[25%]"}),s.jsx(fa,{type:"source",position:he.Bottom,id:"false",className:"!bg-red-500 !w-3 !h-3 !left-[75%]"})]})}const Xk={trigger:Dk,condition:Gk,action:Yk},Zk=[{id:"messages",title:"Messages",items:[{id:"text",label:"Simple text",icon:al,subType:"text"},{id:"media",label:"Media files",icon:sr,subType:"media"},{id:"buttons",label:"Interactive buttons",icon:Im,subType:"buttons"},{id:"list",label:"Interactive list",icon:kd,subType:"list"},{id:"template",label:"Template",icon:mr,subType:"template"}]},{id:"groups",title:"Group Actions",items:[{id:"addGroup",label:"Add to group",icon:da,subType:"addGroup"},{id:"removeGroup",label:"Remove from Group",icon:Ed,subType:"removeGroup"}]},{id:"tags",title:"Tag",items:[{id:"addTag",label:"Add Tags",icon:yo,subType:"addTag"},{id:"removeTag",label:"Remove Tags",icon:Wm,subType:"removeTag"}]},{id:"funnel",title:"Funnel",items:[{id:"addPipeline",label:"Add/Edit to Pipeline",icon:Jm,subType:"addPipeline"},{id:"removePipeline",label:"Remove from Pipeline",icon:aa,subType:"removePipeline"}]},{id:"others",title:"Others",items:[{id:"delay",label:"Delay",icon:lr,subType:"delay"}]}],Qk=[{value:"NEW_CONVERSATION",label:"New conversation"},{value:"KEYWORDS",label:"Text contains specific keywords"},{value:"HAS_TAGS",label:"Contact has specific tags"},{value:"PIPELINE_UPDATE",label:"Contact has been affected to a pipeline"},{value:"SHORT_RESPONSE",label:"Advanced Short response"}];function $k(){const{id:n}=ex(),r=es(),i=n==="new",c=E.useRef(null),[d,f,g]=nk([]),[h,m,y]=sk([]),[p,b]=E.useState("Untitled Flow"),[v,S]=E.useState("NEW_CONVERSATION"),[N,z]=E.useState({}),[A,k]=E.useState(!1),[M,j]=E.useState(!1),[_,L]=E.useState({messages:!0,groups:!0,tags:!0,funnel:!1,others:!0}),[q,Y]=E.useState(null);E.useEffect(()=>{i?f([{id:"trigger-1",type:"trigger",data:{triggerType:"NEW_CONVERSATION"},position:{x:100,y:300},deletable:!1}]):U()},[n]),E.useEffect(()=>{f(B=>B.map(T=>T.type==="trigger"?{...T,data:{...T.data,triggerType:v,...N}}:T))},[v,N,f]);const U=async()=>{try{const B=await ce.get(`/flows/${n}`);b(B.name),S(B.triggerType||"NEW_CONVERSATION"),z(B.triggerData||{}),k(B.isActive),B.content&&B.content.nodes&&(f(B.content.nodes),m(B.content.edges||[]))}catch(B){console.error("Failed to load flow",B)}},X=E.useCallback(B=>{m(T=>$x({...B,animated:!0,style:{stroke:"#94a3b8",strokeWidth:2}},T))},[m]),re=async()=>{j(!0);const B={name:p,content:{nodes:d,edges:h},triggerType:v,triggerData:N,isActive:A};try{let T;i?T=await ce.post("/flows",B):T=await ce.put(`/flows/${n}`,B),i&&r(`/automations/${T.id}`,{replace:!0})}catch(T){console.error("Failed to save",T),alert(`Failed to save: ${T.message}`)}finally{j(!1)}},$=B=>{const T={id:`${B.subType}-${Date.now()}`,type:"action",data:{label:B.label,subType:B.subType,description:"Click to configure"},position:{x:500,y:300}};f(D=>D.concat(T))},W=B=>{L(T=>({...T,[B]:!T[B]}))};return s.jsxs("div",{className:"h-screen flex bg-gray-50 dark:bg-[#050505] font-sans text-gray-900 dark:text-neutral-100 transition-colors duration-300",children:[s.jsxs("div",{className:"w-72 bg-white dark:bg-[#0F0F0F] border-r border-gray-200 dark:border-[#262626] flex flex-col shadow-sm z-10 transition-colors duration-300",children:[s.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-[#262626] flex items-center justify-between",children:[s.jsx("button",{onClick:()=>r("/automations"),className:"text-gray-500 hover:text-gray-800 dark:hover:text-neutral-200 transition-colors",children:s.jsx(Av,{size:18})}),s.jsx("span",{className:"font-semibold text-gray-700 dark:text-neutral-200",children:"Components"}),s.jsx("div",{className:"w-5"})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:Zk.map(B=>s.jsxs("div",{className:"border-b border-gray-100 dark:border-[#262626]",children:[s.jsxs("button",{onClick:()=>W(B.id),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-[#1A1A1A] transition-colors",children:[s.jsx("span",{className:"font-semibold text-sm text-gray-800 dark:text-neutral-200",children:B.title}),_[B.id]?s.jsx(xr,{size:16,className:"text-gray-400"}):s.jsx(Qm,{size:16,className:"text-gray-400"})]}),_[B.id]&&s.jsx("div",{className:"pb-2",children:B.items.map(T=>s.jsxs("div",{onClick:()=>$(T),className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-[#1A1A1A] cursor-pointer flex items-center gap-3 group transition-colors",children:[s.jsx(T.icon,{size:18,className:"text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-neutral-400 group-hover:text-gray-900 dark:group-hover:text-neutral-200 transition-colors",children:T.label}),s.jsx("div",{className:"flex-1"}),s.jsx("span",{className:"opacity-0 group-hover:opacity-100 text-gray-400",children:s.jsxs("div",{className:"grid grid-cols-2 gap-0.5",children:[s.jsx("div",{className:"w-1 h-1 rounded-full bg-current"}),s.jsx("div",{className:"w-1 h-1 rounded-full bg-current"}),s.jsx("div",{className:"w-1 h-1 rounded-full bg-current"}),s.jsx("div",{className:"w-1 h-1 rounded-full bg-current"})]})})]},T.id))})]},B.id))})]}),s.jsxs("div",{className:"flex-1 flex flex-col relative",children:[s.jsxs("div",{className:"h-16 bg-white dark:bg-[#0F0F0F] border-b border-gray-200 dark:border-[#262626] flex items-center justify-between px-6 shadow-sm z-10 transition-colors duration-300",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsx("input",{value:p,onChange:B=>b(B.target.value),className:"text-lg font-bold text-gray-800 dark:text-neutral-100 bg-transparent border-none focus:ring-0 placeholder-gray-400 dark:placeholder-neutral-600",placeholder:"Untitled Flow"})}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:()=>k(!A),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium border transition-colors ${A?"bg-green-50 border-green-200 text-green-700 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400":"bg-gray-50 border-gray-200 text-gray-600 hover:bg-gray-100 dark:bg-[#1A1A1A] dark:border-[#404040] dark:text-neutral-400 dark:hover:bg-[#262626]"}`,children:[A?s.jsx(Fm,{size:16}):s.jsx(Qs,{size:16}),A?"Active":"Draft"]}),s.jsxs("button",{onClick:re,disabled:M,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2 rounded-lg font-medium text-sm flex items-center gap-2 transition-all shadow-sm hover:shadow active:scale-95",children:[s.jsx($m,{size:18}),M?"Saving...":"Save Flow"]})]})]}),s.jsx("div",{className:"absolute top-20 right-6 z-20 w-80",children:q?.type==="trigger"?s.jsxs("div",{className:"bg-white dark:bg-[#0F0F0F] rounded-xl shadow-xl border border-gray-100 dark:border-[#262626] overflow-hidden animate-in fade-in slide-in-from-right-4 duration-200",children:[s.jsx("div",{className:"bg-gray-50 dark:bg-[#151515] px-4 py-3 border-b border-gray-100 dark:border-[#262626] flex items-center justify-between",children:s.jsx("span",{className:"font-semibold text-gray-700 dark:text-neutral-200 text-sm",children:"Configure Trigger"})}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-500 dark:text-neutral-400 mb-1",children:"Trigger Event"}),s.jsx("select",{value:v,onChange:B=>S(B.target.value),className:"w-full text-sm border-gray-200 dark:border-[#404040] dark:bg-[#1A1A1A] dark:text-neutral-200 rounded-lg focus:ring-indigo-500 focus:border-indigo-500",children:Qk.map(B=>s.jsx("option",{value:B.value,children:B.label},B.value))})]}),v==="KEYWORDS"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-500 dark:text-neutral-400 mb-1",children:"Keywords"}),s.jsx("input",{type:"text",placeholder:"e.g. hello, pricing",className:"w-full text-sm border-gray-200 dark:border-[#404040] dark:bg-[#1A1A1A] dark:text-neutral-200 rounded-lg focus:ring-indigo-500 focus:border-indigo-500",value:N.keyword||"",onChange:B=>z({...N,keyword:B.target.value})}),s.jsx("p",{className:"text-xs text-gray-400 dark:text-neutral-500 mt-1",children:"Comma separated"})]})]})]}):null}),s.jsxs("div",{className:"flex-1 bg-slate-50 dark:bg-[#050505] relative transition-colors duration-300",ref:c,children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.4] dark:opacity-[0.1]",style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"}}),s.jsxs(ak,{nodes:d,edges:h,onNodesChange:g,onEdgesChange:y,onConnect:X,onNodeClick:(B,T)=>Y(T),onPaneClick:()=>Y(null),nodeTypes:Xk,fitView:!0,attributionPosition:"bottom-right",className:"dark:invert-0",children:[s.jsx(ck,{color:"#cbd5e1",gap:20,size:1,className:"dark:opacity-10"}),s.jsx(xk,{className:"!bg-white dark:!bg-[#0F0F0F] !border-gray-200 dark:!border-[#262626] !shadow-sm [&>button]:!text-gray-600 dark:[&>button]:!text-neutral-400 hover:[&>button]:!bg-gray-50 dark:hover:[&>button]:!bg-[#1A1A1A]"}),s.jsx(Ak,{className:"!bg-white dark:!bg-[#0F0F0F] !border-gray-200 dark:!border-[#262626] !shadow-sm",nodeColor:"#e2e8f0",maskColor:"rgba(248, 250, 252, 0.7)"})]})]})]})]})}const Kk=()=>{const[n,r]=E.useState([]),[i,c]=E.useState(!0),[d,f]=E.useState("OPEN"),[g,h]=E.useState([]);E.useEffect(()=>{m(),y()},[d]);const m=async()=>{try{c(!0);const p=await ce.getConversations({status:d});r(p)}catch(p){console.error("Failed to fetch conversations:",p)}finally{c(!1)}},y=async()=>{try{const p=await ce.getTeamMembers();h(p)}catch(p){console.error("Failed to fetch team members:",p)}};return s.jsxs("div",{className:"inbox-page p-6 h-full flex flex-col bg-gray-50 dark:bg-black transition-colors duration-300",children:[s.jsxs("header",{className:"mb-6 flex justify-between items-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Team Inbox"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>f("OPEN"),className:`px-3 py-1 rounded text-sm transition-colors ${d==="OPEN"?"bg-blue-600 dark:bg-green-600 text-white":"bg-gray-200 dark:bg-zinc-800 text-gray-700 dark:text-zinc-300"}`,children:"Open"}),s.jsx("button",{onClick:()=>f("CLOSED"),className:`px-3 py-1 rounded text-sm transition-colors ${d==="CLOSED"?"bg-blue-600 dark:bg-green-600 text-white":"bg-gray-200 dark:bg-zinc-800 text-gray-700 dark:text-zinc-300"}`,children:"Closed"})]})]}),s.jsx("div",{className:"bg-white dark:bg-[#09090b] rounded-lg shadow overflow-hidden flex-1 border border-gray-100 dark:border-zinc-800",children:s.jsx("div",{className:"grid grid-cols-1 divide-y divide-gray-100 dark:divide-zinc-800",children:i?s.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"Loading conversations..."}):n.length===0?s.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No conversations found."}):n.map(p=>s.jsx(eo,{to:`/inbox/${p.id}`,className:"block hover:bg-gray-50 dark:hover:bg-zinc-900/50 transition-colors p-4",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-green-900/20 flex items-center justify-center text-blue-600 dark:text-green-500 font-semibold",children:p.contact?.name?.[0]||"?"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 dark:text-zinc-100",children:p.contact?.name||"Unknown Contact"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 truncate max-w-md",children:p.lastMessage||"No messages yet"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-xs text-gray-400 dark:text-zinc-500",children:p.updatedAt?new Date(p.updatedAt).toLocaleString():""}),p.assignedTo?s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 mt-1",children:p.assignedTo.name}):s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 dark:bg-zinc-800 text-gray-800 dark:text-zinc-300 mt-1",children:"Unassigned"})]})]})},p.id))})})]})},Fk=({contactId:n})=>{const[r,i]=E.useState([]),[c,d]=E.useState(""),[f,g]=E.useState(!0);E.useEffect(()=>{n&&h()},[n]);const h=async()=>{try{g(!0);const y=await ce.getNotes(n);i(y)}catch(y){console.error("Failed to fetch notes:",y)}finally{g(!1)}},m=async y=>{if(y.preventDefault(),!!c.trim())try{await ce.addNote({contactId:parseInt(n),content:c}),d(""),h()}catch(p){console.error("Failed to add note:",p)}};return s.jsxs("div",{className:"internal-notes bg-gray-50 dark:bg-zinc-900/30 p-4 rounded-lg border border-gray-200 dark:border-zinc-800",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-zinc-300 mb-3",children:"Internal Notes"}),s.jsx("div",{className:"notes-list space-y-3 mb-4 max-h-60 overflow-y-auto",children:f?s.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Loading notes..."}):r.length===0?s.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 italic",children:"No notes yet."}):r.map(y=>s.jsxs("div",{className:"note-item bg-white dark:bg-zinc-900 p-2 rounded border border-gray-100 dark:border-zinc-800 shadow-sm",children:[s.jsx("p",{className:"text-xs text-gray-800 dark:text-zinc-200 whitespace-pre-wrap",children:y.content}),s.jsxs("div",{className:"flex justify-between items-center mt-1",children:[s.jsx("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400",children:y.author?y.author.name:"Unknown User"}),s.jsx("span",{className:"text-[10px] text-gray-400 dark:text-zinc-500",children:new Date(y.createdAt).toLocaleString()})]})]},y.id))}),s.jsxs("form",{onSubmit:m,className:"note-form",children:[s.jsx("textarea",{value:c,onChange:y=>d(y.target.value),placeholder:"Add an internal note...",className:"w-full text-xs p-2 border border-gray-300 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white rounded mb-2 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:focus:ring-green-500 dark:placeholder-zinc-500",rows:"2"}),s.jsx("button",{type:"submit",disabled:!c.trim(),className:"w-full bg-gray-600 dark:bg-zinc-700 hover:bg-gray-700 dark:hover:bg-zinc-600 text-white text-xs py-1 px-2 rounded disabled:opacity-50 transition-colors",children:"Add Note"})]})]})},Jk=()=>{const{id:n}=ex(),r=es(),[i,c]=E.useState(null),[d,f]=E.useState([]),[g,h]=E.useState(""),[m,y]=E.useState(!0),[p,b]=E.useState([]),v=E.useRef(null);E.useEffect(()=>{n&&(N(),z())},[n]),E.useEffect(()=>{S()},[d]);const S=()=>{v.current?.scrollIntoView({behavior:"smooth"})},N=async()=>{try{y(!0);const j=await ce.getConversation(n);c(j),f(j.messages||[])}catch(j){console.error("Failed to fetch conversation:",j)}finally{y(!1)}},z=async()=>{try{const j=await ce.getTeamMembers();b(j)}catch(j){console.error("Failed to fetch team members:",j)}},A=async j=>{if(j.preventDefault(),!!g.trim())try{const _=await ce.sendMessage(n,{content:g});f([...d,_]),h("")}catch(_){console.error("Failed to send message:",_)}},k=async j=>{const _=j.target.value;try{const L=await ce.assignConversation(n,_);c(q=>({...q,assignedTo:L.assignedTo,assignedToId:L.assignedToId}))}catch(L){console.error("Failed to assign agent:",L)}},M=async j=>{try{const _=await ce.updateConversationStatus(n,j);c(L=>({...L,status:_.status}))}catch(_){console.error("Failed to update status:",_)}};return m?s.jsx("div",{className:"p-6 text-center",children:"Loading conversation..."}):i?s.jsxs("div",{className:"conversation-page h-[calc(100vh-64px)] flex flex-col md:flex-row bg-white dark:bg-gray-900",children:[s.jsxs("div",{className:"flex-1 flex flex-col border-r border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-white dark:bg-gray-800",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>r("/inbox"),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 mr-2 md:hidden",children:" Back"}),s.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400 font-semibold text-lg",children:i.contact?.name?.[0]||"C"}),s.jsxs("div",{children:[s.jsx("h2",{className:"font-bold text-gray-800 dark:text-white",children:i.contact?.name}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:i.contact?.phone})]})]}),s.jsx("div",{className:"flex items-center gap-2",children:i.status==="OPEN"?s.jsx("button",{onClick:()=>M("CLOSED"),className:"text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 px-3 py-1 rounded",children:"Mark Closed"}):s.jsx("button",{onClick:()=>M("OPEN"),className:"text-xs bg-green-50 dark:bg-green-900/10 hover:bg-green-100 dark:hover:bg-green-900/20 text-green-700 dark:text-green-400 px-3 py-1 rounded",children:"Reopen"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50 dark:bg-gray-900 space-y-4",children:[d.map(j=>{const _=j.direction==="OUTBOUND";return s.jsx("div",{className:`flex ${_?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${_?"bg-blue-600 text-white rounded-br-none":"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-800 dark:text-gray-100 rounded-bl-none"} shadow-sm`,children:[s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:j.content}),s.jsxs("div",{className:`text-[10px] mt-1 ${_?"text-blue-100":"text-gray-400 dark:text-gray-500"}`,children:[new Date(j.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),_&&j.sender&&`  ${j.sender.name}`]})]})},j.id)}),s.jsx("div",{ref:v})]}),s.jsx("div",{className:"p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("form",{onSubmit:A,className:"flex gap-2",children:[s.jsx("input",{type:"text",value:g,onChange:j=>h(j.target.value),placeholder:"Type a message...",className:"flex-1 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:placeholder-gray-400"}),s.jsx("button",{type:"submit",disabled:!g.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-colors",children:"Send"})]})})]}),s.jsxs("div",{className:"w-full md:w-80 bg-white dark:bg-gray-800 p-4 overflow-y-auto border-l border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:"Assignment"}),s.jsxs("select",{value:i.assignedToId||"",onChange:k,className:"w-full p-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Unassigned"}),p.map(j=>s.jsx("option",{value:j.id,children:j.name},j.id))]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:"Contact Info"}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded border border-gray-100 dark:border-gray-600",children:[s.jsxs("p",{className:"text-sm text-gray-800 dark:text-gray-200 mb-1",children:[s.jsx("span",{className:"font-semibold",children:"Name:"})," ",i.contact?.name]}),s.jsxs("p",{className:"text-sm text-gray-800 dark:text-gray-200 mb-1",children:[s.jsx("span",{className:"font-semibold",children:"Phone:"})," ",i.contact?.phone]}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:i.contact?.tags?.map((j,_)=>s.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 px-2 py-0.5 rounded-full",children:j},_))})]})]}),s.jsx(Fk,{contactId:i.contactId})]})]}):s.jsx("div",{className:"p-6 text-center",children:"Conversation not found"})},Wk=()=>{const[n,r]=E.useState([]),[i,c]=E.useState(!0),[d,f]=E.useState("Verified"),[g,h]=E.useState(!1),[m,y]=E.useState({name:"",email:"",role:"AGENT",avatar:""});E.useEffect(()=>{p()},[]);const p=async()=>{try{c(!0);const N=await ce.getTeamMembers();r(N)}catch(N){console.error("Failed to fetch team members:",N)}finally{c(!1)}},b=N=>{const{name:z,value:A}=N.target;y(k=>({...k,[z]:A}))},v=async N=>{N.preventDefault();try{await ce.addTeamMember(m),p(),h(!1),y({name:"",email:"",role:"AGENT",avatar:""})}catch(z){console.error("Failed to add team member:",z),alert("Failed to add team member")}},S=async N=>{if(window.confirm("Are you sure you want to remove this team member?"))try{await ce.deleteTeamMember(N),p()}catch(z){console.error("Failed to delete member:",z)}};return s.jsxs("div",{className:"team-page p-6 bg-gray-50 dark:bg-black min-h-full transition-colors duration-300",children:[s.jsxs("div",{className:"flex gap-8 border-b border-gray-200 dark:border-zinc-800 mb-8",children:[s.jsxs("button",{className:`pb-3 text-sm font-medium transition-colors relative ${d==="Verified"?"text-blue-600 dark:text-green-500":"text-gray-500 dark:text-zinc-500 hover:text-gray-700 dark:hover:text-zinc-300"}`,onClick:()=>f("Verified"),children:["Verified",d==="Verified"&&s.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 dark:bg-green-500 rounded-t-full"})]}),s.jsxs("button",{className:`pb-3 text-sm font-medium transition-colors relative ${d==="Unverified"?"text-blue-600 dark:text-green-500":"text-gray-500 dark:text-zinc-500 hover:text-gray-700 dark:hover:text-zinc-300"}`,onClick:()=>f("Unverified"),children:["Unverified",d==="Unverified"&&s.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 dark:bg-green-500 rounded-t-full"})]})]}),s.jsxs("div",{className:"flex justify-between items-start mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:"Team"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Add, edit, and delete accounts in your team"})]}),s.jsxs("button",{onClick:()=>h(!0),className:"bg-blue-600 hover:bg-blue-700 dark:bg-green-600 dark:hover:bg-green-700 text-white px-4 py-2 rounded-full text-sm font-medium flex items-center gap-2 transition-colors shadow-sm",children:["Invite User ",s.jsx(jn,{size:16})]})]}),s.jsxs("div",{className:"bg-white dark:bg-[#09090b] p-4 rounded-xl shadow-sm mb-6 flex justify-between items-center border border-gray-100 dark:border-zinc-800",children:[s.jsxs("div",{className:"relative w-64",children:[s.jsx(Cd,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500",size:18}),s.jsx("input",{type:"text",placeholder:"Search Team",className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-zinc-900/50 border-none rounded-lg text-sm focus:ring-2 focus:ring-blue-100 dark:focus:ring-green-900 focus:bg-white dark:focus:bg-zinc-900 transition-all outline-none text-gray-700 dark:text-zinc-200 placeholder-gray-400 dark:placeholder-zinc-600"})]}),s.jsxs("button",{className:"flex items-center gap-2 text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-200 border border-gray-200 dark:border-zinc-800 hover:border-gray-300 dark:hover:border-zinc-700 rounded-lg px-3 py-2 text-sm transition-all bg-white dark:bg-[#09090b]",children:[s.jsx(Tv,{size:16}),"Columns"]})]}),s.jsx("div",{className:"bg-white dark:bg-[#09090b] rounded-xl shadow-sm overflow-hidden border border-gray-100 dark:border-zinc-800",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-blue-50/50 dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800",children:[s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:"Name"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:"Email"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:"Role"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:"Active/Inactive"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:"Assignable"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 dark:text-zinc-200",children:"Last updated"}),s.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-900 dark:text-zinc-200",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-50 dark:divide-zinc-800",children:i?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500 dark:text-zinc-500 text-sm",children:"Loading..."})}):n.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500 dark:text-zinc-500 text-sm",children:"No team members found."})}):n.map(N=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-zinc-900/50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"flex items-center",children:s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-zinc-200",children:N.name})})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-zinc-400",children:N.email}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"text-sm text-gray-900 dark:text-zinc-300 capitalize",children:N.role.toLowerCase()})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsx("div",{className:"w-8 h-4 bg-green-200 dark:bg-green-900/40 rounded-full relative cursor-pointer",children:s.jsx("div",{className:"absolute right-0.5 top-0.5 w-3 h-3 bg-white rounded-full shadow-sm"})})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsx("input",{type:"checkbox",className:"rounded text-blue-600 dark:text-green-600 focus:ring-blue-500 dark:focus:ring-green-500 border-gray-300 dark:border-zinc-700 dark:bg-zinc-900",defaultChecked:!0})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-zinc-500",children:[new Date(N.updatedAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})," ",new Date(N.updatedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:s.jsx("button",{onClick:()=>S(N.id),className:"text-gray-400 dark:text-zinc-600 hover:text-red-600 dark:hover:text-red-500 transition-colors",children:"Remove"})})]},N.id))})]})}),g&&s.jsx("div",{className:"fixed inset-0 bg-black/20 dark:bg-black/70 backdrop-blur-sm overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:s.jsxs("div",{className:"relative p-6 border dark:border-zinc-800 w-96 shadow-2xl rounded-xl bg-white dark:bg-[#09090b] animate-fade-in up",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:"Invite Team Member"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 mb-4",children:"Send an invitation to join your team."}),s.jsxs("form",{onSubmit:v,children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-gray-700 dark:text-zinc-300 text-xs font-semibold mb-1.5 uppercase tracking-wide",children:"Name"}),s.jsx("input",{type:"text",name:"name",value:m.name,onChange:b,className:"w-full px-3 py-2 border border-gray-200 dark:border-zinc-800 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-green-500/20 focus:border-blue-500 dark:focus:border-green-500 transition-all placeholder-gray-300 dark:placeholder-zinc-600 dark:bg-zinc-900 dark:text-white",placeholder:"Jane Doe",required:!0})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-gray-700 dark:text-zinc-300 text-xs font-semibold mb-1.5 uppercase tracking-wide",children:"Email"}),s.jsx("input",{type:"email",name:"email",value:m.email,onChange:b,className:"w-full px-3 py-2 border border-gray-200 dark:border-zinc-800 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-green-500/20 focus:border-blue-500 dark:focus:border-green-500 transition-all placeholder-gray-300 dark:placeholder-zinc-600 dark:bg-zinc-900 dark:text-white",placeholder:"jane@example.com",required:!0})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-gray-700 dark:text-zinc-300 text-xs font-semibold mb-1.5 uppercase tracking-wide",children:"Role"}),s.jsxs("select",{name:"role",value:m.role,onChange:b,className:"w-full px-3 py-2 border border-gray-200 dark:border-zinc-800 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-green-500/20 focus:border-blue-500 dark:focus:border-green-500 transition-all bg-white dark:bg-zinc-900 dark:text-white",children:[s.jsx("option",{value:"AGENT",children:"Agent"}),s.jsx("option",{value:"MANAGER",children:"Manager"}),s.jsx("option",{value:"ADMIN",children:"Admin"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 bg-gray-100 dark:bg-zinc-900 text-gray-700 dark:text-zinc-300 text-sm font-medium rounded-lg hover:bg-gray-200 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 dark:bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 dark:hover:bg-green-700 shadow-sm shadow-blue-200 dark:shadow-none transition-colors",children:"Send Invitation"})]})]})]})})]})};function Ik(){return s.jsx(Qv,{children:s.jsx($v,{children:s.jsx(Xv,{children:s.jsx(Dv,{children:s.jsxs(Ov,{children:[s.jsx(yt,{path:"/login",element:s.jsx(e1,{})}),s.jsxs(yt,{path:"/",element:s.jsx(Kv,{children:s.jsx(Fv,{})}),children:[s.jsx(yt,{index:!0,element:s.jsx(Jv,{})}),s.jsx(yt,{path:"contacts",element:s.jsx(Iv,{})}),s.jsx(yt,{path:"lists",element:s.jsx(Pv,{})}),s.jsx(yt,{path:"campaigns",element:s.jsx(a1,{})}),s.jsx(yt,{path:"campaigns/new",element:s.jsx(t1,{})}),s.jsx(yt,{path:"templates",element:s.jsx(l1,{})}),s.jsx(yt,{path:"media",element:s.jsx(n1,{})}),s.jsx(yt,{path:"settings",element:s.jsx(r1,{})}),s.jsx(yt,{path:"automations",element:s.jsx(i1,{})}),s.jsx(yt,{path:"automations/:id",element:s.jsx($k,{})}),s.jsx(yt,{path:"inbox",element:s.jsx(Kk,{})}),s.jsx(yt,{path:"inbox/:id",element:s.jsx(Jk,{})}),s.jsx(yt,{path:"team",element:s.jsx(Wk,{})})]})]})})})})})}Vv.createRoot(document.getElementById("root")).render(s.jsx(E.StrictMode,{children:s.jsx(Ik,{})}));
